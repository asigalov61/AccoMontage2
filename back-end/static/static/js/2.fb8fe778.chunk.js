/*! For license information please see 2.fb8fe778.chunk.js.LICENSE.txt */
(this.webpackJsonpchorderator=this.webpackJsonpchorderator||[]).push([[2],[function(e,t,n){"use strict";n.d(t,"d",(function(){return At})),n.d(t,"e",(function(){return Pt})),n.d(t,"f",(function(){return Ft})),n.d(t,"g",(function(){return qt})),n.d(t,"bc",(function(){return Bt})),n.d(t,"mc",(function(){return It})),n.d(t,"tc",(function(){return Ut})),n.d(t,"Lc",(function(){return Vt})),n.d(t,"id",(function(){return fe.a})),n.d(t,"jd",(function(){return fe.b})),n.d(t,"qd",(function(){return fe.c})),n.d(t,"vc",(function(){return Wt.a})),n.d(t,"Rh",(function(){return Wt.b})),n.d(t,"pi",(function(){return Wt.c})),n.d(t,"td",(function(){return Gt.b})),n.d(t,"ud",(function(){return Gt.c})),n.d(t,"vd",(function(){return Gt.d})),n.d(t,"wd",(function(){return Gt.e})),n.d(t,"xd",(function(){return Gt.f})),n.d(t,"zd",(function(){return Gt.h})),n.d(t,"Ad",(function(){return Gt.i})),n.d(t,"Bd",(function(){return Gt.j})),n.d(t,"Cd",(function(){return Gt.k})),n.d(t,"Dd",(function(){return Gt.l})),n.d(t,"Ed",(function(){return Gt.m})),n.d(t,"Fd",(function(){return Gt.n})),n.d(t,"Gd",(function(){return Gt.o})),n.d(t,"Hd",(function(){return Gt.p})),n.d(t,"Id",(function(){return Gt.q})),n.d(t,"Jd",(function(){return Gt.r})),n.d(t,"Md",(function(){return Gt.s})),n.d(t,"Rd",(function(){return Gt.x})),n.d(t,"Nd",(function(){return Gt.t})),n.d(t,"Od",(function(){return Gt.u})),n.d(t,"Pd",(function(){return Gt.v})),n.d(t,"Qd",(function(){return Gt.w})),n.d(t,"Sd",(function(){return Gt.y})),n.d(t,"Ud",(function(){return Gt.A})),n.d(t,"Wd",(function(){return Gt.B})),n.d(t,"Xd",(function(){return Gt.C})),n.d(t,"Yd",(function(){return Gt.D})),n.d(t,"Zd",(function(){return Gt.E})),n.d(t,"ae",(function(){return Gt.F})),n.d(t,"be",(function(){return Gt.G})),n.d(t,"ce",(function(){return Gt.H})),n.d(t,"de",(function(){return Gt.I})),n.d(t,"ee",(function(){return Gt.J})),n.d(t,"fe",(function(){return Gt.K})),n.d(t,"ge",(function(){return Gt.L})),n.d(t,"he",(function(){return Gt.M})),n.d(t,"ie",(function(){return Gt.N})),n.d(t,"je",(function(){return Gt.O})),n.d(t,"ke",(function(){return Gt.P})),n.d(t,"le",(function(){return Gt.Q})),n.d(t,"ne",(function(){return Gt.R})),n.d(t,"oe",(function(){return Gt.S})),n.d(t,"qe",(function(){return Gt.U})),n.d(t,"se",(function(){return Gt.V})),n.d(t,"ue",(function(){return Gt.W})),n.d(t,"ve",(function(){return Gt.X})),n.d(t,"xe",(function(){return Gt.Y})),n.d(t,"ye",(function(){return Gt.Z})),n.d(t,"Ce",(function(){return Gt.ab})),n.d(t,"De",(function(){return Gt.bb})),n.d(t,"Fe",(function(){return Gt.db})),n.d(t,"He",(function(){return Gt.fb})),n.d(t,"Ne",(function(){return Gt.hb})),n.d(t,"Pe",(function(){return Gt.jb})),n.d(t,"Qe",(function(){return Gt.kb})),n.d(t,"Re",(function(){return Gt.lb})),n.d(t,"Se",(function(){return Gt.mb})),n.d(t,"Te",(function(){return Gt.nb})),n.d(t,"Ve",(function(){return Gt.pb})),n.d(t,"Ye",(function(){return Gt.qb})),n.d(t,"Ze",(function(){return Gt.rb})),n.d(t,"bf",(function(){return Gt.tb})),n.d(t,"kf",(function(){return Gt.vb})),n.d(t,"lf",(function(){return Gt.wb})),n.d(t,"pf",(function(){return Gt.Ab})),n.d(t,"uf",(function(){return Gt.Eb})),n.d(t,"vf",(function(){return Gt.Fb})),n.d(t,"wf",(function(){return Gt.Gb})),n.d(t,"zf",(function(){return Gt.Hb})),n.d(t,"Af",(function(){return Gt.Ib})),n.d(t,"Bf",(function(){return Gt.Jb})),n.d(t,"Ff",(function(){return Gt.Nb})),n.d(t,"Gf",(function(){return Gt.Ob})),n.d(t,"Hf",(function(){return Gt.Pb})),n.d(t,"If",(function(){return Gt.Qb})),n.d(t,"Jf",(function(){return Gt.Rb})),n.d(t,"Kf",(function(){return Gt.Sb})),n.d(t,"Lf",(function(){return Gt.Tb})),n.d(t,"Mf",(function(){return Gt.Ub})),n.d(t,"Nf",(function(){return Gt.Vb})),n.d(t,"Of",(function(){return Gt.Wb})),n.d(t,"Pf",(function(){return Gt.Xb})),n.d(t,"Rf",(function(){return Gt.Zb})),n.d(t,"Tf",(function(){return Gt.ac})),n.d(t,"Uf",(function(){return Gt.bc})),n.d(t,"Vf",(function(){return Gt.cc})),n.d(t,"Wf",(function(){return Gt.dc})),n.d(t,"Xf",(function(){return Gt.ec})),n.d(t,"Zf",(function(){return Gt.gc})),n.d(t,"bg",(function(){return Gt.hc})),n.d(t,"cg",(function(){return Gt.ic})),n.d(t,"eg",(function(){return Gt.kc})),n.d(t,"fg",(function(){return Gt.lc})),n.d(t,"hg",(function(){return Gt.nc})),n.d(t,"jg",(function(){return Gt.pc})),n.d(t,"lg",(function(){return Gt.rc})),n.d(t,"mg",(function(){return Gt.sc})),n.d(t,"ng",(function(){return Gt.tc})),n.d(t,"qg",(function(){return Gt.vc})),n.d(t,"sg",(function(){return Gt.xc})),n.d(t,"tg",(function(){return Gt.yc})),n.d(t,"ug",(function(){return Gt.zc})),n.d(t,"wg",(function(){return Gt.Bc})),n.d(t,"xg",(function(){return Gt.Cc})),n.d(t,"yg",(function(){return Gt.Dc})),n.d(t,"zg",(function(){return Gt.Ec})),n.d(t,"Ag",(function(){return Gt.Fc})),n.d(t,"Bg",(function(){return Gt.Gc})),n.d(t,"Cg",(function(){return Gt.Hc})),n.d(t,"Dg",(function(){return Gt.Ic})),n.d(t,"Fg",(function(){return Gt.Kc})),n.d(t,"Gg",(function(){return Gt.Lc})),n.d(t,"Hg",(function(){return Gt.Mc})),n.d(t,"Jg",(function(){return Gt.Nc})),n.d(t,"Kg",(function(){return Gt.Oc})),n.d(t,"Lg",(function(){return Gt.Pc})),n.d(t,"Mg",(function(){return Gt.Qc})),n.d(t,"Ng",(function(){return Gt.Rc})),n.d(t,"Pg",(function(){return Gt.Sc})),n.d(t,"Qg",(function(){return Gt.Tc})),n.d(t,"Ug",(function(){return Gt.Uc})),n.d(t,"Vg",(function(){return Gt.Vc})),n.d(t,"Xg",(function(){return Gt.Wc})),n.d(t,"Yg",(function(){return Gt.Xc})),n.d(t,"Zg",(function(){return Gt.Yc})),n.d(t,"ah",(function(){return Gt.Zc})),n.d(t,"bh",(function(){return Gt.ad})),n.d(t,"ch",(function(){return Gt.bd})),n.d(t,"eh",(function(){return Gt.dd})),n.d(t,"fh",(function(){return Gt.ed})),n.d(t,"gh",(function(){return Gt.fd})),n.d(t,"jh",(function(){return Gt.hd})),n.d(t,"kh",(function(){return Gt.id})),n.d(t,"oh",(function(){return Gt.jd})),n.d(t,"ph",(function(){return Gt.kd})),n.d(t,"qh",(function(){return Gt.ld})),n.d(t,"sh",(function(){return Gt.nd})),n.d(t,"th",(function(){return Gt.od})),n.d(t,"uh",(function(){return Gt.pd})),n.d(t,"vh",(function(){return Gt.qd})),n.d(t,"wh",(function(){return Gt.rd})),n.d(t,"xh",(function(){return Gt.sd})),n.d(t,"yh",(function(){return Gt.td})),n.d(t,"Ah",(function(){return Gt.ud})),n.d(t,"Bh",(function(){return Gt.vd})),n.d(t,"Ch",(function(){return Gt.wd})),n.d(t,"Ue",(function(){return Gt.ob})),n.d(t,"of",(function(){return Gt.zb})),n.d(t,"tf",(function(){return Gt.Db})),n.d(t,"dh",(function(){return Gt.cd})),n.d(t,"Fh",(function(){return Gt.zd})),n.d(t,"Gh",(function(){return Gt.Ad})),n.d(t,"Hh",(function(){return Gt.Bd})),n.d(t,"Ih",(function(){return Gt.Cd})),n.d(t,"Kh",(function(){return Gt.Ed})),n.d(t,"Lh",(function(){return Gt.Fd})),n.d(t,"Mh",(function(){return Gt.Gd})),n.d(t,"Nh",(function(){return Gt.Hd})),n.d(t,"Oh",(function(){return Gt.Id})),n.d(t,"Qh",(function(){return Gt.Kd})),n.d(t,"Sh",(function(){return Gt.Ld})),n.d(t,"Th",(function(){return Gt.Md})),n.d(t,"Uh",(function(){return Gt.Nd})),n.d(t,"Vh",(function(){return Gt.Od})),n.d(t,"Wh",(function(){return Gt.Pd})),n.d(t,"Xh",(function(){return Gt.Qd})),n.d(t,"Yh",(function(){return Gt.Rd})),n.d(t,"Zh",(function(){return Gt.Sd})),n.d(t,"ai",(function(){return Gt.Td})),n.d(t,"ei",(function(){return Gt.Ud})),n.d(t,"gi",(function(){return Gt.Vd})),n.d(t,"ji",(function(){return Gt.Xd})),n.d(t,"ki",(function(){return Gt.Yd})),n.d(t,"ni",(function(){return Gt.Zd})),n.d(t,"oi",(function(){return Gt.ae})),n.d(t,"ti",(function(){return Gt.be})),n.d(t,"wi",(function(){return Gt.ce})),n.d(t,"xi",(function(){return Gt.de})),n.d(t,"yi",(function(){return Gt.ee})),n.d(t,"zi",(function(){return Gt.fe})),n.d(t,"Td",(function(){return Gt.z})),n.d(t,"Oe",(function(){return Gt.ib})),n.d(t,"mf",(function(){return Gt.xb})),n.d(t,"nf",(function(){return Gt.yb})),n.d(t,"Cf",(function(){return Gt.Kb})),n.d(t,"Df",(function(){return Gt.Lb})),n.d(t,"rg",(function(){return Gt.wc})),n.d(t,"yd",(function(){return Gt.g})),n.d(t,"Ee",(function(){return Gt.cb})),n.d(t,"Yf",(function(){return Gt.fc})),n.d(t,"dg",(function(){return Gt.jc})),n.d(t,"gg",(function(){return Gt.mc})),n.d(t,"kg",(function(){return Gt.qc})),n.d(t,"Eg",(function(){return Gt.Jc})),n.d(t,"Jh",(function(){return Gt.Dd})),n.d(t,"Ph",(function(){return Gt.Jd})),n.d(t,"ii",(function(){return Gt.Wd})),n.d(t,"pg",(function(){return Gt.uc})),n.d(t,"ig",(function(){return Gt.oc})),n.d(t,"hh",(function(){return Gt.gd})),n.d(t,"Dh",(function(){return Gt.xd})),n.d(t,"cf",(function(){return Gt.ub})),n.d(t,"Ge",(function(){return Gt.eb})),n.d(t,"Ke",(function(){return Gt.gb})),n.d(t,"pe",(function(){return Gt.T})),n.d(t,"rf",(function(){return Gt.Cb})),n.d(t,"vg",(function(){return Gt.Ac})),n.d(t,"jc",(function(){return Gt.a})),n.d(t,"qf",(function(){return Gt.Bb})),n.d(t,"Ef",(function(){return Gt.Mb})),n.d(t,"Qf",(function(){return Gt.Yb})),n.d(t,"Eh",(function(){return Gt.yd})),n.d(t,"af",(function(){return Gt.sb})),n.d(t,"rh",(function(){return Gt.md})),n.d(t,"zc",(function(){return Ht.a})),n.d(t,"hi",(function(){return Xt})),n.d(t,"Je",(function(){return wt.g})),n.d(t,"Ie",(function(){return wt.f})),n.d(t,"ze",(function(){return wt.c})),n.d(t,"te",(function(){return wt.b})),n.d(t,"Be",(function(){return wt.e})),n.d(t,"Le",(function(){return wt.h})),n.d(t,"ag",(function(){return wt.m})),n.d(t,"Ig",(function(){return wt.n})),n.d(t,"di",(function(){return wt.t})),n.d(t,"Ae",(function(){return wt.d})),n.d(t,"xf",(function(){return wt.l})),n.d(t,"fi",(function(){return wt.u})),n.d(t,"mh",(function(){return wt.r})),n.d(t,"Og",(function(){return wt.o})),n.d(t,"ef",(function(){return wt.k})),n.d(t,"Wg",(function(){return wt.q})),n.d(t,"We",(function(){return wt.i})),n.d(t,"Xe",(function(){return wt.j})),n.d(t,"Rg",(function(){return wt.p})),n.d(t,"Kd",(function(){return wt.a})),n.d(t,"nh",(function(){return wt.s})),n.d(t,"gf",(function(){return We.c})),n.d(t,"ff",(function(){return We.b})),n.d(t,"hf",(function(){return We.d})),n.d(t,"Tg",(function(){return We.f})),n.d(t,"Sg",(function(){return We.e})),n.d(t,"mi",(function(){return We.h})),n.d(t,"li",(function(){return We.g})),n.d(t,"me",(function(){return We.a})),n.d(t,"re",(function(){return Nt.a})),n.d(t,"if",(function(){return Nt.b})),n.d(t,"jf",(function(){return Nt.c})),n.d(t,"ri",(function(){return Nt.d})),n.d(t,"si",(function(){return Nt.e})),n.d(t,"ui",(function(){return Nt.f})),n.d(t,"db",(function(){return v.b})),n.d(t,"Me",(function(){return v.c})),n.d(t,"ab",(function(){return v.a})),n.d(t,"vi",(function(){return yt})),n.d(t,"og",(function(){return Qt.a})),n.d(t,"Vd",(function(){return i})),n.d(t,"sf",(function(){return r})),n.d(t,"Sf",(function(){return a})),n.d(t,"lh",(function(){return c})),n.d(t,"ci",(function(){return bt})),n.d(t,"qi",(function(){return gt})),n.d(t,"Ld",(function(){return l})),n.d(t,"bi",(function(){return mt})),n.d(t,"zh",(function(){return s})),n.d(t,"df",(function(){return o})),n.d(t,"ih",(function(){return Ye})),n.d(t,"we",(function(){return Ln})),n.d(t,"yf",(function(){return f})),n.d(t,"Cb",(function(){return Vn.b})),n.d(t,"Q",(function(){return Vn.a})),n.d(t,"a",(function(){return Ue.a})),n.d(t,"b",(function(){return Ue.b})),n.d(t,"c",(function(){return Ue.c})),n.d(t,"h",(function(){return Ue.d})),n.d(t,"i",(function(){return Ue.e})),n.d(t,"j",(function(){return Ue.f})),n.d(t,"k",(function(){return Ue.g})),n.d(t,"l",(function(){return Ue.h})),n.d(t,"m",(function(){return Ue.i})),n.d(t,"n",(function(){return Ue.j})),n.d(t,"o",(function(){return Ue.k})),n.d(t,"p",(function(){return Ue.l})),n.d(t,"r",(function(){return Ue.n})),n.d(t,"q",(function(){return Ue.m})),n.d(t,"s",(function(){return Ue.o})),n.d(t,"v",(function(){return Ue.r})),n.d(t,"t",(function(){return Ue.p})),n.d(t,"u",(function(){return Ue.q})),n.d(t,"w",(function(){return Ue.s})),n.d(t,"x",(function(){return Ue.t})),n.d(t,"y",(function(){return Ue.u})),n.d(t,"z",(function(){return Ue.v})),n.d(t,"A",(function(){return Ue.w})),n.d(t,"B",(function(){return Ue.x})),n.d(t,"C",(function(){return Ue.y})),n.d(t,"D",(function(){return Ue.z})),n.d(t,"E",(function(){return Ue.A})),n.d(t,"F",(function(){return Ue.B})),n.d(t,"G",(function(){return Ue.C})),n.d(t,"H",(function(){return Ue.D})),n.d(t,"I",(function(){return Ue.E})),n.d(t,"J",(function(){return Ue.F})),n.d(t,"K",(function(){return Ue.G})),n.d(t,"L",(function(){return Ue.H})),n.d(t,"M",(function(){return Ue.I})),n.d(t,"N",(function(){return Ue.J})),n.d(t,"P",(function(){return Ue.L})),n.d(t,"O",(function(){return Ue.K})),n.d(t,"R",(function(){return Ue.M})),n.d(t,"S",(function(){return Ue.N})),n.d(t,"T",(function(){return Ue.O})),n.d(t,"U",(function(){return Ue.P})),n.d(t,"V",(function(){return Ue.Q})),n.d(t,"W",(function(){return Ue.R})),n.d(t,"X",(function(){return Ue.S})),n.d(t,"Z",(function(){return Ue.U})),n.d(t,"Y",(function(){return Ue.T})),n.d(t,"xc",(function(){return Ue.kc})),n.d(t,"bb",(function(){return Ue.V})),n.d(t,"cb",(function(){return Ue.W})),n.d(t,"fb",(function(){return Ue.Y})),n.d(t,"eb",(function(){return Ue.X})),n.d(t,"gb",(function(){return Ue.Z})),n.d(t,"hb",(function(){return Ue.ab})),n.d(t,"ib",(function(){return Ue.bb})),n.d(t,"jb",(function(){return Ue.cb})),n.d(t,"kb",(function(){return Ue.db})),n.d(t,"lb",(function(){return Ue.eb})),n.d(t,"mb",(function(){return Ue.fb})),n.d(t,"nb",(function(){return Ue.gb})),n.d(t,"pb",(function(){return Ue.ib})),n.d(t,"tb",(function(){return Ue.mb})),n.d(t,"sb",(function(){return Ue.lb})),n.d(t,"ub",(function(){return Ue.nb})),n.d(t,"vb",(function(){return Ue.ob})),n.d(t,"xb",(function(){return Ue.qb})),n.d(t,"wb",(function(){return Ue.pb})),n.d(t,"yb",(function(){return Ue.rb})),n.d(t,"zb",(function(){return Ue.sb})),n.d(t,"Ab",(function(){return Ue.tb})),n.d(t,"Bb",(function(){return Ue.ub})),n.d(t,"Fb",(function(){return Ue.xb})),n.d(t,"Gb",(function(){return Ue.yb})),n.d(t,"Hb",(function(){return Ue.zb})),n.d(t,"Ib",(function(){return Ue.Ab})),n.d(t,"Jb",(function(){return Ue.Bb})),n.d(t,"Kb",(function(){return Ue.Cb})),n.d(t,"Mb",(function(){return Ue.Eb})),n.d(t,"Nb",(function(){return Ue.Fb})),n.d(t,"Ob",(function(){return Ue.Gb})),n.d(t,"Lb",(function(){return Ue.Db})),n.d(t,"Db",(function(){return Ue.vb})),n.d(t,"Eb",(function(){return Ue.wb})),n.d(t,"Pb",(function(){return Ue.Hb})),n.d(t,"Vb",(function(){return Ue.Nb})),n.d(t,"Qb",(function(){return Ue.Ib})),n.d(t,"Tb",(function(){return Ue.Lb})),n.d(t,"Rb",(function(){return Ue.Jb})),n.d(t,"Sb",(function(){return Ue.Kb})),n.d(t,"Ub",(function(){return Ue.Mb})),n.d(t,"Wb",(function(){return Ue.Ob})),n.d(t,"Xb",(function(){return Ue.Pb})),n.d(t,"Yb",(function(){return Ue.Qb})),n.d(t,"Zb",(function(){return Ue.Rb})),n.d(t,"ac",(function(){return Ue.Sb})),n.d(t,"cc",(function(){return Ue.Tb})),n.d(t,"dc",(function(){return Ue.Ub})),n.d(t,"ec",(function(){return Ue.Vb})),n.d(t,"ic",(function(){return Ue.Zb})),n.d(t,"fc",(function(){return Ue.Wb})),n.d(t,"gc",(function(){return Ue.Xb})),n.d(t,"hc",(function(){return Ue.Yb})),n.d(t,"lc",(function(){return Ue.bc})),n.d(t,"kc",(function(){return Ue.ac})),n.d(t,"nc",(function(){return Ue.cc})),n.d(t,"oc",(function(){return Ue.dc})),n.d(t,"pc",(function(){return Ue.ec})),n.d(t,"qc",(function(){return Ue.fc})),n.d(t,"rc",(function(){return Ue.gc})),n.d(t,"sc",(function(){return Ue.hc})),n.d(t,"uc",(function(){return Ue.ic})),n.d(t,"wc",(function(){return Ue.jc})),n.d(t,"yc",(function(){return Ue.lc})),n.d(t,"Ac",(function(){return Ue.mc})),n.d(t,"Cc",(function(){return Ue.oc})),n.d(t,"Fc",(function(){return Ue.rc})),n.d(t,"Gc",(function(){return Ue.sc})),n.d(t,"Dc",(function(){return Ue.pc})),n.d(t,"Ec",(function(){return Ue.qc})),n.d(t,"Bc",(function(){return Ue.nc})),n.d(t,"Hc",(function(){return Ue.tc})),n.d(t,"Jc",(function(){return Ue.vc})),n.d(t,"Kc",(function(){return Ue.wc})),n.d(t,"Mc",(function(){return Ue.xc})),n.d(t,"Nc",(function(){return Ue.yc})),n.d(t,"Oc",(function(){return Ue.zc})),n.d(t,"Tc",(function(){return Ue.Ec})),n.d(t,"Rc",(function(){return Ue.Cc})),n.d(t,"Sc",(function(){return Ue.Dc})),n.d(t,"Qc",(function(){return Ue.Bc})),n.d(t,"Pc",(function(){return Ue.Ac})),n.d(t,"Vc",(function(){return Ue.Gc})),n.d(t,"Zc",(function(){return Ue.Kc})),n.d(t,"fd",(function(){return Ue.Qc})),n.d(t,"Wc",(function(){return Ue.Hc})),n.d(t,"Yc",(function(){return Ue.Jc})),n.d(t,"Uc",(function(){return Ue.Fc})),n.d(t,"bd",(function(){return Ue.Mc})),n.d(t,"ad",(function(){return Ue.Lc})),n.d(t,"ed",(function(){return Ue.Pc})),n.d(t,"Xc",(function(){return Ue.Ic})),n.d(t,"dd",(function(){return Ue.Oc})),n.d(t,"gd",(function(){return Ue.Rc})),n.d(t,"hd",(function(){return Ue.Sc})),n.d(t,"kd",(function(){return Ue.Tc})),n.d(t,"ld",(function(){return Ue.Uc})),n.d(t,"md",(function(){return Ue.Vc})),n.d(t,"nd",(function(){return Ue.Wc})),n.d(t,"od",(function(){return Ue.Xc})),n.d(t,"pd",(function(){return Ue.Yc})),n.d(t,"rd",(function(){return Ue.Zc})),n.d(t,"cd",(function(){return Ue.Nc})),n.d(t,"ob",(function(){return Ue.hb})),n.d(t,"Ic",(function(){return Ue.uc})),n.d(t,"sd",(function(){return Ue.ad})),n.d(t,"qb",(function(){return Ue.jb})),n.d(t,"rb",(function(){return Ue.kb}));var r={};n.r(r),n.d(r,"copyModel",(function(){return ne})),n.d(r,"listModels",(function(){return J})),n.d(r,"moveModel",(function(){return ae})),n.d(r,"removeModel",(function(){return ee})),n.d(r,"browserFiles",(function(){return be})),n.d(r,"browserHTTPRequest",(function(){return Ie})),n.d(r,"concatenateArrayBuffers",(function(){return O.d})),n.d(r,"decodeWeights",(function(){return O.e})),n.d(r,"encodeWeights",(function(){return O.f})),n.d(r,"fromMemory",(function(){return Pe})),n.d(r,"getLoadHandlers",(function(){return S})),n.d(r,"getModelArtifactsInfoForJSON",(function(){return O.g})),n.d(r,"getSaveHandlers",(function(){return j})),n.d(r,"http",(function(){return Te})),n.d(r,"isHTTPScheme",(function(){return Ee})),n.d(r,"loadWeights",(function(){return xe})),n.d(r,"registerLoadRouter",(function(){return x})),n.d(r,"registerSaveRouter",(function(){return w})),n.d(r,"weightsLoaderFactory",(function(){return Se})),n.d(r,"withSaveHandler",(function(){return Re}));var a={};n.r(a),n.d(a,"confusionMatrix",(function(){return Be}));var i={};n.r(i),n.d(i,"toPixels",(function(){return He})),n.d(i,"fromPixels",(function(){return Xe}));var o={};n.r(o),n.d(o,"prepareAndValidate",(function(){return Qe}));var s={};n.r(s),n.d(s,"assertParamsValid",(function(){return Ze})),n.d(s,"maskToAxes",(function(){return Je})),n.d(s,"computeOutShape",(function(){return $e})),n.d(s,"stridesWithElidedDims",(function(){return et})),n.d(s,"getNormalizedAxes",(function(){return rt})),n.d(s,"startIndicesWithElidedDims",(function(){return at})),n.d(s,"stopIndicesWithElidedDims",(function(){return it})),n.d(s,"stridesForAxis",(function(){return ot})),n.d(s,"startForAxis",(function(){return st})),n.d(s,"stopForAxis",(function(){return ct})),n.d(s,"isSliceContinous",(function(){return ut})),n.d(s,"computeFlatOffset",(function(){return lt})),n.d(s,"parseSliceParams",(function(){return ft})),n.d(s,"sliceInfo",(function(){return dt}));var c={};n.r(c),n.d(c,"Serializable",(function(){return pt})),n.d(c,"SerializationMap",(function(){return ht})),n.d(c,"registerClass",(function(){return vt}));var u={};n.r(u),n.d(u,"segOpComputeOptimalWindowSize",(function(){return In})),n.d(u,"computeOutShape",(function(){return An})),n.d(u,"collectGatherOpShapeInfo",(function(){return Mn}));var l={};n.r(l),n.d(l,"axesAreInnerMostDims",(function(){return Zt.b})),n.d(l,"combineLocations",(function(){return Zt.c})),n.d(l,"computeOutAndReduceShapes",(function(){return Zt.d})),n.d(l,"expandShapeToKeepDim",(function(){return Zt.e})),n.d(l,"assertAxesAreInnerMostDims",(function(){return Zt.a})),n.d(l,"getAxesPermutation",(function(){return Zt.f})),n.d(l,"getUndoAxesPermutation",(function(){return Zt.h})),n.d(l,"getInnerMostAxes",(function(){return Zt.g})),n.d(l,"getBroadcastDims",(function(){return Jt.b})),n.d(l,"getReductionAxes",(function(){return Jt.c})),n.d(l,"assertAndGetBroadcastShape",(function(){return Jt.a})),n.d(l,"assertParamsConsistent",(function(){return $t})),n.d(l,"computeOutShape",(function(){return en})),n.d(l,"computeDilation2DInfo",(function(){return tn.d})),n.d(l,"computePool2DInfo",(function(){return tn.e})),n.d(l,"computePool3DInfo",(function(){return tn.f})),n.d(l,"computeConv2DInfo",(function(){return tn.a})),n.d(l,"computeConv3DInfo",(function(){return tn.b})),n.d(l,"computeDefaultPad",(function(){return tn.c})),n.d(l,"tupleValuesAreOne",(function(){return tn.i})),n.d(l,"eitherStridesOrDilationsAreOne",(function(){return tn.h})),n.d(l,"convertConv2DDataFormat",(function(){return tn.g})),n.d(l,"getFusedDyActivation",(function(){return nn.c})),n.d(l,"getFusedBiasGradient",(function(){return nn.b})),n.d(l,"applyActivation",(function(){return nn.a})),n.d(l,"shouldFuse",(function(){return nn.d})),n.d(l,"PARALLELIZE_THRESHOLD",(function(){return rn})),n.d(l,"computeOptimalWindowSize",(function(){return an})),n.d(l,"slice_util",(function(){return s})),n.d(l,"upcastType",(function(){return Wt.c})),n.d(l,"getImageCenter",(function(){return on})),n.d(l,"getReshaped",(function(){return sn})),n.d(l,"getPermuted",(function(){return cn})),n.d(l,"getReshapedPermuted",(function(){return un})),n.d(l,"getSliceBeginCoords",(function(){return ln})),n.d(l,"getSliceSize",(function(){return fn})),n.d(l,"prepareAndValidate",(function(){return Qe})),n.d(l,"validateUpdateShape",(function(){return Ye.validateUpdateShape})),n.d(l,"validateInput",(function(){return Ye.validateInput})),n.d(l,"calculateShapes",(function(){return Ye.calculateShapes})),n.d(l,"SELU_SCALEALPHA",(function(){return dn})),n.d(l,"SELU_SCALE",(function(){return pn})),n.d(l,"ERF_P",(function(){return hn})),n.d(l,"ERF_A1",(function(){return vn})),n.d(l,"ERF_A2",(function(){return mn})),n.d(l,"ERF_A3",(function(){return bn})),n.d(l,"ERF_A4",(function(){return gn})),n.d(l,"ERF_A5",(function(){return yn})),n.d(l,"warn",(function(){return On})),n.d(l,"log",(function(){return kn})),n.d(l,"mergeRealAndImagArrays",(function(){return wn})),n.d(l,"splitRealAndImagArrays",(function(){return xn})),n.d(l,"complexWithEvenIndex",(function(){return jn})),n.d(l,"complexWithOddIndex",(function(){return Sn})),n.d(l,"getComplexWithIndex",(function(){return _n})),n.d(l,"assignToTypedArray",(function(){return Cn})),n.d(l,"exponents",(function(){return En})),n.d(l,"exponent",(function(){return Nn})),n.d(l,"prepareSplitSize",(function(){return Tn})),n.d(l,"segment_util",(function(){return u})),n.d(l,"castTensor",(function(){return Pn})),n.d(l,"reshapeTensor",(function(){return Rn})),n.d(l,"fromUint8ToStringArray",(function(){return Dn})),n.d(l,"fromStringArrayToUint8",(function(){return Fn}));var f={};n.r(f),n.d(f,"nonMaxSuppressionV3Impl",(function(){return zn.a})),n.d(f,"nonMaxSuppressionV4Impl",(function(){return zn.b})),n.d(f,"nonMaxSuppressionV5Impl",(function(){return zn.c})),n.d(f,"whereImpl",(function(){return qn.a}));var d=n(15),p=(n(217),n(2)),h=n(4),v=n(53),m=n(25),b=n(3),g=n.n(b),y=n(12),O=n(76),k=function(){function e(){Object(p.a)(this,e),this.saveRouters=[],this.loadRouters=[]}return Object(h.a)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),w=function(e){return k.registerSaveRouter(e)},x=function(e){return k.registerLoadRouter(e)},j=function(e){return k.getSaveHandlers(e)},S=function(e,t){return k.getLoadHandlers(e,t)},_="tensorflowjs",C="models_store",E="model_info_store";function N(){if(!Object(v.c)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function T(e){var t=e.result;t.createObjectStore(C,{keyPath:"modelPath"}),t.createObjectStore(E,{keyPath:"modelPath"})}var I=function(){function e(t){if(Object(p.a)(this,e),this.indexedDB=N(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(_,1);a.onupgradeneeded=function(){return T(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(C,"readonly"),s=o.objectStore(C).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var c,u=Object(O.g)(t),l=i.transaction(E,"readwrite"),f=l.objectStore(E),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:u});d.onsuccess=function(){var a=(c=i.transaction(C,"readwrite")).objectStore(C).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:u});a.onsuccess=function(){return e({modelArtifactsInfo:u})},a.onerror=function(e){var t=(f=l.objectStore(E)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},d.onerror=function(e){return i.close(),r(d.error)},l.oncomplete=function(){null==c?i.close():c.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();I.URL_SCHEME="indexeddb://";var A=function(e){return Object(v.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(I.URL_SCHEME)?(t=e.slice(I.URL_SCHEME.length),new I(t)):null;var t};k.registerSaveRouter(A),k.registerLoadRouter(A);var M=function(){function e(){Object(p.a)(this,e),this.indexedDB=N()}return Object(h.a)(e,[{key:"listModels",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(_,1);r.onupgradeneeded=function(){return T(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(E,"readonly"),i=a.objectStore(E).getAll();i.onsuccess=function(){var t,n={},r=Object(m.a)(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Object(y.a)(g.a.mark((function e(t){var n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(I.URL_SCHEME)?r.slice(I.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(_,1);a.onupgradeneeded=function(){return T(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(E,"readwrite"),s=o.objectStore(E),c=s.get(t);c.onsuccess=function(){if(null==c.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(C,"readwrite")).objectStore(C).delete(t);a.onsuccess=function(){return e(c.result.modelArtifactsInfo)},a.onerror=function(e){return r(c.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(c.error)}},c.onerror=function(e){return i.close(),r(c.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),P=n(21),R="/",D="tensorflowjs_models",F="info",L="model_topology",z="weight_specs",q="weight_data",V="model_metadata";function B(e){return{info:[D,e,F].join(R),topology:[D,e,L].join(R),weightSpecs:[D,e,z].join(R),weightData:[D,e,q].join(R),modelMetadata:[D,e,V].join(R)}}function U(e){var t=e.split(R);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(R)}var W=function(){function e(t){if(Object(p.a)(this,e),!Object(v.c)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=B(this.modelPath)}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(y.a)(g.a.mark((function e(t){var n,r,a,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Object(O.g)(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Object(O.a)(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.signature&&(i.signature=t.signature),null!=t.userDefinedMetadata&&(i.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(i.modelInitializer=t.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 20:throw e.prev=20,e.t0=e.catch(7),this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 28:case"end":return e.stop()}}),e,this,[[7,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t,n,r,a,i,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Object(O.b)(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();W.URL_SCHEME="localstorage://";var G=function(e){return Object(v.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(W.URL_SCHEME)?(t=e.slice(W.URL_SCHEME.length),new W(t)):null;var t};k.registerSaveRouter(G),k.registerLoadRouter(G);var H=function(){function e(){Object(p.a)(this,e),Object(P.b)(Object(v.c)().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Object(P.b)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return Object(h.a)(e,[{key:"listModels",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t,n,r,a,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=D+R,r=R+F,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=U(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Object(y.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(W.URL_SCHEME)?a.slice(W.URL_SCHEME.length):a,n=B(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),e.abrupt("return",r);case 10:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),K="://",X=function(){function e(){Object(p.a)(this,e),this.managers={}}return Object(h.a)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Object(P.b)(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(K)&&(t=t.slice(0,t.indexOf(K))),Object(P.b)(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Object(P.b)(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function Q(e){if(-1===e.indexOf(K))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(X.getSchemes().join(",")));return{scheme:e.split(K)[0],path:e.split(K)[1]}}function Y(e,t){return Z.apply(this,arguments)}function Z(){return Z=Object(y.a)(g.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f,d,p=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],Object(P.b)(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),a=k.getLoadHandlers(t),Object(P.b)(a.length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),Object(P.b)(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],o=k.getSaveHandlers(n),Object(P.b)(o.length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),Object(P.b)(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],c=Q(t).scheme,u=Q(t).path,l=c===Q(t).scheme,e.next=15,i.load();case 15:if(f=e.sent,!r||!l){e.next=19;break}return e.next=19,X.getManager(c).removeModel(u);case 19:return e.next=21,s.save(f);case 21:if(d=e.sent,!r||l){e.next=25;break}return e.next=25,X.getManager(c).removeModel(u);case 25:return e.abrupt("return",d.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function J(){return $.apply(this,arguments)}function $(){return($=Object(y.a)(g.a.mark((function e(){var t,n,r,a,i,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=X.getSchemes(),n={},r=Object(m.a)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,X.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+K+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(y.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Q(t),r=X.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(y.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Y(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(y.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Y(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(Object(v.c)().get("IS_BROWSER")){Object(v.c)().setPlatform("browser",new oe);try{X.registerManager(W.URL_SCHEME,new H)}catch(es){}try{X.registerManager(I.URL_SCHEME,new M)}catch(es){}}n(525);var se=n(88),ce=n(32),ue=n(113),le=n(237),fe=n(19);Object(d.b)();var de={buffer:se.a,cast:ce.a,clone:ue.a,print:le.a};Object(fe.e)(de);var pe=n(28);function he(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var ve=function(){function e(t){if(Object(p.a)(this,e),!Object(v.c)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(y.a)(g.a.mark((function e(t){var n,r,a,i,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,e.next=18,he((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 18:if(null==t.weightData){e.next=24;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=24,he((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 24:return e.abrupt("return",{modelArtifactsInfo:Object(O.g)(t)});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ve.URL_SCHEME="downloads://";var me=function(){function e(t){if(Object(p.a)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.files=t}return Object(h.a)(e,[{key:"load",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t,n,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.files[0],n=this.files.slice(1),e.abrupt("return",new Promise((function(e,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),s=o.modelTopology;if(null!=s){0===n.length&&e({modelTopology:s});var c=o.weightsManifest;if(null!=c){var u;try{u=r.checkManifestAndWeightFiles(c,n)}catch(es){return void a(es)}var l=[],f=[],d=[];c.forEach((function(e){e.paths.forEach((function(e){f.push(e),d.push(null)})),l.push.apply(l,Object(pe.a)(e.weights))})),c.forEach((function(t){t.paths.forEach((function(t){var n=new FileReader;n.onload=function(n){var r=n.target.result,a=f.indexOf(t);if(d[a]=r,-1===d.indexOf(null)){var i={modelTopology:s,weightSpecs:l,weightData:Object(O.d)(d),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy};null!=o.signature&&(i.signature=o.signature),null!=o.userDefinedMetadata&&(i.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(i.modelInitializer=o.modelInitializer),e(i)}},n.onerror=function(e){return a("Failed to weights data from file of path '".concat(t,"'."))},n.readAsArrayBuffer(u[t])}))}))}else a(new Error("weightManifest field is missing from file ".concat(t.name)))}else a(new Error("modelTopology field is missing from file ".concat(t.name)))},i.onerror=function(e){return a("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},i.readAsText(t)})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkManifestAndWeightFiles",value:function(e,t){var n,r=[],a=t.map((function(e){return Object(O.c)(e.name)})),i={},o=Object(m.a)(e);try{for(o.s();!(n=o.n()).done;){n.value.paths.forEach((function(e){var n=Object(O.c)(e);if(-1!==r.indexOf(n))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(n,"'"));if(r.push(n),-1===a.indexOf(n))throw new Error("Weight file with basename '".concat(n,"' is not provided."));i[e]=t[a.indexOf(n)]}))}}catch(es){o.e(es)}finally{o.f()}if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(t.length,")."));return i}}]),e}();function be(e){return new me(e)}k.registerSaveRouter((function(e){return Object(v.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ve.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new ve(e)}(e.slice(ve.URL_SCHEME.length)):null}));var ge=n(8);function ye(e,t,n,r){!function(e){Object(P.b)(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Object(P.b)(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Object(P.b)(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Object(P.b)(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}var Oe=n(226);function ke(e,t){return we.apply(this,arguments)}function we(){return(we=Object(y.a)(g.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Object(v.c)().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,ye(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,c=s.map((function(e){return e.arrayBuffer()})),u=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(c);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,ye(c,n.onProgress,u,l);case 26:e.t1=e.sent;case 27:return f=e.t1,e.abrupt("return",f);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){return je.apply(this,arguments)}function je(){return je=Object(y.a)(g.a.mark((function e(t){var n,r,a,i,o=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=Se((function(e){return ke(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),je.apply(this,arguments)}function Se(e){return function(){var t=Object(y.a)(g.a.mark((function t(n){var r,a,i,o,s,c,u,l,f,d,p,h,v=arguments;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],c=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,u=Oe.a[r]*P.N(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),c.push(e.name),n+=u}))})),s.every((function(e){return e}))){t.next=10;break}throw u=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(u.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(c.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=15,e(f);case 15:return d=t.sent,p={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[h+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),c=0,u=0;u<t;u++){var l=new Uint8Array(d[h+u]);s.set(l,c),c+=l.byteLength}o[e].forEach((function(e){var t=i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=Object(O.e)(t,[e.manifestEntry]);for(var r in n)p[r]=n[r]})),h+=t})),t.abrupt("return",p);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var _e=function(){function e(t,n){if(Object(p.a)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Object(P.b)("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Object(v.c)().platform.fetch,Object(P.b)(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Object(P.b)(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(y.a)(g.a.mark((function e(t){var n,r,a,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=13,this.fetch(this.path,n);case 13:if(!(i=e.sent).ok){e.next=18;break}return e.abrupt("return",{modelArtifactsInfo:Object(O.g)(t),responses:[i]});case 18:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t,n,r,a,i,o,s,c,u,l,f,d,p,h,v,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,c=n.format,u=n.signature,l=n.userDefinedMetadata,null!=a||null!=i){e.next=25;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 25:if(null==i){e.next=32;break}return e.next=28,this.loadWeights(i);case 28:p=e.sent,h=Object(ge.a)(p,2),f=h[0],d=h[1];case 32:return v={modelTopology:a,weightSpecs:f,weightData:d,generatedBy:o,convertedBy:s,format:c},null!=u&&(v.signature=u),null!=l&&(v.userDefinedMetadata=l),(m=n.modelInitializer)&&(v.modelInitializer=m),e.abrupt("return",v);case 38:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(t){var n,r,a,i,o,s,c,u,l,f,d,p,h,v,b,y,k,w,x;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=Ce(n),a=Object(ge.a)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,c=[],u=Object(m.a)(t);try{for(u.s();!(l=u.n()).done;)f=l.value,c.push.apply(c,Object(pe.a)(f.weights))}catch(es){u.e(es)}finally{u.f()}d=[],p=[],h=Object(m.a)(t);try{for(h.s();!(v=h.n()).done;){b=v.value,y=Object(m.a)(b.paths);try{for(y.s();!(k=y.n()).done;)w=k.value,null!=this.weightUrlConverter?p.push(this.weightUrlConverter(w)):d.push(s+w+o)}catch(es){y.e(es)}finally{y.f()}}}catch(es){h.e(es)}finally{h.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=d.push,e.t1=d,e.t2=pe.a,e.next=16,Promise.all(p);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,ke(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return x=e.sent,e.abrupt("return",[c,Object(O.d)(x)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ce(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Ee(e){return null!=e.match(_e.URL_SCHEME_REGEX)}_e.URL_SCHEME_REGEX=/^https?:\/\//;var Ne=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return Ee(e)})):Ee(e))?Te(e,t):null};function Te(e,t){return new _e(e,t)}function Ie(e,t){return Te(e,t)}k.registerSaveRouter(Ne),k.registerLoadRouter(Ne);var Ae=function(){function e(t){Object(p.a)(this,e),this.modelArtifacts=t}return Object(h.a)(e,[{key:"load",value:function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Me=function(){function e(t){Object(p.a)(this,e),this.saveHandler=t}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Pe(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new Ae(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ae({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ae({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function Re(e){return new Me(e)}var De=n(7),Fe=n(59),Le=n(173),ze=n(11),qe=n(92);var Ve,Be=Object(ze.b)({confusionMatrix_:function(e,t,n){var r=Object(De.a)(e,"labels","confusionMatrix"),a=Object(De.a)(t,"predictions","confusionMatrix");P.b(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),P.b(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),P.b(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),P.b(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),P.b(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var i=Object(Le.a)(Object(ce.a)(r,"int32"),n),o=Object(Le.a)(Object(ce.a)(a,"int32"),n),s=Object(qe.a)(i),c=Object(Fe.a)(s,o);return Object(ce.a)(c,"int32")}}),Ue=n(10),We=n(117),Ge=n(264);function He(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(y.a)(g.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f,d,p,h,v,m,b,y,O;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(De.a)(t,"img","toPixels"),t instanceof fe.a||(a=r,r=Object(ce.a)(a,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=Object(ge.a)(i,2),s=o[0],c=o[1],!((u=2===r.rank?1:r.shape[2])>4||2===u)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(u));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,f="float32"===r.dtype?255:1,d=new Uint8ClampedArray(c*s*4),p=0;case 16:if(!(p<s*c)){e.next=41;break}h=[0,0,0,255],v=0;case 19:if(!(v<u)){e.next=33;break}if(m=l[p*u+v],"float32"!==r.dtype){e.next=26;break}if(!(m<0||m>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(m,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(m<0||m>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(m,"."));case 29:1===u?(h[0]=m*f,h[1]=m*f,h[2]=m*f):h[v]=m*f;case 30:v++,e.next=19;break;case 33:d[(b=4*p)+0]=Math.round(h[0]),d[b+1]=Math.round(h[1]),d[b+2]=Math.round(h[2]),d[b+3]=Math.round(h[3]);case 38:++p,e.next=16;break;case 41:return null!=n&&(n.width=c,n.height=s,y=n.getContext("2d"),O=new ImageData(d,c,s),y.putImageData(O,0,0)),r!==t&&r.dispose(),e.abrupt("return",d);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xe=Object(ze.b)({fromPixels_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){var c=2;if(a&&e.readyState<c)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var u=Object(We.c)(Ue.hb,d.a.backendName);if(null!=u){var l={pixels:e},f={numChannels:t};return d.a.runKernel(Ue.hb,l,f)}var p,h,v=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],m=Object(ge.a)(v,2),b=m[0],g=m[1];if(o?p=e.getContext("2d").getImageData(0,0,b,g).data:r||n?p=e.data:(i||a||s)&&(null==Ve&&(Ve=document.createElement("canvas").getContext("2d")),Ve.canvas.width=b,Ve.canvas.height=g,Ve.drawImage(e,0,0,b,g),p=Ve.getImageData(0,0,b,g).data),4===t)h=new Int32Array(p);else{var y=b*g;h=new Int32Array(y*t);for(var O=0;O<y;O++)for(var k=0;k<t;++k)h[O*t+k]=p[4*O+k]}var w=[g,b,t];return Object(Ge.a)(h,w,"int32")}});function Qe(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Object(P.N)(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var c=e.shape,u=a.slice();u.pop();for(var l=1,f=i;f<n;++f)l*=c[f],u.push(c[f]);var d=[].concat(Object(pe.a)(Object(P.j)(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[u,o,l,d]}var Ye=n(183);function Ze(e,t,n){var r=e.shape.length;P.b(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),P.b(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){P.b(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function Je(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function $e(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function et(e,t,n,r){for(var a=Object(pe.a)(e),i=a.length;i<r.length;i++)a.push(1);for(var o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function tt(e,t,n){return n<=e?n:n-(t-1)}function nt(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function rt(e,t,n,r,a,i,o,s,c){var u=e.length,l=new Array(u),f=new Array(u),d=new Array(u);if(t.length&&n>0){var p=t[0],h=n+1;l=at(o,p,h,r,e),f=it(s,p,h,a,e),d=et(i,p,h,e)}else for(var v=0;v<u;v++)l[v]=st(o,r,i,e,v,c),f[v]=ct(s,a,i,e,v,c),d[v]=ot(i,v,c);return{begin:l,end:f,strides:d}}function at(e,t,n,r,a){for(var i=Object(pe.a)(a),o=nt(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var c=tt(t,n,s),u=r[c];e&1<<c&&(u=0),i[s]=u}return i}function it(e,t,n,r,a){for(var i=Object(pe.a)(a),o=nt(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var c=tt(t,n,s),u=r[c];e&1<<c&&(u=Number.MAX_SAFE_INTEGER),i[s]=u}for(var l=0;l<i.length;l++){var f=a[l];i[l]<0&&(i[l]+=f),i[l]=P.i(0,i[l],a[l])}return i}function ot(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function st(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var c=r[a];return o<0&&(o+=c),o=P.i(0,o,c-1)}function ct(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var c=r[a];return o<0&&(o+=c),o=s>0?P.i(0,o,c):P.i(-1,o,c-1)}function ut(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function lt(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function ft(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat(Object(pe.a)(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){P.b(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat(Object(pe.a)(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(P.b(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function dt(e,t,n,r,a,i,o,s,c){var u=t.slice(),l=n.slice(),f=r;null==r&&(f=new Array(u.length));var d=Je(o);if(d.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==o&&0!==s)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==o&&0!==c)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var p=e.length-u.length,h=Je(s),v=e.slice();h.forEach((function(e){u[e]=0,l[e]=1,v.splice(e,0,1)}));var m=rt(v,d,p,u,l,f,a,i,o),b=m.begin,g=m.end,y=m.strides;u=b,l=g,f=y;var O=Je(c);O.forEach((function(e){l[e]=u[e]+1,f[e]=1}));var k=$e(u,l,f),w=k.filter((function(e,t){return-1===O.indexOf(t)}));return{nonStrided:f.every((function(e){return 1===e})),$begin:u,$end:l,$strides:f,size:k,newShape:v,outShape:w}}var pt=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),ht=function(){function e(){Object(p.a)(this,e),this.classNameMap={}}return Object(h.a)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function vt(e){Object(P.b)(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Object(P.b)("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Object(P.b)(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),ht.register(e)}var mt=n(51),bt=n(210),gt=n(30),yt="2.8.6",Ot=n(5),kt=n(6),wt=n(43),xt=n(33),jt=n(36),St=n(27),_t=n(72),Ct=n(54),Et=n(45),Nt=n(68),Tt=n(37),It=function(e){Object(Ot.a)(n,e);var t=Object(kt.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return Object(wt.d)(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return Object(Nt.f)(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Object(wt.d)(this.iterations_)}},{key:"saveIterations",value:function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:Object(Tt.a)(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(pt);Object.defineProperty(It,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var At=function(e){Object(Ot.a)(n,e);var t=Object(kt.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(p.a)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=d.a.backend.epsilon()),a}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=d.a.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:Object(wt.t)((function(){return Object(Et.a)(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:Object(wt.t)((function(){return Object(Et.a)(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Object(wt.t)((function(){var e=Object(xt.a)(Object(St.a)(o,t.rho),Object(St.a)(Object(Ct.a)(i),1-t.rho)),n=Object(St.a)(Object(jt.a)(Object(_t.a)(Object(xt.a)(s,t.epsilon)),Object(_t.a)(Object(xt.a)(o,t.epsilon))),i),r=Object(xt.a)(Object(St.a)(s,t.rho),Object(St.a)(Object(Ct.a)(n),1-t.rho));o.assign(e),s.assign(r);var c=Object(xt.a)(Object(St.a)(n,-t.learningRate),a);a.assign(c)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Object(wt.d)(this.accumulatedGrads.map((function(e){return e.variable}))),Object(wt.d)(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Object(pe.a)(this.accumulatedGrads),Object(pe.a)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(It);At.className="Adadelta",vt(At);var Mt=n(185),Pt=function(e){Object(Ot.a)(n,e);var t=Object(kt.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return Object(p.a)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=d.a.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:Object(wt.t)((function(){return Object(Mt.a)(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;Object(wt.t)((function(){var e=Object(xt.a)(o,Object(Ct.a)(i));o.assign(e);var n=Object(xt.a)(Object(St.a)(Object(jt.a)(i,Object(_t.a)(Object(xt.a)(e,d.a.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Object(wt.d)(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(It);Pt.className="Adagrad",vt(Pt);var Rt=n(89),Dt=n(34),Ft=function(e){Object(Ot.a)(n,e);var t=Object(kt.a)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(p.a)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],Object(wt.t)((function(){i.accBeta1=Object(Tt.a)(r).variable(),i.accBeta2=Object(Tt.a)(a).variable()})),null==o&&(i.epsilon=d.a.backend.epsilon()),i}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Object(wt.t)((function(){var r=Object(Dt.a)(1,t.accBeta1),a=Object(Dt.a)(1,t.accBeta2);n.forEach((function(n,i){var o=d.a.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Object(wt.t)((function(){return Object(Et.a)(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:Object(wt.t)((function(){return Object(Et.a)(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var c=t.accumulatedFirstMoment[i].variable,u=t.accumulatedSecondMoment[i].variable,l=Object(xt.a)(Object(St.a)(c,t.beta1),Object(St.a)(s,1-t.beta1)),f=Object(xt.a)(Object(St.a)(u,t.beta2),Object(St.a)(Object(Ct.a)(s),1-t.beta2)),p=Object(jt.a)(l,r),h=Object(jt.a)(f,a);c.assign(l),u.assign(f);var v=Object(xt.a)(Object(St.a)(Object(jt.a)(p,Object(xt.a)(Object(_t.a)(h),t.epsilon)),-t.learningRate),o);o.assign(v)}})),t.accBeta1.assign(Object(St.a)(t.accBeta1,t.beta1)),t.accBeta2.assign(Object(St.a)(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Object(wt.d)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Object(wt.d)(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Object(pe.a)(this.accumulatedFirstMoment),Object(pe.a)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(t){var n,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,Object(wt.t)((function(){r.accBeta1.assign(Object(Rt.a)(r.beta1,r.iterations_+1)),r.accBeta2.assign(Object(Rt.a)(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(It);Ft.className="Adam",vt(Ft);var Lt=n(81),zt=n(126),qt=function(e){Object(Ot.a)(n,e);var t=Object(kt.a)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Object(p.a)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Object(wt.t)((function(){i.iteration=Object(Tt.a)(0).variable(),i.accBeta1=Object(Tt.a)(r).variable()})),null==o&&(i.epsilon=d.a.backend.epsilon()),i}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Object(wt.t)((function(){var r=Object(Dt.a)(1,t.accBeta1),a=Object(jt.a)(-t.learningRate,Object(xt.a)(Object(St.a)(t.iteration,t.decay),1));n.forEach((function(n,i){var o=d.a.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Object(Et.a)(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:Object(Et.a)(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var c=t.accumulatedFirstMoment[i].variable,u=t.accumulatedWeightedInfNorm[i].variable,l=Object(xt.a)(Object(St.a)(c,t.beta1),Object(St.a)(s,1-t.beta1)),f=Object(St.a)(u,t.beta2),p=Object(Lt.a)(s),h=Object(zt.a)(f,p);c.assign(l),u.assign(h);var v=Object(xt.a)(Object(St.a)(Object(jt.a)(a,r),Object(jt.a)(l,Object(xt.a)(h,t.epsilon))),o);o.assign(v)}})),t.iteration.assign(Object(xt.a)(t.iteration,1)),t.accBeta1.assign(Object(St.a)(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Object(wt.d)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Object(wt.d)(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(It);qt.className="Adamax",vt(qt);var Vt=function(e){Object(Ot.a)(n,e);var t=Object(kt.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=d.a.registeredVariables[n];Object(wt.t)((function(){var e=Object(xt.a)(Object(St.a)(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Object(wt.l)(Object(Tt.a)(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(It);Vt.className="SGD",vt(Vt);var Bt=function(e){Object(Ot.a)(n,e);var t=Object(kt.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(p.a)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=Object(Tt.a)(a.momentum),a}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=d.a.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:Object(wt.t)((function(){return Object(Et.a)(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&Object(wt.t)((function(){var e,n=Object(xt.a)(Object(St.a)(t.m,i),o);e=t.useNesterov?Object(xt.a)(Object(St.a)(t.c,Object(xt.a)(o,Object(St.a)(n,t.m))),a):Object(xt.a)(Object(St.a)(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Object(wt.d)(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(Vt);Bt.className="Momentum",vt(Bt);var Ut=function(e){Object(Ot.a)(n,e);var t=Object(kt.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(p.a)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=d.a.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=d.a.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:Object(wt.t)((function(){return Object(Et.a)(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:Object(wt.t)((function(){return Object(Et.a)(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:Object(wt.t)((function(){return Object(Et.a)(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,c=t.accumulatedMoments[r].variable;Object(wt.t)((function(){var e=Object(xt.a)(Object(St.a)(s,t.decay),Object(St.a)(Object(Ct.a)(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=Object(xt.a)(Object(St.a)(n,t.decay),Object(St.a)(o,1-t.decay)),u=Object(jt.a)(Object(St.a)(o,t.learningRate),Object(_t.a)(Object(Dt.a)(e,Object(xt.a)(Object(Ct.a)(i),t.epsilon)))),l=Object(xt.a)(Object(St.a)(c,t.momentum),u);s.assign(e),n.assign(i),c.assign(l);var f=Object(Dt.a)(a,l);a.assign(f)}else{var d=Object(xt.a)(Object(St.a)(s,t.decay),Object(St.a)(Object(Ct.a)(o),1-t.decay)),p=Object(xt.a)(Object(St.a)(c,t.momentum),Object(jt.a)(Object(St.a)(o,t.learningRate),Object(_t.a)(Object(xt.a)(d,t.epsilon))));s.assign(d),c.assign(p);var h=Object(Dt.a)(a,p);a.assign(h)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Object(wt.d)(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Object(wt.d)(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Object(wt.d)(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Object(pe.a)(this.accumulatedMeanSquares),Object(pe.a)(this.accumulatedMoments)),this.centered&&t.push.apply(t,Object(pe.a)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(y.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(It);Ut.className="RMSProp",vt(Ut);var Wt=n(149),Gt=n(40),Ht=n(69),Kt=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"sgd",value:function(e){return new Vt(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Bt(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Ut(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Ft(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new At(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new qt(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new Pt(e,t)}}]),e}(),Xt={sgd:Kt.sgd,momentum:Kt.momentum,adadelta:Kt.adadelta,adagrad:Kt.adagrad,rmsprop:Kt.rmsprop,adamax:Kt.adamax,adam:Kt.adam},Qt=n(374),Yt=n(112),Zt=n(75),Jt=n(39);function $t(e,t){var n=e[0].length;e.forEach((function(e,t){P.b(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),P.b(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)P.b(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function en(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var tn=n(60),nn=n(82),rn=30;function an(e){return e<=rn?e:Object(P.G)(e,Math.floor(Math.sqrt(e)))}function on(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function sn(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function cn(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function un(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function ln(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function fn(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var dn=1.7580993408473768,pn=1.0507009873554805,hn=.3275911,vn=.254829592,mn=-.284496736,bn=1.421413741,gn=-1.453152027,yn=1.061405429;function On(){var e;Object(v.c)().getBool("IS_TEST")||(e=console).warn.apply(e,arguments)}function kn(){var e;Object(v.c)().getBool("IS_TEST")||(e=console).log.apply(e,arguments)}function wn(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function xn(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function jn(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Sn(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function _n(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Cn(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function En(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function Nn(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Tn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Object(P.b)(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);Object(P.b)(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}Object(P.b)(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function In(e,t){var n,r=!1;for(e<=rn?(n=e,r=!0):n=Object(P.G)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Object(P.G)(e,n+1);return n}function An(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function Mn(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],c=[],u=1,l=1,f=1,d=0;d<r;++d)c.push(e.shape[d]),u*=e.shape[d];for(var p=r;p<n;p++)c.push(e.shape[p]),l*=e.shape[p];for(var h=r;h<a;h++)c.push(t.shape[h]);for(var v=n+1;v<i;v++)c.push(e.shape[v]),f*=e.shape[v];return{batchSize:u,sliceSize:f,outerSize:l,dimSize:s,outputShape:c}}function Pn(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Object(Yt.a)(e.shape),a=Object(ce.a)(e,"float32"),i=n.complex(a,r);return r.dispose(),a.dispose(),i}if(!Object(P.p)(e.dtype,t))return d.a.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var o=n.real(e),s=Object(ce.a)(o,t);return o.dispose(),s}if("int32"===t)return n.int(e);if("bool"===t){var c=Object(Tt.a)(0,e.dtype),u=n.notEqual(e,c);return c.dispose(),u}throw new Error("Error in Cast: failed to cast ".concat(e.dtype," to ").concat(t))}function Rn(e,t){return d.a.makeTensorFromDataId(e.dataId,t,e.dtype)}function Dn(e){try{return e.map((function(e){return Object(gt.decodeString)(e)}))}catch(es){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(es))}}function Fn(e){return e.map((function(e){return Object(gt.encodeString)(e)}))}var Ln=n(236),zn=n(125),qn=n(268),Vn=n(218),Bn=n(131),Un={kernelName:Ue.a,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(e,Object(Bn.a)(Object(ce.a)(n,"float32"),-1))}}}},Wn=n(62),Gn={kernelName:Ue.b,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){var t=Object(Ct.a)(Object(ce.a)(n,"float32")),r=Object(_t.a)(Object(Dt.a)(Object(Tt.a)(1),t));return Object(Wn.a)(Object(jt.a)(e,r))}}}},Hn={kernelName:Ue.c,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){var t=Object(_t.a)(Object(Dt.a)(Object(Ct.a)(Object(ce.a)(n,"float32")),1));return Object(jt.a)(e,t)}}}},Kn=n(22),Xn=n(42),Qn={kernelName:Ue.d,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1],i=Jt.a(r.shape,a.shape);return{a:function(){var t=e,n=Jt.c(r.shape,i);return n.length>0&&(t=Object(Xn.a)(t,n)),Object(Kn.a)(t,r.shape)},b:function(){var t=e,n=Jt.c(a.shape,i);return n.length>0&&(t=Object(Xn.a)(t,n)),Object(Kn.a)(t,a.shape)}}}},Yn={kernelName:Ue.e,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},Zn={kernelName:Ue.h,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(Et.a)(n)}}}},Jn={kernelName:Ue.i,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(Et.a)(n)}}}},$n={kernelName:Ue.j,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(jt.a)(e,Object(_t.a)(Object(Dt.a)(Object(Tt.a)(1),Object(Ct.a)(Object(ce.a)(n,"float32")))))}}}},er={kernelName:Ue.k,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){var t=Object(_t.a)(Object(xt.a)(Object(Tt.a)(1),Object(Ct.a)(Object(ce.a)(n,"float32"))));return Object(jt.a)(e,t)}}}},tr={kernelName:Ue.m,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1],i=Object(Jt.a)(r.shape,a.shape);return{a:function(){var t=Object(xt.a)(Object(Ct.a)(r),Object(Ct.a)(a)),n=Object(St.a)(e,Object(jt.a)(a,t)),o=Object(Jt.c)(r.shape,i);return o.length>0&&(n=Object(Xn.a)(n,o)),Object(Kn.a)(n,r.shape)},b:function(){var t=Object(xt.a)(Object(Ct.a)(r),Object(Ct.a)(a)),n=Object(Wn.a)(Object(St.a)(e,Object(jt.a)(r,t))),o=Object(Jt.c)(a.shape,i);return o.length>0&&(n=Object(Xn.a)(n,o)),Object(Kn.a)(n,a.shape)}}}},nr={kernelName:Ue.l,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(jt.a)(e,Object(xt.a)(Object(Ct.a)(Object(ce.a)(n,"float32")),1))}}}},rr={kernelName:Ue.n,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(jt.a)(e,Object(Dt.a)(Object(Tt.a)(1),Object(Ct.a)(Object(ce.a)(n,"float32"))))}}}};var ar=Object(ze.b)({avgPool3dGrad_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1,1],i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=Object(De.a)(e,"dy","avgPool3dGrad"),c=Object(De.a)(t,"input","avgPool3dGrad"),u=s,l=c,f=!1;4===c.rank&&(f=!0,u=Object(Kn.a)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),l=Object(Kn.a)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),P.b(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),P.b(5===l.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,".")})),P.b(tn.h(r,a),(function(){return"Error in avgPool3dGrad: Either strides or dilations "+"must be 1. Got strides ".concat(r," and dilations '").concat(a,"'")})),null!=o&&P.b(P.v(i),(function(){return"Error in avgPool3dGrad: pad must be an integer when "+"using, dimRoundingMode ".concat(o," but got pad ").concat(i,".")}));var p={dy:u,input:l},h={filterSize:n,strides:r,dilations:a,pad:i,dimRoundingMode:o},v=d.a.runKernel(Ue.q,p,h);return f?Object(Kn.a)(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),ir={kernelName:Ue.p,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,1)[0],a=n.filterSize,i=n.strides,o=n.dilations,s=n.pad,c=n.dimRoundingMode,u=null==o?[1,1,1]:o;return{x:function(){return ar(e,r,a,i,u,s,c)}}}};var or=Object(ze.b)({avgPoolGrad_:function(e,t,n,r,a){var i=Object(De.a)(e,"dy","avgPoolGrad"),o=Object(De.a)(t,"input","avgPoolGrad");P.b(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,c=i,u=!1;3===o.rank&&(u=!0,s=Object(Kn.a)(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=Object(Kn.a)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),P.b(4===c.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(c.rank,".")})),P.b(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var l={dy:c,input:s},f={filterSize:n,strides:r,pad:a},p=d.a.runKernel(Ue.r,l,f);return u?Object(Kn.a)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),sr={kernelName:Ue.o,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return or(e,r,a,i,o)}}}},cr={kernelName:Ue.s,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return Object(Fe.a)(e,i,!1,!1)},b:function(){return Object(Fe.a)(e,a,!0,!1)}}:o&&!s?{a:function(){return Object(Fe.a)(i,e,!1,!0)},b:function(){return Object(Fe.a)(a,e,!1,!1)}}:{a:function(){return Object(Fe.a)(i,e,!0,!0)},b:function(){return Object(Fe.a)(e,a,!0,!0)}}:{a:function(){return Object(Fe.a)(e,i,!1,!0)},b:function(){return Object(Fe.a)(a,e,!0,!1)}}}},ur=n(156),lr={kernelName:Ue.t,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return Object(ur.a)(e,r,a)}}}},fr={kernelName:Ue.v,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var c=[],u=0;u<o.length;u++)o[u]>1&&c.push(u);return{x:function(){return Object(Xn.a)(e,c,!0)}}}},dr={kernelName:Ue.w,gradFunc:function(e){return{x:function(){return e.clone()}}}},pr={kernelName:Ue.x,gradFunc:function(e){return{x:function(){return Object(Et.a)(e)}}}},hr=n(95),vr=n(96),mr=n(103),br=n(70),gr={kernelName:Ue.y,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return Object(br.a)(Object(mr.a)(Object(hr.a)(r,a),Object(vr.a)(r,i)),e,Object(Et.a)(e))}}}},yr={kernelName:Ue.A,inputsToSave:["x"],gradFunc:Un.gradFunc},Or=n(122),kr={kernelName:Ue.B,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=n.axis,i=Object(P.I)(a,t[0].shape)[0],o=r.map((function(e){return e[i]}));return Object(Or.a)(e,o,i).map((function(e){return function(){return e}}))}},wr=n(211),xr=n(209),jr={kernelName:Ue.C,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,c=n.pad,u=n.dataFormat;return P.b(tn.i(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return Object(xr.a)(a.shape,e,i,s,c,u)},filter:function(){return Object(wr.a)(a,e,i.shape,s,c,u)}}}},Sr=n(111),_r={kernelName:Ue.E,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,c=n.dataFormat,u=n.dimRoundingMode;return{dy:function(){return Object(Sr.a)(e,i,o,s,c,1,u)},filter:function(){return Object(wr.a)(e,a,i.shape,o,s,c,u)}}}};var Cr=Object(ze.b)({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=Object(Kn.a)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=Object(Kn.a)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),P.b(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),P.b(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),P.b(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),P.b(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),P.b(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},c={strides:r,pad:a,filterShape:n};return d.a.runKernel(Ue.G,s,c)}}),Er=n(289),Nr={kernelName:Ue.F,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;P.b(Object(tn.i)(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=Object(ge.a)(t,2),s=o[0],c=o[1];return{x:function(){return Object(Er.a)(s.shape,e,c,a,i)},filter:function(){return Cr(s,e,c.shape,a,i)}}}},Tr=n(261),Ir={kernelName:Ue.I,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(Object(Wn.a)(Object(Tr.a)(Object(ce.a)(n,"float32"))),e)}}}},Ar=n(262),Mr={kernelName:Ue.J,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(Object(Ar.a)(Object(ce.a)(n,"float32")),e)}}}},Pr=n(188),Rr={kernelName:Ue.L,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=Object(Zt.f)([a],r.rank),n=Object(Pr.a)(e,a,i,!o);return null!=t&&(n=Object(qe.a)(n,t)),n}}}},Dr=n(294),Fr=n(293),Lr={kernelName:Ue.O,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;P.b(tn.i(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var c=Object(ge.a)(t,2),u=c[0],l=c[1];return P.b(4===u.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(u.rank,".")})),P.b(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,".")})),P.b(u.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(u.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],".")})),P.b(tn.h(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),null!=o&&P.b(P.v(i),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(i,".")})),{x:function(){return Object(Fr.a)(u.shape,e,l,a,i,r,o)},filter:function(){return Object(Dr.a)(u,e,l.shape,a,i,r,o)}}}},zr={kernelName:Ue.S,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return d.a.runKernel(Ue.U,o,n)},filter:function(){return d.a.runKernel(Ue.T,s,n)}}}},qr={kernelName:Ue.V,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:Object(ge.a)(t,1)[0]};return{x:function(){return d.a.runKernel(Ue.W,n)}}}},Vr=n(80),Br={kernelName:Ue.Y,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0],r=Object(St.a)(Object(Vr.a)(Object(Wn.a)(Object(Ct.a)(n))),2/Math.sqrt(Math.PI));return{x:function(){return Object(St.a)(e,r)}}}},Ur={kernelName:Ue.Z,outputsToSave:[!0],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(e,n)}}}},Wr={kernelName:Ue.ab,inputsToSave:["input"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{input:function(){return Object(Kn.a)(e,n.shape)}}}},Gr={kernelName:Ue.bb,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(e,Object(Vr.a)(n))}}}},Hr={kernelName:Ue.fb,gradFunc:function(e){return{x:function(){return Object(Et.a)(e)}}}},Kr={kernelName:Ue.gb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1],i=Object(Jt.a)(r.shape,a.shape);return{a:function(){var t=Object(jt.a)(e,Object(ce.a)(a,"float32")),n=Object(Jt.c)(r.shape,i);return n.length>0?Object(Kn.a)(Object(Xn.a)(t,n),r.shape):t},b:function(){var t=Object(St.a)(e,Object(ce.a)(r,"float32")),n=Object(Jt.c)(a.shape,i);n.length>0&&(t=Object(Kn.a)(Object(Xn.a)(t,n),a.shape));var o=Object(Ct.a)(a);return Object(Wn.a)(Object(jt.a)(t,Object(ce.a)(o,"float32")))}}}},Xr=n(258),Qr=n(137),Yr={kernelName:Ue.ib,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=Object(ge.a)(t,4),i=a[0],o=a[1],s=a[2],c=a[3],u=null==c?Object(Tt.a)(1):c,l=Object(Jt.c)(o.shape,i.shape),f=[];if(1===o.rank){for(var d=0;d<i.shape.length-1;++d)f.push(i.shape[d]);f.push(1)}var p=Object(Dt.a)(i,o),h=Object(St.a)(e,u),v=Object(Xr.a)(Object(xt.a)(s,Object(Tt.a)(r))),m=Object(St.a)(Object(St.a)(Object(St.a)(v,v),v),Object(Tt.a)(-.5));return{x:function(){return 1===o.rank?Object(Kn.a)(Object(St.a)(Object(St.a)(e,Object(Qr.a)(Object(Kn.a)(v,[1,1,1,o.shape[0]]),f)),u),i.shape):Object(Kn.a)(Object(St.a)(Object(St.a)(e,v),u),i.shape)},mean:function(){var e=Object(St.a)(Object(St.a)(v,Object(Tt.a)(-1)),h);return 1===o.rank&&(e=Object(Xn.a)(e,l)),Object(Kn.a)(e,o.shape)},variance:function(){var e=Object(St.a)(Object(St.a)(m,p),h);return 1===o.rank&&(e=Object(Xn.a)(e,l)),Object(Kn.a)(e,o.shape)},scale:function(){var t=Object(St.a)(p,v),n=Object(St.a)(e,t);return 1===o.rank&&(n=Object(Xn.a)(n,l)),Object(Kn.a)(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=Object(Xn.a)(t,l)),Object(Kn.a)(t,o.shape)}}}},Zr=n(201),Jr={kernelName:Ue.mb,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,2),a=r[0],i=r[1],o=n.axis,s=Object(P.I)(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),c=r.length,u=t.slice(o,t.length).slice(1),l=u.length,f=$r(0,c),d=$r(c+1,c+1+l),p=ea([r,[n],u]),h=Object(Kn.a)(e,p),v=Object(Kn.a)(i,[n]),m=ea([[c],f,d]),b=Object(qe.a)(h,m),g=Object(Zr.a)(b,v,a.shape[s]),y=Object(Zt.h)(m);return g=Object(qe.a)(g,y)},indices:function(){return i}}}};function $r(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function ea(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var ta={kernelName:Ue.ob,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1];return{a:function(){return Object(Et.a)(r)},b:function(){return Object(Et.a)(a)}}}},na={kernelName:Ue.qb,gradFunc:function(e){return{x:function(){return Object(ce.a)(e,"float32")}}}},ra={kernelName:Ue.sb,gradFunc:function(e){return{x:function(){return Object(Et.a)(e)}}}},aa={kernelName:Ue.tb,gradFunc:function(e){return{x:function(){return Object(Et.a)(e)}}}},ia={kernelName:Ue.ub,gradFunc:function(e){return{x:function(){return Object(Et.a)(e)}}}},oa=n(85),sa={kernelName:Ue.xb,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,1)[0],a=n.alpha,i=Object(oa.a)(r,0);return{x:function(){return Object(br.a)(i,e,Object(St.a)(e,a))}}}},ca={kernelName:Ue.Cb,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(jt.a)(e,Object(xt.a)(n,1))}}}},ua={kernelName:Ue.Bb,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(jt.a)(e,Object(ce.a)(n,"float32"))}}}},la={kernelName:Ue.Db,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(ge.a)(t,1)[0],a=n.axis;return{logits:function(){var t=Object(Vr.a)(r);return Object(Dt.a)(e,Object(St.a)(Object(Xn.a)(e,a,!0),t))}}}};var fa=Object(ze.b)({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},c={depthRadius:r,bias:a,alpha:i,beta:o};return d.a.runKernel(Ue.wb,s,c)}}),da={kernelName:Ue.vb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(ge.a)(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,c=n.alpha,u=n.beta;return{x:function(){return fa(a,i,e,o,s,c,u)}}}},pa=n(128);function ha(e,t,n,r){return t.rank<n.rank&&(t=Object(Kn.a)(t,Zt.e(t.shape,r))),e.rank<n.rank&&(e=Object(Kn.a)(e,Zt.e(e.shape,r))),{x:function(){return Object(St.a)(e,Object(ce.a)(Object(pa.a)(n,t),e.dtype))}}}var va={kernelName:Ue.Hb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=ha(e,t[1],a,P.I(r,a.shape));return{x:function(){return i.x()}}}},ma=n(152),ba={kernelName:Ue.Nb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1];return{a:function(){return Object(St.a)(e,Object(ce.a)(Object(hr.a)(r,a),"float32"))},b:function(){return Object(St.a)(e,Object(ce.a)(Object(ma.a)(r,a),"float32"))}}}};var ga=Object(ze.b)({maxPool3dGrad_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,c=Object(De.a)(e,"dy","maxPool3dGrad"),u=Object(De.a)(t,"input","maxPool3dGrad"),l=Object(De.a)(n,"output","maxPool3dGrad"),f=c,p=u,h=l,v=!1;4===u.rank&&(v=!0,f=Object(Kn.a)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),p=Object(Kn.a)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),h=Object(Kn.a)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),P.b(5===f.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(f.rank,".")})),P.b(5===p.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(p.rank,".")})),P.b(5===h.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")})),P.b(tn.h(a,i),(function(){return"Error in maxPool3dGrad: Either strides or dilations "+"must be 1. Got strides ".concat(a," and dilations '").concat(i,"'")})),null!=s&&P.b(P.v(o),(function(){return"Error in maxPool3dGrad: pad must be an integer when "+"using, dimRoundingMode ".concat(s," but got pad ").concat(o,".")}));var m={dy:f,input:p,output:h},b={filterSize:r,strides:a,dilations:i,pad:o,dimRoundingMode:s},g=d.a.runKernel(Ue.Kb,m,b);return v?Object(Kn.a)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),ya={kernelName:Ue.Jb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(ge.a)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,c=n.dilations,u=n.pad,l=n.dimRoundingMode,f=null==c?[1,1,1]:c;return{x:function(){return ga(e,a,i,o,s,f,u,l)}}}};var Oa=Object(ze.b)({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=Object(De.a)(e,"dy","maxPoolGrad"),c=Object(De.a)(t,"input","maxPoolGrad"),u=Object(De.a)(n,"output","maxPoolGrad");P.b(c.rank===s.rank,(function(){return"Rank of input (".concat(c.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),P.b(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),P.b(4===c.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(c.rank,".")})),null!=o&&P.b(P.v(i),(function(){return"Error in maxPoolGrad: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(i,".")}));var l={dy:s,input:c,output:u},f={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return d.a.runKernel(Ue.Lb,l,f)}}),ka={kernelName:Ue.Ib,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(ge.a)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,c=n.pad;return{x:function(){return Oa(e,a,i,o,s,c)}}}},wa=n(129),xa={kernelName:Ue.Ob,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,1)[0],a=n.axis,i=P.I(a,r.shape),o=Object(Zt.d)(r.shape,i)[1],s=P.N(o);return{x:function(){var t=r.shape.slice();i.forEach((function(e){t[e]=1}));var n=Object(Kn.a)(e,t);return Object(jt.a)(Object(St.a)(n,Object(wa.a)(r.shape,"float32")),s)}}}},ja={kernelName:Ue.Pb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=Object(ge.a)(t,2),i=a[0],o=ha(e,a[1],i,P.I(r,i.shape));return{x:function(){return o.x()}}}},Sa={kernelName:Ue.Qb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1];return{a:function(){return Object(St.a)(e,Object(ce.a)(Object(vr.a)(r,a),"float32"))},b:function(){return Object(St.a)(e,Object(ce.a)(Object(oa.a)(r,a),"float32"))}}}},_a=n(57),Ca={kernelName:Ue.Rb,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Object(_a.a)(e,a,r.shape)}}}},Ea=n(190),Na={kernelName:Ue.Sb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1],i=Object(Jt.a)(r.shape,a.shape);return{a:function(){var t=Object(Jt.c)(r.shape,i);return t.length>0?Object(Kn.a)(Object(Xn.a)(e,t),r.shape):e},b:function(){var t=Object(St.a)(e,Object(Wn.a)(Object(Ea.a)(Object(jt.a)(r,a)))),n=Object(Jt.c)(a.shape,i);return n.length>0?Object(Kn.a)(Object(Xn.a)(t,n),a.shape):t}}}},Ta={kernelName:Ue.Ub,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1],i=Object(Jt.a)(r.shape,a.shape);return{a:function(){var t=Object(St.a)(e,Object(ce.a)(a,"float32")),n=Object(Jt.c)(r.shape,i);return n.length>0?Object(Kn.a)(Object(Xn.a)(t,n),r.shape):t},b:function(){var t=Object(St.a)(e,Object(ce.a)(r,"float32")),n=Object(Jt.c)(a.shape,i);return n.length>0?Object(Kn.a)(Object(Xn.a)(t,n),a.shape):t}}}},Ia={kernelName:Ue.Vb,gradFunc:function(e){return{x:function(){return Object(Wn.a)(e)}}}},Aa={kernelName:Ue.ac,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Object(Yt.a)(n.shape,"float32")}}}},Ma={kernelName:Ue.bc,gradFunc:function(e){return{x:function(){return Object(Et.a)(e)}}}},Pa=n(132),Ra={kernelName:Ue.cc,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return Object(Pa.a)(e,r).map((function(e){return function(){return e}}))}},Da={kernelName:Ue.dc,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Object(_a.a)(e,a,r.shape)}}}},Fa=n(121),La={kernelName:Ue.fc,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=Object(ge.a)(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,c=Jt.a(o.shape,s.shape);return{a:function(){var t=Object(ce.a)(s,"float32"),n=Object(St.a)(e,Object(St.a)(t,Object(Rt.a)(o,Object(Dt.a)(t,Object(Tt.a)(1))))),r=Jt.c(o.shape,c);return r.length>0&&(n=Object(Xn.a)(n,r)),Object(Kn.a)(n,o.shape)},b:function(){var t=Object(oa.a)(o,0),n=Object(br.a)(t,Object(Fa.a)(o),Object(Et.a)(o)),r=Object(St.a)(e,Object(St.a)(i,n)),a=Jt.c(s.shape,c);return a.length>0&&(r=Object(Xn.a)(r,a)),Object(Kn.a)(r,s.shape)}}}},za={kernelName:Ue.gc,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1],i=Object(oa.a)(r,0);return{x:function(){return Object(br.a)(i,e,Object(St.a)(e,a))},alpha:function(){var t=Object(br.a)(i,Object(Et.a)(e),Object(St.a)(e,r)),n=Object(Jt.c)(a.shape,e.shape);return n.length>0&&(t=Object(Xn.a)(t,n)),Object(Kn.a)(t,a.shape)}}}},qa={kernelName:Ue.kc,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1],i=Jt.a(r.shape,a.shape);return{a:function(){var t=Object(jt.a)(e,Object(ce.a)(a,"float32")),n=Jt.c(r.shape,i);return n.length>0?Object(Kn.a)(Object(Xn.a)(t,n),r.shape):t},b:function(){var t=Object(St.a)(e,Object(ce.a)(r,"float32")),n=Jt.c(a.shape,i);n.length>0&&(t=Object(Kn.a)(Object(Xn.a)(t,n),a.shape));var o=Object(Ct.a)(a);return Object(Wn.a)(Object(jt.a)(t,Object(ce.a)(o,"float32")))}}}},Va={kernelName:Ue.lc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(jt.a)(e,Object(Wn.a)(Object(Ct.a)(n)))}}}},Ba={kernelName:Ue.nc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0],r=Object(St.a)(Object(vr.a)(n,6),Object(Bn.a)(n));return{x:function(){return Object(St.a)(e,Object(ce.a)(r,"float32"))}}}},Ua={kernelName:Ue.mc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(e,Object(ce.a)(Object(Bn.a)(n),"float32"))}}}},Wa={kernelName:Ue.oc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(Kn.a)(e,n.shape)}}}},Ga={kernelName:Ue.pc,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:Object(ge.a)(t,1)[0]};return{images:function(){return d.a.runKernel(Ue.qc,r,n)}}}},Ha={kernelName:Ue.rc,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:Object(ge.a)(t,1)[0]};return{images:function(){return d.a.runKernel(Ue.sc,r,n)}}}},Ka=n(90),Xa={kernelName:Ue.tc,gradFunc:function(e,t,n){var r=n.dims,a=Object(P.I)(r,e.shape);return{x:function(){return Object(Ka.a)(e,a)}}}},Qa={kernelName:Ue.vc,gradFunc:function(e){return{x:function(){return Object(Et.a)(e)}}}},Ya={kernelName:Ue.wc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(Wn.a)(Object(jt.a)(e,Object(St.a)(Object(Rt.a)(n,1.5),2)))}}}},Za=n(153),Ja={kernelName:Ue.yc,inputsToSave:["condition"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{condition:function(){return Object(ce.a)(Object(Et.a)(n),"float32")},t:function(){return Object(St.a)(e,Object(ce.a)(n,e.dtype))},e:function(){return Object(St.a)(e,Object(ce.a)(Object(Za.a)(n),e.dtype))}}}},$a={kernelName:Ue.zc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){var t=Object(oa.a)(n,Object(Tt.a)(0)),r=Object(Tt.a)(dn),a=Object(Tt.a)(pn),i=Object(St.a)(e,a),o=Object(St.a)(Object(St.a)(e,r),Object(Vr.a)(Object(ce.a)(n,"float32")));return Object(br.a)(t,i,o)}}}},ei={kernelName:Ue.Ac,outputsToSave:[!0],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(e,Object(St.a)(n,Object(Dt.a)(Object(Tt.a)(1),n)))}}}},ti={kernelName:Ue.Bc,gradFunc:function(e){return{x:function(){return Object(Et.a)(e)}}}},ni=n(187),ri={kernelName:Ue.Cc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(Object(ni.a)(Object(ce.a)(n,"float32")),e)}}}},ai=n(245),ii={kernelName:Ue.Dc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(Object(ai.a)(Object(ce.a)(n,"float32")),e)}}}},oi=n(97),si={kernelName:Ue.Ec,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=Object(ge.a)(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=ft(r,a,i),c=Object(ge.a)(s,2),u=c[0],l=c[1],f=[],d=0;d<e.rank;d++)f.push([u[d],o[d]-u[d]-l[d]]);return{x:function(){return Object(oi.a)(e,f)}}}},ci={kernelName:Ue.Fc,outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(ge.a)(t,1)[0],a=n.dim,i=Object(St.a)(e,r);return{logits:function(){return Object(Dt.a)(i,Object(St.a)(Object(Xn.a)(i,[a],true),r))}}}},ui=n(136),li={kernelName:Ue.Gc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(e,Object(ui.a)(n))}}}},fi=n(150),di={kernelName:Ue.Hc,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return Object(fi.a)(e,r,a)}}}},pi=n(64),hi={kernelName:Ue.Jc,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Object(pi.a)(e,r)}}}},vi={kernelName:Ue.Kc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(jt.a)(e,Object(St.a)(Object(_t.a)(Object(ce.a)(n,"float32")),2))}}}},mi={kernelName:Ue.Lc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(e,Object(St.a)(Object(ce.a)(n,"float32"),2))}}}},bi={kernelName:Ue.Mc,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1],i=Object(Tt.a)(2);return{a:function(){return Object(St.a)(e,Object(St.a)(i,Object(Dt.a)(r,a)))},b:function(){return Object(St.a)(e,Object(St.a)(i,Object(Dt.a)(a,r)))}}}},gi={kernelName:Ue.Nc,gradFunc:function(e){return{x:function(){return Object(Et.a)(e)}}}},yi={kernelName:Ue.Pc,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(ge.a)(t,2),r=n[0],a=n[1],i=Jt.a(r.shape,a.shape);return{a:function(){var t=e,n=Jt.c(r.shape,i);return n.length>0&&(t=Object(Xn.a)(t,n)),Object(Kn.a)(t,r.shape)},b:function(){var t=e,n=Jt.c(a.shape,i);return n.length>0&&(t=Object(Xn.a)(t,n)),Object(Kn.a)(Object(Wn.a)(t),a.shape)}}}},Oi={kernelName:Ue.Qc,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,1)[0],a=r.shape.slice(),i=n.axis;Object(P.I)(i,r.shape).forEach((function(e){a[e]=1}));var o=Object(Kn.a)(e,a),s=Object(St.a)(o,Object(wa.a)(r.shape,"float32"));return{x:function(){return s}}}},ki={kernelName:Ue.Rc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(jt.a)(e,Object(Ct.a)(Object(ni.a)(n)))}}}},wi={kernelName:Ue.Sc,outputsToSave:[!0],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return Object(St.a)(Object(Dt.a)(Object(Tt.a)(1),Object(Ct.a)(n)),e)}}}},xi={kernelName:Ue.Tc,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(ge.a)(t,1)[0],a=n.reps;return{x:function(){var t=Object(Et.a)(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=Object(xt.a)(t,Object(_a.a)(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=Object(xt.a)(t,Object(_a.a)(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var c=0;c<a[1];++c)for(var u=0;u<a[2];++u)t=Object(xt.a)(t,Object(_a.a)(e,[s*r.shape[0],c*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var f=0;f<a[1];++f)for(var d=0;d<a[2];++d)for(var p=0;p<a[3];++p)t=Object(xt.a)(t,Object(_a.a)(e,[l*r.shape[0],f*r.shape[1],d*r.shape[2],p*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},ji={kernelName:Ue.Vc,gradFunc:function(e,t,n){var r=n.perm,a=Zt.h(r);return{x:function(){return Object(qe.a)(e,a)}}}},Si=n(104),_i={kernelName:Ue.Xc,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Object(Si.a)(e,r)}}}},Ci=n(109),Ei=n(151);for(var Ni=0,Ti=[Un,Gn,Hn,Qn,Yn,Zn,Jn,$n,er,tr,nr,rr,ir,sr,cr,lr,fr,dr,pr,gr,yr,kr,_r,jr,Nr,Ir,Mr,Rr,Lr,zr,qa,qr,Br,Ur,Wr,Gr,Kr,Hr,Yr,Jr,ta,na,ra,aa,ia,sa,ca,ua,la,da,va,va,ba,ya,ka,xa,ja,Sa,Ca,Na,Ta,Ia,Aa,Ma,Ra,Da,Da,La,za,Va,Ba,Ua,Wa,Ga,Ha,Xa,Qa,Ya,Ja,$a,ei,ti,ri,ii,si,ci,li,di,di,hi,hi,vi,bi,mi,gi,yi,Oi,ki,wi,xi,ji,_i,{kernelName:Ue.Yc,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=Object(ge.a)(t,1)[0];return{x:function(){return function(e,t){for(var n=Object(zt.a)(t,Object(Et.a)(t)),r=Object(Ei.a)(e,n),a=Object(hr.a)(t,Object(Tt.a)(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=Object(Ci.a)(a,o+1);a=Object(mr.a)(a,Object(wa.a)(r.shape,"bool"));var s=Object(Et.a)(r);return Object(br.a)(a,r,s)}(e,n)}}}},{kernelName:Ue.Zc,gradFunc:function(e){return{x:function(){return Object(Et.a)(e)}}}}];Ni<Ti.length;Ni++){var Ii=Ti[Ni];Object(We.e)(Ii)}fe.a.prototype.abs=function(){return this.throwIfDisposed(),Object(Lt.a)(this)};var Ai=n(337);fe.a.prototype.acos=function(){return this.throwIfDisposed(),Object(Ai.a)(this)};var Mi=n(338);fe.a.prototype.acosh=function(){return this.throwIfDisposed(),Object(Mi.a)(this)};var Pi=n(371);fe.a.prototype.addStrict=function(e){return this.throwIfDisposed(),Object(Pi.a)(this,e)},fe.a.prototype.add=function(e){return this.throwIfDisposed(),Object(xt.a)(this,e)};var Ri=n(238);fe.a.prototype.all=function(e,t){return this.throwIfDisposed(),Object(Ri.a)(this,e,t)};var Di=n(239);fe.a.prototype.any=function(e,t){return this.throwIfDisposed(),Object(Di.a)(this,e,t)};var Fi=n(240);fe.a.prototype.argMax=function(e){return this.throwIfDisposed(),Object(Fi.a)(this,e)};var Li=n(241);fe.a.prototype.argMin=function(e){return this.throwIfDisposed(),Object(Li.a)(this,e)},fe.a.prototype.asScalar=function(){return this.throwIfDisposed(),Object(P.b)(1===this.size,(function(){return"The array must have only 1 element."})),Object(Kn.a)(this,[])},fe.a.prototype.asType=function(e){return this.throwIfDisposed(),Object(ce.a)(this,e)},fe.a.prototype.as1D=function(){return this.throwIfDisposed(),Object(Kn.a)(this,[this.size])},fe.a.prototype.as2D=function(e,t){return this.throwIfDisposed(),Object(Kn.a)(this,[e,t])},fe.a.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Object(Kn.a)(this,[e,t,n])},fe.a.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Object(Kn.a)(this,[e,t,n,r])},fe.a.prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Object(Kn.a)(this,[e,t,n,r,a])};var zi=n(340);fe.a.prototype.asin=function(){return this.throwIfDisposed(),Object(zi.a)(this)};var qi=n(341);fe.a.prototype.asinh=function(){return this.throwIfDisposed(),Object(qi.a)(this)};var Vi=n(342);fe.a.prototype.atan=function(){return this.throwIfDisposed(),Object(Vi.a)(this)};var Bi=n(242);fe.a.prototype.atan2=function(e){return this.throwIfDisposed(),Object(Bi.a)(this,e)};var Ui=n(343);fe.a.prototype.atanh=function(){return this.throwIfDisposed(),Object(Ui.a)(this)};var Wi=n(186);fe.a.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Object(Wi.a)(this,e,t,n,r)},fe.a.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Object(fi.a)(this,e,t)};var Gi=n(133);fe.a.prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Object(Gi.a)(this,e,t,n,r,a)};var Hi=n(171);fe.a.prototype.broadcastTo=function(e){return this.throwIfDisposed(),Object(Hi.a)(this,e)},fe.a.prototype.cast=function(e){return this.throwIfDisposed(),Object(ce.a)(this,e)};var Ki=n(346);fe.a.prototype.ceil=function(){return this.throwIfDisposed(),Object(Ki.a)(this)};var Xi=n(347);fe.a.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Object(Xi.a)(this,e,t)},fe.a.prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof fe.a&&(e=[e]),Object(pi.a)([this].concat(Object(pe.a)(e)),t)};var Qi=n(243);fe.a.prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(Qi.a)(this,e,t,n,r,a,i)};var Yi=n(244);fe.a.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Object(Yi.a)(this,e,t,n,r,a)},fe.a.prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(Sr.a)(this,e,t,n,r,a,i)},fe.a.prototype.cos=function(){return this.throwIfDisposed(),Object(ni.a)(this)},fe.a.prototype.cosh=function(){return this.throwIfDisposed(),Object(ai.a)(this)},fe.a.prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Object(Pr.a)(this,e,t,n)};var Zi=n(246);fe.a.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Object(Zi.a)(this,e,t)};var Ji=n(127);fe.a.prototype.depthwiseConv2D=function(e,t,n,r,a,i){return Object(wt.b)("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),Object(Ji.a)(this,e,t,n,r,a,i)},fe.a.prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(Ji.a)(this,e,t,n,r,a,i)};var $i=n(247);fe.a.prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),Object($i.a)(this,e,t,n,r,a)};var eo=n(248);fe.a.prototype.divNoNan=function(e){return this.throwIfDisposed(),Object(eo.a)(this,e)},fe.a.prototype.divStrict=function(e){return this.throwIfDisposed(),Object(Pi.b)(this,e)},fe.a.prototype.div=function(e){return this.throwIfDisposed(),Object(jt.a)(this,e)};var to=n(249);fe.a.prototype.dot=function(e){return this.throwIfDisposed(),Object(to.a)(this,e)};var no=n(189);fe.a.prototype.elu=function(){return this.throwIfDisposed(),Object(no.a)(this)};var ro=n(370);fe.a.prototype.equalStrict=function(e){return this.throwIfDisposed(),Object(ro.a)(this,e)},fe.a.prototype.equal=function(e){return this.throwIfDisposed(),Object(pa.a)(this,e)};var ao=n(350);fe.a.prototype.erf=function(){return this.throwIfDisposed(),Object(ao.a)(this)},fe.a.prototype.exp=function(){return this.throwIfDisposed(),Object(Vr.a)(this)},fe.a.prototype.expandDims=function(e){return this.throwIfDisposed(),Object(Ci.a)(this,e)};var io=n(351);fe.a.prototype.expm1=function(){return this.throwIfDisposed(),Object(io.a)(this)};var oo=n(199);fe.a.prototype.fft=function(){return this.throwIfDisposed(),Object(oo.a)(this)},fe.a.prototype.flatten=function(){return this.throwIfDisposed(),Object(Kn.a)(this,[this.size])},fe.a.prototype.floor=function(){return this.throwIfDisposed(),Object(Ea.a)(this)};var so=n(184);fe.a.prototype.floorDiv=function(e){return this.throwIfDisposed(),Object(so.a)(this,e)},fe.a.prototype.gather=function(e,t){return this.throwIfDisposed(),Object(Ei.a)(this,e,t)},fe.a.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Object(ro.b)(this,e)},fe.a.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Object(hr.a)(this,e)},fe.a.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Object(ro.c)(this,e)},fe.a.prototype.greater=function(e){return this.throwIfDisposed(),Object(oa.a)(this,e)};var co=n(175);fe.a.prototype.ifft=function(){return this.throwIfDisposed(),Object(co.a)(this)};var uo=n(263);fe.a.prototype.irfft=function(){return this.throwIfDisposed(),Object(uo.a)(this)};var lo=n(352);fe.a.prototype.isFinite=function(){return this.throwIfDisposed(),Object(lo.a)(this)};var fo=n(353);fe.a.prototype.isInf=function(){return this.throwIfDisposed(),Object(fo.a)(this)};var po=n(354);fe.a.prototype.isNaN=function(){return this.throwIfDisposed(),Object(po.a)(this)};var ho=n(192);fe.a.prototype.leakyRelu=function(e){return this.throwIfDisposed(),Object(ho.a)(this,e)},fe.a.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Object(ro.d)(this,e)},fe.a.prototype.lessEqual=function(e){return this.throwIfDisposed(),Object(vr.a)(this,e)},fe.a.prototype.lessStrict=function(e){return this.throwIfDisposed(),Object(ro.e)(this,e)},fe.a.prototype.less=function(e){return this.throwIfDisposed(),Object(ma.a)(this,e)};var vo=n(250);fe.a.prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Object(vo.a)(this,e,t,n,r)};var mo=n(356);fe.a.prototype.logSigmoid=function(){return this.throwIfDisposed(),Object(mo.a)(this)};var bo=n(357);fe.a.prototype.logSoftmax=function(e){return this.throwIfDisposed(),Object(bo.a)(this,e)};var go=n(193);fe.a.prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Object(go.a)(this,e,t)},fe.a.prototype.log=function(){return this.throwIfDisposed(),Object(Fa.a)(this)};var yo=n(251);fe.a.prototype.log1p=function(){return this.throwIfDisposed(),Object(yo.a)(this)},fe.a.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Object(mr.a)(this,e)},fe.a.prototype.logicalNot=function(){return this.throwIfDisposed(),Object(Za.a)(this)};var Oo=n(194);fe.a.prototype.logicalOr=function(e){return this.throwIfDisposed(),Object(Oo.a)(this,e)};var ko=n(253);fe.a.prototype.logicalXor=function(e){return this.throwIfDisposed(),Object(ko.a)(this,e)},fe.a.prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Object(Fe.a)(this,e,t,n)};var wo=n(195);fe.a.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Object(wo.a)(this,e,t,n,r)};var xo=n(114);fe.a.prototype.max=function(e,t){return this.throwIfDisposed(),Object(xo.a)(this,e,t)},fe.a.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Object(Pi.c)(this,e)},fe.a.prototype.maximum=function(e){return this.throwIfDisposed(),Object(zt.a)(this,e)};var jo=n(144);fe.a.prototype.mean=function(e,t){return this.throwIfDisposed(),Object(jo.a)(this,e,t)};var So=n(172);fe.a.prototype.min=function(e,t){return this.throwIfDisposed(),Object(So.a)(this,e,t)},fe.a.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Object(Pi.d)(this,e)};var _o=n(154);fe.a.prototype.minimum=function(e){return this.throwIfDisposed(),Object(_o.a)(this,e)};var Co=n(254);fe.a.prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Object(Co.a)(this,e,t)},fe.a.prototype.modStrict=function(e){return this.throwIfDisposed(),Object(Pi.e)(this,e)};var Eo=n(196);fe.a.prototype.mod=function(e){return this.throwIfDisposed(),Object(Eo.a)(this,e)},fe.a.prototype.mulStrict=function(e){return this.throwIfDisposed(),Object(Pi.f)(this,e)},fe.a.prototype.mul=function(e){return this.throwIfDisposed(),Object(St.a)(this,e)},fe.a.prototype.neg=function(){return this.throwIfDisposed(),Object(Wn.a)(this)};var No=n(202);fe.a.prototype.norm=function(e,t,n){return this.throwIfDisposed(),Object(No.a)(this,e,t,n)},fe.a.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Object(ro.f)(this,e)};var To=n(155);fe.a.prototype.notEqual=function(e){return this.throwIfDisposed(),Object(To.a)(this,e)},fe.a.prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Object(Le.a)(this,e,t,n)};var Io=n(361);fe.a.prototype.onesLike=function(){return this.throwIfDisposed(),Object(Io.a)(this)},fe.a.prototype.pad=function(e,t){return this.throwIfDisposed(),Object(oi.a)(this,e,t)};var Ao=n(255);fe.a.prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),Object(Ao.a)(this,e,t,n,r,a)},fe.a.prototype.powStrict=function(e){return this.throwIfDisposed(),Object(Pi.g)(this,e)},fe.a.prototype.pow=function(e){return this.throwIfDisposed(),Object(Rt.a)(this,e)};var Mo=n(197);fe.a.prototype.prelu=function(e){return this.throwIfDisposed(),Object(Mo.a)(this,e)};var Po=n(256);fe.a.prototype.prod=function(e,t){return this.throwIfDisposed(),Object(Po.a)(this,e,t)};var Ro=n(362);fe.a.prototype.reciprocal=function(){return this.throwIfDisposed(),Object(Ro.a)(this)};var Do=n(130);fe.a.prototype.relu=function(){return this.throwIfDisposed(),Object(Do.a)(this)};var Fo=n(198);fe.a.prototype.relu6=function(){return this.throwIfDisposed(),Object(Fo.a)(this)},fe.a.prototype.reshapeAs=function(e){return this.throwIfDisposed(),Object(Kn.a)(this,e.shape)},fe.a.prototype.reshape=function(e){return this.throwIfDisposed(),Object(Kn.a)(this,e)};var Lo=n(292);fe.a.prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Object(Lo.a)(this,e,t,n)};var zo=n(290);fe.a.prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Object(zo.a)(this,e,t,n)},fe.a.prototype.reverse=function(e){return this.throwIfDisposed(),Object(Ka.a)(this,e)};var qo=n(200);fe.a.prototype.rfft=function(){return this.throwIfDisposed(),Object(qo.a)(this)};var Vo=n(363);fe.a.prototype.round=function(){return this.throwIfDisposed(),Object(Vo.a)(this)},fe.a.prototype.rsqrt=function(){return this.throwIfDisposed(),Object(Xr.a)(this)};var Bo=n(259);fe.a.prototype.selu=function(){return this.throwIfDisposed(),Object(Bo.a)(this)};var Uo=n(260);fe.a.prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(Uo.a)(this,e,t,n,r,a,i)},fe.a.prototype.sigmoid=function(){return this.throwIfDisposed(),Object(ui.a)(this)};var Wo=n(365);fe.a.prototype.sign=function(){return this.throwIfDisposed(),Object(Wo.a)(this)},fe.a.prototype.sin=function(){return this.throwIfDisposed(),Object(Tr.a)(this)},fe.a.prototype.sinh=function(){return this.throwIfDisposed(),Object(Ar.a)(this)},fe.a.prototype.slice=function(e,t){return this.throwIfDisposed(),Object(_a.a)(this,e,t)};var Go=n(366);fe.a.prototype.softmax=function(e){return this.throwIfDisposed(),Object(Go.a)(this,e)};var Ho=n(252);fe.a.prototype.softplus=function(){return this.throwIfDisposed(),Object(Ho.a)(this)},fe.a.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Object(ur.a)(this,e,t)},fe.a.prototype.split=function(e,t){return this.throwIfDisposed(),Object(Or.a)(this,e,t)},fe.a.prototype.sqrt=function(){return this.throwIfDisposed(),Object(_t.a)(this)},fe.a.prototype.square=function(){return this.throwIfDisposed(),Object(Ct.a)(this)};var Ko=n(157);fe.a.prototype.squaredDifference=function(e){return this.throwIfDisposed(),Object(Ko.a)(this,e)},fe.a.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Object(Pi.h)(this,e)};var Xo=n(158);fe.a.prototype.squeeze=function(e){return this.throwIfDisposed(),Object(Xo.a)(this,e)},fe.a.prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof fe.a?[this,e]:[this].concat(Object(pe.a)(e));return Object(Si.a)(n,t)},fe.a.prototype.step=function(e){return this.throwIfDisposed(),Object(Bn.a)(this,e)};var Qo=n(367);fe.a.prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),Object(Qo.a)(this,e,t,n,r,a,i,o,s)},fe.a.prototype.subStrict=function(e){return this.throwIfDisposed(),Object(Pi.i)(this,e)},fe.a.prototype.sub=function(e){return this.throwIfDisposed(),Object(Dt.a)(this,e)},fe.a.prototype.sum=function(e,t){return this.throwIfDisposed(),Object(Xn.a)(this,e,t)};var Yo=n(368);fe.a.prototype.tan=function(){return this.throwIfDisposed(),Object(Yo.a)(this)};var Zo=n(219);fe.a.prototype.tanh=function(){return this.throwIfDisposed(),Object(Zo.a)(this)},fe.a.prototype.tile=function(e){return this.throwIfDisposed(),Object(Qr.a)(this,e)},fe.a.prototype.toBool=function(){return this.throwIfDisposed(),Object(ce.a)(this,"bool")},fe.a.prototype.toFloat=function(){return this.throwIfDisposed(),Object(ce.a)(this,"float32")},fe.a.prototype.toInt=function(){return this.throwIfDisposed(),Object(ce.a)(this,"int32")};var Jo=n(265);fe.a.prototype.topk=function(e,t){return this.throwIfDisposed(),Object(Jo.a)(this,e,t)},fe.a.prototype.transpose=function(e){return this.throwIfDisposed(),Object(qe.a)(this,e)};var $o=n(266);fe.a.prototype.unique=function(e){return this.throwIfDisposed(),Object($o.a)(this,e)},fe.a.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Object(Zr.a)(this,e,t)},fe.a.prototype.unstack=function(e){return this.throwIfDisposed(),Object(Pa.a)(this,e)},fe.a.prototype.where=function(e,t){return this.throwIfDisposed(),Object(br.a)(e,this,t)},fe.a.prototype.zerosLike=function(){return this.throwIfDisposed(),Object(Et.a)(this)}},function(e,t,n){"use strict";e.exports=n(425)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){e.exports=n(521)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(203);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(271);function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=n(20);function s(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}function c(e){var t=Object(a.a)();return function(){var n,a=Object(r.a)(e);if(t){var i=Object(r.a)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return s(this,n)}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(15),a=n(53),i=n(19),o=n(21),s=n(30);function c(e,t){var n=e;if(Object(o.A)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Object(o.A)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Object(a.c)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&u(e,r,[]),r}function u(e,t,n){if(n=n||[],Array.isArray(e)||Object(o.A)(e)){Object(o.b)(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Object(o.b)(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)u(e[a],r,n.concat(a))}else Object(o.b)(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function f(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof i.a)return l(a,e.dtype,t,n),e;var u=Object(o.r)(e);if("string"!==u&&["bool","int32","float32"].indexOf(a)>=0&&(u=a),l(a,u,t,n),null==e||!Object(o.A)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var f=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(f,"'"))}var d=c(e,u);Object(o.A)(e)||Array.isArray(e)||(e=[e]);var p=!0,h="string"!==u?Object(s.toTypedArray)(e,u):Object(o.m)(e,[],p);return r.a.makeTensor(h,d,u)}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return f(e,"".concat(t,"[").concat(a,"]"),n,r)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(269);var a=n(159),i=n(270);function o(e,t){return Object(r.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}(e,t)||Object(a.a)(e,t)||Object(i.a)()}},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return d}));var r=n(8),a=n(0);function i(e,t,n,r,i){var s=t.inputParams[e];if(s&&void 0!==s.inputIndexStart){var c=s.inputIndexStart,u=0===s.inputIndexEnd?void 0:void 0===s.inputIndexEnd?c+1:s.inputIndexEnd;if("tensor"===s.type)return o(t.inputNames[s.inputIndexStart],n,r,i);if("tensors"===s.type)return t.inputNames.slice(c,u).map((function(e){return o(e,n,r,i)}));var l=o(t.inputNames.slice(c)[0],n,r,i),f=l.dataSync();return"number"===s.type?f[0]:a.qi.toNestedArray(l.shape,f)}var d=t.attrParams[e];return d&&d.value}function o(e,t,n,a){var i=l(e),o=Object(r.a)(i,2),s=o[0],c=o[1];if(null!=a){var f=a.getHashTableHandleByName(s);if(null!=f)return f}var d=n.currentContextIds.find((function(e){return!!t[u(s,e)]}));return void 0!==d?t[u(s,d)][c]:void 0}function s(e,t,n){return t[u(e,n.currentContextId)]}function c(e,t){var n=l(e),a=Object(r.a)(n,2),i=a[0],o=a[1];return[u(i,t&&t.currentContextId),o]}function u(e,t){return t?"".concat(e,"-").concat(t):e}function l(e){var t=e.split(":");return 1===t.length?[e,0]:[t[0],Number(t[t.length-1])]}function f(e,t,n){var r=i("pad",e,t,n);if("explicit"===r){r=i("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o<4;o++)a[o][0]=r[2*o],a[o][1]=r[2*o+1];return a}return r}function d(e){return e.kept?e:Object(a.ae)(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"n",(function(){return v})),n.d(t,"m",(function(){return m})),n.d(t,"o",(function(){return b})),n.d(t,"r",(function(){return g})),n.d(t,"p",(function(){return y})),n.d(t,"q",(function(){return O})),n.d(t,"s",(function(){return k})),n.d(t,"t",(function(){return w})),n.d(t,"u",(function(){return x})),n.d(t,"v",(function(){return j})),n.d(t,"w",(function(){return S})),n.d(t,"x",(function(){return _})),n.d(t,"y",(function(){return C})),n.d(t,"z",(function(){return E})),n.d(t,"A",(function(){return N})),n.d(t,"B",(function(){return T})),n.d(t,"C",(function(){return I})),n.d(t,"D",(function(){return A})),n.d(t,"E",(function(){return M})),n.d(t,"F",(function(){return P})),n.d(t,"G",(function(){return R})),n.d(t,"H",(function(){return D})),n.d(t,"I",(function(){return F})),n.d(t,"J",(function(){return L})),n.d(t,"L",(function(){return z})),n.d(t,"K",(function(){return q})),n.d(t,"M",(function(){return V})),n.d(t,"N",(function(){return B})),n.d(t,"O",(function(){return U})),n.d(t,"P",(function(){return W})),n.d(t,"Q",(function(){return G})),n.d(t,"R",(function(){return H})),n.d(t,"S",(function(){return K})),n.d(t,"U",(function(){return X})),n.d(t,"T",(function(){return Q})),n.d(t,"kc",(function(){return Y})),n.d(t,"V",(function(){return Z})),n.d(t,"W",(function(){return J})),n.d(t,"Y",(function(){return $})),n.d(t,"X",(function(){return ee})),n.d(t,"Z",(function(){return te})),n.d(t,"ab",(function(){return ne})),n.d(t,"bb",(function(){return re})),n.d(t,"cb",(function(){return ae})),n.d(t,"db",(function(){return ie})),n.d(t,"eb",(function(){return oe})),n.d(t,"fb",(function(){return se})),n.d(t,"gb",(function(){return ce})),n.d(t,"ib",(function(){return ue})),n.d(t,"mb",(function(){return le})),n.d(t,"lb",(function(){return fe})),n.d(t,"nb",(function(){return de})),n.d(t,"ob",(function(){return pe})),n.d(t,"qb",(function(){return he})),n.d(t,"pb",(function(){return ve})),n.d(t,"rb",(function(){return me})),n.d(t,"sb",(function(){return be})),n.d(t,"tb",(function(){return ge})),n.d(t,"ub",(function(){return ye})),n.d(t,"xb",(function(){return Oe})),n.d(t,"yb",(function(){return ke})),n.d(t,"zb",(function(){return we})),n.d(t,"Ab",(function(){return xe})),n.d(t,"Bb",(function(){return je})),n.d(t,"Cb",(function(){return Se})),n.d(t,"Eb",(function(){return _e})),n.d(t,"Fb",(function(){return Ce})),n.d(t,"Gb",(function(){return Ee})),n.d(t,"Db",(function(){return Ne})),n.d(t,"vb",(function(){return Te})),n.d(t,"wb",(function(){return Ie})),n.d(t,"Hb",(function(){return Ae})),n.d(t,"Nb",(function(){return Me})),n.d(t,"Ib",(function(){return Pe})),n.d(t,"Lb",(function(){return Re})),n.d(t,"Jb",(function(){return De})),n.d(t,"Kb",(function(){return Fe})),n.d(t,"Mb",(function(){return Le})),n.d(t,"Ob",(function(){return ze})),n.d(t,"Pb",(function(){return qe})),n.d(t,"Qb",(function(){return Ve})),n.d(t,"Rb",(function(){return Be})),n.d(t,"Sb",(function(){return Ue})),n.d(t,"Tb",(function(){return We})),n.d(t,"Ub",(function(){return Ge})),n.d(t,"Vb",(function(){return He})),n.d(t,"Zb",(function(){return Ke})),n.d(t,"Wb",(function(){return Xe})),n.d(t,"Xb",(function(){return Qe})),n.d(t,"Yb",(function(){return Ye})),n.d(t,"bc",(function(){return Ze})),n.d(t,"ac",(function(){return Je})),n.d(t,"cc",(function(){return $e})),n.d(t,"dc",(function(){return et})),n.d(t,"ec",(function(){return tt})),n.d(t,"fc",(function(){return nt})),n.d(t,"gc",(function(){return rt})),n.d(t,"hc",(function(){return at})),n.d(t,"ic",(function(){return it})),n.d(t,"jc",(function(){return ot})),n.d(t,"lc",(function(){return st})),n.d(t,"mc",(function(){return ct})),n.d(t,"oc",(function(){return ut})),n.d(t,"rc",(function(){return lt})),n.d(t,"sc",(function(){return ft})),n.d(t,"pc",(function(){return dt})),n.d(t,"qc",(function(){return pt})),n.d(t,"nc",(function(){return ht})),n.d(t,"tc",(function(){return vt})),n.d(t,"vc",(function(){return mt})),n.d(t,"wc",(function(){return bt})),n.d(t,"xc",(function(){return gt})),n.d(t,"yc",(function(){return yt})),n.d(t,"zc",(function(){return Ot})),n.d(t,"Ec",(function(){return kt})),n.d(t,"Cc",(function(){return wt})),n.d(t,"Dc",(function(){return xt})),n.d(t,"Bc",(function(){return jt})),n.d(t,"Ac",(function(){return St})),n.d(t,"Gc",(function(){return _t})),n.d(t,"Kc",(function(){return Ct})),n.d(t,"Qc",(function(){return Et})),n.d(t,"Hc",(function(){return Nt})),n.d(t,"Jc",(function(){return Tt})),n.d(t,"Fc",(function(){return It})),n.d(t,"Mc",(function(){return At})),n.d(t,"Lc",(function(){return Mt})),n.d(t,"Pc",(function(){return Pt})),n.d(t,"Ic",(function(){return Rt})),n.d(t,"Oc",(function(){return Dt})),n.d(t,"Rc",(function(){return Ft})),n.d(t,"Sc",(function(){return Lt})),n.d(t,"Tc",(function(){return zt})),n.d(t,"Uc",(function(){return qt})),n.d(t,"Vc",(function(){return Vt})),n.d(t,"Wc",(function(){return Bt})),n.d(t,"Xc",(function(){return Ut})),n.d(t,"Yc",(function(){return Wt})),n.d(t,"Zc",(function(){return Gt})),n.d(t,"Nc",(function(){return Ht})),n.d(t,"hb",(function(){return Kt})),n.d(t,"uc",(function(){return Xt})),n.d(t,"ad",(function(){return Qt})),n.d(t,"jb",(function(){return Yt})),n.d(t,"kb",(function(){return Zt}));var r="Abs",a="Acos",i="Acosh",o="Add",s="AddN",c="All",u="Any",l="ArgMax",f="ArgMin",d="Asin",p="Asinh",h="Atan",v="Atanh",m="Atan2",b="AvgPool",g="AvgPoolGrad",y="AvgPool3D",O="AvgPool3DGrad",k="BatchMatMul",w="BatchToSpaceND",x="Bincount",j="BroadcastTo",S="Cast",_="Ceil",C="ClipByValue",E="Complex",N="ComplexAbs",T="Concat",I="Conv2D",A="Conv2DBackpropFilter",M="Conv2DBackpropInput",P="Conv3D",R="Conv3DBackpropFilterV2",D="Conv3DBackpropInputV2",F="Cos",L="Cosh",z="Cumsum",q="CropAndResize",V="DenseBincount",B="DepthToSpace",U="DepthwiseConv2dNative",W="DepthwiseConv2dNativeBackpropFilter",G="DepthwiseConv2dNativeBackpropInput",H="Diag",K="Dilation2D",X="Dilation2DBackpropInput",Q="Dilation2DBackpropFilter",Y="RealDiv",Z="Elu",J="EluGrad",$="Erf",ee="Equal",te="Exp",ne="ExpandDims",re="Expm1",ae="FFT",ie="Fill",oe="FlipLeftRight",se="Floor",ce="FloorDiv",ue="FusedBatchNorm",le="GatherV2",fe="GatherNd",de="Greater",pe="GreaterEqual",he="Identity",ve="IFFT",me="Imag",be="IsFinite",ge="IsInf",ye="IsNan",Oe="LeakyRelu",ke="Less",we="LessEqual",xe="LinSpace",je="Log",Se="Log1p",_e="LogicalAnd",Ce="LogicalNot",Ee="LogicalOr",Ne="LogSoftmax",Te="LRN",Ie="LRNGrad",Ae="Max",Me="Maximum",Pe="MaxPool",Re="MaxPoolGrad",De="MaxPool3D",Fe="MaxPool3DGrad",Le="MaxPoolWithArgmax",ze="Mean",qe="Min",Ve="Minimum",Be="MirrorPad",Ue="Mod",We="Multinomial",Ge="Multiply",He="Neg",Ke="NotEqual",Xe="NonMaxSuppressionV3",Qe="NonMaxSuppressionV4",Ye="NonMaxSuppressionV5",Ze="OnesLike",Je="OneHot",$e="Pack",et="PadV2",tt="Pool",nt="Pow",rt="Prelu",at="Prod",it="Range",ot="Real",st="Reciprocal",ct="Relu",ut="Reshape",lt="ResizeNearestNeighbor",ft="ResizeNearestNeighborGrad",dt="ResizeBilinear",pt="ResizeBilinearGrad",ht="Relu6",vt="Reverse",mt="Round",bt="Rsqrt",gt="ScatterNd",yt="Select",Ot="Selu",kt="Slice",wt="Sin",xt="Sinh",jt="Sign",St="Sigmoid",_t="Softplus",Ct="Sqrt",Et="Sum",Nt="SpaceToBatchND",Tt="SplitV",It="Softmax",At="SquaredDifference",Mt="Square",Pt="Sub",Rt="SparseToDense",Dt="StridedSlice",Ft="Tan",Lt="Tanh",zt="Tile",qt="TopK",Vt="Transpose",Bt="Unique",Ut="Unpack",Wt="UnsortedSegmentSum",Gt="ZerosLike",Ht="Step",Kt="FromPixels",Xt="RotateWithOffset",Qt="_FusedMatMul",Yt="FusedConv2D",Zt="FusedDepthwiseConv2D"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(15),a=n(21),i="__op";function o(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],o=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=i;var s=function(){r.a.startScope(n);try{var e=o.apply(void 0,arguments);return Object(a.x)(e)&&console.error("Cannot return a Promise inside of tidy."),r.a.endScope(e),e}catch(t){throw r.a.endScope(null),t}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,c,"next",e)}function c(e){r(o,a,i,s,c,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(13);function a(e,t,n){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}},a(e,t,n||e)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return C}));var r=n(25),a=n(28),i=n(3),o=n.n(i),s=n(12),c=n(2),u=n(4),l=n(218),f=n(53),d=n(225),p=n(10),h=n(117),v=n(21),m=function(){function e(t,n){Object(c.a)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new b)}return Object(u.a)(e,[{key:"profileKernel",value:function(e,t,n){var r,a=this.backendTimer.time((function(){r=n()}));if(Object(f.c)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var i=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},o=0;o<r.length;o++)i(o);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var b=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?v.L("".concat(r,"ms"),9):r.error,s=v.L(e,25),c=t.rank,u=t.size,l=v.L(t.shape.toString(),14),f="";for(var d in a){var p=a[d];if(null!=p){var h=p.shape||t.shape,m=h.length;f+="".concat(d,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(c,"D ").concat(l,"\t%c").concat(u,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function g(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],c=s.inputs;for(var u in c){for(var l=c[u],f=!1,d=0;d<t.length;d++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[s.id]=!0;break}if(f)break}}var p={};p[n.id]=!0;for(var h={},v=e.length-1;v>=0;v--)for(var m=e[v],b=m.inputs,g=0;g<m.outputs.length;g++)if(p[m.outputs[g].id]){for(var y in b)p[b[y].id]=!0,h[m.id]=!0;break}for(var O=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&h[w.id]){var x={};for(var j in w.inputs){var S=w.inputs[j];r[S.id]&&(x[j]=S)}var _=Object.assign({},w);_.inputs=x,_.outputs=w.outputs,O.push(_)}}return O}function y(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),c=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!v.a(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var c=e[o.id];e[o.id]=r(c,a),c.dispose()}};for(var u in i.inputs)c(u)},i=t.length-1;i>=0;i--)a(i)}var O=n(19),k=n(51),w=n(30),x=function(){function e(){Object(c.a)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Object(u.a)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),j=function(){function e(t){Object(c.a)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new x}return Object(u.a)(e,[{key:"ready",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(console.warn("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new m(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;Object(h.d)(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;Object(h.d)(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof l.b||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return console.warn("Initialization of backend ".concat(e," failed")),console.warn(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,a,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t="float32",n={x:e},r={dtype:t};return C.runKernelFunc((function(n){return n.cast(e,t)}),n,null,p.w,r)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n,r,a){return this.runKernelFunc(null,t,null,e,n,r,a)}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e,t,n,r,a,i,o){var s,c=this,u=[],l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var f,d=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var v,m,b=Object(h.c)(r,this.backendName);if(null!=b)f=function(){var e=c.backend.numDataIds();v=b.kernelFunc({inputs:t,attrs:a,backend:c.backend});var n=Array.isArray(v)?v:[v];c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return c.makeTensorFromDataId(t,n,r)}));if(l){var f=c.getTensorsForGradient(r,t,s);if(null==f){null==o&&(o=[]);var d=s.filter((function(e,t){return o[t]}));f=(i||[]).slice().concat(d)}u=c.saveTensorsForBackwardMode(f)}return s};else{if(null==e)throw new Error("Error running ".concat(r,": Neither modular kernel nor forward func passed"));var g=function(e){l&&(u=e.map((function(e){return c.keep(c.clone(e))})))};f=function(){var t=c.backend.numDataIds();v=c.tidy((function(){return e(c.backend,g)}));var n=Array.isArray(v)?v:[v];return c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(r,t,n),n}}return this.scopedRun((function(){return c.state.kernelDepth++}),(function(){return c.state.kernelDepth--}),(function(){c.ENV.getBool("DEBUG")||c.state.profiling?(m=c.profiler.profileKernel(r,t,(function(){return f()})),c.ENV.getBool("DEBUG")&&c.profiler.logKernelProfile(m),s=m.outputs):s=f()})),l&&this.addTapeNode(r,t,s,n,u,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-d,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return null!=t[e]?t[e].shape:null})),outputShapes:s.map((function(e){return e.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(v)?s:s[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=Object(h.b)(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(v.b(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return null}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&v.z(e[0])&&(a=e.map((function(e){return w.encodeString(e)})));var i=r.write(a,t,n),o=new O.a(t,n,i,this.nextTensorId());if(this.incRef(o,r),"string"===n){var s=this.state.tensorInfo.get(i),c=Object(v.f)(a);this.state.numBytes+=c-s.bytes,s.bytes=c}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){n=n||"float32";var a=new O.a(t,n,e,this.nextTensorId());return this.incRef(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new O.c(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"incRef",value:function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*v.g(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof O.c||this.track(e)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):(t.backend.decComplexRef(e.dataId),this.state.tensorInfo.get(e.dataId).refCount--)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var n,i,s,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,i=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Object(a.a)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-i,s=Object(r.a)(this.state.activeProfile.kernels),e.prev=12,s.s();case 14:if((c=s.n()).done){e.next=24;break}return u=c.value,e.next=18,u.kernelTimeMs;case 18:return u.kernelTimeMs=e.sent,e.next=21,u.extraInfo;case 21:u.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),s.e(e.t0);case 29:return e.prev=29,s.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},c=Object(h.b)(e);null!=c&&(r=c.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=v.F(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=Object(k.getTensorsInContainer)(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(v.b(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));v.b(o instanceof O.a,(function(){return"The result y returned by f() must be a tensor."}));var s=g(this.state.activeTape,t,o);if(!i&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?S(o.shape):n,y(e,s,(function(e){return a.tidy(e)}),E);var i=t.map((function(t){return e[t.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){var t,n=Object(r.a)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:o,grads:i}}))}},{key:"customGrad",value:function(e){var t=this;return v.b(v.u(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;v.b(r.every((function(e){return e instanceof O.a})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};return r.forEach((function(e,t){o[t]=e})),t.runKernelFunc((function(t,n){return i=e.apply(void 0,[].concat(r,[n])),v.b(i.value instanceof O.a,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),v.b(v.u(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value}),o,(function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];v.b(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),v.b(a.every((function(e){return e instanceof O.a})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o}))}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"time",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(w.now)(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=Object(w.now)()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new x,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function S(e){var t=Object(v.D)(Object(v.N)(e),"float32");return C.makeTensor(t,e,"float32")}function _(){var e=Object(d.b)();if(null==e._tfengine){var t=new f.b(e);e._tfengine=new j(t)}return Object(f.d)(e._tfengine.ENV),Object(O.f)((function(){return e._tfengine})),e._tfengine}j.nextTensorId=0,j.nextVariableId=0;var C=_();function E(e,t){var n={a:e,b:t};return C.runKernel(p.d,n)}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(16);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"f",(function(){return k})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return x})),n.d(t,"a",(function(){return j})),n.d(t,"c",(function(){return S}));var r=n(5),a=n(6),i=n(3),o=n.n(i),s=n(12),c=n(2),u=n(4),l=n(28),f=n(21);function d(e,t,n,r){var a=Object(f.j)(t),i=function(e,t,n,r){var a=Object(f.N)(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,c="complex64"===n?m(e):e;if(s>1)for(var u=0;u<a/i;u++)for(var l=u*i,d=0;d<i;d++)o[d]=Math.max(o[d],p(c[l+d],0,n).length);return o}(e,t,n,a),o=t.length,s=v(e,t,n,a,i),c=["Tensor"];return r&&(c.push("  dtype: ".concat(n)),c.push("  rank: ".concat(o)),c.push("  shape: [".concat(t,"]")),c.push("  values:")),c.push(s.map((function(e){return"    "+e})).join("\n")),c.join("\n")}function p(e,t,n){var r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):Object(f.z)(e)?"'".concat(e,"'"):"bool"===n?h(e):parseFloat(e.toFixed(7)).toString(),Object(f.L)(r,t)}function h(e){return 0===e?"false":"true"}function v(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],c=t.length;if(0===c){if("complex64"===n){var u=m(e);return[p(u[0],0,n)]}return"bool"===n?[h(e[0])]:[e[0].toString()]}if(1===c){if(s>20){var f=3*o,d=Array.from(e.slice(0,f)),b=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(d=m(d),b=m(b)),["["+d.map((function(e,t){return p(e,a[t],n)})).join(", ")+", ..., "+b.map((function(e,t){return p(e,a[s-3+t],n)})).join(", ")+"]"]}var g="complex64"===n?m(e):Array.from(e);return["["+g.map((function(e,t){return p(e,a[t],n)})).join(", ")+"]"]}var y=t.slice(1),O=r.slice(1),k=r[0]*o,w=[];if(s>20){for(var x=0;x<3;x++){var j=x*k,S=j+k;w.push.apply(w,Object(l.a)(v(e.slice(j,S),y,n,O,a,!1)))}w.push("...");for(var _=s-3;_<s;_++){var C=_*k,E=C+k;w.push.apply(w,Object(l.a)(v(e.slice(C,E),y,n,O,a,_===s-1)))}}else for(var N=0;N<s;N++){var T=N*k,I=T+k;w.push.apply(w,Object(l.a)(v(e.slice(T,I),y,n,O,a,N===s-1)))}var A=2===c?",":"";w[0]="["+w[0]+A;for(var M=1;M<w.length-1;M++)w[M]=" "+w[M]+A;for(var P=",\n",R=2;R<c;R++)P+="\n";return w[w.length-1]=" "+w[w.length-1]+"]"+(i?"":P),w}function m(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var b=n(30),g=function(){function e(t,n,r){var a=this;if(Object(c.a)(this,e),this.dtype=n,this.shape=t.slice(),this.size=f.N(t),null!=r){var i=r.length;f.b(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||f.n(n,this.size),this.strides=Object(f.j)(t)}return Object(u.a)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),f.b(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var c=t[t.length-1],u=0;u<t.length-1;++u)c+=this.strides[u]*t[u];return this.values[c]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return y().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),y=null,O=null;function k(e){y=e}function w(e){O=e}function x(e){e}var j=function(){function e(t,n,r,a){Object(c.a)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=f.N(t),this.strides=Object(f.j)(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Object(u.a)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",O.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return O.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Object(f.S)(this.shape,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Object(f.S)(this.shape,this.dataSync())}},{key:"data",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=y().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return b.decodeString(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataSync",value:function(){this.throwIfDisposed();var e=y().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return b.decodeString(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,y().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(y().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return O.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),O.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return d(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),O.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),y().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(j,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}});var S=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(e,r,a,i){var o;return Object(c.a)(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return Object(u.a)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!f.a(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));y().disposeTensor(this),this.dataId=e.dataId,y().incRef(this,null)}},{key:"dispose",value:function(){y().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(j);Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return e instanceof j&&null!=e.assign&&e.assign instanceof Function}})},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function a(e,t,n){return Math.max(e,Math.min(t,n))}function i(e){return e%2===0?e:e+1}function o(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function s(e,t){var n=Math.random();return t*n+(1-n)*e}function c(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function u(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";u(v(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function f(e){u(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||T(e)&&!n)for(var r=0;r<e.length;++r)d(e[r],t,n);else t.push(e);return t}function p(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function h(e){return 0===e.length}function v(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function m(e){return e%1===0}function b(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function g(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function y(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return r(t),t}function O(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function w(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function x(e,t){var n=t.length;return u((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),u(e.every((function(e){return m(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function j(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:x(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function S(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function _(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function C(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function E(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function N(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function T(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function I(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function A(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function M(e){return"string"===typeof e||e instanceof String}function P(e){return"boolean"===typeof e}function R(e){return"number"===typeof e}function D(e){return Array.isArray(e)?D(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":R(e)?"float32":M(e)?"string":P(e)?"bool":"float32"}function F(e){return!!(e&&e.constructor&&e.call&&e.apply)}function L(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function z(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function q(e,t,n){var r=new Array;if(1===t.length)for(var a=t[0],i=0;i<a;i++)r[i]=n[e+i];else for(var o=t[0],s=t.slice(1),c=s.reduce((function(e,t){return e*t})),u=0;u<o;u++)r[u]=q(e+u*c,s,n);return r}function V(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length,"."));return q(0,e,t)}function B(e,t){for(var n=U(e,t),r=0;r<n.length;r++)n[r]=1;return n}function U(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function W(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return V(e,new Float32Array(n));if("int32"===t)return V(e,new Int32Array(n));if("bool"===t)return V(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function G(e){e.forEach((function(t){u(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function H(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function K(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function X(e){return e&&e.then&&"function"===typeof e.then}n.d(t,"M",(function(){return r})),n.d(t,"i",(function(){return a})),n.d(t,"H",(function(){return i})),n.d(t,"Q",(function(){return o})),n.d(t,"J",(function(){return s})),n.d(t,"l",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return f})),n.d(t,"m",(function(){return d})),n.d(t,"N",(function(){return p})),n.d(t,"y",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"v",(function(){return m})),n.d(t,"R",(function(){return b})),n.d(t,"O",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"L",(function(){return O})),n.d(t,"K",(function(){return k})),n.d(t,"s",(function(){return w})),n.d(t,"I",(function(){return x})),n.d(t,"P",(function(){return j})),n.d(t,"o",(function(){return S})),n.d(t,"n",(function(){return _})),n.d(t,"h",(function(){return C})),n.d(t,"B",(function(){return E})),n.d(t,"p",(function(){return N})),n.d(t,"A",(function(){return T})),n.d(t,"g",(function(){return I})),n.d(t,"f",(function(){return A})),n.d(t,"z",(function(){return M})),n.d(t,"t",(function(){return P})),n.d(t,"w",(function(){return R})),n.d(t,"r",(function(){return D})),n.d(t,"u",(function(){return F})),n.d(t,"G",(function(){return L})),n.d(t,"j",(function(){return z})),n.d(t,"S",(function(){return V})),n.d(t,"D",(function(){return B})),n.d(t,"F",(function(){return U})),n.d(t,"E",(function(){return W})),n.d(t,"c",(function(){return G})),n.d(t,"C",(function(){return H})),n.d(t,"q",(function(){return K})),n.d(t,"x",(function(){return X}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({reshape_:function(e,t){var n={x:Object(i.a)(e,"x","reshape","string_or_numeric")},o={shape:t};return r.a.runKernel(a.oc,n,o)}})},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var o=a.apply(null,r);o&&e.push(o)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";e.exports=n(451)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(159);function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(272);var a=n(204),i=n(273);function o(e,t){return Object(r.a)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||Object(a.a)(e,t)||Object(i.a)()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(11);var u=Object(c.b)({mul_:function(e,t){var n=Object(s.a)(e,"a","mul"),c=Object(s.a)(t,"b","mul"),u=Object(o.makeTypesMatch)(n,c),l=Object(r.a)(u,2),f={a:n=l[0],b:c=l[1]};return a.a.runKernel(i.Ub,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(222);var a=n(288),i=n(159);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(a.a)(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(77);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";n.r(t),n.d(t,"createScalarValue",(function(){return i})),n.d(t,"toTypedArray",(function(){return o})),n.d(t,"now",(function(){return s})),n.d(t,"fetch",(function(){return c})),n.d(t,"encodeString",(function(){return u})),n.d(t,"decodeString",(function(){return l}));var r=n(53),a=n(21);function i(e,t){return"string"===t?u(e):o([e],t)}function o(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=a.m(e)),Object(r.c)().getBool("DEBUG")&&a.h(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),i=0;i<n.length;++i)0!==Math.round(e[i])&&(n[i]=1);return n}throw new Error("Unknown data type ".concat(t))}function s(){return Object(r.c)().platform.now()}function c(e,t){return Object(r.c)().platform.fetch(e,t)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Object(r.c)().platform.encode(e,t)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Object(r.c)().platform.decode(e,t)}n.d(t,"shuffle",(function(){return a.M})),n.d(t,"clamp",(function(){return a.i})),n.d(t,"nearestLargerEven",(function(){return a.H})),n.d(t,"sum",(function(){return a.Q})),n.d(t,"randUniform",(function(){return a.J})),n.d(t,"distSquared",(function(){return a.l})),n.d(t,"assert",(function(){return a.b})),n.d(t,"assertShapesMatch",(function(){return a.e})),n.d(t,"assertNonNull",(function(){return a.d})),n.d(t,"flatten",(function(){return a.m})),n.d(t,"sizeFromShape",(function(){return a.N})),n.d(t,"isScalarShape",(function(){return a.y})),n.d(t,"arraysEqual",(function(){return a.a})),n.d(t,"isInt",(function(){return a.v})),n.d(t,"tanh",(function(){return a.R})),n.d(t,"sizeToSquarishShape",(function(){return a.O})),n.d(t,"createShuffledIndices",(function(){return a.k})),n.d(t,"rightPad",(function(){return a.L})),n.d(t,"repeatedTry",(function(){return a.K})),n.d(t,"inferFromImplicitShape",(function(){return a.s})),n.d(t,"parseAxisParam",(function(){return a.I})),n.d(t,"squeezeShape",(function(){return a.P})),n.d(t,"getTypedArrayFromDType",(function(){return a.o})),n.d(t,"getArrayFromDType",(function(){return a.n})),n.d(t,"checkConversionForErrors",(function(){return a.h})),n.d(t,"isValidDtype",(function(){return a.B})),n.d(t,"hasEncodingLoss",(function(){return a.p})),n.d(t,"isTypedArray",(function(){return a.A})),n.d(t,"bytesPerElement",(function(){return a.g})),n.d(t,"bytesFromStringArray",(function(){return a.f})),n.d(t,"isString",(function(){return a.z})),n.d(t,"isBoolean",(function(){return a.t})),n.d(t,"isNumber",(function(){return a.w})),n.d(t,"inferDtype",(function(){return a.r})),n.d(t,"isFunction",(function(){return a.u})),n.d(t,"nearestDivisor",(function(){return a.G})),n.d(t,"computeStrides",(function(){return a.j})),n.d(t,"toNestedArray",(function(){return a.S})),n.d(t,"makeOnesTypedArray",(function(){return a.D})),n.d(t,"makeZerosTypedArray",(function(){return a.F})),n.d(t,"makeZerosNestedTypedArray",(function(){return a.E})),n.d(t,"assertNonNegativeIntegerDimensions",(function(){return a.c})),n.d(t,"locToIndex",(function(){return a.C})),n.d(t,"indexToLoc",(function(){return a.q})),n.d(t,"isPromise",(function(){return a.x}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(223);var a=n(276),i=n(204);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(a.a)(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({cast_:function(e,t){var n=Object(i.a)(e,"x","cast");if(!o.B(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var s={x:n},c={dtype:t};return r.a.runKernel(a.w,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(11);var u=Object(c.b)({add_:function(e,t){var n=Object(s.a)(e,"a","add"),c=Object(s.a)(t,"b","add"),u=Object(o.makeTypesMatch)(n,c),l=Object(r.a)(u,2),f={a:n=l[0],b:c=l[1]};return a.a.runKernel(i.d,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(11);var u=Object(c.b)({sub_:function(e,t){var n=Object(s.a)(e,"a","sub"),c=Object(s.a)(t,"b","sub"),u=Object(o.makeTypesMatch)(n,c),l=Object(r.a)(u,2),f={a:n=l[0],b:c=l[1]};return a.a.runKernel(i.Pc,f)}})},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(184),u=n(11);var l=Object(u.b)({div_:function(e,t){var n=Object(s.a)(e,"a","div"),u=Object(s.a)(t,"b","div"),l=Object(o.makeTypesMatch)(n,u),f=Object(r.a)(l,2);if(n=f[0],u=f[1],"int32"===n.dtype&&"int32"===u.dtype)return Object(c.a)(n,u);var d={a:n,b:u};return a.a.runKernel(i.kc,d,{})}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(21),a=n(91);function i(e,t){if((Object(r.A)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Object(r.A)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Object(a.a)(e,[],[],t)}},function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function a(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function i(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return i.a})),n.d(t,"d",(function(){return o.a})),n.d(t,"e",(function(){return s.a})),n.d(t,"f",(function(){return c.a})),n.d(t,"h",(function(){return u.a})),n.d(t,"i",(function(){return l.a})),n.d(t,"j",(function(){return f.a})),n.d(t,"k",(function(){return d.a})),n.d(t,"l",(function(){return p.a})),n.d(t,"m",(function(){return h.a})),n.d(t,"n",(function(){return v.a})),n.d(t,"o",(function(){return m.a})),n.d(t,"p",(function(){return b.a})),n.d(t,"q",(function(){return g.a})),n.d(t,"r",(function(){return y.a})),n.d(t,"s",(function(){return E})),n.d(t,"x",(function(){return N.a})),n.d(t,"t",(function(){return T.a})),n.d(t,"u",(function(){return A})),n.d(t,"v",(function(){return M})),n.d(t,"w",(function(){return P})),n.d(t,"y",(function(){return R.a})),n.d(t,"A",(function(){return D.a})),n.d(t,"B",(function(){return F.a})),n.d(t,"C",(function(){return L.a})),n.d(t,"D",(function(){return z.a})),n.d(t,"E",(function(){return q.a})),n.d(t,"F",(function(){return V.a})),n.d(t,"G",(function(){return B.a})),n.d(t,"H",(function(){return k.a})),n.d(t,"I",(function(){return U})),n.d(t,"J",(function(){return W})),n.d(t,"K",(function(){return G})),n.d(t,"L",(function(){return H})),n.d(t,"M",(function(){return K.a})),n.d(t,"N",(function(){return X.a})),n.d(t,"O",(function(){return Q.a})),n.d(t,"P",(function(){return Y.a})),n.d(t,"Q",(function(){return J})),n.d(t,"R",(function(){return $.a})),n.d(t,"S",(function(){return ee.a})),n.d(t,"U",(function(){return te.a})),n.d(t,"V",(function(){return ne.a})),n.d(t,"W",(function(){return re.a})),n.d(t,"X",(function(){return ae.a})),n.d(t,"Y",(function(){return se})),n.d(t,"Z",(function(){return ce.a})),n.d(t,"ab",(function(){return ue.a})),n.d(t,"bb",(function(){return le.a})),n.d(t,"db",(function(){return fe.a})),n.d(t,"fb",(function(){return de.a})),n.d(t,"hb",(function(){return pe.a})),n.d(t,"jb",(function(){return he.a})),n.d(t,"kb",(function(){return ve.a})),n.d(t,"lb",(function(){return me.a})),n.d(t,"mb",(function(){return be.a})),n.d(t,"nb",(function(){return Oe})),n.d(t,"pb",(function(){return ke.a})),n.d(t,"qb",(function(){return we.a})),n.d(t,"rb",(function(){return xe.a})),n.d(t,"tb",(function(){return je.a})),n.d(t,"vb",(function(){return Se.a})),n.d(t,"wb",(function(){return _e.a})),n.d(t,"Ab",(function(){return Ce.a})),n.d(t,"Eb",(function(){return Ee.a})),n.d(t,"Fb",(function(){return Ne.a})),n.d(t,"Gb",(function(){return Te.a})),n.d(t,"Hb",(function(){return Ie.a})),n.d(t,"Ib",(function(){return Ae.a})),n.d(t,"Jb",(function(){return Me.a})),n.d(t,"Nb",(function(){return Pe.a})),n.d(t,"Ob",(function(){return Re.a})),n.d(t,"Pb",(function(){return De.a})),n.d(t,"Qb",(function(){return Fe.a})),n.d(t,"Rb",(function(){return Le.a})),n.d(t,"Sb",(function(){return ze.a})),n.d(t,"Tb",(function(){return qe.a})),n.d(t,"Ub",(function(){return Ve.a})),n.d(t,"Vb",(function(){return Be.a})),n.d(t,"Wb",(function(){return Ue.a})),n.d(t,"Xb",(function(){return We.a})),n.d(t,"Zb",(function(){return w.a})),n.d(t,"ac",(function(){return Ge.a})),n.d(t,"bc",(function(){return He.a})),n.d(t,"cc",(function(){return Ke.a})),n.d(t,"dc",(function(){return Xe.a})),n.d(t,"ec",(function(){return Qe.a})),n.d(t,"gc",(function(){return Ye.a})),n.d(t,"hc",(function(){return Ze.a})),n.d(t,"ic",(function(){return Je.a})),n.d(t,"kc",(function(){return $e.a})),n.d(t,"lc",(function(){return et.a})),n.d(t,"nc",(function(){return at})),n.d(t,"pc",(function(){return x.a})),n.d(t,"rc",(function(){return it})),n.d(t,"sc",(function(){return ot.a})),n.d(t,"tc",(function(){return st.a})),n.d(t,"vc",(function(){return ct.a})),n.d(t,"xc",(function(){return ut.a})),n.d(t,"yc",(function(){return lt.a})),n.d(t,"zc",(function(){return ft.a})),n.d(t,"Bc",(function(){return dt})),n.d(t,"Cc",(function(){return pt.a})),n.d(t,"Dc",(function(){return ht})),n.d(t,"Ec",(function(){return vt})),n.d(t,"Fc",(function(){return mt})),n.d(t,"Gc",(function(){return bt})),n.d(t,"Hc",(function(){return gt.a})),n.d(t,"Ic",(function(){return yt.a})),n.d(t,"Kc",(function(){return Ot.a})),n.d(t,"Lc",(function(){return kt.a})),n.d(t,"Mc",(function(){return wt.a})),n.d(t,"Nc",(function(){return xt})),n.d(t,"Oc",(function(){return St})),n.d(t,"Pc",(function(){return _t})),n.d(t,"Qc",(function(){return Ct.a})),n.d(t,"Rc",(function(){return Et.a})),n.d(t,"Sc",(function(){return Nt.a})),n.d(t,"Tc",(function(){return Tt.a})),n.d(t,"Uc",(function(){return It.a})),n.d(t,"Vc",(function(){return At.a})),n.d(t,"Wc",(function(){return ge.a})),n.d(t,"Xc",(function(){return Mt.a})),n.d(t,"Yc",(function(){return Pt})),n.d(t,"Zc",(function(){return Rt})),n.d(t,"ad",(function(){return Dt})),n.d(t,"bd",(function(){return Ft})),n.d(t,"dd",(function(){return Lt.a})),n.d(t,"ed",(function(){return zt.a})),n.d(t,"fd",(function(){return qt.a})),n.d(t,"hd",(function(){return Vt.a})),n.d(t,"id",(function(){return Bt.a})),n.d(t,"jd",(function(){return Ut.a})),n.d(t,"kd",(function(){return S.a})),n.d(t,"ld",(function(){return Wt.a})),n.d(t,"nd",(function(){return Gt.a})),n.d(t,"od",(function(){return Ht.a})),n.d(t,"pd",(function(){return _.a})),n.d(t,"qd",(function(){return Kt})),n.d(t,"rd",(function(){return Xt})),n.d(t,"sd",(function(){return Qt})),n.d(t,"td",(function(){return Yt})),n.d(t,"ud",(function(){return Zt.a})),n.d(t,"vd",(function(){return Jt.a})),n.d(t,"wd",(function(){return $t.a})),n.d(t,"ob",(function(){return en.a})),n.d(t,"zb",(function(){return tn.a})),n.d(t,"Db",(function(){return nn.a})),n.d(t,"cd",(function(){return rn.a})),n.d(t,"zd",(function(){return an.a})),n.d(t,"Ad",(function(){return on.a})),n.d(t,"Bd",(function(){return nt.a})),n.d(t,"Cd",(function(){return sn.a})),n.d(t,"Ed",(function(){return cn.a})),n.d(t,"Fd",(function(){return un.a})),n.d(t,"Gd",(function(){return ln.a})),n.d(t,"Hd",(function(){return fn.a})),n.d(t,"Id",(function(){return rt.a})),n.d(t,"Kd",(function(){return dn.a})),n.d(t,"Ld",(function(){return pn.a})),n.d(t,"Md",(function(){return C.a})),n.d(t,"Nd",(function(){return hn.a})),n.d(t,"Od",(function(){return vn.a})),n.d(t,"Pd",(function(){return bn})),n.d(t,"Qd",(function(){return gn.a})),n.d(t,"Rd",(function(){return yn})),n.d(t,"Sd",(function(){return On})),n.d(t,"Td",(function(){return kn})),n.d(t,"Ud",(function(){return ye.a})),n.d(t,"Vd",(function(){return wn.a})),n.d(t,"Xd",(function(){return xn.a})),n.d(t,"Yd",(function(){return jn.a})),n.d(t,"Zd",(function(){return Sn.a})),n.d(t,"ae",(function(){return _n.a})),n.d(t,"be",(function(){return Cn})),n.d(t,"ce",(function(){return En.a})),n.d(t,"de",(function(){return Nn.a})),n.d(t,"ee",(function(){return Tn.a})),n.d(t,"fe",(function(){return In.a})),n.d(t,"z",(function(){return Dn})),n.d(t,"ib",(function(){return Fn.a})),n.d(t,"xb",(function(){return Fn.b})),n.d(t,"yb",(function(){return Fn.c})),n.d(t,"Kb",(function(){return Fn.d})),n.d(t,"Lb",(function(){return Fn.e})),n.d(t,"wc",(function(){return Fn.f})),n.d(t,"g",(function(){return Ln.a})),n.d(t,"cb",(function(){return Ln.b})),n.d(t,"fc",(function(){return Ln.c})),n.d(t,"jc",(function(){return Ln.d})),n.d(t,"mc",(function(){return Ln.e})),n.d(t,"qc",(function(){return Ln.f})),n.d(t,"Jc",(function(){return Ln.g})),n.d(t,"Dd",(function(){return Ln.h})),n.d(t,"Jd",(function(){return Ln.i})),n.d(t,"Wd",(function(){return zn.a})),n.d(t,"uc",(function(){return qn.a})),n.d(t,"oc",(function(){return Bn})),n.d(t,"gd",(function(){return Un.a})),n.d(t,"xd",(function(){return Wn.a})),n.d(t,"ub",(function(){return Gn.a})),n.d(t,"eb",(function(){return Kn})),n.d(t,"gb",(function(){return Xn})),n.d(t,"T",(function(){return Qn})),n.d(t,"Cb",(function(){return Zn})),n.d(t,"Ac",(function(){return j.b})),n.d(t,"a",(function(){return j.a})),n.d(t,"Bb",(function(){return Qr})),n.d(t,"Mb",(function(){return Yr})),n.d(t,"Yb",(function(){return Zr})),n.d(t,"yd",(function(){return Kr})),n.d(t,"sb",(function(){return r})),n.d(t,"md",(function(){return Xr}));var r={};n.r(r),n.d(r,"conv2d",(function(){return ir})),n.d(r,"depthwiseConv2d",(function(){return cr})),n.d(r,"matMul",(function(){return ur}));var a=n(81),i=n(337),o=n(338),s=n(33),c=n(339),u=n(238),l=n(239),f=n(240),d=n(241),p=n(340),h=n(341),v=n(342),m=n(242),b=n(343),g=n(186),y=n(344),O=n(7),k=n(64),w=n(59),x=n(27),j=n(11),S=n(136),_=n(57),C=n(219);var E=Object(j.b)({basicLSTMCell_:function(e,t,n,r,a,i){var o=Object(O.a)(e,"forgetBias","basicLSTMCell"),c=Object(O.a)(t,"lstmKernel","basicLSTMCell"),u=Object(O.a)(n,"lstmBias","basicLSTMCell"),l=Object(O.a)(r,"data","basicLSTMCell"),f=Object(O.a)(a,"c","basicLSTMCell"),d=Object(O.a)(i,"h","basicLSTMCell"),p=Object(k.a)([l,d],1),h=Object(w.a)(p,c),v=Object(s.a)(h,u),m=v.shape[0],b=v.shape[1]/4,g=[m,b],y=Object(_.a)(v,[0,0],g),j=Object(_.a)(v,[0,b],g),E=Object(_.a)(v,[0,2*b],g),N=Object(_.a)(v,[0,3*b],g),T=Object(s.a)(Object(x.a)(Object(S.a)(y),Object(C.a)(j)),Object(x.a)(f,Object(S.a)(Object(s.a)(o,E))));return[T,Object(x.a)(Object(C.a)(T),Object(S.a)(N))]}}),N=n(150),T=n(133),I=n(21);var A=Object(j.b)({batchNorm2d_:function(e,t,n,r,a,i){var o,s,c=Object(O.a)(e,"x","batchNorm"),u=Object(O.a)(t,"mean","batchNorm"),l=Object(O.a)(n,"variance","batchNorm");return null!=a&&(o=Object(O.a)(a,"scale","batchNorm")),null!=r&&(s=Object(O.a)(r,"offset","batchNorm")),I.b(2===c.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(c.rank,".")})),I.b(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(u.rank,".")})),I.b(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&I.b(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&I.b(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),Object(T.a)(c,u,l,s,o,i)}});var M=Object(j.b)({batchNorm3d_:function(e,t,n,r,a,i){var o,s,c=Object(O.a)(e,"x","batchNorm"),u=Object(O.a)(t,"mean","batchNorm"),l=Object(O.a)(n,"variance","batchNorm");return null!=a&&(o=Object(O.a)(a,"scale","batchNorm")),null!=r&&(s=Object(O.a)(r,"offset","batchNorm")),I.b(3===c.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(c.rank,".")})),I.b(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(u.rank,".")})),I.b(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&I.b(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&I.b(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),Object(T.a)(c,u,l,s,o,i)}});var P=Object(j.b)({batchNorm4d_:function(e,t,n,r,a,i){var o,s,c=Object(O.a)(e,"x","batchNorm"),u=Object(O.a)(t,"mean","batchNorm"),l=Object(O.a)(n,"variance","batchNorm");return null!=a&&(o=Object(O.a)(a,"scale","batchNorm")),null!=r&&(s=Object(O.a)(r,"offset","batchNorm")),I.b(4===c.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(c.rank,".")})),I.b(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(u.rank,".")})),I.b(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&I.b(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&I.b(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),Object(T.a)(c,u,l,s,o,i)}}),R=n(345),D=n(171),F=n(88),L=n(32),z=n(346),q=n(347),V=n(113),B=n(102);var U=Object(j.b)({concat1d_:function(e){return Object(k.a)(e,0)}});var W=Object(j.b)({concat2d_:function(e,t){return Object(k.a)(e,t)}});var G=Object(j.b)({concat3d_:function(e,t){return Object(k.a)(e,t)}});var H=Object(j.b)({concat4d_:function(e,t){return Object(k.a)(e,t)}}),K=n(243),X=n(111),Q=n(244),Y=n(348),Z=n(289);var J=Object(j.b)({conv3dTranspose_:function(e,t,n,r,a){var i=Object(O.a)(e,"x","conv3dTranspose"),o=Object(O.a)(t,"filter","conv3dTranspose");return Object(Z.a)(n,i,o,r,a)}}),$=n(187),ee=n(245),te=n(188),ne=n(349),re=n(246),ae=n(127),ie=n(15),oe=n(10);var se=Object(j.b)({diag_:function(e){var t={x:Object(O.a)(e,"x","diag")};return ie.a.runKernel(oe.R,t)}}),ce=n(247),ue=n(36),le=n(248),fe=n(249),de=n(189),pe=n(128),he=n(350),ve=n(80),me=n(109),be=n(351),ge=n(22),ye=n(137);var Oe=Object(j.b)({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=Object(F.a)([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=Object(ge.a)(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return Object(ye.a)(Object(me.a)(s,0),[n[0],1,1]);if(2===n.length)return Object(ye.a)(Object(me.a)(Object(me.a)(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Object(ye.a)(Object(me.a)(Object(me.a)(Object(me.a)(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}}),ke=n(185),we=n(190),xe=n(184),je=n(151),Se=n(85),_e=n(95),Ce=n(191),Ee=n(352),Ne=n(353),Te=n(354),Ie=n(192),Ae=n(152),Me=n(96),Pe=n(355),Re=n(250),De=n(121),Fe=n(251),Le=n(356),ze=n(357),qe=n(193),Ve=n(103),Be=n(153),Ue=n(194),We=n(253),Ge=n(114),He=n(195),Ke=n(358),Xe=n(359),Qe=n(126),Ye=n(144),Ze=n(172),Je=n(154),$e=n(254),et=n(196),tt=n(75),nt=n(54),rt=n(34);var at=Object(j.b)({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Object(O.a)(e,"x","moments");var r=Object(I.I)(t,e.shape),a=Object(Ye.a)(e,r,n),i=a.shape;n||(i=Object(tt.e)(a.shape,r));var o=Object(nt.a)(Object(rt.a)(Object(L.a)(e,"float32"),Object(ge.a)(a,i))),s=Object(Ye.a)(o,r,n);return{mean:a,variance:s}}});var it=Object(j.b)({multiRNNCell_:function(e,t,n,r){for(var a=Object(O.a)(t,"data","multiRNNCell"),i=Object(O.b)(n,"c","multiRNNCell"),o=Object(O.b)(r,"h","multiRNNCell"),s=a,c=[],u=0;u<e.length;u++){var l=e[u](s,i[u],o[u]);c.push(l[0]),c.push(l[1]),s=l[1]}for(var f=[],d=[],p=0;p<c.length;p+=2)f.push(c[p]),d.push(c[p+1]);return[f,d]}}),ot=n(360),st=n(62),ct=n(155),ut=n(173),lt=n(129),ft=n(361);var dt=Object(j.b)({outerProduct_:function(e,t){var n=Object(O.a)(e,"v1","outerProduct"),r=Object(O.a)(t,"v2","outerProduct");I.b(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=Object(ge.a)(n,[-1,1]),i=Object(ge.a)(r,[1,-1]);return Object(w.a)(a,i)}}),pt=n(97);var ht=Object(j.b)({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(I.b)(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Object(pt.a)(e,[t],n)}});var vt=Object(j.b)({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(I.b)(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Object(pt.a)(e,t,n)}});var mt=Object(j.b)({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(I.b)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Object(pt.a)(e,t,n)}});var bt=Object(j.b)({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(I.b)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Object(pt.a)(e,t,n)}}),gt=n(255),yt=n(89),Ot=n(197),kt=n(237),wt=n(256);var xt=Object(j.b)({rand_:function(e,t,n){var r=Object(I.N)(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return ie.a.makeTensor(a,e,n)}}),jt=n(163);var St=Object(j.b)({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new jt.b(t,n,r,a),o=Object(F.a)(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var _t=Object(j.b)({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new jt.a(t,n,r,!1,a),o=Object(F.a)(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Ct=n(257),Et=n(220),Nt=n(174),Tt=n(362),It=n(130),At=n(198),Mt=n(90);var Pt=Object(j.b)({reverse1d_:function(e){var t=Object(O.a)(e,"x","reverse");return I.b(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),Object(Mt.a)(t,0)}});var Rt=Object(j.b)({reverse2d_:function(e,t){var n=Object(O.a)(e,"x","reverse");return I.b(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),Object(Mt.a)(n,t)}});var Dt=Object(j.b)({reverse3d_:function(e,t){var n=Object(O.a)(e,"x","reverse");return I.b(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),Object(Mt.a)(n,t)}});var Ft=Object(j.b)({reverse4d_:function(e,t){var n=Object(O.a)(e,"x","reverse");return I.b(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),Object(Mt.a)(n,t)}}),Lt=n(363),zt=n(258),qt=n(37),Vt=n(259),Bt=n(260),Ut=n(364),Wt=n(365),Gt=n(261),Ht=n(262);var Kt=Object(j.b)({slice1d_:function(e,t,n){var r=Object(O.a)(e,"x","slice1d");return I.b(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Object(_.a)(r,[t],[n])}});var Xt=Object(j.b)({slice2d_:function(e,t,n){var r=Object(O.a)(e,"x","slice2d");return I.b(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Object(_.a)(r,t,n)}});var Qt=Object(j.b)({slice3d_:function(e,t,n){var r=Object(O.a)(e,"x","slice3d");return I.b(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Object(_.a)(r,t,n)}});var Yt=Object(j.b)({slice4d_:function(e,t,n){var r=Object(O.a)(e,"x","slice4d");return I.b(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Object(_.a)(r,t,n)}}),Zt=n(366),Jt=n(252),$t=n(156),en=n(199),tn=n(175),nn=n(263),rn=n(200),an=n(122),on=n(72),sn=n(157),cn=n(158),un=n(104),ln=n(131),fn=n(367),dn=n(42),pn=n(368),hn=n(162),vn=n(123),mn=n(91);function bn(e,t,n){if(Object(I.d)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Object(O.c)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Object(mn.a)(e,t,r,n)}var gn=n(264);function yn(e,t,n){if(Object(I.d)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Object(O.c)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Object(mn.a)(e,t,r,n)}function On(e,t,n){if(Object(I.d)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Object(O.c)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Object(mn.a)(e,t,r,n)}function kn(e,t,n){if(Object(I.d)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Object(O.c)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Object(mn.a)(e,t,r,n)}var wn=n(265),xn=n(369),jn=n(266),Sn=n(201),_n=n(132);function Cn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return ie.a.makeVariable(e,t,n,r)}var En=n(70),Nn=n(267),Tn=n(112),In=n(45),An=n(3),Mn=n.n(An),Pn=n(12);function Rn(){return(Rn=Object(Pn.a)(Mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d,p,h,v,m;return Mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Object(O.a)(t,"tensor","boolMask"),i=Object(O.a)(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,c=a.shape,I.b(s>0,(function(){return"mask cannot be scalar"})),I.e(c.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=o;l<o+s;l++)u*=c[l];return f=c.slice(0,o).concat([u],c.slice(o+s)),d=Object(ge.a)(a,f),p=Object(ge.a)(i,[-1]),e.next=14,Object(Nn.a)(p);case 14:return h=e.sent,v=Object(cn.a)(h,[1]),m=Object(je.a)(d,v,o),t!==a&&a.dispose(),n!==i&&i.dispose(),v.dispose(),d.dispose(),p.dispose(),h.dispose(),e.abrupt("return",m);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dn=function(e,t,n){return Rn.apply(this,arguments)},Fn=n(370),Ln=n(371),zn=n(92),qn=n(202),Vn=n(51);var Bn=Object(j.b)({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Object(O.a)(e,"v","movingAverage"),o=Object(O.a)(t,"x","movingAverage"),c=Object(O.a)(n,"decay","movingAverage");Object(Vn.assertTypesMatch)(i,o),I.b(I.a(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=Object(qt.a)(1),l=Object(rt.a)(u,c),f=Object(x.a)(Object(rt.a)(o,i),l);if(a){I.b(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Object(O.a)(r,"step","movingAverage");f=Object(ue.a)(f,Object(rt.a)(u,Object(yt.a)(c,d)))}return Object(s.a)(i,f)}}),Un=n(372),Wn=n(385),Gn=n(373),Hn=n(19);var Kn=Object(j.b)({dropout_:function(e,t,n,r){var a=Object(O.a)(e,"x","dropout");if(I.b("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),I.b(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Hn.a?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(I.a(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,c=Object(ue.a)(Object(we.a)(Object(s.a)(Object(Ct.a)(i,0,1,"float32",r),o)),o);return Object(x.a)(a,c)}});function Xn(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Qn(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Object(vn.a)(a,"float32")}function Yn(){return Yn=Object(Pn.a)(Mn.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f,d,p,h,v,m,b,g=arguments;return Mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>2&&void 0!==g[2]?g[2]:1,a=Object(O.a)(t,"predictions","inTopK"),i=Object(O.a)(n,"targets","inTopK"),Object(I.b)(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),Object(I.b)(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),Object(I.e)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],Object(I.b)(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:c=e.sent,u=s.length/o,l=o,f=Object(I.o)("bool",u),d=0;case 17:if(!(d<u)){e.next=35;break}for(p=d*l,h=s.subarray(p,p+l),v=[],m=0;m<h.length;m++)v.push({value:h[m],index:m});v.sort((function(e,t){return t.value-e.value})),f[d]=0,b=0;case 25:if(!(b<r)){e.next=32;break}if(v[b].index!==c[d]){e.next=29;break}return f[d]=1,e.abrupt("break",32);case 29:b++,e.next=25;break;case 32:d++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",Object(hn.a)(f,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),Yn.apply(this,arguments)}var Zn=function(e,t){return Yn.apply(this,arguments)},Jn=n(8),$n=n(68),er=n(39),tr=n(211),nr=n(209),rr=n(60),ar=n(82);var ir=Object(j.b)({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,c=e.dilations,u=void 0===c?[1,1]:c,l=e.dimRoundingMode,f=e.bias,d=e.activation,p=void 0===d?"linear":d,h=e.preluActivationWeights,v=e.leakyreluAlpha;if(p=p||"linear",!1===Object(ar.d)(ie.a.state.gradientDepth,p)){var m=Object(X.a)(t,n,r,a,o,u,l);return null!=f&&(m=Object(s.a)(m,f)),Object(ar.a)(m,p,h,v)}var b=Object(O.a)(t,"x","conv2d"),g=Object(O.a)(n,"filter","conv2d"),y=b,k=!1;3===b.rank&&(k=!0,y=Object(ge.a)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),I.b(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),I.b(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),null!=l&&I.b(I.v(a),(function(){return"Error in fused conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(a,".")})),I.b(y.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input (".concat(y.shape[3],") must match ")+"input depth for filter ".concat(g.shape[2],".")})),I.b(rr.h(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")})),I.b("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var w,x,j=rr.a(y.shape,g.shape,r,u,a,l);if(null!=f){w=Object(O.a)(f,"bias","fused conv2d");var S=Object(Vn.makeTypesMatch)(w,b);w=Object(Jn.a)(S,1)[0],er.a(j.outShape,w.shape)}null!=h&&(x=Object(O.a)(h,"prelu weights","fused conv2d"));var _=function(e,t){var n=Object(Jn.a)(t,4),i=n[0],o=n[1],s=n[2],c=n[3],l=Object(ar.c)(e,s,p);I.b(rr.i(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var f=[Object(nr.a)(o.shape,l,i,r,a),Object(tr.a)(o,l,i.shape,r,a)];if(null!=c){var d=Object(ar.b)(c,l);f.push(d)}return f},C={x:y,filter:g,bias:w,preluActivationWeights:x},E={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:l,activation:p,leakyreluAlpha:v};if(null==f){var N=Object($n.a)((function(e,t,n){var r=ie.a.runKernel(oe.jb,C,E);return n([t,e,r]),k&&(r=Object(ge.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:_}}));return N(y,g)}var T=Object($n.a)((function(e,t,n,r){var a=ie.a.runKernel(oe.jb,C,E);return r([t,e,a,n]),k&&(a=Object(ge.a)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:_}}));return T(y,g,w)}}),or=n(294),sr=n(293);var cr=Object(j.b)({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,c=e.dilations,u=void 0===c?[1,1]:c,l=e.dimRoundingMode,f=e.bias,d=e.activation,p=void 0===d?"linear":d,h=e.preluActivationWeights,v=e.leakyreluAlpha;if(!1===Object(ar.d)(ie.a.state.gradientDepth,p)){var m=Object(ae.a)(t,n,r,a,o,u,l);return null!=f&&(m=Object(s.a)(m,f)),Object(ar.a)(m,p,h,v)}var b=Object(O.a)(t,"x","depthwiseConv2d"),g=Object(O.a)(n,"filter","depthwiseConv2d"),y=b,k=!1;3===b.rank&&(k=!0,y=Object(ge.a)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),I.b(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),I.b(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(g.rank,".")})),I.b(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(g.shape[2],".")})),null==u&&(u=[1,1]),I.b(rr.h(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),null!=l&&I.b(I.v(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when "+"using dimRoundingMode ".concat(l," but got pad ").concat(a,".")}));var w,x,j=rr.a(y.shape,g.shape,r,u,a,l,!0);if(null!=f){w=Object(O.a)(f,"bias","fused conv2d");var S=Object(Vn.makeTypesMatch)(w,b),_=Object(Jn.a)(S,1);w=_[0],er.a(j.outShape,w.shape)}null!=h&&(x=Object(O.a)(h,"prelu weights","fused depthwiseConv2d"));var C=function(e,t){I.b(rr.i(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=Object(Jn.a)(t,4),i=n[0],o=n[1],s=n[2],c=n[3],f=Object(ar.c)(e,s,p),d=Object(sr.a)(o.shape,f,i,r,a,u,l),h=Object(or.a)(o,f,i.shape,r,a,u,l);return null!=c?[d,h,Object(ar.b)(w,f)]:[d,h]},E={x:y,filter:g,bias:w,preluActivationWeights:x},N={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:l,activation:p,leakyreluAlpha:v};if(null==f){var T=Object($n.a)((function(e,t,n){var r=ie.a.runKernel(oe.kb,E,N);return n([t,e,r]),k&&(r=Object(ge.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:C}}));return T(y,g)}var A=Object($n.a)((function(e,t,n,r){var a=ie.a.runKernel(oe.kb,E,N);return r([t,e,a,n]),k&&(a=Object(ge.a)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:C}}));return A(y,g,w)}});var ur=Object(j.b)({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,c=e.bias,u=e.activation,l=void 0===u?"linear":u,f=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===Object(ar.d)(ie.a.state.gradientDepth,l)){var p=Object(w.a)(t,n,a,o);return null!=c&&(p=Object(s.a)(p,c)),Object(ar.a)(p,l,f,d)}var h=Object(O.a)(t,"a","fused matMul"),v=Object(O.a)(n,"b","fused matMul"),m=Object(Vn.makeTypesMatch)(h,v),b=Object(Jn.a)(m,2);h=b[0],v=b[1];var g=a?h.shape[h.rank-2]:h.shape[h.rank-1],y=o?v.shape[v.rank-1]:v.shape[v.rank-2],k=a?h.shape[h.rank-1]:h.shape[h.rank-2],x=o?v.shape[v.rank-2]:v.shape[v.rank-1],j=h.shape.slice(0,-2),S=v.shape.slice(0,-2),_=I.N(j),C=I.N(S);I.b(h.rank>=2&&v.rank>=2&&h.rank===v.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at "+"least 2, got ranks ".concat(h.rank," and ").concat(v.rank,".")})),I.b(I.a(j,S),(function(){return"Error in fused matMul: outer dimensions (".concat(j,") and (")+"".concat(S,") of Tensors with shapes ").concat(h.shape," and ")+"".concat(v.shape," must match.")})),I.b(g===y,(function(){return"Error in fused matMul: inner shapes (".concat(g,") and (")+"".concat(y,") of Tensors with shapes ").concat(h.shape," and ")+"".concat(v.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var E,N,T=h.shape.slice(0,-2).concat([k,x]),A=a?Object(ge.a)(h,[_,g,k]):Object(ge.a)(h,[_,k,g]),M=o?Object(ge.a)(v,[C,x,y]):Object(ge.a)(v,[C,y,x]);if(null!=c){E=Object(O.a)(c,"bias","fused matMul");var P=Object(Vn.makeTypesMatch)(E,h);E=Object(Jn.a)(P,1)[0],er.a(T,E.shape)}null!=f&&(N=Object(O.a)(f,"prelu weights","fused matMul"));var R=function(e,t){var n,r,i=Object(Jn.a)(t,4),s=i[0],u=i[1],f=i[2],d=i[3],p=Object(ar.c)(Object(ge.a)(e,f.shape),f,l);return a||o?!a&&o?(n=Object(w.a)(p,u,!1,!1),r=Object(w.a)(p,s,!0,!1)):a&&!o?(n=Object(w.a)(u,p,!1,!0),r=Object(w.a)(s,p,!1,!1)):(n=Object(w.a)(u,p,!0,!0),r=Object(w.a)(p,s,!0,!0)):(n=Object(w.a)(p,u,!1,!0),r=Object(w.a)(s,p,!0,!1)),null!=c?[n,r,Object(ar.b)(d,p)]:[n,r]},D={a:A,b:M,bias:E,preluActivationWeights:N},F={transposeA:a,transposeB:o,activation:l,leakyreluAlpha:d};if(null==c){var L=Object($n.a)((function(e,t,n){var r=ie.a.runKernel(oe.ad,D,F);return n([e,t,r]),{value:Object(ge.a)(r,T),gradFunc:R}}));return L(A,M)}var z=Object($n.a)((function(e,t,n,r){var a=ie.a.runKernel(oe.ad,D,F);return r([e,t,a,n]),{value:Object(ge.a)(a,T),gradFunc:R}}));return z(A,M,E)}});var lr=Object(j.b)({hammingWindow_:function(e){return Qn(e,.54,.46)}});var fr=Object(j.b)({hannWindow_:function(e){return Qn(e,.5,.5)}});var dr=Object(j.b)({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Object(_.a)(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,c=Object(k.a)([Object(_.a)(e,i,t-s),Object(ke.a)([s],a)]);o.push(c),i+=n}return 0===o.length?bn([],[0,t]):Object(ge.a)(Object(k.a)(o),[o.length,t])}});var pr=Object(j.b)({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fr;null==r&&(r=Xn(t));for(var i=dr(e,t,n),o=Object(x.a)(i,a(t)),s=[],c=0;c<i.shape[0];c++)s.push(Object(rn.a)(Object(_.a)(o,[c,0],[1,t]),r));return Object(k.a)(s)}});var hr=Object(j.b)({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Object(O.a)(e,"image","cropAndResize"),s=Object(O.a)(t,"boxes","cropAndResize","float32"),c=Object(O.a)(n,"boxInd","cropAndResize","int32"),u=s.shape[0];I.b(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),I.b(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(u,",4] ")+"but had shape ".concat(s.shape,".")})),I.b(1===c.rank&&c.shape[0]===u,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(u,"] ")+"but had shape ".concat(s.shape,".")})),I.b(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),I.b(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),I.b("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:c},f={method:a,extrapolationValue:i,cropSize:r},d=ie.a.runKernel(oe.K,l,f);return d}});var vr=Object(j.b)({flipLeftRight_:function(e){var t=Object(O.a)(e,"image","flipLeftRight","float32");I.b(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return ie.a.runKernel(oe.eb,n,{})}});var mr=Object(j.b)({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Object(O.a)(e,"image","rotateWithOffset","float32");I.b(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=ie.a.runKernel(oe.uc,i,o);return s}});function br(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),I.b(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),I.b(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),I.b(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),I.b(1===t.rank,(function(){return"scores must be a 1D tensor"})),I.b(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),I.b(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var gr=Object(j.b)({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Object(O.a)(e,"boxes","nonMaxSuppression"),o=Object(O.a)(t,"scores","nonMaxSuppression"),s=br(i,o,n,r,a),c={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return ie.a.runKernel(oe.Wb,{boxes:i,scores:o},c)}}),yr=n(125);function Or(){return Or=Object(Pn.a)(Mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d,p,h=arguments;return Mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:.5,i=h.length>4&&void 0!==h[4]?h[4]:Number.NEGATIVE_INFINITY,o=Object(O.a)(t,"boxes","nonMaxSuppressionAsync"),s=Object(O.a)(n,"scores","nonMaxSuppressionAsync"),c=br(o,s,r,a,i),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return u=e.sent,l=u[0],f=u[1],d=Object(yr.a)(l,f,r,a,i),p=d.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",Object(vn.a)(p,"int32"));case 17:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}var kr=function(e,t,n){return Or.apply(this,arguments)};var wr=Object(j.b)({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Object(O.a)(e,"boxes","nonMaxSuppression"),s=Object(O.a)(t,"scores","nonMaxSuppression"),c=br(o,s,n,r,a,i),u={boxes:o,scores:s},l={maxOutputSize:n=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},f=ie.a.runKernel(oe.Yb,u,l);return{selectedIndices:f[0],selectedScores:f[1]}}});function xr(){return xr=Object(Pn.a)(Mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d,p,h,v,m=arguments;return Mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,s=Object(O.a)(t,"boxes","nonMaxSuppressionAsync"),c=Object(O.a)(n,"scores","nonMaxSuppressionAsync"),u=br(s,c,r,a,i,o),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma,e.next=12,Promise.all([s.data(),c.data()]);case 12:return l=e.sent,f=l[0],d=l[1],p=Object(yr.c)(f,d,r,a,i,o),h=p.selectedIndices,v=p.selectedScores,s!==t&&s.dispose(),c!==n&&c.dispose(),e.abrupt("return",{selectedIndices:Object(vn.a)(h,"int32"),selectedScores:Object(vn.a)(v)});case 19:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}var jr=function(e,t,n){return xr.apply(this,arguments)};var Sr=Object(j.b)({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Object(O.a)(e,"boxes","nonMaxSuppression"),s=Object(O.a)(t,"scores","nonMaxSuppression"),c=br(o,s,n,r,a,null),u=c.maxOutputSize,l=c.iouThreshold,f=c.scoreThreshold,d={boxes:o,scores:s},p={maxOutputSize:u,iouThreshold:l,scoreThreshold:f,padToMaxOutputSize:i},h=ie.a.runKernel(oe.Xb,d,p);return{selectedIndices:h[0],validOutputs:h[1]}}});function _r(){return _r=Object(Pn.a)(Mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,k=arguments;return Mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k.length>3&&void 0!==k[3]?k[3]:.5,i=k.length>4&&void 0!==k[4]?k[4]:Number.NEGATIVE_INFINITY,o=k.length>5&&void 0!==k[5]&&k[5],s=Object(O.a)(t,"boxes","nonMaxSuppressionAsync"),c=Object(O.a)(n,"scores","nonMaxSuppressionAsync"),u=br(s,c,r,a,i,null),l=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,e.next=11,Promise.all([s.data(),c.data()]);case 11:return p=e.sent,h=Object(Jn.a)(p,2),v=h[0],m=h[1],b=Object(yr.b)(v,m,l,f,d,o),g=b.selectedIndices,y=b.validOutputs,s!==t&&s.dispose(),c!==n&&c.dispose(),e.abrupt("return",{selectedIndices:Object(vn.a)(g,"int32"),validOutputs:Object(qt.a)(y,"int32")});case 19:case"end":return e.stop()}}),e)}))),_r.apply(this,arguments)}var Cr=function(e,t,n){return _r.apply(this,arguments)},Er=n(292),Nr=n(290);var Tr=Object(j.b)({bandPart_:function(e,t,n){Object(I.b)(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Object(I.b)(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=Object(O.a)(e,"a","bandPart");Object(I.b)(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=Object(Jn.a)(i,2),s=o[0],c=o[1];if(!(t<=s))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(s,")."));if(!(n<=c))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(c,")."));t<0&&(t=s),n<0&&(n=c);var u=Object(ge.a)(Object(Et.a)(0,s,1,"int32"),[-1,1]),l=Object(Et.a)(0,c,1,"int32"),f=Object(rt.a)(u,l),d=Object(Ve.a)(Object(Me.a)(f,Object(qt.a)(+t,"int32")),Object(_e.a)(f,Object(qt.a)(-n,"int32"))),p=Object(Tn.a)([s,c],r.dtype);return Object(ge.a)(Object(un.a)(Object(_n.a)(Object(ge.a)(r,[-1,s,c])).map((function(e){return Object(En.a)(d,e,p)}))),a)}});var Ir=Object(j.b)({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,Object(I.b)(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Object(I.b)(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Object(an.a)(e,e.shape[0],0).map((function(e){return Object(cn.a)(e,[0])}))),Object(I.b)(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(ie.a.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=Object(x.a)(Object(dn.a)(Object(x.a)(n[a],t)),n[a]);t=Object(rt.a)(t,i)}return Object(ue.a)(t,Object(qn.a)(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?Object(un.a)(n,0):n}}),Ar=n(43);function Mr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ie.a.tidy((function(){Object(I.b)(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=Oe(n),i=Object(V.a)(e),o=bn([[1]],[1,1]),s=Object(V.a)(o),c=n>=r?r:n,u=function(e){var t=i,c=s,u=a,l=ie.a.tidy((function(){var t=Object(_.a)(i,[e,e],[n-e,1]),c=Object(qn.a)(t),u=Object(_.a)(i,[e,e],[1,1]),l=Object(En.a)(Object(Se.a)(u,0),bn([[-1]]),bn([[1]])),f=Object(rt.a)(u,Object(x.a)(l,c)),d=Object(ue.a)(t,f);s=1===d.shape[0]?Object(V.a)(o):Object(k.a)([o,Object(_.a)(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var p=Object(st.a)(Object(ue.a)(Object(w.a)(l,f),c)),h=Object(_.a)(i,[e,0],[n-e,r]),v=Object(x.a)(p,s),m=Object(zn.a)(s);if(0===e)i=Object(rt.a)(h,Object(w.a)(v,Object(w.a)(m,h)));else{var b=Object(rt.a)(h,Object(w.a)(v,Object(w.a)(m,h)));i=Object(k.a)([Object(_.a)(i,[0,0],[e,r]),b],0)}var g=Object(zn.a)(v),y=Object(_.a)(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Object(rt.a)(y,Object(w.a)(Object(w.a)(y,s),g));else{var O=Object(rt.a)(y,Object(w.a)(Object(w.a)(y,s),g));a=Object(k.a)([Object(_.a)(a,[0,0],[n,e]),O],1)}return[s,i,a]})),f=Object(Jn.a)(l,3);s=f[0],i=f[1],a=f[2],Object(Ar.d)([t,c,u])},l=0;l<c;++l)u(l);return!t&&n>r&&(a=Object(_.a)(a,[0,0],[n,r]),i=Object(_.a)(i,[0,0],[r,r])),[a,i]}))}var Pr=Object(j.b)({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Object(I.b)(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Mr(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Object(_n.a)(Object(ge.a)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=Mr(e,t),r=Object(Jn.a)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)}));var o=Object(ge.a)(Object(un.a)(a,0),e.shape),s=Object(ge.a)(Object(un.a)(i,0),e.shape);return[o,s]}}),Rr=n(69);var Dr=Object(j.b)({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rr.a.SUM_BY_NONZERO_WEIGHTS,r=Object(O.a)(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Object(O.a)(t,"weights","computeWeightedLoss"));var i=null==a?r:Object(x.a)(r,a);if(n===Rr.a.NONE)return i;if(n===Rr.a.SUM)return Object(dn.a)(i);if(n===Rr.a.MEAN){if(null==a)return Object(Ye.a)(i);var o=r.size/a.size,s=Object(ue.a)(Object(dn.a)(i),Object(dn.a)(a));return o>1?Object(ue.a)(s,Object(qt.a)(o)):s}if(n===Rr.a.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Object(ue.a)(Object(dn.a)(i),Object(qt.a)(r.size));var c=Object(x.a)(a,Object(lt.a)(r.shape)),u=Object(L.a)(Object(dn.a)(Object(ct.a)(c,Object(qt.a)(0))),"float32");return Object(ue.a)(Object(dn.a)(i),u)}throw Error("Unknown reduction: ".concat(n))}});var Fr=Object(j.b)({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rr.a.SUM_BY_NONZERO_WEIGHTS,i=Object(O.a)(e,"labels","absoluteDifference"),o=Object(O.a)(t,"predictions","absoluteDifference"),s=null;null!=n&&(s=Object(O.a)(n,"weights","absoluteDifference")),Object(I.e)(i.shape,o.shape,"Error in absoluteDifference: ");var c=Object(a.a)(Object(rt.a)(i,o));return Dr(c,s,r)}});var Lr=Object(j.b)({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rr.a.SUM_BY_NONZERO_WEIGHTS,i=Object(O.a)(e,"labels","cosineDistance"),o=Object(O.a)(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Object(O.a)(r,"weights","cosineDistance")),Object(I.e)(i.shape,o.shape,"Error in cosineDistance: ");var c=Object(qt.a)(1),u=Object(rt.a)(c,Object(dn.a)(Object(x.a)(i,o),n,!0));return Dr(u,s,a)}});var zr=Object(j.b)({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rr.a.SUM_BY_NONZERO_WEIGHTS,a=Object(O.a)(e,"labels","hingeLoss"),i=Object(O.a)(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Object(O.a)(n,"weights","hingeLoss")),Object(I.e)(a.shape,i.shape,"Error in hingeLoss: ");var s=Object(qt.a)(1);a=Object(rt.a)(Object(x.a)(Object(qt.a)(2),a),s);var c=Object(It.a)(Object(rt.a)(s,Object(x.a)(a,i)));return Dr(c,o,r)}});var qr=Object(j.b)({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rr.a.SUM_BY_NONZERO_WEIGHTS,o=Object(O.a)(e,"labels","huberLoss"),c=Object(O.a)(t,"predictions","huberLoss"),u=null;null!=n&&(u=Object(O.a)(n,"weights","huberLoss")),Object(I.e)(o.shape,c.shape,"Error in huberLoss: ");var l=Object(qt.a)(r),f=Object(a.a)(Object(rt.a)(c,o)),d=Object(Je.a)(f,l),p=Object(rt.a)(f,d),h=Object(s.a)(Object(x.a)(Object(qt.a)(.5),Object(nt.a)(d)),Object(x.a)(l,p));return Dr(h,u,i)}});var Vr=Object(j.b)({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rr.a.SUM_BY_NONZERO_WEIGHTS,i=Object(O.a)(e,"labels","logLoss"),o=Object(O.a)(t,"predictions","logLoss"),c=null;null!=n&&(c=Object(O.a)(n,"weights","logLoss")),Object(I.e)(i.shape,o.shape,"Error in logLoss: ");var u=Object(qt.a)(1),l=Object(qt.a)(r),f=Object(st.a)(Object(x.a)(i,Object(De.a)(Object(s.a)(o,l)))),d=Object(x.a)(Object(rt.a)(u,i),Object(De.a)(Object(s.a)(Object(rt.a)(u,o),l))),p=Object(rt.a)(f,d);return Dr(p,c,a)}});var Br=Object(j.b)({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rr.a.SUM_BY_NONZERO_WEIGHTS,a=Object(O.a)(e,"labels","meanSquaredError"),i=Object(O.a)(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Object(O.a)(n,"weights","meanSquaredError")),Object(I.e)(a.shape,i.shape,"Error in meanSquaredError: ");var s=Object(sn.a)(a,i);return Dr(s,o,r)}});function Ur(e,t){var n=Object(O.a)(e,"labels","sigmoidCrossEntropyWithLogits"),r=Object(O.a)(t,"logits","sigmoidCrossEntropyWithLogits");Object(I.e)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=Object(It.a)(r),o=Object(x.a)(r,n),c=Object(Fe.a)(Object(ve.a)(Object(st.a)(Object(a.a)(r))));return Object(s.a)(Object(rt.a)(i,o),c)}var Wr=Object(j.b)({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rr.a.SUM_BY_NONZERO_WEIGHTS,i=Object(O.a)(e,"multiClassLabels","sigmoidCrossEntropy"),o=Object(O.a)(t,"logits","sigmoidCrossEntropy"),c=null;if(null!=n&&(c=Object(O.a)(n,"weights","sigmoidCrossEntropy")),Object(I.e)(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Object(qt.a)(r),l=Object(qt.a)(1),f=Object(qt.a)(.5);i=Object(s.a)(Object(x.a)(i,Object(rt.a)(l,u)),Object(x.a)(f,u))}var d=Ur(i,o);return Dr(d,c,a)}});function Gr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=Object($n.a)((function(e,t,r){var a=Object(qe.a)(t,[n],!0),i=Object(rt.a)(Object(L.a)(t,"float32"),a);r([e,i]);var o=Object(st.a)(Object(x.a)(i,e));return{value:Object(dn.a)(o,[n]),gradFunc:function(e,t){var r=Object(Jn.a)(t,2),a=r[0],i=r[1],o=Object(tt.e)(e.shape,[n]);return[Object(x.a)(Object(ge.a)(e,o),Object(rt.a)(Object(L.a)(a,"float32"),Object(ve.a)(i))),Object(x.a)(Object(ge.a)(e,o),Object(rt.a)(Object(ve.a)(i),Object(L.a)(a,"float32")))]}}}));return r(e,t)}var Hr=Object(j.b)({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rr.a.SUM_BY_NONZERO_WEIGHTS,i=Object(O.a)(e,"onehotLabels","softmaxCrossEntropy"),o=Object(O.a)(t,"logits","softmaxCrossEntropy"),c=null;if(null!=n&&(c=Object(O.a)(n,"weights","softmaxCrossEntropy")),Object(I.e)(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Object(qt.a)(r),l=Object(qt.a)(1),f=Object(qt.a)(i.shape[1]);i=Object(s.a)(Object(x.a)(i,Object(rt.a)(l,u)),Object(ue.a)(u,f))}var d=Gr(i,o);return Dr(d,c,a)}}),Kr={fft:en.a,ifft:tn.a,rfft:rn.a,irfft:nn.a},Xr={hammingWindow:lr,hannWindow:fr,frame:dr,stft:pr},Qr={flipLeftRight:vr,resizeNearestNeighbor:Nr.a,resizeBilinear:Er.a,rotateWithOffset:mr,cropAndResize:hr,nonMaxSuppression:gr,nonMaxSuppressionAsync:kr,nonMaxSuppressionWithScore:wr,nonMaxSuppressionWithScoreAsync:jr,nonMaxSuppressionPadded:Sr,nonMaxSuppressionPaddedAsync:Cr},Yr={bandPart:Tr,gramSchmidt:Ir,qr:Pr},Zr={absoluteDifference:Fr,computeWeightedLoss:Dr,cosineDistance:Lr,hingeLoss:zr,huberLoss:qr,logLoss:Vr,meanSquaredError:Br,sigmoidCrossEntropy:Wr,softmaxCrossEntropy:Hr}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(32),s=n(11);var c=Object(s.b)({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(i.a)(e,"x","sum");"bool"===s.dtype&&(s=Object(o.a)(s,"int32"));var c={x:s},u={axis:t,keepDims:n};return r.a.runKernel(a.Qc,c,u)}})},function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"h",(function(){return d})),n.d(t,"m",(function(){return p})),n.d(t,"n",(function(){return h})),n.d(t,"t",(function(){return v})),n.d(t,"d",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"u",(function(){return g})),n.d(t,"r",(function(){return y})),n.d(t,"o",(function(){return O})),n.d(t,"k",(function(){return k})),n.d(t,"q",(function(){return w})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return j})),n.d(t,"p",(function(){return S})),n.d(t,"a",(function(){return _})),n.d(t,"s",(function(){return C}));var r=n(15),a=n(53),i=n(19),o=n(51);function s(){Object(a.c)().set("PROD",!0)}function c(){Object(a.c)().set("DEBUG",!0)}function u(){Object(a.c)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){Object(a.c)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function f(){r.a.disposeVariables()}function d(){return r.a}function p(){return r.a.memory()}function h(e){return r.a.profile(e)}function v(e,t){return r.a.tidy(e,t)}function m(e){Object(o.getTensorsInContainer)(e).forEach((function(e){return e.dispose()}))}function b(e){return r.a.keep(e)}function g(e){return r.a.time(e)}function y(e){return r.a.setBackend(e)}function O(){return r.a.ready()}function k(){return r.a.backendName}function w(e){r.a.removeBackend(e)}function x(e){return r.a.findBackend(e)}function j(e){return r.a.findBackendFactory(e)}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.a.registerBackend(e,t,n)}function _(){return r.a.backend}function C(e,t){Object(a.c)().setPlatform(e,t)}Object(i.d)(l)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({zerosLike_:function(e){var t={x:Object(i.a)(e,"x","zerosLike")};return r.a.runKernel(a.Zc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(145);var a=n(38),i=n(134);function o(e,t){if(t&&("object"===Object(a.a)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Object(i.a)(e)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(r.a)(e);if(t){var i=Object(r.a)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return o(this,n)}}},function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var r=n(18),a=n(26),i=n(16),o=n(35),s=n(1),c=n.n(s),u=n(23),l=n.n(u),f=n(206),d=n(38),p=n(178),h=n(52),v=n(278);function m(e){return"object"===Object(d.a)(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===Object(d.a)(e.icon)||"function"===typeof e.icon)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}function g(e,t,n){return n?c.a.createElement(e.tag,Object(r.a)(Object(r.a)({key:t},b(e.attrs)),n),(e.children||[]).map((function(n,r){return g(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):c.a.createElement(e.tag,Object(r.a)({key:t},b(e.attrs)),(e.children||[]).map((function(n,r){return g(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function y(e){return Object(p.a)(e)[0]}function O(e){return e?Array.isArray(e)?e:[e]:[]}var k="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",w=["icon","className","onClick","style","primaryColor","secondaryColor"],x={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var j=function(e){var t,n,a=e.icon,i=e.className,c=e.onClick,u=e.style,l=e.primaryColor,d=e.secondaryColor,p=Object(o.a)(e,w),b=x;if(l&&(b={primaryColor:l,secondaryColor:d||y(l)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=Object(s.useContext)(f.a).csp;Object(s.useEffect)((function(){Object(v.a)(e,"@ant-design-icons",{prepend:!0,csp:t})}),[])}(),t=m(a),n="icon should be icon definiton, but got ".concat(a),Object(h.a)(t,"[@ant-design/icons] ".concat(n)),!m(a))return null;var O=a;return O&&"function"===typeof O.icon&&(O=Object(r.a)(Object(r.a)({},O),{},{icon:O.icon(b.primaryColor,b.secondaryColor)})),g(O.icon,"svg-".concat(O.name),Object(r.a)({className:i,onClick:c,style:u,"data-icon":O.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},p))};j.displayName="IconReact",j.getTwoToneColors=function(){return Object(r.a)({},x)},j.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;x.primaryColor=t,x.secondaryColor=n||y(t),x.calculated=!!n};var S=j;function _(e){var t=O(e),n=Object(a.a)(t,2),r=n[0],i=n[1];return S.setTwoToneColors({primaryColor:r,secondaryColor:i})}var C=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];_("#1890ff");var E=s.forwardRef((function(e,t){var n,c=e.className,u=e.icon,d=e.spin,p=e.rotate,h=e.tabIndex,v=e.onClick,m=e.twoToneColor,b=Object(o.a)(e,C),g=s.useContext(f.a).prefixCls,y=void 0===g?"anticon":g,k=l()(y,(n={},Object(i.a)(n,"".concat(y,"-").concat(u.name),!!u.name),Object(i.a)(n,"".concat(y,"-spin"),!!d||"loading"===u.name),n),c),w=h;void 0===w&&v&&(w=-1);var x=p?{msTransform:"rotate(".concat(p,"deg)"),transform:"rotate(".concat(p,"deg)")}:void 0,j=O(m),_=Object(a.a)(j,2),E=_[0],N=_[1];return s.createElement("span",Object(r.a)(Object(r.a)({role:"img","aria-label":u.name},b),{},{ref:t,tabIndex:w,onClick:v,className:k}),s.createElement(S,{icon:u,primaryColor:E,secondaryColor:N,style:x}))}));E.displayName="AntdIcon",E.getTwoToneColor=function(){var e=S.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},E.setTwoToneColor=_;t.a=E},function(e,t,n){"use strict";var r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=r.F1&&t<=r.F12)return!1;switch(t){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=r.ZERO&&e<=r.NINE)return!0;if(e>=r.NUM_ZERO&&e<=r.NUM_MULTIPLY)return!0;if(e>=r.A&&e<=r.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};t.a=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=function(e){return+setTimeout(e,16)},a=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(r=function(e){return window.requestAnimationFrame(e)},a=function(e){return window.cancelAnimationFrame(e)});var i=0,o=new Map;function s(e){o.delete(e)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=i+=1;function a(t){if(0===t)s(n),e();else{var i=r((function(){a(t-1)}));o.set(n,i)}}return a(t),n}c.cancel=function(e){var t=o.get(e);return s(t),a(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"makeTypesMatch",(function(){return o})),n.d(t,"assertTypesMatch",(function(){return s})),n.d(t,"isTensorInList",(function(){return c})),n.d(t,"getTensorsInContainer",(function(){return u}));var r=n(19),a=n(149),i=n(21);function o(e,t){if(e.dtype===t.dtype)return[e,t];var n=Object(a.c)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e,t){Object(i.b)(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function c(e,t){return t.some((function(t){return t.id===e.id}))}function u(e){var t=[];return l(e,t,new Set),t}function l(e,t,n){if(null!=e)if(e instanceof r.a)t.push(e);else if(a=e,Array.isArray(a)||"object"===typeof a){var a,i=e;for(var o in i){var s=i[o];n.has(s)||(n.add(s),l(s,t,n))}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var r={};function a(e,t){0}function i(e,t){0}function o(e,t,n){t||r[n]||(e(!1,n),r[n]=!0)}function s(e,t){o(i,e,t)}t.a=function(e,t){o(a,e,t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return v}));var r=n(8),a=n(3),i=n.n(a),o=n(12),s=n(2),c=n(4),u=n(21),l="tfjsflags",f=function(){function e(t){Object(s.a)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return Object(c.a)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,".")),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(Object(u.x)(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=function(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return d(t,r[0],r[1]),r.join("=")})),t}(this.global.location.search);if(l in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),a=Object(r.a)(n,2),i=a[0],o=a[1];e.urlFlags[i]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(i,o)}))}}}]),e}();function d(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function p(){return h}var h=null;function v(e){h=e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(15),a=n(7),i=n(11);var o=Object(i.b)({square_:function(e){var t=Object(a.a)(e,"x","square");return r.a.runKernel("Square",{x:t},{})}})},function(e,t,n){"use strict";var r=n(52);t.a=function(e,t,n){Object(r.a)(e,"[antd: ".concat(t,"] ").concat(n))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Z})),n.d(t,"c",(function(){return ee}));var r=n(17),a=n(1),i=n(206),o=n(105),s=n(161),c=n(41),u=n(44),l=n(47),f=n(46),d=n(55),p=n(147),h=n(224),v="internalMark",m=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(c.a)(this,n),r=t.call(this,e),Object(p.a)(e.locale&&e.locale.Modal),Object(d.a)(e._ANT_MARK__===v,"LocaleProvider","`LocaleProvider` is deprecated. Please use `locale` with `ConfigProvider` instead: http://u.ant.design/locale"),r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){Object(p.a)(this.props.locale&&this.props.locale.Modal)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locale;e.locale!==t&&Object(p.a)(t&&t.Modal)}},{key:"componentWillUnmount",value:function(){Object(p.a)()}},{key:"render",value:function(){var e=this.props,t=e.locale,n=e.children;return a.createElement(h.a.Provider,{value:Object(r.a)(Object(r.a)({},t),{exist:!0})},n)}}]),n}(a.Component);m.defaultProps={locale:{}};var b=n(98),g=n(141),y=n(86),O=n(419),k=n(16),w=(n(79),n(301)),x=n(115),j=n(23),S=n.n(j),_=n(302),C=n(304),E=n(227),N=n(303),T=n(26),I=n(205);var A,M,P={},R=4.5,D=24,F=24,L="",z="topRight",q=!1;function V(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;switch(e){case"topLeft":t={left:0,top:n,bottom:"auto"};break;case"topRight":t={right:0,top:n,bottom:"auto"};break;case"bottomLeft":t={left:0,top:"auto",bottom:r};break;default:t={right:0,top:"auto",bottom:r}}return t}function B(e,t){var n=e.placement,r=void 0===n?z:n,i=e.top,o=e.bottom,s=e.getContainer,c=void 0===s?A:s,u=e.closeIcon,l=void 0===u?M:u,f=e.prefixCls,d=(0,ee().getPrefixCls)("notification",f||L),p="".concat(d,"-").concat(r),h=P[p];if(h)Promise.resolve(h).then((function(e){t({prefixCls:"".concat(d,"-notice"),instance:e})}));else{var v=a.createElement("span",{className:"".concat(d,"-close-x")},l||a.createElement(x.a,{className:"".concat(d,"-close-icon")})),m=S()("".concat(d,"-").concat(r),Object(k.a)({},"".concat(d,"-rtl"),!0===q));P[p]=new Promise((function(e){w.a.newInstance({prefixCls:d,className:m,style:V(r,i,o),getContainer:c,closeIcon:v},(function(n){e(n),t({prefixCls:"".concat(d,"-notice"),instance:n})}))}))}}var U={success:_.a,info:N.a,error:C.a,warning:E.a};function W(e,t){var n=e.duration,r=e.icon,i=e.type,o=e.description,s=e.message,c=e.btn,u=e.onClose,l=e.onClick,f=e.key,d=e.style,p=e.className,h=void 0===n?R:n,v=null;r?v=a.createElement("span",{className:"".concat(t,"-icon")},e.icon):i&&(v=a.createElement(U[i]||null,{className:"".concat(t,"-icon ").concat(t,"-icon-").concat(i)}));var m=!o&&v?a.createElement("span",{className:"".concat(t,"-message-single-line-auto-margin")}):null;return{content:a.createElement("div",{className:v?"".concat(t,"-with-icon"):"",role:"alert"},v,a.createElement("div",{className:"".concat(t,"-message")},m,s),a.createElement("div",{className:"".concat(t,"-description")},o),c?a.createElement("span",{className:"".concat(t,"-btn")},c):null),duration:h,closable:!0,onClose:u,onClick:l,key:f,style:d||{},className:S()(p,Object(k.a)({},"".concat(t,"-").concat(i),!!i))}}var G,H,K={open:function(e){B(e,(function(t){var n=t.prefixCls;t.instance.notice(W(e,n))}))},close:function(e){Object.keys(P).forEach((function(t){return Promise.resolve(P[t]).then((function(t){t.removeNotice(e)}))}))},config:function(e){var t=e.duration,n=e.placement,r=e.bottom,a=e.top,i=e.getContainer,o=e.closeIcon,s=e.prefixCls;void 0!==s&&(L=s),void 0!==t&&(R=t),void 0!==n?z=n:e.rtl&&(z="topLeft"),void 0!==r&&(F=r),void 0!==a&&(D=a),void 0!==i&&(A=i),void 0!==o&&(M=o),void 0!==e.rtl&&(q=e.rtl)},destroy:function(){Object.keys(P).forEach((function(e){Promise.resolve(P[e]).then((function(e){e.destroy()})),delete P[e]}))}};["success","info","warning","error"].forEach((function(e){K[e]=function(t){return K.open(Object(r.a)(Object(r.a)({},t),{type:e}))}})),K.warn=K.warning,K.useNotification=(G=B,H=W,function(){var e,t=null,n={add:function(e,n){null===t||void 0===t||t.component.add(e,n)}},i=Object(I.a)(n),o=Object(T.a)(i,2),s=o[0],c=o[1],u=a.useRef({});return u.current.open=function(n){var a=n.prefixCls,i=e("notification",a);G(Object(r.a)(Object(r.a)({},n),{prefixCls:i}),(function(e){var r=e.prefixCls,a=e.instance;t=a,s(H(n,r))}))},["success","info","warning","error"].forEach((function(e){u.current[e]=function(t){return u.current.open(Object(r.a)(Object(r.a)({},t),{type:e}))}})),[u.current,a.createElement(g.a,{key:"holder"},(function(t){return e=t.getPrefixCls,c}))]});var X,Q=K,Y=n(108),Z=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale","pageHeader"],J=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","form"];function $(){return X||"ant"}var ee=function(){return{getPrefixCls:function(e,t){return t||(e?"".concat($(),"-").concat(e):$())},getRootPrefixCls:function(e,t){return e||(X||(t&&t.includes("-")?t.replace(/^(.*)-[^-]*$/,"$1"):$()))}}},te=function(e){var t,n,c=e.children,u=e.csp,l=e.autoInsertSpaceInButton,f=e.form,d=e.locale,p=e.componentSize,h=e.direction,b=e.space,O=e.virtual,k=e.dropdownMatchSelectWidth,w=e.legacyLocale,x=e.parentContext,j=e.iconPrefixCls,S=a.useCallback((function(t,n){var r=e.prefixCls;if(n)return n;var a=r||x.getPrefixCls("");return t?"".concat(a,"-").concat(t):a}),[x.getPrefixCls,e.prefixCls]),_=Object(r.a)(Object(r.a)({},x),{csp:u,autoInsertSpaceInButton:l,locale:d||w,direction:h,space:b,virtual:O,dropdownMatchSelectWidth:k,getPrefixCls:S});J.forEach((function(t){var n=e[t];n&&(_[t]=n)}));var C=Object(s.a)((function(){return _}),_,(function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((function(n){return e[n]!==t[n]}))})),E=a.useMemo((function(){return{prefixCls:j,csp:u}}),[j]),N=c,T={};return d&&(T=(null===(t=d.Form)||void 0===t?void 0:t.defaultValidateMessages)||(null===(n=Y.a.Form)||void 0===n?void 0:n.defaultValidateMessages)||{}),f&&f.validateMessages&&(T=Object(r.a)(Object(r.a)({},T),f.validateMessages)),Object.keys(T).length>0&&(N=a.createElement(o.b,{validateMessages:T},c)),d&&(N=a.createElement(m,{locale:d,_ANT_MARK__:v},N)),j&&(N=a.createElement(i.a.Provider,{value:E},N)),p&&(N=a.createElement(y.a,{size:p},N)),a.createElement(g.b.Provider,{value:C},N)},ne=function(e){return a.useEffect((function(){e.direction&&(O.b.config({rtl:"rtl"===e.direction}),Q.config({rtl:"rtl"===e.direction}))}),[e.direction]),a.createElement(b.a,null,(function(t,n,i){return a.createElement(g.a,null,(function(t){return a.createElement(te,Object(r.a)({parentContext:t,legacyLocale:i},e))}))}))};ne.ConfigContext=g.b,ne.SizeContext=y.b,ne.config=function(e){void 0!==e.prefixCls&&(X=e.prefixCls)};t.b=ne},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({slice_:function(e,t,n){var o=Object(i.a)(e,"x","slice","string_or_numeric");if(0===o.rank)throw new Error("Slicing scalar is not possible");var s={x:o},c={begin:t,size:n};return r.a.runKernel(a.Ec,s,c)}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o}));var r=n(311);n.d(t,"c",(function(){return r.b})),n.d(t,"b",(function(){return r.a}));var a="undefined"!==typeof e&&"undefined"!==typeof e.process,i=a?n(571):window.fetch.bind(window),o=a?n(572):window.performance;a?n(573):window.navigator}).call(this,n(110))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(11);var u=Object(c.b)({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=Object(s.a)(e,"a","matMul"),l=Object(s.a)(t,"b","matMul"),f=Object(o.makeTypesMatch)(u,l),d=Object(r.a)(f,2),p={a:u=d[0],b:l=d[1]},h={transposeA:n,transposeB:c};return a.a.runKernel(i.s,p,h)}})},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return y}));var r=n(8),a=n(28);function i(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,s=e[3],u=[].concat(Object(a.a)(t),[s]),l=y(i);return c(e,u,n,o,r,null,null,l)}function o(e,t,n,a,i,o){var s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=f(t),d=Object(r.a)(l,2),p=d[0],h=d[1];if("channelsLast"===u)s=[p,h,e[3],e[3]];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));s=[p,h,e[1],e[1]]}return c(e,s,n,a,i,o,!1,u)}function s(e,t,n,a,i,o){var s,c,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",f=d(t),p=Object(r.a)(f,3),h=p[0],v=p[1],m=p[2];if("NDHWC"===l)c="channelsLast",s=[h,v,m,e[4],e[4]];else{if("NCDHW"!==l)throw new Error("Unknown dataFormat ".concat(l));c="channelsFirst",s=[h,v,m,e[1],e[1]]}return u(e,s,n,a,i,!1,c,o)}function c(e,t,n,a,i,o){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,l=-1,d=-1,v=-1;if("channelsLast"===c){var m=Object(r.a)(e,4);u=m[0],l=m[1],d=m[2],v=m[3]}else{if("channelsFirst"!==c)throw new Error("Unknown dataFormat ".concat(c));var b=Object(r.a)(e,4);u=b[0],v=b[1],l=b[2],d=b[3]}var g,y=Object(r.a)(t,4),O=y[0],k=y[1],w=y[3],x=f(n),j=Object(r.a)(x,2),S=j[0],_=j[1],C=f(a),E=Object(r.a)(C,2),N=E[0],T=E[1],I=p(O,N),A=p(k,T),M=h(i,l,d,S,_,I,A,o,c),P=M.padInfo,R=M.outHeight,D=M.outWidth,F=s?w*v:w;return"channelsFirst"===c?g=[u,F,R,D]:"channelsLast"===c&&(g=[u,R,D,F]),{batchSize:u,dataFormat:c,inHeight:l,inWidth:d,inChannels:v,outHeight:R,outWidth:D,outChannels:F,padInfo:P,strideHeight:S,strideWidth:_,filterHeight:O,filterWidth:k,effectiveFilterHeight:I,effectiveFilterWidth:A,dilationHeight:N,dilationWidth:T,inShape:e,outShape:g,filterShape:t}}function u(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",c=arguments.length>7?arguments[7]:void 0,u=-1,l=-1,f=-1,h=-1,m=-1;if("channelsLast"===s){var b=Object(r.a)(e,5);u=b[0],l=b[1],f=b[2],h=b[3],m=b[4]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var g=Object(r.a)(e,5);u=g[0],m=g[1],l=g[2],f=g[3],h=g[4]}var y,O=Object(r.a)(t,5),k=O[0],w=O[1],x=O[2],j=O[4],S=d(n),_=Object(r.a)(S,3),C=_[0],E=_[1],N=_[2],T=d(a),I=Object(r.a)(T,3),A=I[0],M=I[1],P=I[2],R=p(k,A),D=p(w,M),F=p(x,P),L=v(i,l,f,h,C,E,N,R,D,F,c),z=L.padInfo,q=L.outDepth,V=L.outHeight,B=L.outWidth,U=o?j*m:j;return"channelsFirst"===s?y=[u,U,q,V,B]:"channelsLast"===s&&(y=[u,q,V,B,U]),{batchSize:u,dataFormat:s,inDepth:l,inHeight:f,inWidth:h,inChannels:m,outDepth:q,outHeight:V,outWidth:B,outChannels:U,padInfo:z,strideDepth:C,strideHeight:E,strideWidth:N,filterDepth:k,filterHeight:w,filterWidth:x,effectiveFilterDepth:R,effectiveFilterHeight:D,effectiveFilterWidth:F,dilationDepth:A,dilationHeight:M,dilationWidth:P,inShape:e,outShape:y,filterShape:t}}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=p(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function f(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function d(e){return"number"===typeof e?[e,e,e]:e}function p(e,t){return t<=1?e:e+(e-1)*(t-1)}function h(e,t,n,r,a,i,o,s,c){var u,f,d;if("number"===typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var p=function(e,t,n,r,a){null==r&&(r=l(e,t,n));var i=e[0],o=e[1];return[m((i-t+2*r)/n+1,a),m((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);f=p[0],d=p[1]}else if("same"===e){f=Math.ceil(t/r),d=Math.ceil(n/a);var h=Math.max(0,(f-1)*r+i-t),v=Math.max(0,(d-1)*a+o-n),b=Math.floor(h/2),g=h-b,y=Math.floor(v/2);u={top:b,bottom:g,left:y,right:v-y,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var O="channelsLast"===c?e[1][0]:e[2][0],k="channelsLast"===c?e[1][1]:e[2][1],w="channelsLast"===c?e[2][0]:e[3][0],x="channelsLast"===c?e[2][1]:e[3][1];u={top:O,bottom:k,left:w,right:x,type:0===O&&0===k&&0===w&&0===x?"VALID":"EXPLICIT"},f=m((t-i+O+k)/r+1,s),d=m((n-o+w+x)/a+1,s)}return{padInfo:u,outHeight:f,outWidth:d}}function v(e,t,n,r,a,i,o,s,c,u,f){var d,p,h,v;if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var b=function(e,t,n,r,a,i){null==a&&(a=l(e,t,r));var o=e[0],s=e[1],c=e[2];return[m((o-t+2*a)/r+1,i),m((s-t+2*a)/r+1,i),m((c-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,f);p=b[0],h=b[1],v=b[2]}else if("same"===e){var g=((p=Math.ceil(t/a))-1)*a+s-t,y=((h=Math.ceil(n/i))-1)*i+c-n,O=((v=Math.ceil(r/o))-1)*o+u-r,k=Math.floor(g/2),w=g-k,x=Math.floor(y/2),j=y-x,S=Math.floor(O/2);d={top:x,bottom:j,left:S,right:O-S,front:k,back:w,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((t-s+1)/a),h=Math.ceil((n-c+1)/i),v=Math.ceil((r-u+1)/o)}return{padInfo:d,outDepth:p,outHeight:h,outWidth:v}}function m(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function b(e){var t=f(e),n=Object(r.a)(t,3),a=n[0],i=n[1],o=n[2];return 1===a&&1===i&&1===o}function g(e,t){return b(e)||b(t)}function y(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({neg_:function(e){var t={x:Object(i.a)(e,"x","neg")};return r.a.runKernel(a.Vb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(18);function a(e,t){var n=Object(r.a)({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(113),c=n(11);var u=Object(c.b)({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(o.b)(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Object(i.b)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Object(s.a)(n[0]);var c=n,u={axis:t};return r.a.runKernel(a.B,c,u)}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n(38),a=n(274);function i(e,t){"function"===typeof e?e(t):"object"===Object(r.a)(e)&&e&&"current"in e&&(e.current=t)}function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){i(t,e)}))}}function s(e){var t,n,r=Object(a.isMemo)(e)?e.type.type:e.type;return!("function"===typeof r&&!(null===(t=r.prototype)||void 0===t?void 0:t.render))&&!("function"===typeof e&&!(null===(n=e.prototype)||void 0===n?void 0:n.render))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(1),a=r.isValidElement;function i(e,t){return function(e,t,n){return a(e)?r.cloneElement(e,"function"===typeof n?n(e.props||{}):n):t}(e,e,t)}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(426)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n(28),a=n(15),i=n(19),o=n(7),s=n(21);function c(e){return s.b(s.u(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=Object(o.a)(t,"x","tf.grad","string_or_numeric"),i=null!=n?Object(o.a)(n,"dy","tf.grad"):null;return a.a.tidy((function(){var t=a.a.gradients((function(){return e(r)}),[r],i),n=t.value,o=t.grads;return null!=i&&s.e(n.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),h(o),o[0]}))}}function u(e){return s.b(s.u(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){s.b(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var i=Object(o.b)(t,"args","tf.grads","string_or_numeric"),c=null!=n?Object(o.a)(n,"dy","tf.grads"):null;return a.a.tidy((function(){var t=a.a.gradients((function(){return e.apply(void 0,Object(r.a)(i))}),i,c),n=t.value,o=t.grads;return null!=c&&s.e(n.shape,c.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(o),o}))}}function l(e){return s.b(s.u(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){s.b(t instanceof i.a,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),s.b(null==n||n instanceof i.a,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=a.a.gradients((function(){return e(t)}),[t],n),o=r.grads,c=r.value;return h(o),{grad:o[0],value:c}}}function f(e){return s.b(s.u(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){s.b(Array.isArray(t)&&t.every((function(e){return e instanceof i.a})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),s.b(null==n||n instanceof i.a,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var o=a.a.gradients((function(){return e.apply(void 0,Object(r.a)(t))}),t,n);return null!=n&&s.e(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(o.grads),o}}function d(e,t){s.b(s.u(e),(function(){return"The f passed in variableGrads(f) must be a function"})),s.b(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof i.c})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],a.a.registeredVariables)t.push(a.a.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,c=t.length;t=t.filter((function(e){return e.trainable})),s.b(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(c," variables is ")+"trainable."}));var u=a.a.gradients(e,t,null,!0),l=u.value,f=u.grads;s.b(f.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),s.b(0===l.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(l.rank," tensor")}));var d={};return t.forEach((function(e,t){null!=f[t]&&(d[e.name]=f[t])})),null!=o&&o.forEach((function(e){return d[e.name]=null})),{value:l,grads:d}}function p(e){return a.a.customGrad(e)}function h(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(171),c=n(39),u=n(11);var l=Object(u.b)({where_:function(e,t,n){var u=Object(i.a)(t,"a","where"),l=Object(i.a)(n,"b","where"),f=Object(i.a)(e,"condition","where","bool"),d=Object(c.a)(u.shape,l.shape),p=Object(s.a)(u,d),h=Object(s.a)(l,d);1===f.rank&&Object(o.b)(f.shape[0]===u.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})),1!==f.rank&&Object(o.e)(f.shape,h.shape,"Error in where: ");var v={condition:f,t:p,e:h};return r.a.runKernel(a.yc,v)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return ae}));var r=n(16),a=n(18),i=n(26),o=n(38),s=n(1),c=n(160),u=n(65),l=n(23),f=n.n(l),d=n(106);function p(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var h=function(e,t){var n={animationend:p("Animation","AnimationEnd"),transitionend:p("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(Object(d.a)(),"undefined"!==typeof window?window:{}),v={};if(Object(d.a)()){var m=document.createElement("div");v=m.style}var b={};function g(e){if(b[e])return b[e];var t=h[e];if(t)for(var n=Object.keys(t),r=n.length,a=0;a<r;a+=1){var i=n[a];if(Object.prototype.hasOwnProperty.call(t,i)&&i in v)return b[e]=t[i],b[e]}return""}var y=g("animationend"),O=g("transitionend"),k=!(!y||!O),w=y||"animationend",x=O||"transitionend";function j(e,t){return e?"object"===Object(o.a)(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}var S="none",_="appear",C="enter",E="leave",N="none",T="prepare",I="start",A="active",M="end";function P(e){var t=Object(s.useRef)(!1),n=Object(s.useState)(e),r=Object(i.a)(n,2),a=r[0],o=r[1];return Object(s.useEffect)((function(){return function(){t.current=!0}}),[]),[a,function(e){t.current||o(e)}]}var R=Object(d.a)()?s.useLayoutEffect:s.useEffect,D=n(50),F=[T,I,A,M];function L(e){return e===A||e===M}var z=function(e,t){var n=s.useState(N),r=Object(i.a)(n,2),a=r[0],o=r[1],c=function(){var e=s.useRef(null);function t(){D.a.cancel(e.current)}return s.useEffect((function(){return function(){t()}}),[]),[function n(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var i=Object(D.a)((function(){a<=1?r({isCanceled:function(){return i!==e.current}}):n(r,a-1)}));e.current=i},t]}(),u=Object(i.a)(c,2),l=u[0],f=u[1];return R((function(){if(a!==N&&a!==M){var e=F.indexOf(a),n=F[e+1],r=t(a);false===r?o(n):l((function(e){function t(){e.isCanceled()||o(n)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,a]),s.useEffect((function(){return function(){f()}}),[]),[function(){o(T)},a]};function q(e,t,n,o){var c=o.motionEnter,u=void 0===c||c,l=o.motionAppear,f=void 0===l||l,d=o.motionLeave,p=void 0===d||d,h=o.motionDeadline,v=o.motionLeaveImmediately,m=o.onAppearPrepare,b=o.onEnterPrepare,g=o.onLeavePrepare,y=o.onAppearStart,O=o.onEnterStart,k=o.onLeaveStart,j=o.onAppearActive,N=o.onEnterActive,M=o.onLeaveActive,D=o.onAppearEnd,F=o.onEnterEnd,q=o.onLeaveEnd,V=o.onVisibleChanged,B=P(),U=Object(i.a)(B,2),W=U[0],G=U[1],H=P(S),K=Object(i.a)(H,2),X=K[0],Q=K[1],Y=P(null),Z=Object(i.a)(Y,2),J=Z[0],$=Z[1],ee=Object(s.useRef)(!1),te=Object(s.useRef)(null),ne=Object(s.useRef)(!1),re=Object(s.useRef)(null);function ae(){return n()||re.current}var ie=Object(s.useRef)(!1);function oe(e){var t,n=ae();e&&!e.deadline&&e.target!==n||(X===_&&ie.current?t=null===D||void 0===D?void 0:D(n,e):X===C&&ie.current?t=null===F||void 0===F?void 0:F(n,e):X===E&&ie.current&&(t=null===q||void 0===q?void 0:q(n,e)),!1===t||ne.current||(Q(S),$(null)))}var se=function(e){var t=Object(s.useRef)(),n=Object(s.useRef)(e);n.current=e;var r=s.useCallback((function(e){n.current(e)}),[]);function a(e){e&&(e.removeEventListener(x,r),e.removeEventListener(w,r))}return s.useEffect((function(){return function(){a(t.current)}}),[]),[function(e){t.current&&t.current!==e&&a(t.current),e&&e!==t.current&&(e.addEventListener(x,r),e.addEventListener(w,r),t.current=e)},a]}(oe),ce=Object(i.a)(se,1)[0],ue=s.useMemo((function(){var e,t,n;switch(X){case"appear":return e={},Object(r.a)(e,T,m),Object(r.a)(e,I,y),Object(r.a)(e,A,j),e;case"enter":return t={},Object(r.a)(t,T,b),Object(r.a)(t,I,O),Object(r.a)(t,A,N),t;case"leave":return n={},Object(r.a)(n,T,g),Object(r.a)(n,I,k),Object(r.a)(n,A,M),n;default:return{}}}),[X]),le=z(X,(function(e){if(e===T){var t=ue.prepare;return!!t&&t(ae())}var n;pe in ue&&$((null===(n=ue[pe])||void 0===n?void 0:n.call(ue,ae(),null))||null);return pe===A&&(ce(ae()),h>0&&(clearTimeout(te.current),te.current=setTimeout((function(){oe({deadline:!0})}),h))),true})),fe=Object(i.a)(le,2),de=fe[0],pe=fe[1],he=L(pe);ie.current=he,R((function(){G(t);var n,r=ee.current;(ee.current=!0,e)&&(!r&&t&&f&&(n=_),r&&t&&u&&(n=C),(r&&!t&&p||!r&&v&&!t&&p)&&(n=E),n&&(Q(n),de()))}),[t]),Object(s.useEffect)((function(){(X===_&&!f||X===C&&!u||X===E&&!p)&&Q(S)}),[f,u,p]),Object(s.useEffect)((function(){return function(){clearTimeout(te.current),ne.current=!0}}),[]),Object(s.useEffect)((function(){void 0!==W&&X===S&&(null===V||void 0===V||V(W))}),[W,X]);var ve=J;return ue.prepare&&pe===I&&(ve=Object(a.a)({transition:"none"},ve)),[X,pe,ve,null!==W&&void 0!==W?W:t]}var V=n(41),B=n(44),U=n(47),W=n(46),G=function(e){Object(U.a)(n,e);var t=Object(W.a)(n);function n(){return Object(V.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"render",value:function(){return this.props.children}}]),n}(s.Component),H=G;var K=function(e){var t=e;function n(e){return!(!e.motionName||!t)}"object"===Object(o.a)(e)&&(t=e.transitionSupport);var l=s.forwardRef((function(e,t){var o=e.visible,l=void 0===o||o,d=e.removeOnLeave,p=void 0===d||d,h=e.forceRender,v=e.children,m=e.motionName,b=e.leavedClassName,g=e.eventProps,y=n(e),O=Object(s.useRef)(),k=Object(s.useRef)();var w=q(y,l,(function(){try{return Object(c.a)(O.current||k.current)}catch(e){return null}}),e),x=Object(i.a)(w,4),_=x[0],C=x[1],E=x[2],N=x[3],A=s.useRef(N);N&&(A.current=!0);var M=Object(s.useRef)(t);M.current=t;var P,R=s.useCallback((function(e){O.current=e,Object(u.b)(M.current,e)}),[]),D=Object(a.a)(Object(a.a)({},g),{},{visible:l});if(v)if(_!==S&&n(e)){var F,z;C===T?z="prepare":L(C)?z="active":C===I&&(z="start"),P=v(Object(a.a)(Object(a.a)({},D),{},{className:f()(j(m,_),(F={},Object(r.a)(F,j(m,"".concat(_,"-").concat(z)),z),Object(r.a)(F,m,"string"===typeof m),F)),style:E}),R)}else P=N?v(Object(a.a)({},D),R):!p&&A.current?v(Object(a.a)(Object(a.a)({},D),{},{className:b}),R):h?v(Object(a.a)(Object(a.a)({},D),{},{style:{display:"none"}}),R):null;else P=null;return s.createElement(H,{ref:k},P)}));return l.displayName="CSSMotion",l}(k),X=n(17),Q=n(35),Y="add",Z="keep",J="remove",$="removed";function ee(e){var t;return t=e&&"object"===Object(o.a)(e)&&"key"in e?e:{key:e},Object(a.a)(Object(a.a)({},t),{},{key:String(t.key)})}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(ee)}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,o=te(e),s=te(t);o.forEach((function(e){for(var t=!1,o=r;o<i;o+=1){var c=s[o];if(c.key===e.key){r<o&&(n=n.concat(s.slice(r,o).map((function(e){return Object(a.a)(Object(a.a)({},e),{},{status:Y})}))),r=o),n.push(Object(a.a)(Object(a.a)({},c),{},{status:Z})),r+=1,t=!0;break}}t||n.push(Object(a.a)(Object(a.a)({},e),{},{status:J}))})),r<i&&(n=n.concat(s.slice(r).map((function(e){return Object(a.a)(Object(a.a)({},e),{},{status:Y})}))));var c={};n.forEach((function(e){var t=e.key;c[t]=(c[t]||0)+1}));var u=Object.keys(c).filter((function(e){return c[e]>1}));return u.forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==J}))).forEach((function(t){t.key===e&&(t.status=Z)}))})),n}var re=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];var ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K,n=function(e){Object(U.a)(r,e);var n=Object(W.a)(r);function r(){var e;return Object(V.a)(this,r),(e=n.apply(this,arguments)).state={keyEntities:[]},e.removeKey=function(t){e.setState((function(e){return{keyEntities:e.keyEntities.map((function(e){return e.key!==t?e:Object(a.a)(Object(a.a)({},e),{},{status:$})}))}}))},e}return Object(B.a)(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,a=r.component,i=r.children,o=r.onVisibleChanged,c=Object(Q.a)(r,["component","children","onVisibleChanged"]),u=a||s.Fragment,l={};return re.forEach((function(e){l[e]=c[e],delete c[e]})),delete c.keys,s.createElement(u,c,n.map((function(n){var r=n.status,a=Object(Q.a)(n,["status"]),c=r===Y||r===Z;return s.createElement(t,Object(X.a)({},l,{key:a.key,visible:c,eventProps:a,onVisibleChanged:function(t){null===o||void 0===o||o(t,{key:a.key}),t||e.removeKey(a.key)}}),i)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,a=te(n);return{keyEntities:ne(r,a).filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==$||e.status!==J}))}}}]),r}(s.Component);return n.defaultProps={component:"div"},n}(k);t.b=K},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({sqrt_:function(e){var t={x:Object(i.a)(e,"x","sqrt")};return r.a.runKernel(a.Kc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),a=n.n(r),i=n(274);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return a.a.Children.forEach(e,(function(e){(void 0!==e&&null!==e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(o(e)):Object(i.isFragment)(e)&&e.props?n=n.concat(o(e.props.children,t)):n.push(e))})),n}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return f}));var r=n(21);function a(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function i(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function o(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function s(e,t){return i(e,t.map((function(e){return 1})),t)}function c(e,t,n){r.b(a(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function u(e,t){if(a(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function l(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function f(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}},function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return O})),n.d(t,"g",(function(){return k}));var r=n(3),a=n.n(r),i=n(25),o=n(12),s=n(102),c=n(162),u=n(21),l=n(226);function f(e,t){return d.apply(this,arguments)}function d(){return d=Object(o.a)(a.a.mark((function e(t,n){var r,i,s,c,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],i=[],s=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),c=function(e){var c=s[e],u=Array.isArray(t)?t[e].tensor:t[c];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype&&"complex64"!==u.dtype)throw new Error("Unsupported dtype in weight '".concat(c,"': ").concat(u.dtype));var l={name:c,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){var f=new Promise(function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,i,o,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,i=new Uint8Array(r),o=0,s=0;s<n.length;s++)c=n[s],l=new Uint8Array(new Uint32Array([c.length]).buffer),i.set(l,o),o+=4,i.set(c,o),o+=c.length;t(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());i.push(f)}else i.push(u.data());null!=n&&(l.group=n),r.push(l)},u=0;u<s.length;++u)c(u);return e.next=7,Promise.all(i);case 7:return l=e.sent,e.abrupt("return",{data:h(l),specs:r});case 9:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e,t){var n,r,a={},o=0,f=Object(i.a)(t);try{for(f.s();!(r=f.n()).done;){var d=r.value,p=d.name,h=d.dtype,v=d.shape,m=Object(u.N)(v),b=void 0;if("quantization"in d){var g=d.quantization;if("uint8"===g.dtype||"uint16"===g.dtype){if(!("min"in g)||!("scale"in g))throw new Error("Weight ".concat(d.name," with quantization ").concat(g.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==g.dtype)throw new Error("Weight ".concat(d.name," has unknown ")+"quantization dtype ".concat(g.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==h)throw new Error("Weight ".concat(d.name," is quantized with ").concat(g.dtype," ")+"which only supports weights of type float32 not ".concat(h,"."))}var y=l.a[g.dtype],O=e.slice(o,o+m*y),k="uint8"===g.dtype?new Uint8Array(O):new Uint16Array(O);if("float32"===h)if("uint8"===g.dtype||"uint16"===g.dtype){b=new Float32Array(k.length);for(var x=0;x<k.length;x++){var j=k[x];b[x]=j*g.scale+g.min}}else{if("float16"!==g.dtype)throw new Error("Unsupported quantization type ".concat(g.dtype," ")+"for weight type float32.");void 0===n&&(n=w()),b=n(k)}else{if("int32"!==h)throw new Error("Unsupported dtype in weight '".concat(p,"': ").concat(h));if("uint8"!==g.dtype&&"uint16"!==g.dtype)throw new Error("Unsupported quantization type ".concat(g.dtype," ")+"for weight type int32.");b=new Int32Array(k.length);for(var S=0;S<k.length;S++){var _=k[S];b[S]=Math.round(_*g.scale+g.min)}}o+=m*y}else if("string"===h){var C=Object(u.N)(d.shape);b=[];for(var E=0;E<C;E++){var N=new Uint32Array(e.slice(o,o+4))[0];o+=4;var T=new Uint8Array(e.slice(o,o+N));b.push(T),o+=N}}else{var I=l.a[h],A=e.slice(o,o+m*I);if("float32"===h)b=new Float32Array(A);else if("int32"===h)b=new Int32Array(A);else if("bool"===h)b=new Uint8Array(A);else{if("complex64"!==h)throw new Error("Unsupported dtype in weight '".concat(p,"': ").concat(h));b=new Float32Array(A);for(var M=new Float32Array(b.length/2),P=new Float32Array(b.length/2),R=0;R<M.length;R++)M[R]=b[2*R],P[R]=b[2*R+1];var D=Object(c.a)(M,v,"float32"),F=Object(c.a)(P,v,"float32");a[p]=Object(s.a)(D,F),D.dispose(),F.dispose()}o+=m*I}"complex64"!==h&&(a[p]=Object(c.a)(b,v,h))}}catch(L){f.e(L)}finally{f.f()}return a}function h(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var v="undefined"!==typeof e&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function m(t){return v?e.byteLength(t):new Blob([t]).size}function b(t){if(v)return e.from(t).toString("base64");for(var n=new Uint8Array(t),r="",a=0,i=n.length;a<i;a++)r+=String.fromCharCode(n[a]);return btoa(r)}function g(t){if(v){var n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}for(var r=atob(t),a=new Uint8Array(r.length),i=0;i<r.length;++i)a.set([r.charCodeAt(i)],i);return a.buffer}function y(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function O(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function k(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:m(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:m(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function w(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],c=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=c}return new Float32Array(a)}}}).call(this,n(235).Buffer)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}},function(e,t,n){var r=n(449)();e.exports=r;try{regeneratorRuntime=r}catch(a){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({exp_:function(e){var t={x:Object(i.a)(e,"x","exp")};return r.a.runKernel(a.Z,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({abs_:function(e){var t=Object(i.a)(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return r.a.runKernel(a.A,n)}var o={x:t};return r.a.runKernel(a.a,o)}})},function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return m}));var r=n(39),a=n(189),i=n(192),o=n(27),s=n(197),c=n(130),u=n(198),l=n(22),f=n(131),d=n(42);function p(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Object(o.a)(e,Object(f.a)(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function h(e,t){var n=t,a=r.c(e.shape,t.shape);return a.length>0&&(n=Object(d.a)(n,a)),Object(l.a)(n,e.shape)}function v(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Object(c.a)(e);if("elu"===t)return Object(a.a)(e);if("relu6"===t)return Object(u.a)(e);if("prelu"===t)return Object(s.a)(e,n);if("leakyrelu"===t)return Object(i.a)(e,r);throw new Error("Unknown fused activation ".concat(t,"."))}var m=function(e,t){return!(e>0)||"linear"===t}},function(e,t,n){"use strict";n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return O})),n.d(t,"d",(function(){return k})),n.d(t,"g",(function(){return w})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return R})),n.d(t,"c",(function(){return x}));var r=n(25),a=n(5),i=n(6),o=n(3),s=n.n(o),c=n(12),u=n(2),l=n(4),f=n(0),d=n(295),p=n(120);function h(e){return e instanceof f.id?{value:e.clone(),recurse:!1}:Object(p.e)(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var v=n(14),m=n(13),b=function(){function e(t){if(Object(u.a)(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return Object(l.a)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.push(a)}}catch(i){n.e(i)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),g=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.INITIAL_CAPACITY)}return Object(l.a)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){Object(v.a)(Object(m.a)(n.prototype),"isFull",this).call(this)&&this.expand(),Object(v.a)(Object(m.a)(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){Object(v.a)(Object(m.a)(n.prototype),"isFull",this).call(this)&&this.expand(),Object(v.a)(Object(m.a)(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(b);function y(e){return new S(e)}function O(e){return new _(e)}function k(e,t){return new F(e,t)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.FAIL;return new L(e,t)}g.INITIAL_CAPACITY=32;var x,j=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,[{key:"toArray",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new M(this,e)}},{key:"filter",value:function(e){return new I(this,e)}},{key:"map",value:function(e){return new A(this,e)}},{key:"mapAsync",value:function(e){return new P(this,e)}},{key:"serialMapAsync",value:function(e){return new P(this,e).serial()}},{key:"flatmap",value:function(e){return new D(this,e)}},{key:"forEachAsync",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new T(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.f,r=this.rowMajorBatch(e,t);return r.map((function(e){return Object(p.d)(e,n)}))}},{key:"concatenate",value:function(e,t){return new F(y([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new N(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new E(this,e)}},{key:"prefetch",value:function(e){return new z(this,e)}},{key:"shuffle",value:function(e,t){return new q(this,e,t)}},{key:"serial",value:function(){return new C(this)}}]),e}(),S=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this)).items=e,r.trav=0,r}return Object(l.a)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:(n=t,Object(p.b)(n,h)),done:!1});case 5:case"end":return e.stop()}var n}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),_=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this)).nextFn=e,r}return Object(l.a)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(j),C=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),E=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:f.Ae(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),N=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),T=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),I=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:f.Ae(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),A=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i,o,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=f.bi.getTensorsInContainer(t.value),a=this.transform(t.value),i=f.bi.getTensorsInContainer(a),o=Object(r.a)(n);try{for(o.s();!(c=o.n()).done;)u=c.value,f.bi.isTensorInList(u,i)||u.dispose()}catch(s){o.e(s)}finally{o.f()}return e.abrupt("return",{value:a,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),M=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(j),P=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i,o,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=f.bi.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:a=e.sent,i=f.bi.getTensorsInContainer(a),o=Object(r.a)(n);try{for(o.s();!(c=o.n()).done;)u=c.value,f.bi.isTensorInList(u,i)||u.dispose()}catch(s){o.e(s)}finally{o.f()}return e.abrupt("return",{value:a,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),R=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).outputQueue=new g,e.lastRead=Promise.resolve({value:null,done:!1}),e}return Object(l.a)(n,[{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),D=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,a,i,o,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=f.bi.getTensorsInContainer(t.value),a=this.transform(t.value),i=f.bi.getTensorsInContainer(a),this.outputQueue.pushAll(a),o=Object(r.a)(n);try{for(o.s();!(c=o.n()).done;)u=c.value,f.bi.isTensorInList(u,i)||u.dispose()}catch(s){o.e(s)}finally{o.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(R),F=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(j);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(x||(x={}));var L=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.FAIL;return Object(u.a)(this,n),(r=t.call(this)).iterators=e,r.mismatchMode=a,r.count=0,r.currentPromise=null,r}return Object(l.a)(n,[{key:"summary",value:function(){return"{".concat("TODO: fill in upstream of zip summaries","} -> Zip")}},{key:"nextState",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof j?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=7,Object(p.c)(this.iterators,a);case 7:if(i=e.sent,n!==r){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:if(!(r>0)){e.next=16;break}e.t0=this.mismatchMode,e.next=e.t0===x.FAIL?14:e.t0===x.SHORTEST?15:(e.t0,x.LONGEST,16);break;case 14:throw new Error("Zipped streams should have the same length. "+"Mismatched at element ".concat(this.count,"."));case 15:return e.abrupt("return",{value:null,done:!0});case 16:return this.count++,e.abrupt("return",{value:i,done:!1});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPromise=this.nextState(this.currentPromise),e.abrupt("return",this.currentPromise);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j),z=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new b(r),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(j),q=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r,a){var i;return Object(u.a)(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=d.alea(a||f.qi.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return Object(l.a)(n,[{key:"next",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(z)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(39),u=n(11);var l=Object(u.b)({greater_:function(e,t){var n=Object(s.a)(e,"a","greater"),u=Object(s.a)(t,"b","greater"),l=Object(o.makeTypesMatch)(n,u),f=Object(r.a)(l,2);n=f[0],u=f[1],Object(c.a)(n.shape,u.shape);var d={a:n,b:u};return a.a.runKernel(i.nb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=r.createContext(void 0),i=function(e){var t=e.children,n=e.size;return r.createElement(a.Consumer,null,(function(e){return r.createElement(a.Provider,{value:n||e},t)}))};t.b=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(26),a=n(1);function i(e,t){var n=t||{},i=n.defaultValue,o=n.value,s=n.onChange,c=n.postState,u=a.useState((function(){return void 0!==o?o:void 0!==i?"function"===typeof i?i():i:"function"===typeof e?e():e})),l=Object(r.a)(u,2),f=l[0],d=l[1],p=void 0!==o?o:f;c&&(p=c(p));var h=a.useRef(!0);return a.useEffect((function(){h.current?h.current=!1:void 0===o&&d(o)}),[o]),[p,function(e){d(e),p!==e&&s&&s(e,p)}]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(19),a=n(21);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",a.c(e),new r.b(e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(11);var u=Object(c.b)({pow_:function(e,t){var n=Object(s.a)(e,"base","pow"),c=Object(s.a)(t,"exp","pow"),u=Object(o.makeTypesMatch)(n,c),l=Object(r.a)(u,2),f={a:n=l[0],b:c=l[1]};return a.a.runKernel(i.fc,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({reverse_:function(e,t){var n={x:Object(i.a)(e,"x","reverse")},o={dims:t};return r.a.runKernel(a.tc,n,o)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(15),a=n(21),i=n(30);function o(e,t,n,o){if(null==o&&(o=Object(a.r)(e)),"complex64"===o)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Object(a.A)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Object(a.c)(t);var s=Object(a.N)(t),c=Object(a.N)(n);Object(a.b)(s===c,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(s," values but has ").concat(c)}));for(var u=0;u<n.length;++u){var l=n[u],f=u!==n.length-1||l!==Object(a.N)(t.slice(u));Object(a.b)(n[u]===t[u]||!f,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Object(a.A)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==o?Object(i.toTypedArray)(e,o):Object(a.m)(e,[],!0),r.a.makeTensor(e,t,o)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({transpose_:function(e,t){var n=Object(i.a)(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),o.b(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){o.b(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var s={x:n},c={perm:t};return r.a.runKernel(a.Vc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(52),i="RC_FORM_INTERNAL_HOOKS",o=function(){Object(a.a)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},s=r.createContext({getFieldValue:o,getFieldsValue:o,getFieldError:o,getFieldsError:o,isFieldsTouched:o,isFieldTouched:o,isFieldValidating:o,isFieldsValidating:o,resetFields:o,setFields:o,setFieldsValue:o,validateFields:o,submit:o,getInternalHooks:function(){return o(),{dispatch:o,initEntityValue:o,registerField:o,useSubscribe:o,setInitialValues:o,setCallbacks:o,getFields:o,setValidateMessages:o,setPreserve:o}}});t.b=s},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(39),u=n(11);var l=Object(u.b)({greaterEqual_:function(e,t){var n=Object(s.a)(e,"a","greaterEqual"),u=Object(s.a)(t,"b","greaterEqual"),l=Object(o.makeTypesMatch)(n,u),f=Object(r.a)(l,2);n=f[0],u=f[1],Object(c.a)(n.shape,u.shape);var d={a:n,b:u};return a.a.runKernel(i.ob,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(39),u=n(11);var l=Object(u.b)({lessEqual_:function(e,t){var n=Object(s.a)(e,"a","lessEqual"),u=Object(s.a)(t,"b","lessEqual"),l=Object(o.makeTypesMatch)(n,u),f=Object(r.a)(l,2);n=f[0],u=f[1],Object(c.a)(n.shape,u.shape);var d={a:n,b:u};return a.a.runKernel(i.zb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(i.a)(e,"x","pad");if(0===o.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:t,constantValue:n},c={x:o};return r.a.runKernel(a.dc,c,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(17),a=n(41),i=n(44),o=n(47),s=n(46),c=n(1),u=n(108).a,l=n(224),f=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale||u[null!==t&&void 0!==t?t:"global"],a=this.context,i=t&&a?a[t]:{};return Object(r.a)(Object(r.a)({},n instanceof Function?n():n),i||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?u.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(c.Component);function d(e,t){var n=c.useContext(l.a);return[c.useMemo((function(){var a=t||u[e||"global"],i=e&&n?n[e]:{};return Object(r.a)(Object(r.a)({},"function"===typeof a?a():a),i||{})}),[e,t,n])]}f.defaultProps={componentName:"global"},f.contextType=l.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(67),a=n.n(r);function i(e,t,n,r){var i=a.a.unstable_batchedUpdates?function(e){a.a.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,i,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,i)}}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E})),n.d(t,"i",(function(){return T})),n.d(t,"c",(function(){return I})),n.d(t,"f",(function(){return A})),n.d(t,"e",(function(){return R})),n.d(t,"d",(function(){return D})),n.d(t,"k",(function(){return L})),n.d(t,"g",(function(){return z})),n.d(t,"h",(function(){return q})),n.d(t,"j",(function(){return V})),n.d(t,"b",(function(){return B}));var r=n(8),a=n(28),i=n(2),o=n(4),s=n(0),c=n(143),u=n(170),l=n(9),f=n(389),d=n(390),p=n(391),h=n(392),v=n(393),m=n(394),b=n(395),g=n(396),y=n(397),O=n(398),k=n(399),w=n(400),x=n(401),j=n(402),S=n(403),_=n(404),C=n(405),E=function(){function e(){var t;Object(i.a)(this,e);var n=[f,d,p,h,v,m,b,k,O,g,w,x,j,S,_,C,y],r=(t=[]).concat.apply(t,Object(a.a)(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Object(o.a)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.node,i=[],o=[],s=[],c=a.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?i.push(e[n.name]):"Const"===n.op?o.push(e[n.name]):null!=n.input&&0!==n.input.length||s.push(e[n.name]),e}),{}),u=[],f=[],d={},p={};null!=n&&(d=this.mapSignatureEntries(n.inputs),p=this.mapSignatureEntries(n.outputs));var h=Object.keys(c);h.forEach((function(e){var t=c[e];t.inputNames.forEach((function(e){var n=Object(l.b)(e),a=Object(r.a)(n,1)[0];t.inputs.push(c[a]),c[a].children.push(t)}))})),0===Object.keys(p).length?h.forEach((function(e){var t=c[e];0===t.children.length&&f.push(t)})):Object.keys(p).forEach((function(e){var t=Object(l.b)(e),n=Object(r.a)(t,1)[0],a=c[n];null!=a&&(a.signatureKey=p[e],f.push(a))})),Object.keys(d).length>0?Object.keys(d).forEach((function(e){var t=Object(l.b)(e),n=Object(r.a)(t,1)[0],a=c[n];a&&(a.signatureKey=d[e],u.push(a))})):u=i;var v={};null!=e.library&&null!=e.library.function&&(v=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var m={nodes:c,inputs:u,outputs:f,weights:o,placeholders:i,signature:n,functions:v};return s.length>0&&(m.initNodes=s),m}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=Object(u.b)(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=T(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=T(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=q(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=q(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=A(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=A(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=z(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=z(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=I(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=I(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=B(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=B(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=L(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=L(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=V(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=V(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=R(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=R(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=D(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=D(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=P(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=P(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,a=[],i={};null!=n&&(i=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&a.push(e[n.name]),e}),{}));var o=[],s=[];e.signature.inputArg.forEach((function(e){var t=Object(l.b)(e.name),n=Object(r.a)(t,1)[0],a={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:M(e.type),type:"dtype"}},children:[]};a.signatureKey=e.name,o.push(a),i[n]=a})),Object.keys(i).forEach((function(e){var t=i[e];t.inputNames.forEach((function(e){var n=Object(l.b)(e),a=Object(r.a)(n,1)[0];t.inputs.push(i[a]),i[a].children.push(t)}))}));var c=e.ret;e.signature.outputArg.forEach((function(e){var t=Object(l.b)(c[e.name]),n=Object(r.a)(t,2),a=n[0],o=n[1],u=i[a];null!=u&&(u.defaultOutput=o,s.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:s,weights:a,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function N(t,n){var r=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){var n=Object(s.Me)().global;if("undefined"!==typeof n.atob)return n.atob(t);if("undefined"!==typeof e)return new e(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return n?r:r.toLowerCase()}function T(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?N(a.s,r):n}function I(e,t,n){var r=e[t];return r?r.b:n}function A(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function M(e){switch("string"===typeof e&&(e=c.a[e]),e){case c.a.DT_FLOAT:return"float32";case c.a.DT_INT32:case c.a.DT_INT64:case c.a.DT_INT8:case c.a.DT_UINT8:return"int32";case c.a.DT_BOOL:return"bool";case c.a.DT_DOUBLE:return"float32";case c.a.DT_STRING:return"string";default:return null}}function P(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function R(e,t,n){var r=e[t];return r&&r.type?M(r.type):n}function D(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return M(e)})):n}function F(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function L(e,t,n){var r=e[t];return r&&r.shape?F(r.shape):n}function z(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function q(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return N(e,r)})):n}function V(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return F(e)})):n}function B(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}}).call(this,n(235).Buffer)},function(e,t,n){"use strict";var r=n(320),a=Object.prototype.toString;function i(e){return"[object Array]"===a.call(e)}function o(e){return"undefined"===typeof e}function s(e){return null!==e&&"object"===typeof e}function c(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===a.call(e)}function l(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:c,isUndefined:o,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,a){e[a]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({complex_:function(e,t){var n=Object(i.a)(e,"real","complex"),s=Object(i.a)(t,"imag","complex");o.e(n.shape,s.shape,"real and imag shapes, ".concat(n.shape," and ").concat(s.shape,", ")+"must match in call to tf.complex().");var c={real:n,imag:s};return r.a.runKernel(a.z,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(39),s=n(11);var c=Object(s.b)({logicalAnd_:function(e,t){var n=Object(i.a)(e,"a","logicalAnd","bool"),s=Object(i.a)(t,"b","logicalAnd","bool");Object(o.a)(n.shape,s.shape);var c={a:n,b:s};return r.a.runKernel(a.Eb,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.b)(e,"tensors","stack","string_or_numeric");o.b(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&o.b(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var s=n,c={axis:t};return r.a.runKernel(a.cc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return Q})),n.d(t,"c",(function(){return Y})),n.d(t,"e",(function(){return ne})),n.d(t,"b",(function(){return ae}));var r=n(1),a=n(17),i=n(35),o=n(16),s=n(18),c=n(31),u=n(41),l=n(44),f=n(134),d=n(47),p=n(46),h=n(73),v=n(52),m=n(93);function b(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}var g=n(79),y=n.n(g),O=n(146),k=n(38),w=n(386);function x(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null===n||void 0===n)return;n=n[t[r]]}return n}var j=n(277);function S(e,t,n,r){if(!t.length)return n;var a,i=Object(j.a)(t),o=i[0],u=i.slice(1);return a=e||"number"!==typeof o?Array.isArray(e)?Object(c.a)(e):Object(s.a)({},e):[],r&&void 0===n&&1===u.length?delete a[o][u[0]]:a[o]=S(a[o],u,n,r),a}function _(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!x(e,t.slice(0,-1))?e:S(e,t,n,r)}function C(e){return b(e)}function E(e,t){return x(e,t)}function N(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_(e,t,n,r);return a}function T(e,t){var n={};return t.forEach((function(t){var r=E(e,t);n=N(n,t,r)})),n}function I(e,t){return e&&e.some((function(e){return R(e,t)}))}function A(e){return"object"===Object(k.a)(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function M(e,t){var n=Array.isArray(e)?Object(c.a)(e):Object(s.a)({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],a=t[e],i=A(r)&&A(a);n[e]=i?M(r,a||{}):a})),n):n}function P(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return M(e,t)}),e)}function R(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function D(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&e in t.target?t.target[e]:t}function F(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var a=e[t],i=t-n;return i>0?[].concat(Object(c.a)(e.slice(0,n)),[a],Object(c.a)(e.slice(n,t)),Object(c.a)(e.slice(t+1,r))):i<0?[].concat(Object(c.a)(e.slice(0,t)),Object(c.a)(e.slice(t+1,n+1)),[a],Object(c.a)(e.slice(n+1,r))):e}var L="'${name}' is not a valid ${type}",z={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:L,method:L,array:L,object:L,number:L,date:L,boolean:L,integer:L,float:L,regexp:L,email:L,url:L,hex:L},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},q=w.a;function V(e,t,n,r){var a=Object(s.a)(Object(s.a)({},n),{},{name:t,enum:(n.enum||[]).join(", ")}),i=function(e,t){return function(){return function(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}(e,Object(s.a)(Object(s.a)({},a),t))}};return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(a){var o=t[a];"string"===typeof o?n[a]=i(o,r):o&&"object"===Object(k.a)(o)?(n[a]={},e(o,n[a])):n[a]=o})),n}(P({},z,e))}function B(e,t,n,r,a){return U.apply(this,arguments)}function U(){return(U=Object(O.a)(y.a.mark((function e(t,n,a,i,u){var l,f,d,p,h,v;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=Object(s.a)({},a),f=null,l&&"array"===l.type&&l.defaultField&&(f=l.defaultField,delete l.defaultField),d=new q(Object(o.a)({},t,[l])),p=V(i.validateMessages,t,l,u),d.messages(p),h=[],e.prev=7,e.next=10,Promise.resolve(d.validate(Object(o.a)({},t,n),Object(s.a)({},i)));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),e.t0.errors?h=e.t0.errors.map((function(e,t){var n=e.message;return r.isValidElement(n)?r.cloneElement(n,{key:"error_".concat(t)}):n})):(console.error(e.t0),h=[p.default()]);case 15:if(h.length||!f){e.next=20;break}return e.next=18,Promise.all(n.map((function(e,n){return B("".concat(t,".").concat(n),e,f,i,u)})));case 18:return v=e.sent,e.abrupt("return",v.reduce((function(e,t){return[].concat(Object(c.a)(e),Object(c.a)(t))}),[]));case 20:return e.abrupt("return",h);case 21:case"end":return e.stop()}}),e,null,[[7,12]])})))).apply(this,arguments)}function W(e,t,n,r,a,i){var o,c=e.join("."),u=n.map((function(e){var t=e.validator;return t?Object(s.a)(Object(s.a)({},e),{},{validator:function(e,n,r){var a=!1,i=t(e,n,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){Object(v.a)(!a,"Your validator function has already return a promise. `callback` will be ignored."),a||r.apply(void 0,t)}))}));a=i&&"function"===typeof i.then&&"function"===typeof i.catch,Object(v.a)(a,"`callback` is deprecated. Please return a promise instead."),a&&i.then((function(){r()})).catch((function(e){r(e||" ")}))}}):e}));if(!0===a)o=new Promise(function(){var e=Object(O.a)(y.a.mark((function e(n,a){var o,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<u.length)){e.next=11;break}return e.next=4,B(c,t,u[o],r,i);case 4:if(!(s=e.sent).length){e.next=8;break}return a(s),e.abrupt("return");case 8:o+=1,e.next=1;break;case 11:n([]);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var l=u.map((function(e){return B(c,t,e,r,i)}));o=(a?function(e){return H.apply(this,arguments)}(l):function(e){return G.apply(this,arguments)}(l)).then((function(e){return e.length?Promise.reject(e):[]}))}return o.catch((function(e){return e})),o}function G(){return(G=Object(O.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,Object(c.a)(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(O.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.length&&e(r),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t,n,r,a,i){return"function"===typeof e?e(t,n,"source"in i?{source:i.source}:{}):r!==a}var X=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;(Object(u.a)(this,n),(a=t.call(this,e)).state={resetCount:0},a.cancelRegisterFunc=null,a.mounted=!1,a.touched=!1,a.dirty=!1,a.validatePromise=null,a.errors=[],a.cancelRegister=function(){var e=a.props,t=e.preserve,n=e.isListField,r=e.name;a.cancelRegisterFunc&&a.cancelRegisterFunc(n,t,C(r)),a.cancelRegisterFunc=null},a.getNamePath=function(){var e=a.props,t=e.name,n=e.fieldContext.prefixName,r=void 0===n?[]:n;return void 0!==t?[].concat(Object(c.a)(r),Object(c.a)(t)):[]},a.getRules=function(){var e=a.props,t=e.rules,n=void 0===t?[]:t,r=e.fieldContext;return n.map((function(e){return"function"===typeof e?e(r):e}))},a.refresh=function(){a.mounted&&a.setState((function(e){return{resetCount:e.resetCount+1}}))},a.onStoreChange=function(e,t,n){var r=a.props,i=r.shouldUpdate,o=r.dependencies,s=void 0===o?[]:o,c=r.onReset,u=n.store,l=a.getNamePath(),f=a.getValue(e),d=a.getValue(u),p=t&&I(t,l);switch("valueUpdate"===n.type&&"external"===n.source&&f!==d&&(a.touched=!0,a.dirty=!0,a.validatePromise=null,a.errors=[]),n.type){case"reset":if(!t||p)return a.touched=!1,a.dirty=!1,a.validatePromise=null,a.errors=[],c&&c(),void a.refresh();break;case"setField":if(p){var h=n.data;return"touched"in h&&(a.touched=h.touched),"validating"in h&&!("originRCField"in h)&&(a.validatePromise=h.validating?Promise.resolve([]):null),"errors"in h&&(a.errors=h.errors||[]),a.dirty=!0,void a.reRender()}if(i&&!l.length&&K(i,e,u,f,d,n))return void a.reRender();break;case"dependenciesUpdate":if(s.map(C).some((function(e){return I(n.relatedFields,e)})))return void a.reRender();break;default:if(p||(!s.length||l.length||i)&&K(i,e,u,f,d,n))return void a.reRender()}!0===i&&a.reRender()},a.validateRules=function(e){var t=a.getNamePath(),n=a.getValue(),r=Promise.resolve().then((function(){if(!a.mounted)return[];var i=a.props,o=i.validateFirst,s=void 0!==o&&o,c=i.messageVariables,u=(e||{}).triggerName,l=a.getRules();u&&(l=l.filter((function(e){var t=e.validateTrigger;return!t||b(t).includes(u)})));var f=W(t,n,l,e,s,c);return f.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a.validatePromise===r&&(a.validatePromise=null,a.errors=e,a.reRender())})),f}));return a.validatePromise=r,a.dirty=!0,a.errors=[],a.reRender(),r},a.isFieldValidating=function(){return!!a.validatePromise},a.isFieldTouched=function(){return a.touched},a.isFieldDirty=function(){return a.dirty},a.getErrors=function(){return a.errors},a.isListField=function(){return a.props.isListField},a.isList=function(){return a.props.isList},a.isPreserve=function(){return a.props.preserve},a.getMeta=function(){return a.prevValidating=a.isFieldValidating(),{touched:a.isFieldTouched(),validating:a.prevValidating,errors:a.errors,name:a.getNamePath()}},a.getOnlyChild=function(e){if("function"===typeof e){var t=a.getMeta();return Object(s.a)(Object(s.a)({},a.getOnlyChild(e(a.getControlled(),t,a.props.fieldContext))),{},{isFunction:!0})}var n=Object(h.a)(e);return 1===n.length&&r.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},a.getValue=function(e){var t=a.props.fieldContext.getFieldsValue,n=a.getNamePath();return E(e||t(!0),n)},a.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.props,n=t.trigger,r=t.validateTrigger,i=t.getValueFromEvent,c=t.normalize,u=t.valuePropName,l=t.getValueProps,f=t.fieldContext,d=void 0!==r?r:f.validateTrigger,p=a.getNamePath(),h=f.getInternalHooks,v=f.getFieldsValue,g=h(m.a),y=g.dispatch,O=a.getValue(),k=l||function(e){return Object(o.a)({},u,e)},w=e[n],x=Object(s.a)(Object(s.a)({},e),k(O));x[n]=function(){var e;a.touched=!0,a.dirty=!0;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e=i?i.apply(void 0,n):D.apply(void 0,[u].concat(n)),c&&(e=c(e,O,v(!0))),y({type:"updateValue",namePath:p,value:e}),w&&w.apply(void 0,n)};var j=b(d||[]);return j.forEach((function(e){var t=x[e];x[e]=function(){t&&t.apply(void 0,arguments);var n=a.props.rules;n&&n.length&&y({type:"validateField",namePath:p,triggerName:e})}})),x},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(m.a).initEntityValue)(Object(f.a)(a));return a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(m.a).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,a=this.getOnlyChild(n),i=a.child;return a.isFunction?e=i:r.isValidElement(i)?e=r.cloneElement(i,this.getControlled(i.props)):(Object(v.a)(!i,"`children` of Field is not validate ReactElement."),e=i),r.createElement(r.Fragment,{key:t},e)}}]),n}(r.Component);X.contextType=m.b,X.defaultProps={trigger:"onChange",valuePropName:"value"};var Q=function(e){var t=e.name,n=Object(i.a)(e,["name"]),o=r.useContext(m.b),s=void 0!==t?C(t):void 0,c="keep";return n.isListField||(c="_".concat((s||[]).join("_"))),r.createElement(X,Object(a.a)({key:c,name:s},n,{fieldContext:o}))},Y=function(e){var t=e.name,n=e.initialValue,a=e.children,i=e.rules,o=e.validateTrigger,u=r.useContext(m.b),l=r.useRef({keys:[],id:0}).current;if("function"!==typeof a)return Object(v.a)(!1,"Form.List only accepts function as children."),null;var f=C(u.prefixName)||[],d=[].concat(Object(c.a)(f),Object(c.a)(C(t)));return r.createElement(m.b.Provider,{value:Object(s.a)(Object(s.a)({},u),{},{prefixName:d})},r.createElement(Q,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:i,validateTrigger:o,initialValue:n,isList:!0},(function(e,t){var n=e.value,r=void 0===n?[]:n,i=e.onChange,o=u.getFieldValue,s=function(){return o(d||[])||[]},f={add:function(e,t){var n=s();t>=0&&t<=n.length?(l.keys=[].concat(Object(c.a)(l.keys.slice(0,t)),[l.id],Object(c.a)(l.keys.slice(t))),i([].concat(Object(c.a)(n.slice(0,t)),[e],Object(c.a)(n.slice(t))))):(l.keys=[].concat(Object(c.a)(l.keys),[l.id]),i([].concat(Object(c.a)(n),[e]))),l.id+=1},remove:function(e){var t=s(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(l.keys=l.keys.filter((function(e,t){return!n.has(t)})),i(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=s();e<0||e>=n.length||t<0||t>=n.length||(l.keys=F(l.keys,e,t),i(F(n,e,t)))}}},p=r||[];return Array.isArray(p)||(p=[]),a(p.map((function(e,t){var n=l.keys[t];return void 0===n&&(l.keys[t]=l.id,n=l.keys[t],l.id+=1),{name:t,key:n,isListField:!0}})),f,t)})))},Z=n(26);var J="__@field_split__";function $(e){return e.map((function(e){return"".concat(Object(k.a)(e),":").concat(e)})).join(J)}var ee=function(){function e(){Object(u.a)(this,e),this.kvs=new Map}return Object(l.a)(e,[{key:"set",value:function(e,t){this.kvs.set($(e),t)}},{key:"get",value:function(e){return this.kvs.get($(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete($(e))}},{key:"map",value:function(e){return Object(c.a)(this.kvs.entries()).map((function(t){var n=Object(Z.a)(t,2),r=n[0],a=n[1],i=r.split(J);return e({key:i.map((function(e){var t=e.match(/^([^:]*):(.*)$/),n=Object(Z.a)(t,3),r=n[1],a=n[2];return"number"===r?Number(a):a})),value:a})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),te=function e(t){var n=this;Object(u.a)(this,e),this.formHooked=!1,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===m.a?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve}):(Object(v.a)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.setInitialValues=function(e,t){n.initialValues=e||{},t&&(n.store=P({},e,n.store))},this.getInitialValue=function(e){return E(n.initialValues,e)},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.timeoutId=null,this.warningUnhooked=function(){0},this.getFieldEntities=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ee;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=C(e);return t.get(n)||{INVALIDATE_NAME_PATH:C(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),a=[];return r.forEach((function(n){var r,i="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var o="getMeta"in n?n.getMeta():null;t(o)&&a.push(i)}else a.push(i)})),T(n.store,a.map(C))},this.getFieldValue=function(e){n.warningUnhooked();var t=C(e);return E(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors()}:{name:C(e[n]),errors:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=C(e);return n.getFieldsError([t])[0].errors},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a,i=t[0],o=t[1],s=!1;0===t.length?a=null:1===t.length?Array.isArray(i)?(a=i.map(C),s=!1):(a=null,s=i):(a=i.map(C),s=o);var u=n.getFieldEntities(!0),l=function(e){return e.isFieldTouched()};if(!a)return s?u.every(l):u.some(l);var f=new ee;a.forEach((function(e){f.set(e,[])})),u.forEach((function(e){var t=e.getNamePath();a.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&f.update(n,(function(t){return[].concat(Object(c.a)(t),[e])}))}))}));var d=function(e){return e.some(l)},p=f.map((function(e){return e.value}));return s?p.every(d):p.some(d)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(C);return t.some((function(e){var t=e.getNamePath();return I(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new ee,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var a=t.get(r)||new Set;a.add({entity:e,value:n}),t.set(r,a)}}));var a,i=function(r){r.forEach((function(r){if(void 0!==r.props.initialValue){var a=r.getNamePath();if(void 0!==n.getInitialValue(a))Object(v.a)(!1,"Form already set 'initialValues' with path '".concat(a.join("."),"'. Field can not overwrite it."));else{var i=t.get(a);if(i&&i.size>1)Object(v.a)(!1,"Multiple Field with path '".concat(a.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(i){var o=n.getFieldValue(a);e.skipExist&&void 0!==o||(n.store=N(n.store,a,Object(c.a)(i)[0].value))}}}}))};e.entities?a=e.entities:e.namePathList?(a=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=a).push.apply(n,Object(c.a)(Object(c.a)(r).map((function(e){return e.entity}))))}))):a=r,i(a)},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.store=P({},n.initialValues),n.resetWithFieldInitialValue(),void n.notifyObservers(t,null,{type:"reset"});var r=e.map(C);r.forEach((function(e){var t=n.getInitialValue(e);n.store=N(n.store,e,t)})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"})},this.setFields=function(e){n.warningUnhooked();var t=n.store;e.forEach((function(e){var r=e.name,a=(e.errors,Object(i.a)(e,["name","errors"])),o=C(r);"value"in a&&(n.store=N(n.store,o,a.value)),n.notifyObservers(t,[o],{type:"setField",data:e})}))},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=e.getMeta(),a=Object(s.a)(Object(s.a)({},r),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(a,"originRCField",{value:!0}),a}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===E(n.store,r)&&(n.store=N(n.store,r,t))}},this.registerField=function(e){if(n.fieldEntities.push(e),void 0!==e.props.initialValue){var t=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e}));var i=void 0!==r?r:n.preserve;if(!1===i&&(!t||a.length>1)){var o=e.getNamePath(),s=t?void 0:E(n.initialValues,o);o.length&&n.getFieldValue(o)!==s&&n.fieldEntities.every((function(e){return!R(e.getNamePath(),o)}))&&(n.store=N(n.store,o,s,!0))}}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var a=e.namePath,i=e.triggerName;n.validateFields([a],{triggerName:i})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var a=Object(s.a)(Object(s.a)({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,a)}))}else n.forceRootUpdate()},this.updateValue=function(e,t){var r=C(e),a=n.store;n.store=N(n.store,r,t),n.notifyObservers(a,[r],{type:"valueUpdate",source:"internal"});var i=n.getDependencyChildrenFields(r);i.length&&n.validateFields(i),n.notifyObservers(a,i,{type:"dependenciesUpdate",relatedFields:[r].concat(Object(c.a)(i))});var o=n.callbacks.onValuesChange;o&&o(T(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(Object(c.a)(i)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;e&&(n.store=P(n.store,e)),n.notifyObservers(t,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],a=new ee;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=C(t);a.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(a.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var a=n.getNamePath();n.isFieldDirty()&&a.length&&(r.push(a),e(a))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var a=n.getFields();if(t){var i=new ee;t.forEach((function(e){var t=e.name,n=e.errors;i.set(t,n)})),a.forEach((function(e){e.errors=i.get(e.name)||e.errors}))}r(a.filter((function(t){var n=t.name;return I(e,n)})),a)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,a=r?e.map(C):[],i=[];n.getFieldEntities(!0).forEach((function(o){if(r||a.push(o.getNamePath()),(null===t||void 0===t?void 0:t.recursive)&&r){var c=o.getNamePath();c.every((function(t,n){return e[n]===t||void 0===e[n]}))&&a.push(c)}if(o.props.rules&&o.props.rules.length){var u=o.getNamePath();if(!r||I(a,u)){var l=o.validateRules(Object(s.a)({validateMessages:Object(s.a)(Object(s.a)({},z),n.validateMessages)},t));i.push(l.then((function(){return{name:u,errors:[]}})).catch((function(e){return Promise.reject({name:u,errors:e})})))}}}));var o=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(a,i){e.forEach((function(e,o){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[o]=e,n>0||(t&&i(r),a(r))}))}))})):Promise.resolve([])}(i);n.lastValidatePromise=o,o.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var c=o.then((function(){return n.lastValidatePromise===o?Promise.resolve(n.getFieldsValue(a)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(a),errorFields:t,outOfDate:n.lastValidatePromise!==o})}));return c.catch((function(e){return e})),c},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(r){console.error(r)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t};var ne=function(e){var t=r.useRef(),n=r.useState({}),a=Object(Z.a)(n,2)[1];if(!t.current)if(e)t.current=e;else{var i=new te((function(){a({})}));t.current=i.getForm()}return[t.current]},re=r.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),ae=function(e){var t=e.validateMessages,n=e.onFormChange,a=e.onFormFinish,i=e.children,c=r.useContext(re),u=r.useRef({});return r.createElement(re.Provider,{value:Object(s.a)(Object(s.a)({},c),{},{validateMessages:Object(s.a)(Object(s.a)({},c.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:u.current}),c.triggerFormChange(e,t)},triggerFormFinish:function(e,t){a&&a(e,{values:t,forms:u.current}),c.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(u.current=Object(s.a)(Object(s.a)({},u.current),{},Object(o.a)({},e,t))),c.registerForm(e,t)},unregisterForm:function(e){var t=Object(s.a)({},u.current);delete t[e],u.current=t,c.unregisterForm(e)}})},i)},ie=re,oe=function(e,t){var n=e.name,o=e.initialValues,u=e.fields,l=e.form,f=e.preserve,d=e.children,p=e.component,h=void 0===p?"form":p,v=e.validateMessages,b=e.validateTrigger,g=void 0===b?"onChange":b,y=e.onValuesChange,O=e.onFieldsChange,w=e.onFinish,x=e.onFinishFailed,j=Object(i.a)(e,["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"]),S=r.useContext(ie),_=ne(l),C=Object(Z.a)(_,1)[0],E=C.getInternalHooks(m.a),N=E.useSubscribe,T=E.setInitialValues,I=E.setCallbacks,A=E.setValidateMessages,M=E.setPreserve;r.useImperativeHandle(t,(function(){return C})),r.useEffect((function(){return S.registerForm(n,C),function(){S.unregisterForm(n)}}),[S,C,n]),A(Object(s.a)(Object(s.a)({},S.validateMessages),v)),I({onValuesChange:y,onFieldsChange:function(e){if(S.triggerFormChange(n,e),O){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];O.apply(void 0,[e].concat(r))}},onFinish:function(e){S.triggerFormFinish(n,e),w&&w(e)},onFinishFailed:x}),M(f);var P=r.useRef(null);T(o,!P.current),P.current||(P.current=!0);var R=d,D="function"===typeof d;D&&(R=d(C.getFieldsValue(!0),C));N(!D);var F=r.useRef();r.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==Object(k.a)(e)||"object"!==Object(k.a)(t))return!1;var n=Object.keys(e),r=Object.keys(t),a=new Set([].concat(Object(c.a)(n),Object(c.a)(r)));return Object(c.a)(a).every((function(n){var r=e[n],a=t[n];return"function"===typeof r&&"function"===typeof a||r===a}))})(F.current||[],u||[])||C.setFields(u||[]),F.current=u}),[u,C]);var L=r.useMemo((function(){return Object(s.a)(Object(s.a)({},C),{},{validateTrigger:g})}),[C,g]),z=r.createElement(m.b.Provider,{value:L},R);return!1===h?z:r.createElement(h,Object(a.a)({},j,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),C.submit()},onReset:function(e){var t;e.preventDefault(),C.resetFields(),null===(t=j.onReset)||void 0===t||t.call(j,e)}}),z)},se=r.forwardRef(oe);se.FormProvider=ae,se.Field=Q,se.List=Y,se.useForm=ne;t.d=se},function(e,t,n){"use strict";function r(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(18),a=n(41),i=n(44),o=n(47),s=n(46),c=n(1),u=n(160),l=n(73),f=n(52),d=n(65),p=n(280),h=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).resizeObserver=null,e.childNode=null,e.currentElement=null,e.state={width:0,height:0,offsetHeight:0,offsetWidth:0},e.onResize=function(t){var n=e.props.onResize,a=t[0].target,i=a.getBoundingClientRect(),o=i.width,s=i.height,c=a.offsetWidth,u=a.offsetHeight,l=Math.floor(o),f=Math.floor(s);if(e.state.width!==l||e.state.height!==f||e.state.offsetWidth!==c||e.state.offsetHeight!==u){var d={width:l,height:f,offsetWidth:c,offsetHeight:u};if(e.setState(d),n){var p=c===Math.round(o)?o:c,h=u===Math.round(s)?s:u;Promise.resolve().then((function(){n(Object(r.a)(Object(r.a)({},d),{},{offsetWidth:p,offsetHeight:h}),a)}))}}},e.setChildNode=function(t){e.childNode=t},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.onComponentUpdated()}},{key:"componentDidUpdate",value:function(){this.onComponentUpdated()}},{key:"componentWillUnmount",value:function(){this.destroyObserver()}},{key:"onComponentUpdated",value:function(){if(this.props.disabled)this.destroyObserver();else{var e=Object(u.a)(this.childNode||this);e!==this.currentElement&&(this.destroyObserver(),this.currentElement=e),!this.resizeObserver&&e&&(this.resizeObserver=new p.a(this.onResize),this.resizeObserver.observe(e))}}},{key:"destroyObserver",value:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"render",value:function(){var e=this.props.children,t=Object(l.a)(e);if(t.length>1)Object(f.a)(!1,"Find more than one child node with `children` in ResizeObserver. Will only observe first one.");else if(0===t.length)return Object(f.a)(!1,"`children` of ResizeObserver is empty. Nothing is in observe."),null;var n=t[0];if(c.isValidElement(n)&&Object(d.c)(n)){var r=n.ref;t[0]=c.cloneElement(n,{ref:Object(d.a)(r,this.setChildNode)})}return 1===t.length?t[0]:t.map((function(e,t){return!c.isValidElement(e)||"key"in e&&null!==e.key?e:c.cloneElement(e,{key:"".concat("rc-observer-key","-").concat(t)})}))}}]),n}(c.Component);h.displayName="ResizeObserver",t.a=h},function(e,t,n){"use strict";var r=n(17),a={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},i={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},o={lang:Object(r.a)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},a),timePickerLocale:Object(r.a)({},i)},s="${label} is not a valid ${type}",c={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},DatePicker:o,TimePicker:i,Calendar:o,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:s,method:s,array:s,object:s,number:s,date:s,boolean:s,integer:s,float:s,regexp:s,email:s,url:s,hex:s},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};t.a=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","expandDims","string_or_numeric");o.b(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var s={input:n},c={dim:t};return r.a.runKernel(a.ab,s,c)}})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(60),c=n(11),u=n(22);var l=Object(c.b)({conv2d_:function(e,t,n,c){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],d=arguments.length>6?arguments[6]:void 0,p=Object(i.a)(e,"x","conv2d"),h=Object(i.a)(t,"filter","conv2d"),v=p,m=!1;3===p.rank&&(m=!0,v=Object(u.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),o.b(4===v.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(v.rank,".")})),o.b(4===h.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(h.rank,".")})),null!=d&&o.b(o.v(c),(function(){return"Error in conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(d," but got pad ").concat(c,".")}));var b="NHWC"===l?v.shape[3]:v.shape[1];o.b(b===h.shape[2],(function(){return"Error in conv2d: depth of input (".concat(b,") must match ")+"input depth for filter ".concat(h.shape[2],".")})),o.b(s.h(n,f),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(f,"'")}));var g={x:v,filter:h},y={strides:n,pad:c,dataFormat:l,dilations:f,dimRoundingMode:d},O=r.a.runKernel(a.C,g,y);return m?Object(u.a)(O,[O.shape[1],O.shape[2],O.shape[3]]):O}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(15),a=n(21),i=n(102);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=o(e,"float32"),s=o(e,"float32");return Object(i.a)(n,s)}var c=Object(a.F)(Object(a.N)(e),t);return r.a.makeTensor(c,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({clone_:function(e){var t={x:Object(i.a)(e,"x","clone","string_or_numeric")};return r.a.runKernel(a.qb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","max"),s={x:o},c={reductionIndices:t,keepDims:n};return r.a.runKernel(a.Hb,s,c)}})},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="CloseOutlined";t.a=a.forwardRef(s)},function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var r=function(){return{height:0,opacity:0}},a=function(e){return{height:e.scrollHeight,opacity:1}},i=function(e,t){return!0===(null===t||void 0===t?void 0:t.deadline)||"height"===t.propertyName},o={motionName:"ant-motion-collapse",onAppearStart:r,onEnterStart:r,onAppearActive:a,onEnterActive:a,onLeaveStart:function(e){return{height:e?e.offsetHeight:0}},onLeaveActive:r,onAppearEnd:i,onEnterEnd:i,onLeaveEnd:i,motionDeadline:500},s=function(e,t,n){return void 0!==n?n:"".concat(e,"-").concat(t)};t.a=o},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"a",(function(){return v}));var r=n(8),a=n(53),i=n(225),o=Object(i.a)("kernelRegistry",(function(){return new Map})),s=Object(i.a)("gradRegistry",(function(){return new Map}));function c(e,t){var n=m(e,t);return o.get(n)}function u(e){return s.get(e)}function l(e){for(var t=o.entries(),n=[];;){var a=t.next(),i=a.done,s=a.value;if(i)break;var c=Object(r.a)(s,2),u=c[0],l=c[1],f=u.split("_");Object(r.a)(f,1)[0]===e&&n.push(l)}return n}function f(e){var t=e.kernelName,n=e.backendName,r=m(t,n);o.has(r)&&console.warn("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),o.set(r,e)}function d(e){var t=e.kernelName;s.has(t)&&Object(a.c)().getBool("DEBUG")&&console.warn("Overriding the gradient for '".concat(t,"'")),s.set(t,e)}function p(e,t){var n=m(e,t);if(!o.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));o.delete(n)}function h(e){if(!s.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));s.delete(e)}function v(e,t){l(e).forEach((function(e){f(Object.assign({},e,{backendName:t}))}))}function m(e,t){return"".concat(t,"_").concat(e)}},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="LoadingOutlined";t.a=a.forwardRef(s)},function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(31);function a(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}function i(e,t){var n=t.labelInValue,r=t.combobox,a=new Map;if(void 0===e||""===e&&r)return[[],a];var i=Array.isArray(e)?e:[e],o=i;return n&&(o=i.filter((function(e){return null!==e})).map((function(e){var t=e.key,n=e.value,r=void 0!==n?n:t;return a.set(r,e),r}))),[o,a]}function o(e,t){var n=t.optionLabelProp,r=t.labelInValue,a=t.prevValueMap,i=t.options,o=t.getLabeledValue,s=e;return r&&(s=s.map((function(e){return o(e,{options:i,prevValueMap:a,labelInValue:r,optionLabelProp:n})}))),s}function s(e,t){var n,a=Object(r.a)(t);for(n=e.length-1;n>=0&&e[n].disabled;n-=1);var i=null;return-1!==n&&(i=a[n],a.splice(n,1)),{values:a,removedValue:i}}var c="undefined"!==typeof window&&window.document&&window.document.documentElement,u=0;function l(){var e;return c?(e=u,u+=1):e="TEST_OR_SSR",e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return v}));var r=n(3),a=n.n(r),i=n(12),o=n(0);function s(e,t){return c(e,t)}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(h(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=e[o],u=c(s,t,n,r);i[o]=u}return r.delete(e),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return l(e,t)}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(h(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=l(e.map((function(e){return e[r]})),t,n);i[r]=a};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function f(e){return null===e?null:h(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function d(e,t){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(a.a.mark((function e(t,n){var r,i,s,u,l,f,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map,c(t,n,r),i=0,s=Array.from(r.keys());case 3:if(!(i<s.length)){e.next=14;break}if(u=s[i],l=r.get(u),!o.qi.isPromise(l)){e.next=11;break}return e.next=9,l;case 9:f=e.sent,r.set(u,f);case 11:i++,e.next=3;break;case 14:return d=c(t,n,r),e.abrupt("return",d);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof o.id))}function v(e){return null==e||(null===(t=e)||"object"!==typeof t&&"function"!==typeof t)||Array.isArray(e)||"object"===typeof e&&e instanceof o.id||o.qi.isTypedArray(e);var t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({log_:function(e){var t={x:Object(i.a)(e,"x","log")};return r.a.runKernel(a.Bb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(i.a)(e,"x","split"),s={x:o},c={numOrSizeSplits:t,axis:n};return r.a.runKernel(a.Jc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),a=n(21),i=n(91);function o(e,t){Object(a.d)(e);var n=Object(r.c)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Object(i.a)(e,null,n,t)}},function(e,t,n){var r=n(330),a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();e.exports=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(28);function a(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||i)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function i(e,t){return e>t?1:e<t?-1:0}function o(e,t,n,r,a){return u(e,t,n,r,a,0)}function s(e,t,n,r,a,i){return u(e,t,n,r,a,0,!1,i,!0)}function c(e,t,n,r,a,i){return u(e,t,n,r,a,i,!0)}function u(e,t,n,i,o,s){for(var c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=[],v=0;v<t.length;v++)t[v]>o&&h.push({score:t[v],boxIndex:v,suppressBeginIndex:0});h.sort(d);for(var m=s>0?-.5/s:0,b=[],g=[];b.length<n&&h.length>0;){var y=h.pop(),O=y.score,k=y.boxIndex,w=y.suppressBeginIndex;if(O<o)break;for(var x=!1,j=b.length-1;j>=w;--j){var S=l(e,k,b[j]);if(S>=i){x=!0;break}if(y.score=y.score*f(i,m,S),y.score<=o)break}y.suppressBeginIndex=b.length,x||(y.score===O?(b.push(k),g.push(y.score)):y.score>o&&a(h,y,d))}var _=b.length,C=n-_;u&&C>0&&(b.push.apply(b,Object(r.a)(new Array(C).fill(0))),g.push.apply(g,Object(r.a)(new Array(C).fill(0))));var E={selectedIndices:b};return c&&(E.selectedScores=g),p&&(E.validOutputs=_),E}function l(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),p=(s-i)*(c-o),h=(f-u)*(d-l);if(p<=0||h<=0)return 0;var v=Math.max(i,u),m=Math.max(o,l),b=Math.min(s,f),g=Math.min(c,d),y=Math.max(b-v,0)*Math.max(g-m,0);return y/(p+h-y)}function f(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function d(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(39),u=n(32),l=n(11);var f=Object(l.b)({maximum_:function(e,t){var n=Object(s.a)(e,"a","maximum"),l=Object(s.a)(t,"b","maximum"),f=Object(o.makeTypesMatch)(n,l),d=Object(r.a)(f,2);n=d[0],l=d[1],"bool"===n.dtype&&(n=Object(u.a)(n,"int32"),l=Object(u.a)(l,"int32")),Object(c.a)(n.shape,l.shape);var p={a:n,b:l};return a.a.runKernel(i.Nb,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11),c=n(22);var u=Object(s.b)({depthwiseConv2d_:function(e,t,n,s){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6?arguments[6]:void 0,d=Object(i.a)(e,"x","depthwiseConv2d"),p=Object(i.a)(t,"filter","depthwiseConv2d"),h=d,v=!1;3===d.rank&&(v=!0,h=Object(c.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.b(4===h.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(h.rank,".")})),o.b(4===p.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")})),o.b(h.shape[3]===p.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(h.shape[3],") must match the inChannels dimension in ")+"filter ".concat(p.shape[2],".")})),null!=f&&o.b(o.v(s),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(f," but got pad ").concat(s,".")}));var m={x:h,filter:p},b={strides:n,pad:s,dataFormat:u,dilations:l,dimRoundingMode:f},g=r.a.runKernel(a.O,m,b);return v?Object(c.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(39),u=n(11);var l=Object(u.b)({equal_:function(e,t){var n=Object(s.a)(e,"a","equal"),u=Object(s.a)(t,"b","equal"),l=Object(o.makeTypesMatch)(n,u),f=Object(r.a)(l,2);n=f[0],u=f[1],Object(c.a)(n.shape,u.shape);var d={a:n,b:u};return a.a.runKernel(i.X,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(21),i=n(102),o=n(112);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=s(e,"float32"),c=Object(o.a)(e,"float32");return Object(i.a)(n,c)}var u=Object(a.D)(Object(a.N)(e),t);return r.a.makeTensor(u,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({relu_:function(e){var t={x:Object(i.a)(e,"x","relu")};return r.a.runKernel(a.mc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","step"),o={x:n},s={alpha:t};return r.a.runKernel(a.Nc,o,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","unstack","string_or_numeric");o.b(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var s={value:n},c={axis:t};return r.a.runKernel(a.Xc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(22);var c=n(11);var u=Object(c.b)({batchNorm_:function(e,t,n,c,u,l){null==l&&(l=.001);var f,d,p=Object(i.a)(e,"x","batchNorm"),h=Object(i.a)(t,"mean","batchNorm"),v=Object(i.a)(n,"variance","batchNorm");null!=u&&(f=Object(i.a)(u,"scale","batchNorm")),null!=c&&(d=Object(i.a)(c,"offset","batchNorm")),o.b(h.rank===v.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),o.b(null==d||h.rank===d.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),o.b(null==f||h.rank===f.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var m=function(e){return 0===e.rank||1===e.rank?Object(s.a)(e,[1,1,1,e.size]):2===e.rank?Object(s.a)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Object(s.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(p),b={x:m,scale:f,offset:d,mean:h,variance:v},g={varianceEpsilon:l},y=r.a.runKernel(a.ib,b,g);return Object(s.a)(y,p.shape)}})},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(18),a="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),i="aria-",o="data-";function s(e,t){return 0===e.indexOf(t)}function c(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:Object(r.a)({},n);var c={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||s(n,i))||t.data&&s(n,o)||t.attr&&a.includes(n))&&(c[n]=e[n])})),c}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({sigmoid_:function(e){var t={x:Object(i.a)(e,"x","sigmoid")};return r.a.runKernel(a.Ac,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({tile_:function(e,t){var n=Object(i.a)(e,"x","tile","string_or_numeric");o.b(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var s={x:n},c={reps:t};return r.a.runKernel(a.Tc,s,c)}})},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="CloseCircleFilled";t.a=a.forwardRef(s)},function(e,t,n){"use strict";var r=n(17),a=n(18),i=n(26),o=n(35),s=n(1),c=n(23),u=n.n(c),l=n(107),f=void 0;function d(e,t){var n=e.prefixCls,i=e.invalidate,c=e.item,d=e.renderItem,p=e.responsive,h=e.registerSize,v=e.itemKey,m=e.className,b=e.style,g=e.children,y=e.display,O=e.order,k=e.component,w=void 0===k?"div":k,x=Object(o.a)(e,["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","className","style","children","display","order","component"]),j=p&&!y;function S(e){h(v,e)}s.useEffect((function(){return function(){S(null)}}),[]);var _,C=d&&c!==f?d(c):g;i||(_={opacity:j?0:1,height:j?0:f,overflowY:j?"hidden":f,order:p?O:f,pointerEvents:j?"none":f,position:j?"absolute":f});var E={};j&&(E["aria-hidden"]=!0);var N=s.createElement(w,Object(r.a)({className:u()(!i&&n,m),style:Object(a.a)(Object(a.a)({},_),b)},E,x,{ref:t}),C);return p&&(N=s.createElement(l.a,{onResize:function(e){S(e.offsetWidth)}},N)),N}var p=s.forwardRef(d);p.displayName="Item";var h=p,v=n(50);var m=function(e,t){var n=s.useContext(y);if(!n){var a=e.component,i=void 0===a?"div":a,c=Object(o.a)(e,["component"]);return s.createElement(i,Object(r.a)({},c,{ref:t}))}var l=n.className,f=Object(o.a)(n,["className"]),d=e.className,p=Object(o.a)(e,["className"]);return s.createElement(y.Provider,{value:null},s.createElement(h,Object(r.a)({ref:t,className:u()(l,d)},f,p)))},b=s.forwardRef(m);b.displayName="RawItem";var g=b,y=s.createContext(null),O="responsive",k="invalidate";function w(e){return"+ ".concat(e.length," ...")}function x(e,t){var n=e.prefixCls,c=void 0===n?"rc-overflow":n,f=e.data,d=void 0===f?[]:f,p=e.renderItem,m=e.renderRawItem,b=e.itemKey,g=e.itemWidth,x=void 0===g?10:g,j=e.ssr,S=e.style,_=e.className,C=e.maxCount,E=e.renderRest,N=e.renderRawRest,T=e.suffix,I=e.component,A=void 0===I?"div":I,M=e.itemComponent,P=e.onVisibleChange,R=Object(o.a)(e,["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"]),D=function(){var e=Object(s.useState)({}),t=Object(i.a)(e,2)[1],n=Object(s.useRef)([]),r=Object(s.useRef)(!1),a=0,o=0;return Object(s.useEffect)((function(){return function(){r.current=!0}}),[]),function(e){var i=a;return a+=1,n.current.length<i+1&&(n.current[i]=e),[n.current[i],function(e){n.current[i]="function"===typeof e?e(n.current[i]):e,v.a.cancel(o),o=Object(v.a)((function(){r.current||t({})}))}]}}(),F="full"===j,L=D(null),z=Object(i.a)(L,2),q=z[0],V=z[1],B=q||0,U=D(new Map),W=Object(i.a)(U,2),G=W[0],H=W[1],K=D(0),X=Object(i.a)(K,2),Q=X[0],Y=X[1],Z=D(0),J=Object(i.a)(Z,2),$=J[0],ee=J[1],te=D(0),ne=Object(i.a)(te,2),re=ne[0],ae=ne[1],ie=Object(s.useState)(null),oe=Object(i.a)(ie,2),se=oe[0],ce=oe[1],ue=Object(s.useState)(null),le=Object(i.a)(ue,2),fe=le[0],de=le[1],pe=s.useMemo((function(){return null===fe&&F?Number.MAX_SAFE_INTEGER:fe||0}),[fe,q]),he=Object(s.useState)(!1),ve=Object(i.a)(he,2),me=ve[0],be=ve[1],ge="".concat(c,"-item"),ye=Math.max(Q,$),Oe=d.length&&C===O,ke=C===k,we=Oe||"number"===typeof C&&d.length>C,xe=Object(s.useMemo)((function(){var e=d;return Oe?e=null===q&&F?d:d.slice(0,Math.min(d.length,B/x)):"number"===typeof C&&(e=d.slice(0,C)),e}),[d,x,q,C,Oe]),je=Object(s.useMemo)((function(){return Oe?d.slice(pe+1):d.slice(xe.length)}),[d,xe,Oe,pe]),Se=Object(s.useCallback)((function(e,t){var n;return"function"===typeof b?b(e):null!==(n=b&&(null===e||void 0===e?void 0:e[b]))&&void 0!==n?n:t}),[b]),_e=Object(s.useCallback)(p||function(e){return e},[p]);function Ce(e,t){de(e),t||(be(e<d.length-1),null===P||void 0===P||P(e))}function Ee(e,t){H((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function Ne(e){return G.get(Se(xe[e],e))}s.useLayoutEffect((function(){if(B&&ye&&xe){var e=re,t=xe.length,n=t-1;if(!t)return Ce(0),void ce(null);for(var r=0;r<t;r+=1){var a=Ne(r);if(void 0===a){Ce(r-1,!0);break}if(e+=a,0===n&&e<=B||r===n-1&&e+Ne(n)<=B){Ce(n),ce(null);break}if(e+ye>B){Ce(r-1),ce(e-a-re+$);break}}T&&Ne(0)+re>B&&ce(null)}}),[B,G,$,re,Se,xe]);var Te=me&&!!je.length,Ie={};null!==se&&Oe&&(Ie={position:"absolute",left:se,top:0});var Ae,Me={prefixCls:ge,responsive:Oe,component:M,invalidate:ke},Pe=m?function(e,t){var n=Se(e,t);return s.createElement(y.Provider,{key:n,value:Object(a.a)(Object(a.a)({},Me),{},{order:t,item:e,itemKey:n,registerSize:Ee,display:t<=pe})},m(e,t))}:function(e,t){var n=Se(e,t);return s.createElement(h,Object(r.a)({},Me,{order:t,key:n,item:e,renderItem:_e,itemKey:n,registerSize:Ee,display:t<=pe}))},Re={order:Te?pe:Number.MAX_SAFE_INTEGER,className:"".concat(ge,"-rest"),registerSize:function(e,t){ee(t),Y($)},display:Te};if(N)N&&(Ae=s.createElement(y.Provider,{value:Object(a.a)(Object(a.a)({},Me),Re)},N(je)));else{var De=E||w;Ae=s.createElement(h,Object(r.a)({},Me,Re),"function"===typeof De?De(je):De)}var Fe=s.createElement(A,Object(r.a)({className:u()(!ke&&c,_),style:S,ref:t},R),xe.map(Pe),we?Ae:null,T&&s.createElement(h,Object(r.a)({},Me,{order:pe,className:"".concat(ge,"-suffix"),registerSize:function(e,t){ae(t)},display:!0,style:Ie}),T));return Oe&&(Fe=s.createElement(l.a,{onResize:function(e,t){V(t.clientWidth)}},Fe)),Fe}var j=s.forwardRef(x);j.displayName="Overflow",j.Item=g,j.RESPONSIVE=O,j.INVALIDATE=k;var S=j;t.a=S},function(e,t,n){"use strict";var r=n(16),a=n(26),i=n(17),o=n(1),s=n(300),c=n(87),u=n(23),l=n.n(u),f=n(286),d={adjustX:1,adjustY:1},p={adjustX:0,adjustY:0},h=[0,0];function v(e){return"boolean"===typeof e?e?d:p:Object(i.a)(Object(i.a)({},p),e)}var m=n(66),b=n(141),g=n(78),y=(Object(g.a)("success","processing","error","default","warning"),Object(g.a)("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime")),O=n(116),k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},w=new RegExp("^(".concat(y.join("|"),")(-inverse)?$"));function x(e,t){var n=e.type;if((!0===n.__ANT_BUTTON||!0===n.__ANT_SWITCH||!0===n.__ANT_CHECKBOX||"button"===e.type)&&e.props.disabled){var r=function(e,t){var n={},r=Object(i.a)({},e);return t.forEach((function(t){e&&t in e&&(n[t]=e[t],delete r[t])})),{picked:n,omitted:r}}(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),a=r.picked,s=r.omitted,c=Object(i.a)(Object(i.a)({display:"inline-block"},a),{cursor:"not-allowed",width:e.props.block?"100%":null}),u=Object(i.a)(Object(i.a)({},s),{pointerEvents:"none"}),f=Object(m.a)(e,{style:u,className:null});return o.createElement("span",{style:c,className:l()(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},f)}return e}var j=o.forwardRef((function(e,t){var n,u=o.useContext(b.b),d=u.getPopupContainer,p=u.getPrefixCls,g=u.direction,y=Object(c.a)(!1,{value:e.visible,defaultValue:e.defaultVisible}),j=Object(a.a)(y,2),S=j[0],_=j[1],C=function(){var t=e.title,n=e.overlay;return!t&&!n&&0!==t},E=function(){var t=e.builtinPlacements,n=e.arrowPointAtCenter,r=e.autoAdjustOverflow;return t||function(e){var t=e.arrowWidth,n=void 0===t?4:t,r=e.horizontalArrowShift,a=void 0===r?16:r,o=e.verticalArrowShift,s=void 0===o?8:o,c=e.autoAdjustOverflow,u={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(a+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(s+n)]},topRight:{points:["br","tc"],offset:[a+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(s+n)]},bottomRight:{points:["tr","bc"],offset:[a+n,4]},rightBottom:{points:["bl","cr"],offset:[4,s+n]},bottomLeft:{points:["tl","bc"],offset:[-(a+n),4]},leftBottom:{points:["br","cl"],offset:[-4,s+n]}};return Object.keys(u).forEach((function(t){u[t]=e.arrowPointAtCenter?Object(i.a)(Object(i.a)({},u[t]),{overflow:v(c),targetOffset:h}):Object(i.a)(Object(i.a)({},f.a[t]),{overflow:v(c)}),u[t].ignoreShake=!0})),u}({arrowPointAtCenter:n,autoAdjustOverflow:r})},N=e.getPopupContainer,T=k(e,["getPopupContainer"]),I=e.prefixCls,A=e.openClassName,M=e.getTooltipContainer,P=e.overlayClassName,R=e.color,D=e.overlayInnerStyle,F=e.children,L=p("tooltip",I),z=p(),q=S;!("visible"in e)&&C()&&(q=!1);var V,B=x(Object(m.b)(F)?F:o.createElement("span",null,F),L),U=B.props,W=l()(U.className,Object(r.a)({},A||"".concat(L,"-open"),!0)),G=l()(P,(n={},Object(r.a)(n,"".concat(L,"-rtl"),"rtl"===g),Object(r.a)(n,"".concat(L,"-").concat(R),R&&w.test(R)),n)),H=D;return R&&!w.test(R)&&(H=Object(i.a)(Object(i.a)({},D),{background:R}),V={background:R}),o.createElement(s.a,Object(i.a)({},T,{prefixCls:L,overlayClassName:G,getTooltipContainer:N||M||d,ref:t,builtinPlacements:E(),overlay:function(){var t=e.title,n=e.overlay;return 0===t?t:n||t||""}(),visible:q,onVisibleChange:function(t){var n;_(!C()&&t),C()||null===(n=e.onVisibleChange)||void 0===n||n.call(e,t)},onPopupAlign:function(e,t){var n=E(),r=Object.keys(n).filter((function(e){return n[e].points[0]===t.points[0]&&n[e].points[1]===t.points[1]}))[0];if(r){var a=e.getBoundingClientRect(),i={top:"50%",left:"50%"};r.indexOf("top")>=0||r.indexOf("Bottom")>=0?i.top="".concat(a.height-t.offset[1],"px"):(r.indexOf("Top")>=0||r.indexOf("bottom")>=0)&&(i.top="".concat(-t.offset[1],"px")),r.indexOf("left")>=0||r.indexOf("Right")>=0?i.left="".concat(a.width-t.offset[0],"px"):(r.indexOf("right")>=0||r.indexOf("Left")>=0)&&(i.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(i.left," ").concat(i.top)}},overlayInnerStyle:H,arrowContent:o.createElement("span",{className:"".concat(L,"-arrow-content"),style:V}),motion:{motionName:Object(O.b)(z,"zoom-big-fast",e.transitionName),motionDeadline:1e3}}),q?Object(m.a)(B,{className:W}):B)}));j.displayName="Tooltip",j.defaultProps={placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0};t.a=j},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));n(17);var r=n(1),a=n(214),i=function(e){return r.createElement(s,null,(function(t){var n=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return r.createElement(a.a,{image:a.a.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return r.createElement(a.a,{image:a.a.PRESENTED_IMAGE_SIMPLE,className:"".concat(n,"-small")});default:return r.createElement(a.a,null)}}))},o=r.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},renderEmpty:i}),s=o.Consumer},function(e,t,n){!function(e,t,n,r){"use strict";function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var i=a(t),o=a(n),s=a(r),c=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},u=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},l=function(e,t){return{startTime:t,type:"setValue",value:e}},f=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},d=function(e,t,n){var r=n.startTime,a=n.target,i=n.timeConstant;return a+(t-a)*Math.exp((r-e)/i)},p=function(e){return"exponentialRampToValue"===e.type},h=function(e){return"linearRampToValue"===e.type},v=function(e){return p(e)||h(e)},m=function(e){return"setValue"===e.type},b=function(e){return"setValueCurve"===e.type},g=function e(t,n,r,a){var i=t[n];return void 0===i?a:v(i)||m(i)?i.value:b(i)?i.values[i.values.length-1]:d(r,e(t,n-1,i.startTime,a),i)},y=function(e,t,n,r,a){return void 0===n?[r.insertTime,a]:v(n)?[n.endTime,n.value]:m(n)?[n.startTime,n.value]:b(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,g(e,t-1,n.startTime,a)]},O=function(e){return"cancelAndHold"===e.type},k=function(e){return"cancelScheduledValues"===e.type},w=function(e){return O(e)||k(e)?e.cancelTime:p(e)||h(e)?e.endTime:e.startTime},x=function(e,t,n,r){var a=r.endTime,i=r.value;return n===i?i:0<n&&0<i||n<0&&i<0?n*Math.pow(i/n,(e-t)/(a-t)):0},j=function(e,t,n,r){return n+(e-t)/(r.endTime-t)*(r.value-n)},S=function(e,t){var n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]},_=function(e,t){var n=t.duration,r=t.startTime,a=t.values,i=(e-r)/n*(a.length-1);return S(a,i)},C=function(e){return"setTarget"===e.type},E=function(e){function t(e){o.default(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return s.default(t,[{key:e,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=w(e);if(O(e)||k(e)){var n=this._automationEvents.findIndex((function(n){return k(e)&&b(n)?n.startTime+n.duration>=t:w(n)>=t})),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),O(e)){var a=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&v(r)){if(C(a))throw new Error("The internal list is malformed.");var i=b(a)?a.startTime+a.duration:w(a),o=b(a)?a.values[a.values.length-1]:a.value,s=p(r)?x(t,i,o,r):j(t,i,o,r),d=p(r)?c(s,t,this._currenTime):u(s,t,this._currenTime);this._automationEvents.push(d)}void 0!==a&&C(a)&&this._automationEvents.push(l(this.getValue(t),t)),void 0!==a&&b(a)&&a.startTime+a.duration>t&&(this._automationEvents[this._automationEvents.length-1]=f(new Float32Array([6,7]),a.startTime,t-a.startTime))}}else{var m=this._automationEvents.findIndex((function(e){return w(e)>t})),g=-1===m?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[m-1];if(void 0!==g&&b(g)&&w(g)+g.duration>t)return!1;var y=p(e)?c(e.value,e.endTime,this._currenTime):h(e)?u(e.value,t,this._currenTime):e;if(-1===m)this._automationEvents.push(y);else{if(b(e)&&t+e.duration>w(this._automationEvents[m]))return!1;this._automationEvents.splice(m,0,y)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex((function(t){return w(t)>e}));if(t>1){var n=this._automationEvents.slice(t-1),r=n[0];C(r)&&n.unshift(l(g(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var t=this._automationEvents.findIndex((function(t){return w(t)>e})),n=this._automationEvents[t],r=(-1===t?this._automationEvents.length:t)-1,a=this._automationEvents[r];if(void 0!==a&&C(a)&&(void 0===n||!v(n)||n.insertTime>e))return d(e,g(this._automationEvents,r-1,a.startTime,this._defaultValue),a);if(void 0!==a&&m(a)&&(void 0===n||!v(n)))return a.value;if(void 0!==a&&b(a)&&(void 0===n||!v(n)||a.startTime+a.duration>e))return e<a.startTime+a.duration?_(e,a):a.values[a.values.length-1];if(void 0!==a&&v(a)&&(void 0===n||!v(n)))return a.value;if(void 0!==n&&p(n)){var o=y(this._automationEvents,r,a,n,this._defaultValue),s=i.default(o,2),c=s[0],u=s[1];return x(e,c,u,n)}if(void 0!==n&&h(n)){var l=y(this._automationEvents,r,a,n,this._defaultValue),f=i.default(l,2),O=f[0],k=f[1];return j(e,O,k,n)}return this._defaultValue}}]),t}(Symbol.iterator),N=function(e){return{cancelTime:e,type:"cancelAndHold"}},T=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},I=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},A=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},M=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}};e.AutomationEventList=E,e.createCancelAndHoldAutomationEvent=N,e.createCancelScheduledValuesAutomationEvent=T,e.createExponentialRampToValueAutomationEvent=I,e.createLinearRampToValueAutomationEvent=A,e.createSetTargetAutomationEvent=M,e.createSetValueAutomationEvent=l,e.createSetValueCurveAutomationEvent=f,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(574),n(580),n(581))},function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(r||(r={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","mean"),s={x:o},c={axis:t,keepDims:n};return r.a.runKernel(a.Ob,s,c)}})},function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,c,"next",e)}function c(e){r(o,a,i,s,c,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(17),a=n(108),i=Object(r.a)({},a.a.Modal);function o(e){i=e?Object(r.a)(Object(r.a)({},i),e):Object(r.a)({},a.a.Modal)}function s(){return i}},function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return g})),n.d(t,"a",(function(){return y}));var r=n(16),a=n(277),i=n(31),o=n(38),s=n(18),c=n(52),u=n(119);function l(e,t){var n,r=e.key;return"value"in e&&(n=e.value),null!==r&&void 0!==r?r:void 0!==n?n:"rc-index-key-".concat(t)}function f(e){var t=[];return function e(n,r){n.forEach((function(n){r||!("options"in n)?t.push({key:l(n,t.length),groupOption:r,data:n}):(t.push({key:l(n,t.length),group:!0,data:n}),e(n.options,!0))}))}(e,!1),t}function d(e){var t=Object(s.a)({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Object(c.a)(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.prevValueOptions,a=void 0===r?[]:r,i=new Map;return t.forEach((function(e){if(!e.group){var t=e.data;i.set(t.value,t)}})),e.map((function(e){var t=i.get(e);return t||(t=Object(s.a)({},a.find((function(t){return t._INTERNAL_OPTION_VALUE_===e})))),d(t)}))}var h=function(e,t){var n=t.options,r=t.prevValueMap,a=t.labelInValue,i=t.optionLabelProp,s=p([e],n)[0],u={value:e},l=a?r.get(e):void 0;return l&&"object"===Object(o.a)(l)&&"label"in l?(u.label=l.label,s&&"string"===typeof l.label&&"string"===typeof s[i]&&l.label.trim()!==s[i].trim()&&Object(c.a)(!1,"`label` of `value` is not same as `label` in Select options.")):s&&i in s?u.label=s[i]:(u.label=e,u.isCacheable=!0),u.key=u.value,u};function v(e){return Object(u.d)(e).join("")}function m(e,t,n){var r,a=n.optionFilterProp,o=n.filterOption,c=[];return!1===o?Object(i.a)(t):(r="function"===typeof o?o:function(e){return function(t,n){var r=t.toLowerCase();return"options"in n?v(n.label).toLowerCase().includes(r):v(n[e]).toLowerCase().includes(r)}}(a),t.forEach((function(t){if("options"in t)if(r(e,t))c.push(t);else{var n=t.options.filter((function(t){return r(e,t)}));n.length&&c.push(Object(s.a)(Object(s.a)({},t),{},{options:n}))}else r(e,d(t))&&c.push(t)})),c)}function b(e,t){if(!t||!t.length)return null;var n=!1;var r=function e(t,r){var o=Object(a.a)(r),s=o[0],c=o.slice(1);if(!s)return[t];var u=t.split(s);return n=n||u.length>1,u.reduce((function(t,n){return[].concat(Object(i.a)(t),Object(i.a)(e(n,c)))}),[]).filter((function(e){return e}))}(e,t);return n?r:null}function g(e,t){return p([e],t)[0].disabled}function y(e,t,n,a){var o=Object(u.d)(t).slice().sort(),s=Object(i.a)(e),c=new Set;return e.forEach((function(e){e.options?e.options.forEach((function(e){c.add(e.value)})):c.add(e.value)})),o.forEach((function(e){var t,i=a?e.value:e;c.has(i)||s.push(a?(t={},Object(r.a)(t,n,e.label),Object(r.a)(t,"value",i),t):{value:i})})),s}},function(e,t,n){"use strict";var r,a,i,o,s;n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(i||(i={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(o||(o={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(s||(s={}));var c={float32:o,int32:a,bool:i,complex64:s};function u(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return c[e][t]}function l(e){return u(e,"int32")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({batchToSpaceND_:function(e,t,n){var s=Object(i.a)(e,"x","batchToSpaceND"),c=t.reduce((function(e,t){return e*t}));o.b(s.rank>=1+t.length,(function(){return"input rank is ".concat(s.rank," but should be > than blockShape.length ").concat(t.length)})),o.b(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),o.b(s.shape[0]%c===0,(function(){return"input tensor batch is ".concat(s.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(c)}));var u={x:s},l={blockShape:t,crops:n};return r.a.runKernel(a.t,u,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=Object(i.a)(e,"x","gather"),c=Object(i.a)(t,"indices","gather","int32"),u={x:s,indices:c},l={axis:n,batchDims:o};return r.a.runKernel(a.mb,u,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(39),u=n(11);var l=Object(u.b)({less_:function(e,t){var n=Object(s.a)(e,"a","less"),u=Object(s.a)(t,"b","less"),l=Object(o.makeTypesMatch)(n,u),f=Object(r.a)(l,2);n=f[0],u=f[1],Object(c.a)(n.shape,u.shape);var d={a:n,b:u};return a.a.runKernel(i.yb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({logicalNot_:function(e){var t={x:Object(i.a)(e,"x","logicalNot","bool")};return r.a.runKernel(a.Fb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(39),u=n(32),l=n(11);var f=Object(l.b)({minimum_:function(e,t){var n=Object(s.a)(e,"a","minimum"),l=Object(s.a)(t,"b","minimum"),f=Object(o.makeTypesMatch)(n,l),d=Object(r.a)(f,2);n=d[0],l=d[1],"bool"===n.dtype&&(n=Object(u.a)(n,"int32"),l=Object(u.a)(l,"int32")),Object(c.a)(n.shape,l.shape);var p={a:n,b:l};return a.a.runKernel(i.Qb,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(39),u=n(11);var l=Object(u.b)({notEqual_:function(e,t){var n=Object(s.a)(e,"a","notEqual"),u=Object(s.a)(t,"b","notEqual"),l=Object(o.makeTypesMatch)(n,u),f=Object(r.a)(l,2);n=f[0],u=f[1],Object(c.a)(n.shape,u.shape);var d={a:n,b:u};return a.a.runKernel(i.Zb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({spaceToBatchND_:function(e,t,n){var s=Object(i.a)(e,"x","spaceToBatchND");o.b(s.rank>=1+t.length,(function(){return"input rank ".concat(s.rank," should be > than [blockShape] ").concat(t.length)})),o.b(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),o.b(s.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(s.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var c={x:s},u={blockShape:t,paddings:n};return r.a.runKernel(a.Hc,c,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(39),u=n(11);var l=Object(u.b)({squaredDifference_:function(e,t){var n=Object(s.a)(e,"a","squaredDifference"),u=Object(s.a)(t,"b","squaredDifference"),l=Object(o.makeTypesMatch)(n,u),f=Object(r.a)(l,2);n=f[0],u=f[1],Object(c.a)(n.shape,u.shape);var d={a:n,b:u};return a.a.runKernel(i.Mc,d,{})}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),a=n(21),i=n(11),o=n(22);var s=Object(i.b)({squeeze_:function(e,t){var n=Object(r.a)(e,"x","squeeze");return Object(o.a)(n,Object(a.P)(n.shape,t).newShape)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(222);function a(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(67),a=n.n(r);function i(e){return e instanceof HTMLElement?e:a.a.findDOMNode(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1);function a(e,t,n){var a=r.useRef({});return"value"in a.current&&!n(a.current.condition,t)||(a.current.value=e(),a.current.condition=t),a.current.value}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(7),a=n(91);function i(e,t,n){var i=Object(r.c)(e,n);return Object(a.a)(e,t,i,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(2),a=n(4),i=n(306),o=(n(210),function(){function e(t,n,a,o,s){Object(r.a)(this,e),this.mean=t,this.stdDev=n,this.dtype=a,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var c=s||Math.random();this.random=i.alea(c.toString())}return Object(a.a)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}()),s=function(){function e(t,n,a,s){Object(r.a)(this,e),this.alpha=t,this.beta=1/n,this.dtype=a;var c=s||Math.random();this.randu=i.alea(c.toString()),this.randn=new o(0,1,a,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return Object(a.a)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),c=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(Object(r.a)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=a-n,this.dtype=o,null==s&&(s=Math.random()),"number"===typeof s&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(a," <= 1 and dtype is not float"));this.random=i.alea(s)}return Object(a.a)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}()},function(e,t,n){"use strict";var r=n(18),a=n(17),i=n(41),o=n(44),s=n(134),c=n(47),u=n(46),l=n(1),f=n.n(l),d=n(67),p=n.n(d),h=n(50),v=n(166),m=n(160),b=n(65),g=n(99),y=n(281),O=n(23),k=n.n(O);function w(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}var x=n(26),j=n(35),S=n(207),_=n(71);function C(e){var t=e.prefixCls,n=e.motion,r=e.animation,a=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:a?{motionName:a}:null)}function E(e){var t=e.prefixCls,n=e.visible,i=e.zIndex,o=e.mask,s=e.maskMotion,c=e.maskAnimation,u=e.maskTransitionName;if(!o)return null;var f={};return(s||u||c)&&(f=Object(r.a)({motionAppear:!0},C({motion:s,prefixCls:t,transitionName:u,animation:c}))),l.createElement(_.b,Object(a.a)({},f,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return l.createElement("div",{style:{zIndex:i},className:k()("".concat(t,"-mask"),n)})}))}var N,T=n(38),I=n(282);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){return P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function F(){if(void 0!==N)return N;N="";var e=document.createElement("p").style;for(var t in D)t+"Transform"in e&&(N=t);return N}function L(){return F()?"".concat(F(),"TransitionProperty"):"transitionProperty"}function z(){return F()?"".concat(F(),"Transform"):"transform"}function q(e,t){var n=L();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function V(e,t){var n=z();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var B,U=/matrix\((.*)\)/,W=/matrix3d\((.*)\)/;function G(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function H(e,t,n){var r=n;if("object"!==P(t))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):B(e,t);for(var a in t)t.hasOwnProperty(a)&&H(e,a,t[a])}function K(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var a=e.document;"number"!==typeof(n=a.documentElement[r])&&(n=a.body[r])}return n}function X(e){return K(e)}function Q(e){return K(e,!0)}function Y(e){var t=function(e){var t,n,r,a=e.ownerDocument,i=a.body,o=a&&a.documentElement;return n=(t=e.getBoundingClientRect()).left,r=t.top,{left:n-=o.clientLeft||i.clientLeft||0,top:r-=o.clientTop||i.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=X(r),t.top+=Q(r),t}function Z(e){return null!==e&&void 0!==e&&e==e.window}function J(e){return Z(e)?e.document:9===e.nodeType?e:e.ownerDocument}var $=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),ee=/^(top|right|bottom|left)$/;function te(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function ne(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function re(e,t,n){"static"===H(e,"position")&&(e.style.position="relative");var r=-999,a=-999,i=te("left",n),o=te("top",n),s=ne(i),c=ne(o);"left"!==i&&(r=999),"top"!==o&&(a=999);var u,l="",f=Y(e);("left"in t||"top"in t)&&(l=(u=e).style.transitionProperty||u.style[L()]||"",q(e,"none")),"left"in t&&(e.style[s]="",e.style[i]="".concat(r,"px")),"top"in t&&(e.style[c]="",e.style[o]="".concat(a,"px")),G(e);var d=Y(e),p={};for(var h in t)if(t.hasOwnProperty(h)){var v=te(h,n),m="left"===h?r:a,b=f[h]-d[h];p[v]=v===h?m+b:m-b}H(e,p),G(e),("left"in t||"top"in t)&&q(e,l);var g={};for(var y in t)if(t.hasOwnProperty(y)){var O=te(y,n),k=t[y]-f[y];g[O]=y===O?p[O]+k:p[O]-k}H(e,g)}function ae(e,t){var n=Y(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(z());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),a={x:r.x,y:r.y};"left"in t&&(a.x=r.x+t.left-n.left),"top"in t&&(a.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(z());if(r&&"none"!==r){var a,i=r.match(U);i?((a=(i=i[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,a[5]=t.y,V(e,"matrix(".concat(a.join(","),")"))):((a=r.match(W)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,a[13]=t.y,V(e,"matrix3d(".concat(a.join(","),")")))}else V(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,a)}function ie(e,t){for(var n=0;n<e.length;n++)t(e[n])}function oe(e){return"border-box"===B(e,"boxSizing")}"undefined"!==typeof window&&(B=window.getComputedStyle?function(e,t,n){var r=n,a="",i=J(e);return(r=r||i.defaultView.getComputedStyle(e,null))&&(a=r.getPropertyValue(t)||r[t]),a}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if($.test(n)&&!ee.test(t)){var r=e.style,a=r.left,i=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=a,e.runtimeStyle.left=i}return""===n?"auto":n});var se=["margin","border","padding"];function ce(e,t,n){var r,a={},i=e.style;for(r in t)t.hasOwnProperty(r)&&(a[r]=i[r],i[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(i[r]=a[r])}function ue(e,t,n){var r,a,i,o=0;for(a=0;a<t.length;a++)if(r=t[a])for(i=0;i<n.length;i++){var s=void 0;s="border"===r?"".concat(r).concat(n[i],"Width"):r+n[i],o+=parseFloat(B(e,s))||0}return o}var le={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function fe(e,t,n){var r=n;if(Z(e))return"width"===t?le.viewportWidth(e):le.viewportHeight(e);if(9===e.nodeType)return"width"===t?le.docWidth(e):le.docHeight(e);var a="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?e.getBoundingClientRect().width:e.getBoundingClientRect().height,o=oe(e),s=0;(null===i||void 0===i||i<=0)&&(i=void 0,(null===(s=B(e,t))||void 0===s||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),void 0===r&&(r=o?1:-1);var c=void 0!==i||o,u=i||s;return-1===r?c?u-ue(e,["border","padding"],a):s:c?1===r?u:u+(2===r?-ue(e,["border"],a):ue(e,["margin"],a)):s+ue(e,se.slice(r),a)}ie(["Width","Height"],(function(e){le["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],le["viewport".concat(e)](n))},le["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,a=r.body,i=r.documentElement[n];return"CSS1Compat"===r.compatMode&&i||a&&a[n]||i}}));var de={position:"absolute",visibility:"hidden",display:"block"};function pe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=t[0];return 0!==a.offsetWidth?r=fe.apply(void 0,t):ce(a,de,(function(){r=fe.apply(void 0,t)})),r}function he(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}ie(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);le["outer".concat(t)]=function(t,n){return t&&pe(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];le[e]=function(t,r){var a=r;return void 0!==a?t?(oe(t)&&(a+=ue(t,["padding","border"],n)),H(t,e,a)):void 0:t&&pe(t,e,-1)}}));var ve={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:J,offset:function(e,t,n){if("undefined"===typeof t)return Y(e);!function(e,t,n){if(n.ignoreShake){var r=Y(e),a=r.left.toFixed(0),i=r.top.toFixed(0),o=t.left.toFixed(0),s=t.top.toFixed(0);if(a===o&&i===s)return}n.useCssRight||n.useCssBottom?re(e,t,n):n.useCssTransform&&z()in document.body.style?ae(e,t):re(e,t,n)}(e,t,n||{})},isWindow:Z,each:ie,css:H,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:he,getWindowScrollLeft:function(e){return X(e)},getWindowScrollTop:function(e){return Q(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)ve.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};he(ve,le);var me=ve.getParent;function be(e){if(ve.isWindow(e)||9===e.nodeType)return null;var t,n=ve.getDocument(e).body,r=ve.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:me(e);for(t=me(e);t&&t!==n&&9!==t.nodeType;t=me(t))if("static"!==(r=ve.css(t,"position")))return t;return null}var ge=ve.getParent;function ye(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=be(e),a=ve.getDocument(e),i=a.defaultView||a.parentWindow,o=a.body,s=a.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===o||r===s||"visible"===ve.css(r,"overflow")){if(r===o||r===s)break}else{var c=ve.offset(r);c.left+=r.clientLeft,c.top+=r.clientTop,n.top=Math.max(n.top,c.top),n.right=Math.min(n.right,c.left+r.clientWidth),n.bottom=Math.min(n.bottom,c.top+r.clientHeight),n.left=Math.max(n.left,c.left)}r=be(r)}var u=null;ve.isWindow(e)||9===e.nodeType||(u=e.style.position,"absolute"===ve.css(e,"position")&&(e.style.position="fixed"));var l=ve.getWindowScrollLeft(i),f=ve.getWindowScrollTop(i),d=ve.viewportWidth(i),p=ve.viewportHeight(i),h=s.scrollWidth,v=s.scrollHeight,m=window.getComputedStyle(o);if("hidden"===m.overflowX&&(h=i.innerWidth),"hidden"===m.overflowY&&(v=i.innerHeight),e.style&&(e.style.position=u),t||function(e){if(ve.isWindow(e)||9===e.nodeType)return!1;var t=ve.getDocument(e),n=t.body,r=null;for(r=ge(e);r&&r!==n&&r!==t;r=ge(r))if("fixed"===ve.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,l),n.top=Math.max(n.top,f),n.right=Math.min(n.right,l+d),n.bottom=Math.min(n.bottom,f+p);else{var b=Math.max(h,l+d);n.right=Math.min(n.right,b);var g=Math.max(v,f+p);n.bottom=Math.min(n.bottom,g)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function Oe(e){var t,n,r;if(ve.isWindow(e)||9===e.nodeType){var a=ve.getWindow(e);t={left:ve.getWindowScrollLeft(a),top:ve.getWindowScrollTop(a)},n=ve.viewportWidth(a),r=ve.viewportHeight(a)}else t=ve.offset(e),n=ve.outerWidth(e),r=ve.outerHeight(e);return t.width=n,t.height=r,t}function ke(e,t){var n=t.charAt(0),r=t.charAt(1),a=e.width,i=e.height,o=e.left,s=e.top;return"c"===n?s+=i/2:"b"===n&&(s+=i),"c"===r?o+=a/2:"r"===r&&(o+=a),{left:o,top:s}}function we(e,t,n,r,a){var i=ke(t,n[1]),o=ke(e,n[0]),s=[o.left-i.left,o.top-i.top];return{left:Math.round(e.left-s[0]+r[0]-a[0]),top:Math.round(e.top-s[1]+r[1]-a[1])}}function xe(e,t,n){return e.left<n.left||e.left+t.width>n.right}function je(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function Se(e,t,n){var r=[];return ve.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function _e(e,t){return e[t]=-e[t],e}function Ce(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function Ee(e,t){e[0]=Ce(e[0],t.width),e[1]=Ce(e[1],t.height)}function Ne(e,t,n,r){var a=n.points,i=n.offset||[0,0],o=n.targetOffset||[0,0],s=n.overflow,c=n.source||e;i=[].concat(i),o=[].concat(o);var u={},l=0,f=ye(c,!(!(s=s||{})||!s.alwaysByViewport)),d=Oe(c);Ee(i,d),Ee(o,t);var p=we(d,t,a,i,o),h=ve.merge(d,p);if(f&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&xe(p,d,f)){var v=Se(a,/[lr]/gi,{l:"r",r:"l"}),m=_e(i,0),b=_e(o,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(we(d,t,v,m,b),d,f)||(l=1,a=v,i=m,o=b)}if(s.adjustY&&je(p,d,f)){var g=Se(a,/[tb]/gi,{t:"b",b:"t"}),y=_e(i,1),O=_e(o,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(we(d,t,g,y,O),d,f)||(l=1,a=g,i=y,o=O)}l&&(p=we(d,t,a,i,o),ve.mix(h,p));var k=xe(p,d,f),w=je(p,d,f);if(k||w){var x=a;k&&(x=Se(a,/[lr]/gi,{l:"r",r:"l"})),w&&(x=Se(a,/[tb]/gi,{t:"b",b:"t"})),a=x,i=n.offset||[0,0],o=n.targetOffset||[0,0]}u.adjustX=s.adjustX&&k,u.adjustY=s.adjustY&&w,(u.adjustX||u.adjustY)&&(h=function(e,t,n,r){var a=ve.clone(e),i={width:t.width,height:t.height};return r.adjustX&&a.left<n.left&&(a.left=n.left),r.resizeWidth&&a.left>=n.left&&a.left+i.width>n.right&&(i.width-=a.left+i.width-n.right),r.adjustX&&a.left+i.width>n.right&&(a.left=Math.max(n.right-i.width,n.left)),r.adjustY&&a.top<n.top&&(a.top=n.top),r.resizeHeight&&a.top>=n.top&&a.top+i.height>n.bottom&&(i.height-=a.top+i.height-n.bottom),r.adjustY&&a.top+i.height>n.bottom&&(a.top=Math.max(n.bottom-i.height,n.top)),ve.mix(a,i)}(p,d,f,u))}return h.width!==d.width&&ve.css(c,"width",ve.width(c)+h.width-d.width),h.height!==d.height&&ve.css(c,"height",ve.height(c)+h.height-d.height),ve.offset(c,{left:h.left,top:h.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:a,offset:i,targetOffset:o,overflow:u}}function Te(e,t,n){var r=n.target||t,a=Oe(r),i=!function(e,t){var n=ye(e,t),r=Oe(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return Ne(e,a,n,i)}Te.__getOffsetParent=be,Te.__getVisibleRectForElement=ye;var Ie=n(283),Ae=n.n(Ie),Me=n(280);function Pe(e,t){var n=null,r=null;var a=new Me.a((function(e){var a=Object(x.a)(e,1)[0].target;if(document.documentElement.contains(a)){var i=a.getBoundingClientRect(),o=i.width,s=i.height,c=Math.floor(o),u=Math.floor(s);n===c&&r===u||Promise.resolve().then((function(){t({width:c,height:u})})),n=c,r=u}}));return e&&a.observe(e),function(){a.disconnect()}}function Re(e){return"function"!==typeof e?null:e()}function De(e){return"object"===Object(T.a)(e)&&e?e:null}var Fe=function(e,t){var n=e.children,r=e.disabled,a=e.target,i=e.align,o=e.onAlign,s=e.monitorWindowResize,c=e.monitorBufferTime,u=void 0===c?0:c,l=f.a.useRef({}),d=f.a.useRef(),p=f.a.Children.only(n),h=f.a.useRef({});h.current.disabled=r,h.current.target=a,h.current.align=i,h.current.onAlign=o;var m=function(e,t){var n=f.a.useRef(!1),r=f.a.useRef(null);function a(){window.clearTimeout(r.current)}return[function i(o){if(n.current&&!0!==o)a(),r.current=window.setTimeout((function(){n.current=!1,i()}),t);else{if(!1===e())return;n.current=!0,a(),r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,a()}]}((function(){var e=h.current,t=e.disabled,n=e.target,r=e.align,a=e.onAlign;if(!t&&n){var i,o=d.current,s=Re(n),c=De(n);l.current.element=s,l.current.point=c,l.current.align=r;var u=document.activeElement;return s&&Object(I.a)(s)?i=Te(o,s,r):c&&(i=function(e,t,n){var r,a,i=ve.getDocument(e),o=i.defaultView||i.parentWindow,s=ve.getWindowScrollLeft(o),c=ve.getWindowScrollTop(o),u=ve.viewportWidth(o),l=ve.viewportHeight(o),f={left:r="pageX"in t?t.pageX:s+t.clientX,top:a="pageY"in t?t.pageY:c+t.clientY,width:0,height:0},d=r>=0&&r<=s+u&&a>=0&&a<=c+l,p=[n.points[0],"cc"];return Ne(e,f,M(M({},n),{},{points:p}),d)}(o,c,r)),function(e,t){e!==document.activeElement&&Object(v.a)(t,e)&&"function"===typeof e.focus&&e.focus()}(u,o),a&&i&&a(o,i),!0}return!1}),u),y=Object(x.a)(m,2),O=y[0],k=y[1],w=f.a.useRef({cancel:function(){}}),j=f.a.useRef({cancel:function(){}});f.a.useEffect((function(){var e,t,n=Re(a),r=De(a);d.current!==j.current.element&&(j.current.cancel(),j.current.element=d.current,j.current.cancel=Pe(d.current,O)),l.current.element===n&&((e=l.current.point)===(t=r)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))&&Ae()(l.current.align,i)||(O(),w.current.element!==n&&(w.current.cancel(),w.current.element=n,w.current.cancel=Pe(n,O)))})),f.a.useEffect((function(){r?k():O()}),[r]);var S=f.a.useRef(null);return f.a.useEffect((function(){s?S.current||(S.current=Object(g.a)(window,"resize",O)):S.current&&(S.current.remove(),S.current=null)}),[s]),f.a.useEffect((function(){return function(){w.current.cancel(),j.current.cancel(),S.current&&S.current.remove(),k()}}),[]),f.a.useImperativeHandle(t,(function(){return{forceAlign:function(){return O(!0)}}})),f.a.isValidElement(p)&&(p=f.a.cloneElement(p,{ref:Object(b.a)(p.ref,d)})),p},Le=f.a.forwardRef(Fe);Le.displayName="Align";var ze=Le,qe=n(79),Ve=n.n(qe),Be=n(146),Ue=["measure","align",null,"motion"],We=l.forwardRef((function(e,t){var n=e.visible,i=e.prefixCls,o=e.className,s=e.style,c=e.children,u=e.zIndex,f=e.stretch,d=e.destroyPopupOnHide,p=e.forceRender,v=e.align,m=e.point,b=e.getRootDomNode,g=e.getClassNameFromAlign,y=e.onAlign,O=e.onMouseEnter,w=e.onMouseLeave,j=e.onMouseDown,S=e.onTouchStart,E=Object(l.useRef)(),N=Object(l.useRef)(),T=Object(l.useState)(),I=Object(x.a)(T,2),A=I[0],M=I[1],P=function(e){var t=l.useState({width:0,height:0}),n=Object(x.a)(t,2),r=n[0],a=n[1];return[l.useMemo((function(){var t={};if(e){var n=r.width,a=r.height;-1!==e.indexOf("height")&&a?t.height=a:-1!==e.indexOf("minHeight")&&a&&(t.minHeight=a),-1!==e.indexOf("width")&&n?t.width=n:-1!==e.indexOf("minWidth")&&n&&(t.minWidth=n)}return t}),[e,r]),function(e){a({width:e.offsetWidth,height:e.offsetHeight})}]}(f),R=Object(x.a)(P,2),D=R[0],F=R[1];var L=function(e,t){var n=Object(l.useState)(null),r=Object(x.a)(n,2),a=r[0],i=r[1],o=Object(l.useRef)(),s=Object(l.useRef)(!1);function c(e){s.current||i(e)}function u(){h.a.cancel(o.current)}return Object(l.useEffect)((function(){c("measure")}),[e]),Object(l.useEffect)((function(){"measure"===a&&t(),a&&(o.current=Object(h.a)(Object(Be.a)(Ve.a.mark((function e(){var t,n;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ue.indexOf(a),(n=Ue[t+1])&&-1!==t&&c(n);case 3:case"end":return e.stop()}}),e)})))))}),[a]),Object(l.useEffect)((function(){return function(){s.current=!0,u()}}),[]),[a,function(e){u(),o.current=Object(h.a)((function(){c((function(e){switch(a){case"align":return"motion";case"motion":return"stable"}return e})),null===e||void 0===e||e()}))}]}(n,(function(){f&&F(b())})),z=Object(x.a)(L,2),q=z[0],V=z[1],B=Object(l.useRef)();function U(){var e;null===(e=E.current)||void 0===e||e.forceAlign()}function W(e,t){var n=g(t);A!==n&&M(n),"align"===q&&(A!==n?Promise.resolve().then((function(){U()})):V((function(){var e;null===(e=B.current)||void 0===e||e.call(B)})),null===y||void 0===y||y(e,t))}var G=Object(r.a)({},C(e));function H(){return new Promise((function(e){B.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=G[e];G[e]=function(e,n){return V(),null===t||void 0===t?void 0:t(e,n)}})),l.useEffect((function(){G.motionName||"motion"!==q||V()}),[G.motionName,q]),l.useImperativeHandle(t,(function(){return{forceAlign:U,getElement:function(){return N.current}}}));var K=Object(r.a)(Object(r.a)({},D),{},{zIndex:u,opacity:"motion"!==q&&"stable"!==q&&n?0:void 0,pointerEvents:"stable"===q?void 0:"none"},s),X=!0;!(null===v||void 0===v?void 0:v.points)||"align"!==q&&"stable"!==q||(X=!1);var Q=c;return l.Children.count(c)>1&&(Q=l.createElement("div",{className:"".concat(i,"-content")},c)),l.createElement(_.b,Object(a.a)({visible:n,ref:N,leavedClassName:"".concat(i,"-hidden")},G,{onAppearPrepare:H,onEnterPrepare:H,removeOnLeave:d,forceRender:p}),(function(e,t){var n=e.className,a=e.style,s=k()(i,o,A,n);return l.createElement(ze,{target:m||b,key:"popup",ref:E,monitorWindowResize:!0,disabled:X,align:v,onAlign:W},l.createElement("div",{ref:t,className:s,onMouseEnter:O,onMouseLeave:w,onMouseDownCapture:j,onTouchStartCapture:S,style:Object(r.a)(Object(r.a)({},a),K)},Q))}))}));We.displayName="PopupInner";var Ge=We,He=l.forwardRef((function(e,t){var n=e.prefixCls,i=e.visible,o=e.zIndex,s=e.children,c=e.mobile,u=(c=void 0===c?{}:c).popupClassName,f=c.popupStyle,d=c.popupMotion,p=void 0===d?{}:d,h=c.popupRender,v=l.useRef();l.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return v.current}}}));var m=Object(r.a)({zIndex:o},f),b=s;return l.Children.count(s)>1&&(b=l.createElement("div",{className:"".concat(n,"-content")},s)),h&&(b=h(b)),l.createElement(_.b,Object(a.a)({visible:i,ref:v,removeOnLeave:!0},p),(function(e,t){var a=e.className,i=e.style,o=k()(n,u,a);return l.createElement("div",{ref:t,className:o,style:Object(r.a)(Object(r.a)({},i),m)},b)}))}));He.displayName="MobilePopupInner";var Ke=He,Xe=["visible","mobile"],Qe=l.forwardRef((function(e,t){var n=e.visible,i=e.mobile,o=Object(j.a)(e,Xe),s=Object(l.useState)(n),c=Object(x.a)(s,2),u=c[0],f=c[1],d=Object(l.useState)(!1),p=Object(x.a)(d,2),h=p[0],v=p[1],m=Object(r.a)(Object(r.a)({},o),{},{visible:u});Object(l.useEffect)((function(){f(n),n&&i&&v(Object(S.a)())}),[n,i]);var b=h?l.createElement(Ke,Object(a.a)({},m,{mobile:i,ref:t})):l.createElement(Ge,Object(a.a)({},m,{ref:t}));return l.createElement("div",null,l.createElement(E,m),b)}));Qe.displayName="Popup";var Ye=Qe,Ze=l.createContext(null);function Je(){}function $e(){return""}function et(e){return e?e.ownerDocument:window.document}var tt=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];t.a=function(e){var t=function(t){Object(c.a)(f,t);var n=Object(u.a)(f);function f(e){var t,r;return Object(i.a)(this,f),(t=n.call(this,e)).popupRef=l.createRef(),t.triggerRef=l.createRef(),t.attachId=void 0,t.clickOutsideHandler=void 0,t.touchOutsideHandler=void 0,t.contextMenuOutsideHandler1=void 0,t.contextMenuOutsideHandler2=void 0,t.mouseDownTimeout=void 0,t.focusTime=void 0,t.preClickTime=void 0,t.preTouchTime=void 0,t.delayTimer=void 0,t.hasPopupMouseDown=void 0,t.onMouseEnter=function(e){var n=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",e),t.delaySetPopupVisible(!0,n,n?null:e)},t.onMouseMove=function(e){t.fireEvents("onMouseMove",e),t.setPoint(e)},t.onMouseLeave=function(e){t.fireEvents("onMouseLeave",e),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},t.onPopupMouseEnter=function(){t.clearDelayTimer()},t.onPopupMouseLeave=function(e){var n;e.relatedTarget&&!e.relatedTarget.setTimeout&&Object(v.a)(null===(n=t.popupRef.current)||void 0===n?void 0:n.getElement(),e.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},t.onFocus=function(e){t.fireEvents("onFocus",e),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))},t.onMouseDown=function(e){t.fireEvents("onMouseDown",e),t.preClickTime=Date.now()},t.onTouchStart=function(e){t.fireEvents("onTouchStart",e),t.preTouchTime=Date.now()},t.onBlur=function(e){t.fireEvents("onBlur",e),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)},t.onContextMenu=function(e){e.preventDefault(),t.fireEvents("onContextMenu",e),t.setPopupVisible(!0,e)},t.onContextMenuClose=function(){t.isContextMenuToShow()&&t.close()},t.onClick=function(e){if(t.fireEvents("onClick",e),t.focusTime){var n;if(t.preClickTime&&t.preTouchTime?n=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?n=t.preClickTime:t.preTouchTime&&(n=t.preTouchTime),Math.abs(n-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,t.isClickToShow()&&(t.isClickToHide()||t.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!t.state.popupVisible;(t.isClickToHide()&&!r||r&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,e)},t.onPopupMouseDown=function(){var e;(t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=window.setTimeout((function(){t.hasPopupMouseDown=!1}),0),t.context)&&(e=t.context).onPopupMouseDown.apply(e,arguments)},t.onDocumentClick=function(e){if(!t.props.mask||t.props.maskClosable){var n=e.target,r=t.getRootDomNode(),a=t.getPopupDomNode();Object(v.a)(r,n)&&!t.isContextMenuOnly()||Object(v.a)(a,n)||t.hasPopupMouseDown||t.close()}},t.getRootDomNode=function(){var e=t.props.getTriggerDOMNode;if(e)return e(t.triggerRef.current);try{var n=Object(m.a)(t.triggerRef.current);if(n)return n}catch(r){}return p.a.findDOMNode(Object(s.a)(t))},t.getPopupClassNameFromAlign=function(e){var n=[],r=t.props,a=r.popupPlacement,i=r.builtinPlacements,o=r.prefixCls,s=r.alignPoint,c=r.getPopupClassNameFromAlign;return a&&i&&n.push(function(e,t,n,r){for(var a=n.points,i=Object.keys(e),o=0;o<i.length;o+=1){var s=i[o];if(w(e[s].points,a,r))return"".concat(t,"-placement-").concat(s)}return""}(i,o,e,s)),c&&n.push(c(e)),n.join(" ")},t.getComponent=function(){var e=t.props,n=e.prefixCls,r=e.destroyPopupOnHide,i=e.popupClassName,o=e.onPopupAlign,s=e.popupMotion,c=e.popupAnimation,u=e.popupTransitionName,f=e.popupStyle,d=e.mask,p=e.maskAnimation,h=e.maskTransitionName,v=e.maskMotion,m=e.zIndex,b=e.popup,g=e.stretch,y=e.alignPoint,O=e.mobile,k=e.forceRender,w=t.state,x=w.popupVisible,j=w.point,S=t.getPopupAlign(),_={};return t.isMouseEnterToShow()&&(_.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(_.onMouseLeave=t.onPopupMouseLeave),_.onMouseDown=t.onPopupMouseDown,_.onTouchStart=t.onPopupMouseDown,l.createElement(Ye,Object(a.a)({prefixCls:n,destroyPopupOnHide:r,visible:x,point:y&&j,className:i,align:S,onAlign:o,animation:c,getClassNameFromAlign:t.getPopupClassNameFromAlign},_,{stretch:g,getRootDomNode:t.getRootDomNode,style:f,mask:d,zIndex:m,transitionName:u,maskAnimation:p,maskTransitionName:h,maskMotion:v,ref:t.popupRef,motion:s,mobile:O,forceRender:k}),"function"===typeof b?b():b)},t.attachParent=function(e){h.a.cancel(t.attachId);var n,r=t.props,a=r.getPopupContainer,i=r.getDocument,o=t.getRootDomNode();a?(o||0===a.length)&&(n=a(o)):n=i(t.getRootDomNode()).body,n?n.appendChild(e):t.attachId=Object(h.a)((function(){t.attachParent(e)}))},t.getContainer=function(){var e=(0,t.props.getDocument)(t.getRootDomNode()).createElement("div");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",t.attachParent(e),e},t.setPoint=function(e){t.props.alignPoint&&e&&t.setState({point:{pageX:e.pageX,pageY:e.pageY}})},t.handlePortalUpdate=function(){t.state.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)},t.triggerContextValue={onPopupMouseDown:t.onPopupMouseDown},r="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,t.state={prevPopupVisible:r,popupVisible:r},tt.forEach((function(e){t["fire".concat(e)]=function(n){t.fireEvents(e,n)}})),t}return Object(o.a)(f,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Object(g.a)(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Object(g.a)(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Object(g.a)(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Object(g.a)(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),h.a.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,a=e.builtinPlacements;return t&&a?function(e,t,n){var a=e[t]||{};return Object(r.a)(Object(r.a)({},a),n)}(a,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,a=1e3*t;if(this.clearDelayTimer(),a){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,i),r.clearDelayTimer()}),a)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var t=this.state.popupVisible,n=this.props,a=n.children,i=n.forceRender,o=n.alignPoint,s=n.className,c=n.autoDestroy,u=l.Children.only(a),f={key:"trigger"};this.isContextMenuToShow()?f.onContextMenu=this.onContextMenu:f.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(f.onClick=this.onClick,f.onMouseDown=this.onMouseDown,f.onTouchStart=this.onTouchStart):(f.onClick=this.createTwoChains("onClick"),f.onMouseDown=this.createTwoChains("onMouseDown"),f.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(f.onMouseEnter=this.onMouseEnter,o&&(f.onMouseMove=this.onMouseMove)):f.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?f.onMouseLeave=this.onMouseLeave:f.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(f.onFocus=this.onFocus,f.onBlur=this.onBlur):(f.onFocus=this.createTwoChains("onFocus"),f.onBlur=this.createTwoChains("onBlur"));var d=k()(u&&u.props&&u.props.className,s);d&&(f.className=d);var p=Object(r.a)({},f);Object(b.c)(u)&&(p.ref=Object(b.a)(this.triggerRef,u.ref));var h,v=l.cloneElement(u,p);return(t||this.popupRef.current||i)&&(h=l.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!t&&c&&(h=null),l.createElement(Ze.Provider,{value:this.triggerContextValue},v,h)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),f}(l.Component);return t.contextType=Ze,t.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:$e,getDocument:et,onPopupVisibleChange:Je,afterPopupVisibleChange:Je,onPopupAlign:Je,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},t}(y.a)},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="CheckOutlined";t.a=a.forwardRef(s)},function(e,t,n){"use strict";function r(e,t){return!!e&&e.contains(t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(212);t.a=r.b},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(16),a=n(17),i=["xxl","xl","lg","md","sm","xs"],o={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},s=new Map,c=-1,u={},l={matchHandlers:{},dispatch:function(e){return u=e,s.forEach((function(e){return e(u)})),s.size>=1},subscribe:function(e){return s.size||this.register(),c+=1,s.set(c,e),e(u),c},unsubscribe:function(e){s.delete(e),s.size||this.unregister()},unregister:function(){var e=this;Object.keys(o).forEach((function(t){var n=o[t],r=e.matchHandlers[n];null===r||void 0===r||r.mql.removeListener(null===r||void 0===r?void 0:r.listener)})),s.clear()},register:function(){var e=this;Object.keys(o).forEach((function(t){var n=o[t],i=function(n){var i=n.matches;e.dispatch(Object(a.a)(Object(a.a)({},u),Object(r.a)({},t,i)))},s=window.matchMedia(n);s.addListener(i),e.matchHandlers[n]={mql:s,listener:i},i(s)}))}};t.a=l},function(e,t,n){"use strict";(function(e){var r=t;function a(e,t,n){for(var r=Object.keys(t),a=0;a<r.length;++a)void 0!==e[r[a]]&&n||(e[r[a]]=t[r[a]]);return e}function i(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&a(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(558),r.base64=n(559),r.EventEmitter=n(560),r.float=n(561),r.inquire=n(562),r.utf8=n(563),r.pool=n(564),r.LongBits=n(565),r.isNode=Boolean("undefined"!==typeof e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"===typeof e||e instanceof String},r.isObject=function(e){return e&&"object"===typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"===typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=a,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(110))},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r={};function a(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};r[e]=n}function i(e){return r[e]}function o(e){delete r[e]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(15),a=n(10),i=n(7),o=n(113),s=n(11),c=n(22);var u=Object(s.b)({broadcastTo_:function(e,t){var n=Object(i.a)(e,"broadcastTo","x"),s=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var u=n.shape.slice();u.length<t.length;)u.unshift(1);n=Object(c.a)(n,u)}for(var l=n.shape,f=Array.from(t),d=t.length-1;d>=0;d--)if(l[d]===t[d])f[d]=1;else if(1!==n.shape[d])throw new Error("broadcastTo(): [".concat(s,"] cannot be broadcast to [").concat(t,"]."));var p=f.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===p.length)return Object(o.a)(n);var h={x:n},v={reps:f};return r.a.runKernel(a.Tc,h,v)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","min"),s={x:o},c={axis:t,keepDims:n};return r.a.runKernel(a.Pb,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var s=Object(i.a)(e,"indices","oneHot","int32"),c={indices:s},u={depth:t,onValue:n,offValue:o};return r.a.runKernel(a.ac,c,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({real_:function(e){var t={input:Object(i.a)(e,"input","real")};return r.a.runKernel(a.jc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(21),o=n(11);var s=Object(o.b)({ifft_:function(e){Object(i.b)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.a.runKernel(a.pb,t)}})},function(e,t,n){"use strict";var r=n(1),a=n(23),i=n.n(a);t.a=function(e){var t,n=e.className,a=e.customizeIcon,o=e.customizeIconProps,s=e.onMouseDown,c=e.onClick,u=e.children;return t="function"===typeof a?a(o):a,r.createElement("span",{className:n,onMouseDown:function(e){e.preventDefault(),s&&s(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:c,"aria-hidden":!0},void 0!==t?t:r.createElement("span",{className:i()(n.split(/\s+/).map((function(e){return"".concat(e,"-icon")})))},u))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s}));var r,a=n(106),i=function(){return Object(a.a)()&&window.document.documentElement},o=function(e){if(i()){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some((function(e){return e in n.style}))}return!1},s=function(){if(!i())return!1;if(void 0!==r)return r;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),r=1===e.scrollHeight,document.body.removeChild(e),r}},function(e,t,n){"use strict";function r(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function a(e){return e<=1?100*Number(e)+"%":e}function i(e){return 1===e.length?"0"+e:String(e)}function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function s(e){return c(e)/255}function c(e){return parseInt(e,16)}n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return j}));var u={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function l(e){var t,n,i,l={r:0,g:0,b:0},f=1,d=null,p=null,m=null,b=!1,g=!1;return"string"===typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(u[e])e=u[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=h.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=h.rgba.exec(e))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=h.hsl.exec(e))return{h:n[1],s:n[2],l:n[3]};if(n=h.hsla.exec(e))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=h.hsv.exec(e))return{h:n[1],s:n[2],v:n[3]};if(n=h.hsva.exec(e))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=h.hex8.exec(e))return{r:c(n[1]),g:c(n[2]),b:c(n[3]),a:s(n[4]),format:t?"name":"hex8"};if(n=h.hex6.exec(e))return{r:c(n[1]),g:c(n[2]),b:c(n[3]),format:t?"name":"hex"};if(n=h.hex4.exec(e))return{r:c(n[1]+n[1]),g:c(n[2]+n[2]),b:c(n[3]+n[3]),a:s(n[4]+n[4]),format:t?"name":"hex8"};if(n=h.hex3.exec(e))return{r:c(n[1]+n[1]),g:c(n[2]+n[2]),b:c(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(v(e.r)&&v(e.g)&&v(e.b)?(t=e.r,n=e.g,i=e.b,l={r:255*r(t,255),g:255*r(n,255),b:255*r(i,255)},b=!0,g="%"===String(e.r).substr(-1)?"prgb":"rgb"):v(e.h)&&v(e.s)&&v(e.v)?(d=a(e.s),p=a(e.v),l=function(e,t,n){e=6*r(e,360),t=r(t,100),n=r(n,100);var a=Math.floor(e),i=e-a,o=n*(1-t),s=n*(1-i*t),c=n*(1-(1-i)*t),u=a%6;return{r:255*[n,s,o,o,c,n][u],g:255*[c,n,n,s,o,o][u],b:255*[o,o,c,n,n,s][u]}}(e.h,d,p),b=!0,g="hsv"):v(e.h)&&v(e.s)&&v(e.l)&&(d=a(e.s),m=a(e.l),l=function(e,t,n){var a,i,s;if(e=r(e,360),t=r(t,100),n=r(n,100),0===t)i=n,s=n,a=n;else{var c=n<.5?n*(1+t):n+t-n*t,u=2*n-c;a=o(u,c,e+1/3),i=o(u,c,e),s=o(u,c,e-1/3)}return{r:255*a,g:255*i,b:255*s}}(e.h,d,m),b=!0,g="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(f=e.a)),f=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(f),{ok:b,format:e.format||g,r:Math.min(255,Math.max(l.r,0)),g:Math.min(255,Math.max(l.g,0)),b:Math.min(255,Math.max(l.b,0)),a:f}}var f="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",d="[\\s|\\(]+("+f+")[,|\\s]+("+f+")[,|\\s]+("+f+")\\s*\\)?",p="[\\s|\\(]+("+f+")[,|\\s]+("+f+")[,|\\s]+("+f+")[,|\\s]+("+f+")\\s*\\)?",h={CSS_UNIT:new RegExp(f),rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+p),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+p),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+p),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function v(e){return Boolean(h.CSS_UNIT.exec(String(e)))}var m=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function b(e){var t=function(e,t,n){e=r(e,255),t=r(t,255),n=r(n,255);var a=Math.max(e,t,n),i=Math.min(e,t,n),o=0,s=a,c=a-i,u=0===a?0:c/a;if(a===i)o=0;else{switch(a){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4}o/=6}return{h:o,s:u,v:s}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function g(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){var a=[i(Math.round(e).toString(16)),i(Math.round(t).toString(16)),i(Math.round(n).toString(16))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}(t,n,r,!1))}function y(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}function O(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function k(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function w(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function x(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=l(e),a=5;a>0;a-=1){var i=b(r),o=g(l({h:O(i,a,!0),s:k(i,a,!0),v:w(i,a,!0)}));n.push(o)}n.push(g(r));for(var s=1;s<=4;s+=1){var c=b(r),u=g(l({h:O(c,s),s:k(c,s),v:w(c,s)}));n.push(u)}return"dark"===t.theme?m.map((function(e){var r=e.index,a=e.opacity;return g(y(l(t.backgroundColor||"#141414"),l(n[r]),100*a))})):n}var j={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},S={},_={};Object.keys(j).forEach((function(e){S[e]=x(j[e]),S[e].primary=S[e][5],_[e]=x(j[e],{theme:"dark",backgroundColor:"#141414"}),_[e].primary=_[e][5]}));S.red,S.volcano,S.gold,S.orange,S.yellow,S.lime,S.green,S.cyan,S.blue,S.geekblue,S.purple,S.magenta,S.grey},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(50),a=0,i={};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a++,o=t;function s(){(o-=1)<=0?(e(),delete i[n]):i[n]=Object(r.a)(s)}return i[n]=Object(r.a)(s),n}o.cancel=function(e){void 0!==e&&(r.a.cancel(i[e]),delete i[e])},o.ids=i},,function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){var r=n(465),a=n(470);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},function(e,t,n){"use strict";n.r(t),n.d(t,"validateUpdateShape",(function(){return i})),n.d(t,"validateInput",(function(){return o})),n.d(t,"calculateShapes",(function(){return s}));var r=n(28),a=n(21);function i(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function o(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}i(n,t,e)}function s(e,t,n){for(var i=t.shape.length,o=i>1?t.shape[i-1]:1,s=n.length,c=1,u=o;u<s;++u)c*=n[u];var l=o<1?1:o;return{sliceRank:o,numUpdates:Object(a.N)(t.shape)/l,sliceSize:c,strides:[].concat(Object(r.a)(Object(a.j)(n.slice(0,o))),[1]),outputSize:Object(a.N)(n)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(11);var u=Object(c.b)({floorDiv_:function(e,t){var n=Object(s.a)(e,"a","floorDiv"),c=Object(s.a)(t,"b","floorDiv"),u=Object(o.makeTypesMatch)(n,c),l=Object(r.a)(u,2),f={a:n=l[0],b:c=l[1]};return a.a.runKernel(i.gb,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(15),a=n(10);function i(e,t,n){var i={shape:e,value:t,dtype:n};return r.a.runKernel(a.db,{},i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(32),c=n(60),u=n(11),l=n(22);var f=Object(u.b)({avgPool_:function(e,t,n,u,f){var d=Object(i.a)(e,"x","avgPool","float32");o.b(c.h(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var p=d,h=!1;3===d.rank&&(h=!0,p=Object(l.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.b(4===p.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(p.rank,".")})),null!=f&&o.b(o.v(u),(function(){return"Error in avgPool: pad must be an integer when using, "+"dimRoundingMode ".concat(f," but got pad ").concat(u,".")}));var v={x:p},m={filterSize:t,strides:n,pad:u,dimRoundingMode:f},b=r.a.runKernel(a.o,v,m);return b=Object(s.a)(b,d.dtype),h?Object(l.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({cos_:function(e){var t={x:Object(i.a)(e,"x","cos")};return r.a.runKernel(a.I,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=Object(i.a)(e,"x","cumsum"),c={x:s},u={axis:t,exclusive:n,reverse:o};return r.a.runKernel(a.L,c,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({elu_:function(e){var t={x:Object(i.a)(e,"x","elu")};return r.a.runKernel(a.V,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({floor_:function(e){var t={x:Object(i.a)(e,"x","floor")};return r.a.runKernel(a.fb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({imag_:function(e){var t={input:Object(i.a)(e,"input","imag")};return r.a.runKernel(a.rb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=Object(i.a)(e,"x","leakyRelu"),o={x:n},s={alpha:t};return r.a.runKernel(a.xb,o,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(7),a=n(21),i=n(33),o=n(75),s=n(80),c=n(121),u=n(114),l=n(11),f=n(22),d=n(34),p=n(42);var h=Object(l.b)({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=Object(r.a)(e,"x","logSumExp"),h=Object(a.I)(t,l.shape),v=Object(u.a)(l,h,!0),m=Object(d.a)(l,v),b=Object(s.a)(m),g=Object(p.a)(b,h),y=Object(c.a)(g),O=Object(i.a)(Object(f.a)(v,y.shape),y);if(n){var k=Object(o.e)(O.shape,h);return Object(f.a)(O,k)}return O}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(39),s=n(11);var c=Object(s.b)({logicalOr_:function(e,t){var n=Object(i.a)(e,"a","logicalOr","bool"),s=Object(i.a)(t,"b","logicalOr","bool");Object(o.a)(n.shape,s.shape);var c={a:n,b:s};return r.a.runKernel(a.Gb,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(60),c=n(11),u=n(22);var l=Object(c.b)({maxPool_:function(e,t,n,c,l){var f=Object(i.a)(e,"x","maxPool"),d=f,p=!1;3===f.rank&&(p=!0,d=Object(u.a)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),o.b(4===d.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(d.rank,".")})),o.b(s.h(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),null!=l&&o.b(o.v(c),(function(){return"Error in maxPool: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(c,".")}));var h={x:d},v={filterSize:t,strides:n,pad:c,dimRoundingMode:l},m=r.a.runKernel(a.Ib,h,v);return p?Object(u.a)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(11);var u=Object(c.b)({mod_:function(e,t){var n=Object(s.a)(e,"a","mod"),c=Object(s.a)(t,"b","mod"),u=Object(o.makeTypesMatch)(n,c),l=Object(r.a)(u,2),f={a:n=l[0],b:c=l[1]};return a.a.runKernel(i.Sb,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({prelu_:function(e,t){var n={x:Object(i.a)(e,"x","prelu"),alpha:Object(i.a)(t,"alpha","prelu")};return r.a.runKernel(a.gc,n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({relu6_:function(e){var t={x:Object(i.a)(e,"x","relu6")};return r.a.runKernel(a.nc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(21),o=n(11);var s=Object(o.b)({fft_:function(e){Object(i.b)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.a.runKernel(a.cb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(21),a=n(102),i=n(64),o=n(191),s=n(11),c=n(174),u=n(22),l=n(57),f=n(122),d=n(112),p=n(45),h=n(199);var v=Object(s.b)({rfft_:function(e,t){Object(r.b)("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,s=e.shape[e.shape.length-1],v=e.size/s;if(null!=t&&t<s){var m=e.shape.map((function(e){return 0})),b=e.shape.map((function(e){return e}));b[e.shape.length-1]=t,n=Object(l.a)(e,m,b),s=t}else if(null!=t&&t>s){var g=e.shape.map((function(e){return e}));g[e.shape.length-1]=t-s,n=Object(i.a)([e,Object(d.a)(g)],e.shape.length-1),s=t}else n=e;var y=Object(p.a)(n),O=Object(u.a)(Object(a.a)(n,y),[v,s]),k=Object(h.a)(O),w=Math.floor(s/2)+1,x=Object(c.a)(k),j=Object(o.a)(k),S=Object(f.a)(x,[w,s-w],x.shape.length-1),_=Object(f.a)(j,[w,s-w],j.shape.length-1),C=n.shape.slice();return C[n.shape.length-1]=w,Object(u.a)(Object(a.a)(S[0],_[0]),C)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({unsortedSegmentSum_:function(e,t,n){var s=Object(i.a)(e,"x","unsortedSegmentSum"),c=Object(i.a)(t,"segmentIds","unsortedSegmentSum","int32");Object(o.b)(Object(o.v)(n),(function(){return"numSegments must be of dtype int"}));var u={x:s,segmentIds:c},l={numSegments:n};return r.a.runKernel(a.Yc,u,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(7),a=n(21),i=n(81),o=n(75),s=n(114),c=n(172),u=n(11),l=n(89),f=n(22),d=n(37),p=n(72),h=n(54),v=n(42);function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Object(i.a)(e);if(1!==e.rank&&null===n)return m(Object(f.a)(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Object(v.a)(Object(i.a)(e),n);if(t===1/0)return Object(s.a)(Object(i.a)(e),n);if(t===-1/0)return Object(c.a)(Object(i.a)(e),n);if("euclidean"===t||2===t)return Object(p.a)(Object(v.a)(Object(l.a)(Object(i.a)(e),Object(d.a)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Object(s.a)(Object(v.a)(Object(i.a)(e),n[0]),n[1]-1);if(t===1/0)return Object(s.a)(Object(v.a)(Object(i.a)(e),n[1]),n[0]);if(t===-1/0)return Object(c.a)(Object(v.a)(Object(i.a)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Object(p.a)(Object(v.a)(Object(h.a)(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var b=Object(u.b)({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=m(e=Object(r.a)(e,"x","norm"),t,n),c=s.shape;if(i){var u=Object(a.I)(n,e.shape);c=o.e(s.shape,u)}return Object(f.a)(s,c)}})},function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(223);function a(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(31),a=n(17),i=n(26),o=n(1),s=n(275);function c(e){var t=o.useRef({}),n=o.useState([]),c=Object(i.a)(n,2),u=c[0],l=c[1];return[function(n){var i=!0;e.add(n,(function(e,n){var c=n.key;if(e&&(!t.current[c]||i)){var u=o.createElement(s.a,Object(a.a)({},n,{holder:e}));t.current[c]=u,l((function(e){var t=e.findIndex((function(e){return e.key===n.key}));if(-1===t)return[].concat(Object(r.a)(e),[u]);var a=Object(r.a)(e);return a[t]=u,a}))}i=!1}))},o.createElement(o.Fragment,null,u)]}},function(e,t,n){"use strict";var r=n(1),a=Object(r.createContext)({});t.a=a},function(e,t,n){"use strict";t.a=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(26),a=n(1);function i(){var e=a.useReducer((function(e){return e+1}),0);return Object(r.a)(e,2)[1]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(21),o=n(11),s=n(22);var c=Object(o.b)({conv2DBackpropInput_:function(e,t,n,o,c){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",l=arguments.length>6?arguments[6]:void 0;i.b(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var f=e,d=t,p=!1;3===t.rank&&(p=!0,d=Object(s.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),f=[1,e[0],e[1],e[2]]),i.b(4===f.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(f.length,".")})),i.b(4===d.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(d.rank)})),i.b(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var h="NHWC"===u?f[3]:f[1],v="NHWC"===u?d.shape[3]:d.shape[1];i.b(h===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(h,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),i.b(v===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(v,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),null!=l&&i.b(i.v(c),(function(){return"Error in conv2dDerInput: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(c,".")}));var m={dy:d,filter:n},b={strides:o,pad:c,dataFormat:u,dimRoundingMode:l,inputShape:f},g=r.a.runKernel(a.E,m,b);return p?Object(s.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(e,t,n){"use strict";n.r(t),n.d(t,"TEST_EPSILON_FLOAT16",(function(){return s})),n.d(t,"expectArraysClose",(function(){return c})),n.d(t,"testEpsilon",(function(){return u})),n.d(t,"expectPromiseToFail",(function(){return f})),n.d(t,"expectArraysEqual",(function(){return d})),n.d(t,"expectNumbersClose",(function(){return p})),n.d(t,"expectValuesInRange",(function(){return v})),n.d(t,"expectArrayBuffersEqual",(function(){return m})),n.d(t,"encodeStrings",(function(){return b}));var r=n(15),a=n(7),i=n(21),o=n(30),s=.1;function c(e,t,n){return null==n&&(n=u()),l(e,t,(function(e,t){return h(e,t,n)}))}function u(){return 32===r.a.backend.floatPrecision()?.001:s}function l(e,t,n){var r=!0;if((Object(i.A)(e)||Object(i.A)(t))&&(r=!1),Object(i.A)(e)&&Object(i.A)(t)&&(r=!0),r){var o=e.constructor.name,s=t.constructor.name;if(o!==s)throw new Error("Arrays are of different type. Actual: ".concat(o,". ")+"Expected: ".concat(s))}if(Array.isArray(e)&&Array.isArray(t)){var c=Object(a.c)(e),u=Object(a.c)(t);if(!Object(i.a)(c,u))throw new Error("Arrays have different shapes. "+"Actual: [".concat(c,"]. Expected: [").concat(u,"]"))}var l=Object(i.A)(e)?e:Object(i.m)(e),f=Object(i.A)(t)?t:Object(i.m)(t);if(l.length!==f.length)throw new Error("Arrays have different lengths actual: ".concat(l.length," vs ")+"expected: ".concat(f.length,".\n")+"Actual:   ".concat(l,".\n")+"Expected: ".concat(f,"."));for(var d=0;d<f.length;++d){var p=l[d],h=f[d];if(!n(p,h))throw new Error("Arrays differ: actual[".concat(d,"] = ").concat(p,", expected[").concat(d,"] = ").concat(h,".\n")+"Actual:   ".concat(l,".\n")+"Expected: ".concat(f,"."))}}function f(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function d(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return Object(i.z)(e)||Object(i.z)(e[0])||Object(i.z)(t)||Object(i.z)(t[0])?l(e,n,(function(e,t){return e==t})):l(e,t,(function(e,t){return h(e,t,0)}))}function p(e,t,n){if(null==n&&(n=u()),!h(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function h(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function v(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function m(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}function b(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?b(n):e[t]=Object(o.encodeString)(n)}return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(21),o=n(11),s=n(22);var c=Object(o.b)({conv2DBackpropFilter_:function(e,t,n,o,c){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",l=arguments.length>6?arguments[6]:void 0,f=e;3===e.rank&&(f=Object(s.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var d=t;3===d.rank&&(d=Object(s.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),i.b(4===f.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(f.shape,".")})),i.b(4===d.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(d.shape,".")})),i.b(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var p="NHWC"===u?f.shape[3]:f.shape[1],h="NHWC"===u?d.shape[3]:d.shape[1];i.b(p===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(p,") must ")+"match input depth in filter (".concat(n[2],".")})),i.b(h===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(h,") must ")+"match output depth for filter (".concat(n[3],").")})),null!=l&&i.b(i.v(c),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(c,".")}));var v={x:f,dy:d},m={strides:o,pad:c,dataFormat:u,dimRoundingMode:l,filterShape:n};return r.a.runKernel(a.D,v,m)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var r,a=n(17),i=n(16),o=n(26),s=n(38),c=n(1),u=n.n(c),l=n(23),f=n.n(l),d=n(63),p=n(141),h=n(41),v=function e(t){return Object(h.a)(this,e),new Error("unreachable case: ".concat(JSON.stringify(t)))},m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},b=function(e){return c.createElement(p.a,null,(function(t){var n,r=t.getPrefixCls,o=t.direction,s=e.prefixCls,u=e.size,l=e.className,d=m(e,["prefixCls","size","className"]),p=r("btn-group",s),h="";switch(u){case"large":h="lg";break;case"small":h="sm";break;case"middle":case void 0:break;default:console.warn(new v(u))}var b=f()(p,(n={},Object(i.a)(n,"".concat(p,"-").concat(h),h),Object(i.a)(n,"".concat(p,"-rtl"),"rtl"===o),n),l);return c.createElement("div",Object(a.a)({},d,{className:b}))}))},g=n(44),y=n(134),O=n(47),k=n(46),w=n(278),x=n(65),j=n(179),S=n(66);function _(e){return!e||null===e.offsetParent||e.hidden}function C(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3])||!(t[1]===t[2]&&t[2]===t[3])}var E=function(e){Object(O.a)(n,e);var t=Object(k.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.apply(this,arguments)).containerRef=c.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,n){var a,i;if(!(!t||_(t)||t.className.indexOf("-leave")>=0)){var o=e.props.insertExtraNode;e.extraNode=document.createElement("div");var s=Object(y.a)(e).extraNode,c=e.context.getPrefixCls;s.className="".concat(c(""),"-click-animating-node");var u=e.getAttributeName();if(t.setAttribute(u,"true"),n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&C(n)&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&"transparent"!==n){s.style.borderColor=n;var l=(null===(a=t.getRootNode)||void 0===a?void 0:a.call(t))||t.ownerDocument,f=l instanceof Document?l.body:null!==(i=l.firstChild)&&void 0!==i?i:l;r=Object(w.a)("\n      [".concat(c(""),"-click-animating-without-extra-node='true']::after, .").concat(c(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(n,";\n      }"),"antd-wave",{csp:e.csp,attachTo:f})}o&&t.appendChild(s),["transition","animation"].forEach((function(n){t.addEventListener("".concat(n,"start"),e.onTransitionStart),t.addEventListener("".concat(n,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var n=e.containerRef.current;t&&t.target===n&&!e.animationStart&&e.resetEffect(n)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!_(n.target)){e.resetEffect(t);var r=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,r)}),0),j.a.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=Object(j.a)((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",n,!0),{cancel:function(){t.removeEventListener("click",n,!0)}}}},e.renderWave=function(t){var n=t.csp,r=e.props.children;if(e.csp=n,!c.isValidElement(r))return r;var a=e.containerRef;return Object(x.c)(r)&&(a=Object(x.a)(r.ref,e.containerRef)),Object(S.a)(r,{ref:a})},e}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var n=this.props.insertExtraNode,a=this.getAttributeName();e.setAttribute(a,"false"),r&&(r.innerHTML=""),n&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(n){e.removeEventListener("".concat(n,"start"),t.onTransitionStart),e.removeEventListener("".concat(n,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return c.createElement(p.a,null,this.renderWave)}}]),n}(c.Component);E.contextType=p.b;var N=n(78),T=n(55),I=n(86),A=n(71),M=n(118),P=function(){return{width:0,opacity:0,transform:"scale(0)"}},R=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},D=function(e){var t=e.prefixCls,n=!!e.loading;return e.existIcon?u.a.createElement("span",{className:"".concat(t,"-loading-icon")},u.a.createElement(M.a,null)):u.a.createElement(A.b,{visible:n,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:P,onAppearActive:R,onEnterStart:P,onEnterActive:R,onLeaveStart:R,onLeaveActive:P},(function(e,n){var r=e.className,a=e.style;return u.a.createElement("span",{className:"".concat(t,"-loading-icon"),style:a,ref:n},u.a.createElement(M.a,{className:r}))}))},F=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},L=/^[\u4e00-\u9fa5]{2}$/,z=L.test.bind(L);function q(e){return"text"===e||"link"===e}function V(e,t){if(null!=e){var n,r=t?" ":"";return"string"!==typeof e&&"number"!==typeof e&&"string"===typeof e.type&&z(e.props.children)?Object(S.a)(e,{children:e.props.children.split("").join(r)}):"string"===typeof e?z(e)?c.createElement("span",null,e.split("").join(r)):c.createElement("span",null,e):(n=e,c.isValidElement(n)&&n.type===c.Fragment?c.createElement("span",null,e):e)}}Object(N.a)("default","primary","ghost","dashed","link","text"),Object(N.a)("circle","round"),Object(N.a)("submit","button","reset");function B(e){return"danger"===e?{danger:!0}:{type:e}}var U=function(e,t){var n,r,u=e.loading,l=void 0!==u&&u,h=e.prefixCls,v=e.type,m=e.danger,b=e.shape,g=e.size,y=e.className,O=e.children,k=e.icon,w=e.ghost,x=void 0!==w&&w,j=e.block,S=void 0!==j&&j,_=e.htmlType,C=void 0===_?"button":_,N=F(e,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),A=c.useContext(I.b),M=c.useState(!!l),P=Object(o.a)(M,2),R=P[0],L=P[1],B=c.useState(!1),U=Object(o.a)(B,2),W=U[0],G=U[1],H=c.useContext(p.b),K=H.getPrefixCls,X=H.autoInsertSpaceInButton,Q=H.direction,Y=t||c.createRef(),Z=c.useRef(),J=function(){return 1===c.Children.count(O)&&!k&&!q(v)};r="object"===Object(s.a)(l)&&l.delay?l.delay||!0:!!l,c.useEffect((function(){clearTimeout(Z.current),"number"===typeof r?Z.current=window.setTimeout((function(){L(r)}),r):L(r)}),[r]),c.useEffect((function(){if(Y&&Y.current&&!1!==X){var e=Y.current.textContent;J()&&z(e)?W||G(!0):W&&G(!1)}}),[Y]);var $=function(t){var n,r=e.onClick,a=e.disabled;R||a?t.preventDefault():null===(n=r)||void 0===n||n(t)};Object(T.a)(!("string"===typeof k&&k.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(k,"` at https://ant.design/components/icon")),Object(T.a)(!(x&&q(v)),"Button","`link` or `text` button can't be a `ghost` button.");var ee=K("btn",h),te=!1!==X,ne="";switch(g||A){case"large":ne="lg";break;case"small":ne="sm"}var re=R?"loading":k,ae=f()(ee,(n={},Object(i.a)(n,"".concat(ee,"-").concat(v),v),Object(i.a)(n,"".concat(ee,"-").concat(b),b),Object(i.a)(n,"".concat(ee,"-").concat(ne),ne),Object(i.a)(n,"".concat(ee,"-icon-only"),!O&&0!==O&&!!re),Object(i.a)(n,"".concat(ee,"-background-ghost"),x&&!q(v)),Object(i.a)(n,"".concat(ee,"-loading"),R),Object(i.a)(n,"".concat(ee,"-two-chinese-chars"),W&&te),Object(i.a)(n,"".concat(ee,"-block"),S),Object(i.a)(n,"".concat(ee,"-dangerous"),!!m),Object(i.a)(n,"".concat(ee,"-rtl"),"rtl"===Q),n),y),ie=k&&!R?k:c.createElement(D,{existIcon:!!k,prefixCls:ee,loading:!!R}),oe=O||0===O?function(e,t){var n=!1,r=[];return c.Children.forEach(e,(function(e){var t=Object(s.a)(e),a="string"===t||"number"===t;if(n&&a){var i=r.length-1,o=r[i];r[i]="".concat(o).concat(e)}else r.push(e);n=a})),c.Children.map(r,(function(e){return V(e,t)}))}(O,J()&&te):null,se=Object(d.a)(N,["navigate"]);if(void 0!==se.href)return c.createElement("a",Object(a.a)({},se,{className:ae,onClick:$,ref:Y}),ie,oe);var ce=c.createElement("button",Object(a.a)({},N,{type:C,className:ae,onClick:$,ref:Y}),ie,oe);return q(v)?ce:c.createElement(E,null,ce)},W=c.forwardRef(U);W.displayName="Button",W.Group=b,W.__ANT_BUTTON=!0;t.b=W},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="CheckCircleFilled";t.a=a.forwardRef(s)},function(e,t,n){"use strict";var r=n(17),a=n(16),i=n(1),o=n(23),s=n.n(o),c=n(141),u=n(98),l=function(){var e=(0,i.useContext(c.b).getPrefixCls)("empty-img-default");return i.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(24 31.67)"},i.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),i.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),i.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),i.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),i.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),i.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),i.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},i.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),i.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},f=function(){var e=(0,i.useContext(c.b).getPrefixCls)("empty-img-simple");return i.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},i.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),i.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},i.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),i.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))},d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},p=i.createElement(l,null),h=i.createElement(f,null),v=function(e){var t=e.className,n=e.prefixCls,o=e.image,l=void 0===o?p:o,f=e.description,v=e.children,m=e.imageStyle,b=d(e,["className","prefixCls","image","description","children","imageStyle"]),g=i.useContext(c.b),y=g.getPrefixCls,O=g.direction;return i.createElement(u.a,{componentName:"Empty"},(function(e){var o,c=y("empty",n),u="undefined"!==typeof f?f:e.description,d="string"===typeof u?u:"empty",p=null;return p="string"===typeof l?i.createElement("img",{alt:d,src:l}):l,i.createElement("div",Object(r.a)({className:s()(c,(o={},Object(a.a)(o,"".concat(c,"-normal"),l===h),Object(a.a)(o,"".concat(c,"-rtl"),"rtl"===O),o),t)},b),i.createElement("div",{className:"".concat(c,"-image"),style:m},p),u&&i.createElement("div",{className:"".concat(c,"-description")},u),v&&i.createElement("div",{className:"".concat(c,"-footer")},v))}))};v.PRESENTED_IMAGE_DEFAULT=p,v.PRESENTED_IMAGE_SIMPLE=h;t.a=v},function(e,t,n){var r=n(309),a=n(466),i=n(467),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):i(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";(function(e){n(15);var t=n(236),r=n(53),a=Object(r.c)();a.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),a.registerFlag("IS_BROWSER",(function(){return t.isBrowser()})),a.registerFlag("IS_NODE",(function(){return"undefined"!==typeof e&&"undefined"!==typeof e.versions&&"undefined"!==typeof e.versions.node})),a.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),a.registerFlag("PROD",(function(){return!1})),a.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return a.getBool("DEBUG")})),a.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),a.registerFlag("IS_TEST",(function(){return!1})),a.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0}))}).call(this,n(181))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(2),a=n(4),i=function(){function e(t,n){Object(r.a)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Object(a.a)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),o=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"decComplexRef",value:function(e){}},{key:"time",value:function(e){return s("time")}},{key:"read",value:function(e){return s("read")}},{key:"readSync",value:function(e){return s("readSync")}},{key:"numDataIds",value:function(){return s("numDataIds")}},{key:"disposeData",value:function(e){return s("disposeData")}},{key:"write",value:function(e,t,n){return s("write")}},{key:"move",value:function(e,t,n,r){return s("move")}},{key:"memory",value:function(){return s("memory")}},{key:"floatPrecision",value:function(){return s("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"batchMatMul",value:function(e,t,n,r){return s("batchMatMul")}},{key:"fusedBatchMatMul",value:function(e){e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights;return s("fusedBatchMatMul")}},{key:"slice",value:function(e,t,n){return s("slice")}},{key:"stridedSlice",value:function(e,t,n,r){return s("stridedSlice")}},{key:"unstack",value:function(e,t){return s("unstack")}},{key:"reverse",value:function(e,t){return s("reverse")}},{key:"concat",value:function(e,t){return s("concat")}},{key:"neg",value:function(e){return s("neg")}},{key:"add",value:function(e,t){return s("add")}},{key:"addN",value:function(e){return s("addN")}},{key:"subtract",value:function(e,t){return s("subtract")}},{key:"multiply",value:function(e,t){return s("multiply")}},{key:"realDivide",value:function(e,t){return s("realDivide")}},{key:"floorDiv",value:function(e,t){return s("floorDiv")}},{key:"sum",value:function(e,t){return s("sum")}},{key:"prod",value:function(e,t){return s("prod")}},{key:"unsortedSegmentSum",value:function(e,t,n){return s("unsortedSegmentSum")}},{key:"argMin",value:function(e,t){return s("argMin")}},{key:"argMax",value:function(e,t){return s("argMax")}},{key:"equal",value:function(e,t){return s("equal")}},{key:"notEqual",value:function(e,t){return s("notEqual")}},{key:"less",value:function(e,t){return s("less")}},{key:"lessEqual",value:function(e,t){return s("lessEqual")}},{key:"greater",value:function(e,t){return s("greater")}},{key:"greaterEqual",value:function(e,t){return s("greaterEqual")}},{key:"logicalNot",value:function(e){return s("logicalNot")}},{key:"logicalAnd",value:function(e,t){return s("logicalAnd")}},{key:"logicalOr",value:function(e,t){return s("logicalOr")}},{key:"where",value:function(e){return s("where")}},{key:"select",value:function(e,t,n){return s("select")}},{key:"topk",value:function(e,t,n){return s("topk")}},{key:"min",value:function(e,t){return s("min")}},{key:"minimum",value:function(e,t){return s("minimum")}},{key:"mod",value:function(e,t){return s("mod")}},{key:"max",value:function(e,t){return s("max")}},{key:"maximum",value:function(e,t){return s("maximum")}},{key:"all",value:function(e,t){return s("all")}},{key:"any",value:function(e,t){return s("any")}},{key:"squaredDifference",value:function(e,t){return s("squaredDifference")}},{key:"ceil",value:function(e){return s("ceil")}},{key:"floor",value:function(e){return s("floor")}},{key:"round",value:function(e){return s("round")}},{key:"sign",value:function(e){return s("sign")}},{key:"isNaN",value:function(e){return s("isNaN")}},{key:"isInf",value:function(e){return s("isInf")}},{key:"isFinite",value:function(e){return s("isFinite")}},{key:"pow",value:function(e,t){return s("pow")}},{key:"exp",value:function(e){return s("exp")}},{key:"expm1",value:function(e){return s("expm1")}},{key:"softmax",value:function(e,t){return s("softmax")}},{key:"log",value:function(e){return s("log")}},{key:"log1p",value:function(e){return s("log1p")}},{key:"sqrt",value:function(e){return s("sqrt")}},{key:"rsqrt",value:function(e){return s("rsqrt")}},{key:"square",value:function(e){return s("square")}},{key:"reciprocal",value:function(e){return s("reciprocal")}},{key:"relu",value:function(e){return s("relu")}},{key:"relu6",value:function(e){return s("relu6")}},{key:"prelu",value:function(e,t){return s("prelu")}},{key:"elu",value:function(e){return s("elu")}},{key:"eluDer",value:function(e,t){return s("eluDer")}},{key:"selu",value:function(e){return s("selu")}},{key:"int",value:function(e){return s("int")}},{key:"clip",value:function(e,t,n){return s("clip")}},{key:"abs",value:function(e){return s("abs")}},{key:"complexAbs",value:function(e){return s("complexAbs")}},{key:"sigmoid",value:function(e){return s("sigmoid")}},{key:"softplus",value:function(e){return s("softplus")}},{key:"sin",value:function(e){return s("sin")}},{key:"cos",value:function(e){return s("cos")}},{key:"tan",value:function(e){return s("tan")}},{key:"asin",value:function(e){return s("asin")}},{key:"acos",value:function(e){return s("acos")}},{key:"atan",value:function(e){return s("atan")}},{key:"atan2",value:function(e,t){return s("atan2")}},{key:"sinh",value:function(e){return s("sinh")}},{key:"cosh",value:function(e){return s("cosh")}},{key:"tanh",value:function(e){return s("tanh")}},{key:"asinh",value:function(e){return s("asinh")}},{key:"acosh",value:function(e){return s("acosh")}},{key:"atanh",value:function(e){return s("atanh")}},{key:"erf",value:function(e){return s("erf")}},{key:"step",value:function(e,t){return s("step")}},{key:"fusedConv2d",value:function(e){e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights;return s("fusedConv2d")}},{key:"conv2d",value:function(e,t,n){return s("conv2d")}},{key:"conv2dDerInput",value:function(e,t,n){return s("conv2dDerInput")}},{key:"conv2dDerFilter",value:function(e,t,n){return s("conv2dDerFilter")}},{key:"fusedDepthwiseConv2D",value:function(e){e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights;return s("fusedDepthwiseConv2D")}},{key:"depthwiseConv2D",value:function(e,t,n){return s("depthwiseConv2D")}},{key:"depthwiseConv2DDerInput",value:function(e,t,n){return s("depthwiseConv2DDerInput")}},{key:"depthwiseConv2DDerFilter",value:function(e,t,n){return s("depthwiseConv2DDerFilter")}},{key:"conv3d",value:function(e,t,n){return s("conv3d")}},{key:"conv3dDerInput",value:function(e,t,n){return s("conv3dDerInput")}},{key:"conv3dDerFilter",value:function(e,t,n){return s("conv3dDerFilter")}},{key:"maxPool",value:function(e,t){return s("maxPool")}},{key:"maxPoolBackprop",value:function(e,t,n,r){return s("maxPoolBackprop")}},{key:"avgPool",value:function(e,t){return s("avgPool")}},{key:"avgPoolBackprop",value:function(e,t,n){return s("avgPoolBackprop")}},{key:"avgPool3d",value:function(e,t){return s("avgPool3d")}},{key:"avgPool3dBackprop",value:function(e,t,n){return s("avgPool3dBackprop")}},{key:"maxPool3d",value:function(e,t){return s("maxPool3d")}},{key:"maxPool3dBackprop",value:function(e,t,n,r){return s("maxPool3dBackprop")}},{key:"reshape",value:function(e,t){return s("reshape")}},{key:"cast",value:function(e,t){return s("cast")}},{key:"tile",value:function(e,t){return s("tile")}},{key:"pad",value:function(e,t,n){return s("pad")}},{key:"transpose",value:function(e,t){return s("transpose")}},{key:"gather",value:function(e,t,n){return s("gather")}},{key:"gatherND",value:function(e,t){return s("gatherND")}},{key:"scatterND",value:function(e,t,n){return s("scatterND")}},{key:"batchToSpaceND",value:function(e,t,n){return s("batchToSpaceND")}},{key:"spaceToBatchND",value:function(e,t,n){return s("spaceToBatchND")}},{key:"resizeBilinear",value:function(e,t,n,r,a){return s("resizeBilinear")}},{key:"resizeBilinearBackprop",value:function(e,t,n){return s("resizeBilinearBackprop")}},{key:"resizeNearestNeighbor",value:function(e,t,n,r,a){return s("resizeNearestNeighbor")}},{key:"resizeNearestNeighborBackprop",value:function(e,t,n){return s("resizeNearestNeighborBackprop")}},{key:"batchNorm",value:function(e,t,n,r,a,i){return s("batchNorm")}},{key:"localResponseNormalization4D",value:function(e,t,n,r,a){return s("localResponseNormalization4D")}},{key:"LRNGrad",value:function(e,t,n,r,a,i,o){return s("LRNGrad")}},{key:"multinomial",value:function(e,t,n,r){return s("multinomial")}},{key:"oneHot",value:function(e,t,n,r){return s("oneHot")}},{key:"cumsum",value:function(e,t,n,r){return s("cumsum")}},{key:"nonMaxSuppression",value:function(e,t,n,r,a){return s("nonMaxSuppression")}},{key:"fft",value:function(e){return s("fft")}},{key:"ifft",value:function(e){return s("ifft")}},{key:"complex",value:function(e,t){return s("complex")}},{key:"real",value:function(e){return s("real")}},{key:"imag",value:function(e){return s("imag")}},{key:"cropAndResize",value:function(e,t,n,r,a,i){return s("cropAndResize")}},{key:"depthToSpace",value:function(e,t,n){return s("depthToSpace")}},{key:"split",value:function(e,t,n){return s("split")}},{key:"sparseToDense",value:function(e,t,n,r){return s("sparseToDense")}},{key:"diag",value:function(e){return s("diag")}},{key:"fill",value:function(e,t,n){return s("fill")}},{key:"onesLike",value:function(e){return s("onesLike")}},{key:"zerosLike",value:function(e){return s("zerosLike")}},{key:"linspace",value:function(e,t,n){return s("linspace")}},{key:"dispose",value:function(){return s("dispose")}}]),e}();function s(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({tanh_:function(e){var t={x:Object(i.a)(e,"x","tanh")};return r.a.runKernel(a.Sc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(15),a=n(10);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var o={start:e,stop:t,step:n,dtype:i};return r.a.runKernel(a.ic,{},o)}},function(e,t,n){var r=n(593),a=n(594),i="undefined"!==typeof Float64Array;function o(e,t){return e[0]-t[0]}function s(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(o);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function c(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var a="generic"===e;if(-1===t){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(i)()}if(0===t){i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(a?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(a?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",i)(u[e][0])}i=["'use strict'"];var o=r(t),c=o.map((function(e){return"i"+e})),l="this.offset+"+o.map((function(e){return"this.stride["+e+"]*i"+e})).join("+"),f=o.map((function(e){return"b"+e})).join(","),d=o.map((function(e){return"c"+e})).join(",");i.push("function "+n+"(a,"+f+","+d+",d){this.data=a","this.shape=["+f+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map((function(e){return"this.shape["+e+"]"})).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+n+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),a?i.push("return this.data.set("+l+",v)}"):i.push("return this.data["+l+"]=v}"),i.push("proto.get=function "+n+"_get("+c.join(",")+"){"),a?i.push("return this.data.get("+l+")}"):i.push("return this.data["+l+"]}"),i.push("proto.index=function "+n+"_index(",c.join(),"){return "+l+"}"),i.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+o.map((function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")})).join(",")+","+o.map((function(e){return"this.stride["+e+"]"})).join(",")+",this.offset)}");var p=o.map((function(e){return"a"+e+"=this.shape["+e+"]"})),h=o.map((function(e){return"c"+e+"=this.stride["+e+"]"}));i.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+h.join(","));for(var v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'&&i"+v+">=0){d=i"+v+"|0;b+=c"+v+"*d;a"+v+"-=d}");i.push("return new "+n+"(this.data,"+o.map((function(e){return"a"+e})).join(",")+","+o.map((function(e){return"c"+e})).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+o.map((function(e){return"a"+e+"=this.shape["+e+"]"})).join(",")+","+o.map((function(e){return"b"+e+"=this.stride["+e+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'){d=i"+v+"|0;if(d<0){c+=b"+v+"*(a"+v+"-1);a"+v+"=ceil(-a"+v+"/d)}else{a"+v+"=ceil(a"+v+"/d)}b"+v+"*=d}");i.push("return new "+n+"(this.data,"+o.map((function(e){return"a"+e})).join(",")+","+o.map((function(e){return"b"+e})).join(",")+",c)}");var m=new Array(t),b=new Array(t);for(v=0;v<t;++v)m[v]="a[i"+v+"]",b[v]="b[i"+v+"]";i.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map((function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+m.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'&&i"+v+">=0){c=(c+this.stride["+v+"]*i"+v+")|0}else{a.push(this.shape["+v+"]);b.push(this.stride["+v+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map((function(e){return"shape["+e+"]"})).join(",")+","+o.map((function(e){return"stride["+e+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(u[e],s)}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(e,t,n,r){if(void 0===e)return(0,u.array[0])([]);"number"===typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var o=t.length;if(void 0===n){n=new Array(o);for(var s=o-1,l=1;s>=0;--s)n[s]=l,l*=t[s]}if(void 0===r){r=0;for(s=0;s<o;++s)n[s]<0&&(r-=(t[s]-1)*n[s])}for(var f=function(e){if(a(e))return"buffer";if(i)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),d=u[f];d.length<=o+1;)d.push(c(f,d.length-1));return(0,d[o+1])(e,t,n,r)}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(1),a=Object(r.createContext)(void 0);t.a=a},function(e,t,n){"use strict";(function(e,r){var a;function i(){if(null==a){var t;if("undefined"!==typeof window)t=window;else if("undefined"!==typeof e)t=e;else if("undefined"!==typeof r)t=r;else{if("undefined"===typeof self)throw new Error("Could not find a global object");t=self}a=t}return a}function o(e,t){var n=function(){var e=i();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}))}).call(this,n(110),n(181))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="ExclamationCircleOutlined";t.a=a.forwardRef(s)},function(e,t,n){"use strict";(function(t){var r=n(101),a=n(436),i=n(322),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n(323)),e}(),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw i(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c}).call(this,n(181))},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){var r=n(455),a=n(456),i=n(457),o=n(458),s=n(459);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=i,c.prototype.has=o,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(328);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var r=n(182)(Object,"create");e.exports=r},function(e,t,n){var r=n(479);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){"use strict";(function(e){var r=n(522),a=n(523),i=n(524);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=d(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),a=(e=s(e,r)).write(t,n);a!==r&&(e=e.slice(0,a));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?s(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,a){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,a);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,a){var i,o=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var l=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*o}else-1!==l&&(i-=i-l),l=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var f=!0,d=0;d<c;d++)if(u(e,i+d)!==u(t,d)){f=!1;break}if(f)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function O(e,t,n,r){return U(V(t,e.length-n),e,n,r)}function k(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return k(e,t,n,r)}function x(e,t,n,r){return U(B(t),e,n,r)}function j(e,t,n,r){return U(function(e,t){for(var n,r,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,a=n%256,i.push(a),i.push(r);return i}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,s,c,u=e[a],l=null,f=u>239?4:u>223?3:u>191?2:1;if(a+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128===(192&(i=e[a+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=e[a+1],o=e[a+2],128===(192&i)&&128===(192&o)&&(c=(15&u)<<12|(63&i)<<6|63&o)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],128===(192&i)&&128===(192&o)&&128===(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),a+=f}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"===typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return f(null,e)},c.allocUnsafeSlow=function(e){return f(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?_(this,0,e):v.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,a){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(i,o),u=this.slice(r,a),l=e.slice(t,n),f=0;f<s;++f)if(u[f]!==l[f]){i=u[f],o=l[f];break}return i<o?-1:o<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return O(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function E(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=t;i<n;++i)a+=q(e[i]);return a}function I(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function A(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,a,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-n,2);a<i;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-n,4);a<i;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function D(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,i){return i||D(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return i||D(e,0,n,8),a.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var a=t-e;n=new c(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},c.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,a=1,i=this[e+--r];r>0&&(a*=256);)i+=this[e+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),a.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);M(this,e,t,n,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);M(this,e,t,n,a-1,-a)}var i=n-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,i=r-n;if(this===e&&n<t&&t<r)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},c.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var o=c.isBuffer(e)?e:V(new c(e,r).toString()),s=o.length;for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function B(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(z,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function U(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}}).call(this,n(110))},function(e,t,n){"use strict";function r(){if("undefined"!==typeof navigator&&null!=navigator){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function a(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}n.r(t),n.d(t,"isMobile",(function(){return r})),n.d(t,"isBrowser",(function(){return a}))},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","all","bool"),s={x:o},c={axis:t,keepDims:n};return r.a.runKernel(a.f,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","any","bool"),s={x:o},c={axis:t,keepDims:n};return r.a.runKernel(a.g,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","argMax"),o={x:n},s={axis:t};return r.a.runKernel(a.h,o,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","argMin"),o={x:n},s={axis:t};return r.a.runKernel(a.i,o,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(15),i=n(10),o=n(51),s=n(7),c=n(11);var u=Object(c.b)({atan2_:function(e,t){var n=Object(s.a)(e,"a","atan2"),c=Object(s.a)(t,"b","atan2"),u=Object(o.makeTypesMatch)(n,c),l=Object(r.a)(u,2),f={a:n=l[0],b:c=l[1]};return a.a.runKernel(i.m,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),a=n(21),i=n(111),o=n(60),s=n(11),c=n(22);var u=Object(s.b)({conv1d_:function(e,t,n,s){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,f=arguments.length>6?arguments[6]:void 0,d=Object(r.a)(e,"x","conv1d"),p=Object(r.a)(t,"filter","conv1d"),h=d,v=!1;2===d.rank&&(v=!0,h=Object(c.a)(d,[1,d.shape[0],d.shape[1]])),a.b(3===h.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(h.rank,".")})),a.b(3===p.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(p.rank,".")})),null!=f&&a.b(a.v(s),(function(){return"Error in conv1d: pad must be an integer when using, "+"dimRoundingMode ".concat(f," but got pad ").concat(s,".")})),a.b(h.shape[2]===p.shape[1],(function(){return"Error in conv1d: depth of input (".concat(h.shape[2],") must match ")+"input depth for filter ".concat(p.shape[1],".")})),a.b(o.h(n,l),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(l,"'")})),a.b("NWC"===u,(function(){return"Error in conv1d: got dataFormat of ".concat(u," but only NWC is currently supported.")}));var m=Object(c.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]]),b=Object(c.a)(h,[h.shape[0],1,h.shape[1],h.shape[2]]),g=[1,n],y=[1,l],O="NHWC",k=Object(i.a)(b,m,g,s,O,y,f);return v?Object(c.a)(k,[k.shape[2],k.shape[3]]):Object(c.a)(k,[k.shape[0],k.shape[2],k.shape[3]])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),a=n(209),i=n(11);var o=Object(i.b)({conv2dTranspose_:function(e,t,n,i,o,s){var c=Object(r.a)(e,"x","conv2dTranspose"),u=Object(r.a)(t,"filter","conv2dTranspose");return Object(a.a)(n,c,u,i,o,"NHWC",s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({cosh_:function(e){var t={x:Object(i.a)(e,"x","cosh")};return r.a.runKernel(a.J,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",s=Object(i.a)(e,"x","depthToSpace"),c="NHWC"===n?s.shape[1]:s.shape[2],u="NHWC"===n?s.shape[2]:s.shape[3],l="NHWC"===n?s.shape[3]:s.shape[1];o.b(c*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(c," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(s.shape)})),o.b(u*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(u," and ").concat(t," for depthToSpace with input shape\n        ").concat(s.shape)})),o.b(l%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(l," for depthToSpace with input shape ").concat(s.shape)}));var f={x:s},d={blockSize:t,dataFormat:n};return r.a.runKernel(a.N,f,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11),c=n(22);var u=Object(s.b)({dilation2d_:function(e,t,n,s){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",f=Object(i.a)(e,"x","dilation2d"),d=Object(i.a)(t,"filter","dilation2d");o.b(3===f.rank||4===f.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(f.rank,".")})),o.b(3===d.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(d.rank,".")})),o.b("NHWC"===l,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(l)}));var p=f,h=!1;3===f.rank&&(p=Object(c.a)(f,[1,f.shape[0],f.shape[1],f.shape[2]]),h=!0);var v={x:p,filter:d},m={strides:n,pad:s,dilations:u},b=r.a.runKernel(a.S,v,m);return h?Object(c.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(8),a=n(51),i=n(7),o=n(36),s=n(128),c=n(11),u=n(70),l=n(45);var f=Object(c.b)({divNoNan_:function(e,t){var n=Object(i.a)(e,"a","div"),c=Object(i.a)(t,"b","div"),f=Object(a.makeTypesMatch)(n,c),d=Object(r.a)(f,2);n=d[0],c=d[1];var p=Object(o.a)(n,c),h=Object(l.a)(p),v=Object(s.a)(c,h);return Object(u.a)(v,h,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(21),i=n(59),o=n(11),s=n(22);var c=Object(o.b)({dot_:function(e,t){var n=Object(r.a)(e,"t1","dot"),o=Object(r.a)(t,"t2","dot");a.b((1===n.rank||2===n.rank)&&(1===o.rank||2===o.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(o.rank,".")}));var c=1===n.rank?n.size:n.shape[1],u=1===o.rank?o.size:o.shape[0];if(a.b(c===u,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(c," and ").concat(u,".")})),1===n.rank&&1===o.rank){var l=Object(s.a)(n,[1,-1]),f=Object(s.a)(o,[-1,1]),d=Object(i.a)(l,f);return Object(s.a)(d,[])}if(1===n.rank&&2===o.rank){var p=Object(s.a)(n,[1,-1]),h=Object(s.a)(o,[o.shape[0],o.shape[1]]),v=Object(i.a)(p,h);return Object(s.a)(v,[v.size])}if(2===n.rank&&1===o.rank){var m=Object(s.a)(o,[-1,1]),b=Object(i.a)(n,m);return Object(s.a)(b,[b.size])}var g=Object(s.a)(o,[o.shape[0],o.shape[1]]);return Object(i.a)(n,g)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11),c=n(22);var u=Object(s.b)({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,l=Object(i.a)(e,"x","localResponseNormalization");o.b(4===l.rank||3===l.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(l.rank,".")})),o.b(o.v(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var f=l,d=!1;3===l.rank&&(d=!0,f=Object(c.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));var p={x:f},h={depthRadius:t,bias:n,alpha:s,beta:u},v=r.a.runKernel(a.vb,p,h);return d?Object(c.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({log1p_:function(e){var t={x:Object(i.a)(e,"x","log1p")};return r.a.runKernel(a.Cb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({softplus_:function(e){var t={x:Object(i.a)(e,"x","softplus")};return r.a.runKernel(a.Gc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),a=n(39),i=n(103),o=n(153),s=n(194),c=n(11);var u=Object(c.b)({logicalXor_:function(e,t){var n=Object(r.a)(e,"a","logicalXor","bool"),c=Object(r.a)(t,"b","logicalXor","bool");return Object(a.a)(n.shape,c.shape),Object(i.a)(Object(s.a)(e,t),Object(o.a)(Object(i.a)(e,t)))}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({mirrorPad_:function(e,t,n){o.b("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var s=Object(i.a)(e,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");o.b(t.length===s.rank,(function(){return"Padding doesn't match input. Must be ".concat(s.rank,". ")+"Got ".concat(t.length,".")}));for(var c="reflect"===n?1:0,u=function(e){o.b(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),o.b(t[e][0]>=0&&t[e][0]<=s.shape[e]-c&&t[e][1]>=0&&t[e][1]<=s.shape[e]-c,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(s.shape[e]-c," or less than 0 for input of ")+"shape ".concat(s.shape)}))},l=0;l<s.rank;l++)u(l);var f={paddings:t,mode:n},d={x:s};return r.a.runKernel(a.Rb,d,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(8),a=n(7),i=n(21),o=n(186),s=n(150),c=n(60),u=n(195),l=n(11),f=n(22),d=n(156);var p=Object(l.b)({pool_:function(e,t,n,l,p,h){null==p&&(p=[1,1]),null==h&&(h=1),0===l&&(l="valid");var v=Object(a.a)(e,"x","maxPool"),m=v,b=!1;3===v.rank&&(b=!0,m=Object(f.a)(v,[1,v.shape[0],v.shape[1],v.shape[2]])),i.b(c.h(h,p),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(h," and dilations '").concat(p,"'")}));var g,y=c.e(m.shape,t,h,p,l),O=[y.dilationHeight,y.dilationWidth];g="same"===l?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([y.filterHeight,y.filterWidth],O):[[0,0],[0,0]];var k=1===O[0]&&1===O[1],w=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),c=t.map((function(e,t){return[r[t],s[t]]})),u=t.map((function(e,t){return[0,o[t]]}));return[c,u]}([y.inHeight,y.inWidth],O,g),x=Object(r.a)(w,2),j=x[0],S=x[1],_=k?l:"valid",C=k?m:Object(d.a)(m,O,j),E=("avg"===n?function(){return Object(o.a)(C,t,h,_)}:function(){return Object(u.a)(C,t,h,_)})(),N=k?E:Object(s.a)(E,O,S);return b?Object(f.a)(N,[N.shape[1],N.shape[2],N.shape[3]]):N}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(32),s=n(11);var c=Object(s.b)({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(i.a)(e,"x","prod");"bool"===s.dtype&&(s=Object(o.a)(s,"int32"));var c={x:s},u={axis:t,keepDims:n};return r.a.runKernel(a.hc,c,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(88),a=n(11),i=n(163);var o=Object(a.b)({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0,s=Object(r.a)(e,a),c=new i.c(t,n,null,o),u=0;u<s.values.length;u++)s.values[u]=c.nextValue();return s.toTensor()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({rsqrt_:function(e){var t={x:Object(i.a)(e,"x","rsqrt")};return r.a.runKernel(a.wc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({selu_:function(e){var t={x:Object(i.a)(e,"x","selu")};return r.a.runKernel(a.zc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),a=n(21),i=n(111),o=n(127),s=n(11),c=n(22);var u=Object(s.b)({separableConv2d_:function(e,t,n,s,u){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",d=Object(r.a)(e,"x","separableConv2d"),p=Object(r.a)(t,"depthwiseFilter","separableConv2d"),h=Object(r.a)(n,"pointwiseFilter","separableConv2d"),v=d,m=!1;if(3===d.rank&&(m=!0,v=Object(c.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),"NCHW"===f)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");a.b(4===v.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(v.rank,".")})),a.b(4===p.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(p.rank,".")})),a.b(4===h.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(p.rank,".")})),a.b(1===h.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(h.shape[0],".")})),a.b(1===h.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(h.shape[1],".")}));var b=p.shape[2],g=p.shape[3];a.b(h.shape[2]===b*g,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(b*g,", ")+"but got ".concat(h.shape[2],".")}));var y=Object(o.a)(v,p,s,u,f,l),O=1,k=Object(i.a)(y,h,O,"valid",f);return m?Object(c.a)(k,[k.shape[1],k.shape[2],k.shape[3]]):k}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({sin_:function(e){var t={x:Object(i.a)(e,"x","sin")};return r.a.runKernel(a.Cc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({sinh_:function(e){var t={x:Object(i.a)(e,"x","sinh")};return r.a.runKernel(a.Dc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(102),a=n(64),i=n(191),o=n(27),s=n(11),c=n(174),u=n(22),l=n(90),f=n(37),d=n(57),p=n(175);var h=Object(s.b)({irfft_:function(e){var t,n=e.shape[e.shape.length-1],s=e.size/n;if(n<=2){var h=Object(u.a)(e,[s,n]);t=Object(p.a)(h)}else{var v=[s,2*(n-1)],m=Object(u.a)(Object(c.a)(e),[s,n]),b=Object(u.a)(Object(i.a)(e),[s,n]),g=Object(l.a)(Object(d.a)(m,[0,1],[s,n-2]),1),y=Object(o.a)(Object(l.a)(Object(d.a)(b,[0,1],[s,n-2]),1),Object(f.a)(-1)),O=Object(a.a)([m,g],1),k=Object(a.a)([b,y],1),w=Object(u.a)(Object(r.a)(O,k),[v[0],v[1]]);t=Object(p.a)(w)}if(t=Object(c.a)(t),3===e.rank&&0!==e.shape[0]){var x=t,j=e.shape[0];t=Object(u.a)(t,[j,t.shape[0]/j,t.shape[1]]),x.dispose()}return t}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),a=n(21),i=n(91);function o(e,t,n){if(Object(a.d)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var o=Object(r.c)(e,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Object(i.a)(e,t,o,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(8),a=n(15),i=n(10),o=n(7),s=n(11);var c=Object(s.b)({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Object(o.a)(e,"x","topk");if(0===s.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var c=s.shape[s.shape.length-1];if(t>c)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(c,") ")+"but got ".concat(t));var u={x:s},l={k:t,sorted:n},f=a.a.runKernel(i.Uc,u,l),d=Object(r.a)(f,2),p=d[0],h=d[1];return{values:p,indices:h}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(15),i=n(10),o=n(7),s=n(21),c=n(11);var u=Object(c.b)({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(o.a)(e,"x","unique","string_or_numeric");Object(s.b)(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var c={x:n},u={axis:t},l=a.a.runKernel(i.Wc,c,u),f=Object(r.a)(l,2),d=f[0],p=f[1];return{values:d,indices:p}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),a=n.n(r),i=n(12),o=n(268),s=n(7);function c(){return(c=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,i=Object(o.a)(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=function(e){return c.apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(88);function a(e,t){for(var n=[],a=0;a<t.length;a++)t[a]&&n.push(a);for(var i=Object(r.a)(e,"int32"),o=Object(r.a)([n.length,e.length],"int32"),s=0;s<n.length;s++){var c=i.indexToLoc(n[s]),u=s*e.length;o.values.set(c,u)}return o.toTensor()}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";e.exports=n(448)},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(17),a=n(16),i=n(41),o=n(44),s=n(47),c=n(46),u=n(1),l=n(67),f=n.n(l),d=n(23),p=n.n(d),h=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).closeTimer=null,e.close=function(t){t&&t.stopPropagation(),e.clearCloseTimer();var n=e.props,r=n.onClose,a=n.noticeKey;r&&r(a)},e.startCloseTimer=function(){e.props.duration&&(e.closeTimer=window.setTimeout((function(){e.close()}),1e3*e.props.duration))},e.clearCloseTimer=function(){e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=null)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.updateMark!==e.updateMark||this.props.visible!==e.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,i=t.className,o=t.closable,s=t.closeIcon,c=t.style,l=t.onClick,d=t.children,h=t.holder,v="".concat(n,"-notice"),m=Object.keys(this.props).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(t[n]=e.props[n]),t}),{}),b=u.createElement("div",Object(r.a)({className:p()(v,i,Object(a.a)({},"".concat(v,"-closable"),o)),style:c,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:l},m),u.createElement("div",{className:"".concat(v,"-content")},d),o?u.createElement("a",{tabIndex:0,onClick:this.close,className:"".concat(v,"-close")},s||u.createElement("span",{className:"".concat(v,"-close-x")})):null);return h?f.a.createPortal(b,h):b}}]),n}(u.Component);h.defaultProps={onClose:function(){},duration:1.5}},function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(272),a=n(276),i=n(204),o=n(273);function s(e){return Object(r.a)(e)||Object(a.a)(e)||Object(i.a)(e)||Object(o.a)()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(106),a="rc-util-key";function i(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(r.a)())return null;var a,o=document.createElement("style");(null===(t=n.csp)||void 0===t?void 0:t.nonce)&&(o.nonce=null===(a=n.csp)||void 0===a?void 0:a.nonce);o.innerHTML=e;var s=i(n),c=s.firstChild;return n.prepend&&s.prepend?s.prepend(o):n.prepend&&c?s.insertBefore(o,c):s.appendChild(o),o}var s=new Map;function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i(n);if(!s.has(r)){var c=o("",n),u=c.parentNode;s.set(r,u),u.removeChild(c)}var l=Array.from(s.get(r).children).find((function(e){return"STYLE"===e.tagName&&e[a]===t}));if(l){var f,d,p;if((null===(f=n.csp)||void 0===f?void 0:f.nonce)&&l.nonce!==(null===(d=n.csp)||void 0===d?void 0:d.nonce))l.nonce=null===(p=n.csp)||void 0===p?void 0:p.nonce;return l.innerHTML!==e&&(l.innerHTML=e),l}var h=o(e,n);return h[a]=t,h}},function(e,t,n){(function(e){!function(n,r){"use strict";var a={};n.PubSub=a,function(e){var t={},n=-1,r="*";function a(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function i(e){return function(){throw e}}function o(e,t,n){try{e(t,n)}catch(r){setTimeout(i(r),0)}}function s(e,t,n){e(t,n)}function c(e,n,r,a){var i,c=t[n],u=a?s:o;if(Object.prototype.hasOwnProperty.call(t,n))for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&u(c[i],e,r)}function u(e,t,n){return function(){var a=String(e),i=a.lastIndexOf(".");for(c(e,e,t,n);-1!==i;)i=(a=a.substr(0,i)).lastIndexOf("."),c(e,a,t,n);c(e,r,t,n)}}function l(e){var n=String(e);return Boolean(Object.prototype.hasOwnProperty.call(t,n)&&a(t[n]))}function f(e){for(var t=String(e),n=l(t)||l(r),a=t.lastIndexOf(".");!n&&-1!==a;)a=(t=t.substr(0,a)).lastIndexOf("."),n=l(t);return n}function d(e,t,n,r){var a=u(e="symbol"===typeof e?e.toString():e,t,r);return!!f(e)&&(!0===n?a():setTimeout(a,0),!0)}e.publish=function(t,n){return d(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return d(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,r){if("function"!==typeof r)return!1;e="symbol"===typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(t,e)||(t[e]={});var a="uid_"+String(++n);return t[e][a]=r,a},e.subscribeAll=function(t){return e.subscribe(r,t)},e.subscribeOnce=function(t,n){var r=e.subscribe(t,(function(){e.unsubscribe(r),n.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)&&delete t[n]},e.countSubscriptions=function(e){var n,r,a=0;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)){for(r in t[n])a++;break}return a},e.getSubscriptions=function(e){var n,r=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)&&r.push(n);return r},e.unsubscribe=function(n){var r,a,i,o=function(e){var n;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e))return!0;return!1},s="string"===typeof n&&(Object.prototype.hasOwnProperty.call(t,n)||o(n)),c=!s&&"string"===typeof n,u="function"===typeof n,l=!1;if(!s){for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(a=t[r],c&&a[n]){delete a[n],l=n;break}if(u)for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&a[i]===n&&(delete a[i],l=!0)}return l}e.clearSubscriptions(n)}}(a),void 0!==e&&e.exports&&(t=e.exports=a),t.PubSub=a,e.exports=t=a}("object"===typeof window&&window||this)}).call(this,n(74)(e))},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var a=r[n];e.call(t,a[1],a[0])}},t}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,a="undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),i="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(a):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var o=["top","right","bottom","left","width","height","size","weight"],s="undefined"!==typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,a=0;function o(){n&&(n=!1,e()),r&&c()}function s(){i(o)}function c(){var e=Date.now();if(n){if(e-a<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);a=e}return c}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;o.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},l=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||a},f=b(0,0,0,0);function d(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+d(e["border-"+n+"-width"])}),0)}function h(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var r=l(e).getComputedStyle(e),a=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var a=r[n],i=e["padding-"+a];t[a]=d(i)}return t}(r),i=a.left+a.right,o=a.top+a.bottom,s=d(r.width),c=d(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=p(r,"left","right")+i),Math.round(c+o)!==n&&(c-=p(r,"top","bottom")+o)),!function(e){return e===l(e).document.documentElement}(e)){var u=Math.round(s+i)-t,h=Math.round(c+o)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(h)&&(c-=h)}return b(a.left,a.top,s,c)}var v="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof l(e).SVGGraphicsElement}:function(e){return e instanceof l(e).SVGElement&&"function"===typeof e.getBBox};function m(e){return r?v(e)?function(e){var t=e.getBBox();return b(0,0,t.width,t.height)}(e):h(e):f}function b(e,t,n,r){return{x:e,y:t,width:n,height:r}}var g=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),y=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(i.prototype);return u(o,{x:t,y:n,width:r,height:a,top:n,right:t+r,bottom:a+n,left:t}),o}(t);u(this,{target:e,contentRect:n})},O=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new y(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),k="undefined"!==typeof WeakMap?new WeakMap:new n,w=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new O(t,n,this);k.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){w.prototype[e]=function(){var t;return(t=k.get(this))[e].apply(t,arguments)}}));var x="undefined"!==typeof a.ResizeObserver?a.ResizeObserver:w;t.a=x}).call(this,n(110))},function(e,t,n){"use strict";var r=n(1),a=n(67),i=n.n(a),o=n(106),s=Object(r.forwardRef)((function(e,t){var n=e.didUpdate,a=e.getContainer,s=e.children,c=Object(r.useRef)();Object(r.useImperativeHandle)(t,(function(){return{}}));var u=Object(r.useRef)(!1);return!u.current&&Object(o.a)()&&(c.current=a(),u.current=!0),Object(r.useEffect)((function(){null===n||void 0===n||n(e)})),Object(r.useEffect)((function(){return function(){var e,t;null===(e=c.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(c.current)}}),[]),c.current?i.a.createPortal(s,c.current):null}));t.a=s},function(e,t,n){"use strict";t.a=function(e){if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();if(n.width||n.height)return!0}return!1}},function(e,t,n){var r=n(452);e.exports=function(e,t){return r(e,t)}},function(e,t,n){"use strict";var r=n(26),a=n(1),i=n(177);t.a=function(){var e=a.useState(!1),t=Object(r.a)(e,2),n=t[0],o=t[1];return a.useEffect((function(){o(Object(i.b)())}),[]),n}},function(e,t,n){"use strict";var r=n(1),a=Object(r.createContext)({});t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r={adjustX:1,adjustY:1},a=[0,0],i={left:{points:["cr","cl"],overflow:r,offset:[-4,0],targetOffset:a},right:{points:["cl","cr"],overflow:r,offset:[4,0],targetOffset:a},top:{points:["bc","tc"],overflow:r,offset:[0,-4],targetOffset:a},bottom:{points:["tc","bc"],overflow:r,offset:[0,4],targetOffset:a},topLeft:{points:["bl","tl"],overflow:r,offset:[0,-4],targetOffset:a},leftTop:{points:["tr","tl"],overflow:r,offset:[-4,0],targetOffset:a},topRight:{points:["br","tr"],overflow:r,offset:[0,-4],targetOffset:a},rightTop:{points:["tl","tr"],overflow:r,offset:[4,0],targetOffset:a},bottomRight:{points:["tr","br"],overflow:r,offset:[0,4],targetOffset:a},rightBottom:{points:["bl","br"],overflow:r,offset:[4,0],targetOffset:a},bottomLeft:{points:["tl","bl"],overflow:r,offset:[0,4],targetOffset:a},leftBottom:{points:["br","bl"],overflow:r,offset:[-4,0],targetOffset:a}}},function(e,t,n){"use strict";var r=n(16),a=n(17),i=n(38),o=n(1),s=n(23),c=n.n(s),u=n(285),l=n(141),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var d=["xs","sm","md","lg","xl","xxl"],p=o.forwardRef((function(e,t){var n,s=o.useContext(l.b),p=s.getPrefixCls,h=s.direction,v=o.useContext(u.a),m=v.gutter,b=v.wrap,g=v.supportFlexGap,y=e.prefixCls,O=e.span,k=e.order,w=e.offset,x=e.push,j=e.pull,S=e.className,_=e.children,C=e.flex,E=e.style,N=f(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),T=p("col",y),I={};d.forEach((function(t){var n,o={},s=e[t];"number"===typeof s?o.span=s:"object"===Object(i.a)(s)&&(o=s||{}),delete N[t],I=Object(a.a)(Object(a.a)({},I),(n={},Object(r.a)(n,"".concat(T,"-").concat(t,"-").concat(o.span),void 0!==o.span),Object(r.a)(n,"".concat(T,"-").concat(t,"-order-").concat(o.order),o.order||0===o.order),Object(r.a)(n,"".concat(T,"-").concat(t,"-offset-").concat(o.offset),o.offset||0===o.offset),Object(r.a)(n,"".concat(T,"-").concat(t,"-push-").concat(o.push),o.push||0===o.push),Object(r.a)(n,"".concat(T,"-").concat(t,"-pull-").concat(o.pull),o.pull||0===o.pull),Object(r.a)(n,"".concat(T,"-rtl"),"rtl"===h),n))}));var A=c()(T,(n={},Object(r.a)(n,"".concat(T,"-").concat(O),void 0!==O),Object(r.a)(n,"".concat(T,"-order-").concat(k),k),Object(r.a)(n,"".concat(T,"-offset-").concat(w),w),Object(r.a)(n,"".concat(T,"-push-").concat(x),x),Object(r.a)(n,"".concat(T,"-pull-").concat(j),j),n),S,I),M={};if(m&&m[0]>0){var P=m[0]/2;M.paddingLeft=P,M.paddingRight=P}if(m&&m[1]>0&&!g){var R=m[1]/2;M.paddingTop=R,M.paddingBottom=R}return C&&(M.flex=function(e){return"number"===typeof e?"".concat(e," ").concat(e," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}(C),"auto"!==C||!1!==b||M.minWidth||(M.minWidth=0)),o.createElement("div",Object(a.a)({},N,{style:Object(a.a)(Object(a.a)({},M),E),className:A,ref:t}),_)}));p.displayName="Col",t.a=p},function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(21),o=n(11),s=n(22);var c=Object(o.b)({conv3DBackpropInput_:function(e,t,n,o,c){i.b(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var u=e,l=t,f=!1;4===t.rank&&(f=!0,l=Object(s.a)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),u=[1,e[0],e[1],e[2],e[3]]);var d=u[4],p=l.shape[4];i.b(5===u.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(u.length,".")})),i.b(5===l.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(l.rank)})),i.b(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),i.b(d===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(d,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),i.b(p===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(p,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var h={dy:l,filter:n},v={pad:c,strides:o,inputShape:u},m=r.a.runKernel(a.H,h,v);return f?Object(s.a)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(291),a=n(15),i=n(10),o=n(7),s=n(21),c=n(11),u=n(22);var l=Object(c.b)({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=Object(o.a)(e,"images","resizeNearestNeighbor");s.b(3===l.rank||4===l.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),s.b(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),s.b("float32"===l.dtype||"int32"===l.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),s.b(!1===c||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var f=l,d=!1;3===l.rank&&(d=!0,f=Object(u.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),Object(r.a)(t);var p={images:f},h={alignCorners:n,halfPixelCenters:c,size:t},v=a.a.runKernel(i.rc,p,h);return d?Object(u.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(269),a=n(288),i=n(159),o=n(270);function s(e){return Object(r.a)(e)||Object(a.a)(e)||Object(i.a)(e)||Object(o.a)()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(291),a=n(15),i=n(10),o=n(7),s=n(21),c=n(11),u=n(22);var l=Object(c.b)({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=Object(o.a)(e,"images","resizeBilinear");s.b(3===l.rank||4===l.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),s.b(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),s.b(!1===c||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var f=l,d=!1;3===l.rank&&(d=!0,f=Object(u.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),Object(r.a)(t);var p={images:f},h={alignCorners:n,halfPixelCenters:c,size:t},v=a.a.runKernel(i.pc,p,h);return d?Object(u.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(11),o=n(22);var s=Object(i.b)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,i,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],u=arguments.length>6?arguments[6]:void 0,l=t,f=!1;3===t.rank&&(f=!0,l=Object(o.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={dy:l,filter:n},p={strides:i,pad:s,dimRoundingMode:u,dilations:c,inputShape:e},h=r.a.runKernel(a.Q,d,p);return f?Object(o.a)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(11),o=n(22);var s=Object(i.b)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,i,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],u=arguments.length>6?arguments[6]:void 0,l=e;3===e.rank&&(l=Object(o.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var f=t;3===f.rank&&(f=Object(o.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={x:l,dy:f},p={strides:i,pad:s,dimRoundingMode:u,dilations:c,filterShape:n};return r.a.runKernel(a.P,d,p)}})},function(e,t,n){var r=n(538),a=n(539),i=n(540),o=n(541),s=n(542),c=n(543),u=n(544);u.alea=r,u.xor128=a,u.xorwow=i,u.xorshift7=o,u.xor4096=s,u.tychei=c,e.exports=u},function(e,t,n){"use strict";function r(e){if(this.size=0|e,this.size<=1||0!==(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=e<<1;for(var t=new Array(2*this.size),n=0;n<t.length;n+=2){var r=Math.PI*n/this.size;t[n]=Math.cos(r),t[n+1]=-Math.sin(r)}this.table=t;for(var a=0,i=1;this.size>i;i<<=1)a++;this._width=a%2===0?a-1:a,this._bitrev=new Array(1<<this._width);for(var o=0;o<this._bitrev.length;o++){this._bitrev[o]=0;for(var s=0;s<this._width;s+=2){var c=this._width-s-2;this._bitrev[o]|=(o>>>s&3)<<c}}this._out=null,this._data=null,this._inv=0}e.exports=r,r.prototype.fromComplexArray=function(e,t){for(var n=t||new Array(e.length>>>1),r=0;r<e.length;r+=2)n[r>>>1]=e[r];return n},r.prototype.createComplexArray=function(){for(var e=new Array(this._csize),t=0;t<e.length;t++)e[t]=0;return e},r.prototype.toComplexArray=function(e,t){for(var n=t||this.createComplexArray(),r=0;r<n.length;r+=2)n[r]=e[r>>>1],n[r+1]=0;return n},r.prototype.completeSpectrum=function(e){for(var t=this._csize,n=t>>>1,r=2;r<n;r+=2)e[t-r]=e[r],e[t-r+1]=-e[r+1]},r.prototype.transform=function(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._out=e,this._data=t,this._inv=0,this._transform4(),this._out=null,this._data=null},r.prototype.realTransform=function(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._out=e,this._data=t,this._inv=0,this._realTransform4(),this._out=null,this._data=null},r.prototype.inverseTransform=function(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._out=e,this._data=t,this._inv=1,this._transform4();for(var n=0;n<e.length;n++)e[n]/=this.size;this._out=null,this._data=null},r.prototype._transform4=function(){var e,t,n=this._out,r=this._csize,a=1<<this._width,i=r/a<<1,o=this._bitrev;if(4===i)for(e=0,t=0;e<r;e+=i,t++){var s=o[t];this._singleTransform2(e,s,a)}else for(e=0,t=0;e<r;e+=i,t++){var c=o[t];this._singleTransform4(e,c,a)}var u=this._inv?-1:1,l=this.table;for(a>>=2;a>=2;a>>=2){var f=(i=r/a<<1)>>>2;for(e=0;e<r;e+=i)for(var d=e+f,p=e,h=0;p<d;p+=2,h+=a){var v=p,m=v+f,b=m+f,g=b+f,y=n[v],O=n[v+1],k=n[m],w=n[m+1],x=n[b],j=n[b+1],S=n[g],_=n[g+1],C=y,E=O,N=l[h],T=u*l[h+1],I=k*N-w*T,A=k*T+w*N,M=l[2*h],P=u*l[2*h+1],R=x*M-j*P,D=x*P+j*M,F=l[3*h],L=u*l[3*h+1],z=S*F-_*L,q=S*L+_*F,V=C+R,B=E+D,U=C-R,W=E-D,G=I+z,H=A+q,K=u*(I-z),X=u*(A-q),Q=V+G,Y=B+H,Z=V-G,J=B-H,$=U+X,ee=W-K,te=U-X,ne=W+K;n[v]=Q,n[v+1]=Y,n[m]=$,n[m+1]=ee,n[b]=Z,n[b+1]=J,n[g]=te,n[g+1]=ne}}},r.prototype._singleTransform2=function(e,t,n){var r=this._out,a=this._data,i=a[t],o=a[t+1],s=a[t+n],c=a[t+n+1],u=i+s,l=o+c,f=i-s,d=o-c;r[e]=u,r[e+1]=l,r[e+2]=f,r[e+3]=d},r.prototype._singleTransform4=function(e,t,n){var r=this._out,a=this._data,i=this._inv?-1:1,o=2*n,s=3*n,c=a[t],u=a[t+1],l=a[t+n],f=a[t+n+1],d=a[t+o],p=a[t+o+1],h=a[t+s],v=a[t+s+1],m=c+d,b=u+p,g=c-d,y=u-p,O=l+h,k=f+v,w=i*(l-h),x=i*(f-v),j=m+O,S=b+k,_=g+x,C=y-w,E=m-O,N=b-k,T=g-x,I=y+w;r[e]=j,r[e+1]=S,r[e+2]=_,r[e+3]=C,r[e+4]=E,r[e+5]=N,r[e+6]=T,r[e+7]=I},r.prototype._realTransform4=function(){var e,t,n=this._out,r=this._csize,a=1<<this._width,i=r/a<<1,o=this._bitrev;if(4===i)for(e=0,t=0;e<r;e+=i,t++){var s=o[t];this._singleRealTransform2(e,s>>>1,a>>>1)}else for(e=0,t=0;e<r;e+=i,t++){var c=o[t];this._singleRealTransform4(e,c>>>1,a>>>1)}var u=this._inv?-1:1,l=this.table;for(a>>=2;a>=2;a>>=2){var f=(i=r/a<<1)>>>1,d=f>>>1,p=d>>>1;for(e=0;e<r;e+=i)for(var h=0,v=0;h<=p;h+=2,v+=a){var m=e+h,b=m+d,g=b+d,y=g+d,O=n[m],k=n[m+1],w=n[b],x=n[b+1],j=n[g],S=n[g+1],_=n[y],C=n[y+1],E=O,N=k,T=l[v],I=u*l[v+1],A=w*T-x*I,M=w*I+x*T,P=l[2*v],R=u*l[2*v+1],D=j*P-S*R,F=j*R+S*P,L=l[3*v],z=u*l[3*v+1],q=_*L-C*z,V=_*z+C*L,B=E+D,U=N+F,W=E-D,G=N-F,H=A+q,K=M+V,X=u*(A-q),Q=u*(M-V),Y=B+H,Z=U+K,J=W+Q,$=G-X;if(n[m]=Y,n[m+1]=Z,n[b]=J,n[b+1]=$,0!==h){if(h!==p){var ee=W+-u*Q,te=-G+-u*X,ne=B+-u*H,re=-U- -u*K,ae=e+d-h,ie=e+f-h;n[ae]=ee,n[ae+1]=te,n[ie]=ne,n[ie+1]=re}}else{var oe=B-H,se=U-K;n[g]=oe,n[g+1]=se}}}},r.prototype._singleRealTransform2=function(e,t,n){var r=this._out,a=this._data,i=a[t],o=a[t+n],s=i+o,c=i-o;r[e]=s,r[e+1]=0,r[e+2]=c,r[e+3]=0},r.prototype._singleRealTransform4=function(e,t,n){var r=this._out,a=this._data,i=this._inv?-1:1,o=2*n,s=3*n,c=a[t],u=a[t+n],l=a[t+o],f=a[t+s],d=c+l,p=c-l,h=u+f,v=i*(u-f),m=d+h,b=p,g=-v,y=d-h,O=p,k=v;r[e]=m,r[e+1]=0,r[e+2]=b,r[e+3]=g,r[e+4]=y,r[e+5]=0,r[e+6]=O,r[e+7]=k}},function(e,t){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),c=0;c<i.length;c++){var u=i[c];if(!s(u))return!1;var l=e[u],f=t[u];if(!1===(a=n?n.call(r,l,f,u):void 0)||void 0===a&&l!==f)return!1}return!0}},function(e,t,n){"use strict";var r;function a(e){if("undefined"===typeof document)return 0;if(e||void 0===r){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),a=n.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var i=t.offsetWidth;n.style.overflow="scroll";var o=t.offsetWidth;i===o&&(o=n.clientWidth),document.body.removeChild(n),r=i-o}return r}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var r=n(16),a=n(17),i=n(41),o=n(44),s=n(134),c=n(47),u=n(46),l=n(1),f=n(23),d=n.n(f),p=n(63),h=n(115),v=n(165),m=n(213),b=n(138),g=n(141),y=n(78),O=n(55),k=n(178);function w(e){return!e||e<0?0:e>100?100:e}function x(e){var t=e.success,n=e.successPercent;return t&&"progress"in t&&(Object(O.a)(!1,"Progress","`success.progress` is deprecated. Please use `success.percent` instead."),n=t.progress),t&&"percent"in t&&(n=t.percent),n}var j=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},S=function(e,t){var n=e.from,r=void 0===n?k.b.blue:n,a=e.to,i=void 0===a?k.b.blue:a,o=e.direction,s=void 0===o?"rtl"===t?"to left":"to right":o,c=j(e,["from","to","direction"]);if(0!==Object.keys(c).length){var u=function(e){var t=[];return Object.keys(e).forEach((function(n){var r=parseFloat(n.replace(/%/g,""));isNaN(r)||t.push({key:r,value:e[n]})})),(t=t.sort((function(e,t){return e.key-t.key}))).map((function(e){var t=e.key,n=e.value;return"".concat(n," ").concat(t,"%")})).join(", ")}(c);return{backgroundImage:"linear-gradient(".concat(s,", ").concat(u,")")}}return{backgroundImage:"linear-gradient(".concat(s,", ").concat(r,", ").concat(i,")")}},_=function(e){var t=e.prefixCls,n=e.direction,r=e.percent,i=e.strokeWidth,o=e.size,s=e.strokeColor,c=e.strokeLinecap,u=e.children,f=e.trailColor,d=e.success,p=s&&"string"!==typeof s?S(s,n):{background:s},h=f?{backgroundColor:f}:void 0,v=Object(a.a)({width:"".concat(w(r),"%"),height:i||("small"===o?6:8),borderRadius:"square"===c?0:""},p),m=x(e),b={width:"".concat(w(m),"%"),height:i||("small"===o?6:8),borderRadius:"square"===c?0:"",backgroundColor:null===d||void 0===d?void 0:d.strokeColor},g=void 0!==m?l.createElement("div",{className:"".concat(t,"-success-bg"),style:b}):null;return l.createElement(l.Fragment,null,l.createElement("div",{className:"".concat(t,"-outer")},l.createElement("div",{className:"".concat(t,"-inner"),style:h},l.createElement("div",{className:"".concat(t,"-bg"),style:v}),g)),u)},C=n(26),E=n(35),N={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1},T=function(e){var t=e.map((function(){return Object(l.useRef)()})),n=Object(l.useRef)(null);return Object(l.useEffect)((function(){var e=Date.now(),r=!1;Object.keys(t).forEach((function(a){var i=t[a].current;if(i){r=!0;var o=i.style;o.transitionDuration=".3s, .3s, .3s, .06s",n.current&&e-n.current<100&&(o.transitionDuration="0s, 0s")}})),r&&(n.current=Date.now())})),[t]},I=function(e){var t=e.className,n=e.percent,r=e.prefixCls,i=e.strokeColor,o=e.strokeLinecap,s=e.strokeWidth,c=e.style,u=e.trailColor,f=e.trailWidth,p=e.transition,h=Object(E.a)(e,["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"]);delete h.gapPosition;var v=Array.isArray(n)?n:[n],m=Array.isArray(i)?i:[i],b=T(v),g=Object(C.a)(b,1)[0],y=s/2,O=100-s/2,k="M ".concat("round"===o?y:0,",").concat(y,"\n         L ").concat("round"===o?O:100,",").concat(y),w="0 0 100 ".concat(s),x=0;return l.createElement("svg",Object(a.a)({className:d()("".concat(r,"-line"),t),viewBox:w,preserveAspectRatio:"none",style:c},h),l.createElement("path",{className:"".concat(r,"-line-trail"),d:k,strokeLinecap:o,stroke:u,strokeWidth:f||s,fillOpacity:"0"}),v.map((function(e,t){var n=1;switch(o){case"round":n=1-s/100;break;case"square":n=1-s/2/100;break;default:n=1}var a={strokeDasharray:"".concat(e*n,"px, 100px"),strokeDashoffset:"-".concat(x,"px"),transition:p||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},i=m[t]||m[m.length-1];return x+=e,l.createElement("path",{key:t,className:"".concat(r,"-line-path"),d:k,strokeLinecap:o,stroke:i,strokeWidth:s,fillOpacity:"0",ref:g[t],style:a})})))};I.defaultProps=N,I.displayName="Line";var A=0;function M(e){return+e.replace("%","")}function P(e){return Array.isArray(e)?e:[e]}function R(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=50-r/2,s=0,c=-o,u=0,l=-2*o;switch(i){case"left":s=-o,c=0,u=2*o,l=0;break;case"right":s=o,c=0,u=-2*o,l=0;break;case"bottom":c=o,l=2*o}var f="M 50,50 m ".concat(s,",").concat(c,"\n   a ").concat(o,",").concat(o," 0 1 1 ").concat(u,",").concat(-l,"\n   a ").concat(o,",").concat(o," 0 1 1 ").concat(-u,",").concat(l),d=2*Math.PI*o,p={stroke:"string"===typeof n?n:void 0,strokeDasharray:"".concat(t/100*(d-a),"px ").concat(d,"px"),strokeDashoffset:"-".concat(a/2+e/100*(d-a),"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s"};return{pathString:f,pathStyle:p}}var D=function(e){var t=e.prefixCls,n=e.strokeWidth,r=e.trailWidth,i=e.gapDegree,o=e.gapPosition,s=e.trailColor,c=e.strokeLinecap,u=e.style,f=e.className,p=e.strokeColor,h=e.percent,v=Object(E.a)(e,["prefixCls","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"]),m=l.useMemo((function(){return A+=1}),[]),b=R(0,100,s,n,i,o),g=b.pathString,y=b.pathStyle,O=P(h),k=P(p),w=k.find((function(e){return"[object Object]"===Object.prototype.toString.call(e)})),x=T(O),j=Object(C.a)(x,1)[0];return l.createElement("svg",Object(a.a)({className:d()("".concat(t,"-circle"),f),viewBox:"0 0 100 100",style:u},v),w&&l.createElement("defs",null,l.createElement("linearGradient",{id:"".concat(t,"-gradient-").concat(m),x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(w).sort((function(e,t){return M(e)-M(t)})).map((function(e,t){return l.createElement("stop",{key:t,offset:e,stopColor:w[e]})})))),l.createElement("path",{className:"".concat(t,"-circle-trail"),d:g,stroke:s,strokeLinecap:c,strokeWidth:r||n,fillOpacity:"0",style:y}),function(){var e=0;return O.map((function(r,a){var s=k[a]||k[k.length-1],u="[object Object]"===Object.prototype.toString.call(s)?"url(#".concat(t,"-gradient-").concat(m,")"):"",f=R(e,r,s,n,i,o);return e+=r,l.createElement("path",{key:a,className:"".concat(t,"-circle-path"),d:f.pathString,stroke:u,strokeLinecap:c,strokeWidth:n,opacity:0===r?0:1,fillOpacity:"0",style:f.pathStyle,ref:j[a]})}))}().reverse())};D.defaultProps=N,D.displayName="Circle";var F=D;function L(e){var t=e.percent,n=w(x({success:e.success,successPercent:e.successPercent}));return[n,w(w(t)-n)]}var z=function(e){var t=e.prefixCls,n=e.width,a=e.strokeWidth,i=e.trailColor,o=e.strokeLinecap,s=e.gapPosition,c=e.gapDegree,u=e.type,f=e.children,p=e.success,h=n||120,v={width:h,height:h,fontSize:.15*h+6},m=a||6,b=s||"dashboard"===u&&"bottom"||"top",g="[object Object]"===Object.prototype.toString.call(e.strokeColor),y=function(e){var t=e.success,n=void 0===t?{}:t,r=e.strokeColor;return[n.strokeColor||k.b.green,r||null]}({success:p,strokeColor:e.strokeColor}),O=d()("".concat(t,"-inner"),Object(r.a)({},"".concat(t,"-circle-gradient"),g));return l.createElement("div",{className:O,style:v},l.createElement(F,{percent:L(e),strokeWidth:m,trailWidth:m,strokeColor:y,strokeLinecap:o,trailColor:i,prefixCls:t,gapDegree:c||0===c?c:"dashboard"===u?75:void 0,gapPosition:b}),f)},q=function(e){for(var t=e.size,n=e.steps,a=e.percent,i=void 0===a?0:a,o=e.strokeWidth,s=void 0===o?8:o,c=e.strokeColor,u=e.trailColor,f=e.prefixCls,p=e.children,h=Math.round(n*(i/100)),v="small"===t?2:14,m=[],b=0;b<n;b+=1)m.push(l.createElement("div",{key:b,className:d()("".concat(f,"-steps-item"),Object(r.a)({},"".concat(f,"-steps-item-active"),b<=h-1)),style:{backgroundColor:b<=h-1?c:u,width:v,height:s}}));return l.createElement("div",{className:"".concat(f,"-steps-outer")},m,p)},V=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},B=(Object(y.a)("line","circle","dashboard"),Object(y.a)("normal","exception","active","success")),U=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).renderProgress=function(t){var n,i,o=t.getPrefixCls,c=t.direction,u=Object(s.a)(e).props,f=u.prefixCls,h=u.className,v=u.size,m=u.type,b=u.steps,g=u.showInfo,y=u.strokeColor,k=V(u,["prefixCls","className","size","type","steps","showInfo","strokeColor"]),w=o("progress",f),x=e.getProgressStatus(),j=e.renderProcessInfo(w,x);Object(O.a)(!("successPercent"in u),"Progress","`successPercent` is deprecated. Please use `success.percent` instead."),"line"===m?i=b?l.createElement(q,Object(a.a)({},e.props,{strokeColor:"string"===typeof y?y:void 0,prefixCls:w,steps:b}),j):l.createElement(_,Object(a.a)({},e.props,{prefixCls:w,direction:c}),j):"circle"!==m&&"dashboard"!==m||(i=l.createElement(z,Object(a.a)({},e.props,{prefixCls:w,progressStatus:x}),j));var S=d()(w,(n={},Object(r.a)(n,"".concat(w,"-").concat(("dashboard"===m?"circle":b&&"steps")||m),!0),Object(r.a)(n,"".concat(w,"-status-").concat(x),!0),Object(r.a)(n,"".concat(w,"-show-info"),g),Object(r.a)(n,"".concat(w,"-").concat(v),v),Object(r.a)(n,"".concat(w,"-rtl"),"rtl"===c),n),h);return l.createElement("div",Object(a.a)({},Object(p.a)(k,["status","format","trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","percent","success","successPercent"]),{className:S}),i)},e}return Object(o.a)(n,[{key:"getPercentNumber",value:function(){var e=this.props.percent,t=void 0===e?0:e,n=x(this.props);return parseInt(void 0!==n?n.toString():t.toString(),10)}},{key:"getProgressStatus",value:function(){var e=this.props.status;return B.indexOf(e)<0&&this.getPercentNumber()>=100?"success":e||"normal"}},{key:"renderProcessInfo",value:function(e,t){var n,r=this.props,a=r.showInfo,i=r.format,o=r.type,s=r.percent,c=x(this.props);if(!a)return null;var u="line"===o;return i||"exception"!==t&&"success"!==t?n=(i||function(e){return"".concat(e,"%")})(w(s),w(c)):"exception"===t?n=u?l.createElement(b.a,null):l.createElement(h.a,null):"success"===t&&(n=u?l.createElement(m.a,null):l.createElement(v.a,null)),l.createElement("span",{className:"".concat(e,"-text"),title:"string"===typeof n?n:void 0},n)}},{key:"render",value:function(){return l.createElement(g.a,null,this.renderProgress)}}]),n}(l.Component);U.defaultProps={type:"line",percent:0,showInfo:!0,trailColor:null,size:"default",gapDegree:void 0,strokeLinecap:"round"};t.a=U},function(e,t,n){"use strict";var r=n(17),a=n(38),i=n(18),o=n(35),s=n(1),c=n(164),u=n(286),l=function(e){var t=e.overlay,n=e.prefixCls,r=e.id,a=e.overlayInnerStyle;return s.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:a},"function"===typeof t?t():t)},f=function(e,t){var n=e.overlayClassName,f=e.trigger,d=void 0===f?["hover"]:f,p=e.mouseEnterDelay,h=void 0===p?0:p,v=e.mouseLeaveDelay,m=void 0===v?.1:v,b=e.overlayStyle,g=e.prefixCls,y=void 0===g?"rc-tooltip":g,O=e.children,k=e.onVisibleChange,w=e.afterVisibleChange,x=e.transitionName,j=e.animation,S=e.motion,_=e.placement,C=void 0===_?"right":_,E=e.align,N=void 0===E?{}:E,T=e.destroyTooltipOnHide,I=void 0!==T&&T,A=e.defaultVisible,M=e.getTooltipContainer,P=e.overlayInnerStyle,R=Object(o.a)(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),D=Object(s.useRef)(null);Object(s.useImperativeHandle)(t,(function(){return D.current}));var F=Object(i.a)({},R);"visible"in e&&(F.popupVisible=e.visible);var L=!1,z=!1;if("boolean"===typeof I)L=I;else if(I&&"object"===Object(a.a)(I)){var q=I.keepParent;L=!0===q,z=!1===q}return s.createElement(c.a,Object(r.a)({popupClassName:n,prefixCls:y,popup:function(){var t=e.arrowContent,n=void 0===t?null:t,r=e.overlay,a=e.id;return[s.createElement("div",{className:"".concat(y,"-arrow"),key:"arrow"},n),s.createElement(l,{key:"content",prefixCls:y,id:a,overlay:r,overlayInnerStyle:P})]},action:d,builtinPlacements:u.a,popupPlacement:C,ref:D,popupAlign:N,getPopupContainer:M,onPopupVisibleChange:k,afterPopupVisibleChange:w,popupTransitionName:x,popupAnimation:j,popupMotion:S,defaultPopupVisible:A,destroyPopupOnHide:L,autoDestroy:z,mouseLeaveDelay:m,popupStyle:b,mouseEnterDelay:h},F),O)},d=Object(s.forwardRef)(f);t.a=d},function(e,t,n){"use strict";var r=n(35),a=n(17),i=n(18),o=n(41),s=n(44),c=n(47),u=n(46),l=n(1),f=n(67),d=n.n(f),p=n(23),h=n.n(p),v=n(71),m=n(275),b=n(205),g=0,y=Date.now();function O(){var e=g;return g+=1,"rcNotification_".concat(y,"_").concat(e)}var k=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={notices:[]},e.hookRefs=new Map,e.add=function(t,n){var r=t.key||O(),a=Object(i.a)(Object(i.a)({},t),{},{key:r}),o=e.props.maxCount;e.setState((function(e){var t=e.notices,i=t.map((function(e){return e.notice.key})).indexOf(r),s=t.concat();return-1!==i?s.splice(i,1,{notice:a,holderCallback:n}):(o&&t.length>=o&&(a.key=s[0].notice.key,a.updateMark=O(),a.userPassKey=r,s.shift()),s.push({notice:a,holderCallback:n})),{notices:s}}))},e.remove=function(t){e.setState((function(e){return{notices:e.notices.filter((function(e){var n=e.notice,r=n.key;return(n.userPassKey||r)!==t}))}}))},e.noticePropsMap={},e}return Object(s.a)(n,[{key:"getTransitionName",value:function(){var e=this.props,t=e.prefixCls,n=e.animation,r=this.props.transitionName;return!r&&n&&(r="".concat(t,"-").concat(n)),r}},{key:"render",value:function(){var e=this,t=this.state.notices,n=this.props,r=n.prefixCls,o=n.className,s=n.closeIcon,c=n.style,u=[];return t.forEach((function(n,a){var o=n.notice,c=n.holderCallback,l=a===t.length-1?o.updateMark:void 0,f=o.key,d=o.userPassKey,p=Object(i.a)(Object(i.a)(Object(i.a)({prefixCls:r,closeIcon:s},o),o.props),{},{key:f,noticeKey:d||f,updateMark:l,onClose:function(t){var n;e.remove(t),null===(n=o.onClose)||void 0===n||n.call(o)},onClick:o.onClick,children:o.content});u.push(f),e.noticePropsMap[f]={props:p,holderCallback:c}})),l.createElement("div",{className:h()(r,o),style:c},l.createElement(v.a,{keys:u,motionName:this.getTransitionName(),onVisibleChanged:function(t,n){var r=n.key;t||delete e.noticePropsMap[r]}},(function(t){var n=t.key,o=t.className,s=t.style,c=t.visible,u=e.noticePropsMap[n],f=u.props,d=u.holderCallback;return d?l.createElement("div",{key:n,className:h()(o,"".concat(r,"-hook-holder")),style:Object(i.a)({},s),ref:function(t){"undefined"!==typeof n&&(t?(e.hookRefs.set(n,t),d(t,f)):e.hookRefs.delete(n))}}):l.createElement(m.a,Object(a.a)({},f,{className:h()(o,null===f||void 0===f?void 0:f.className),style:Object(i.a)(Object(i.a)({},s),null===f||void 0===f?void 0:f.style),visible:c}))})))}}]),n}(l.Component);k.newInstance=void 0,k.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},k.newInstance=function(e,t){var n=e||{},i=n.getContainer,o=Object(r.a)(n,["getContainer"]),s=document.createElement("div");i?i().appendChild(s):document.body.appendChild(s);var c=!1;d.a.render(l.createElement(k,Object(a.a)({},o,{ref:function(e){c||(c=!0,t({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){d.a.unmountComponentAtNode(s),s.parentNode&&s.parentNode.removeChild(s)},useNotification:function(){return Object(b.a)(e)}}))}})),s)};var w=k;t.a=w},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="CheckCircleOutlined";t.a=a.forwardRef(s)},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="InfoCircleOutlined";t.a=a.forwardRef(s)},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="CloseCircleOutlined";t.a=a.forwardRef(s)},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="ExclamationCircleFilled";t.a=a.forwardRef(s)},function(e,t,n){var r=n(528),a=n(529),i=n(530),o=n(531),s=n(532),c=n(533),u=n(534);u.alea=r,u.xor128=a,u.xorwow=i,u.xorshift7=o,u.xor4096=s,u.tychei=c,e.exports=u},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,t){for(var n,s,c=o(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))a.call(n,l)&&(c[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)i.call(n,s[f])&&(c[s[f]]=n[s[f]])}}return c}},function(e,t,n){var r=n(182)(n(124),"Map");e.exports=r},function(e,t,n){var r=n(124).Symbol;e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw new Error("cannot find the global object")}(),a=(r.fetch.bind(r),r.performance,r.navigator,!!r.webkitOfflineAudioContext),i="undefined"!==typeof r.WorkerGlobalScope;function o(e){if(e=a?44100:e,i)throw new Error("Cannot use offline audio context in a web worker.");var t=r.webkitOfflineAudioContext;return a?new t(1,e,e):new r.OfflineAudioContext(1,e,e)}}).call(this,n(110))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.keySignatureKeys=void 0;var r=n(378),a=new WeakMap;t.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var i=function(){function e(e){var n=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",a.set(this,480),e){a.set(this,e.header.ticksPerBeat),e.tracks.forEach((function(e){e.forEach((function(e){e.meta&&("timeSignature"===e.type?n.timeSignatures.push({ticks:e.absoluteTime,timeSignature:[e.numerator,e.denominator]}):"setTempo"===e.type?n.tempos.push({bpm:6e7/e.microsecondsPerBeat,ticks:e.absoluteTime}):"keySignature"===e.type&&n.keySignatures.push({key:t.keySignatureKeys[e.key+7],scale:0===e.scale?"major":"minor",ticks:e.absoluteTime}))}))}));var r=0;e.tracks[0].forEach((function(e){r+=e.deltaTime,e.meta&&("trackName"===e.type?n.name=e.text:"text"!==e.type&&"cuePoint"!==e.type&&"marker"!==e.type&&"lyrics"!==e.type||n.meta.push({text:e.text,ticks:r,type:e.type}))})),this.update()}}return e.prototype.update=function(){var e=this,t=0,n=0;this.tempos.sort((function(e,t){return e.ticks-t.ticks})),this.tempos.forEach((function(r,a){var i=a>0?e.tempos[a-1].bpm:e.tempos[0].bpm,o=r.ticks/e.ppq-n,s=60/i*o;r.time=s+t,t=r.time,n+=o})),this.timeSignatures.sort((function(e,t){return e.ticks-t.ticks})),this.timeSignatures.forEach((function(t,n){var r=n>0?e.timeSignatures[n-1]:e.timeSignatures[0],a=(t.ticks-r.ticks)/e.ppq/r.timeSignature[0]/(r.timeSignature[1]/4);r.measures=r.measures||0,t.measures=a+r.measures}))},e.prototype.ticksToSeconds=function(e){var t=(0,r.search)(this.tempos,e);if(-1!==t){var n=this.tempos[t],a=n.time,i=(e-n.ticks)/this.ppq;return a+60/n.bpm*i}return.5*(e/this.ppq)},e.prototype.ticksToMeasures=function(e){var t=(0,r.search)(this.timeSignatures,e);if(-1!==t){var n=this.timeSignatures[t],a=(e-n.ticks)/this.ppq;return n.measures+a/(n.timeSignature[0]/n.timeSignature[1])/4}return e/this.ppq/4},Object.defineProperty(e.prototype,"ppq",{get:function(){return a.get(this)},enumerable:!1,configurable:!0}),e.prototype.secondsToTicks=function(e){var t=(0,r.search)(this.tempos,e,"time");if(-1!==t){var n=this.tempos[t],a=(e-n.time)/(60/n.bpm);return Math.round(n.ticks+a*this.ppq)}var i=e/.5;return Math.round(i*this.ppq)},e.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map((function(e){return{bpm:e.bpm,ticks:e.ticks}})),timeSignatures:this.timeSignatures}},e.prototype.fromJSON=function(e){this.name=e.name,this.tempos=e.tempos.map((function(e){return Object.assign({},e)})),this.timeSignatures=e.timeSignatures.map((function(e){return Object.assign({},e)})),this.keySignatures=e.keySignatures.map((function(e){return Object.assign({},e)})),this.meta=e.meta.map((function(e){return Object.assign({},e)})),a.set(this,e.ppq),this.update()},e.prototype.setTempo=function(e){this.tempos=[{bpm:e,ticks:0}],this.update()},e}();t.Header=i},function(e,t,n){"use strict";var r=n(381),a={body:"",args:[],thisVars:[],localVars:[]};function i(e){if(!e)return a;for(var t=0;t<e.args.length;++t){var n=e.args[t];e.args[t]=0===t?{name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return r({args:e.args,pre:i(e.pre),body:i(e.body),post:i(e.proc),funcName:e.funcName})}(e))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var n=s[e];t[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+n+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+n+"=s"},rvalue:!0,funcName:e+"seq"})}}();var c={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in c){var n=c[e];t[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+n+"b"},funcName:e}),t[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+n+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in u){var n=u[e];t[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+n+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+n+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<l.length;++e){var n=l[e];t[n]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:n}),t[n+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var e=0;e<f.length;++e){var n=f[e];t[n]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n}),t[n+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n+"s"}),t[n+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"}),t[n+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"seq"})}}();var d=["atan2","pow"];!function(){for(var e=0;e<d.length;++e){var n=d[e];t[n+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"op"}),t[n+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"ops"}),t[n+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opeq"}),t[n+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opseq"})}}(),t.any=r({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=r({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=r({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},function(e,t,n){e.exports=n(431)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.Track=t.Midi=void 0;var i=n(377),o=n(312),s=n(379),c=n(589),u=function(){function e(e){var t=this,n=null;if(e){var r=e instanceof ArrayBuffer?new Uint8Array(e):e;(n=(0,i.parseMidi)(r)).tracks.forEach((function(e){var t=0;e.forEach((function(e){t+=e.deltaTime,e.absoluteTime=t}))})),n.tracks=function(e){for(var t=[],n=0;n<e.length;n++)for(var r=t.length,a=new Map,i=Array(16).fill(0),o=0,s=e[n];o<s.length;o++){var c=s[o],u=r,l=c.channel;if(void 0!==l){"programChange"===c.type&&(i[l]=c.programNumber);var f=i[l],d="".concat(f," ").concat(l);a.has(d)?u=a.get(d):(u=r+a.size,a.set(d,u))}t[u]||t.push([]),t[u].push(c)}return t}(n.tracks)}this.header=new o.Header(n),this.tracks=[],e&&(this.tracks=n.tracks.map((function(e){return new s.Track(e,t.header)})),1===n.header.format&&0===this.tracks[0].duration&&this.tracks.shift())}return e.fromUrl=function(t){return r(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,fetch(t)];case 1:return(n=r.sent()).ok?[4,n.arrayBuffer()]:[3,3];case 2:return[2,new e(r.sent())];case 3:throw new Error("Could not load '".concat(t,"'"))}}))}))},Object.defineProperty(e.prototype,"name",{get:function(){return this.header.name},set:function(e){this.header.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){var e=this.tracks.map((function(e){return e.duration}));return Math.max.apply(Math,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"durationTicks",{get:function(){var e=this.tracks.map((function(e){return e.durationTicks}));return Math.max.apply(Math,e)},enumerable:!1,configurable:!0}),e.prototype.addTrack=function(){var e=new s.Track(void 0,this.header);return this.tracks.push(e),e},e.prototype.toArray=function(){return(0,c.encode)(this)},e.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map((function(e){return e.toJSON()}))}},e.prototype.fromJSON=function(e){var t=this;this.header=new o.Header,this.header.fromJSON(e.header),this.tracks=e.tracks.map((function(e){var n=new s.Track(void 0,t.header);return n.fromJSON(e),n}))},e.prototype.clone=function(){var t=new e;return t.fromJSON(this.toJSON()),t},e}();t.Midi=u;var l=n(379);Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return l.Track}});var f=n(312);Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return f.Header}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r=n(17),a=n(16),i=n(18),o=n(31),s=n(26),c=n(35),u=n(1),l=n(23),f=n.n(l),d=n(297),p=n.n(d),h=n(87),v=n(52),m=n(139),b=n(41),g=n(44),y=n(47),O=n(46),k=n(49),w=n(63),x=n(161),j=["children","locked"],S=u.createContext(null);function _(e){var t=e.children,n=e.locked,r=Object(c.a)(e,j),a=u.useContext(S),o=Object(x.a)((function(){return function(e,t){var n=Object(i.a)({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(a,r)}),[a,r],(function(e,t){return!n&&(e[0]!==t[0]||!p()(e[1],t[1]))}));return u.createElement(S.Provider,{value:o},t)}function C(e,t,n,r){var a=u.useContext(S),i=a.activeKey,o=a.onActive,s=a.onInactive,c={active:i===e};return t||(c.onMouseEnter=function(t){null===n||void 0===n||n({key:e,domEvent:t}),o(e)},c.onMouseLeave=function(t){null===r||void 0===r||r({key:e,domEvent:t}),s(e)}),c}var E=["item"];function N(e){var t=e.item,n=Object(c.a)(e,E);return Object.defineProperty(n,"item",{get:function(){return Object(v.a)(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function T(e){var t=e.icon,n=e.props,r=e.children;return("function"===typeof t?u.createElement(t,Object(i.a)({},n)):t)||r||null}function I(e){var t=u.useContext(S),n=t.mode,r=t.rtl,a=t.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:e*a}:{paddingLeft:e*a}}var A=[],M=u.createContext(null);function P(){return u.useContext(M)}var R=u.createContext(A);function D(e){var t=u.useContext(R);return u.useMemo((function(){return void 0!==e?[].concat(Object(o.a)(t),[e]):t}),[t,e])}var F=u.createContext(null),L=u.createContext(null);function z(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function q(e){return z(u.useContext(L),e)}var V=["title","attribute","elementRef"],B=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],U=["active"],W=function(e){Object(y.a)(n,e);var t=Object(O.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,a=e.elementRef,i=Object(c.a)(e,V),o=Object(w.a)(i,["eventKey"]);return Object(v.a)(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),u.createElement(m.a.Item,Object(r.a)({},n,{title:"string"===typeof t?t:void 0},o,{ref:a}))}}]),n}(u.Component),G=function(e){var t,n=e.style,s=e.className,l=e.eventKey,d=(e.warnKey,e.disabled),p=e.itemIcon,h=e.children,v=e.role,m=e.onMouseEnter,b=e.onMouseLeave,g=e.onClick,y=e.onKeyDown,O=e.onFocus,w=Object(c.a)(e,B),x=q(l),j=u.useContext(S),_=j.prefixCls,E=j.onItemClick,A=j.disabled,M=j.overflowDisabled,P=j.itemIcon,R=j.selectedKeys,F=j.onActive,L="".concat(_,"-item"),z=u.useRef(),V=u.useRef(),G=A||d,H=D(l);var K=function(e){return{key:l,keyPath:Object(o.a)(H).reverse(),item:z.current,domEvent:e}},X=p||P,Q=C(l,G,m,b),Y=Q.active,Z=Object(c.a)(Q,U),J=R.includes(l),$=I(H.length),ee={};return"option"===e.role&&(ee["aria-selected"]=J),u.createElement(W,Object(r.a)({ref:z,elementRef:V,role:null===v?"none":v||"menuitem",tabIndex:d?null:-1,"data-menu-id":M&&x?null:x},w,Z,ee,{component:"li","aria-disabled":d,style:Object(i.a)(Object(i.a)({},$),n),className:f()(L,(t={},Object(a.a)(t,"".concat(L,"-active"),Y),Object(a.a)(t,"".concat(L,"-selected"),J),Object(a.a)(t,"".concat(L,"-disabled"),G),t),s),onClick:function(e){if(!G){var t=K(e);null===g||void 0===g||g(N(t)),E(t)}},onKeyDown:function(e){if(null===y||void 0===y||y(e),e.which===k.a.ENTER){var t=K(e);null===g||void 0===g||g(N(t)),E(t)}},onFocus:function(e){F(l),null===O||void 0===O||O(e)}}),h,u.createElement(T,{props:Object(i.a)(Object(i.a)({},e),{},{isSelected:J}),icon:X}))};var H=function(e){var t=e.eventKey,n=P(),r=D(t);return u.useEffect((function(){if(n)return n.registerPath(t,r),function(){n.unregisterPath(t,r)}}),[r]),n?null:u.createElement(G,e)},K=n(73);function X(e,t){return Object(K.a)(e).map((function(e,n){if(u.isValidElement(e)){var r,a,i=e.key,s=null!==(r=null===(a=e.props)||void 0===a?void 0:a.eventKey)&&void 0!==r?r:i;(null===s||void 0===s)&&(s="tmp_key-".concat([].concat(Object(o.a)(t),[n]).join("-")));var c={key:s,eventKey:s};return u.cloneElement(e,c)}return e}))}function Q(e){var t=u.useRef(e);t.current=e;var n=u.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var Y=["className","children"],Z=function(e,t){var n=e.className,a=e.children,i=Object(c.a)(e,Y),o=u.useContext(S),s=o.prefixCls,l=o.mode,d=o.rtl;return u.createElement("ul",Object(r.a)({className:f()(s,d&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===l?"inline":"vertical"),n)},i,{"data-menu-list":!0,ref:t}),a)},J=u.forwardRef(Z);J.displayName="SubMenuList";var $=J,ee=n(164),te=n(50),ne={adjustX:1,adjustY:1},re={topLeft:{points:["bl","tl"],overflow:ne,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:ne,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:ne,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:ne,offset:[4,0]}},ae={topLeft:{points:["bl","tl"],overflow:ne,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:ne,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:ne,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:ne,offset:[4,0]}};function ie(e,t,n){return t||(n?n[e]||n.other:void 0)}var oe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function se(e){var t=e.prefixCls,n=e.visible,r=e.children,o=e.popup,c=e.popupClassName,l=e.popupOffset,d=e.disabled,p=e.mode,h=e.onVisibleChange,v=u.useContext(S),m=v.getPopupContainer,b=v.rtl,g=v.subMenuOpenDelay,y=v.subMenuCloseDelay,O=v.builtinPlacements,k=v.triggerSubMenuAction,w=v.forceSubMenuRender,x=v.motion,j=v.defaultMotions,_=u.useState(!1),C=Object(s.a)(_,2),E=C[0],N=C[1],T=b?Object(i.a)(Object(i.a)({},ae),O):Object(i.a)(Object(i.a)({},re),O),I=oe[p],A=ie(p,x,j),M=Object(i.a)(Object(i.a)({},A),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),P=u.useRef();return u.useEffect((function(){return P.current=Object(te.a)((function(){N(n)})),function(){te.a.cancel(P.current)}}),[n]),u.createElement(ee.a,{prefixCls:t,popupClassName:f()("".concat(t,"-popup"),Object(a.a)({},"".concat(t,"-rtl"),b),c),stretch:"horizontal"===p?"minWidth":null,getPopupContainer:m,builtinPlacements:T,popupPlacement:I,popupVisible:E,popup:o,popupAlign:l&&{offset:l},action:d?[]:[k],mouseEnterDelay:g,mouseLeaveDelay:y,onPopupVisibleChange:h,forceRender:w,popupMotion:M},r)}var ce=n(71);function ue(e){var t=e.id,n=e.open,a=e.keyPath,o=e.children,c="inline",l=u.useContext(S),f=l.prefixCls,d=l.forceSubMenuRender,p=l.motion,h=l.defaultMotions,v=l.mode,m=u.useRef(!1);m.current=v===c;var b=u.useState(!m.current),g=Object(s.a)(b,2),y=g[0],O=g[1],k=!!m.current&&n;u.useEffect((function(){m.current&&O(!1)}),[v]);var w=Object(i.a)({},ie(c,p,h));a.length>1&&(w.motionAppear=!1);var x=w.onVisibleChanged;return w.onVisibleChanged=function(e){return m.current||e||O(!0),null===x||void 0===x?void 0:x(e)},y?null:u.createElement(_,{mode:c,locked:!m.current},u.createElement(ce.b,Object(r.a)({visible:k},w,{forceRender:d,removeOnLeave:!1,leavedClassName:"".concat(f,"-hidden")}),(function(e){var n=e.className,r=e.style;return u.createElement($,{id:t,className:n,style:r},o)})))}var le=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],fe=["active"],de=function(e){var t,n=e.style,o=e.className,l=e.title,d=e.eventKey,p=(e.warnKey,e.disabled),h=e.internalPopupClose,v=e.children,b=e.itemIcon,g=e.expandIcon,y=e.popupClassName,O=e.popupOffset,k=e.onClick,w=e.onMouseEnter,x=e.onMouseLeave,j=e.onTitleClick,E=e.onTitleMouseEnter,A=e.onTitleMouseLeave,M=Object(c.a)(e,le),P=q(d),R=u.useContext(S),L=R.prefixCls,z=R.mode,V=R.openKeys,B=R.disabled,U=R.overflowDisabled,W=R.activeKey,G=R.selectedKeys,H=R.itemIcon,K=R.expandIcon,X=R.onItemClick,Y=R.onOpenChange,Z=R.onActive,J=u.useContext(F).isSubPathKey,ee=D(),te="".concat(L,"-submenu"),ne=B||p,re=u.useRef(),ae=u.useRef();var ie=b||H,oe=g||K,ce=V.includes(d),de=!U&&ce,pe=J(G,d),he=C(d,ne,E,A),ve=he.active,me=Object(c.a)(he,fe),be=u.useState(!1),ge=Object(s.a)(be,2),ye=ge[0],Oe=ge[1],ke=function(e){ne||Oe(e)},we=u.useMemo((function(){return ve||"inline"!==z&&(ye||J([W],d))}),[z,ve,W,ye,d,J]),xe=I(ee.length),je=Q((function(e){null===k||void 0===k||k(N(e)),X(e)})),Se=P&&"".concat(P,"-popup"),_e=u.createElement("div",Object(r.a)({role:"menuitem",style:xe,className:"".concat(te,"-title"),tabIndex:ne?null:-1,ref:re,title:"string"===typeof l?l:null,"data-menu-id":U&&P?null:P,"aria-expanded":de,"aria-haspopup":!0,"aria-controls":Se,"aria-disabled":ne,onClick:function(e){ne||(null===j||void 0===j||j({key:d,domEvent:e}),"inline"===z&&Y(d,!ce))},onFocus:function(){Z(d)}},me),l,u.createElement(T,{icon:"horizontal"!==z?oe:null,props:Object(i.a)(Object(i.a)({},e),{},{isOpen:de,isSubMenu:!0})},u.createElement("i",{className:"".concat(te,"-arrow")}))),Ce=u.useRef(z);if("inline"!==z&&(Ce.current=ee.length>1?"vertical":z),!U){var Ee=Ce.current;_e=u.createElement(se,{mode:Ee,prefixCls:te,visible:!h&&de&&"inline"!==z,popupClassName:y,popupOffset:O,popup:u.createElement(_,{mode:"horizontal"===Ee?"vertical":Ee},u.createElement($,{id:Se,ref:ae},v)),disabled:ne,onVisibleChange:function(e){"inline"!==z&&Y(d,e)}},_e)}return u.createElement(_,{onItemClick:je,mode:"horizontal"===z?"vertical":z,itemIcon:ie,expandIcon:oe},u.createElement(m.a.Item,Object(r.a)({role:"none"},M,{component:"li",style:n,className:f()(te,"".concat(te,"-").concat(z),o,(t={},Object(a.a)(t,"".concat(te,"-open"),de),Object(a.a)(t,"".concat(te,"-active"),we),Object(a.a)(t,"".concat(te,"-selected"),pe),Object(a.a)(t,"".concat(te,"-disabled"),ne),t)),onMouseEnter:function(e){ke(!0),null===w||void 0===w||w({key:d,domEvent:e})},onMouseLeave:function(e){ke(!1),null===x||void 0===x||x({key:d,domEvent:e})}}),_e,!U&&u.createElement(ue,{id:Se,open:de,keyPath:ee},v)))};function pe(e){var t,n=e.eventKey,r=e.children,a=D(n),i=X(r,a),o=P();return u.useEffect((function(){if(o)return o.registerPath(n,a),function(){o.unregisterPath(n,a)}}),[a]),t=o?i:u.createElement(de,e,i),u.createElement(R.Provider,{value:a},t)}var he=n(282);function ve(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Object(he.a)(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),a=e.getAttribute("tabindex"),i=Number(a),o=null;return a&&!Number.isNaN(i)?o=i:r&&null===o&&(o=0),r&&e.disabled&&(o=null),null!==o&&(o>=0||t&&o<0)}return!1}function me(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(o.a)(e.querySelectorAll("*")).filter((function(e){return ve(e,t)}));return ve(e,t)&&n.unshift(e),n}var be=k.a.LEFT,ge=k.a.RIGHT,ye=k.a.UP,Oe=k.a.DOWN,ke=k.a.ENTER,we=k.a.ESC,xe=[ye,Oe,be,ge];function je(e,t){return me(e,!0).filter((function(e){return t.has(e)}))}function Se(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var a=je(e,t),i=a.length,o=a.findIndex((function(e){return n===e}));return r<0?-1===o?o=i-1:o-=1:r>0&&(o+=1),a[o=(o+i)%i]}function _e(e,t,n,r,i,o,s,c,l,f){var d=u.useRef(),p=u.useRef();p.current=t;var h=function(){te.a.cancel(d.current)};return u.useEffect((function(){return function(){h()}}),[]),function(u){var v=u.which;if([].concat(xe,[ke,we]).includes(v)){var m,b,g,y=function(){return m=new Set,b=new Map,g=new Map,o().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(z(r,e),"']"));t&&(m.add(t),g.set(t,e),b.set(e,t))})),m};y();var O=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(b.get(t),m),k=g.get(O),w=function(e,t,n,r){var i,o,s,c,u="prev",l="next",f="children",d="parent";if("inline"===e&&r===ke)return{inlineTrigger:!0};var p=(i={},Object(a.a)(i,ye,u),Object(a.a)(i,Oe,l),i),h=(o={},Object(a.a)(o,be,n?l:u),Object(a.a)(o,ge,n?u:l),Object(a.a)(o,Oe,f),Object(a.a)(o,ke,f),o),v=(s={},Object(a.a)(s,ye,u),Object(a.a)(s,Oe,l),Object(a.a)(s,ke,f),Object(a.a)(s,we,d),Object(a.a)(s,be,n?f:d),Object(a.a)(s,ge,n?d:f),s);switch(null===(c={inline:p,horizontal:h,vertical:v,inlineSub:p,horizontalSub:v,verticalSub:v}["".concat(e).concat(t?"":"Sub")])||void 0===c?void 0:c[r]){case u:return{offset:-1,sibling:!0};case l:return{offset:1,sibling:!0};case d:return{offset:-1,sibling:!1};case f:return{offset:1,sibling:!1};default:return null}}(e,1===s(k,!0).length,n,v);if(!w)return;xe.includes(v)&&u.preventDefault();var x=function(e){if(e){var t=e,n=e.querySelector("a");(null===n||void 0===n?void 0:n.getAttribute("href"))&&(t=n);var r=g.get(e);c(r),h(),d.current=Object(te.a)((function(){p.current===r&&t.focus()}))}};if(w.sibling||!O){var j=Se(O&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(O):i.current,m,O,w.offset);x(j)}else if(w.inlineTrigger)l(k);else if(w.offset>0)l(k,!0),h(),d.current=Object(te.a)((function(){y();var e=O.getAttribute("aria-controls"),t=Se(document.getElementById(e),m);x(t)}),5);else if(w.offset<0){var S=s(k,!0),_=S[S.length-2],C=b.get(_);l(_,!1),x(C)}}null===f||void 0===f||f(u)}}var Ce=Math.random().toFixed(5).toString().slice(2),Ee=0;var Ne="__RC_UTIL_PATH_SPLIT__",Te=function(e){return e.join(Ne)},Ie="rc-menu-more";function Ae(){var e=u.useState({}),t=Object(s.a)(e,2)[1],n=Object(u.useRef)(new Map),r=Object(u.useRef)(new Map),a=u.useState([]),i=Object(s.a)(a,2),c=i[0],l=i[1],f=Object(u.useRef)(0),d=Object(u.useRef)(!1),p=Object(u.useCallback)((function(e,a){var i=Te(a);r.current.set(i,e),n.current.set(e,i),f.current+=1;var o,s=f.current;o=function(){s===f.current&&(d.current||t({}))},Promise.resolve().then(o)}),[]),h=Object(u.useCallback)((function(e,t){var a=Te(t);r.current.delete(a),n.current.delete(e)}),[]),v=Object(u.useCallback)((function(e){l(e)}),[]),m=Object(u.useCallback)((function(e,t){var r=n.current.get(e)||"",a=r.split(Ne);return t&&c.includes(a[0])&&a.unshift(Ie),a}),[c]),b=Object(u.useCallback)((function(e,t){return e.some((function(e){return m(e,!0).includes(t)}))}),[m]),g=Object(u.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(Ne),a=new Set;return Object(o.a)(r.current.keys()).forEach((function(e){e.startsWith(t)&&a.add(r.current.get(e))})),a}),[]);return u.useEffect((function(){return function(){d.current=!0}}),[]),{registerPath:p,unregisterPath:h,refreshOverflowKeys:v,isSubPathKey:b,getKeyPath:m,getKeys:function(){var e=Object(o.a)(n.current.keys());return c.length&&e.push(Ie),e},getSubPathKeys:g}}var Me=["prefixCls","style","className","tabIndex","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName"],Pe=[],Re=["className","title","eventKey","children"],De=["children"],Fe=function(e){var t=e.className,n=e.title,a=(e.eventKey,e.children),i=Object(c.a)(e,Re),o=u.useContext(S).prefixCls,s="".concat(o,"-item-group");return u.createElement("li",Object(r.a)({},i,{onClick:function(e){return e.stopPropagation()},className:f()(s,t)}),u.createElement("div",{className:"".concat(s,"-title"),title:"string"===typeof n?n:void 0},n),u.createElement("ul",{className:"".concat(s,"-list")},a))};var Le=function(e){var t,n,l=e.prefixCls,d=void 0===l?"rc-menu":l,v=e.style,b=e.className,g=e.tabIndex,y=void 0===g?0:g,O=e.children,k=e.direction,w=e.id,x=e.mode,j=void 0===x?"vertical":x,S=e.inlineCollapsed,C=e.disabled,E=e.disabledOverflow,T=e.subMenuOpenDelay,I=void 0===T?.1:T,A=e.subMenuCloseDelay,P=void 0===A?.1:A,R=e.forceSubMenuRender,D=e.defaultOpenKeys,z=e.openKeys,q=e.activeKey,V=e.defaultActiveFirst,B=e.selectable,U=void 0===B||B,W=e.multiple,G=void 0!==W&&W,K=e.defaultSelectedKeys,Y=e.selectedKeys,Z=e.onSelect,J=e.onDeselect,$=e.inlineIndent,ee=void 0===$?24:$,te=e.motion,ne=e.defaultMotions,re=e.triggerSubMenuAction,ae=void 0===re?"hover":re,ie=e.builtinPlacements,oe=e.itemIcon,se=e.expandIcon,ce=e.overflowedIndicator,ue=void 0===ce?"...":ce,le=e.overflowedIndicatorPopupClassName,fe=e.getPopupContainer,de=e.onClick,he=e.onOpenChange,ve=e.onKeyDown,me=(e.openAnimation,e.openTransitionName,Object(c.a)(e,Me)),be=X(O,Pe),ge=u.useState(!1),ye=Object(s.a)(ge,2),Oe=ye[0],ke=ye[1],we=u.useRef(),xe=function(e){var t=Object(h.a)(e,{value:e}),n=Object(s.a)(t,2),r=n[0],a=n[1];return u.useEffect((function(){Ee+=1;var e="".concat(Ce,"-").concat(Ee);a("rc-menu-uuid-".concat(e))}),[]),r}(w),je="rtl"===k;var Se=u.useMemo((function(){return"inline"!==j&&"vertical"!==j||!S?[j,!1]:["vertical",S]}),[j,S]),Ne=Object(s.a)(Se,2),Te=Ne[0],Re=Ne[1],De=u.useState(0),Fe=Object(s.a)(De,2),Le=Fe[0],ze=Fe[1],qe=Le>=be.length-1||"horizontal"!==Te||E,Ve=Object(h.a)(D,{value:z,postState:function(e){return e||Pe}}),Be=Object(s.a)(Ve,2),Ue=Be[0],We=Be[1],Ge=function(e){We(e),null===he||void 0===he||he(e)},He=u.useState(Ue),Ke=Object(s.a)(He,2),Xe=Ke[0],Qe=Ke[1],Ye="inline"===Te,Ze=u.useRef(!1);u.useEffect((function(){Ye&&Qe(Ue)}),[Ue]),u.useEffect((function(){Ze.current?Ye?We(Xe):Ge(Pe):Ze.current=!0}),[Ye]);var Je=Ae(),$e=Je.registerPath,et=Je.unregisterPath,tt=Je.refreshOverflowKeys,nt=Je.isSubPathKey,rt=Je.getKeyPath,at=Je.getKeys,it=Je.getSubPathKeys,ot=u.useMemo((function(){return{registerPath:$e,unregisterPath:et}}),[$e,et]),st=u.useMemo((function(){return{isSubPathKey:nt}}),[nt]);u.useEffect((function(){tt(qe?Pe:be.slice(Le+1).map((function(e){return e.key})))}),[Le,qe]);var ct=Object(h.a)(q||V&&(null===(t=be[0])||void 0===t?void 0:t.key),{value:q}),ut=Object(s.a)(ct,2),lt=ut[0],ft=ut[1],dt=Q((function(e){ft(e)})),pt=Q((function(){ft(void 0)})),ht=Object(h.a)(K||[],{value:Y,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?Pe:[e]}}),vt=Object(s.a)(ht,2),mt=vt[0],bt=vt[1],gt=Q((function(e){null===de||void 0===de||de(N(e)),function(e){if(U){var t,n=e.key,r=mt.includes(n);t=G?r?mt.filter((function(e){return e!==n})):[].concat(Object(o.a)(mt),[n]):[n],bt(t);var a=Object(i.a)(Object(i.a)({},e),{},{selectedKeys:t});r?null===J||void 0===J||J(a):null===Z||void 0===Z||Z(a)}!G&&Ue.length&&"inline"!==Te&&Ge(Pe)}(e)})),yt=Q((function(e,t){var n=Ue.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==Te){var r=it(e);n=n.filter((function(e){return!r.has(e)}))}p()(Ue,n)||Ge(n)})),Ot=Q(fe),kt=_e(Te,lt,je,xe,we,at,rt,ft,(function(e,t){var n=null!==t&&void 0!==t?t:!Ue.includes(e);yt(e,n)}),ve);u.useEffect((function(){ke(!0)}),[]);var wt="horizontal"!==Te||E?be:be.map((function(e,t){return u.createElement(_,{key:e.key,overflowDisabled:t>Le},e)})),xt=u.createElement(m.a,Object(r.a)({id:w,ref:we,prefixCls:"".concat(d,"-overflow"),component:"ul",itemComponent:H,className:f()(d,"".concat(d,"-root"),"".concat(d,"-").concat(Te),b,(n={},Object(a.a)(n,"".concat(d,"-inline-collapsed"),Re),Object(a.a)(n,"".concat(d,"-rtl"),je),n)),dir:k,style:v,role:"menu",tabIndex:y,data:wt,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?be.slice(-t):null;return u.createElement(pe,{eventKey:Ie,title:ue,disabled:qe,internalPopupClose:0===t,popupClassName:le},n)},maxCount:"horizontal"!==Te||E?m.a.INVALIDATE:m.a.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){ze(e)},onKeyDown:kt},me));return u.createElement(L.Provider,{value:xe},u.createElement(_,{prefixCls:d,mode:Te,openKeys:Ue,rtl:je,disabled:C,motion:Oe?te:null,defaultMotions:Oe?ne:null,activeKey:lt,onActive:dt,onInactive:pt,selectedKeys:mt,inlineIndent:ee,subMenuOpenDelay:I,subMenuCloseDelay:P,forceSubMenuRender:R,builtinPlacements:ie,triggerSubMenuAction:ae,getPopupContainer:Ot,itemIcon:oe,expandIcon:se,onItemClick:gt,onOpenChange:yt},u.createElement(F.Provider,{value:st},xt),u.createElement("div",{style:{display:"none"},"aria-hidden":!0},u.createElement(M.Provider,{value:ot},be))))};Le.Item=H,Le.SubMenu=pe,Le.ItemGroup=function(e){var t=e.children,n=Object(c.a)(e,De),r=X(t,D(n.eventKey));return P()?r:u.createElement(Fe,Object(w.a)(n,["warnKey"]),r)},Le.Divider=function(e){var t=e.className,n=e.style,r=u.useContext(S).prefixCls;return P()?null:u.createElement("li",{className:f()("".concat(r,"-item-divider"),t),style:n})};t.b=Le},function(e,t,n){"use strict";var r=n(17),a=n(16),i=n(1),o=n(26),s=n(38),c=n(35),u=n(18),l=n(23),f=n.n(l),d=n(73),p=n(207),h=n(87),v=n(31),m=n(50),b=n(107);function g(e){var t=Object(i.useRef)(),n=Object(i.useRef)(!1);return Object(i.useEffect)((function(){return function(){n.current=!0,m.a.cancel(t.current)}}),[]),function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];n.current||(m.a.cancel(t.current),t.current=Object(m.a)((function(){e.apply(void 0,a)})))}}var y=n(49);function O(e,t){var n,r=e.prefixCls,o=e.id,s=e.active,c=e.tab,u=c.key,l=c.tab,d=c.disabled,p=c.closeIcon,h=e.closable,v=e.renderWrapper,m=e.removeAriaLabel,b=e.editable,g=e.onClick,O=e.onRemove,k=e.onFocus,w=e.style,x=e.className,j="".concat(r,"-tab");i.useEffect((function(){return O}),[]);var S=b&&!1!==h&&!d;function _(e){d||g(e)}var C=i.createElement("div",{key:u,ref:t,className:f()(j,x,(n={},Object(a.a)(n,"".concat(j,"-with-remove"),S),Object(a.a)(n,"".concat(j,"-active"),s),Object(a.a)(n,"".concat(j,"-disabled"),d),n)),style:w,onClick:_},i.createElement("div",{role:"tab","aria-selected":s,id:o&&"".concat(o,"-tab-").concat(u),className:"".concat(j,"-btn"),"aria-controls":o&&"".concat(o,"-panel-").concat(u),"aria-disabled":d,tabIndex:d?null:0,onClick:function(e){e.stopPropagation(),_(e)},onKeyDown:function(e){[y.a.SPACE,y.a.ENTER].includes(e.which)&&(e.preventDefault(),_(e))},onFocus:k},l),S&&i.createElement("button",{type:"button","aria-label":m||"remove",tabIndex:0,className:"".concat(j,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),b.onEdit("remove",{key:u,event:t})}},p||b.removeIcon||"\xd7"));return v?v(C):C}var k=i.forwardRef(O),w={width:0,height:0,left:0,top:0};var x={width:0,height:0,left:0,top:0,right:0};var j=n(316),S=n(164),_={adjustX:1,adjustY:1},C=[0,0],E={topLeft:{points:["bl","tl"],overflow:_,offset:[0,-4],targetOffset:C},topCenter:{points:["bc","tc"],overflow:_,offset:[0,-4],targetOffset:C},topRight:{points:["br","tr"],overflow:_,offset:[0,-4],targetOffset:C},bottomLeft:{points:["tl","bl"],overflow:_,offset:[0,4],targetOffset:C},bottomCenter:{points:["tc","bc"],overflow:_,offset:[0,4],targetOffset:C},bottomRight:{points:["tr","br"],overflow:_,offset:[0,4],targetOffset:C}};var N=i.forwardRef((function(e,t){var n=e.arrow,r=void 0!==n&&n,s=e.prefixCls,u=void 0===s?"rc-dropdown":s,l=e.transitionName,d=e.animation,p=e.align,h=e.placement,v=void 0===h?"bottomLeft":h,m=e.placements,b=void 0===m?E:m,g=e.getPopupContainer,y=e.showAction,O=e.hideAction,k=e.overlayClassName,w=e.overlayStyle,x=e.visible,j=e.trigger,_=void 0===j?["hover"]:j,C=Object(c.a)(e,["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger"]),N=i.useState(),T=Object(o.a)(N,2),I=T[0],A=T[1],M="visible"in e?x:I,P=i.useRef(null);i.useImperativeHandle(t,(function(){return P.current}));var R=function(){var t=e.overlay;return"function"===typeof t?t():t},D=function(t){var n=e.onOverlayClick,r=R().props;A(!1),n&&n(t),r.onClick&&r.onClick(t)},F=function(){var e=R(),t={prefixCls:"".concat(u,"-menu"),onClick:D};return"string"===typeof e.type&&delete t.prefixCls,i.createElement(i.Fragment,null,r&&i.createElement("div",{className:"".concat(u,"-arrow")}),i.cloneElement(e,t))},L=O;return L||-1===_.indexOf("contextMenu")||(L=["click"]),i.createElement(S.a,Object.assign({},C,{prefixCls:u,ref:P,popupClassName:f()(k,Object(a.a)({},"".concat(u,"-show-arrow"),r)),popupStyle:w,builtinPlacements:b,action:_,showAction:y,hideAction:L||[],popupPlacement:v,popupAlign:p,popupTransitionName:l,popupAnimation:d,popupVisible:M,stretch:function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n}()?"minWidth":"",popup:"function"===typeof e.overlay?F:F(),onPopupVisibleChange:function(t){var n=e.onVisibleChange;A(t),"function"===typeof n&&n(t)},getPopupContainer:g}),function(){var t=e.children,n=t.props?t.props:{},r=f()(n.className,function(){var t=e.openClassName;return void 0!==t?t:"".concat(u,"-open")}());return I&&t?i.cloneElement(t,{className:r}):t}())}));function T(e,t){var n=e.prefixCls,r=e.editable,a=e.locale,o=e.style;return r&&!1!==r.showAdd?i.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:o,"aria-label":(null===a||void 0===a?void 0:a.addAriaLabel)||"Add tab",onClick:function(e){r.onEdit("add",{event:e})}},r.addIcon||"+"):null}var I=i.forwardRef(T);function A(e,t){var n=e.prefixCls,r=e.id,s=e.tabs,c=e.locale,u=e.mobile,l=e.moreIcon,d=void 0===l?"More":l,p=e.moreTransitionName,h=e.style,v=e.className,m=e.editable,b=e.tabBarGutter,g=e.rtl,O=e.removeAriaLabel,k=e.onTabClick,w=Object(i.useState)(!1),x=Object(o.a)(w,2),S=x[0],_=x[1],C=Object(i.useState)(null),E=Object(o.a)(C,2),T=E[0],A=E[1],M="".concat(r,"-more-popup"),P="".concat(n,"-dropdown"),R=null!==T?"".concat(M,"-").concat(T):null,D=null===c||void 0===c?void 0:c.dropdownAriaLabel;var F=i.createElement(j.b,{onClick:function(e){var t=e.key,n=e.domEvent;k(t,n),_(!1)},id:M,tabIndex:-1,role:"listbox","aria-activedescendant":R,selectedKeys:[T],"aria-label":void 0!==D?D:"expanded dropdown"},s.map((function(e){var t=m&&!1!==e.closable&&!e.disabled;return i.createElement(j.a,{key:e.key,id:"".concat(M,"-").concat(e.key),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(e.key),disabled:e.disabled},i.createElement("span",null,e.tab),t&&i.createElement("button",{type:"button","aria-label":O||"remove",tabIndex:0,className:"".concat(P,"-menu-item-remove"),onClick:function(t){var n,r;t.stopPropagation(),n=t,r=e.key,n.preventDefault(),n.stopPropagation(),m.onEdit("remove",{key:r,event:n})}},e.closeIcon||m.removeIcon||"\xd7"))})));function L(e){for(var t=s.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===T}))||0,r=t.length,a=0;a<r;a+=1){var i=t[n=(n+e+r)%r];if(!i.disabled)return void A(i.key)}}Object(i.useEffect)((function(){var e=document.getElementById(R);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[T]),Object(i.useEffect)((function(){S||A(null)}),[S]);var z=Object(a.a)({},g?"marginRight":"marginLeft",b);s.length||(z.visibility="hidden",z.order=1);var q=f()(Object(a.a)({},"".concat(P,"-rtl"),g)),V=u?null:i.createElement(N,{prefixCls:P,overlay:F,trigger:["hover"],visible:S,transitionName:p,onVisibleChange:_,overlayClassName:q,mouseEnterDelay:.1,mouseLeaveDelay:.1},i.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:z,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":M,id:"".concat(r,"-more"),"aria-expanded":S,onKeyDown:function(e){var t=e.which;if(S)switch(t){case y.a.UP:L(-1),e.preventDefault();break;case y.a.DOWN:L(1),e.preventDefault();break;case y.a.ESC:_(!1);break;case y.a.SPACE:case y.a.ENTER:null!==T&&k(T,e)}else[y.a.DOWN,y.a.SPACE,y.a.ENTER].includes(t)&&(_(!0),e.preventDefault())}},d));return i.createElement("div",{className:f()("".concat(n,"-nav-operations"),v),style:h,ref:t},V,i.createElement(I,{prefixCls:n,locale:c,editable:m}))}var M=i.memo(i.forwardRef(A),(function(e,t){return t.tabMoving})),P=Object(i.createContext)(null),R=Math.pow(.995,20);function D(e,t){var n=i.useRef(e),r=i.useState({}),a=Object(o.a)(r,2)[1];return[n.current,function(e){var r="function"===typeof e?e(n.current):e;r!==n.current&&t(r,n.current),n.current=r,a({})}]}var F=function(e){var t,n=e.position,r=e.prefixCls,a=e.extra;if(!a)return null;var o={};return a&&"object"===Object(s.a)(a)&&!i.isValidElement(a)?o=a:o.right=a,"right"===n&&(t=o.right),"left"===n&&(t=o.left),t?i.createElement("div",{className:"".concat(r,"-extra-content")},t):null};function L(e,t){var n,s=i.useContext(P),c=s.prefixCls,l=s.tabs,d=e.className,p=e.style,h=e.id,y=e.animated,O=e.activeKey,j=e.rtl,S=e.extra,_=e.editable,C=e.locale,E=e.tabPosition,N=e.tabBarGutter,T=e.children,A=e.onTabClick,L=e.onTabScroll,z=Object(i.useRef)(),q=Object(i.useRef)(),V=Object(i.useRef)(),B=Object(i.useRef)(),U=function(){var e=Object(i.useRef)(new Map);return[function(t){return e.current.has(t)||e.current.set(t,i.createRef()),e.current.get(t)},function(t){e.current.delete(t)}]}(),W=Object(o.a)(U,2),G=W[0],H=W[1],K="top"===E||"bottom"===E,X=D(0,(function(e,t){K&&L&&L({direction:e>t?"left":"right"})})),Q=Object(o.a)(X,2),Y=Q[0],Z=Q[1],J=D(0,(function(e,t){!K&&L&&L({direction:e>t?"top":"bottom"})})),$=Object(o.a)(J,2),ee=$[0],te=$[1],ne=Object(i.useState)(0),re=Object(o.a)(ne,2),ae=re[0],ie=re[1],oe=Object(i.useState)(0),se=Object(o.a)(oe,2),ce=se[0],ue=se[1],le=Object(i.useState)(0),fe=Object(o.a)(le,2),de=fe[0],pe=fe[1],he=Object(i.useState)(0),ve=Object(o.a)(he,2),me=ve[0],be=ve[1],ge=Object(i.useState)(null),ye=Object(o.a)(ge,2),Oe=ye[0],ke=ye[1],we=Object(i.useState)(null),xe=Object(o.a)(we,2),je=xe[0],Se=xe[1],_e=Object(i.useState)(0),Ce=Object(o.a)(_e,2),Ee=Ce[0],Ne=Ce[1],Te=Object(i.useState)(0),Ie=Object(o.a)(Te,2),Ae=Ie[0],Me=Ie[1],Pe=function(e){var t=Object(i.useRef)([]),n=Object(i.useState)({}),r=Object(o.a)(n,2)[1],a=Object(i.useRef)("function"===typeof e?e():e),s=g((function(){var e=a.current;t.current.forEach((function(t){e=t(e)})),t.current=[],a.current=e,r({})}));return[a.current,function(e){t.current.push(e),s()}]}(new Map),Re=Object(o.a)(Pe,2),De=Re[0],Fe=Re[1],Le=function(e,t,n){return Object(i.useMemo)((function(){for(var n,r=new Map,a=t.get(null===(n=e[0])||void 0===n?void 0:n.key)||w,i=a.left+a.width,o=0;o<e.length;o+=1){var s,c=e[o].key,l=t.get(c);l||(l=t.get(null===(s=e[o-1])||void 0===s?void 0:s.key)||w);var f=r.get(c)||Object(u.a)({},l);f.right=i-f.left-f.width,r.set(c,f)}return r}),[e.map((function(e){return e.key})).join("_"),t,n])}(l,De,ae),ze="".concat(c,"-nav-operations-hidden"),qe=0,Ve=0;function Be(e){return e<qe?qe:e>Ve?Ve:e}K?j?(qe=0,Ve=Math.max(0,ae-Oe)):(qe=Math.min(0,Oe-ae),Ve=0):(qe=Math.min(0,je-ce),Ve=0);var Ue=Object(i.useRef)(),We=Object(i.useState)(),Ge=Object(o.a)(We,2),He=Ge[0],Ke=Ge[1];function Xe(){Ke(Date.now())}function Qe(){window.clearTimeout(Ue.current)}function Ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=Le.get(e)||{width:0,height:0,left:0,right:0,top:0};if(K){var n=Y;j?t.right<Y?n=t.right:t.right+t.width>Y+Oe&&(n=t.right+t.width-Oe):t.left<-Y?n=-t.left:t.left+t.width>-Y+Oe&&(n=-(t.left+t.width-Oe)),te(0),Z(Be(n))}else{var r=ee;t.top<-ee?r=-t.top:t.top+t.height>-ee+je&&(r=-(t.top+t.height-je)),Z(0),te(Be(r))}}!function(e,t){var n=Object(i.useState)(),r=Object(o.a)(n,2),a=r[0],s=r[1],c=Object(i.useState)(0),u=Object(o.a)(c,2),l=u[0],f=u[1],d=Object(i.useState)(0),p=Object(o.a)(d,2),h=p[0],v=p[1],m=Object(i.useState)(),b=Object(o.a)(m,2),g=b[0],y=b[1],O=Object(i.useRef)(),k=Object(i.useRef)(),w=Object(i.useRef)(null);w.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;s({x:n,y:r}),window.clearInterval(O.current)},onTouchMove:function(e){if(a){e.preventDefault();var n=e.touches[0],r=n.screenX,i=n.screenY;s({x:r,y:i});var o=r-a.x,c=i-a.y;t(o,c);var u=Date.now();f(u),v(u-l),y({x:o,y:c})}},onTouchEnd:function(){if(a&&(s(null),y(null),g)){var e=g.x/h,n=g.y/h,r=Math.abs(e),i=Math.abs(n);if(Math.max(r,i)<.1)return;var o=e,c=n;O.current=window.setInterval((function(){Math.abs(o)<.01&&Math.abs(c)<.01?window.clearInterval(O.current):t(20*(o*=R),20*(c*=R))}),20)}},onWheel:function(e){var n=e.deltaX,r=e.deltaY,a=0,i=Math.abs(n),o=Math.abs(r);i===o?a="x"===k.current?n:r:i>o?(a=n,k.current="x"):(a=r,k.current="y"),t(-a,-a)&&e.preventDefault()}},i.useEffect((function(){function t(e){w.current.onTouchMove(e)}function n(e){w.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){w.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){w.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(z,(function(e,t){function n(e,t){e((function(e){return Be(e+t)}))}if(K){if(Oe>=ae)return!1;n(Z,e)}else{if(je>=ce)return!1;n(te,t)}return Qe(),Xe(),!0})),Object(i.useEffect)((function(){return Qe(),He&&(Ue.current=window.setTimeout((function(){Ke(0)}),100)),Qe}),[He]);var Ze=function(e,t,n,r,a){var o,s,c,u=a.tabs,l=a.tabPosition,f=a.rtl;["top","bottom"].includes(l)?(o="width",s=f?"right":"left",c=Math.abs(t.left)):(o="height",s="top",c=-t.top);var d=t[o],p=n[o],h=r[o],v=d;return p+h>d&&(v=d-h),Object(i.useMemo)((function(){if(!u.length)return[0,0];for(var t=u.length,n=t,r=0;r<t;r+=1){var a=e.get(u[r].key)||x;if(a[s]+a[o]>c+v){n=r-1;break}}for(var i=0,l=t-1;l>=0;l-=1)if((e.get(u[l].key)||x)[s]<c){i=l+1;break}return[i,n]}),[e,c,v,l,u.map((function(e){return e.key})).join("_"),f])}(Le,{width:Oe,height:je,left:Y,top:ee},{width:de,height:me},{width:Ee,height:Ae},Object(u.a)(Object(u.a)({},e),{},{tabs:l})),Je=Object(o.a)(Ze,2),$e=Je[0],et=Je[1],tt={};"top"===E||"bottom"===E?tt[j?"marginRight":"marginLeft"]=N:tt.marginTop=N;var nt=l.map((function(e,t){var n=e.key,r=e.className;return i.createElement(k,{id:h,prefixCls:c,key:n,tab:e,style:0===t?void 0:tt,className:r,closable:e.closable,editable:_,active:n===O,renderWrapper:T,removeAriaLabel:null===C||void 0===C?void 0:C.removeAriaLabel,ref:G(n),onClick:function(e){A(n,e)},onRemove:function(){H(n)},onFocus:function(){Ye(n),Xe(),z.current&&(j||(z.current.scrollLeft=0),z.current.scrollTop=0)}})})),rt=g((function(){var e,t,n,r,a,i,o,s,c,u=(null===(e=z.current)||void 0===e?void 0:e.offsetWidth)||0,f=(null===(t=z.current)||void 0===t?void 0:t.offsetHeight)||0,d=(null===(n=B.current)||void 0===n?void 0:n.offsetWidth)||0,p=(null===(r=B.current)||void 0===r?void 0:r.offsetHeight)||0,h=(null===(a=V.current)||void 0===a?void 0:a.offsetWidth)||0,v=(null===(i=V.current)||void 0===i?void 0:i.offsetHeight)||0;ke(u),Se(f),Ne(d),Me(p);var m=((null===(o=q.current)||void 0===o?void 0:o.offsetWidth)||0)-d,b=((null===(s=q.current)||void 0===s?void 0:s.offsetHeight)||0)-p;ie(m),ue(b);var g=null===(c=V.current)||void 0===c?void 0:c.className.includes(ze);pe(m-(g?0:h)),be(b-(g?0:v)),Fe((function(){var e=new Map;return l.forEach((function(t){var n=t.key,r=G(n).current;r&&e.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))})),at=l.slice(0,$e),it=l.slice(et+1),ot=[].concat(Object(v.a)(at),Object(v.a)(it)),st=Object(i.useState)(),ct=Object(o.a)(st,2),ut=ct[0],lt=ct[1],ft=Le.get(O),dt=Object(i.useRef)();function pt(){m.a.cancel(dt.current)}Object(i.useEffect)((function(){var e={};return ft&&(K?(j?e.right=ft.right:e.left=ft.left,e.width=ft.width):(e.top=ft.top,e.height=ft.height)),pt(),dt.current=Object(m.a)((function(){lt(e)})),pt}),[ft,K,j]),Object(i.useEffect)((function(){Ye()}),[O,ft,Le,K]),Object(i.useEffect)((function(){rt()}),[j,N,O,l.map((function(e){return e.key})).join("_")]);var ht,vt,mt,bt,gt=!!ot.length,yt="".concat(c,"-nav-wrap");return K?j?(vt=Y>0,ht=Y+Oe<ae):(ht=Y<0,vt=-Y+Oe<ae):(mt=ee<0,bt=-ee+je<ce),i.createElement("div",{ref:t,role:"tablist",className:f()("".concat(c,"-nav"),d),style:p,onKeyDown:function(){Xe()}},i.createElement(F,{position:"left",extra:S,prefixCls:c}),i.createElement(b.a,{onResize:rt},i.createElement("div",{className:f()(yt,(n={},Object(a.a)(n,"".concat(yt,"-ping-left"),ht),Object(a.a)(n,"".concat(yt,"-ping-right"),vt),Object(a.a)(n,"".concat(yt,"-ping-top"),mt),Object(a.a)(n,"".concat(yt,"-ping-bottom"),bt),n)),ref:z},i.createElement(b.a,{onResize:rt},i.createElement("div",{ref:q,className:"".concat(c,"-nav-list"),style:{transform:"translate(".concat(Y,"px, ").concat(ee,"px)"),transition:He?"none":void 0}},nt,i.createElement(I,{ref:B,prefixCls:c,locale:C,editable:_,style:Object(u.a)(Object(u.a)({},0===nt.length?void 0:tt),{},{visibility:gt?"hidden":null})}),i.createElement("div",{className:f()("".concat(c,"-ink-bar"),Object(a.a)({},"".concat(c,"-ink-bar-animated"),y.inkBar)),style:ut}))))),i.createElement(M,Object(r.a)({},e,{removeAriaLabel:null===C||void 0===C?void 0:C.removeAriaLabel,ref:V,prefixCls:c,tabs:ot,className:!gt&&ze,tabMoving:!!He})),i.createElement(F,{position:"right",extra:S,prefixCls:c}))}var z=i.forwardRef(L);function q(e){var t=e.id,n=e.activeKey,r=e.animated,o=e.tabPosition,s=e.rtl,c=e.destroyInactiveTabPane,u=i.useContext(P),l=u.prefixCls,d=u.tabs,p=r.tabPane,h=d.findIndex((function(e){return e.key===n}));return i.createElement("div",{className:f()("".concat(l,"-content-holder"))},i.createElement("div",{className:f()("".concat(l,"-content"),"".concat(l,"-content-").concat(o),Object(a.a)({},"".concat(l,"-content-animated"),p)),style:h&&p?Object(a.a)({},s?"marginRight":"marginLeft","-".concat(h,"00%")):null},d.map((function(e){return i.cloneElement(e.node,{key:e.key,prefixCls:l,tabKey:e.key,id:t,animated:p,active:e.key===n,destroyInactiveTabPane:c})}))))}function V(e){var t=e.prefixCls,n=e.forceRender,r=e.className,a=e.style,s=e.id,c=e.active,l=e.animated,d=e.destroyInactiveTabPane,p=e.tabKey,h=e.children,v=i.useState(n),m=Object(o.a)(v,2),b=m[0],g=m[1];i.useEffect((function(){c?g(!0):d&&g(!1)}),[c,d]);var y={};return c||(l?(y.visibility="hidden",y.height=0,y.overflowY="hidden"):y.display="none"),i.createElement("div",{id:s&&"".concat(s,"-panel-").concat(p),role:"tabpanel",tabIndex:c?0:-1,"aria-labelledby":s&&"".concat(s,"-tab-").concat(p),"aria-hidden":!c,style:Object(u.a)(Object(u.a)({},y),a),className:f()("".concat(t,"-tabpane"),c&&"".concat(t,"-tabpane-active"),r)},(c||b||n)&&h)}var B=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll"],U=0;function W(e,t){var n,l,v=e.id,m=e.prefixCls,b=void 0===m?"rc-tabs":m,g=e.className,y=e.children,O=e.direction,k=e.activeKey,w=e.defaultActiveKey,x=e.editable,j=e.animated,S=void 0===j?{inkBar:!0,tabPane:!1}:j,_=e.tabPosition,C=void 0===_?"top":_,E=e.tabBarGutter,N=e.tabBarStyle,T=e.tabBarExtraContent,I=e.locale,A=e.moreIcon,M=e.moreTransitionName,R=e.destroyInactiveTabPane,D=e.renderTabBar,F=e.onChange,L=e.onTabClick,V=e.onTabScroll,W=Object(c.a)(e,B),G=function(e){return Object(d.a)(e).map((function(e){if(i.isValidElement(e)){var t=void 0!==e.key?String(e.key):void 0;return Object(u.a)(Object(u.a)({key:t},e.props),{},{node:e})}return null})).filter((function(e){return e}))}(y),H="rtl"===O;l=!1===S?{inkBar:!1,tabPane:!1}:!0===S?{inkBar:!0,tabPane:!0}:Object(u.a)({inkBar:!0,tabPane:!1},"object"===Object(s.a)(S)?S:{});var K=Object(i.useState)(!1),X=Object(o.a)(K,2),Q=X[0],Y=X[1];Object(i.useEffect)((function(){Y(Object(p.a)())}),[]);var Z=Object(h.a)((function(){var e;return null===(e=G[0])||void 0===e?void 0:e.key}),{value:k,defaultValue:w}),J=Object(o.a)(Z,2),$=J[0],ee=J[1],te=Object(i.useState)((function(){return G.findIndex((function(e){return e.key===$}))})),ne=Object(o.a)(te,2),re=ne[0],ae=ne[1];Object(i.useEffect)((function(){var e,t=G.findIndex((function(e){return e.key===$}));-1===t&&(t=Math.max(0,Math.min(re,G.length-1)),ee(null===(e=G[t])||void 0===e?void 0:e.key));ae(t)}),[G.map((function(e){return e.key})).join("_"),$,re]);var ie=Object(h.a)(null,{value:v}),oe=Object(o.a)(ie,2),se=oe[0],ce=oe[1],ue=C;Q&&!["left","right"].includes(C)&&(ue="top"),Object(i.useEffect)((function(){v||(ce("rc-tabs-".concat(U)),U+=1)}),[]);var le,fe={id:se,activeKey:$,animated:l,tabPosition:ue,rtl:H,mobile:Q},de=Object(u.a)(Object(u.a)({},fe),{},{editable:x,locale:I,moreIcon:A,moreTransitionName:M,tabBarGutter:E,onTabClick:function(e,t){null===L||void 0===L||L(e,t),ee(e),null===F||void 0===F||F(e)},onTabScroll:V,extra:T,style:N,panes:y});return le=D?D(de,z):i.createElement(z,de),i.createElement(P.Provider,{value:{tabs:G,prefixCls:b}},i.createElement("div",Object(r.a)({ref:t,id:v,className:f()(b,"".concat(b,"-").concat(ue),(n={},Object(a.a)(n,"".concat(b,"-mobile"),Q),Object(a.a)(n,"".concat(b,"-editable"),x),Object(a.a)(n,"".concat(b,"-rtl"),H),n),g)},W),le,i.createElement(q,Object(r.a)({destroyInactiveTabPane:R},fe,{animated:l}))))}var G=i.forwardRef(W);G.TabPane=V;var H=G,K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},X=n(48),Q=function(e,t){return i.createElement(X.a,Object(u.a)(Object(u.a)({},e),{},{ref:t,icon:K}))};Q.displayName="EllipsisOutlined";var Y=i.forwardRef(Q),Z=n(423),J=n(115),$=n(55),ee=n(141),te=n(86),ne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function re(e){var t,n=e.type,o=e.className,s=e.size,c=e.onEdit,u=e.hideAdd,l=e.centered,d=e.addIcon,p=ne(e,["type","className","size","onEdit","hideAdd","centered","addIcon"]),h=p.prefixCls,v=p.moreIcon,m=void 0===v?i.createElement(Y,null):v,b=i.useContext(ee.b),g=b.getPrefixCls,y=b.direction,O=g("tabs",h);"editable-card"===n&&(t={onEdit:function(e,t){var n=t.key,r=t.event;null===c||void 0===c||c("add"===e?r:n,e)},removeIcon:i.createElement(J.a,null),addIcon:d||i.createElement(Z.a,null),showAdd:!0!==u});var k=g();return Object($.a)(!("onPrevClick"in p)&&!("onNextClick"in p),"Tabs","`onPrevClick` and `onNextClick` has been removed. Please use `onTabScroll` instead."),i.createElement(te.b.Consumer,null,(function(e){var c,u=void 0!==s?s:e;return i.createElement(H,Object(r.a)({direction:y,moreTransitionName:"".concat(k,"-slide-up")},p,{className:f()((c={},Object(a.a)(c,"".concat(O,"-").concat(u),u),Object(a.a)(c,"".concat(O,"-card"),["card","editable-card"].includes(n)),Object(a.a)(c,"".concat(O,"-editable-card"),"editable-card"===n),Object(a.a)(c,"".concat(O,"-centered"),l),c),o),editable:t,moreIcon:m,prefixCls:O}))}))}re.TabPane=V;t.a=re},,,function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(101);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),i=o.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},function(e,t,n){"use strict";var r=n(101),a=n(437),i=n(438),o=n(321),s=n(439),c=n(442),u=n(443),l=n(324),f=n(228),d=n(229);e.exports=function(e){return new Promise((function(t,n){var p,h=e.data,v=e.headers,m=e.responseType;function b(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(h)&&delete v["Content-Type"];var g=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",O=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(y+":"+O)}var k=s(e.baseURL,e.url);function w(){if(g){var r="getAllResponseHeaders"in g?c(g.getAllResponseHeaders()):null,i={data:m&&"text"!==m&&"json"!==m?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g};a((function(e){t(e),b()}),(function(e){n(e),b()}),i),g=null}}if(g.open(e.method.toUpperCase(),o(k,e.params,e.paramsSerializer),!0),g.timeout=e.timeout,"onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(w)},g.onabort=function(){g&&(n(l("Request aborted",e,"ECONNABORTED",g)),g=null)},g.onerror=function(){n(l("Network Error",e,null,g)),g=null},g.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||f.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},r.isStandardBrowserEnv()){var x=(e.withCredentials||u(k))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;x&&(v[e.xsrfHeaderName]=x)}"setRequestHeader"in g&&r.forEach(v,(function(e,t){"undefined"===typeof h&&"content-type"===t.toLowerCase()?delete v[t]:g.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),m&&"json"!==m&&(g.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&g.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){g&&(n(!e||e&&e.type?new d("canceled"):e),g.abort(),g=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),h||(h=null),g.send(h)}))}},function(e,t,n){"use strict";var r=n(322);e.exports=function(e,t,n,a,i){var o=new Error(e);return r(o,t,n,a,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(101);e.exports=function(e,t){t=t||{};var n={};function a(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return a(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(void 0,t[n])}function c(n){return n in t?a(e[n],t[n]):n in e?a(void 0,e[n]):void 0}var u={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||i,a=t(e);r.isUndefined(a)&&t!==c||(n[e]=a)})),n}},function(e,t){e.exports={version:"0.24.0"}},function(e,t){e.exports=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,n){var r=n(215),a=n(232);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(110))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},function(e,t,n){var r=n(471),a=n(478),i=n(480),o=n(481),s=n(482);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=i,c.prototype.has=o,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(483),a=n(486),i=n(487);e.exports=function(e,t,n,o,s,c){var u=1&n,l=e.length,f=t.length;if(l!=f&&!(u&&f>l))return!1;var d=c.get(e),p=c.get(t);if(d&&p)return d==t&&p==e;var h=-1,v=!0,m=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++h<l;){var b=e[h],g=t[h];if(o)var y=u?o(g,b,h,t,e,c):o(b,g,h,e,t,c);if(void 0!==y){if(y)continue;v=!1;break}if(m){if(!a(t,(function(e,t){if(!i(m,t)&&(b===e||s(b,e,n,o,c)))return m.push(t)}))){v=!1;break}}else if(b!==g&&!s(b,g,n,o,c)){v=!1;break}}return c.delete(e),c.delete(t),v}},function(e,t,n){(function(e){var r=n(124),a=n(504),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||a;e.exports=c}).call(this,n(74)(e))},function(e,t,n){var r=n(506),a=n(507),i=n(508),o=i&&i.isTypedArray,s=o?a(o):r;e.exports=s},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({acos_:function(e){var t={x:Object(i.a)(e,"x","acos")};return r.a.runKernel(a.b,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({acosh_:function(e){var t={x:Object(i.a)(e,"x","acosh")};return r.a.runKernel(a.c,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({addN_:function(e){o.b(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),o.b(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return Object(i.a)(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!o.a(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var s=t;return r.a.runKernel(a.e,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({asin_:function(e){var t={x:Object(i.a)(e,"x","asin")};return r.a.runKernel(a.j,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({asinh_:function(e){var t={x:Object(i.a)(e,"x","asinh")};return r.a.runKernel(a.k,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({atan_:function(e){var t={x:Object(i.a)(e,"x","atan")};return r.a.runKernel(a.l,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({atanh_:function(e){var t={x:Object(i.a)(e,"x","atanh")};return r.a.runKernel(a.n,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(15),a=n(43),i=n(10),o=n(7),s=n(21),c=n(32),u=n(60),l=n(11),f=n(22);var d=Object(l.b)({avgPool3d_:function(e,t,n,l,d){var p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",h=arguments.length>6?arguments[6]:void 0;null==h?h=[1,1,1]:Object(a.b)("dilations is deprecated, this field will be gone in v3.0.0.");var v=Object(o.a)(e,"x","avgPool3d","float32"),m=v,b=!1;4===v.rank&&(b=!0,m=Object(f.a)(v,[1,v.shape[0],v.shape[1],v.shape[2],v.shape[3]])),s.b(5===m.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(m.rank,".")})),s.b("NDHWC"===p,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(p)})),s.b(u.h(n,h),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(h,"'")})),null!=d&&s.b(s.v(l),(function(){return"Error in avgPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(d," but got pad ").concat(l,".")}));var g={x:m},y={filterSize:t,strides:n,pad:l,dimRoundingMode:d,dataFormat:p,dilations:h},O=r.a.runKernel(i.p,g,y);return O=Object(c.a)(O,m.dtype),b?Object(f.a)(O,[O.shape[1],O.shape[2],O.shape[3],O.shape[4]]):O}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({bincount_:function(e,t,n){var s=Object(i.a)(e,"x","bincount"),c=Object(i.a)(t,"weights","bincount");o.b("int32"===s.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(s.dtype)})),o.b(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.b(c.size===s.size||0===c.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(s.shape,", weights shape: ")+"".concat(c.shape,".")}));var u={x:s,weights:c},l={size:n};return r.a.runKernel(a.u,u,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({ceil_:function(e){var t={x:Object(i.a)(e,"x","ceil")};return r.a.runKernel(a.x,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({clipByValue_:function(e,t,n){var s=Object(i.a)(e,"x","clipByValue");o.b(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var c={x:s},u={clipValueMin:t,clipValueMax:n};return r.a.runKernel(a.y,c,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(60),c=n(11),u=n(22);var l=Object(c.b)({conv3d_:function(e,t,n,c){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],d=Object(i.a)(e,"x","conv3d"),p=Object(i.a)(t,"filter","conv3d"),h=d,v=!1;4===d.rank&&(v=!0,h=Object(u.a)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o.b(5===h.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(h.rank,".")})),o.b(5===p.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(p.rank,".")})),o.b(h.shape[4]===p.shape[3],(function(){return"Error in conv3d: depth of input (".concat(h.shape[4],") must match ")+"input depth for filter ".concat(p.shape[3],".")})),o.b(Object(s.h)(n,f),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(f,"'")})),o.b("NDHWC"===l,(function(){return"Error in conv3d: got dataFormat of ".concat(l," but only NDHWC is currently supported.")}));var m={x:h,filter:p},b={strides:n,pad:c,dataFormat:l,dilations:f},g=r.a.runKernel(a.F,m,b);return v?Object(u.a)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(11);var c=Object(s.b)({denseBincount_:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object(i.a)(e,"x","denseBincount"),u=Object(i.a)(t,"weights","denseBincount");o.b("int32"===c.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(c.dtype)})),o.b(c.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(c.rank,".")})),o.b(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.b(u.size===c.size||0===u.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(c.shape,", weights shape: ")+"".concat(u.shape,".")}));var l={x:c,weights:u},f={size:n,binaryOutput:s};return r.a.runKernel(a.M,l,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(15),a=n(10),i=n(7),o=n(21),s=n(32),c=n(11);var u=Object(c.b)({erf_:function(e){var t=Object(i.a)(e,"x","erf");o.b("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=Object(s.a)(t,"float32"));var n={x:t};return r.a.runKernel(a.Y,n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({expm1_:function(e){var t={x:Object(i.a)(e,"x","expm1")};return r.a.runKernel(a.bb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({isFinite_:function(e){var t={x:Object(i.a)(e,"x","isFinite")};return r.a.runKernel(a.sb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({isInf_:function(e){var t={x:Object(i.a)(e,"x","isInf")};return r.a.runKernel(a.tb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({isNaN_:function(e){var t={x:Object(i.a)(e,"x","isNaN")};return r.a.runKernel(a.ub,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(15),a=n(10);function i(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var i={start:e,stop:t,num:n};return r.a.runKernel(a.Ab,{},i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(68),a=n(7),i=n(27),o=n(62),s=n(11),c=n(136),u=n(252);var l=Object(s.b)({logSigmoid_:function(e){var t=Object(a.a)(e,"x","logSigmoid"),n=Object(r.a)((function(e){return{value:Object(o.a)(Object(u.a)(Object(o.a)(e))),gradFunc:function(t){return Object(i.a)(t,Object(c.a)(Object(o.a)(e)))}}}));return n(t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(8),a=n(68),i=n(7),o=n(32),s=n(80),c=n(121),u=n(114),l=n(27),f=n(11),d=n(34),p=n(42);var h=Object(f.b)({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Object(i.a)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var f=Object(a.a)((function(e,n){var a=Object(u.a)(e,t,!0),i=Object(d.a)(e,a),f=Object(d.a)(Object(o.a)(i,"float32"),Object(c.a)(Object(p.a)(Object(s.a)(i),t,!0)));n([f]);return{value:f,gradFunc:function(e,n){var a=Object(r.a)(n,1)[0],i=Object(s.a)(a);return Object(d.a)(e,Object(l.a)(Object(p.a)(e,t,!0),i))}}}));return f(n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(15),a=n(43),i=n(10),o=n(7),s=n(21),c=n(60),u=n(11),l=n(22);var f=Object(u.b)({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,f=arguments.length>4?arguments[4]:void 0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",p=arguments.length>6?arguments[6]:void 0;null==p?p=[1,1,1]:Object(a.b)("dilations is deprecated, this field will be gone in v3.0.0.");var h=Object(o.a)(e,"x","maxPool3d"),v=h,m=!1;4===h.rank&&(m=!0,v=Object(l.a)(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]])),s.b(5===v.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(v.rank,".")})),s.b("NDHWC"===d,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(d)})),s.b(c.h(n,p),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(p,"'")})),null!=f&&s.b(s.v(u),(function(){return"Error in maxPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(f," but got pad ").concat(u,".")}));var b={x:v},g={filterSize:t,strides:n,pad:u,dimRoundingMode:f,dataFormat:d,dilations:p},y=r.a.runKernel(i.Jb,b,g);return m?Object(l.a)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({maxPoolWithArgmax_:function(e,t,n,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=Object(i.a)(e,"x","maxPoolWithArgmax"),u={x:c},l={filterSize:t,strides:n,pad:o,includeBatchInIndex:s},f=r.a.runKernel(a.Mb,u,l);return{result:f[0],indexes:f[1]}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(11),s=n(22);var c=Object(o.b)({multinomial_:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object(i.a)(e,"logits","multinomial"),u=c.size,l=c.rank;if(u<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(u,"."));if(l>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(l));n=n||Math.random();var f=1===l?Object(s.a)(c,[1,-1]):c,d={logits:f},p={numSamples:t,seed:n,normalized:o},h=r.a.runKernel(a.Tb,d,p);return 1===l?Object(s.a)(h,[h.size]):h}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({onesLike_:function(e){var t={x:Object(i.a)(e,"x","onesLike")};return r.a.runKernel(a.bc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({reciprocal_:function(e){var t={x:Object(i.a)(e,"x","reciprocal")};return r.a.runKernel(a.lc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({round_:function(e){var t={x:Object(i.a)(e,"x","round")};return r.a.runKernel(a.vc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),a=n.n(r),i=n(12),o=n(19),s=n(7),c=n(21);function u(){return(u=Object(i.a)(a.a.mark((function e(t,n){var r,i,u,l,f,d,p,h,v,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(s.a)(t,"x","setdiff1d"),i=Object(s.a)(n,"y","setdiff1d"),c.b(r.dtype===i.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(i.dtype,").")})),c.b(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),c.b(1===i.rank,(function(){return"y should be 1D tensor, but got y (".concat(i.shape,").")})),e.next=7,r.data();case 7:return u=e.sent,e.next=10,i.data();case 10:for(l=e.sent,f=new Set(l),d=0,p=0;p<u.length;p++)f.has(u[p])||d++;for(h=new o.b([d],r.dtype),v=new o.b([d],"int32"),m=0,b=0;m<u.length;m++)f.has(u[m])||(h.values[b]=u[m],v.values[b]=m,b++);return e.abrupt("return",[h.toTensor(),v.toTensor()]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(e,t){return u.apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({sign_:function(e){var t={x:Object(i.a)(e,"x","sign")};return r.a.runKernel(a.Bc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Object(i.a)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var o={logits:n},s={dim:t};return r.a.runKernel(a.Fc,o,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({stridedSlice_:function(e,t,n,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=Object(i.a)(e,"x","stridedSlice"),p={x:d},h={begin:t,end:n,strides:o,beginMask:s,endMask:c,ellipsisMask:u,newAxisMask:l,shrinkAxisMask:f};return r.a.runKernel(a.Oc,p,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({tan_:function(e){var t={x:Object(i.a)(e,"x","tan")};return r.a.runKernel(a.Rc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(88),a=n(11),i=n(163);var o=Object(a.b)({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");for(var s=new i.a(t,n,a,!0,o),c=Object(r.a)(e,a),u=0;u<c.values.length;u++)c.values[u]=s.nextValue();return c.toTensor()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return g}));var r=n(43),a=n(7),i=n(21),o=n(128),s=n(85),c=n(95),u=n(152),l=n(96),f=n(155),d=n(11);var p=Object(d.b)({equalStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","equalStrict"),s=Object(a.a)(t,"b","equalStrict");return Object(i.e)(n.shape,s.shape,"Error in equalStrict: "),Object(o.a)(n,s)}}),h=Object(d.b)({greaterEqualStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","greaterEqualStrict"),o=Object(a.a)(t,"b","greaterEqualStrict");return Object(i.e)(n.shape,o.shape,"Error in greaterEqualStrict: "),Object(c.a)(n,o)}}),v=Object(d.b)({greaterStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","greaterStrict"),o=Object(a.a)(t,"b","greaterStrict");return Object(i.e)(n.shape,o.shape,"Error in greaterStrict: "),Object(s.a)(n,o)}}),m=Object(d.b)({lessEqualStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","lessEqualStrict"),o=Object(a.a)(t,"b","lessEqualStrict");return Object(i.e)(n.shape,o.shape,"Error in lessEqualStrict: "),Object(l.a)(n,o)}}),b=Object(d.b)({lessStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","lessStrict"),o=Object(a.a)(t,"b","lessStrict");return Object(i.e)(n.shape,o.shape,"Error in lessStrict: "),Object(u.a)(n,o)}}),g=Object(d.b)({notEqualStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","notEqualStrict"),o=Object(a.a)(t,"b","notEqualStrict");return Object(i.e)(n.shape,o.shape,"Error in notEqualStrict: "),Object(f.a)(n,o)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return w})),n.d(t,"h",(function(){return x})),n.d(t,"i",(function(){return j}));var r=n(43),a=n(7),i=n(21),o=n(33),s=n(36),c=n(126),u=n(154),l=n(196),f=n(27),d=n(11),p=n(89),h=n(157),v=n(34);var m=Object(d.b)({addStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","addStrict"),s=Object(a.a)(t,"b","addStrict");return i.e(n.shape,s.shape,"Error in addStrict: "),Object(o.a)(n,s)}}),b=Object(d.b)({divStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","div"),o=Object(a.a)(t,"b","div");return i.e(n.shape,o.shape,"Error in divideStrict: "),Object(s.a)(n,o)}}),g=Object(d.b)({maximumStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","maximumStrict"),o=Object(a.a)(t,"b","maximumStrict");return i.e(n.shape,o.shape,"Error in maximumStrict: "),Object(c.a)(n,o)}}),y=Object(d.b)({minimumStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","minimumStrict"),o=Object(a.a)(t,"b","minimumStrict");return i.e(n.shape,o.shape,"Error in minimumStrict: "),Object(u.a)(n,o)}}),O=Object(d.b)({modStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","modStrict"),o=Object(a.a)(t,"b","modStrict");return i.e(n.shape,o.shape,"Error in modStrict: "),Object(l.a)(n,o)}}),k=Object(d.b)({mulStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","mul"),o=Object(a.a)(t,"b","mul");return i.e(n.shape,o.shape,"Error in multiplyStrict: "),Object(f.a)(n,o)}}),w=Object(d.b)({powStrict_:function(e,t){return Object(r.b)("strict variants of ops have been deprecated and will be removed in future"),i.e(e.shape,t.shape,"Error in powStrict: "),Object(p.a)(e,t)}}),x=Object(d.b)({squaredDifferenceStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","squaredDifferenceStrict"),o=Object(a.a)(t,"b","squaredDifferenceStrict");return i.e(n.shape,o.shape,"Error in squaredDifferenceStrict: "),Object(h.a)(n,o)}}),j=Object(d.b)({subStrict_:function(e,t){Object(r.b)("strict variants of ops have been deprecated and will be removed in future");var n=Object(a.a)(e,"a","subStrict"),o=Object(a.a)(t,"b","subStrict");return i.e(n.shape,o.shape,"Error in subStrict: "),Object(v.a)(n,o)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10),i=n(7),o=n(11),s=n(183);var c=Object(o.b)({scatterND_:function(e,t,n){var o=Object(i.a)(e,"indices","scatterND","int32"),c=Object(i.a)(t,"updates","scatterND");s.validateInput(c,o,n);var u={indices:o,updates:c},l={shape:n};return r.a.runKernel(a.xc,u,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),a=n(10),i=n(7),o=n(11);var s=Object(o.b)({gatherND_:function(e,t){var n=Object(i.a)(t,"indices","gatherND","int32"),o={params:Object(i.a)(e,"x","gatherND"),indices:n};return r.a.runKernel(a.lb,o)}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof e?e:function(e){return e()};function a(){return new Promise((function(e){return r((function(){return e()}))}))}}).call(this,n(536).setImmediate)},function(e,t,n){"use strict";e.exports=f;var r,a=n(169),i=a.LongBits,o=a.base64,s=a.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var d=function(){return a.Buffer?function(){return(f.create=function(){return new r})()}:function(){return new f}};function p(e,t,n){t[n]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function v(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function m(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}f.create=d(),f.alloc=function(e){return new a.Array(e)},a.Array!==Array&&(f.alloc=a.pool(f.alloc,a.Array.prototype.subarray)),f.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},h.prototype=Object.create(c.prototype),h.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(v,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=i.from(e);return this._push(v,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(v,t.length(),t)},f.prototype.bool=function(e){return this._push(p,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=i.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(a.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(a.float.writeDoubleLE,8,e)};var b=a.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(a.isString(e)){var n=f.alloc(t=o.length(e));o.decode(e,n,0),e=n}return this.uint32(t)._push(b,t,e)},f.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(p,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},f._configure=function(e){r=e,f.create=d(),r._configure()}},function(e,t,n){"use strict";e.exports=c;var r,a=n(169),i=a.LongBits,o=a.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},l=function(){return a.Buffer?function(e){return(c.create=function(e){return a.Buffer.isBuffer(e)?new r(e):u(e)})(e)}:u};function f(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw s(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=l(),r._configure();var t=a.Long?"toLong":"toNumber";a.merge(c.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},function(e,t,n){t.parseMidi=n(582),t.writeMidi=n(583)},function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n="ticks");var r=0,a=e.length,i=a;if(a>0&&e[a-1][n]<=t)return a-1;for(;r<i;){var o=Math.floor(r+(i-r)/2),s=e[o],c=e[o+1];if(s[n]===t){for(var u=o;u<e.length;u++){e[u][n]===t&&(o=u)}return o}if(s[n]<t&&c[n]>t)return o;s[n]>t?i=o:s[n]<t&&(r=o+1)}return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.insert=t.search=void 0,t.search=r,t.insert=function(e,t,n){if(void 0===n&&(n="ticks"),e.length){var a=r(e,t[n],n);e.splice(a+1,0,t)}else e.push(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Track=void 0;var r=n(378),a=n(380),i=n(584),o=n(585),s=n(586),c=n(588),u=new WeakMap,l=function(){function e(e,t){var n=this;if(this.name="",this.notes=[],this.controlChanges=(0,i.createControlChanges)(),this.pitchBends=[],u.set(this,t),e){var r=e.find((function(e){return"trackName"===e.type}));this.name=r?r.text:""}if(this.instrument=new s.Instrument(e,this),this.channel=0,e){for(var a=e.filter((function(e){return"noteOn"===e.type})),o=e.filter((function(e){return"noteOff"===e.type})),c=function(){var e=a.shift();l.channel=e.channel;var t=o.findIndex((function(t){return t.noteNumber===e.noteNumber&&t.absoluteTime>=e.absoluteTime}));if(-1!==t){var n=o.splice(t,1)[0];l.addNote({durationTicks:n.absoluteTime-e.absoluteTime,midi:e.noteNumber,noteOffVelocity:n.velocity/127,ticks:e.absoluteTime,velocity:e.velocity/127})}},l=this;a.length;)c();e.filter((function(e){return"controller"===e.type})).forEach((function(e){n.addCC({number:e.controllerType,ticks:e.absoluteTime,value:e.value/127})})),e.filter((function(e){return"pitchBend"===e.type})).forEach((function(e){n.addPitchBend({ticks:e.absoluteTime,value:e.value/Math.pow(2,13)})}));var f=e.find((function(e){return"endOfTrack"===e.type}));this.endOfTrackTicks=void 0!==f?f.absoluteTime:void 0}}return e.prototype.addNote=function(e){var t=u.get(this),n=new c.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},t);return Object.assign(n,e),(0,r.insert)(this.notes,n,"ticks"),this},e.prototype.addCC=function(e){var t=u.get(this),n=new a.ControlChange({controllerType:e.number},t);return delete e.number,Object.assign(n,e),Array.isArray(this.controlChanges[n.number])||(this.controlChanges[n.number]=[]),(0,r.insert)(this.controlChanges[n.number],n,"ticks"),this},e.prototype.addPitchBend=function(e){var t=u.get(this),n=new o.PitchBend({},t);return Object.assign(n,e),(0,r.insert)(this.pitchBends,n,"ticks"),this},Object.defineProperty(e.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,t=0;t<this.notes.length-1;t++){var n=this.notes[t].time+this.notes[t].duration;e<n&&(e=n)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,t=0;t<this.notes.length-1;t++){var n=this.notes[t].ticks+this.notes[t].durationTicks;e<n&&(e=n)}return e},enumerable:!1,configurable:!0}),e.prototype.fromJSON=function(e){var t=this;for(var n in this.name=e.name,this.channel=e.channel,this.instrument=new s.Instrument(void 0,this),this.instrument.fromJSON(e.instrument),void 0!==e.endOfTrackTicks&&(this.endOfTrackTicks=e.endOfTrackTicks),e.controlChanges)e.controlChanges[n]&&e.controlChanges[n].forEach((function(e){t.addCC({number:e.number,ticks:e.ticks,value:e.value})}));e.notes.forEach((function(e){t.addNote({durationTicks:e.durationTicks,midi:e.midi,ticks:e.ticks,velocity:e.velocity})}))},e.prototype.toJSON=function(){for(var e={},t=0;t<127;t++)this.controlChanges.hasOwnProperty(t)&&(e[t]=this.controlChanges[t].map((function(e){return e.toJSON()})));var n={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map((function(e){return e.toJSON()})),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map((function(e){return e.toJSON()}))};return void 0!==this.endOfTrackTicks&&(n.endOfTrackTicks=this.endOfTrackTicks),n},e}();t.Track=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlChange=t.controlChangeIds=t.controlChangeNames=void 0,t.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},t.controlChangeIds=Object.keys(t.controlChangeNames).reduce((function(e,n){return e[t.controlChangeNames[n]]=n,e}),{});var r=new WeakMap,a=new WeakMap,i=function(){function e(e,t){r.set(this,t),a.set(this,e.controllerType),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(e.prototype,"number",{get:function(){return a.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return t.controlChangeNames[this.number]?t.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return r.get(this).ticksToSeconds(this.ticks)},set:function(e){var t=r.get(this);this.ticks=t.secondsToTicks(e)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},e}();t.ControlChange=i},function(e,t,n){"use strict";var r=n(596);function a(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}e.exports=function(e){var t=new a;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var o=n[i];if("array"===o||"object"===typeof o&&o.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!==typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+n[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}},function(e,t,n){"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,a=e[0],i=e[0],o=1;o<r;++o)if(i=a,t(a=e[o],i)){if(o===n){n++;continue}e[n++]=a}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],a=e[0],i=1;i<n;++i,a=r)if(a=r,(r=e[i])!==a){if(i===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},function(e,t,n){"use strict";(function(e){var r=n(384),a=n(598),i=n(235).Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var o="undefined"!==typeof Uint8ClampedArray,s="undefined"!==typeof BigUint64Array,c="undefined"!==typeof BigInt64Array,u=e.__TYPEDARRAY_POOL;u.UINT8C||(u.UINT8C=a([32,0])),u.BIGUINT64||(u.BIGUINT64=a([32,0])),u.BIGINT64||(u.BIGINT64=a([32,0])),u.BUFFER||(u.BUFFER=a([32,0]));var l=u.DATA,f=u.BUFFER;function d(e){if(e){var t=e.length||e.byteLength,n=r.log2(t);l[n].push(e)}}function p(e){e=r.nextPow2(e);var t=r.log2(e),n=l[t];return n.length>0?n.pop():new ArrayBuffer(e)}function h(e){return new Uint8Array(p(e),0,e)}function v(e){return new Uint16Array(p(2*e),0,e)}function m(e){return new Uint32Array(p(4*e),0,e)}function b(e){return new Int8Array(p(e),0,e)}function g(e){return new Int16Array(p(2*e),0,e)}function y(e){return new Int32Array(p(4*e),0,e)}function O(e){return new Float32Array(p(4*e),0,e)}function k(e){return new Float64Array(p(8*e),0,e)}function w(e){return o?new Uint8ClampedArray(p(e),0,e):h(e)}function x(e){return s?new BigUint64Array(p(8*e),0,e):null}function j(e){return c?new BigInt64Array(p(8*e),0,e):null}function S(e){return new DataView(p(e),0,e)}function _(e){e=r.nextPow2(e);var t=r.log2(e),n=f[t];return n.length>0?n.pop():new i(e)}t.free=function(e){if(i.isBuffer(e))f[r.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|r.log2(t);l[n].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){d(e.buffer)},t.freeArrayBuffer=d,t.freeBuffer=function(e){f[r.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return p(e);switch(t){case"uint8":return h(e);case"uint16":return v(e);case"uint32":return m(e);case"int8":return b(e);case"int16":return g(e);case"int32":return y(e);case"float":case"float32":return O(e);case"double":case"float64":return k(e);case"uint8_clamped":return w(e);case"bigint64":return j(e);case"biguint64":return x(e);case"buffer":return _(e);case"data":case"dataview":return S(e);default:return null}return null},t.mallocArrayBuffer=p,t.mallocUint8=h,t.mallocUint16=v,t.mallocUint32=m,t.mallocInt8=b,t.mallocInt16=g,t.mallocInt32=y,t.mallocFloat32=t.mallocFloat=O,t.mallocFloat64=t.mallocDouble=k,t.mallocUint8Clamped=w,t.mallocBigUint64=x,t.mallocBigInt64=j,t.mallocDataView=S,t.mallocBuffer=_,t.clearCache=function(){for(var e=0;e<32;++e)u.UINT8[e].length=0,u.UINT16[e].length=0,u.UINT32[e].length=0,u.INT8[e].length=0,u.INT16[e].length=0,u.INT32[e].length=0,u.FLOAT[e].length=0,u.DOUBLE[e].length=0,u.BIGUINT64[e].length=0,u.BIGINT64[e].length=0,u.UINT8C[e].length=0,l[e].length=0,f[e].length=0}}).call(this,n(110))},function(e,t,n){"use strict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1)&&!!e},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var a=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,a=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--a;e[t]=r<<a&255}}(a),t.reverse=function(e){return a[255&e]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=n(10);function i(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var o=n(7),s=n(11);var c=Object(s.b)({sparseToDense_:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=Object(o.a)(e,"sparseIndices","sparseToDense","int32"),u=Object(o.a)(t,"sparseValues","sparseToDense"),l=Object(o.a)(s,"defaultValue","sparseToDense",u.dtype);i(c,u,n,l);var f={sparseIndices:c,sparseValues:u,defaultValue:l},d={outputShape:n};return r.a.runKernel(a.Ic,f,d)}})},function(e,t,n){"use strict";(function(e){function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return o=i()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&a(i,n.prototype),i},o.apply(null,arguments)}function s(e){var t="function"===typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return o(e,arguments,r(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a(i,e)},s(e)}var c=/%[sdj%]/g,u=function(){};function l(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,a=t[0],i=t.length;if("function"===typeof a)return a.apply(null,t.slice(1));if("string"===typeof a){var o=String(a).replace(c,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(n){return"[Circular]"}break;default:return e}}));return o}return a}function d(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!==typeof e||e))}function p(e,t,n){var r=0,a=e.length;!function i(o){if(o&&o.length)n(o);else{var s=r;r+=1,s<a?t(e[s],i):n([])}}([])}"undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0});var h=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r}(s(Error));function v(e,t,n,r){if(t.first){var a=new Promise((function(t,a){var i=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e);p(i,n,(function(e){return r(e),e.length?a(new h(e,l(e))):t()}))}));return a.catch((function(e){return e})),a}var i=t.firstFields||[];!0===i&&(i=Object.keys(e));var o=Object.keys(e),s=o.length,c=0,u=[],f=new Promise((function(t,a){var f=function(e){if(u.push.apply(u,e),++c===s)return r(u),u.length?a(new h(u,l(u))):t()};o.length||(r(u),t()),o.forEach((function(t){var r=e[t];-1!==i.indexOf(t)?p(r,n,f):function(e,t,n){var r=[],a=0,i=e.length;function o(e){r.push.apply(r,e),++a===i&&n(r)}e.forEach((function(e){t(e,o)}))}(r,n,f)}))}));return f.catch((function(e){return e})),f}function m(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"===typeof t?t():t,field:t.field||e.fullField}}}function b(e,t){if(t)for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];"object"===typeof a&&"object"===typeof e[r]?e[r]=n({},e[r],a):e[r]=a}return e}function g(e,t,n,r,a,i){!e.required||n.hasOwnProperty(e.field)&&!d(t,i||e.type)||r.push(f(a.messages.required,e.fullField))}var y={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},O={integer:function(e){return O.number(e)&&parseInt(e,10)===e},float:function(e){return O.number(e)&&!O.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!O.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&!!e.match(y.email)&&e.length<255},url:function(e){return"string"===typeof e&&!!e.match(y.url)},hex:function(e){return"string"===typeof e&&!!e.match(y.hex)}};var k={required:g,whitespace:function(e,t,n,r,a){(/^\s+$/.test(t)||""===t)&&r.push(f(a.messages.whitespace,e.fullField))},type:function(e,t,n,r,a){if(e.required&&void 0===t)g(e,t,n,r,a);else{var i=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?O[i](t)||r.push(f(a.messages.types[i],e.fullField,e.type)):i&&typeof t!==e.type&&r.push(f(a.messages.types[i],e.fullField,e.type))}},range:function(e,t,n,r,a){var i="number"===typeof e.len,o="number"===typeof e.min,s="number"===typeof e.max,c=t,u=null,l="number"===typeof t,d="string"===typeof t,p=Array.isArray(t);if(l?u="number":d?u="string":p&&(u="array"),!u)return!1;p&&(c=t.length),d&&(c=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?c!==e.len&&r.push(f(a.messages[u].len,e.fullField,e.len)):o&&!s&&c<e.min?r.push(f(a.messages[u].min,e.fullField,e.min)):s&&!o&&c>e.max?r.push(f(a.messages[u].max,e.fullField,e.max)):o&&s&&(c<e.min||c>e.max)&&r.push(f(a.messages[u].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,a){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&r.push(f(a.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,t,n,r,a){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(f(a.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(f(a.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};function w(e,t,n,r,a){var i=e.type,o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t,i)&&!e.required)return n();k.required(e,t,r,o,a,i),d(t,i)||k.type(e,t,r,o,a)}n(o)}var x={string:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t,"string")&&!e.required)return n();k.required(e,t,r,i,a,"string"),d(t,"string")||(k.type(e,t,r,i,a),k.range(e,t,r,i,a),k.pattern(e,t,r,i,a),!0===e.whitespace&&k.whitespace(e,t,r,i,a))}n(i)},method:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();k.required(e,t,r,i,a),void 0!==t&&k.type(e,t,r,i,a)}n(i)},number:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),d(t)&&!e.required)return n();k.required(e,t,r,i,a),void 0!==t&&(k.type(e,t,r,i,a),k.range(e,t,r,i,a))}n(i)},boolean:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();k.required(e,t,r,i,a),void 0!==t&&k.type(e,t,r,i,a)}n(i)},regexp:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();k.required(e,t,r,i,a),d(t)||k.type(e,t,r,i,a)}n(i)},integer:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();k.required(e,t,r,i,a),void 0!==t&&(k.type(e,t,r,i,a),k.range(e,t,r,i,a))}n(i)},float:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();k.required(e,t,r,i,a),void 0!==t&&(k.type(e,t,r,i,a),k.range(e,t,r,i,a))}n(i)},array:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((void 0===t||null===t)&&!e.required)return n();k.required(e,t,r,i,a,"array"),void 0!==t&&null!==t&&(k.type(e,t,r,i,a),k.range(e,t,r,i,a))}n(i)},object:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();k.required(e,t,r,i,a),void 0!==t&&k.type(e,t,r,i,a)}n(i)},enum:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();k.required(e,t,r,i,a),void 0!==t&&k.enum(e,t,r,i,a)}n(i)},pattern:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t,"string")&&!e.required)return n();k.required(e,t,r,i,a),d(t,"string")||k.pattern(e,t,r,i,a)}n(i)},date:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t,"date")&&!e.required)return n();var o;if(k.required(e,t,r,i,a),!d(t,"date"))o=t instanceof Date?t:new Date(t),k.type(e,o,r,i,a),o&&k.range(e,o.getTime(),r,i,a)}n(i)},url:w,hex:w,email:w,required:function(e,t,n,r,a){var i=[],o=Array.isArray(t)?"array":typeof t;k.required(e,t,r,i,a,o),n(i)},any:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();k.required(e,t,r,i,a)}n(i)}};function j(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var S=j();function _(e){this.rules=null,this._messages=S,this.define(e)}_.prototype={messages:function(e){return e&&(this._messages=b(j(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");var t,n;for(t in this.rules={},e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e,t,r){var a=this;void 0===t&&(t={}),void 0===r&&(r=function(){});var i,o,s=e,c=t,u=r;if("function"===typeof c&&(u=c,c={}),!this.rules||0===Object.keys(this.rules).length)return u&&u(),Promise.resolve();if(c.messages){var d=this.messages();d===S&&(d=j()),b(d,c.messages),c.messages=d}else c.messages=this.messages();var p={};(c.keys||Object.keys(this.rules)).forEach((function(t){i=a.rules[t],o=s[t],i.forEach((function(r){var i=r;"function"===typeof i.transform&&(s===e&&(s=n({},s)),o=s[t]=i.transform(o)),(i="function"===typeof i?{validator:i}:n({},i)).validator=a.getValidationMethod(i),i.field=t,i.fullField=i.fullField||t,i.type=a.getType(i),i.validator&&(p[t]=p[t]||[],p[t].push({rule:i,value:o,source:s,field:t}))}))}));var h={};return v(p,c,(function(e,t){var r,a=e.rule,i=("object"===a.type||"array"===a.type)&&("object"===typeof a.fields||"object"===typeof a.defaultField);function o(e,t){return n({},t,{fullField:a.fullField+"."+e})}function s(r){void 0===r&&(r=[]);var s=r;if(Array.isArray(s)||(s=[s]),!c.suppressWarning&&s.length&&_.warning("async-validator:",s),s.length&&void 0!==a.message&&(s=[].concat(a.message)),s=s.map(m(a)),c.first&&s.length)return h[a.field]=1,t(s);if(i){if(a.required&&!e.value)return void 0!==a.message?s=[].concat(a.message).map(m(a)):c.error&&(s=[c.error(a,f(c.messages.required,a.field))]),t(s);var u={};if(a.defaultField)for(var l in e.value)e.value.hasOwnProperty(l)&&(u[l]=a.defaultField);for(var d in u=n({},u,e.rule.fields))if(u.hasOwnProperty(d)){var p=Array.isArray(u[d])?u[d]:[u[d]];u[d]=p.map(o.bind(null,d))}var v=new _(u);v.messages(c.messages),e.rule.options&&(e.rule.options.messages=c.messages,e.rule.options.error=c.error),v.validate(e.value,e.rule.options||c,(function(e){var n=[];s&&s.length&&n.push.apply(n,s),e&&e.length&&n.push.apply(n,e),t(n.length?n:null)}))}else t(s)}i=i&&(a.required||!a.required&&e.value),a.field=e.field,a.asyncValidator?r=a.asyncValidator(a,e.value,s,e.source,c):a.validator&&(!0===(r=a.validator(a,e.value,s,e.source,c))?s():!1===r?s(a.message||a.field+" fails"):r instanceof Array?s(r):r instanceof Error&&s(r.message)),r&&r.then&&r.then((function(){return s()}),(function(e){return s(e)}))}),(function(e){!function(e){var t,n=[],r={};function a(e){var t;Array.isArray(e)?n=(t=n).concat.apply(t,e):n.push(e)}for(t=0;t<e.length;t++)a(e[t]);n.length?r=l(n):(n=null,r=null),u(n,r)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!x.hasOwnProperty(e.type))throw new Error(f("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?x.required:x[this.getType(e)]||!1}},_.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");x[e]=t},_.warning=u,_.messages=S,_.validators=x,t.a=_}).call(this,n(181))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="RC_SELECT_INTERNAL_PROPS_MARK"},function(e,t,n){"use strict";var r=n(17),a=n(16),i=n(38),o=n(26),s=n(1),c=n(23),u=n.n(c),l=n(141),f=n(285),d=n(78),p=n(168),h=n(284),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},m=(Object(d.a)("top","middle","bottom","stretch"),Object(d.a)("start","end","center","space-around","space-between"),s.forwardRef((function(e,t){var n,c=e.prefixCls,d=e.justify,m=e.align,b=e.className,g=e.style,y=e.children,O=e.gutter,k=void 0===O?0:O,w=e.wrap,x=v(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),j=s.useContext(l.b),S=j.getPrefixCls,_=j.direction,C=s.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),E=Object(o.a)(C,2),N=E[0],T=E[1],I=Object(h.a)(),A=s.useRef(k);s.useEffect((function(){var e=p.a.subscribe((function(e){var t=A.current||0;(!Array.isArray(t)&&"object"===Object(i.a)(t)||Array.isArray(t)&&("object"===Object(i.a)(t[0])||"object"===Object(i.a)(t[1])))&&T(e)}));return function(){return p.a.unsubscribe(e)}}),[]);var M=S("row",c),P=function(){var e=[0,0];return(Array.isArray(k)?k:[k,0]).forEach((function(t,n){if("object"===Object(i.a)(t))for(var r=0;r<p.b.length;r++){var a=p.b[r];if(N[a]&&void 0!==t[a]){e[n]=t[a];break}}else e[n]=t||0})),e}(),R=u()(M,(n={},Object(a.a)(n,"".concat(M,"-no-wrap"),!1===w),Object(a.a)(n,"".concat(M,"-").concat(d),d),Object(a.a)(n,"".concat(M,"-").concat(m),m),Object(a.a)(n,"".concat(M,"-rtl"),"rtl"===_),n),b),D={},F=P[0]>0?P[0]/-2:void 0,L=P[1]>0?P[1]/-2:void 0;if(F&&(D.marginLeft=F,D.marginRight=F),I){var z=Object(o.a)(P,2);D.rowGap=z[1]}else L&&(D.marginTop=L,D.marginBottom=L);var q=s.useMemo((function(){return{gutter:P,wrap:w,supportFlexGap:I}}),[P,w,I]);return s.createElement(f.a.Provider,{value:q},s.createElement("div",Object(r.a)({},x,{className:R,style:Object(r.a)(Object(r.a)({},D),g),ref:t}),y))})));m.displayName="Row",t.a=m},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}]},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(3),a=n.n(r),i=n(12),o=n(2),s=n(4),c=n(5),u=n(6),l=n(0),f=n(83),d=n(407),p=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"decodeUTF8",value:function(){return new h(this)}}]),n}(f.a),h=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this)).upstream=e,r.impl=new v(e),r}return Object(s.a)(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(d.a),v=function(t){Object(c.a)(f,t);var r=Object(u.a)(f);function f(e){var t;if(Object(o.a)(this,f),(t=r.call(this)).upstream=e,Object(l.Me)().get("IS_BROWSER"))t.decoder=new TextDecoder("utf-8");else{var a=n(546).StringDecoder;t.decoder=new a("utf8")}return t}return Object(s.a)(f,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Utf8")}},{key:"pump",value:function(){var t=Object(i.a)(a.a.mark((function t(){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.upstream.next();case 2:if(!(n=t.sent).done){t.next=7;break}return t.abrupt("return",!1);case 7:r=n.value;case 8:return i=Object(l.Me)().get("IS_BROWSER")?this.decoder.decode(r,{stream:!0}):this.decoder.write(e.from(r.buffer)),this.outputQueue.push(i),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),f}(f.b)}).call(this,n(235).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(25),a=n(3),i=n.n(a),o=n(12),s=n(2),c=n(4),u=n(5),l=n(6),f=n(83),d=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"split",value:function(e){return new p(this,e)}}]),n}(f.a),p=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var a;return Object(s.a)(this,n),(a=t.call(this)).upstream=e,a.impl=new h(e,r),a}return Object(c.a)(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(d),h=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var a;return Object(s.a)(this,n),(a=t.call(this)).upstream=e,a.separator=r,a.carryover="",a}return Object(c.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}},{key:"pump",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=9;break}if(""!==this.carryover){e.next=6;break}return e.abrupt("return",!1);case 6:return this.outputQueue.push(this.carryover),this.carryover="",e.abrupt("return",!0);case 9:(n=t.value.split(this.separator))[0]=this.carryover+n[0],a=Object(r.a)(n.slice(0,-1));try{for(a.s();!(o=a.n()).done;)s=o.value,this.outputQueue.push(s)}catch(i){a.e(i)}finally{a.f()}return this.carryover=n[n.length-1],e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(f.b)},function(e,t,n){var r=n(548),a=n(549),i=n(550),o=n(551),s=n(552),c=n(553),u=n(554);u.alea=r,u.xor128=a,u.xorwow=i,u.xorshift7=o,u.xor4096=s,u.tychei=c,e.exports=u},function(e){e.exports=JSON.parse('{"chromatic":["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],"lydian":["1P 2M 3M 4A 5P 6M 7M"],"major":["1P 2M 3M 4P 5P 6M 7M",["ionian"]],"mixolydian":["1P 2M 3M 4P 5P 6M 7m",["dominant"]],"dorian":["1P 2M 3m 4P 5P 6M 7m"],"aeolian":["1P 2M 3m 4P 5P 6m 7m",["minor"]],"phrygian":["1P 2m 3m 4P 5P 6m 7m"],"locrian":["1P 2m 3m 4P 5d 6m 7m"],"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m",["half-diminished"]],"altered":["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"phrygian dominant":["1P 2m 3M 4P 5P 6m 7m",["spanish","phrygian major"]],"half-whole diminished":["1P 2m 3m 3M 4A 5P 6M 7m",["dominant diminished"]],"diminished":["1P 2M 3m 4P 5d 6m 6M 7M",["whole-half diminished"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],"iwato":["1P 2m 4P 5d 7m"],"hirajoshi":["1P 2M 3m 5P 6m"],"kumoijoshi":["1P 2m 4P 5P 6m"],"pelog":["1P 2m 3m 5P 6m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],"prometheus":["1P 2M 3M 4A 6M 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],"ritusen":["1P 2M 4P 5P 6M"],"scriabin":["1P 2m 3M 5P 6M"],"piongio":["1P 2M 4P 5P 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],"augmented":["1P 2A 3M 5P 5A 7M"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],"neopolitan":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],"egyptian":["1P 2M 4P 5P 7m"],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],"oriental":["1P 2m 3M 4P 5d 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],"flamenco":["1P 2m 3m 3M 4A 5P 7m"],"balinese":["1P 2m 3m 4P 5P 6m 7M"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],"persian":["1P 2m 3M 4P 5d 6m 7M"],"bebop":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],"enigmatic":["1P 2m 3M 5d 6m 7m 7M"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],"ichikosucho":["1P 2M 3M 4P 5d 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]}')},function(e){e.exports=JSON.parse('{"4":["1P 4P 7m 10m",["quartal"]],"5":["1P 5P"],"7":["1P 3M 5P 7m",["Dominant","Dom"]],"9":["1P 3M 5P 7m 9M",["79"]],"11":["1P 5P 7m 9M 11P"],"13":["1P 3M 5P 7m 9M 13M",["13_"]],"64":["5P 8P 10M"],"M":["1P 3M 5P",["Major",""]],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],"M13":["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],"M6":["1P 3M 5P 13M",["6"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],"M69":["1P 3M 5P 6M 9M",["69"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],"M7add13":["1P 3M 5P 6M 7M 9M"],"M7b5":["1P 3M 5d 7M"],"M7b6":["1P 3M 6m 7M"],"M7b9":["1P 3M 5P 7M 9m"],"M7sus4":["1P 4P 5P 7M"],"M9":["1P 3M 5P 7M 9M",["maj9","Maj9"]],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],"M9b5":["1P 3M 5d 7M 9M"],"M9sus4":["1P 4P 5P 7M 9M"],"Madd9":["1P 3M 5P 9M",["2","add9","add2"]],"Maj7":["1P 3M 5P 7M",["maj7","M7"]],"Mb5":["1P 3M 5d"],"Mb6":["1P 3M 13m"],"Msus2":["1P 2M 5P",["add9no3","sus2"]],"Msus4":["1P 4P 5P",["sus","sus4"]],"Maddb9":["1P 3M 5P 9m"],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],"m":["1P 3m 5P"],"m#5":["1P 3m 5A",["m+","mb6"]],"m11":["1P 3m 5P 7m 9M 11P",["_11"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],"m11b5":["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],"m13":["1P 3m 5P 7m 9M 11P 13M",["_13"]],"m6":["1P 3m 4P 5P 13M",["_6"]],"m69":["1P 3m 5P 6M 9M",["_69"]],"m7":["1P 3m 5P 7m",["minor7","_","_7"]],"m7#5":["1P 3m 6m 7m"],"m7add11":["1P 3m 5P 7m 11P",["m7add4"]],"m7b5":["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],"m9":["1P 3m 5P 7m 9M",["_9"]],"m9#5":["1P 3m 6m 7m 9M"],"m9b5":["1P 3m 7m 12d 2M",["h9","-9b5"]],"mMaj7":["1P 3m 5P 7M",["mM7","_M7"]],"mMaj7b6":["1P 3m 5P 6m 7M",["mM7b6"]],"mM9":["1P 3m 5P 7M 9M",["mMaj9","-M9"]],"mM9b6":["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],"mb6M7":["1P 3m 6m 7M"],"mb6b9":["1P 3m 6m 9m"],"o":["1P 3m 5d",["mb5","dim"]],"o7":["1P 3m 5d 13M",["diminished","m6b5","dim7"]],"o7M7":["1P 3m 5d 6M 7M"],"oM7":["1P 3m 5d 7M"],"sus24":["1P 2M 4P 5P",["sus4add9"]],"+add#9":["1P 3M 5A 9A"],"madd4":["1P 3m 4P 5P"],"madd9":["1P 3m 5P 9M"]}')},function(e,t,n){"use strict";var r=n(556),a=r.Reader,i=r.Writer,o=r.util,s=r.roots.default||(r.roots.default={});s.tensorflow=function(){var e={};return e.magenta=function(){var e={};return e.NoteSequence=function(){function e(e){if(this.timeSignatures=[],this.keySignatures=[],this.tempos=[],this.notes=[],this.pitchBends=[],this.controlChanges=[],this.partInfos=[],this.textAnnotations=[],this.sectionAnnotations=[],this.sectionGroups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.id="",e.prototype.filename="",e.prototype.referenceNumber=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.collectionName="",e.prototype.ticksPerQuarter=0,e.prototype.timeSignatures=o.emptyArray,e.prototype.keySignatures=o.emptyArray,e.prototype.tempos=o.emptyArray,e.prototype.notes=o.emptyArray,e.prototype.totalTime=0,e.prototype.totalQuantizedSteps=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.pitchBends=o.emptyArray,e.prototype.controlChanges=o.emptyArray,e.prototype.partInfos=o.emptyArray,e.prototype.sourceInfo=null,e.prototype.textAnnotations=o.emptyArray,e.prototype.sectionAnnotations=o.emptyArray,e.prototype.sectionGroups=o.emptyArray,e.prototype.quantizationInfo=null,e.prototype.subsequenceInfo=null,e.prototype.sequenceMetadata=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.id&&e.hasOwnProperty("id")&&t.uint32(10).string(e.id),null!=e.filename&&e.hasOwnProperty("filename")&&t.uint32(18).string(e.filename),null!=e.collectionName&&e.hasOwnProperty("collectionName")&&t.uint32(26).string(e.collectionName),null!=e.ticksPerQuarter&&e.hasOwnProperty("ticksPerQuarter")&&t.uint32(32).int32(e.ticksPerQuarter),null!=e.timeSignatures&&e.timeSignatures.length)for(var n=0;n<e.timeSignatures.length;++n)s.tensorflow.magenta.NoteSequence.TimeSignature.encode(e.timeSignatures[n],t.uint32(42).fork()).ldelim();if(null!=e.keySignatures&&e.keySignatures.length)for(n=0;n<e.keySignatures.length;++n)s.tensorflow.magenta.NoteSequence.KeySignature.encode(e.keySignatures[n],t.uint32(50).fork()).ldelim();if(null!=e.tempos&&e.tempos.length)for(n=0;n<e.tempos.length;++n)s.tensorflow.magenta.NoteSequence.Tempo.encode(e.tempos[n],t.uint32(58).fork()).ldelim();if(null!=e.notes&&e.notes.length)for(n=0;n<e.notes.length;++n)s.tensorflow.magenta.NoteSequence.Note.encode(e.notes[n],t.uint32(66).fork()).ldelim();if(null!=e.totalTime&&e.hasOwnProperty("totalTime")&&t.uint32(73).double(e.totalTime),null!=e.pitchBends&&e.pitchBends.length)for(n=0;n<e.pitchBends.length;++n)s.tensorflow.magenta.NoteSequence.PitchBend.encode(e.pitchBends[n],t.uint32(82).fork()).ldelim();if(null!=e.controlChanges&&e.controlChanges.length)for(n=0;n<e.controlChanges.length;++n)s.tensorflow.magenta.NoteSequence.ControlChange.encode(e.controlChanges[n],t.uint32(90).fork()).ldelim();if(null!=e.partInfos&&e.partInfos.length)for(n=0;n<e.partInfos.length;++n)s.tensorflow.magenta.NoteSequence.PartInfo.encode(e.partInfos[n],t.uint32(98).fork()).ldelim();if(null!=e.sourceInfo&&e.hasOwnProperty("sourceInfo")&&s.tensorflow.magenta.NoteSequence.SourceInfo.encode(e.sourceInfo,t.uint32(106).fork()).ldelim(),null!=e.textAnnotations&&e.textAnnotations.length)for(n=0;n<e.textAnnotations.length;++n)s.tensorflow.magenta.NoteSequence.TextAnnotation.encode(e.textAnnotations[n],t.uint32(114).fork()).ldelim();if(null!=e.quantizationInfo&&e.hasOwnProperty("quantizationInfo")&&s.tensorflow.magenta.NoteSequence.QuantizationInfo.encode(e.quantizationInfo,t.uint32(122).fork()).ldelim(),null!=e.totalQuantizedSteps&&e.hasOwnProperty("totalQuantizedSteps")&&t.uint32(128).int64(e.totalQuantizedSteps),null!=e.subsequenceInfo&&e.hasOwnProperty("subsequenceInfo")&&s.tensorflow.magenta.NoteSequence.SubsequenceInfo.encode(e.subsequenceInfo,t.uint32(138).fork()).ldelim(),null!=e.referenceNumber&&e.hasOwnProperty("referenceNumber")&&t.uint32(144).int64(e.referenceNumber),null!=e.sequenceMetadata&&e.hasOwnProperty("sequenceMetadata")&&s.tensorflow.magenta.SequenceMetadata.encode(e.sequenceMetadata,t.uint32(154).fork()).ldelim(),null!=e.sectionAnnotations&&e.sectionAnnotations.length)for(n=0;n<e.sectionAnnotations.length;++n)s.tensorflow.magenta.NoteSequence.SectionAnnotation.encode(e.sectionAnnotations[n],t.uint32(162).fork()).ldelim();if(null!=e.sectionGroups&&e.sectionGroups.length)for(n=0;n<e.sectionGroups.length;++n)s.tensorflow.magenta.NoteSequence.SectionGroup.encode(e.sectionGroups[n],t.uint32(170).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.id=e.string();break;case 2:r.filename=e.string();break;case 18:r.referenceNumber=o.Long?e.int64().toNumber():e.int64();break;case 3:r.collectionName=e.string();break;case 4:r.ticksPerQuarter=e.int32();break;case 5:r.timeSignatures&&r.timeSignatures.length||(r.timeSignatures=[]),r.timeSignatures.push(s.tensorflow.magenta.NoteSequence.TimeSignature.decode(e,e.uint32()));break;case 6:r.keySignatures&&r.keySignatures.length||(r.keySignatures=[]),r.keySignatures.push(s.tensorflow.magenta.NoteSequence.KeySignature.decode(e,e.uint32()));break;case 7:r.tempos&&r.tempos.length||(r.tempos=[]),r.tempos.push(s.tensorflow.magenta.NoteSequence.Tempo.decode(e,e.uint32()));break;case 8:r.notes&&r.notes.length||(r.notes=[]),r.notes.push(s.tensorflow.magenta.NoteSequence.Note.decode(e,e.uint32()));break;case 9:r.totalTime=e.double();break;case 16:r.totalQuantizedSteps=o.Long?e.int64().toNumber():e.int64();break;case 10:r.pitchBends&&r.pitchBends.length||(r.pitchBends=[]),r.pitchBends.push(s.tensorflow.magenta.NoteSequence.PitchBend.decode(e,e.uint32()));break;case 11:r.controlChanges&&r.controlChanges.length||(r.controlChanges=[]),r.controlChanges.push(s.tensorflow.magenta.NoteSequence.ControlChange.decode(e,e.uint32()));break;case 12:r.partInfos&&r.partInfos.length||(r.partInfos=[]),r.partInfos.push(s.tensorflow.magenta.NoteSequence.PartInfo.decode(e,e.uint32()));break;case 13:r.sourceInfo=s.tensorflow.magenta.NoteSequence.SourceInfo.decode(e,e.uint32());break;case 14:r.textAnnotations&&r.textAnnotations.length||(r.textAnnotations=[]),r.textAnnotations.push(s.tensorflow.magenta.NoteSequence.TextAnnotation.decode(e,e.uint32()));break;case 20:r.sectionAnnotations&&r.sectionAnnotations.length||(r.sectionAnnotations=[]),r.sectionAnnotations.push(s.tensorflow.magenta.NoteSequence.SectionAnnotation.decode(e,e.uint32()));break;case 21:r.sectionGroups&&r.sectionGroups.length||(r.sectionGroups=[]),r.sectionGroups.push(s.tensorflow.magenta.NoteSequence.SectionGroup.decode(e,e.uint32()));break;case 15:r.quantizationInfo=s.tensorflow.magenta.NoteSequence.QuantizationInfo.decode(e,e.uint32());break;case 17:r.subsequenceInfo=s.tensorflow.magenta.NoteSequence.SubsequenceInfo.decode(e,e.uint32());break;case 19:r.sequenceMetadata=s.tensorflow.magenta.SequenceMetadata.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.id&&e.hasOwnProperty("id")&&!o.isString(e.id))return"id: string expected";if(null!=e.filename&&e.hasOwnProperty("filename")&&!o.isString(e.filename))return"filename: string expected";if(null!=e.referenceNumber&&e.hasOwnProperty("referenceNumber")&&!o.isInteger(e.referenceNumber)&&!(e.referenceNumber&&o.isInteger(e.referenceNumber.low)&&o.isInteger(e.referenceNumber.high)))return"referenceNumber: integer|Long expected";if(null!=e.collectionName&&e.hasOwnProperty("collectionName")&&!o.isString(e.collectionName))return"collectionName: string expected";if(null!=e.ticksPerQuarter&&e.hasOwnProperty("ticksPerQuarter")&&!o.isInteger(e.ticksPerQuarter))return"ticksPerQuarter: integer expected";if(null!=e.timeSignatures&&e.hasOwnProperty("timeSignatures")){if(!Array.isArray(e.timeSignatures))return"timeSignatures: array expected";for(var t=0;t<e.timeSignatures.length;++t){if(n=s.tensorflow.magenta.NoteSequence.TimeSignature.verify(e.timeSignatures[t]))return"timeSignatures."+n}}if(null!=e.keySignatures&&e.hasOwnProperty("keySignatures")){if(!Array.isArray(e.keySignatures))return"keySignatures: array expected";for(t=0;t<e.keySignatures.length;++t){if(n=s.tensorflow.magenta.NoteSequence.KeySignature.verify(e.keySignatures[t]))return"keySignatures."+n}}if(null!=e.tempos&&e.hasOwnProperty("tempos")){if(!Array.isArray(e.tempos))return"tempos: array expected";for(t=0;t<e.tempos.length;++t){if(n=s.tensorflow.magenta.NoteSequence.Tempo.verify(e.tempos[t]))return"tempos."+n}}if(null!=e.notes&&e.hasOwnProperty("notes")){if(!Array.isArray(e.notes))return"notes: array expected";for(t=0;t<e.notes.length;++t){if(n=s.tensorflow.magenta.NoteSequence.Note.verify(e.notes[t]))return"notes."+n}}if(null!=e.totalTime&&e.hasOwnProperty("totalTime")&&"number"!==typeof e.totalTime)return"totalTime: number expected";if(null!=e.totalQuantizedSteps&&e.hasOwnProperty("totalQuantizedSteps")&&!o.isInteger(e.totalQuantizedSteps)&&!(e.totalQuantizedSteps&&o.isInteger(e.totalQuantizedSteps.low)&&o.isInteger(e.totalQuantizedSteps.high)))return"totalQuantizedSteps: integer|Long expected";if(null!=e.pitchBends&&e.hasOwnProperty("pitchBends")){if(!Array.isArray(e.pitchBends))return"pitchBends: array expected";for(t=0;t<e.pitchBends.length;++t){if(n=s.tensorflow.magenta.NoteSequence.PitchBend.verify(e.pitchBends[t]))return"pitchBends."+n}}if(null!=e.controlChanges&&e.hasOwnProperty("controlChanges")){if(!Array.isArray(e.controlChanges))return"controlChanges: array expected";for(t=0;t<e.controlChanges.length;++t){if(n=s.tensorflow.magenta.NoteSequence.ControlChange.verify(e.controlChanges[t]))return"controlChanges."+n}}if(null!=e.partInfos&&e.hasOwnProperty("partInfos")){if(!Array.isArray(e.partInfos))return"partInfos: array expected";for(t=0;t<e.partInfos.length;++t){if(n=s.tensorflow.magenta.NoteSequence.PartInfo.verify(e.partInfos[t]))return"partInfos."+n}}if(null!=e.sourceInfo&&e.hasOwnProperty("sourceInfo")&&(n=s.tensorflow.magenta.NoteSequence.SourceInfo.verify(e.sourceInfo)))return"sourceInfo."+n;if(null!=e.textAnnotations&&e.hasOwnProperty("textAnnotations")){if(!Array.isArray(e.textAnnotations))return"textAnnotations: array expected";for(t=0;t<e.textAnnotations.length;++t){if(n=s.tensorflow.magenta.NoteSequence.TextAnnotation.verify(e.textAnnotations[t]))return"textAnnotations."+n}}if(null!=e.sectionAnnotations&&e.hasOwnProperty("sectionAnnotations")){if(!Array.isArray(e.sectionAnnotations))return"sectionAnnotations: array expected";for(t=0;t<e.sectionAnnotations.length;++t){if(n=s.tensorflow.magenta.NoteSequence.SectionAnnotation.verify(e.sectionAnnotations[t]))return"sectionAnnotations."+n}}if(null!=e.sectionGroups&&e.hasOwnProperty("sectionGroups")){if(!Array.isArray(e.sectionGroups))return"sectionGroups: array expected";for(t=0;t<e.sectionGroups.length;++t){var n;if(n=s.tensorflow.magenta.NoteSequence.SectionGroup.verify(e.sectionGroups[t]))return"sectionGroups."+n}}if(null!=e.quantizationInfo&&e.hasOwnProperty("quantizationInfo")&&(n=s.tensorflow.magenta.NoteSequence.QuantizationInfo.verify(e.quantizationInfo)))return"quantizationInfo."+n;if(null!=e.subsequenceInfo&&e.hasOwnProperty("subsequenceInfo")&&(n=s.tensorflow.magenta.NoteSequence.SubsequenceInfo.verify(e.subsequenceInfo)))return"subsequenceInfo."+n;if(null!=e.sequenceMetadata&&e.hasOwnProperty("sequenceMetadata")&&(n=s.tensorflow.magenta.SequenceMetadata.verify(e.sequenceMetadata)))return"sequenceMetadata."+n;return null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence)return e;var t=new s.tensorflow.magenta.NoteSequence;if(null!=e.id&&(t.id=String(e.id)),null!=e.filename&&(t.filename=String(e.filename)),null!=e.referenceNumber&&(o.Long?(t.referenceNumber=o.Long.fromValue(e.referenceNumber)).unsigned=!1:"string"===typeof e.referenceNumber?t.referenceNumber=parseInt(e.referenceNumber,10):"number"===typeof e.referenceNumber?t.referenceNumber=e.referenceNumber:"object"===typeof e.referenceNumber&&(t.referenceNumber=new o.LongBits(e.referenceNumber.low>>>0,e.referenceNumber.high>>>0).toNumber())),null!=e.collectionName&&(t.collectionName=String(e.collectionName)),null!=e.ticksPerQuarter&&(t.ticksPerQuarter=0|e.ticksPerQuarter),e.timeSignatures){if(!Array.isArray(e.timeSignatures))throw TypeError(".tensorflow.magenta.NoteSequence.timeSignatures: array expected");t.timeSignatures=[];for(var n=0;n<e.timeSignatures.length;++n){if("object"!==typeof e.timeSignatures[n])throw TypeError(".tensorflow.magenta.NoteSequence.timeSignatures: object expected");t.timeSignatures[n]=s.tensorflow.magenta.NoteSequence.TimeSignature.fromObject(e.timeSignatures[n])}}if(e.keySignatures){if(!Array.isArray(e.keySignatures))throw TypeError(".tensorflow.magenta.NoteSequence.keySignatures: array expected");t.keySignatures=[];for(n=0;n<e.keySignatures.length;++n){if("object"!==typeof e.keySignatures[n])throw TypeError(".tensorflow.magenta.NoteSequence.keySignatures: object expected");t.keySignatures[n]=s.tensorflow.magenta.NoteSequence.KeySignature.fromObject(e.keySignatures[n])}}if(e.tempos){if(!Array.isArray(e.tempos))throw TypeError(".tensorflow.magenta.NoteSequence.tempos: array expected");t.tempos=[];for(n=0;n<e.tempos.length;++n){if("object"!==typeof e.tempos[n])throw TypeError(".tensorflow.magenta.NoteSequence.tempos: object expected");t.tempos[n]=s.tensorflow.magenta.NoteSequence.Tempo.fromObject(e.tempos[n])}}if(e.notes){if(!Array.isArray(e.notes))throw TypeError(".tensorflow.magenta.NoteSequence.notes: array expected");t.notes=[];for(n=0;n<e.notes.length;++n){if("object"!==typeof e.notes[n])throw TypeError(".tensorflow.magenta.NoteSequence.notes: object expected");t.notes[n]=s.tensorflow.magenta.NoteSequence.Note.fromObject(e.notes[n])}}if(null!=e.totalTime&&(t.totalTime=Number(e.totalTime)),null!=e.totalQuantizedSteps&&(o.Long?(t.totalQuantizedSteps=o.Long.fromValue(e.totalQuantizedSteps)).unsigned=!1:"string"===typeof e.totalQuantizedSteps?t.totalQuantizedSteps=parseInt(e.totalQuantizedSteps,10):"number"===typeof e.totalQuantizedSteps?t.totalQuantizedSteps=e.totalQuantizedSteps:"object"===typeof e.totalQuantizedSteps&&(t.totalQuantizedSteps=new o.LongBits(e.totalQuantizedSteps.low>>>0,e.totalQuantizedSteps.high>>>0).toNumber())),e.pitchBends){if(!Array.isArray(e.pitchBends))throw TypeError(".tensorflow.magenta.NoteSequence.pitchBends: array expected");t.pitchBends=[];for(n=0;n<e.pitchBends.length;++n){if("object"!==typeof e.pitchBends[n])throw TypeError(".tensorflow.magenta.NoteSequence.pitchBends: object expected");t.pitchBends[n]=s.tensorflow.magenta.NoteSequence.PitchBend.fromObject(e.pitchBends[n])}}if(e.controlChanges){if(!Array.isArray(e.controlChanges))throw TypeError(".tensorflow.magenta.NoteSequence.controlChanges: array expected");t.controlChanges=[];for(n=0;n<e.controlChanges.length;++n){if("object"!==typeof e.controlChanges[n])throw TypeError(".tensorflow.magenta.NoteSequence.controlChanges: object expected");t.controlChanges[n]=s.tensorflow.magenta.NoteSequence.ControlChange.fromObject(e.controlChanges[n])}}if(e.partInfos){if(!Array.isArray(e.partInfos))throw TypeError(".tensorflow.magenta.NoteSequence.partInfos: array expected");t.partInfos=[];for(n=0;n<e.partInfos.length;++n){if("object"!==typeof e.partInfos[n])throw TypeError(".tensorflow.magenta.NoteSequence.partInfos: object expected");t.partInfos[n]=s.tensorflow.magenta.NoteSequence.PartInfo.fromObject(e.partInfos[n])}}if(null!=e.sourceInfo){if("object"!==typeof e.sourceInfo)throw TypeError(".tensorflow.magenta.NoteSequence.sourceInfo: object expected");t.sourceInfo=s.tensorflow.magenta.NoteSequence.SourceInfo.fromObject(e.sourceInfo)}if(e.textAnnotations){if(!Array.isArray(e.textAnnotations))throw TypeError(".tensorflow.magenta.NoteSequence.textAnnotations: array expected");t.textAnnotations=[];for(n=0;n<e.textAnnotations.length;++n){if("object"!==typeof e.textAnnotations[n])throw TypeError(".tensorflow.magenta.NoteSequence.textAnnotations: object expected");t.textAnnotations[n]=s.tensorflow.magenta.NoteSequence.TextAnnotation.fromObject(e.textAnnotations[n])}}if(e.sectionAnnotations){if(!Array.isArray(e.sectionAnnotations))throw TypeError(".tensorflow.magenta.NoteSequence.sectionAnnotations: array expected");t.sectionAnnotations=[];for(n=0;n<e.sectionAnnotations.length;++n){if("object"!==typeof e.sectionAnnotations[n])throw TypeError(".tensorflow.magenta.NoteSequence.sectionAnnotations: object expected");t.sectionAnnotations[n]=s.tensorflow.magenta.NoteSequence.SectionAnnotation.fromObject(e.sectionAnnotations[n])}}if(e.sectionGroups){if(!Array.isArray(e.sectionGroups))throw TypeError(".tensorflow.magenta.NoteSequence.sectionGroups: array expected");t.sectionGroups=[];for(n=0;n<e.sectionGroups.length;++n){if("object"!==typeof e.sectionGroups[n])throw TypeError(".tensorflow.magenta.NoteSequence.sectionGroups: object expected");t.sectionGroups[n]=s.tensorflow.magenta.NoteSequence.SectionGroup.fromObject(e.sectionGroups[n])}}if(null!=e.quantizationInfo){if("object"!==typeof e.quantizationInfo)throw TypeError(".tensorflow.magenta.NoteSequence.quantizationInfo: object expected");t.quantizationInfo=s.tensorflow.magenta.NoteSequence.QuantizationInfo.fromObject(e.quantizationInfo)}if(null!=e.subsequenceInfo){if("object"!==typeof e.subsequenceInfo)throw TypeError(".tensorflow.magenta.NoteSequence.subsequenceInfo: object expected");t.subsequenceInfo=s.tensorflow.magenta.NoteSequence.SubsequenceInfo.fromObject(e.subsequenceInfo)}if(null!=e.sequenceMetadata){if("object"!==typeof e.sequenceMetadata)throw TypeError(".tensorflow.magenta.NoteSequence.sequenceMetadata: object expected");t.sequenceMetadata=s.tensorflow.magenta.SequenceMetadata.fromObject(e.sequenceMetadata)}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.timeSignatures=[],n.keySignatures=[],n.tempos=[],n.notes=[],n.pitchBends=[],n.controlChanges=[],n.partInfos=[],n.textAnnotations=[],n.sectionAnnotations=[],n.sectionGroups=[]),t.defaults){if(n.id="",n.filename="",n.collectionName="",n.ticksPerQuarter=0,n.totalTime=0,n.sourceInfo=null,n.quantizationInfo=null,o.Long){var r=new o.Long(0,0,!1);n.totalQuantizedSteps=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.totalQuantizedSteps=t.longs===String?"0":0;if(n.subsequenceInfo=null,o.Long){r=new o.Long(0,0,!1);n.referenceNumber=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.referenceNumber=t.longs===String?"0":0;n.sequenceMetadata=null}if(null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),null!=e.filename&&e.hasOwnProperty("filename")&&(n.filename=e.filename),null!=e.collectionName&&e.hasOwnProperty("collectionName")&&(n.collectionName=e.collectionName),null!=e.ticksPerQuarter&&e.hasOwnProperty("ticksPerQuarter")&&(n.ticksPerQuarter=e.ticksPerQuarter),e.timeSignatures&&e.timeSignatures.length){n.timeSignatures=[];for(var a=0;a<e.timeSignatures.length;++a)n.timeSignatures[a]=s.tensorflow.magenta.NoteSequence.TimeSignature.toObject(e.timeSignatures[a],t)}if(e.keySignatures&&e.keySignatures.length){n.keySignatures=[];for(a=0;a<e.keySignatures.length;++a)n.keySignatures[a]=s.tensorflow.magenta.NoteSequence.KeySignature.toObject(e.keySignatures[a],t)}if(e.tempos&&e.tempos.length){n.tempos=[];for(a=0;a<e.tempos.length;++a)n.tempos[a]=s.tensorflow.magenta.NoteSequence.Tempo.toObject(e.tempos[a],t)}if(e.notes&&e.notes.length){n.notes=[];for(a=0;a<e.notes.length;++a)n.notes[a]=s.tensorflow.magenta.NoteSequence.Note.toObject(e.notes[a],t)}if(null!=e.totalTime&&e.hasOwnProperty("totalTime")&&(n.totalTime=t.json&&!isFinite(e.totalTime)?String(e.totalTime):e.totalTime),e.pitchBends&&e.pitchBends.length){n.pitchBends=[];for(a=0;a<e.pitchBends.length;++a)n.pitchBends[a]=s.tensorflow.magenta.NoteSequence.PitchBend.toObject(e.pitchBends[a],t)}if(e.controlChanges&&e.controlChanges.length){n.controlChanges=[];for(a=0;a<e.controlChanges.length;++a)n.controlChanges[a]=s.tensorflow.magenta.NoteSequence.ControlChange.toObject(e.controlChanges[a],t)}if(e.partInfos&&e.partInfos.length){n.partInfos=[];for(a=0;a<e.partInfos.length;++a)n.partInfos[a]=s.tensorflow.magenta.NoteSequence.PartInfo.toObject(e.partInfos[a],t)}if(null!=e.sourceInfo&&e.hasOwnProperty("sourceInfo")&&(n.sourceInfo=s.tensorflow.magenta.NoteSequence.SourceInfo.toObject(e.sourceInfo,t)),e.textAnnotations&&e.textAnnotations.length){n.textAnnotations=[];for(a=0;a<e.textAnnotations.length;++a)n.textAnnotations[a]=s.tensorflow.magenta.NoteSequence.TextAnnotation.toObject(e.textAnnotations[a],t)}if(null!=e.quantizationInfo&&e.hasOwnProperty("quantizationInfo")&&(n.quantizationInfo=s.tensorflow.magenta.NoteSequence.QuantizationInfo.toObject(e.quantizationInfo,t)),null!=e.totalQuantizedSteps&&e.hasOwnProperty("totalQuantizedSteps")&&("number"===typeof e.totalQuantizedSteps?n.totalQuantizedSteps=t.longs===String?String(e.totalQuantizedSteps):e.totalQuantizedSteps:n.totalQuantizedSteps=t.longs===String?o.Long.prototype.toString.call(e.totalQuantizedSteps):t.longs===Number?new o.LongBits(e.totalQuantizedSteps.low>>>0,e.totalQuantizedSteps.high>>>0).toNumber():e.totalQuantizedSteps),null!=e.subsequenceInfo&&e.hasOwnProperty("subsequenceInfo")&&(n.subsequenceInfo=s.tensorflow.magenta.NoteSequence.SubsequenceInfo.toObject(e.subsequenceInfo,t)),null!=e.referenceNumber&&e.hasOwnProperty("referenceNumber")&&("number"===typeof e.referenceNumber?n.referenceNumber=t.longs===String?String(e.referenceNumber):e.referenceNumber:n.referenceNumber=t.longs===String?o.Long.prototype.toString.call(e.referenceNumber):t.longs===Number?new o.LongBits(e.referenceNumber.low>>>0,e.referenceNumber.high>>>0).toNumber():e.referenceNumber),null!=e.sequenceMetadata&&e.hasOwnProperty("sequenceMetadata")&&(n.sequenceMetadata=s.tensorflow.magenta.SequenceMetadata.toObject(e.sequenceMetadata,t)),e.sectionAnnotations&&e.sectionAnnotations.length){n.sectionAnnotations=[];for(a=0;a<e.sectionAnnotations.length;++a)n.sectionAnnotations[a]=s.tensorflow.magenta.NoteSequence.SectionAnnotation.toObject(e.sectionAnnotations[a],t)}if(e.sectionGroups&&e.sectionGroups.length){n.sectionGroups=[];for(a=0;a<e.sectionGroups.length;++a)n.sectionGroups[a]=s.tensorflow.magenta.NoteSequence.SectionGroup.toObject(e.sectionGroups[a],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.Note=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.pitch=0,e.prototype.pitchName=0,e.prototype.velocity=0,e.prototype.startTime=0,e.prototype.quantizedStartStep=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.endTime=0,e.prototype.quantizedEndStep=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.numerator=0,e.prototype.denominator=0,e.prototype.instrument=0,e.prototype.program=0,e.prototype.isDrum=!1,e.prototype.part=0,e.prototype.voice=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.pitch&&e.hasOwnProperty("pitch")&&t.uint32(8).int32(e.pitch),null!=e.velocity&&e.hasOwnProperty("velocity")&&t.uint32(16).int32(e.velocity),null!=e.startTime&&e.hasOwnProperty("startTime")&&t.uint32(25).double(e.startTime),null!=e.endTime&&e.hasOwnProperty("endTime")&&t.uint32(33).double(e.endTime),null!=e.numerator&&e.hasOwnProperty("numerator")&&t.uint32(40).int32(e.numerator),null!=e.denominator&&e.hasOwnProperty("denominator")&&t.uint32(48).int32(e.denominator),null!=e.instrument&&e.hasOwnProperty("instrument")&&t.uint32(56).int32(e.instrument),null!=e.program&&e.hasOwnProperty("program")&&t.uint32(64).int32(e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&t.uint32(72).bool(e.isDrum),null!=e.part&&e.hasOwnProperty("part")&&t.uint32(80).int32(e.part),null!=e.pitchName&&e.hasOwnProperty("pitchName")&&t.uint32(88).int32(e.pitchName),null!=e.voice&&e.hasOwnProperty("voice")&&t.uint32(96).int32(e.voice),null!=e.quantizedStartStep&&e.hasOwnProperty("quantizedStartStep")&&t.uint32(104).int64(e.quantizedStartStep),null!=e.quantizedEndStep&&e.hasOwnProperty("quantizedEndStep")&&t.uint32(112).int64(e.quantizedEndStep),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.Note;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.pitch=e.int32();break;case 11:r.pitchName=e.int32();break;case 2:r.velocity=e.int32();break;case 3:r.startTime=e.double();break;case 13:r.quantizedStartStep=o.Long?e.int64().toNumber():e.int64();break;case 4:r.endTime=e.double();break;case 14:r.quantizedEndStep=o.Long?e.int64().toNumber():e.int64();break;case 5:r.numerator=e.int32();break;case 6:r.denominator=e.int32();break;case 7:r.instrument=e.int32();break;case 8:r.program=e.int32();break;case 9:r.isDrum=e.bool();break;case 10:r.part=e.int32();break;case 12:r.voice=e.int32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.pitch&&e.hasOwnProperty("pitch")&&!o.isInteger(e.pitch))return"pitch: integer expected";if(null!=e.pitchName&&e.hasOwnProperty("pitchName"))switch(e.pitchName){default:return"pitchName: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:}return null!=e.velocity&&e.hasOwnProperty("velocity")&&!o.isInteger(e.velocity)?"velocity: integer expected":null!=e.startTime&&e.hasOwnProperty("startTime")&&"number"!==typeof e.startTime?"startTime: number expected":null==e.quantizedStartStep||!e.hasOwnProperty("quantizedStartStep")||o.isInteger(e.quantizedStartStep)||e.quantizedStartStep&&o.isInteger(e.quantizedStartStep.low)&&o.isInteger(e.quantizedStartStep.high)?null!=e.endTime&&e.hasOwnProperty("endTime")&&"number"!==typeof e.endTime?"endTime: number expected":null==e.quantizedEndStep||!e.hasOwnProperty("quantizedEndStep")||o.isInteger(e.quantizedEndStep)||e.quantizedEndStep&&o.isInteger(e.quantizedEndStep.low)&&o.isInteger(e.quantizedEndStep.high)?null!=e.numerator&&e.hasOwnProperty("numerator")&&!o.isInteger(e.numerator)?"numerator: integer expected":null!=e.denominator&&e.hasOwnProperty("denominator")&&!o.isInteger(e.denominator)?"denominator: integer expected":null!=e.instrument&&e.hasOwnProperty("instrument")&&!o.isInteger(e.instrument)?"instrument: integer expected":null!=e.program&&e.hasOwnProperty("program")&&!o.isInteger(e.program)?"program: integer expected":null!=e.isDrum&&e.hasOwnProperty("isDrum")&&"boolean"!==typeof e.isDrum?"isDrum: boolean expected":null!=e.part&&e.hasOwnProperty("part")&&!o.isInteger(e.part)?"part: integer expected":null!=e.voice&&e.hasOwnProperty("voice")&&!o.isInteger(e.voice)?"voice: integer expected":null:"quantizedEndStep: integer|Long expected":"quantizedStartStep: integer|Long expected"},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.Note)return e;var t=new s.tensorflow.magenta.NoteSequence.Note;switch(null!=e.pitch&&(t.pitch=0|e.pitch),e.pitchName){case"UNKNOWN_PITCH_NAME":case 0:t.pitchName=0;break;case"F_FLAT_FLAT":case 1:t.pitchName=1;break;case"C_FLAT_FLAT":case 2:t.pitchName=2;break;case"G_FLAT_FLAT":case 3:t.pitchName=3;break;case"D_FLAT_FLAT":case 4:t.pitchName=4;break;case"A_FLAT_FLAT":case 5:t.pitchName=5;break;case"E_FLAT_FLAT":case 6:t.pitchName=6;break;case"B_FLAT_FLAT":case 7:t.pitchName=7;break;case"F_FLAT":case 8:t.pitchName=8;break;case"C_FLAT":case 9:t.pitchName=9;break;case"G_FLAT":case 10:t.pitchName=10;break;case"D_FLAT":case 11:t.pitchName=11;break;case"A_FLAT":case 12:t.pitchName=12;break;case"E_FLAT":case 13:t.pitchName=13;break;case"B_FLAT":case 14:t.pitchName=14;break;case"F":case 15:t.pitchName=15;break;case"C":case 16:t.pitchName=16;break;case"G":case 17:t.pitchName=17;break;case"D":case 18:t.pitchName=18;break;case"A":case 19:t.pitchName=19;break;case"E":case 20:t.pitchName=20;break;case"B":case 21:t.pitchName=21;break;case"F_SHARP":case 22:t.pitchName=22;break;case"C_SHARP":case 23:t.pitchName=23;break;case"G_SHARP":case 24:t.pitchName=24;break;case"D_SHARP":case 25:t.pitchName=25;break;case"A_SHARP":case 26:t.pitchName=26;break;case"E_SHARP":case 27:t.pitchName=27;break;case"B_SHARP":case 28:t.pitchName=28;break;case"F_SHARP_SHARP":case 29:t.pitchName=29;break;case"C_SHARP_SHARP":case 30:t.pitchName=30;break;case"G_SHARP_SHARP":case 31:t.pitchName=31;break;case"D_SHARP_SHARP":case 32:t.pitchName=32;break;case"A_SHARP_SHARP":case 33:t.pitchName=33;break;case"E_SHARP_SHARP":case 34:t.pitchName=34;break;case"B_SHARP_SHARP":case 35:t.pitchName=35}return null!=e.velocity&&(t.velocity=0|e.velocity),null!=e.startTime&&(t.startTime=Number(e.startTime)),null!=e.quantizedStartStep&&(o.Long?(t.quantizedStartStep=o.Long.fromValue(e.quantizedStartStep)).unsigned=!1:"string"===typeof e.quantizedStartStep?t.quantizedStartStep=parseInt(e.quantizedStartStep,10):"number"===typeof e.quantizedStartStep?t.quantizedStartStep=e.quantizedStartStep:"object"===typeof e.quantizedStartStep&&(t.quantizedStartStep=new o.LongBits(e.quantizedStartStep.low>>>0,e.quantizedStartStep.high>>>0).toNumber())),null!=e.endTime&&(t.endTime=Number(e.endTime)),null!=e.quantizedEndStep&&(o.Long?(t.quantizedEndStep=o.Long.fromValue(e.quantizedEndStep)).unsigned=!1:"string"===typeof e.quantizedEndStep?t.quantizedEndStep=parseInt(e.quantizedEndStep,10):"number"===typeof e.quantizedEndStep?t.quantizedEndStep=e.quantizedEndStep:"object"===typeof e.quantizedEndStep&&(t.quantizedEndStep=new o.LongBits(e.quantizedEndStep.low>>>0,e.quantizedEndStep.high>>>0).toNumber())),null!=e.numerator&&(t.numerator=0|e.numerator),null!=e.denominator&&(t.denominator=0|e.denominator),null!=e.instrument&&(t.instrument=0|e.instrument),null!=e.program&&(t.program=0|e.program),null!=e.isDrum&&(t.isDrum=Boolean(e.isDrum)),null!=e.part&&(t.part=0|e.part),null!=e.voice&&(t.voice=0|e.voice),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.pitch=0,n.velocity=0,n.startTime=0,n.endTime=0,n.numerator=0,n.denominator=0,n.instrument=0,n.program=0,n.isDrum=!1,n.part=0,n.pitchName=t.enums===String?"UNKNOWN_PITCH_NAME":0,n.voice=0,o.Long){var r=new o.Long(0,0,!1);n.quantizedStartStep=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.quantizedStartStep=t.longs===String?"0":0;if(o.Long){r=new o.Long(0,0,!1);n.quantizedEndStep=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.quantizedEndStep=t.longs===String?"0":0}return null!=e.pitch&&e.hasOwnProperty("pitch")&&(n.pitch=e.pitch),null!=e.velocity&&e.hasOwnProperty("velocity")&&(n.velocity=e.velocity),null!=e.startTime&&e.hasOwnProperty("startTime")&&(n.startTime=t.json&&!isFinite(e.startTime)?String(e.startTime):e.startTime),null!=e.endTime&&e.hasOwnProperty("endTime")&&(n.endTime=t.json&&!isFinite(e.endTime)?String(e.endTime):e.endTime),null!=e.numerator&&e.hasOwnProperty("numerator")&&(n.numerator=e.numerator),null!=e.denominator&&e.hasOwnProperty("denominator")&&(n.denominator=e.denominator),null!=e.instrument&&e.hasOwnProperty("instrument")&&(n.instrument=e.instrument),null!=e.program&&e.hasOwnProperty("program")&&(n.program=e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&(n.isDrum=e.isDrum),null!=e.part&&e.hasOwnProperty("part")&&(n.part=e.part),null!=e.pitchName&&e.hasOwnProperty("pitchName")&&(n.pitchName=t.enums===String?s.tensorflow.magenta.NoteSequence.PitchName[e.pitchName]:e.pitchName),null!=e.voice&&e.hasOwnProperty("voice")&&(n.voice=e.voice),null!=e.quantizedStartStep&&e.hasOwnProperty("quantizedStartStep")&&("number"===typeof e.quantizedStartStep?n.quantizedStartStep=t.longs===String?String(e.quantizedStartStep):e.quantizedStartStep:n.quantizedStartStep=t.longs===String?o.Long.prototype.toString.call(e.quantizedStartStep):t.longs===Number?new o.LongBits(e.quantizedStartStep.low>>>0,e.quantizedStartStep.high>>>0).toNumber():e.quantizedStartStep),null!=e.quantizedEndStep&&e.hasOwnProperty("quantizedEndStep")&&("number"===typeof e.quantizedEndStep?n.quantizedEndStep=t.longs===String?String(e.quantizedEndStep):e.quantizedEndStep:n.quantizedEndStep=t.longs===String?o.Long.prototype.toString.call(e.quantizedEndStep):t.longs===Number?new o.LongBits(e.quantizedEndStep.low>>>0,e.quantizedEndStep.high>>>0).toNumber():e.quantizedEndStep),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.PitchName=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN_PITCH_NAME"]=0,t[e[1]="F_FLAT_FLAT"]=1,t[e[2]="C_FLAT_FLAT"]=2,t[e[3]="G_FLAT_FLAT"]=3,t[e[4]="D_FLAT_FLAT"]=4,t[e[5]="A_FLAT_FLAT"]=5,t[e[6]="E_FLAT_FLAT"]=6,t[e[7]="B_FLAT_FLAT"]=7,t[e[8]="F_FLAT"]=8,t[e[9]="C_FLAT"]=9,t[e[10]="G_FLAT"]=10,t[e[11]="D_FLAT"]=11,t[e[12]="A_FLAT"]=12,t[e[13]="E_FLAT"]=13,t[e[14]="B_FLAT"]=14,t[e[15]="F"]=15,t[e[16]="C"]=16,t[e[17]="G"]=17,t[e[18]="D"]=18,t[e[19]="A"]=19,t[e[20]="E"]=20,t[e[21]="B"]=21,t[e[22]="F_SHARP"]=22,t[e[23]="C_SHARP"]=23,t[e[24]="G_SHARP"]=24,t[e[25]="D_SHARP"]=25,t[e[26]="A_SHARP"]=26,t[e[27]="E_SHARP"]=27,t[e[28]="B_SHARP"]=28,t[e[29]="F_SHARP_SHARP"]=29,t[e[30]="C_SHARP_SHARP"]=30,t[e[31]="G_SHARP_SHARP"]=31,t[e[32]="D_SHARP_SHARP"]=32,t[e[33]="A_SHARP_SHARP"]=33,t[e[34]="E_SHARP_SHARP"]=34,t[e[35]="B_SHARP_SHARP"]=35,t}(),e.TimeSignature=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.time=0,e.prototype.numerator=0,e.prototype.denominator=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.numerator&&e.hasOwnProperty("numerator")&&t.uint32(16).int32(e.numerator),null!=e.denominator&&e.hasOwnProperty("denominator")&&t.uint32(24).int32(e.denominator),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.TimeSignature;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.time=e.double();break;case 2:r.numerator=e.int32();break;case 3:r.denominator=e.int32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&"number"!==typeof e.time?"time: number expected":null!=e.numerator&&e.hasOwnProperty("numerator")&&!o.isInteger(e.numerator)?"numerator: integer expected":null!=e.denominator&&e.hasOwnProperty("denominator")&&!o.isInteger(e.denominator)?"denominator: integer expected":null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.TimeSignature)return e;var t=new s.tensorflow.magenta.NoteSequence.TimeSignature;return null!=e.time&&(t.time=Number(e.time)),null!=e.numerator&&(t.numerator=0|e.numerator),null!=e.denominator&&(t.denominator=0|e.denominator),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.time=0,n.numerator=0,n.denominator=0),null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.numerator&&e.hasOwnProperty("numerator")&&(n.numerator=e.numerator),null!=e.denominator&&e.hasOwnProperty("denominator")&&(n.denominator=e.denominator),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.KeySignature=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.time=0,e.prototype.key=0,e.prototype.mode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.key&&e.hasOwnProperty("key")&&t.uint32(16).int32(e.key),null!=e.mode&&e.hasOwnProperty("mode")&&t.uint32(24).int32(e.mode),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.KeySignature;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.time=e.double();break;case 2:r.key=e.int32();break;case 3:r.mode=e.int32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.time&&e.hasOwnProperty("time")&&"number"!==typeof e.time)return"time: number expected";if(null!=e.key&&e.hasOwnProperty("key"))switch(e.key){default:return"key: enum value expected";case 0:case 1:case 1:case 2:case 3:case 3:case 4:case 5:case 6:case 6:case 7:case 8:case 8:case 9:case 10:case 10:case 11:}if(null!=e.mode&&e.hasOwnProperty("mode"))switch(e.mode){default:return"mode: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:}return null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.KeySignature)return e;var t=new s.tensorflow.magenta.NoteSequence.KeySignature;switch(null!=e.time&&(t.time=Number(e.time)),e.key){case"C":case 0:t.key=0;break;case"C_SHARP":case 1:case"D_FLAT":case 1:t.key=1;break;case"D":case 2:t.key=2;break;case"D_SHARP":case 3:case"E_FLAT":case 3:t.key=3;break;case"E":case 4:t.key=4;break;case"F":case 5:t.key=5;break;case"F_SHARP":case 6:case"G_FLAT":case 6:t.key=6;break;case"G":case 7:t.key=7;break;case"G_SHARP":case 8:case"A_FLAT":case 8:t.key=8;break;case"A":case 9:t.key=9;break;case"A_SHARP":case 10:case"B_FLAT":case 10:t.key=10;break;case"B":case 11:t.key=11}switch(e.mode){case"MAJOR":case 0:t.mode=0;break;case"MINOR":case 1:t.mode=1;break;case"NOT_SPECIFIED":case 2:t.mode=2;break;case"MIXOLYDIAN":case 3:t.mode=3;break;case"DORIAN":case 4:t.mode=4;break;case"PHRYGIAN":case 5:t.mode=5;break;case"LYDIAN":case 6:t.mode=6;break;case"LOCRIAN":case 7:t.mode=7}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.time=0,n.key=t.enums===String?"C":0,n.mode=t.enums===String?"MAJOR":0),null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.key&&e.hasOwnProperty("key")&&(n.key=t.enums===String?s.tensorflow.magenta.NoteSequence.KeySignature.Key[e.key]:e.key),null!=e.mode&&e.hasOwnProperty("mode")&&(n.mode=t.enums===String?s.tensorflow.magenta.NoteSequence.KeySignature.Mode[e.mode]:e.mode),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.Key=function(){var e={},t=Object.create(e);return t[e[0]="C"]=0,t[e[1]="C_SHARP"]=1,t.D_FLAT=1,t[e[2]="D"]=2,t[e[3]="D_SHARP"]=3,t.E_FLAT=3,t[e[4]="E"]=4,t[e[5]="F"]=5,t[e[6]="F_SHARP"]=6,t.G_FLAT=6,t[e[7]="G"]=7,t[e[8]="G_SHARP"]=8,t.A_FLAT=8,t[e[9]="A"]=9,t[e[10]="A_SHARP"]=10,t.B_FLAT=10,t[e[11]="B"]=11,t}(),e.Mode=function(){var e={},t=Object.create(e);return t[e[0]="MAJOR"]=0,t[e[1]="MINOR"]=1,t[e[2]="NOT_SPECIFIED"]=2,t[e[3]="MIXOLYDIAN"]=3,t[e[4]="DORIAN"]=4,t[e[5]="PHRYGIAN"]=5,t[e[6]="LYDIAN"]=6,t[e[7]="LOCRIAN"]=7,t}(),e}(),e.Tempo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.time=0,e.prototype.qpm=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.qpm&&e.hasOwnProperty("qpm")&&t.uint32(17).double(e.qpm),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.Tempo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.time=e.double();break;case 2:r.qpm=e.double();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&"number"!==typeof e.time?"time: number expected":null!=e.qpm&&e.hasOwnProperty("qpm")&&"number"!==typeof e.qpm?"qpm: number expected":null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.Tempo)return e;var t=new s.tensorflow.magenta.NoteSequence.Tempo;return null!=e.time&&(t.time=Number(e.time)),null!=e.qpm&&(t.qpm=Number(e.qpm)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.time=0,n.qpm=0),null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.qpm&&e.hasOwnProperty("qpm")&&(n.qpm=t.json&&!isFinite(e.qpm)?String(e.qpm):e.qpm),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.PitchBend=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.time=0,e.prototype.bend=0,e.prototype.instrument=0,e.prototype.program=0,e.prototype.isDrum=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.bend&&e.hasOwnProperty("bend")&&t.uint32(16).int32(e.bend),null!=e.instrument&&e.hasOwnProperty("instrument")&&t.uint32(24).int32(e.instrument),null!=e.program&&e.hasOwnProperty("program")&&t.uint32(32).int32(e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&t.uint32(40).bool(e.isDrum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.PitchBend;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.time=e.double();break;case 2:r.bend=e.int32();break;case 3:r.instrument=e.int32();break;case 4:r.program=e.int32();break;case 5:r.isDrum=e.bool();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&"number"!==typeof e.time?"time: number expected":null!=e.bend&&e.hasOwnProperty("bend")&&!o.isInteger(e.bend)?"bend: integer expected":null!=e.instrument&&e.hasOwnProperty("instrument")&&!o.isInteger(e.instrument)?"instrument: integer expected":null!=e.program&&e.hasOwnProperty("program")&&!o.isInteger(e.program)?"program: integer expected":null!=e.isDrum&&e.hasOwnProperty("isDrum")&&"boolean"!==typeof e.isDrum?"isDrum: boolean expected":null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.PitchBend)return e;var t=new s.tensorflow.magenta.NoteSequence.PitchBend;return null!=e.time&&(t.time=Number(e.time)),null!=e.bend&&(t.bend=0|e.bend),null!=e.instrument&&(t.instrument=0|e.instrument),null!=e.program&&(t.program=0|e.program),null!=e.isDrum&&(t.isDrum=Boolean(e.isDrum)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.time=0,n.bend=0,n.instrument=0,n.program=0,n.isDrum=!1),null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.bend&&e.hasOwnProperty("bend")&&(n.bend=e.bend),null!=e.instrument&&e.hasOwnProperty("instrument")&&(n.instrument=e.instrument),null!=e.program&&e.hasOwnProperty("program")&&(n.program=e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&(n.isDrum=e.isDrum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.ControlChange=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.time=0,e.prototype.quantizedStep=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.controlNumber=0,e.prototype.controlValue=0,e.prototype.instrument=0,e.prototype.program=0,e.prototype.isDrum=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.controlNumber&&e.hasOwnProperty("controlNumber")&&t.uint32(16).int32(e.controlNumber),null!=e.controlValue&&e.hasOwnProperty("controlValue")&&t.uint32(24).int32(e.controlValue),null!=e.instrument&&e.hasOwnProperty("instrument")&&t.uint32(32).int32(e.instrument),null!=e.program&&e.hasOwnProperty("program")&&t.uint32(40).int32(e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&t.uint32(48).bool(e.isDrum),null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&t.uint32(56).int64(e.quantizedStep),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.ControlChange;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.time=e.double();break;case 7:r.quantizedStep=o.Long?e.int64().toNumber():e.int64();break;case 2:r.controlNumber=e.int32();break;case 3:r.controlValue=e.int32();break;case 4:r.instrument=e.int32();break;case 5:r.program=e.int32();break;case 6:r.isDrum=e.bool();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&"number"!==typeof e.time?"time: number expected":null==e.quantizedStep||!e.hasOwnProperty("quantizedStep")||o.isInteger(e.quantizedStep)||e.quantizedStep&&o.isInteger(e.quantizedStep.low)&&o.isInteger(e.quantizedStep.high)?null!=e.controlNumber&&e.hasOwnProperty("controlNumber")&&!o.isInteger(e.controlNumber)?"controlNumber: integer expected":null!=e.controlValue&&e.hasOwnProperty("controlValue")&&!o.isInteger(e.controlValue)?"controlValue: integer expected":null!=e.instrument&&e.hasOwnProperty("instrument")&&!o.isInteger(e.instrument)?"instrument: integer expected":null!=e.program&&e.hasOwnProperty("program")&&!o.isInteger(e.program)?"program: integer expected":null!=e.isDrum&&e.hasOwnProperty("isDrum")&&"boolean"!==typeof e.isDrum?"isDrum: boolean expected":null:"quantizedStep: integer|Long expected"},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.ControlChange)return e;var t=new s.tensorflow.magenta.NoteSequence.ControlChange;return null!=e.time&&(t.time=Number(e.time)),null!=e.quantizedStep&&(o.Long?(t.quantizedStep=o.Long.fromValue(e.quantizedStep)).unsigned=!1:"string"===typeof e.quantizedStep?t.quantizedStep=parseInt(e.quantizedStep,10):"number"===typeof e.quantizedStep?t.quantizedStep=e.quantizedStep:"object"===typeof e.quantizedStep&&(t.quantizedStep=new o.LongBits(e.quantizedStep.low>>>0,e.quantizedStep.high>>>0).toNumber())),null!=e.controlNumber&&(t.controlNumber=0|e.controlNumber),null!=e.controlValue&&(t.controlValue=0|e.controlValue),null!=e.instrument&&(t.instrument=0|e.instrument),null!=e.program&&(t.program=0|e.program),null!=e.isDrum&&(t.isDrum=Boolean(e.isDrum)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.time=0,n.controlNumber=0,n.controlValue=0,n.instrument=0,n.program=0,n.isDrum=!1,o.Long){var r=new o.Long(0,0,!1);n.quantizedStep=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.quantizedStep=t.longs===String?"0":0;return null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.controlNumber&&e.hasOwnProperty("controlNumber")&&(n.controlNumber=e.controlNumber),null!=e.controlValue&&e.hasOwnProperty("controlValue")&&(n.controlValue=e.controlValue),null!=e.instrument&&e.hasOwnProperty("instrument")&&(n.instrument=e.instrument),null!=e.program&&e.hasOwnProperty("program")&&(n.program=e.program),null!=e.isDrum&&e.hasOwnProperty("isDrum")&&(n.isDrum=e.isDrum),null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&("number"===typeof e.quantizedStep?n.quantizedStep=t.longs===String?String(e.quantizedStep):e.quantizedStep:n.quantizedStep=t.longs===String?o.Long.prototype.toString.call(e.quantizedStep):t.longs===Number?new o.LongBits(e.quantizedStep.low>>>0,e.quantizedStep.high>>>0).toNumber():e.quantizedStep),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.PartInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.part=0,e.prototype.name="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.part&&e.hasOwnProperty("part")&&t.uint32(8).int32(e.part),null!=e.name&&e.hasOwnProperty("name")&&t.uint32(18).string(e.name),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.PartInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.part=e.int32();break;case 2:r.name=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.part&&e.hasOwnProperty("part")&&!o.isInteger(e.part)?"part: integer expected":null!=e.name&&e.hasOwnProperty("name")&&!o.isString(e.name)?"name: string expected":null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.PartInfo)return e;var t=new s.tensorflow.magenta.NoteSequence.PartInfo;return null!=e.part&&(t.part=0|e.part),null!=e.name&&(t.name=String(e.name)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.part=0,n.name=""),null!=e.part&&e.hasOwnProperty("part")&&(n.part=e.part),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.SourceInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sourceType=0,e.prototype.encodingType=0,e.prototype.parser=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.sourceType&&e.hasOwnProperty("sourceType")&&t.uint32(8).int32(e.sourceType),null!=e.encodingType&&e.hasOwnProperty("encodingType")&&t.uint32(16).int32(e.encodingType),null!=e.parser&&e.hasOwnProperty("parser")&&t.uint32(24).int32(e.parser),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.SourceInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.sourceType=e.int32();break;case 2:r.encodingType=e.int32();break;case 3:r.parser=e.int32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.sourceType&&e.hasOwnProperty("sourceType"))switch(e.sourceType){default:return"sourceType: enum value expected";case 0:case 1:case 2:}if(null!=e.encodingType&&e.hasOwnProperty("encodingType"))switch(e.encodingType){default:return"encodingType: enum value expected";case 0:case 1:case 2:case 3:case 4:}if(null!=e.parser&&e.hasOwnProperty("parser"))switch(e.parser){default:return"parser: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:}return null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.SourceInfo)return e;var t=new s.tensorflow.magenta.NoteSequence.SourceInfo;switch(e.sourceType){case"UNKNOWN_SOURCE_TYPE":case 0:t.sourceType=0;break;case"SCORE_BASED":case 1:t.sourceType=1;break;case"PERFORMANCE_BASED":case 2:t.sourceType=2}switch(e.encodingType){case"UNKNOWN_ENCODING_TYPE":case 0:t.encodingType=0;break;case"MUSIC_XML":case 1:t.encodingType=1;break;case"ABC":case 2:t.encodingType=2;break;case"MIDI":case 3:t.encodingType=3;break;case"MUSICNET":case 4:t.encodingType=4}switch(e.parser){case"UNKNOWN_PARSER":case 0:t.parser=0;break;case"MUSIC21":case 1:t.parser=1;break;case"PRETTY_MIDI":case 2:t.parser=2;break;case"MAGENTA_MUSIC_XML":case 3:t.parser=3;break;case"MAGENTA_MUSICNET":case 4:t.parser=4;break;case"MAGENTA_ABC":case 5:t.parser=5;break;case"TONEJS_MIDI_CONVERT":case 6:t.parser=6}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.sourceType=t.enums===String?"UNKNOWN_SOURCE_TYPE":0,n.encodingType=t.enums===String?"UNKNOWN_ENCODING_TYPE":0,n.parser=t.enums===String?"UNKNOWN_PARSER":0),null!=e.sourceType&&e.hasOwnProperty("sourceType")&&(n.sourceType=t.enums===String?s.tensorflow.magenta.NoteSequence.SourceInfo.SourceType[e.sourceType]:e.sourceType),null!=e.encodingType&&e.hasOwnProperty("encodingType")&&(n.encodingType=t.enums===String?s.tensorflow.magenta.NoteSequence.SourceInfo.EncodingType[e.encodingType]:e.encodingType),null!=e.parser&&e.hasOwnProperty("parser")&&(n.parser=t.enums===String?s.tensorflow.magenta.NoteSequence.SourceInfo.Parser[e.parser]:e.parser),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.SourceType=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN_SOURCE_TYPE"]=0,t[e[1]="SCORE_BASED"]=1,t[e[2]="PERFORMANCE_BASED"]=2,t}(),e.EncodingType=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN_ENCODING_TYPE"]=0,t[e[1]="MUSIC_XML"]=1,t[e[2]="ABC"]=2,t[e[3]="MIDI"]=3,t[e[4]="MUSICNET"]=4,t}(),e.Parser=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN_PARSER"]=0,t[e[1]="MUSIC21"]=1,t[e[2]="PRETTY_MIDI"]=2,t[e[3]="MAGENTA_MUSIC_XML"]=3,t[e[4]="MAGENTA_MUSICNET"]=4,t[e[5]="MAGENTA_ABC"]=5,t[e[6]="TONEJS_MIDI_CONVERT"]=6,t}(),e}(),e.TextAnnotation=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.time=0,e.prototype.quantizedStep=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.text="",e.prototype.annotationType=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.text&&e.hasOwnProperty("text")&&t.uint32(18).string(e.text),null!=e.annotationType&&e.hasOwnProperty("annotationType")&&t.uint32(24).int32(e.annotationType),null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&t.uint32(32).int64(e.quantizedStep),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.TextAnnotation;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.time=e.double();break;case 4:r.quantizedStep=o.Long?e.int64().toNumber():e.int64();break;case 2:r.text=e.string();break;case 3:r.annotationType=e.int32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.time&&e.hasOwnProperty("time")&&"number"!==typeof e.time)return"time: number expected";if(null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&!o.isInteger(e.quantizedStep)&&!(e.quantizedStep&&o.isInteger(e.quantizedStep.low)&&o.isInteger(e.quantizedStep.high)))return"quantizedStep: integer|Long expected";if(null!=e.text&&e.hasOwnProperty("text")&&!o.isString(e.text))return"text: string expected";if(null!=e.annotationType&&e.hasOwnProperty("annotationType"))switch(e.annotationType){default:return"annotationType: enum value expected";case 0:case 1:case 2:}return null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.TextAnnotation)return e;var t=new s.tensorflow.magenta.NoteSequence.TextAnnotation;switch(null!=e.time&&(t.time=Number(e.time)),null!=e.quantizedStep&&(o.Long?(t.quantizedStep=o.Long.fromValue(e.quantizedStep)).unsigned=!1:"string"===typeof e.quantizedStep?t.quantizedStep=parseInt(e.quantizedStep,10):"number"===typeof e.quantizedStep?t.quantizedStep=e.quantizedStep:"object"===typeof e.quantizedStep&&(t.quantizedStep=new o.LongBits(e.quantizedStep.low>>>0,e.quantizedStep.high>>>0).toNumber())),null!=e.text&&(t.text=String(e.text)),e.annotationType){case"UNKNOWN":case 0:t.annotationType=0;break;case"CHORD_SYMBOL":case 1:t.annotationType=1;break;case"BEAT":case 2:t.annotationType=2}return t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.time=0,n.text="",n.annotationType=t.enums===String?"UNKNOWN":0,o.Long){var r=new o.Long(0,0,!1);n.quantizedStep=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.quantizedStep=t.longs===String?"0":0;return null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.text&&e.hasOwnProperty("text")&&(n.text=e.text),null!=e.annotationType&&e.hasOwnProperty("annotationType")&&(n.annotationType=t.enums===String?s.tensorflow.magenta.NoteSequence.TextAnnotation.TextAnnotationType[e.annotationType]:e.annotationType),null!=e.quantizedStep&&e.hasOwnProperty("quantizedStep")&&("number"===typeof e.quantizedStep?n.quantizedStep=t.longs===String?String(e.quantizedStep):e.quantizedStep:n.quantizedStep=t.longs===String?o.Long.prototype.toString.call(e.quantizedStep):t.longs===Number?new o.LongBits(e.quantizedStep.low>>>0,e.quantizedStep.high>>>0).toNumber():e.quantizedStep),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.TextAnnotationType=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="CHORD_SYMBOL"]=1,t[e[2]="BEAT"]=2,t}(),e}(),e.QuantizationInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.stepsPerQuarter=0,e.prototype.stepsPerSecond=0,Object.defineProperty(e.prototype,"resolution",{get:o.oneOfGetter(t=["stepsPerQuarter","stepsPerSecond"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.stepsPerQuarter&&e.hasOwnProperty("stepsPerQuarter")&&t.uint32(8).int32(e.stepsPerQuarter),null!=e.stepsPerSecond&&e.hasOwnProperty("stepsPerSecond")&&t.uint32(16).int32(e.stepsPerSecond),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.QuantizationInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.stepsPerQuarter=e.int32();break;case 2:r.stepsPerSecond=e.int32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";var t={};if(null!=e.stepsPerQuarter&&e.hasOwnProperty("stepsPerQuarter")&&(t.resolution=1,!o.isInteger(e.stepsPerQuarter)))return"stepsPerQuarter: integer expected";if(null!=e.stepsPerSecond&&e.hasOwnProperty("stepsPerSecond")){if(1===t.resolution)return"resolution: multiple values";if(t.resolution=1,!o.isInteger(e.stepsPerSecond))return"stepsPerSecond: integer expected"}return null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.QuantizationInfo)return e;var t=new s.tensorflow.magenta.NoteSequence.QuantizationInfo;return null!=e.stepsPerQuarter&&(t.stepsPerQuarter=0|e.stepsPerQuarter),null!=e.stepsPerSecond&&(t.stepsPerSecond=0|e.stepsPerSecond),t},e.toObject=function(e,t){t||(t={});var n={};return null!=e.stepsPerQuarter&&e.hasOwnProperty("stepsPerQuarter")&&(n.stepsPerQuarter=e.stepsPerQuarter,t.oneofs&&(n.resolution="stepsPerQuarter")),null!=e.stepsPerSecond&&e.hasOwnProperty("stepsPerSecond")&&(n.stepsPerSecond=e.stepsPerSecond,t.oneofs&&(n.resolution="stepsPerSecond")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.SubsequenceInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.startTimeOffset=0,e.prototype.endTimeOffset=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.startTimeOffset&&e.hasOwnProperty("startTimeOffset")&&t.uint32(9).double(e.startTimeOffset),null!=e.endTimeOffset&&e.hasOwnProperty("endTimeOffset")&&t.uint32(17).double(e.endTimeOffset),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.SubsequenceInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.startTimeOffset=e.double();break;case 2:r.endTimeOffset=e.double();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.startTimeOffset&&e.hasOwnProperty("startTimeOffset")&&"number"!==typeof e.startTimeOffset?"startTimeOffset: number expected":null!=e.endTimeOffset&&e.hasOwnProperty("endTimeOffset")&&"number"!==typeof e.endTimeOffset?"endTimeOffset: number expected":null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.SubsequenceInfo)return e;var t=new s.tensorflow.magenta.NoteSequence.SubsequenceInfo;return null!=e.startTimeOffset&&(t.startTimeOffset=Number(e.startTimeOffset)),null!=e.endTimeOffset&&(t.endTimeOffset=Number(e.endTimeOffset)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.startTimeOffset=0,n.endTimeOffset=0),null!=e.startTimeOffset&&e.hasOwnProperty("startTimeOffset")&&(n.startTimeOffset=t.json&&!isFinite(e.startTimeOffset)?String(e.startTimeOffset):e.startTimeOffset),null!=e.endTimeOffset&&e.hasOwnProperty("endTimeOffset")&&(n.endTimeOffset=t.json&&!isFinite(e.endTimeOffset)?String(e.endTimeOffset):e.endTimeOffset),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.SectionAnnotation=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.time=0,e.prototype.sectionId=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.time&&e.hasOwnProperty("time")&&t.uint32(9).double(e.time),null!=e.sectionId&&e.hasOwnProperty("sectionId")&&t.uint32(32).int64(e.sectionId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.SectionAnnotation;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.time=e.double();break;case 4:r.sectionId=o.Long?e.int64().toNumber():e.int64();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&"number"!==typeof e.time?"time: number expected":null==e.sectionId||!e.hasOwnProperty("sectionId")||o.isInteger(e.sectionId)||e.sectionId&&o.isInteger(e.sectionId.low)&&o.isInteger(e.sectionId.high)?null:"sectionId: integer|Long expected"},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.SectionAnnotation)return e;var t=new s.tensorflow.magenta.NoteSequence.SectionAnnotation;return null!=e.time&&(t.time=Number(e.time)),null!=e.sectionId&&(o.Long?(t.sectionId=o.Long.fromValue(e.sectionId)).unsigned=!1:"string"===typeof e.sectionId?t.sectionId=parseInt(e.sectionId,10):"number"===typeof e.sectionId?t.sectionId=e.sectionId:"object"===typeof e.sectionId&&(t.sectionId=new o.LongBits(e.sectionId.low>>>0,e.sectionId.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.time=0,o.Long){var r=new o.Long(0,0,!1);n.sectionId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.sectionId=t.longs===String?"0":0;return null!=e.time&&e.hasOwnProperty("time")&&(n.time=t.json&&!isFinite(e.time)?String(e.time):e.time),null!=e.sectionId&&e.hasOwnProperty("sectionId")&&("number"===typeof e.sectionId?n.sectionId=t.longs===String?String(e.sectionId):e.sectionId:n.sectionId=t.longs===String?o.Long.prototype.toString.call(e.sectionId):t.longs===Number?new o.LongBits(e.sectionId.low>>>0,e.sectionId.high>>>0).toNumber():e.sectionId),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.Section=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.sectionId=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.sectionGroup=null,Object.defineProperty(e.prototype,"sectionType",{get:o.oneOfGetter(t=["sectionId","sectionGroup"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.sectionId&&e.hasOwnProperty("sectionId")&&t.uint32(8).int64(e.sectionId),null!=e.sectionGroup&&e.hasOwnProperty("sectionGroup")&&s.tensorflow.magenta.NoteSequence.SectionGroup.encode(e.sectionGroup,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.Section;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.sectionId=o.Long?e.int64().toNumber():e.int64();break;case 2:r.sectionGroup=s.tensorflow.magenta.NoteSequence.SectionGroup.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";var t={};if(null!=e.sectionId&&e.hasOwnProperty("sectionId")&&(t.sectionType=1,!o.isInteger(e.sectionId)&&!(e.sectionId&&o.isInteger(e.sectionId.low)&&o.isInteger(e.sectionId.high))))return"sectionId: integer|Long expected";if(null!=e.sectionGroup&&e.hasOwnProperty("sectionGroup")){if(1===t.sectionType)return"sectionType: multiple values";t.sectionType=1;var n=s.tensorflow.magenta.NoteSequence.SectionGroup.verify(e.sectionGroup);if(n)return"sectionGroup."+n}return null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.Section)return e;var t=new s.tensorflow.magenta.NoteSequence.Section;if(null!=e.sectionId&&(o.Long?(t.sectionId=o.Long.fromValue(e.sectionId)).unsigned=!1:"string"===typeof e.sectionId?t.sectionId=parseInt(e.sectionId,10):"number"===typeof e.sectionId?t.sectionId=e.sectionId:"object"===typeof e.sectionId&&(t.sectionId=new o.LongBits(e.sectionId.low>>>0,e.sectionId.high>>>0).toNumber())),null!=e.sectionGroup){if("object"!==typeof e.sectionGroup)throw TypeError(".tensorflow.magenta.NoteSequence.Section.sectionGroup: object expected");t.sectionGroup=s.tensorflow.magenta.NoteSequence.SectionGroup.fromObject(e.sectionGroup)}return t},e.toObject=function(e,t){t||(t={});var n={};return null!=e.sectionId&&e.hasOwnProperty("sectionId")&&("number"===typeof e.sectionId?n.sectionId=t.longs===String?String(e.sectionId):e.sectionId:n.sectionId=t.longs===String?o.Long.prototype.toString.call(e.sectionId):t.longs===Number?new o.LongBits(e.sectionId.low>>>0,e.sectionId.high>>>0).toNumber():e.sectionId,t.oneofs&&(n.sectionType="sectionId")),null!=e.sectionGroup&&e.hasOwnProperty("sectionGroup")&&(n.sectionGroup=s.tensorflow.magenta.NoteSequence.SectionGroup.toObject(e.sectionGroup,t),t.oneofs&&(n.sectionType="sectionGroup")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.SectionGroup=function(){function e(e){if(this.sections=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sections=o.emptyArray,e.prototype.numTimes=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.sections&&e.sections.length)for(var n=0;n<e.sections.length;++n)s.tensorflow.magenta.NoteSequence.Section.encode(e.sections[n],t.uint32(10).fork()).ldelim();return null!=e.numTimes&&e.hasOwnProperty("numTimes")&&t.uint32(16).int32(e.numTimes),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.NoteSequence.SectionGroup;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.sections&&r.sections.length||(r.sections=[]),r.sections.push(s.tensorflow.magenta.NoteSequence.Section.decode(e,e.uint32()));break;case 2:r.numTimes=e.int32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.sections&&e.hasOwnProperty("sections")){if(!Array.isArray(e.sections))return"sections: array expected";for(var t=0;t<e.sections.length;++t){var n=s.tensorflow.magenta.NoteSequence.Section.verify(e.sections[t]);if(n)return"sections."+n}}return null!=e.numTimes&&e.hasOwnProperty("numTimes")&&!o.isInteger(e.numTimes)?"numTimes: integer expected":null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.NoteSequence.SectionGroup)return e;var t=new s.tensorflow.magenta.NoteSequence.SectionGroup;if(e.sections){if(!Array.isArray(e.sections))throw TypeError(".tensorflow.magenta.NoteSequence.SectionGroup.sections: array expected");t.sections=[];for(var n=0;n<e.sections.length;++n){if("object"!==typeof e.sections[n])throw TypeError(".tensorflow.magenta.NoteSequence.SectionGroup.sections: object expected");t.sections[n]=s.tensorflow.magenta.NoteSequence.Section.fromObject(e.sections[n])}}return null!=e.numTimes&&(t.numTimes=0|e.numTimes),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sections=[]),t.defaults&&(n.numTimes=0),e.sections&&e.sections.length){n.sections=[];for(var r=0;r<e.sections.length;++r)n.sections[r]=s.tensorflow.magenta.NoteSequence.Section.toObject(e.sections[r],t)}return null!=e.numTimes&&e.hasOwnProperty("numTimes")&&(n.numTimes=e.numTimes),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e}(),e.SequenceMetadata=function(){function e(e){if(this.genre=[],this.composers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.title="",e.prototype.artist="",e.prototype.genre=o.emptyArray,e.prototype.composers=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.title&&e.hasOwnProperty("title")&&t.uint32(10).string(e.title),null!=e.artist&&e.hasOwnProperty("artist")&&t.uint32(18).string(e.artist),null!=e.genre&&e.genre.length)for(var n=0;n<e.genre.length;++n)t.uint32(26).string(e.genre[n]);if(null!=e.composers&&e.composers.length)for(n=0;n<e.composers.length;++n)t.uint32(34).string(e.composers[n]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.SequenceMetadata;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.title=e.string();break;case 2:r.artist=e.string();break;case 3:r.genre&&r.genre.length||(r.genre=[]),r.genre.push(e.string());break;case 4:r.composers&&r.composers.length||(r.composers=[]),r.composers.push(e.string());break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.title&&e.hasOwnProperty("title")&&!o.isString(e.title))return"title: string expected";if(null!=e.artist&&e.hasOwnProperty("artist")&&!o.isString(e.artist))return"artist: string expected";if(null!=e.genre&&e.hasOwnProperty("genre")){if(!Array.isArray(e.genre))return"genre: array expected";for(var t=0;t<e.genre.length;++t)if(!o.isString(e.genre[t]))return"genre: string[] expected"}if(null!=e.composers&&e.hasOwnProperty("composers")){if(!Array.isArray(e.composers))return"composers: array expected";for(t=0;t<e.composers.length;++t)if(!o.isString(e.composers[t]))return"composers: string[] expected"}return null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.SequenceMetadata)return e;var t=new s.tensorflow.magenta.SequenceMetadata;if(null!=e.title&&(t.title=String(e.title)),null!=e.artist&&(t.artist=String(e.artist)),e.genre){if(!Array.isArray(e.genre))throw TypeError(".tensorflow.magenta.SequenceMetadata.genre: array expected");t.genre=[];for(var n=0;n<e.genre.length;++n)t.genre[n]=String(e.genre[n])}if(e.composers){if(!Array.isArray(e.composers))throw TypeError(".tensorflow.magenta.SequenceMetadata.composers: array expected");t.composers=[];for(n=0;n<e.composers.length;++n)t.composers[n]=String(e.composers[n])}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.genre=[],n.composers=[]),t.defaults&&(n.title="",n.artist=""),null!=e.title&&e.hasOwnProperty("title")&&(n.title=e.title),null!=e.artist&&e.hasOwnProperty("artist")&&(n.artist=e.artist),e.genre&&e.genre.length){n.genre=[];for(var r=0;r<e.genre.length;++r)n.genre[r]=e.genre[r]}if(e.composers&&e.composers.length){n.composers=[];for(r=0;r<e.composers.length;++r)n.composers[r]=e.composers[r]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.VelocityRange=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.min=0,e.prototype.max=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.min&&e.hasOwnProperty("min")&&t.uint32(8).int32(e.min),null!=e.max&&e.hasOwnProperty("max")&&t.uint32(16).int32(e.max),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new s.tensorflow.magenta.VelocityRange;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.min=e.int32();break;case 2:r.max=e.int32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.min&&e.hasOwnProperty("min")&&!o.isInteger(e.min)?"min: integer expected":null!=e.max&&e.hasOwnProperty("max")&&!o.isInteger(e.max)?"max: integer expected":null},e.fromObject=function(e){if(e instanceof s.tensorflow.magenta.VelocityRange)return e;var t=new s.tensorflow.magenta.VelocityRange;return null!=e.min&&(t.min=0|e.min),null!=e.max&&(t.max=0|e.max),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.min=0,n.max=0),null!=e.min&&e.hasOwnProperty("min")&&(n.min=e.min),null!=e.max&&e.hasOwnProperty("max")&&(n.max=e.max),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e}(),e}(),e.exports=s},function(e,t,n){var r=n(591),a=n(592);self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";n.r(t),n.d(t,"SVGNS",(function(){return r})),n.d(t,"drawSVGPath",(function(){return a})),n.d(t,"drawSVGText",(function(){return i})),n.d(t,"createSVGGroupChild",(function(){return o})),n.d(t,"setFade",(function(){return s}));var r="http://www.w3.org/2000/svg";function a(e,t,n,a,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,c=document.createElementNS(r,"path");return c.setAttributeNS(null,"d",t),c.setAttributeNS(null,"transform","translate(".concat(n,", ").concat(a,") scale(").concat(i,", ").concat(o,")")),c.setAttributeNS(null,"opacity","".concat(s)),e.appendChild(c),c}function i(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,u=document.createElementNS(r,"text");u.setAttributeNS(null,"font-family","Times"),u.setAttributeNS(null,"font-size",i),o&&u.setAttributeNS(null,"font-weight","bold"),u.setAttributeNS(null,"transform","translate(".concat(n,", ").concat(a,") scale(").concat(s,", ").concat(c,")"));var l=document.createTextNode(t);return u.appendChild(l),e.appendChild(u),u}function o(e,t){var n=document.createElementNS(r,"g");return n.setAttribute("data-id",t),e.appendChild(n),n}function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e.querySelector("animate");if(!i){(i=document.createElementNS(r,"animate")).setAttributeNS(null,"attributeName","opacity"),i.setAttributeNS(null,"dur","4s"),i.setAttributeNS(null,"fill","freeze"),i.setAttributeNS(null,"keyTimes","0; 0.25; 0.5; 0.75; 1");var o=(n+3*a)/4;i.setAttributeNS(null,"values","".concat(n,"; ").concat(o,"; ").concat(a,"; ").concat(o,"; ").concat(n))}return t?i.setAttributeNS(null,"repeatCount","indefinite"):i.setAttributeNS(null,"repeatCount","1"),e.appendChild(i),e}},function(e,t,n){"use strict";n.r(t),n.d(t,"PATH_SCALE",(function(){return r})),n.d(t,"staffLinePath",(function(){return i})),n.d(t,"extraLinePath",(function(){return o})),n.d(t,"barPath",(function(){return s})),n.d(t,"stemPath",(function(){return c})),n.d(t,"singleFlagPath",(function(){return u})),n.d(t,"multiFlagPath",(function(){return l})),n.d(t,"tiePath",(function(){return f})),n.d(t,"dotPath",(function(){return d})),n.d(t,"NOTE_PATHS",(function(){return p})),n.d(t,"REST_PATHS",(function(){return h})),n.d(t,"CLEF_PATHS",(function(){return v})),n.d(t,"ACCIDENTAL_PATHS",(function(){return m}));var r=100,a="M 0,10 C 0,-15 35,-50 80,-50 110,-50 125,-35 125,-10 \n125,15 90,50 45,50 15,50 0,35 0,10 Z",i="m 0,0 h 100",o="m -25,0 h 175",s="m 0,-200 v 400",c="m 0,0 v 100 h 15 v -100 z",u="M0,0 h 12 c 7,100 175,156 62,314 79,-177 -49,\n-193 -61,-200 l -13,-5 z",l="m 0,0 h 10 c 6,72 173,64 84,227 44,-120 -44,\n-123 -94,-167 z",f="M 0,25 C 10,46 30,67 50,67 69,67 90,47 100,25 94,\n65 73,89 50,89 26,89 5,63 0,25 Z",d="M 5 -20 a 20 20 0 1 0 0.00001 0 z",p={4:{path:"m 0,0 c 0,-37 49,-51 79,-51 31,0 83,13 83,51 0,39 \n-55,51 -84,51 C 49,51 0,37 0,0 Z m 111,31 c 13,-19 0,-58 -22,-68 -33,-15 \n-53,10 -39,49 9,27 48,39 61,19 z",width:150,stemVSteps:0,stemAnchor:0,flags:0},2:{path:"m 0,10 c 0,-25 35,-60 80,-60 15,0 45,4 45,40 C 125,16 \n89,50 45,50 17,50 0,36 0,10 Z m 71,7 c 17,-11 45,-34 38,-45 -7,-10 -39,1 \n-57,12 -19,11 -42,31 -36,42 6,10 37,2 55,-9 z",width:125,stemVSteps:7,stemAnchor:-10,flags:0},1:{path:a,width:125,stemVSteps:7,stemAnchor:-10,flags:0},.5:{path:a,width:125,stemVSteps:7,stemAnchor:-10,flags:1},.25:{path:a,width:125,stemVSteps:9,stemAnchor:-10,flags:2},.125:{path:a,width:125,stemVSteps:11,stemAnchor:-10,flags:3},.0625:{path:a,width:125,stemVSteps:13,stemAnchor:-10,flags:4}},h={4:"m 0,-50 h 125 v -50 H 0 Z",2:"M 0,0 H 125 V -50 H 0 Z",1:"m 0,-25 c 39,-39 37,-75 8,-120 l 6,-5 61,103 C \n40,-13 31,4 73,71 l -5,5 C 14,52 16,125 67,144 l -4,6 C -37,102 -1,22 59,60 Z",.5:"m 52,-47 c 26,-2 42,-21 48,-42 l 12,4 L 64,83 52,79 \n88,-49 c 0,0 -17,22 -57,22 -16,0 -31,-13 -31,-27 0,-18 10,-31 27,-31 17,0 \n33,15 25,38 z",.25:"m 129,-191 c -6,21 -22,40 -48,42 8,-23 -8,-38 \n-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -20,69 \nc -7,18 -22,33 -45,35 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 15,27 \n31,27 40,0 57,-22 57,-22 l -36,128 12,4 77,-270 z",.125:"m 129,-191 c -6,21 -22,40 -48,42 8,-23 -8,-38 \n-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -20,69 \nc -7,18 -22,33 -45,35 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 15,27 \n31,27 40,0 57,-22 57,-22 L 68,20 C 61,37 46,51 24,52 32,29 16,14 -1,14 c \n-17,0 -27,13 -27,31 0,14 15,27 31,27 38,0 55,-20 57,-22 l -36,128 12,4 \n105,-369 z",.0625:"m 158,-292 c -6,21 -22,40 -48,42 8,-23 -8,-38 \n-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -17,61 \nv 0 c -6,21 -22,40 -48,42 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 \n15,27 31,27 40,0 57,-22 57,-22 l -20,69 c -7,18 -22,33 -45,35 8,-23 -8,-38 \n-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 L 68,20 C \n61,37 46,51 24,52 32,29 16,14 -1,14 c -17,0 -27,13 -27,31 0,14 15,27 31,27 \n38,0 55,-20 57,-22 l -36,128 12,4 134,-469 z"},v={50:{path:"m 101,-199 c -49,0 -100,28 -100,83 0,39 58,57 82,26 15,-20 \n-4,-47 -32,-47 -23,1 -25,0 -25,-8 0,-22 40,-46 71,-41 91,16 67,208 -105,302 \n75,-27 198,-94 211,-201 6,-66 -42,-114 -102,-114 z m 143,33 c -13,0 -23,11 \n-23,24 0,14 10,24 23,24 13,0 23,-11 23,-24 0,-13 -10,-24 -23,-24 z m 2,83 c \n-13,0 -23,11 -23,24 0,14 10,24 23,24 13,0 23,-11 23,-24 0,-13 -10,-24 -23,-24 \nz",upper:-4,lower:3},71:{path:"M 139,48 C 102,57 76,120 131,151 41,128 64,24 129,2 L \n117,-57 C -32,47 26,217 166,182 Z m 12,-1 27,131 C 242,153 216,46 151,47 \nZ m -35,-177 c 34,-23 82,-117 50,-140 -23,-17 -71,33 -50,140 z m -10,10 c \n-23,-77 -20,-200 48,-213 19,-4 89,171 -26,266 l 13,66 c 120,-6 137,155 \n39,191 l 12,58 c 30,131 -137,145 -138,47 0,-29 37,-59 63,-37 21,18 25,71 \n-25,70 32,42 103,0 91,-65 L 167,193 C 56,232 -112,63 106,-120 Z",upper:-7,lower:8}},m=[null,"m -49,-121 v 52 l -29,9 v -48 h -8 v 51 l -20,6 v 29 l \n20,-6 v 70 l -20,6 v 30 l 20,-6 v 51 h 8 V 69 l 30,-8 v 50 h 8 V 58 l 20,-6 \nV 23 l -20,6 v -71 l 20,-6 v -29 l -20,6 v -50 z m 1,82 v 71 l -29,9 v -71 z","M -106,-166 V 67 c 52,-42 85,-56 85,-94 0,-47 -46,-51 \n-73,-22 v -117 z m 31,120 c 20,0 42,46 -20,91 V -7 c 0,-28 10,-39 20,-39 z","m -81,-58 v -48 H -92 V 73 l 60,-13 v 50 h 11 V -72 Z m \n50,24 v 58 l -50,11 v -58 z"]},function(e,t,n){"use strict";n.r(t),n.d(t,"MIN_RESOLUTION",(function(){return r})),n.d(t,"STEM_WIDTH",(function(){return a})),n.d(t,"LINE_STROKE",(function(){return i})),n.d(t,"COMPACT_SPACING",(function(){return o}));var r=.0625,a=15,i=1,o=150},function(e,t,n){"use strict";n.r(t),n.d(t,"MAX_QUARTER_DIVISION",(function(){return f})),n.d(t,"ScrollType",(function(){return i})),n.d(t,"StaffSVGRender",(function(){return d}));var i,o=n(2),s=n(0),c=n(1),u=[{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[0,1,0,1,0,0,1,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,0,3,0,3,0,0,3,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,0,1,0,3,0,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,0,3,0,2,0,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,3,0,0,3,0,3,0,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,2,0,0,2,0,2,0,0,3]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-7],accidental:[3,0,3,0,3,0,0,3,0,3,0,0]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[0,1,0,1,0,3,0,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,0,3,0,3,0,2,0,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,0,1,0,3,0,3,0,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,0,3,0,2,0,2,0,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,3,0,0,3,0,3,0,3,0,0]}],l=[{accidental:1,pitches:[]},{accidental:2,pitches:[70,75,68,73,66]},{accidental:1,pitches:[78,73]},{accidental:2,pitches:[70,75,68]},{accidental:1,pitches:[78,73,80,75]},{accidental:2,pitches:[70]},{accidental:2,pitches:[70,75,68,73,66,71]},{accidental:1,pitches:[78]},{accidental:2,pitches:[70,75,68,73]},{accidental:1,pitches:[78,73,80]},{accidental:2,pitches:[70,75]},{accidental:1,pitches:[78,73,80,75,70]}],f=16;!function(e){e[e.PAGE=0]="PAGE",e[e.NOTE=1]="NOTE",e[e.BAR=2]="BAR"}(i||(i={}));var d=function(){function e(t,n,a){var s=this;r(this,e),this.handleScrollEvent=function(e){s.lastKnownScrollLeft=s.parentElement.scrollLeft,s.ticking||window.requestAnimationFrame((function(){s.changeAndDrawSignaturesIfNeeded(s.lastKnownScrollLeft),s.ticking=!1})),s.ticking=!0},this.scoreInfo=t,this.config={noteHeight:n.noteHeight||6,noteSpacing:n.noteSpacing||1,pixelsPerTimeStep:n.pixelsPerTimeStep||30,noteRGB:n.noteRGB||"8, 41, 64",activeNoteRGB:n.activeNoteRGB||"240, 84, 119"},this.div=a,this.timeSignatureNumerator=4,this.timeSignatureDenominator=4,this.key=n.defaultKey||0,this.scrollType=n.scrollType||i.PAGE,this.scale=this.config.noteHeight/c.PATH_SCALE,(void 0===n.pixelsPerTimeStep||n.pixelsPerTimeStep<=0)&&(this.config.pixelsPerTimeStep=0,this.config.noteSpacing=o.COMPACT_SPACING*this.scale),this.clear(),this.redraw()}return a(e,[{key:"clear",value:function(){for(;this.div.lastChild;)this.div.removeChild(this.div.lastChild);this.div.style.overflow="visible",this.div.style.position="relative",this.overlaySVG=document.createElementNS(s.SVGNS,"svg"),this.overlaySVG.style.position="absolute",this.div.appendChild(this.overlaySVG),this.overlayG=Object(s.createSVGGroupChild)(this.overlaySVG,"overlay"),this.signaturesBlinking=!1,this.signaturesQuarters=0,this.parentElement=document.createElement("div"),this.parentElement.style.overflow="auto",this.div.appendChild(this.parentElement),this.ticking=!1,this.lastKnownScrollLeft=0,this.parentElement.addEventListener("scroll",this.handleScrollEvent),this.staffSVG=document.createElementNS(s.SVGNS,"svg"),this.parentElement.appendChild(this.staffSVG),this.staffG=Object(s.createSVGGroupChild)(this.staffSVG,"staff"),this.linesG=Object(s.createSVGGroupChild)(this.staffSVG,"lines"),this.setStroke(this.linesG),this.staffG.appendChild(this.linesG),this.musicG=Object(s.createSVGGroupChild)(this.staffSVG,"music"),this.setFill(this.musicG),this.setStroke(this.musicG,0),this.staffG.appendChild(this.musicG),this.signaturesG=Object(s.createSVGGroupChild)(this.staffSVG,"signatures"),this.staffG.appendChild(this.signaturesG);var e=0,t=0;this.scoreInfo.notes.forEach((function(n){e+=n.pitch,++t}));var n=e/t;this.clef=n<60?50:71,this.signaturesList=[{x:0,q:0}],this.signatureCurrent=0,this.signatureNext=0,this.changeKeySignatureIfNeeded(0),this.changeTimeSignatureIfNeeded(0),this.vStepSize=this.config.noteHeight/2,this.hStepSize=this.config.pixelsPerTimeStep,this.staffOffset=0,this.height=0,this.width=0,this.musicBlockMap=new Map,this.playingNotes=[],this.lastBar=0,this.barAccidentals={},this.lastQ=-1}},{key:"isPaintingActiveNote",value:function(e,t){var n=e.start===t.start,r=e.start<=t.start&&e.start+e.length>=t.start+t.length;return n||r}},{key:"redraw",value:function(e,t){var n=this,r=-1,a=0===this.config.pixelsPerTimeStep;if(e){var o=[];this.playingNotes.forEach((function(t){n.isPaintingActiveNote(t,e)?o.push(t):n.highlightElement(n.getGroup(t),!1)})),this.playingNotes=o;var c=this.getGroup(e);if(c){this.playingNotes.push(e),this.highlightElement(c,!0),r=c.getBoundingClientRect().left-this.staffSVG.getBoundingClientRect().left;var u=e.start,l=c.getAttribute("data-is-bar-beginning");(this.scrollType!==i.BAR||l)&&this.scrollIntoViewIfNeeded(t,r),!a&&this.signaturesBlinking&&u>=this.signaturesQuarters&&(this.signaturesBlinking=!1,Object(s.setFade)(this.overlayG,this.signaturesBlinking))}}else{this.setDetails();var f=-1===this.lastQ,d=0,p=0;f?(p=this.drawSignatures(this.overlayG,d,!0,!0,!0),a&&(this.width=0,p+=this.config.noteSpacing),p+=this.drawRests(this.initialRest,d+p)):d=this.width,this.musicBlockMap.forEach((function(e,t){a||(d=n.quartersToTime(t)*n.hStepSize),t>n.lastQ?(p+=n.drawMusicBlock(e,d+p),n.lastQ=t):t===n.lastQ&&(p+=n.drawRests(e,d+p))}));var h=this.staffSVG.getBoundingClientRect(),v=this.musicG.getBoundingClientRect();if(this.updateVerticalBoundaries(v.top-h.top,v.bottom-h.top),a)this.width+=p;else{var m=this.musicBlockMap.get(this.lastQ),b=this.quartersToTime(this.lastQ+m.notes[0].length);this.width=b*this.config.pixelsPerTimeStep}this.staffSVG.setAttributeNS(null,"width","".concat(this.width)),this.redrawStaff(this.linesG,0,this.width)}return r}},{key:"drawMusicBlock",value:function(e,t){var n=this,r=e.notes[0].start,a=this.drawBarIfNeeded(r,t);a+=this.drawSignaturesIfNeeded(r,t+a);for(var i=0,u=4;u>=o.MIN_RESOLUTION&&!i;u/=2)u<=e.notes[0].length&&(i=u);if(0===i){var l=0===e.notes[0].length?"[infinite]":"".concat(4/e.notes[0].length);console.warn(" StaffRender ","background:orange; color:white","StaffRender does not handle notes shorther than "+"1/".concat(4/o.MIN_RESOLUTION,"th, and this score tries to draw a ")+"1/".concat(l,"th. Shortest possible note will be drawn instead.")),i=o.MIN_RESOLUTION}var f,d=c.NOTE_PATHS[i];if(d.stemAnchor&&(f=Object(s.createSVGGroupChild)(this.musicG,"stem")),e.notes.forEach((function(r){for(var o=r.vSteps*n.vStepSize,u=2*(r.vSteps>0?Math.floor(r.vSteps/2):Math.ceil(r.vSteps/2)),l=r.vSteps>0?-2:2,f=u;Math.abs(f)>4;f+=l)Object(s.drawSVGPath)(n.linesG,c.extraLinePath,t+a,f*n.vStepSize,n.scale,1);if(r.g=r.tiedFrom?r.tiedFrom.g:Object(s.createSVGGroupChild)(n.musicG,"".concat(r.start,"-").concat(r.pitch)),e.isBarBeginning&&r.g.setAttribute("data-is-bar-beginning","true"),r.tiedFrom){var p=t+a-r.tiedFrom.xHeadRight;Object(s.drawSVGPath)(r.g,c.tiePath,r.tiedFrom.xHeadRight,o,p/c.PATH_SCALE,n.scale*(r.vSteps<0?-1:1),r.opacity)}Object(s.drawSVGPath)(r.g,d.path,t+a,o,n.scale,n.scale,r.opacity),r.xHeadRight=t+a+d.width*n.scale,1.5*i<=r.length&&Object(s.drawSVGPath)(r.g,c.dotPath,t+a+d.width*n.scale+n.vStepSize/2,o-n.vStepSize/2,n.scale,n.scale,r.opacity),0!==r.accidental&&Object(s.drawSVGPath)(r.g,c.ACCIDENTAL_PATHS[r.accidental],t+a,o,n.scale,n.scale,r.opacity)})),d.stemAnchor){var p,h,v=t+a,m=d.stemAnchor*this.scale,b=e.minVStep+e.maxVStep<0,g=d.flags>2?2*(d.flags-2):0;if(b?(p=e.maxVStep*this.vStepSize-m,h=(e.minVStep+7+g)*this.vStepSize):(v+=(d.width-o.STEM_WIDTH)*this.scale,p=e.minVStep*this.vStepSize+m,h=(e.maxVStep-7-g)*this.vStepSize),Object(s.drawSVGPath)(f,c.stemPath,v,p,this.scale,(h-p)/c.PATH_SCALE),1===d.flags)Object(s.drawSVGPath)(f,c.singleFlagPath,v,h,this.scale,this.scale*(b?-1:1),1);else if(d.flags>1)for(var y=0;y<d.flags;++y)Object(s.drawSVGPath)(f,c.multiFlagPath,v,h,this.scale,this.scale*(b?-1:1),1),h+=(b?-2:2)*this.vStepSize}return 0===this.config.pixelsPerTimeStep&&(a+=d.width*this.scale,f&&(a+=f.getBoundingClientRect().width),a+=this.config.noteSpacing),a+=this.drawRests(e,t+a)}},{key:"drawBarIfNeeded",value:function(e,t){var n=0,r=this.lastBar+this.getBarLength();return 0!==e&&e>=r&&(this.config.pixelsPerTimeStep>0?t-=this.config.noteSpacing:n=this.config.noteSpacing,Object(s.drawSVGPath)(this.linesG,c.barPath,t,0,1,this.scale),this.lastBar=r),n}},{key:"drawRests",value:function(e,t){var n=0,r=e.restToNextLength;if(r){this.config.pixelsPerTimeStep>0&&(t+=this.quartersToTime(e.notes[0].length)*this.hStepSize);var a,i=e.notes[0].start+e.notes[0].length,u=0,l=this.lastBar+this.getBarLength()-i;for(r>l&&(u=r-l,r=l),a=4;a>this.getBarLength()&&a>=o.MIN_RESOLUTION;a/=2);for(var f=a;(r||u)&&f>=o.MIN_RESOLUTION;){if(f<=r){n+=this.drawBarIfNeeded(i,t+n),n+=this.drawSignaturesIfNeeded(i,t+n);var d=Object(s.drawSVGPath)(this.musicG,c.REST_PATHS[f],t+n,0,this.scale,this.scale);this.config.pixelsPerTimeStep>0?t+=this.quartersToTime(f)*this.hStepSize:(n+=d.getBoundingClientRect().width,n+=this.config.noteSpacing),i+=f,r-=f}if(u&&r<=0){var p=this.getBarLength();for(u>p?(r=p,u-=p):(r=u,u=0),a=4;a>this.getBarLength()&&a>=o.MIN_RESOLUTION;a/=2);f=a}r<f&&(f/=2)}}return n}},{key:"redrawStaff",value:function(e,t,n){var r=e.querySelector('g[data-id="staff-five-lines"]');if(r)r.setAttributeNS(null,"transform","scale(".concat(n/c.PATH_SCALE,", 1)"));else{r=Object(s.createSVGGroupChild)(e,"staff-five-lines");for(var a=0,i=-4;i<=4;i+=2)Object(s.drawSVGPath)(r,c.staffLinePath,t,a+i*this.vStepSize,n/c.PATH_SCALE,1)}return r}},{key:"clearSignatureOverlay",value:function(){for(;this.overlayG.lastChild;)this.overlayG.removeChild(this.overlayG.lastChild)}},{key:"drawSignaturesIfNeeded",value:function(e,t){var n=0,r=this.changeKeySignatureIfNeeded(e),a=this.changeTimeSignatureIfNeeded(e);if(r||a){var i=o.COMPACT_SPACING*this.scale*(this.config.pixelsPerTimeStep>0?3:2);this.signaturesList.push({x:t-i,q:e}),null===this.signatureNext&&(this.signatureNext=t);var c=e>0?Object(s.createSVGGroupChild)(this.signaturesG,"signatures"):this.overlayG;n+=this.drawSignatures(c,t+n,!1,r,a)}return 0===this.config.pixelsPerTimeStep?n:0}},{key:"drawSignatures",value:function(e,t,n,r,a){var i,u=this,f=o.COMPACT_SPACING*this.scale,d=f,p=e===this.overlayG||this.config.pixelsPerTimeStep>0;if(p){(i=document.createElementNS(s.SVGNS,"rect")).setAttributeNS(null,"x","".concat(t)),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1"),i.setAttributeNS(null,"height","1"),i.setAttribute("data-id","background"),e.appendChild(i);var h=document.defaultView.getComputedStyle(this.div.parentElement);i.setAttributeNS(null,"fill",h.getPropertyValue("background-color"))}if(n){var v=Object(s.drawSVGPath)(e,c.CLEF_PATHS[this.clef].path,t+d,0,this.scale,this.scale);this.setFill(v),d+=3*f}if(r){var m=l[this.key].accidental,b=71===this.clef?0:14;l[this.key].pitches.forEach((function(n){var r=u.getPitchDetails(n).vSteps,a=Object(s.drawSVGPath)(e,c.ACCIDENTAL_PATHS[m],t+d,(b+r)*u.vStepSize,u.scale,u.scale);u.setFill(a),d+=a.getBoundingClientRect().width}))}if(a){var g=Object(s.createSVGGroupChild)(e,"time-key"),y="".concat(2.85*this.config.noteHeight,"px");Object(s.drawSVGText)(g,"".concat(this.timeSignatureNumerator),t+d,-.5,y,!0),Object(s.drawSVGText)(g,"".concat(this.timeSignatureDenominator),t+d,4*this.vStepSize-.5,y,!0),this.setFill(g),d+=g.getBoundingClientRect().width+f}var O=this.redrawStaff(e,t,d);this.setStroke(O);var k=this.div.getBoundingClientRect(),w=e.getBoundingClientRect();if(this.updateVerticalBoundaries(w.top-k.top,w.bottom-k.top),p&&(i.setAttributeNS(null,"y","".concat(-this.staffOffset)),i.setAttributeNS(null,"height","".concat(this.height)),i.setAttributeNS(null,"width","".concat(d))),e===this.overlayG){this.overlaySVG.setAttributeNS(null,"width","".concat(d+5));for(var x=0;x<5;++x){var j=Object(s.drawSVGPath)(e,c.stemPath,d+x,x*x-this.staffOffset,1/o.STEM_WIDTH,(this.height-2*x*x)/c.PATH_SCALE,(x-5)*(x-5)*2/c.PATH_SCALE);this.setFill(j)}}if(this.config.pixelsPerTimeStep>0){var S=0===this.signaturesQuarters;return S&&(this.signaturesQuarters=this.timeToQuarters(d/this.hStepSize)),(S||t>0)&&(this.signaturesBlinking=!0,Object(s.setFade)(e,this.signaturesBlinking)),0}return d}},{key:"changeKeySignatureIfNeeded",value:function(e){if(this.scoreInfo.keySignatures){for(var t=this.key,n=0;n<this.scoreInfo.keySignatures.length&&this.scoreInfo.keySignatures[n].start<=e;++n)t=this.scoreInfo.keySignatures[n].key;if(t!==this.key)return this.key=t,!0}return!1}},{key:"changeTimeSignatureIfNeeded",value:function(e){if(this.scoreInfo.timeSignatures){for(var t=this.timeSignatureNumerator,n=this.timeSignatureDenominator,r=0;r<this.scoreInfo.timeSignatures.length&&this.scoreInfo.timeSignatures[r].start<=e;++r)t=this.scoreInfo.timeSignatures[r].numerator,n=this.scoreInfo.timeSignatures[r].denominator;if(t!==this.timeSignatureNumerator||n!==this.timeSignatureDenominator)return this.timeSignatureNumerator=t,this.timeSignatureDenominator=n,!0}return!1}},{key:"changeAndDrawSignaturesIfNeeded",value:function(e){var t;if(e<this.signatureCurrent||null!==this.signatureNext&&this.signatureNext<=e){t=this.signaturesList[0].q,this.signatureNext=null;for(var n=0;n<this.signaturesList.length;++n){if(e<this.signaturesList[n].x){this.signatureNext=this.signaturesList[n].x;break}this.signatureCurrent=this.signaturesList[n].x,t=this.signaturesList[n].q}}if(void 0!==t){var r=this.key,a=this.timeSignatureNumerator,i=this.timeSignatureDenominator;this.changeKeySignatureIfNeeded(t),this.changeTimeSignatureIfNeeded(t),this.clearSignatureOverlay(),this.drawSignatures(this.overlayG,0,!0,!0,!0),this.key=r,this.timeSignatureNumerator=a,this.timeSignatureDenominator=i}this.config.pixelsPerTimeStep>0&&0===e&&(this.signatureNext=0,this.signaturesBlinking=!0,Object(s.setFade)(this.overlayG,this.signaturesBlinking))}},{key:"getBarLength",value:function(){return 4*this.timeSignatureNumerator/this.timeSignatureDenominator}},{key:"scrollIntoViewIfNeeded",value:function(e,t){if(e)if(this.scrollType===i.PAGE){var n=this.parentElement.getBoundingClientRect().width;t>this.parentElement.scrollLeft+n&&(this.parentElement.scrollLeft=t-20)}else{var r=this.parentElement.getBoundingClientRect().width;this.parentElement.scrollLeft=t-.5*r}}},{key:"updateVerticalBoundaries",value:function(e,t){var n=0;if(e<0){this.staffOffset-=e;var r="translate(0, ".concat(this.staffOffset,")");this.overlayG.setAttributeNS(null,"transform",r),this.staffG.setAttributeNS(null,"transform",r),n=this.height-e}if((n=Math.max(n,t-e))>this.height){this.height=n,this.overlaySVG.setAttributeNS(null,"height","".concat(this.height)),this.staffSVG.setAttributeNS(null,"height","".concat(this.height));for(var a=this.div.querySelectorAll('rect[data-id="background"]'),i=0;i<a.length;++i){var o=a[i];o.setAttributeNS(null,"y","".concat(-this.staffOffset)),o.setAttributeNS(null,"height","".concat(this.height))}}}},{key:"setFill",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.setAttributeNS(null,"fill",this.getColor(t))}},{key:"setStroke",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.LINE_STROKE,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.setAttributeNS(null,"stroke",this.getColor(n)),e.setAttributeNS(null,"stroke-width","".concat(t))}},{key:"getColor",value:function(e){return"rgb(".concat(e?this.config.activeNoteRGB:this.config.noteRGB,")")}},{key:"getOpacity",value:function(e){return e?e/127*.8+.2:1}},{key:"getGroup",value:function(e){var t=e.start,n=e.pitch;return this.staffSVG.querySelector('g[data-id="'.concat(t,"-").concat(n,'"]'))}},{key:"highlightElement",value:function(e,t){e.setAttribute("fill",this.getColor(t)),e.setAttribute("stroke",this.getColor(t))}},{key:"getBarBeginnings",value:function(){var e=new Set,t=0;this.scoreInfo.notes.forEach((function(e){e.start+e.length>t&&(t=e.start+e.length)}));var n=this.scoreInfo.timeSignatures?this.scoreInfo.timeSignatures.slice(0):[{start:0,numerator:4,denominator:4}];n.sort((function(e,t){return e.start-t.start}));for(var r=0,a=0;a<n.length;++a)for(var i=a===n.length-1?t:n[a].start,o=4*n[a].numerator/n[a].denominator;r<i;r+=o)e.add(r);return e}},{key:"quartersToTime",value:function(e){return e/this.scoreInfo.tempos[0].qpm*60}},{key:"timeToQuarters",value:function(e){return e*this.scoreInfo.tempos[0].qpm/60}},{key:"setDetails",value:function(){var e=this,t=new Map,n=this.getBarBeginnings(),r=new Set(n);this.scoreInfo.notes.slice().sort((function(e,t){return e.start-t.start})).forEach((function(n){var a=e.getQNote(n);r.add(a.start),r.add(a.start+a.length),t.has(a.start)?t.get(a.start).push(a):t.set(a.start,[a])})),Array.from(r).sort((function(e,t){return e-t})).forEach((function(n){var r=[];t.forEach((function(t){t.forEach((function(t){var a=e.splitQNote(t,n);a&&r.push(a)}))})),r.forEach((function(e){t.has(e.start)?t.get(e.start).push(e):t.set(e.start,[e])}))})),t=new Map(Array.from(t).sort((function(e,t){return e[0]-t[0]})));var a=this.key,i=null,o=0,s=n[Symbol.iterator](),c=s.next();t.forEach((function(t,n){var r={maxVStep:Number.MAX_SAFE_INTEGER,minVStep:Number.MIN_SAFE_INTEGER,restToNextLength:0,isBarBeginning:!1,notes:[]};e.changeKeySignatureIfNeeded(n);var a=c.value+e.getBarLength();!c.done&&n>=a&&(c=s.next(),e.barAccidentals={},r.isBarBeginning=!0),t.forEach((function(t){e.analyzePitch(t,n),r.minVStep=Math.max(t.vSteps,r.minVStep),r.maxVStep=Math.min(t.vSteps,r.maxVStep),r.notes.push(t)})),i&&(i.restToNextLength=n-o),e.musicBlockMap.set(n,r),i=r,o=n+r.notes[0].length})),this.initialRest={maxVStep:0,minVStep:0,restToNextLength:this.musicBlockMap.values().next().value.notes[0].start,isBarBeginning:!0,notes:[{start:0,length:0,vSteps:0,accidental:0,opacity:0,pitch:0,xHeadRight:0}]},this.key=a}},{key:"getQNote",value:function(e){return{start:e.start,length:e.length,vSteps:0,accidental:0,opacity:this.getOpacity(e.intensity),pitch:e.pitch,xHeadRight:0}}},{key:"splitQNote",value:function(e,t){var n=e.start+e.length-t;return t>e.start&&n>0?(e.length-=n,{start:t,length:n,vSteps:e.vSteps,accidental:e.accidental,opacity:e.opacity,pitch:e.pitch,xHeadRight:0,tiedFrom:e}):null}},{key:"analyzePitch",value:function(e,t){var n=this.getPitchDetails(e.pitch);n.vSteps in this.barAccidentals?n.accidental===this.barAccidentals[n.vSteps]?n.accidental=0:(3===this.barAccidentals[n.vSteps]?n.accidental=n.keyAccidental:0===n.accidental&&(n.accidental=3),this.barAccidentals[n.vSteps]=n.accidental):(e.tiedFrom&&(n.accidental=0),this.barAccidentals[n.vSteps]=n.accidental),e.vSteps=n.vSteps,e.accidental=n.accidental}},{key:"getPitchDetails",value:function(e){var t=e-60,n=Math.floor(t/12),r=t-12*n,a=u[this.key].steps[r],i=71===this.clef?6:-6,o=1===l[this.key].accidental?69+(r+3)%12:64+(r+8)%12;return{vSteps:i-7*n+a,accidental:u[this.key].accidental[r],keyAccidental:l[this.key].pitches.indexOf(o)>-1?l[this.key].accidental:0}}}]),e}()},function(e,t,n){"use strict";n.r(t);var r=n(3);n.d(t,"MAX_QUARTER_DIVISION",(function(){return r.MAX_QUARTER_DIVISION})),n.d(t,"ScrollType",(function(){return r.ScrollType})),n.d(t,"StaffSVGRender",(function(){return r.StaffSVGRender}))}])},function(e,t,n){"use strict";var r=n(595),a=n(600),i=n(313),o=n(601)({args:["array","array","scalar","scalar","scalar"],body:function(e,t,n,r,a){var i=t*n;i<r&&(i=r),i>a&&(i=a)}});e.exports=function(e,t,n,s){"undefined"===typeof n&&(n=-1/0),"undefined"===typeof s&&(s=1/0);var c=t.shape,u=e.shape;if(t.shape.length!==e.shape.length)throw new Error("ndarray-resample: input and output arrays should have the same dimensions");var l,f=c.map((function(){return 0}));if(1===e.size)return(l=i.sum(t)/t.size)<n&&(l=n),l>s&&(l=s),void e.set.apply(e,f.concat(l));if(1===t.size)return(l=t.get.apply(t,f))<n&&(l=n),l>s&&(l=s),void i.assigns(e,l);for(var d=c.length,p=new Array(d),h=!1,v=0;v<d;v++)p[v]=Math.min(u[v],c[v]),u[v]>c[v]&&(h=!0);var m=a.malloc(c),b=a.malloc(c);i.assign(m,t),i.assigns(b,0),r(1,m,b);var g=m.lo,y=m.hi,O=a.malloc(u),k=a.malloc(u);h&&(i.assigns(O,0),i.assigns(k,0));var w=new Array(d),x=new Array(d),j=new Array(d),S=new Array(d);for(v=0;v<1<<d;++v){for(var _=0;_<d;++_)if(v&1<<_){if(w[_]=p[_]-(p[_]+1>>>1),0===w[_])continue;x[_]=u[_]-w[_],j[_]=c[_]-w[_],S[_]=1&p[_]?0:1}else w[_]=p[_]+1>>>1,x[_]=0,j[_]=0,S[_]=0;i.assign(y.apply(g.apply(O,x),w),y.apply(g.apply(m,j),w)),i.assign(g.apply(y.apply(g.apply(k,x),w),S),g.apply(y.apply(g.apply(b,j),w),S)),i.assigns(y.apply(y.apply(g.apply(k,x),w),S),0)}r(-1,O,k),o(e,O,e.size/t.size,n,s),a.free(m),a.free(b),a.free(O),a.free(k)}},function(e,t,n){"use strict";var r=n(605),a={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,o,s,c,u,l=!1;t||(t={}),n=t.debug||!1;try{if(o=r(),s=document.createRange(),c=document.getSelection(),(u=document.createElement("span")).textContent=e,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=a[t.format]||a.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(u),s.selectNodeContents(u),c.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(f){n&&console.error("unable to copy using execCommand: ",f),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),l=!0}catch(f){n&&console.error("unable to copy using clipboardData: ",f),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(s):c.removeAllRanges()),u&&document.body.removeChild(u),o()}return l}},function(e,t,n){var r=n(232),a=n(606),i=n(607),o=Math.max,s=Math.min;e.exports=function(e,t,n){var c,u,l,f,d,p,h=0,v=!1,m=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=c,r=u;return c=u=void 0,h=t,f=e.apply(r,n)}function y(e){return h=e,d=setTimeout(k,t),v?g(e):f}function O(e){var n=e-p;return void 0===p||n>=t||n<0||m&&e-h>=l}function k(){var e=a();if(O(e))return w(e);d=setTimeout(k,function(e){var n=t-(e-p);return m?s(n,l-(e-h)):n}(e))}function w(e){return d=void 0,b&&c?g(e):(c=u=void 0,f)}function x(){var e=a(),n=O(e);if(c=arguments,u=this,p=e,n){if(void 0===d)return y(p);if(m)return clearTimeout(d),d=setTimeout(k,t),g(p)}return void 0===d&&(d=setTimeout(k,t)),f}return t=i(t)||0,r(n)&&(v=!!n.leading,l=(m="maxWait"in n)?o(i(n.maxWait)||0,t):l,b="trailing"in n?!!n.trailing:b),x.cancel=function(){void 0!==d&&clearTimeout(d),h=0,c=p=u=d=void 0},x.flush=function(){return void 0===d?f:w(a())},x}},function(e,t,n){"use strict";var r=n(1),a=n(23),i=n.n(a),o=n(107);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=r.forwardRef((function(e,t){var n=e.height,a=e.offset,s=e.children,l=e.prefixCls,f=e.onInnerResize,d={},p={display:"flex",flexDirection:"column"};return void 0!==a&&(d={height:n,position:"relative",overflow:"hidden"},p=c(c({},p),{},{transform:"translateY(".concat(a,"px)"),position:"absolute",left:0,right:0,top:0})),r.createElement("div",{style:d},r.createElement(o.a,{onResize:function(e){e.offsetHeight&&f&&f()}},r.createElement("div",{style:p,className:i()(u({},"".concat(l,"-holder-inner"),l)),ref:t},s)))}));l.displayName="Filler";var f=l,d=n(50);function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function k(e){return"touches"in e?e.touches[0].pageY:e.pageY}var w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,e);var t,n,a,o=g(s);function s(){var e;v(this,s);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=o.call.apply(o,[this].concat(n))).moveRaf=null,e.scrollbarRef=r.createRef(),e.thumbRef=r.createRef(),e.visibleTimeout=null,e.state={dragging:!1,pageY:null,startTop:null,visible:!1},e.delayHidden=function(){clearTimeout(e.visibleTimeout),e.setState({visible:!0}),e.visibleTimeout=setTimeout((function(){e.setState({visible:!1})}),2e3)},e.onScrollbarTouchStart=function(e){e.preventDefault()},e.onContainerMouseDown=function(e){e.stopPropagation(),e.preventDefault()},e.patchEvents=function(){window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("mouseup",e.onMouseUp),e.thumbRef.current.addEventListener("touchmove",e.onMouseMove),e.thumbRef.current.addEventListener("touchend",e.onMouseUp)},e.removeEvents=function(){window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("mouseup",e.onMouseUp),e.scrollbarRef.current.removeEventListener("touchstart",e.onScrollbarTouchStart),e.thumbRef.current.removeEventListener("touchstart",e.onMouseDown),e.thumbRef.current.removeEventListener("touchmove",e.onMouseMove),e.thumbRef.current.removeEventListener("touchend",e.onMouseUp),d.a.cancel(e.moveRaf)},e.onMouseDown=function(t){var n=e.props.onStartMove;e.setState({dragging:!0,pageY:k(t),startTop:e.getTop()}),n(),e.patchEvents(),t.stopPropagation(),t.preventDefault()},e.onMouseMove=function(t){var n=e.state,r=n.dragging,a=n.pageY,i=n.startTop,o=e.props.onScroll;if(d.a.cancel(e.moveRaf),r){var s=i+(k(t)-a),c=e.getEnableScrollRange(),u=e.getEnableHeightRange(),l=u?s/u:0,f=Math.ceil(l*c);e.moveRaf=Object(d.a)((function(){o(f)}))}},e.onMouseUp=function(){var t=e.props.onStopMove;e.setState({dragging:!1}),t(),e.removeEvents()},e.getSpinHeight=function(){var t=e.props,n=t.height,r=n/t.count*10;return r=Math.max(r,20),r=Math.min(r,n/2),Math.floor(r)},e.getEnableScrollRange=function(){var t=e.props;return t.scrollHeight-t.height||0},e.getEnableHeightRange=function(){return e.props.height-e.getSpinHeight()||0},e.getTop=function(){var t=e.props.scrollTop,n=e.getEnableScrollRange(),r=e.getEnableHeightRange();return 0===t||0===n?0:t/n*r},e.showScroll=function(){var t=e.props,n=t.height;return t.scrollHeight>n},e}return t=s,(n=[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(e){e.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var e=this.state,t=e.dragging,n=e.visible,a=this.props.prefixCls,o=this.getSpinHeight(),s=this.getTop(),c=this.showScroll(),u=c&&n;return r.createElement("div",{ref:this.scrollbarRef,className:i()("".concat(a,"-scrollbar"),h({},"".concat(a,"-scrollbar-show"),c)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:u?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},r.createElement("div",{ref:this.thumbRef,className:i()("".concat(a,"-scrollbar-thumb"),h({},"".concat(a,"-scrollbar-thumb-moving"),t)),style:{width:"100%",height:o,top:s,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}])&&m(t.prototype,n),a&&m(t,a),s}(r.Component);function x(e){var t=e.children,n=e.setRef,a=r.useCallback((function(e){n(e)}),[]);return r.cloneElement(t,{ref:a})}var j=n(160);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maps=void 0,this.maps=Object.create(null)}var t,n,r;return t=e,(n=[{key:"set",value:function(e,t){this.maps[e]=t}},{key:"get",value:function(e){return this.maps[e]}}])&&S(t.prototype,n),r&&S(t,r),e}();function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e){return N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n){var a=T(r.useState(e),2),i=a[0],o=a[1],s=T(r.useState(null),2),c=s[0],u=s[1];return r.useEffect((function(){var r=function(e,t,n){var r,a,i=e.length,o=t.length;if(0===i&&0===o)return null;i<o?(r=e,a=t):(r=t,a=e);var s={__EMPTY_ITEM__:!0};function c(e){return void 0!==e?n(e):s}for(var u=null,l=1!==Math.abs(i-o),f=0;f<a.length;f+=1){var d=c(r[f]);if(d!==c(a[f])){u=f,l=l||d!==c(a[f+1]);break}}return null===u?null:{index:u,multiple:l}}(i||[],e||[],t);void 0!==(null===r||void 0===r?void 0:r.index)&&(null===n||void 0===n||n(r.index),u(e[r.index])),o(e)}),[e]),[c]}function M(e){return M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}var P="object"===("undefined"===typeof navigator?"undefined":M(navigator))&&/Firefox/i.test(navigator.userAgent),R=function(e,t){var n=Object(r.useRef)(!1),a=Object(r.useRef)(null);function i(){clearTimeout(a.current),n.current=!0,a.current=setTimeout((function(){n.current=!1}),50)}var o=Object(r.useRef)({top:e,bottom:t});return o.current.top=e,o.current.bottom=t,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e<0&&o.current.top||e>0&&o.current.bottom;return t&&r?(clearTimeout(a.current),n.current=!1):r&&!n.current||i(),!n.current&&r}};var D=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange"];function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var W=[],G={overflowY:"auto",overflowAnchor:"none"};function H(e,t){var n=e.prefixCls,a=void 0===n?"rc-virtual-list":n,o=e.className,s=e.height,c=e.itemHeight,u=e.fullHeight,l=void 0===u||u,p=e.style,h=e.data,v=e.children,m=e.itemKey,b=e.virtual,g=e.component,y=void 0===g?"div":g,O=e.onScroll,k=e.onVisibleChange,S=U(e,D),E=!(!1===b||!s||!c),T=E&&h&&c*h.length>s,I=V(Object(r.useState)(0),2),M=I[0],L=I[1],B=V(Object(r.useState)(!1),2),H=B[0],K=B[1],X=i()(a,o),Q=h||W,Y=Object(r.useRef)(),Z=Object(r.useRef)(),J=Object(r.useRef)(),$=r.useCallback((function(e){return"function"===typeof m?m(e):null===e||void 0===e?void 0:e[m]}),[m]),ee={getKey:$};function te(e){L((function(t){var n=function(e){var t=e;Number.isNaN(be.current)||(t=Math.min(t,be.current));return t=Math.max(t,0)}("function"===typeof e?e(t):e);return Y.current.scrollTop=n,n}))}var ne=Object(r.useRef)({start:0,end:Q.length}),re=Object(r.useRef)(),ae=V(A(Q,$),1)[0];re.current=ae;var ie=function(e,t,n){var a=C(r.useState(0),2),i=a[0],o=a[1],s=Object(r.useRef)(new Map),c=Object(r.useRef)(new _),u=Object(r.useRef)(0);function l(){u.current+=1;var e=u.current;Promise.resolve().then((function(){e===u.current&&(s.current.forEach((function(e,t){if(e&&e.offsetParent){var n=Object(j.a)(e),r=n.offsetHeight;c.current.get(t)!==r&&c.current.set(t,n.offsetHeight)}})),o((function(e){return e+1})))}))}return[function(r,a){var i=e(r),o=s.current.get(i);a?(s.current.set(i,a),l()):s.current.delete(i),!o!==!a&&(a?null===t||void 0===t||t(r):null===n||void 0===n||n(r))},l,c.current,i]}($,null,null),oe=V(ie,4),se=oe[0],ce=oe[1],ue=oe[2],le=oe[3],fe=r.useMemo((function(){if(!E)return{scrollHeight:void 0,start:0,end:Q.length-1,offset:void 0};var e;if(!T)return{scrollHeight:(null===(e=Z.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:Q.length-1,offset:void 0};for(var t,n,r,a=0,i=Q.length,o=0;o<i;o+=1){var u=Q[o],l=$(u),f=ue.get(l),d=a+(void 0===f?c:f);d>=M&&void 0===t&&(t=o,n=a),d>M+s&&void 0===r&&(r=o),a=d}return void 0===t&&(t=0,n=0),void 0===r&&(r=Q.length-1),{scrollHeight:a,start:t,end:r=Math.min(r+1,Q.length),offset:n}}),[T,E,M,Q,le,s]),de=fe.scrollHeight,pe=fe.start,he=fe.end,ve=fe.offset;ne.current.start=pe,ne.current.end=he;var me=de-s,be=Object(r.useRef)(me);be.current=me;var ge=M<=0,ye=M>=me,Oe=R(ge,ye);var ke=function(e,t,n,a){var i=Object(r.useRef)(0),o=Object(r.useRef)(null),s=Object(r.useRef)(null),c=Object(r.useRef)(!1),u=R(t,n);return[function(t){if(e){d.a.cancel(o.current);var n=t.deltaY;i.current+=n,s.current=n,u(n)||(P||t.preventDefault(),o.current=Object(d.a)((function(){var e=c.current?10:1;a(i.current*e),i.current=0})))}},function(t){e&&(c.current=t.detail===s.current)}]}(E,ge,ye,(function(e){te((function(t){return t+e}))})),we=V(ke,2),xe=we[0],je=we[1];!function(e,t,n){var a,i=Object(r.useRef)(!1),o=Object(r.useRef)(0),s=Object(r.useRef)(null),c=Object(r.useRef)(null),u=function(e){if(i.current){var t=Math.ceil(e.touches[0].pageY),r=o.current-t;o.current=t,n(r)&&e.preventDefault(),clearInterval(c.current),c.current=setInterval((function(){(!n(r*=.9333333333333333,!0)||Math.abs(r)<=.1)&&clearInterval(c.current)}),16)}},l=function(){i.current=!1,a()},f=function(e){a(),1!==e.touches.length||i.current||(i.current=!0,o.current=Math.ceil(e.touches[0].pageY),s.current=e.target,s.current.addEventListener("touchmove",u),s.current.addEventListener("touchend",l))};a=function(){s.current&&(s.current.removeEventListener("touchmove",u),s.current.removeEventListener("touchend",l))},r.useLayoutEffect((function(){return e&&t.current.addEventListener("touchstart",f),function(){t.current.removeEventListener("touchstart",f),a(),clearInterval(c.current)}}),[e])}(E,Y,(function(e,t){return!Oe(e,t)&&(xe({preventDefault:function(){},deltaY:e}),!0)})),Object(r.useLayoutEffect)((function(){function e(e){E&&e.preventDefault()}return Y.current.addEventListener("wheel",xe),Y.current.addEventListener("DOMMouseScroll",je),Y.current.addEventListener("MozMousePixelScroll",e),function(){Y.current.removeEventListener("wheel",xe),Y.current.removeEventListener("DOMMouseScroll",je),Y.current.removeEventListener("MozMousePixelScroll",e)}}),[E]);var Se=function(e,t,n,a,i,o,s,c){var u=r.useRef();return function(r){if(null!==r&&void 0!==r){if(d.a.cancel(u.current),"number"===typeof r)s(r);else if(r&&"object"===N(r)){var l,f=r.align;l="index"in r?r.index:t.findIndex((function(e){return i(e)===r.key}));var p=r.offset,h=void 0===p?0:p;!function r(c,p){if(!(c<0)&&e.current){var v=e.current.clientHeight,m=!1,b=p;if(v){for(var g=p||f,y=0,O=0,k=0,w=Math.min(t.length,l),x=0;x<=w;x+=1){var j=i(t[x]);O=y;var S=n.get(j);y=k=O+(void 0===S?a:S),x===l&&void 0===S&&(m=!0)}var _=null;switch(g){case"top":_=O-h;break;case"bottom":_=k-v+h;break;default:var C=e.current.scrollTop;O<C?b="top":k>C+v&&(b="bottom")}null!==_&&_!==e.current.scrollTop&&s(_)}u.current=Object(d.a)((function(){m&&o(),r(c-1,b)}))}}(3)}}else c()}}(Y,Q,ue,c,$,ce,te,(function(){var e;null===(e=J.current)||void 0===e||e.delayHidden()}));r.useImperativeHandle(t,(function(){return{scrollTo:Se}})),Object(r.useLayoutEffect)((function(){if(k){var e=Q.slice(pe,he+1);k(e,Q)}}),[pe,he,Q]);var _e=function(e,t,n,a,i,o){var s=o.getKey;return e.slice(t,n+1).map((function(e,n){var o=i(e,t+n,{}),c=s(e);return r.createElement(x,{key:c,setRef:function(t){return a(e,t)}},o)}))}(Q,pe,he,se,v,ee),Ce=null;return s&&(Ce=z(q({},l?"height":"maxHeight",s),G),E&&(Ce.overflowY="hidden",H&&(Ce.pointerEvents="none"))),r.createElement("div",F({style:z(z({},p),{},{position:"relative"}),className:X},S),r.createElement(y,{className:"".concat(a,"-holder"),style:Ce,ref:Y,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==M&&te(t),null===O||void 0===O||O(e)}},r.createElement(f,{prefixCls:a,height:de,offset:ve,onInnerResize:ce,ref:Z},_e)),E&&r.createElement(w,{ref:J,prefixCls:a,scrollTop:M,height:s,scrollHeight:de,count:Q.length,onScroll:function(e){te(e)},onStartMove:function(){K(!0)},onStopMove:function(){K(!1)}}))}var K=r.forwardRef(H);K.displayName="List";var X=K;t.a=X},function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var r=n(17),a=n(16),i=n(18),o=n(31),s=n(26),c=n(35),u=n(1),l=n(49),f=n(207),d=n(65),p=n(23),h=n.n(p),v=n(87),m=n(135),b=n(139),g=n(176),y=function(e,t){var n,r,a=e.prefixCls,o=e.id,s=e.inputElement,c=e.disabled,l=e.tabIndex,f=e.autoFocus,p=e.autoComplete,v=e.editable,m=e.accessibilityIndex,b=e.value,g=e.maxLength,y=e.onKeyDown,O=e.onMouseDown,k=e.onChange,w=e.onPaste,x=e.onCompositionStart,j=e.onCompositionEnd,S=e.open,_=e.attrs,C=s||u.createElement("input",null),E=C,N=E.ref,T=E.props,I=T.onKeyDown,A=T.onChange,M=T.onMouseDown,P=T.onCompositionStart,R=T.onCompositionEnd,D=T.style;return C=u.cloneElement(C,Object(i.a)(Object(i.a)({id:o,ref:Object(d.a)(t,N),disabled:c,tabIndex:l,autoComplete:p||"off",type:"search",autoFocus:f,className:h()("".concat(a,"-selection-search-input"),null===(n=C)||void 0===n||null===(r=n.props)||void 0===r?void 0:r.className),style:Object(i.a)(Object(i.a)({},D),{},{opacity:v?null:0}),role:"combobox","aria-expanded":S,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":"".concat(o,"_list_").concat(m)},_),{},{value:v?b:"",maxLength:g,readOnly:!v,unselectable:v?null:"on",onKeyDown:function(e){y(e),I&&I(e)},onMouseDown:function(e){O(e),M&&M(e)},onChange:function(e){k(e),A&&A(e)},onCompositionStart:function(e){x(e),P&&P(e)},onCompositionEnd:function(e){j(e),R&&R(e)},onPaste:w}))},O=u.forwardRef(y);O.displayName="Input";var k=O,w=n(119);function x(e,t){w.b?u.useLayoutEffect(e,t):u.useEffect(e,t)}var j=function(e){e.preventDefault(),e.stopPropagation()},S=function(e){var t=e.id,n=e.prefixCls,r=e.values,i=e.open,o=e.searchValue,c=e.inputRef,l=e.placeholder,f=e.disabled,d=e.mode,p=e.showSearch,v=e.autoFocus,y=e.autoComplete,O=e.accessibilityIndex,w=e.tabIndex,S=e.removeIcon,_=e.maxTagCount,C=e.maxTagTextLength,E=e.maxTagPlaceholder,N=void 0===E?function(e){return"+ ".concat(e.length," ...")}:E,T=e.tagRender,I=e.onToggleOpen,A=e.onSelect,M=e.onInputChange,P=e.onInputPaste,R=e.onInputKeyDown,D=e.onInputMouseDown,F=e.onInputCompositionStart,L=e.onInputCompositionEnd,z=u.useRef(null),q=Object(u.useState)(0),V=Object(s.a)(q,2),B=V[0],U=V[1],W=Object(u.useState)(!1),G=Object(s.a)(W,2),H=G[0],K=G[1],X="".concat(n,"-selection"),Q=i||"tags"===d?o:"",Y="tags"===d||p&&(i||H);function Z(e,t,n,r){return u.createElement("span",{className:h()("".concat(X,"-item"),Object(a.a)({},"".concat(X,"-item-disabled"),t))},u.createElement("span",{className:"".concat(X,"-item-content")},e),n&&u.createElement(g.a,{className:"".concat(X,"-item-remove"),onMouseDown:j,onClick:r,customizeIcon:S},"\xd7"))}x((function(){U(z.current.scrollWidth)}),[Q]);var J=u.createElement("div",{className:"".concat(X,"-search"),style:{width:B},onFocus:function(){K(!0)},onBlur:function(){K(!1)}},u.createElement(k,{ref:c,open:i,prefixCls:n,id:t,inputElement:null,disabled:f,autoFocus:v,autoComplete:y,editable:Y,accessibilityIndex:O,value:Q,onKeyDown:R,onMouseDown:D,onChange:M,onPaste:P,onCompositionStart:F,onCompositionEnd:L,tabIndex:w,attrs:Object(m.a)(e,!0)}),u.createElement("span",{ref:z,className:"".concat(X,"-search-mirror"),"aria-hidden":!0},Q,"\xa0")),$=u.createElement(b.a,{prefixCls:"".concat(X,"-overflow"),data:r,renderItem:function(e){var t=e.disabled,n=e.label,r=e.value,a=!f&&!t,o=n;if("number"===typeof C&&("string"===typeof n||"number"===typeof n)){var s=String(o);s.length>C&&(o="".concat(s.slice(0,C),"..."))}var c=function(e){e&&e.stopPropagation(),A(r,{selected:!1})};return"function"===typeof T?function(e,t,n,r,a){return u.createElement("span",{onMouseDown:function(e){j(e),I(!i)}},T({label:t,value:e,disabled:n,closable:r,onClose:a}))}(r,o,t,a,c):Z(o,t,a,c)},renderRest:function(e){return Z("function"===typeof N?N(e):N,!1)},suffix:J,itemKey:"key",maxCount:_});return u.createElement(u.Fragment,null,$,!r.length&&!Q&&u.createElement("span",{className:"".concat(X,"-placeholder")},l))},_=function(e){var t=e.inputElement,n=e.prefixCls,r=e.id,a=e.inputRef,i=e.disabled,o=e.autoFocus,c=e.autoComplete,l=e.accessibilityIndex,f=e.mode,d=e.open,p=e.values,h=e.placeholder,v=e.tabIndex,b=e.showSearch,g=e.searchValue,y=e.activeValue,O=e.maxLength,w=e.onInputKeyDown,x=e.onInputMouseDown,j=e.onInputChange,S=e.onInputPaste,_=e.onInputCompositionStart,C=e.onInputCompositionEnd,E=u.useState(!1),N=Object(s.a)(E,2),T=N[0],I=N[1],A="combobox"===f,M=A||b,P=p[0],R=g||"";A&&y&&!T&&(R=y),u.useEffect((function(){A&&I(!1)}),[A,y]);var D=!("combobox"!==f&&!d)&&!!R,F=!P||"string"!==typeof P.label&&"number"!==typeof P.label?void 0:P.label.toString();return u.createElement(u.Fragment,null,u.createElement("span",{className:"".concat(n,"-selection-search")},u.createElement(k,{ref:a,prefixCls:n,id:r,open:d,inputElement:t,disabled:i,autoFocus:o,autoComplete:c,editable:M,accessibilityIndex:l,value:R,onKeyDown:w,onMouseDown:x,onChange:function(e){I(!0),j(e)},onPaste:S,onCompositionStart:_,onCompositionEnd:C,tabIndex:v,attrs:Object(m.a)(e,!0),maxLength:A?O:void 0})),!A&&P&&!D&&u.createElement("span",{className:"".concat(n,"-selection-item"),title:F},P.label),!P&&!D&&u.createElement("span",{className:"".concat(n,"-selection-placeholder")},h))};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=u.useRef(null),n=u.useRef(null);function r(r){(r||null===t.current)&&(t.current=r),window.clearTimeout(n.current),n.current=window.setTimeout((function(){t.current=null}),e)}return u.useEffect((function(){return function(){window.clearTimeout(n.current)}}),[]),[function(){return t.current},r]}var E=function(e,t){var n=Object(u.useRef)(null),a=Object(u.useRef)(!1),i=e.prefixCls,o=e.multiple,c=e.open,f=e.mode,d=e.showSearch,p=e.tokenWithEnter,h=e.onSearch,v=e.onSearchSubmit,m=e.onToggleOpen,b=e.onInputKeyDown,g=e.domRef;u.useImperativeHandle(t,(function(){return{focus:function(){n.current.focus()},blur:function(){n.current.blur()}}}));var y=C(0),O=Object(s.a)(y,2),k=O[0],w=O[1],x=Object(u.useRef)(null),j=function(e){!1!==h(e,!0,a.current)&&m(!0)},E={inputRef:n,onInputKeyDown:function(e){var t=e.which;t!==l.a.UP&&t!==l.a.DOWN||e.preventDefault(),b&&b(e),t!==l.a.ENTER||"tags"!==f||a.current||c||v(e.target.value),[l.a.SHIFT,l.a.TAB,l.a.BACKSPACE,l.a.ESC].includes(t)||m(!0)},onInputMouseDown:function(){w(!0)},onInputChange:function(e){var t=e.target.value;if(p&&x.current&&/[\r\n]/.test(x.current)){var n=x.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(n,x.current)}x.current=null,j(t)},onInputPaste:function(e){var t=e.clipboardData.getData("text");x.current=t},onInputCompositionStart:function(){a.current=!0},onInputCompositionEnd:function(e){a.current=!1,"combobox"!==f&&j(e.target.value)}},N=o?u.createElement(S,Object(r.a)({},e,E)):u.createElement(_,Object(r.a)({},e,E));return u.createElement("div",{ref:g,className:"".concat(i,"-selector"),onClick:function(e){e.target!==n.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){n.current.focus()})):n.current.focus())},onMouseDown:function(e){var t=k();e.target===n.current||t||e.preventDefault(),("combobox"===f||d&&t)&&c||(c&&h("",!0,!1),m())}},N)},N=u.forwardRef(E);N.displayName="Selector";var T=N,I=n(164),A=function(e,t){var n=e.prefixCls,o=(e.disabled,e.visible),s=e.children,l=e.popupElement,f=e.containerWidth,d=e.animation,p=e.transitionName,v=e.dropdownStyle,m=e.dropdownClassName,b=e.direction,g=void 0===b?"ltr":b,y=e.dropdownMatchSelectWidth,O=void 0===y||y,k=e.dropdownRender,w=e.dropdownAlign,x=e.getPopupContainer,j=e.empty,S=e.getTriggerDOMNode,_=e.onPopupVisibleChange,C=Object(c.a)(e,["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange"]),E="".concat(n,"-dropdown"),N=l;k&&(N=k(l));var T=u.useMemo((function(){return function(e){var t="number"!==typeof e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}}}}(O)}),[O]),A=d?"".concat(E,"-").concat(d):p,M=u.useRef(null);u.useImperativeHandle(t,(function(){return{getPopupElement:function(){return M.current}}}));var P=Object(i.a)({minWidth:f},v);return"number"===typeof O?P.width=O:O&&(P.width=f),u.createElement(I.a,Object(r.a)({},C,{showAction:_?["click"]:[],hideAction:_?["click"]:[],popupPlacement:"rtl"===g?"bottomRight":"bottomLeft",builtinPlacements:T,prefixCls:E,popupTransitionName:A,popup:u.createElement("div",{ref:M},N),popupAlign:w,popupVisible:o,getPopupContainer:x,popupClassName:h()(m,Object(a.a)({},"".concat(E,"-empty"),j)),popupStyle:P,getTriggerDOMNode:S,onPopupVisibleChange:_}),s)},M=u.forwardRef(A);M.displayName="SelectTrigger";var P=M,R=n(387);var D=n(148);var F=["removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","tabIndex"];function L(e){var t=e.prefixCls,n=e.components.optionList,p=e.convertChildrenToData,m=e.flattenOptions,b=e.getLabeledValue,y=e.filterOptions,O=e.isValueDisabled,k=e.findValueOption,j=(e.warningProps,e.fillOptionsWithMissingValue),S=e.omitDOMProps;function _(e,_){var E,N=e.prefixCls,I=void 0===N?t:N,A=e.className,M=e.id,L=e.open,z=e.defaultOpen,q=e.options,V=e.children,B=e.mode,U=e.value,W=e.defaultValue,G=e.labelInValue,H=e.showSearch,K=e.inputValue,X=e.searchValue,Q=e.filterOption,Y=e.filterSort,Z=e.optionFilterProp,J=void 0===Z?"value":Z,$=e.autoClearSearchValue,ee=void 0===$||$,te=e.onSearch,ne=e.allowClear,re=e.clearIcon,ae=e.showArrow,ie=e.inputIcon,oe=e.menuItemSelectedIcon,se=e.disabled,ce=e.loading,ue=e.defaultActiveFirstOption,le=e.notFoundContent,fe=void 0===le?"Not Found":le,de=e.optionLabelProp,pe=e.backfill,he=(e.tabIndex,e.getInputElement),ve=e.getRawInputElement,me=e.getPopupContainer,be=e.listHeight,ge=void 0===be?200:be,ye=e.listItemHeight,Oe=void 0===ye?20:ye,ke=e.animation,we=e.transitionName,xe=e.virtual,je=e.dropdownStyle,Se=e.dropdownClassName,_e=e.dropdownMatchSelectWidth,Ce=e.dropdownRender,Ee=e.dropdownAlign,Ne=e.showAction,Te=void 0===Ne?[]:Ne,Ie=e.direction,Ae=e.tokenSeparators,Me=e.tagRender,Pe=e.onPopupScroll,Re=e.onDropdownVisibleChange,De=e.onFocus,Fe=e.onBlur,Le=e.onKeyUp,ze=e.onKeyDown,qe=e.onMouseDown,Ve=e.onChange,Be=e.onSelect,Ue=e.onDeselect,We=e.onClear,Ge=e.internalProps,He=void 0===Ge?{}:Ge,Ke=Object(c.a)(e,["prefixCls","className","id","open","defaultOpen","options","children","mode","value","defaultValue","labelInValue","showSearch","inputValue","searchValue","filterOption","filterSort","optionFilterProp","autoClearSearchValue","onSearch","allowClear","clearIcon","showArrow","inputIcon","menuItemSelectedIcon","disabled","loading","defaultActiveFirstOption","notFoundContent","optionLabelProp","backfill","tabIndex","getInputElement","getRawInputElement","getPopupContainer","listHeight","listItemHeight","animation","transitionName","virtual","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","showAction","direction","tokenSeparators","tagRender","onPopupScroll","onDropdownVisibleChange","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown","onChange","onSelect","onDeselect","onClear","internalProps"]),Xe=He.mark===R.a,Qe=S?S(Ke):Ke;F.forEach((function(e){delete Qe[e]}));var Ye=Object(u.useRef)(null),Ze=Object(u.useRef)(null),Je=Object(u.useRef)(null),$e=Object(u.useRef)(null),et=Object(u.useMemo)((function(){return(Ae||[]).some((function(e){return["\n","\r\n"].includes(e)}))}),[Ae]),tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=u.useState(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],i=u.useRef(null),o=function(){window.clearTimeout(i.current)};u.useEffect((function(){return o}),[]);var c=function(t,n){o(),i.current=window.setTimeout((function(){a(t),n&&n()}),e)};return[r,c,o]}(),nt=Object(s.a)(tt,3),rt=nt[0],at=nt[1],it=nt[2],ot=Object(u.useState)(),st=Object(s.a)(ot,2),ct=st[0],ut=st[1];Object(u.useEffect)((function(){ut("rc_select_".concat(Object(w.a)()))}),[]);var lt=M||ct,ft=de;void 0===ft&&(ft=q?"label":"children");var dt="combobox"!==B&&G,pt="tags"===B||"multiple"===B,ht=void 0!==H?H:pt||"combobox"===B,vt=Object(u.useState)(!1),mt=Object(s.a)(vt,2),bt=mt[0],gt=mt[1];Object(u.useEffect)((function(){gt(Object(f.a)())}),[]);var yt=Object(u.useRef)(null);u.useImperativeHandle(_,(function(){var e,t,n;return{focus:null===(e=Je.current)||void 0===e?void 0:e.focus,blur:null===(t=Je.current)||void 0===t?void 0:t.blur,scrollTo:null===(n=$e.current)||void 0===n?void 0:n.scrollTo}}));var Ot=Object(v.a)(W,{value:U}),kt=Object(s.a)(Ot,2),wt=kt[0],xt=kt[1],jt=Object(u.useMemo)((function(){return Object(w.e)(wt,{labelInValue:dt,combobox:"combobox"===B})}),[wt,dt]),St=Object(s.a)(jt,2),_t=St[0],Ct=St[1],Et=Object(u.useMemo)((function(){return new Set(_t)}),[_t]),Nt=Object(u.useState)(null),Tt=Object(s.a)(Nt,2),It=Tt[0],At=Tt[1],Mt=Object(u.useState)(""),Pt=Object(s.a)(Mt,2),Rt=Pt[0],Dt=Pt[1],Ft=Rt;"combobox"===B&&void 0!==wt?Ft=wt:void 0!==X?Ft=X:K&&(Ft=K);var Lt=Object(u.useMemo)((function(){var e=q;return void 0===e&&(e=p(V)),"tags"===B&&j&&(e=j(e,wt,ft,G)),e||[]}),[q,V,B,wt]),zt=Object(u.useMemo)((function(){return m(Lt,e)}),[Lt]),qt=function(e){var t=u.useRef(null),n=u.useMemo((function(){var t=new Map;return e.forEach((function(e){var n=e.data.value;t.set(n,e)})),t}),[e]);return t.current=n,function(e){return e.map((function(e){return t.current.get(e)})).filter(Boolean)}}(zt),Vt=Object(u.useMemo)((function(){if(!Ft||!ht)return Object(o.a)(Lt);var e=y(Ft,Lt,{optionFilterProp:J,filterOption:"combobox"===B&&void 0===Q?function(){return!0}:Q});return"tags"===B&&e.every((function(e){return e[J]!==Ft}))&&e.unshift({value:Ft,label:Ft,key:"__RC_SELECT_TAG_PLACEHOLDER__"}),Y&&Array.isArray(e)?Object(o.a)(e).sort(Y):e}),[Lt,Ft,B,ht,Y]),Bt=Object(u.useMemo)((function(){return m(Vt,e)}),[Vt]);Object(u.useEffect)((function(){$e.current&&$e.current.scrollTo&&$e.current.scrollTo(0)}),[Ft]);var Ut=Object(u.useMemo)((function(){var e=_t.map((function(e){var t=qt([e]),n=b(e,{options:t,prevValueMap:Ct,labelInValue:dt,optionLabelProp:ft});return Object(i.a)(Object(i.a)({},n),{},{disabled:O(e,t)})}));return B||1!==e.length||null!==e[0].value||null!==e[0].label?e:[]}),[wt,Lt,B]);Ut=function(e){var t=u.useRef(e);return u.useMemo((function(){var n=new Map;t.current.forEach((function(e){var t=e.value,r=e.label;t!==r&&n.set(t,r)}));var r=e.map((function(e){var t=n.get(e.value);return e.isCacheable&&t?Object(i.a)(Object(i.a)({},e),{},{label:t}):e}));return t.current=r,r}),[e])}(Ut);var Wt=function(e,t,n){var r=qt([e]),a=k([e],r)[0];if(!He.skipTriggerSelect){var i=dt?b(e,{options:r,prevValueMap:Ct,labelInValue:dt,optionLabelProp:ft}):e;t&&Be?Be(i,a):!t&&Ue&&Ue(i,a)}Xe&&(t&&He.onRawSelect?He.onRawSelect(e,a,n):!t&&He.onRawDeselect&&He.onRawDeselect(e,a,n))},Gt=Object(u.useState)([]),Ht=Object(s.a)(Gt,2),Kt=Ht[0],Xt=Ht[1],Qt=function(e){if(!Xe||!He.skipTriggerChange){var t=qt(e),n=Object(w.f)(Array.from(e),{labelInValue:dt,options:t,getLabeledValue:b,prevValueMap:Ct,optionLabelProp:ft}),r=pt?n:n[0];if(Ve&&(0!==_t.length||0!==n.length)){var a=k(e,t,{prevValueOptions:Kt});Xt(a.map((function(t,n){var r=Object(i.a)({},t);return Object.defineProperty(r,"_INTERNAL_OPTION_VALUE_",{get:function(){return e[n]}}),r}))),Ve(r,pt?a:a[0])}xt(r)}},Yt=function(e,t){var n,r=t.selected,a=t.source;se||(pt?(n=new Set(_t),r?n.add(e):n.delete(e)):(n=new Set).add(e),(pt||!pt&&Array.from(_t)[0]!==e)&&Qt(Array.from(n)),Wt(e,!pt||r,a),"combobox"===B?(Dt(String(e)),At("")):pt&&!ee||(Dt(""),At("")))},Zt="combobox"===B&&"function"===typeof he&&he()||null,Jt="function"===typeof ve&&ve(),$t=Object(v.a)(void 0,{defaultValue:z,value:L}),en=Object(s.a)($t,2),tn=en[0],nn=en[1],rn=tn,an=!fe&&!Vt.length;(se||an&&rn&&"combobox"===B)&&(rn=!1);var on,sn=!an&&rn,cn=function(e){var t=void 0!==e?e:!rn;tn===t||se||(nn(t),Re&&Re(t))};Jt&&(on=function(e){cn(e)}),function(e,t,n){var r=u.useRef(null);r.current={open:t,triggerOpen:n},u.useEffect((function(){function t(t){var n=t.target;n.shadowRoot&&t.composed&&(n=t.composedPath()[0]||n),r.current.open&&e().filter((function(e){return e})).every((function(e){return!e.contains(n)&&e!==n}))&&r.current.triggerOpen(!1)}return window.addEventListener("mousedown",t),function(){return window.removeEventListener("mousedown",t)}}),[])}((function(){var e;return[Ye.current,null===(e=Ze.current)||void 0===e?void 0:e.getPopupElement()]}),sn,cn);var un=function(e,t,n){var r=!0,a=e;At(null);var i=n?null:Object(D.f)(e,Ae),s=i;if("combobox"===B)t&&Qt([a]);else if(i){a="","tags"!==B&&(s=i.map((function(e){var t=zt.find((function(t){return t.data[ft]===e}));return t?t.data.value:null})).filter((function(e){return null!==e})));var c=Array.from(new Set([].concat(Object(o.a)(_t),Object(o.a)(s))));Qt(c),c.forEach((function(e){Wt(e,!0,"input")})),cn(!1),r=!1}return Dt(a),te&&Ft!==a&&te(a),r};Object(u.useEffect)((function(){tn&&se&&nn(!1)}),[se]),Object(u.useEffect)((function(){rn||pt||"combobox"===B||un("",!1,!1)}),[rn]);var ln=C(),fn=Object(s.a)(ln,2),dn=fn[0],pn=fn[1],hn=Object(u.useRef)(!1),vn=[];Object(u.useEffect)((function(){return function(){vn.forEach((function(e){return clearTimeout(e)})),vn.splice(0,vn.length)}}),[]);var mn=Object(u.useState)(0),bn=Object(s.a)(mn,2),gn=bn[0],yn=bn[1],On=void 0!==ue?ue:"combobox"!==B,kn=Object(u.useState)(null),wn=Object(s.a)(kn,2),xn=wn[0],jn=wn[1],Sn=Object(u.useState)({}),_n=Object(s.a)(Sn,2)[1];x((function(){if(sn){var e,t=Math.ceil(null===(e=Ye.current)||void 0===e?void 0:e.offsetWidth);xn===t||Number.isNaN(t)||jn(t)}}),[sn]);var Cn,En=u.createElement(n,{ref:$e,prefixCls:I,id:lt,open:rn,childrenAsData:!q,options:Vt,flattenOptions:Bt,multiple:pt,values:Et,height:ge,itemHeight:Oe,onSelect:function(e,t){Yt(e,Object(i.a)(Object(i.a)({},t),{},{source:"option"}))},onToggleOpen:cn,onActiveValue:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.source,a=void 0===r?"keyboard":r;yn(t),pe&&"combobox"===B&&null!==e&&"keyboard"===a&&At(String(e))},defaultActiveFirstOption:On,notFoundContent:fe,onScroll:Pe,searchValue:Ft,menuItemSelectedIcon:oe,virtual:!1!==xe&&!1!==_e,onMouseEnter:function(){_n({})}});!se&&ne&&(_t.length||Ft)&&(Cn=u.createElement(g.a,{className:"".concat(I,"-clear"),onMouseDown:function(){Xe&&He.onClear&&He.onClear(),We&&We(),Qt([]),un("",!1,!1)},customizeIcon:re},"\xd7"));var Nn,Tn=void 0!==ae?ae:ce||!pt&&"combobox"!==B;Tn&&(Nn=u.createElement(g.a,{className:h()("".concat(I,"-arrow"),Object(a.a)({},"".concat(I,"-arrow-loading"),ce)),customizeIcon:ie,customizeIconProps:{loading:ce,searchValue:Ft,open:rn,focused:rt,showSearch:ht}}));var In=h()(I,A,(E={},Object(a.a)(E,"".concat(I,"-focused"),rt),Object(a.a)(E,"".concat(I,"-multiple"),pt),Object(a.a)(E,"".concat(I,"-single"),!pt),Object(a.a)(E,"".concat(I,"-allow-clear"),ne),Object(a.a)(E,"".concat(I,"-show-arrow"),Tn),Object(a.a)(E,"".concat(I,"-disabled"),se),Object(a.a)(E,"".concat(I,"-loading"),ce),Object(a.a)(E,"".concat(I,"-open"),rn),Object(a.a)(E,"".concat(I,"-customize-input"),Zt),Object(a.a)(E,"".concat(I,"-show-search"),ht),E)),An=u.createElement(P,{ref:Ze,disabled:se,prefixCls:I,visible:sn,popupElement:En,containerWidth:xn,animation:ke,transitionName:we,dropdownStyle:je,dropdownClassName:Se,direction:Ie,dropdownMatchSelectWidth:_e,dropdownRender:Ce,dropdownAlign:Ee,getPopupContainer:me,empty:!Lt.length,getTriggerDOMNode:function(){return yt.current},onPopupVisibleChange:on},Jt?u.cloneElement(Jt,{ref:Object(d.a)(yt,Jt.props.ref)}):u.createElement(T,Object(r.a)({},e,{domRef:yt,prefixCls:I,inputElement:Zt,ref:Je,id:lt,showSearch:ht,mode:B,accessibilityIndex:gn,multiple:pt,tagRender:Me,values:Ut,open:rn,onToggleOpen:cn,searchValue:Ft,activeValue:It,onSearch:un,onSearchSubmit:function(e){if(e&&e.trim()){var t=Array.from(new Set([].concat(Object(o.a)(_t),[e])));Qt(t),t.forEach((function(e){Wt(e,!0,"input")})),Dt("")}},onSelect:function(e,t){Yt(e,Object(i.a)(Object(i.a)({},t),{},{source:"selection"}))},tokenWithEnter:et})));return Jt?An:u.createElement("div",Object(r.a)({className:In},Qe,{ref:Ye,onMouseDown:function(e){var t,n=e.target,r=null===(t=Ze.current)||void 0===t?void 0:t.getPopupElement();if(r&&r.contains(n)){var a=setTimeout((function(){var e,t=vn.indexOf(a);(-1!==t&&vn.splice(t,1),it(),bt||r.contains(document.activeElement))||(null===(e=Je.current)||void 0===e||e.focus())}));vn.push(a)}if(qe){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];qe.apply(void 0,[e].concat(o))}},onKeyDown:function(e){var t,n=dn(),r=e.which;if(r===l.a.ENTER&&("combobox"!==B&&e.preventDefault(),rn||cn(!0)),pn(!!Ft),r===l.a.BACKSPACE&&!n&&pt&&!Ft&&_t.length){var a=Object(w.c)(Ut,_t);null!==a.removedValue&&(Qt(a.values),Wt(a.removedValue,!1,"input"))}for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];rn&&$e.current&&(t=$e.current).onKeyDown.apply(t,[e].concat(o));ze&&ze.apply(void 0,[e].concat(o))},onKeyUp:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a;rn&&$e.current&&(a=$e.current).onKeyUp.apply(a,[e].concat(n));Le&&Le.apply(void 0,[e].concat(n))},onFocus:function(){at(!0),se||(De&&!hn.current&&De.apply(void 0,arguments),Te.includes("focus")&&cn(!0)),hn.current=!0},onBlur:function(){at(!1,(function(){hn.current=!1,cn(!1)})),se||(Ft&&("tags"===B?(un("",!1,!1),Qt(Array.from(new Set([].concat(Object(o.a)(_t),[Ft]))))):"multiple"===B&&Dt("")),Fe&&Fe.apply(void 0,arguments))}}),rt&&!rn&&u.createElement("span",{style:{width:0,height:0,display:"flex",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(_t.join(", "))),An,Nn,Cn)}return u.forwardRef(_)}},function(e,t,n){"use strict";var r=n(17),a=n(26),i=n(1),o=n(420),s=n(18),c=n(23),u=n.n(c),l=n(49),f=n(166),d=n(135),p=n(71);function h(e){var t=e.prefixCls,n=e.style,a=e.visible,o=e.maskProps,c=e.motionName;return i.createElement(p.b,{key:"mask",visible:a,motionName:c,leavedClassName:"".concat(t,"-mask-hidden")},(function(e){var a=e.className,c=e.style;return i.createElement("div",Object(r.a)({style:Object(s.a)(Object(s.a)({},c),n),className:u()("".concat(t,"-mask"),a)},o))}))}function v(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}var m=-1;function b(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var a=e.document;"number"!==typeof(n=a.documentElement[r])&&(n=a.body[r])}return n}var g=i.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate})),y={width:0,height:0,overflow:"hidden",outline:"none"},O=i.forwardRef((function(e,t){var n=e.closable,o=e.prefixCls,c=e.width,l=e.height,f=e.footer,d=e.title,h=e.closeIcon,v=e.style,m=e.className,O=e.visible,k=e.forceRender,w=e.bodyStyle,x=e.bodyProps,j=e.children,S=e.destroyOnClose,_=e.modalRender,C=e.motionName,E=e.ariaId,N=e.onClose,T=e.onVisibleChanged,I=e.onMouseDown,A=e.onMouseUp,M=e.mousePosition,P=Object(i.useRef)(),R=Object(i.useRef)(),D=Object(i.useRef)();i.useImperativeHandle(t,(function(){return{focus:function(){var e;null===(e=P.current)||void 0===e||e.focus()},changeActive:function(e){var t=document.activeElement;e&&t===R.current?P.current.focus():e||t!==P.current||R.current.focus()}}}));var F,L,z,q=i.useState(),V=Object(a.a)(q,2),B=V[0],U=V[1],W={};function G(){var e=function(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,a=r.defaultView||r.parentWindow;return n.left+=b(a),n.top+=b(a,!0),n}(D.current);U(M?"".concat(M.x-e.left,"px ").concat(M.y-e.top,"px"):"")}void 0!==c&&(W.width=c),void 0!==l&&(W.height=l),B&&(W.transformOrigin=B),f&&(F=i.createElement("div",{className:"".concat(o,"-footer")},f)),d&&(L=i.createElement("div",{className:"".concat(o,"-header")},i.createElement("div",{className:"".concat(o,"-title"),id:E},d))),n&&(z=i.createElement("button",{type:"button",onClick:N,"aria-label":"Close",className:"".concat(o,"-close")},h||i.createElement("span",{className:"".concat(o,"-close-x")})));var H=i.createElement("div",{className:"".concat(o,"-content")},z,L,i.createElement("div",Object(r.a)({className:"".concat(o,"-body"),style:w},x),j),F);return i.createElement(p.b,{visible:O,onVisibleChanged:T,onAppearPrepare:G,onEnterPrepare:G,forceRender:k,motionName:C,removeOnLeave:S,ref:D},(function(e,t){var n=e.className,r=e.style;return i.createElement("div",{key:"dialog-element",role:"document",ref:t,style:Object(s.a)(Object(s.a)(Object(s.a)({},r),v),W),className:u()(o,m,n),onMouseDown:I,onMouseUp:A},i.createElement("div",{tabIndex:0,ref:P,style:y,"aria-hidden":"true"}),i.createElement(g,{shouldUpdate:O||k},_?_(H):H),i.createElement("div",{tabIndex:0,ref:R,style:y,"aria-hidden":"true"}))}))}));O.displayName="Content";var k=O;function w(e){var t=e.prefixCls,n=void 0===t?"rc-dialog":t,o=e.zIndex,c=e.visible,p=void 0!==c&&c,b=e.keyboard,g=void 0===b||b,y=e.focusTriggerAfterClose,O=void 0===y||y,w=e.scrollLocker,x=e.title,j=e.wrapStyle,S=e.wrapClassName,_=e.wrapProps,C=e.onClose,E=e.afterClose,N=e.transitionName,T=e.animation,I=e.closable,A=void 0===I||I,M=e.mask,P=void 0===M||M,R=e.maskTransitionName,D=e.maskAnimation,F=e.maskClosable,L=void 0===F||F,z=e.maskStyle,q=e.maskProps,V=Object(i.useRef)(),B=Object(i.useRef)(),U=Object(i.useRef)(),W=i.useState(p),G=Object(a.a)(W,2),H=G[0],K=G[1],X=Object(i.useRef)();function Q(e){null===C||void 0===C||C(e)}X.current||(X.current="rcDialogTitle".concat(m+=1));var Y=Object(i.useRef)(!1),Z=Object(i.useRef)(),J=null;return L&&(J=function(e){Y.current?Y.current=!1:B.current===e.target&&Q(e)}),Object(i.useEffect)((function(){return p&&K(!0),function(){}}),[p]),Object(i.useEffect)((function(){return function(){clearTimeout(Z.current)}}),[]),Object(i.useEffect)((function(){return H?(null===w||void 0===w||w.lock(),null===w||void 0===w?void 0:w.unLock):function(){}}),[H,w]),i.createElement("div",Object(r.a)({className:"".concat(n,"-root")},Object(d.a)(e,{data:!0})),i.createElement(h,{prefixCls:n,visible:P&&p,motionName:v(n,R,D),style:Object(s.a)({zIndex:o},z),maskProps:q}),i.createElement("div",Object(r.a)({tabIndex:-1,onKeyDown:function(e){if(g&&e.keyCode===l.a.ESC)return e.stopPropagation(),void Q(e);p&&e.keyCode===l.a.TAB&&U.current.changeActive(!e.shiftKey)},className:u()("".concat(n,"-wrap"),S),ref:B,onClick:J,role:"dialog","aria-labelledby":x?X.current:null,style:Object(s.a)(Object(s.a)({zIndex:o},j),{},{display:H?null:"none"})},_),i.createElement(k,Object(r.a)({},e,{onMouseDown:function(){clearTimeout(Z.current),Y.current=!0},onMouseUp:function(){Z.current=setTimeout((function(){Y.current=!1}))},ref:U,closable:A,ariaId:X.current,prefixCls:n,visible:p,onClose:Q,onVisibleChanged:function(e){if(e){var t;if(!Object(f.a)(B.current,document.activeElement))V.current=document.activeElement,null===(t=U.current)||void 0===t||t.focus()}else{if(K(!1),P&&V.current&&O){try{V.current.focus({preventScroll:!0})}catch(n){}V.current=null}H&&(null===E||void 0===E||E())}},motionName:v(n,N,T)}))))}var x=function(e){var t=e.visible,n=e.getContainer,s=e.forceRender,c=e.destroyOnClose,u=void 0!==c&&c,l=e.afterClose,f=i.useState(t),d=Object(a.a)(f,2),p=d[0],h=d[1];return i.useEffect((function(){t&&h(!0)}),[t]),!1===n?i.createElement(w,Object(r.a)({},e,{getOpenCount:function(){return 2}})):s||!u||p?i.createElement(o.a,{visible:t,forceRender:s,getContainer:n},(function(t){return i.createElement(w,Object(r.a)({},e,{destroyOnClose:u,afterClose:function(){null===l||void 0===l||l(),h(!1)}},t))})):null};x.displayName="Dialog";var j=x;t.a=j},function(e,t,n){"use strict";n.d(t,"c",(function(){return A})),n.d(t,"a",(function(){return z}));var r=n(17),a=n(16),i=n(1),o=n(23),s=n.n(o),c=n(301),u=n(118),l=n(305),f=n(138),d=n(213),p=n(18),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},v=n(48),m=function(e,t){return i.createElement(v.a,Object(p.a)(Object(p.a)({},e),{},{ref:t,icon:h}))};m.displayName="InfoCircleFilled";var b=i.forwardRef(m),g=n(26),y=n(205),O=n(141);var k,w,x,j,S=n(56),_=3,C=1,E="",N="move-up",T=!1,I=!1;function A(){return C++}function M(e,t){var n=e.prefixCls,r=Object(S.c)(),a=r.getPrefixCls,i=r.getRootPrefixCls,o=a("message",n||E),s=i(e.rootPrefixCls,o);if(k)t({prefixCls:o,rootPrefixCls:s,instance:k});else{var u={prefixCls:o,transitionName:T?N:"".concat(s,"-").concat(N),style:{top:w},getContainer:x,maxCount:j};c.a.newInstance(u,(function(e){k?t({prefixCls:o,rootPrefixCls:s,instance:k}):(k=e,t({prefixCls:o,rootPrefixCls:s,instance:e}))}))}}var P={info:b,success:d.a,error:f.a,warning:l.a,loading:u.a};function R(e,t){var n,r=void 0!==e.duration?e.duration:_,o=P[e.type],c=s()("".concat(t,"-custom-content"),(n={},Object(a.a)(n,"".concat(t,"-").concat(e.type),e.type),Object(a.a)(n,"".concat(t,"-rtl"),!0===I),n));return{key:e.key,duration:r,style:e.style||{},className:e.className,content:i.createElement("div",{className:c},e.icon||o&&i.createElement(o,null),i.createElement("span",null,e.content)),onClose:e.onClose,onClick:e.onClick}}var D,F,L={open:function(e){var t=e.key||C++,n=new Promise((function(n){var a=function(){return"function"===typeof e.onClose&&e.onClose(),n(!0)};M(e,(function(n){var i=n.prefixCls;n.instance.notice(R(Object(r.a)(Object(r.a)({},e),{key:t,onClose:a}),i))}))})),a=function(){k&&k.removeNotice(t)};return a.then=function(e,t){return n.then(e,t)},a.promise=n,a},config:function(e){void 0!==e.top&&(w=e.top,k=null),void 0!==e.duration&&(_=e.duration),void 0!==e.prefixCls&&(E=e.prefixCls),void 0!==e.getContainer&&(x=e.getContainer),void 0!==e.transitionName&&(N=e.transitionName,k=null,T=!0),void 0!==e.maxCount&&(j=e.maxCount,k=null),void 0!==e.rtl&&(I=e.rtl)},destroy:function(e){if(k)if(e){(0,k.removeNotice)(e)}else{var t=k.destroy;t(),k=null}}};function z(e,t){e[t]=function(n,a,i){return function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}(n)?e.open(Object(r.a)(Object(r.a)({},n),{type:t})):("function"===typeof a&&(i=a,a=void 0),e.open({content:n,duration:a,type:t,onClose:i}))}}["success","info","warning","error","loading"].forEach((function(e){return z(L,e)})),L.warn=L.warning,L.useMessage=(D=M,F=R,function(){var e,t=null,n={add:function(e,n){null===t||void 0===t||t.component.add(e,n)}},a=Object(y.a)(n),o=Object(g.a)(a,2),s=o[0],c=o[1],u=i.useRef({});return u.current.open=function(n){var a=n.prefixCls,i=e("message",a),o=e(),c=n.key||A(),u=new Promise((function(e){var a=function(){return"function"===typeof n.onClose&&n.onClose(),e(!0)};D(Object(r.a)(Object(r.a)({},n),{prefixCls:i,rootPrefixCls:o}),(function(e){var i=e.prefixCls,o=e.instance;t=o,s(F(Object(r.a)(Object(r.a)({},n),{key:c,onClose:a}),i))}))})),l=function(){t&&t.removeNotice(c)};return l.then=function(e,t){return u.then(e,t)},l.promise=u,l},["success","info","warning","error","loading"].forEach((function(e){return z(u.current,e)})),[u.current,i.createElement(O.a,{key:"holder"},(function(t){return e=t.getPrefixCls,c}))]});t.b=L},function(e,t,n){"use strict";var r=n(41),a=n(44),i=n(47),o=n(46),s=n(38),c=n(1),u=n(50),l=n(281),f=n(106),d=n(298);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};var n=t.element,r=void 0===n?document.body:n,a={},i=Object.keys(e);return i.forEach((function(e){a[e]=r.style[e]})),i.forEach((function(t){r.style[t]=e[t]})),a};var h={},v=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",n=new RegExp("".concat(t),"g"),r=document.body.className;if(e){if(!n.test(r))return;return p(h),h={},void(document.body.className=r.replace(n,"").trim())}var a=Object(d.a)();if(a&&(h=p({position:"relative",width:"calc(100% - ".concat(a,"px)")}),!n.test(r))){var i="".concat(r," ").concat(t);document.body.className=i.trim()}}},m=n(31),b=[],g="ant-scrolling-effect",y=new RegExp("".concat(g),"g"),O=0,k=new Map,w=function e(t){var n=this;Object(r.a)(this,e),this.lockTarget=void 0,this.options=void 0,this.getContainer=function(){var e;return null===(e=n.options)||void 0===e?void 0:e.container},this.reLock=function(e){var t=b.find((function(e){return e.target===n.lockTarget}));t&&n.unLock(),n.options=e,t&&(t.options=e,n.lock())},this.lock=function(){var e;if(!b.some((function(e){return e.target===n.lockTarget})))if(b.some((function(e){var t,r=e.options;return(null===r||void 0===r?void 0:r.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})))b=[].concat(Object(m.a)(b),[{target:n.lockTarget,options:n.options}]);else{var t=0,r=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body;(r===document.body&&window.innerWidth-document.documentElement.clientWidth>0||r.scrollHeight>r.clientHeight)&&(t=Object(d.a)());var a=r.className;if(0===b.filter((function(e){var t,r=e.options;return(null===r||void 0===r?void 0:r.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})).length&&k.set(r,p({width:0!==t?"calc(100% - ".concat(t,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:r})),!y.test(a)){var i="".concat(a," ").concat(g);r.className=i.trim()}b=[].concat(Object(m.a)(b),[{target:n.lockTarget,options:n.options}])}},this.unLock=function(){var e,t=b.find((function(e){return e.target===n.lockTarget}));if(b=b.filter((function(e){return e.target!==n.lockTarget})),t&&!b.some((function(e){var n,r=e.options;return(null===r||void 0===r?void 0:r.container)===(null===(n=t.options)||void 0===n?void 0:n.container)}))){var r=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body,a=r.className;y.test(a)&&(p(k.get(r),{element:r}),k.delete(r),r.className=r.className.replace(y,"").trim())}},this.lockTarget=O++,this.options=t},x=0,j=Object(f.a)();var S={},_=function(e){if(!j)return null;if(e){if("string"===typeof e)return document.querySelectorAll(e)[0];if("function"===typeof e)return e();if("object"===Object(s.a)(e)&&e instanceof window.HTMLElement)return e}return document.body},C=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).container=void 0,a.componentRef=c.createRef(),a.rafId=void 0,a.scrollLocker=void 0,a.renderComponent=void 0,a.updateScrollLocker=function(e){var t=(e||{}).visible,n=a.props,r=n.getContainer,i=n.visible;i&&i!==t&&j&&_(r)!==a.scrollLocker.getContainer()&&a.scrollLocker.reLock({container:_(r)})},a.updateOpenCount=function(e){var t=e||{},n=t.visible,r=t.getContainer,i=a.props,o=i.visible,s=i.getContainer;o!==n&&j&&_(s)===document.body&&(o&&!n?x+=1:e&&(x-=1)),("function"===typeof s&&"function"===typeof r?s.toString()!==r.toString():s!==r)&&a.removeCurrentContainer()},a.attachToParent=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||a.container&&!a.container.parentNode){var t=_(a.props.getContainer);return!!t&&(t.appendChild(a.container),!0)}return!0},a.getContainer=function(){return j?(a.container||(a.container=document.createElement("div"),a.attachToParent(!0)),a.setWrapperClassName(),a.container):null},a.setWrapperClassName=function(){var e=a.props.wrapperClassName;a.container&&e&&e!==a.container.className&&(a.container.className=e)},a.removeCurrentContainer=function(){var e,t;null===(e=a.container)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(a.container)},a.switchScrollingEffect=function(){1!==x||Object.keys(S).length?x||(p(S),S={},v(!0)):(v(),S=p({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))},a.scrollLocker=new w({container:_(e.getContainer)}),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=Object(u.a)((function(){e.forceUpdate()})))}},{key:"componentDidUpdate",value:function(e){this.updateOpenCount(e),this.updateScrollLocker(e),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visible,n=e.getContainer;j&&_(n)===document.body&&(x=t&&x?x-1:x),this.removeCurrentContainer(),u.a.cancel(this.rafId)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.forceRender,r=e.visible,a=null,i={getOpenCount:function(){return x},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(n||r||this.componentRef.current)&&(a=c.createElement(l.a,{getContainer:this.getContainer,ref:this.componentRef},t(i))),a}}]),n}(c.Component);t.a=C},function(e,t,n){"use strict";var r,a,i=n(17),o=n(41),s=n(44),c=n(47),u=n(46),l=n(1),f=n(18),d=n(16),p=n(107),h=n(63),v=n(23),m=n.n(v),b="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",g=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],y={};function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&y[n])return y[n];var r=window.getComputedStyle(e),a=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),i=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),o=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),s=g.map((function(e){return"".concat(e,":").concat(r.getPropertyValue(e))})).join(";"),c={sizingStyle:s,paddingSize:i,borderSize:o,boxSizing:a};return t&&n&&(y[n]=c),c}!function(e){e[e.NONE=0]="NONE",e[e.RESIZING=1]="RESIZING",e[e.RESIZED=2]="RESIZED"}(a||(a={}));var k=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).nextFrameActionId=void 0,s.resizeFrameId=void 0,s.textArea=void 0,s.saveTextArea=function(e){s.textArea=e},s.handleResize=function(e){var t=s.state.resizeStatus,n=s.props,r=n.autoSize,i=n.onResize;t===a.NONE&&("function"===typeof i&&i(e),r&&s.resizeOnNextFrame())},s.resizeOnNextFrame=function(){cancelAnimationFrame(s.nextFrameActionId),s.nextFrameActionId=requestAnimationFrame(s.resizeTextarea)},s.resizeTextarea=function(){var e=s.props.autoSize;if(e&&s.textArea){var t=e.minRows,n=e.maxRows,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r||((r=document.createElement("textarea")).setAttribute("tab-index","-1"),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),e.getAttribute("wrap")?r.setAttribute("wrap",e.getAttribute("wrap")):r.removeAttribute("wrap");var i=O(e,t),o=i.paddingSize,s=i.borderSize,c=i.boxSizing,u=i.sizingStyle;r.setAttribute("style","".concat(u,";").concat(b)),r.value=e.value||e.placeholder||"";var l,f=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,p=r.scrollHeight;if("border-box"===c?p+=s:"content-box"===c&&(p-=o),null!==n||null!==a){r.value=" ";var h=r.scrollHeight-o;null!==n&&(f=h*n,"border-box"===c&&(f=f+o+s),p=Math.max(f,p)),null!==a&&(d=h*a,"border-box"===c&&(d=d+o+s),l=p>d?"":"hidden",p=Math.min(d,p))}return{height:p,minHeight:f,maxHeight:d,overflowY:l,resize:"none"}}(s.textArea,!1,t,n);s.setState({textareaStyles:i,resizeStatus:a.RESIZING},(function(){cancelAnimationFrame(s.resizeFrameId),s.resizeFrameId=requestAnimationFrame((function(){s.setState({resizeStatus:a.RESIZED},(function(){s.resizeFrameId=requestAnimationFrame((function(){s.setState({resizeStatus:a.NONE}),s.fixFirefoxAutoScroll()}))}))}))}))}},s.renderTextArea=function(){var e=s.props,t=e.prefixCls,n=void 0===t?"rc-textarea":t,r=e.autoSize,o=e.onResize,c=e.className,u=e.disabled,v=s.state,b=v.textareaStyles,g=v.resizeStatus,y=Object(h.a)(s.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),O=m()(n,c,Object(d.a)({},"".concat(n,"-disabled"),u));"value"in y&&(y.value=y.value||"");var k=Object(f.a)(Object(f.a)(Object(f.a)({},s.props.style),b),g===a.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return l.createElement(p.a,{onResize:s.handleResize,disabled:!(r||o)},l.createElement("textarea",Object(i.a)({},y,{className:O,style:k,ref:s.saveTextArea})))},s.state={textareaStyles:{},resizeStatus:a.NONE},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.resizeTextarea()}},{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var e=this.textArea.selectionStart,t=this.textArea.selectionEnd;this.textArea.setSelectionRange(e,t)}}catch(n){}}},{key:"render",value:function(){return this.renderTextArea()}}]),n}(l.Component),w=k,x=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(o.a)(this,n),(r=t.call(this,e)).resizableTextArea=void 0,r.focus=function(){r.resizableTextArea.textArea.focus()},r.saveTextArea=function(e){r.resizableTextArea=e},r.handleChange=function(e){var t=r.props.onChange;r.setValue(e.target.value,(function(){r.resizableTextArea.resizeTextarea()})),t&&t(e)},r.handleKeyDown=function(e){var t=r.props,n=t.onPressEnter,a=t.onKeyDown;13===e.keyCode&&n&&n(e),a&&a(e)};var a="undefined"===typeof e.value||null===e.value?e.defaultValue:e.value;return r.state={value:a},r}return Object(s.a)(n,[{key:"setValue",value:function(e,t){"value"in this.props||this.setState({value:e},t)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return l.createElement(w,Object(i.a)({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}]),n}(l.Component);t.a=x},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="QuestionCircleOutlined";t.a=a.forwardRef(s)},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="PlusOutlined";t.a=a.forwardRef(s)},,function(e,t,n){"use strict";var r=n(307),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,c=60112;t.Suspense=60113;var u=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;a=f("react.element"),i=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),c=f("react.forward_ref"),t.Suspense=f("react.suspense"),u=f("react.memo"),l=f("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function b(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=m.prototype;var y=g.prototype=new b;y.constructor=g,r(y,m.prototype),y.isPureReactComponent=!0;var O={current:null},k=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&!w.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:O.current}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var S=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case a:case i:c=!0}}if(c)return o=o(c=e),e=""===r?"."+_(c,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(j(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=r+_(s=e[u],u);c+=C(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=C(s=s.value,t,n,l=r+_(s,u++),o);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function E(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function I(){var e=T.current;if(null===e)throw Error(p(321));return e}var A={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:O,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:E,forEach:function(e,t,n){E(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!j(e))throw Error(p(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var i=r({},e.props),o=e.key,s=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,c=O.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)k.call(t,l)&&!w.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){u=Array(l);for(var f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return I().useCallback(e,t)},t.useContext=function(e,t){return I().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return I().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return I().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return I().useLayoutEffect(e,t)},t.useMemo=function(e,t){return I().useMemo(e,t)},t.useReducer=function(e,t,n){return I().useReducer(e,t,n)},t.useRef=function(e){return I().useRef(e)},t.useState=function(e){return I().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";var r=n(1),a=n(307),i=n(427);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,c={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(c[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},v={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){b[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];b[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){b[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){b[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){b[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){b[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){b[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){b[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){b[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function O(e,t,n,r){var a=b.hasOwnProperty(t)?b[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!p.call(v,e)||!p.call(h,e)&&(d.test(e)?v[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);b[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);b[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);b[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){b[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),b.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){b[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,x=60106,j=60107,S=60108,_=60114,C=60109,E=60110,N=60112,T=60113,I=60120,A=60115,M=60116,P=60121,R=60128,D=60129,F=60130,L=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;w=z("react.element"),x=z("react.portal"),j=z("react.fragment"),S=z("react.strict_mode"),_=z("react.profiler"),C=z("react.provider"),E=z("react.context"),N=z("react.forward_ref"),T=z("react.suspense"),I=z("react.suspense_list"),A=z("react.memo"),M=z("react.lazy"),P=z("react.block"),z("react.scope"),R=z("react.opaque.id"),D=z("react.debug_trace_mode"),F=z("react.offscreen"),L=z("react.legacy_hidden")}var q,V="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function U(e){if(void 0===q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var W=!1;function G(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s])return"\n"+a[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function H(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case x:return"Portal";case _:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case A:return K(e.type);case P:return K(e._render);case M:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=X(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&O(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=X(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+X(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:X(n)}}function ue(e,t){var n=X(t.value),r=X(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,be=(me=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oe=["Webkit","ms","Moz","O"];function ke(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ke(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ye).forEach((function(e){Oe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var xe=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function je(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ee=null,Ne=null;function Te(e){if(e=ra(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=ia(t),Ce(e.stateNode,e.type,t))}}function Ie(e){Ee?Ne?Ne.push(e):Ne=[e]:Ee=e}function Ae(){if(Ee){var e=Ee,t=Ne;if(Ne=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Me(e,t){return e(t)}function Pe(e,t,n,r,a){return e(t,n,r,a)}function Re(){}var De=Me,Fe=!1,Le=!1;function ze(){null===Ee&&null===Ne||(Re(),Ae())}function qe(e,t){var n=e.stateNode;if(null===n)return null;var r=ia(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(me){Ve=!1}function Ue(e,t,n,r,a,i,o,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var We=!1,Ge=null,He=!1,Ke=null,Xe={onError:function(e){We=!0,Ge=e}};function Qe(e,t,n,r,a,i,o,s,c){We=!1,Ge=null,Ue.apply(Xe,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(o(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Je(a),e;if(i===r)return Je(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,c=a.child;c;){if(c===n){s=!0,n=a,r=i;break}if(c===r){s=!0,r=a,n=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===n){s=!0,n=i,r=a;break}if(c===r){s=!0,r=i,n=a;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,it=!1,ot=[],st=null,ct=null,ut=null,lt=new Map,ft=new Map,dt=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ct=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=ht(t,n,r,a,i),null!==t&&(null!==(t=ra(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function bt(e){var t=na(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ze(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ra(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){gt(e)&&n.delete(t)}function Ot(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ra(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),null!==ut&&gt(ut)&&(ut=null),lt.forEach(yt),ft.forEach(yt)}function kt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ot)))}function wt(e){function t(t){return kt(t,e)}if(0<ot.length){kt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&kt(st,e),null!==ct&&kt(ct,e),null!==ut&&kt(ut,e),lt.forEach(t),ft.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)bt(n),null===n.blockedOn&&dt.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jt={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},St={},_t={};function Ct(e){if(St[e])return St[e];if(!jt[e])return e;var t,n=jt[e];for(t in n)if(n.hasOwnProperty(t)&&t in _t)return St[e]=n[t];return e}f&&(_t=document.createElement("div").style,"AnimationEvent"in window||(delete jt.animationend.animation,delete jt.animationiteration.animation,delete jt.animationstart.animation),"TransitionEvent"in window||delete jt.transitionend.transition);var Et=Ct("animationend"),Nt=Ct("animationiteration"),Tt=Ct("animationstart"),It=Ct("transitionend"),At=new Map,Mt=new Map,Pt=["abort","abort",Et,"animationEnd",Nt,"animationIteration",Tt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",It,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Mt.set(r,t),At.set(r,a),u(a,[r])}}(0,i.unstable_now)();var Dt=8;function Ft(e){if(0!==(1&e))return Dt=15,1;if(0!==(2&e))return Dt=14,2;if(0!==(4&e))return Dt=13,4;var t=24&e;return 0!==t?(Dt=12,t):0!==(32&e)?(Dt=11,32):0!==(t=192&e)?(Dt=10,t):0!==(256&e)?(Dt=9,256):0!==(t=3584&e)?(Dt=8,t):0!==(4096&e)?(Dt=7,4096):0!==(t=4186112&e)?(Dt=6,t):0!==(t=62914560&e)?(Dt=5,t):67108864&e?(Dt=4,67108864):0!==(134217728&e)?(Dt=3,134217728):0!==(t=805306368&e)?(Dt=2,t):0!==(1073741824&e)?(Dt=1,1073741824):(Dt=8,e)}function Lt(e,t){var n=e.pendingLanes;if(0===n)return Dt=0;var r=0,a=0,i=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==i)r=i,a=Dt=15;else if(0!==(i=134217727&n)){var c=i&~o;0!==c?(r=Ft(c),a=Dt):0!==(s&=i)&&(r=Ft(s),a=Dt)}else 0!==(i=n&~o)?(r=Ft(i),a=Dt):0!==s&&(r=Ft(s),a=Dt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),a<=Dt)return t;Dt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Wt(t)),r|=e[n],t&=~a;return r}function zt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function qt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?qt(10,t):e;case 10:return 0===(e=Vt(192&~t))?qt(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ut(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Ht|0)|0},Gt=Math.log,Ht=Math.LN2;var Kt=i.unstable_UserBlockingPriority,Xt=i.unstable_runWithPriority,Qt=!0;function Yt(e,t,n,r){Fe||Re();var a=Jt,i=Fe;Fe=!0;try{Pe(a,e,t,n,r)}finally{(Fe=i)||ze()}}function Zt(e,t,n,r){Xt(Kt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var a;if(Qt)if((a=0===(4&t))&&0<ot.length&&-1<pt.indexOf(e))e=ht(null,e,t,n,r),ot.push(e);else{var i=$t(e,t,n,r);if(null===i)a&&vt(e,r);else{if(a){if(-1<pt.indexOf(e))return e=ht(i,e,t,n,r),void ot.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return st=mt(st,e,t,n,r,a),!0;case"dragenter":return ct=mt(ct,e,t,n,r,a),!0;case"mouseover":return ut=mt(ut,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return lt.set(i,mt(lt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ft.set(i,mt(ft.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;vt(e,r)}Rr(e,t,r,null,n)}}}function $t(e,t,n,r){var a=_e(r);if(null!==(a=na(a))){var i=Ye(a);if(null===i)a=null;else{var o=i.tag;if(13===o){if(null!==(a=Ze(i)))return a;a=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Rr(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function cn(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var un,ln,fn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=cn(dn),hn=a({},dn,{view:0,detail:0}),vn=cn(hn),mn=a({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(un=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=un=0,fn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),bn=cn(mn),gn=cn(a({},mn,{dataTransfer:0})),yn=cn(a({},hn,{relatedTarget:0})),On=cn(a({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),kn=a({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=cn(kn),xn=cn(a({},dn,{data:0})),jn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return Cn}var Nn=a({},hn,{key:function(e){if(e.key){var t=jn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=cn(Nn),In=cn(a({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=cn(a({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Mn=cn(a({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=a({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=cn(Pn),Dn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Ln=null;f&&"documentMode"in document&&(Ln=document.documentMode);var zn=f&&"TextEvent"in window&&!Ln,qn=f&&(!Fn||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Xn(e,t,n,r){Ie(r),0<(t=Fr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Zn(e){Nr(e,0)}function Jn(e){if(Z(aa(e)))return e}function $n(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ar(){Qn&&(Qn.detachEvent("onpropertychange",ir),Yn=Qn=null)}function ir(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Xn(t,Yn,e,_e(e)),e=Zn,Fe)e(t);else{Fe=!0;try{Me(e,t)}finally{Fe=!1,ze()}}}}function or(e,t,n){"focusin"===e?(ar(),Yn=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&ar()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function cr(e,t){if("click"===e)return Jn(t)}function ur(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function dr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,yr=null,Or=null,kr=null,wr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==yr||yr!==J(r)||("selectionStart"in(r=yr)&&br(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},kr&&dr(kr,r)||(kr=r,0<(r=Fr(Or,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Pt,2);for(var jr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<jr.length;Sr++)Mt.set(jr[Sr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Er(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,c,u){if(Qe.apply(this,arguments),We){if(!We)throw Error(o(198));var l=Ge;We=!1,Ge=null,He||(He=!0,Ke=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==i&&a.isPropagationStopped())break e;Er(a,s,u),i=c}else for(o=0;o<r.length;o++){if(c=(s=r[o]).instance,u=s.currentTarget,s=s.listener,c!==i&&a.isPropagationStopped())break e;Er(a,s,u),i=c}}}if(He)throw e=Ke,He=!1,Ke=null,e}function Tr(e,t){var n=oa(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Ir="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Ir]||(e[Ir]=!0,s.forEach((function(t){Cr.has(t)||Mr(t,!1,e,null),Mr(t,!0,e,null)})))}function Mr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;a|=2,i=r}var o=oa(i),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(a|=4),Pr(i,e,a,t),o.add(s))}function Pr(e,t,n,r){var a=Mt.get(t);switch(void 0===a?2:a){case 0:a=Yt;break;case 1:a=Zt;break;default:a=Jt}n=a.bind(null,t,n,e),a=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Rr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===a||8===c.nodeType&&c.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=na(s)))return;if(5===(c=o.tag)||6===c){r=i=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Le)return e(t,n);Le=!0;try{De(e,t,n)}finally{Le=!1,ze()}}((function(){var r=i,a=_e(n),o=[];e:{var s=At.get(e);if(void 0!==s){var c=pn,u=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":c=Tn;break;case"focusin":u="focus",c=yn;break;case"focusout":u="blur",c=yn;break;case"beforeblur":case"afterblur":c=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=An;break;case Et:case Nt:case Tt:c=On;break;case It:c=Mn;break;case"scroll":c=vn;break;case"wheel":c=Rn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=In}var l=0!==(4&t),f=!l&&"scroll"===e,d=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==d&&(null!=(v=qe(h,d))&&l.push(Dr(h,v,p)))),f)break;h=h.return}0<l.length&&(s=new c(s,u,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!na(u)&&!u[ea])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?na(u):null)&&(u!==(f=Ye(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=bn,v="onMouseLeave",d="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",d="onPointerEnter",h="pointer"),f=null==c?s:aa(c),p=null==u?s:aa(u),(s=new l(v,h+"leave",c,n,a)).target=f,s.relatedTarget=p,v=null,na(a)===r&&((l=new l(d,h+"enter",u,n,a)).target=p,l.relatedTarget=f,v=l),f=v,c&&u)e:{for(d=u,h=0,p=l=c;p;p=Lr(p))h++;for(p=0,v=d;v;v=Lr(v))p++;for(;0<h-p;)l=Lr(l),h--;for(;0<p-h;)d=Lr(d),p--;for(;h--;){if(l===d||null!==d&&l===d.alternate)break e;l=Lr(l),d=Lr(d)}l=null}else l=null;null!==c&&zr(o,s,c,l,!1),null!==u&&null!==f&&zr(o,f,u,l,!0)}if("select"===(c=(s=r?aa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var m=$n;else if(Kn(s))if(er)m=ur;else{m=sr;var b=or}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=cr);switch(m&&(m=m(e,r))?Xn(o,m,n,a):(b&&b(e,s,r),"focusout"===e&&(b=s._wrapperState)&&b.controlled&&"number"===s.type&&ae(s,"number",s.value)),b=r?aa(r):window,e){case"focusin":(Kn(b)||"true"===b.contentEditable)&&(yr=b,Or=r,kr=null);break;case"focusout":kr=Or=yr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,xr(o,n,a);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,a)}var g;if(Fn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Gn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(qn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Gn&&(g=rn()):(tn="value"in(en=a)?en.value:en.textContent,Gn=!0)),0<(b=Fr(r,y)).length&&(y=new xn(y,e,null,n,a),o.push({event:y,listeners:b}),g?y.data=g:null!==(g=Wn(n))&&(y.data=g))),(g=zn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Vn);case"textInput":return(e=t.data)===Vn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Fn&&Un(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=g))}Nr(o,t)}))}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=qe(e,n))&&r.unshift(Dr(e,i,a)),null!=(i=qe(e,t))&&r.push(Dr(e,i,a))),e=e.return}return r}function Lr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function zr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==u&&(s=u,a?null!=(c=qe(n,i))&&o.unshift(Dr(n,c,s)):a||null!=(c=qe(n,i))&&o.push(Dr(n,c,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function qr(){}var Vr=null,Br=null;function Ur(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Kr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Xr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Zr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Zr,$r="__reactProps$"+Zr,ea="__reactContainer$"+Zr,ta="__reactEvents$"+Zr;function na(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ea]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Jr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ra(e){return!(e=e[Jr]||e[ea])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function aa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ia(e){return e[$r]||null}function oa(e){var t=e[ta];return void 0===t&&(t=e[ta]=new Set),t}var sa=[],ca=-1;function ua(e){return{current:e}}function la(e){0>ca||(e.current=sa[ca],sa[ca]=null,ca--)}function fa(e,t){ca++,sa[ca]=e.current,e.current=t}var da={},pa=ua(da),ha=ua(!1),va=da;function ma(e,t){var n=e.type.contextTypes;if(!n)return da;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ba(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ga(){la(ha),la(pa)}function ya(e,t,n){if(pa.current!==da)throw Error(o(168));fa(pa,t),fa(ha,n)}function Oa(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,K(t)||"Unknown",i));return a({},n,r)}function ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||da,va=pa.current,fa(pa,e),fa(ha,ha.current),!0}function wa(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Oa(e,t,va),r.__reactInternalMemoizedMergedChildContext=e,la(ha),la(pa),fa(pa,e)):la(ha),fa(ha,n)}var xa=null,ja=null,Sa=i.unstable_runWithPriority,_a=i.unstable_scheduleCallback,Ca=i.unstable_cancelCallback,Ea=i.unstable_shouldYield,Na=i.unstable_requestPaint,Ta=i.unstable_now,Ia=i.unstable_getCurrentPriorityLevel,Aa=i.unstable_ImmediatePriority,Ma=i.unstable_UserBlockingPriority,Pa=i.unstable_NormalPriority,Ra=i.unstable_LowPriority,Da=i.unstable_IdlePriority,Fa={},La=void 0!==Na?Na:function(){},za=null,qa=null,Va=!1,Ba=Ta(),Ua=1e4>Ba?Ta:function(){return Ta()-Ba};function Wa(){switch(Ia()){case Aa:return 99;case Ma:return 98;case Pa:return 97;case Ra:return 96;case Da:return 95;default:throw Error(o(332))}}function Ga(e){switch(e){case 99:return Aa;case 98:return Ma;case 97:return Pa;case 96:return Ra;case 95:return Da;default:throw Error(o(332))}}function Ha(e,t){return e=Ga(e),Sa(e,t)}function Ka(e,t,n){return e=Ga(e),_a(e,t,n)}function Xa(){if(null!==qa){var e=qa;qa=null,Ca(e)}Qa()}function Qa(){if(!Va&&null!==za){Va=!0;var e=0;try{var t=za;Ha(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),za=null}catch(n){throw null!==za&&(za=za.slice(e+1)),_a(Aa,Xa),n}finally{Va=!1}}}var Ya=k.ReactCurrentBatchConfig;function Za(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ja=ua(null),$a=null,ei=null,ti=null;function ni(){ti=ei=$a=null}function ri(e){var t=Ja.current;la(Ja),e.type._context._currentValue=t}function ai(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ii(e,t){$a=e,ti=ei=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oi(e,t){if(ti!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ti=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ei){if(null===$a)throw Error(o(308));ei=t,$a.dependencies={lanes:0,firstContext:t,responders:null}}else ei=ei.next=t;return e._currentValue}var si=!1;function ci(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ui(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fi(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function di(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pi(e,t,n,r){var i=e.updateQueue;si=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,c=i.shared.pending;if(null!==c){i.shared.pending=null;var u=c,l=u.next;u.next=null,null===s?o=l:s.next=l,s=u;var f=e.alternate;if(null!==f){var d=(f=f.updateQueue).lastBaseUpdate;d!==s&&(null===d?f.firstBaseUpdate=l:d.next=l,f.lastBaseUpdate=u)}}if(null!==o){for(d=i.baseState,s=0,f=l=u=null;;){c=o.lane;var p=o.eventTime;if((r&c)===c){null!==f&&(f=f.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,v=o;switch(c=t,p=n,v.tag){case 1:if("function"===typeof(h=v.payload)){d=h.call(p,d,c);break e}d=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null===(c="function"===typeof(h=v.payload)?h.call(p,d,c):h)||void 0===c)break e;d=a({},d,c);break e;case 2:si=!0}}null!==o.callback&&(e.flags|=32,null===(c=i.effects)?i.effects=[o]:c.push(o))}else p={eventTime:p,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=p,u=d):f=f.next=p,s|=c;if(null===(o=o.next)){if(null===(c=i.shared.pending))break;o=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}null===f&&(u=d),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=f,Vs|=s,e.lanes=s,e.memoizedState=d}}function hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var vi=(new r.Component).refs;function mi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var bi={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dc(),a=pc(e),i=li(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),fi(e,i),hc(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dc(),a=pc(e),i=li(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),fi(e,i),hc(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dc(),r=pc(e),a=li(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),fi(e,a),hc(e,r,n)}};function gi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(a,i))}function yi(e,t,n){var r=!1,a=da,i=t.contextType;return"object"===typeof i&&null!==i?i=oi(i):(a=ba(t)?va:pa.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?ma(e,a):da),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=bi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Oi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bi.enqueueReplaceState(t,t.state,null)}function ki(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=vi,ci(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=oi(i):(i=ba(t)?va:pa.current,a.context=ma(e,i)),pi(e,n,a,r),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(mi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&bi.enqueueReplaceState(a,a.state,null),pi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var wi=Array.isArray;function xi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===vi&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ji(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Si(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Hc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Yc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=xi(e,t,n),r.return=e,r):((r=Kc(n.type,n.key,n.props,null,e.mode,r)).ref=xi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Zc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Xc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Kc(t.type,t.key,t.props,null,e.mode,n)).ref=xi(e,null,t),n.return=e,n;case x:return(t=Zc(t,e.mode,n)).return=e,t}if(wi(t)||B(t))return(t=Xc(t,e.mode,n,null)).return=e,t;ji(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?n.type===j?f(e,t,n.props.children,r,a):u(e,t,n,r):null;case x:return n.key===a?l(e,t,n,r):null}if(wi(n)||B(n))return null!==a?null:f(e,t,n,r,null);ji(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===j?f(t,e,r.props.children,a,r.key):u(t,e,r,a);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(wi(r)||B(r))return f(t,e=e.get(n)||null,r,a,null);ji(t,r)}return null}function v(a,o,s,c){for(var u=null,l=null,f=o,v=o=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var b=p(a,f,s[v],c);if(null===b){null===f&&(f=m);break}e&&f&&null===b.alternate&&t(a,f),o=i(b,o,v),null===l?u=b:l.sibling=b,l=b,f=m}if(v===s.length)return n(a,f),u;if(null===f){for(;v<s.length;v++)null!==(f=d(a,s[v],c))&&(o=i(f,o,v),null===l?u=f:l.sibling=f,l=f);return u}for(f=r(a,f);v<s.length;v++)null!==(m=h(f,a,v,s[v],c))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=i(m,o,v),null===l?u=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(a,e)})),u}function m(a,s,c,u){var l=B(c);if("function"!==typeof l)throw Error(o(150));if(null==(c=l.call(c)))throw Error(o(151));for(var f=l=null,v=s,m=s=0,b=null,g=c.next();null!==v&&!g.done;m++,g=c.next()){v.index>m?(b=v,v=null):b=v.sibling;var y=p(a,v,g.value,u);if(null===y){null===v&&(v=b);break}e&&v&&null===y.alternate&&t(a,v),s=i(y,s,m),null===f?l=y:f.sibling=y,f=y,v=b}if(g.done)return n(a,v),l;if(null===v){for(;!g.done;m++,g=c.next())null!==(g=d(a,g.value,u))&&(s=i(g,s,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(a,v);!g.done;m++,g=c.next())null!==(g=h(v,a,m,g.value,u))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=i(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(a,e)})),l}return function(e,r,i,c){var u="object"===typeof i&&null!==i&&i.type===j&&null===i.key;u&&(i=i.props.children);var l="object"===typeof i&&null!==i;if(l)switch(i.$$typeof){case w:e:{for(l=i.key,u=r;null!==u;){if(u.key===l){if(7===u.tag){if(i.type===j){n(e,u.sibling),(r=a(u,i.props.children)).return=e,e=r;break e}}else if(u.elementType===i.type){n(e,u.sibling),(r=a(u,i.props)).ref=xi(e,u,i),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}i.type===j?((r=Xc(i.props.children,e.mode,c,i.key)).return=e,e=r):((c=Kc(i.type,i.key,i.props,null,e.mode,c)).ref=xi(e,r,i),c.return=e,e=c)}return s(e);case x:e:{for(u=i.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Zc(i,e.mode,c)).return=e,e=r}return s(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=Yc(i,e.mode,c)).return=e,e=r),s(e);if(wi(i))return v(e,r,i,c);if(B(i))return m(e,r,i,c);if(l&&ji(e,i),"undefined"===typeof i&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,K(e.type)||"Component"))}return n(e,r)}}var _i=Si(!0),Ci=Si(!1),Ei={},Ni=ua(Ei),Ti=ua(Ei),Ii=ua(Ei);function Ai(e){if(e===Ei)throw Error(o(174));return e}function Mi(e,t){switch(fa(Ii,t),fa(Ti,e),fa(Ni,Ei),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}la(Ni),fa(Ni,t)}function Pi(){la(Ni),la(Ti),la(Ii)}function Ri(e){Ai(Ii.current);var t=Ai(Ni.current),n=he(t,e.type);t!==n&&(fa(Ti,e),fa(Ni,n))}function Di(e){Ti.current===e&&(la(Ni),la(Ti))}var Fi=ua(0);function Li(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zi=null,qi=null,Vi=!1;function Bi(e,t){var n=Wc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ui(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wi(e){if(Vi){var t=qi;if(t){var n=t;if(!Ui(e,t)){if(!(t=Xr(n.nextSibling))||!Ui(e,t))return e.flags=-1025&e.flags|2,Vi=!1,void(zi=e);Bi(zi,n)}zi=e,qi=Xr(t.firstChild)}else e.flags=-1025&e.flags|2,Vi=!1,zi=e}}function Gi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;zi=e}function Hi(e){if(e!==zi)return!1;if(!Vi)return Gi(e),Vi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=qi;t;)Bi(e,t),t=Xr(t.nextSibling);if(Gi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){qi=Xr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}qi=null}}else qi=zi?Xr(e.stateNode.nextSibling):null;return!0}function Ki(){qi=zi=null,Vi=!1}var Xi=[];function Qi(){for(var e=0;e<Xi.length;e++)Xi[e]._workInProgressVersionPrimary=null;Xi.length=0}var Yi=k.ReactCurrentDispatcher,Zi=k.ReactCurrentBatchConfig,Ji=0,$i=null,eo=null,to=null,no=!1,ro=!1;function ao(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,a,i){if(Ji=i,$i=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yi.current=null===e||null===e.memoizedState?Mo:Po,e=n(r,a),ro){i=0;do{if(ro=!1,!(25>i))throw Error(o(301));i+=1,to=eo=null,t.updateQueue=null,Yi.current=Ro,e=n(r,a)}while(ro)}if(Yi.current=Ao,t=null!==eo&&null!==eo.next,Ji=0,to=eo=$i=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?$i.memoizedState=to=e:to=to.next=e,to}function co(){if(null===eo){var e=$i.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?$i.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?$i.memoizedState=to=e:to=to.next=e}return to}function uo(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=co(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var c=s=i=null,u=a;do{var l=u.lane;if((Ji&l)===l)null!==c&&(c=c.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var f={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(s=c=f,i=r):c=c.next=f,$i.lanes|=l,Vs|=l}u=u.next}while(null!==u&&u!==a);null===c?i=r:c.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=co(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);lr(i,t.memoizedState)||(Fo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function po(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Ji&e)===e)&&(t._workInProgressVersionPrimary=r,Xi.push(t))),e)return n(t._source);throw Xi.push(t),Error(o(350))}function ho(e,t,n,r){var a=Ms;if(null===a)throw Error(o(349));var i=t._getVersion,s=i(t._source),c=Yi.current,u=c.useState((function(){return po(a,t,n)})),l=u[1],f=u[0];u=to;var d=e.memoizedState,p=d.refs,h=p.getSnapshot,v=d.source;d=d.subscribe;var m=$i;return e.memoizedState={refs:p,source:t,subscribe:r},c.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var e=i(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=pc(m),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,o=e;0<o;){var c=31-Wt(o),u=1<<c;r[c]|=e,o&=~u}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=pc(m);a.mutableReadLanes|=r&a.pendingLanes}catch(i){n((function(){throw i}))}}))}),[t,r]),lr(h,n)&&lr(v,t)&&lr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:f}).dispatch=l=Io.bind(null,$i,e),u.queue=e,u.baseQueue=null,f=po(a,t,n),u.memoizedState=u.baseState=f),f}function vo(e,t,n){return ho(co(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:e}).dispatch=Io.bind(null,$i,e),[t.memoizedState,e]}function bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$i.updateQueue)?(t={lastEffect:null},$i.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function yo(){return co().memoizedState}function Oo(e,t,n,r){var a=so();$i.flags|=e,a.memoizedState=bo(1|t,n,void 0,void 0===r?null:r)}function ko(e,t,n,r){var a=co();r=void 0===r?null:r;var i=void 0;if(null!==eo){var o=eo.memoizedState;if(i=o.destroy,null!==r&&io(r,o.deps))return void bo(t,n,i,r)}$i.flags|=e,a.memoizedState=bo(1|t,n,i,r)}function wo(e,t){return Oo(516,4,e,t)}function xo(e,t){return ko(516,4,e,t)}function jo(e,t){return ko(4,2,e,t)}function So(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _o(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,2,So.bind(null,t,e),n)}function Co(){}function Eo(e,t){var n=co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function To(e,t){var n=Wa();Ha(98>n?98:n,(function(){e(!0)})),Ha(97<n?97:n,(function(){var n=Zi.transition;Zi.transition=1;try{e(!1),t()}finally{Zi.transition=n}}))}function Io(e,t,n){var r=dc(),a=pc(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===$i||null!==o&&o===$i)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,c=o(s,n);if(i.eagerReducer=o,i.eagerState=c,lr(c,s))return}catch(u){}hc(e,a,r)}}var Ao={readContext:oi,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useOpaqueIdentifier:ao,unstable_isNewReconciler:!1},Mo={readContext:oi,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oi,useEffect:wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,2,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Io.bind(null,$i,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:Co,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return wo((function(){var t=Zi.transition;Zi.transition=1;try{r(e)}finally{Zi.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=To.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ho(r,e,t,n)},useOpaqueIdentifier:function(){if(Vi){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&$i.mode)&&($i.flags|=516,bo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Po={readContext:oi,useCallback:Eo,useContext:oi,useEffect:xo,useImperativeHandle:_o,useLayoutEffect:jo,useMemo:No,useReducer:lo,useRef:yo,useState:function(){return lo(uo)},useDebugValue:Co,useDeferredValue:function(e){var t=lo(uo),n=t[0],r=t[1];return xo((function(){var t=Zi.transition;Zi.transition=1;try{r(e)}finally{Zi.transition=t}}),[e]),n},useTransition:function(){var e=lo(uo)[0];return[yo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(uo)[0]},unstable_isNewReconciler:!1},Ro={readContext:oi,useCallback:Eo,useContext:oi,useEffect:xo,useImperativeHandle:_o,useLayoutEffect:jo,useMemo:No,useReducer:fo,useRef:yo,useState:function(){return fo(uo)},useDebugValue:Co,useDeferredValue:function(e){var t=fo(uo),n=t[0],r=t[1];return xo((function(){var t=Zi.transition;Zi.transition=1;try{r(e)}finally{Zi.transition=t}}),[e]),n},useTransition:function(){var e=fo(uo)[0];return[yo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(uo)[0]},unstable_isNewReconciler:!1},Do=k.ReactCurrentOwner,Fo=!1;function Lo(e,t,n,r){t.child=null===e?Ci(t,null,n,r):_i(t,e.child,n,r)}function zo(e,t,n,r,a){n=n.render;var i=t.ref;return ii(t,a),r=oo(e,t,n,r,i,a),null===e||Fo?(t.flags|=1,Lo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function qo(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!==typeof o||Gc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Kc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,a,i))}return o=e.child,0===(a&i)&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:dr)(a,r)&&e.ref===t.ref)?is(e,t,i):(t.flags|=1,(e=Hc(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,a,i){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(i&a))return t.lanes=e.lanes,is(e,t,i);0!==(16384&e.flags)&&(Fo=!0)}return Wo(e,t,n,r,i)}function Bo(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wc(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wc(t,e),null;t.memoizedState={baseLanes:0},wc(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,wc(t,r);return Lo(e,t,a,n),t.child}function Uo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,a){var i=ba(n)?va:pa.current;return i=ma(t,i),ii(t,a),n=oo(e,t,n,r,i,a),null===e||Fo?(t.flags|=1,Lo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function Go(e,t,n,r,a){if(ba(n)){var i=!0;ka(t)}else i=!1;if(ii(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),yi(t,n,r),ki(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=oi(u):u=ma(t,u=ba(n)?va:pa.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||c!==u)&&Oi(t,o,r,u),si=!1;var d=t.memoizedState;o.state=d,pi(t,r,o,a),c=t.memoizedState,s!==r||d!==c||ha.current||si?("function"===typeof l&&(mi(t,n,l,r),c=t.memoizedState),(s=si||gi(t,n,s,r,d,c,u))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ui(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Za(t.type,s),o.props=u,f=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=oi(c):c=ma(t,c=ba(n)?va:pa.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||d!==c)&&Oi(t,o,r,c),si=!1,d=t.memoizedState,o.state=d,pi(t,r,o,a);var h=t.memoizedState;s!==f||d!==h||ha.current||si?("function"===typeof p&&(mi(t,n,p,r),h=t.memoizedState),(u=si||gi(t,n,u,r,d,h,c))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Ho(e,t,n,r,i,a)}function Ho(e,t,n,r,a,i){Uo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return a&&wa(t,n,!1),is(e,t,i);r=t.stateNode,Do.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,s,i)):Lo(e,t,s,i),t.memoizedState=r.state,a&&wa(t,n,!0),t.child}function Ko(e){var t=e.stateNode;t.pendingContext?ya(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ya(0,t.context,!1),Mi(e,t.containerInfo)}var Xo,Qo,Yo,Zo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,a=t.pendingProps,i=Fi.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),fa(Fi,1&i),null===e?(void 0!==a.fallback&&Wi(t),e=a.children,i=a.fallback,o?(e=$o(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Zo,e):"number"===typeof a.unstable_expectedLoadTime?(e=$o(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Zo,t.lanes=33554432,e):((n=Qc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(a=ts(e,t,a.children,a.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Zo,a):(n=es(e,t,a.children,n),t.memoizedState=null,n))}function $o(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Qc(t,a,0,null),n=Xc(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function es(e,t,n,r){var a=e.child;return e=a.sibling,n=Hc(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,a){var i=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&i)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hc(o,s),null!==e?r=Hc(e,r):(r=Xc(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ai(e.return,t)}function rs(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.lastEffect=i)}function as(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Lo(e,t,r.children,n),0!==(2&(r=Fi.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fa(Fi,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Li(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),rs(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Li(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}rs(t,!0,n,null,i,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function is(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Vi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ba(t.type)&&ga(),null;case 3:return Pi(),la(ha),la(pa),Qi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Hi(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Di(t);var i=Ai(Ii.current);if(n=t.type,null!==e&&null!=t.stateNode)Qo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ai(Ni.current),Hi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[$r]=s,n){case"dialog":Tr("cancel",r),Tr("close",r);break;case"iframe":case"object":case"embed":Tr("load",r);break;case"video":case"audio":for(e=0;e<_r.length;e++)Tr(_r[e],r);break;case"source":Tr("error",r);break;case"img":case"image":case"link":Tr("error",r),Tr("load",r);break;case"details":Tr("toggle",r);break;case"input":ee(r,s),Tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Tr("invalid",r);break;case"textarea":ce(r,s),Tr("invalid",r)}for(var u in je(n,s),e=null,s)s.hasOwnProperty(u)&&(i=s[u],"children"===u?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):c.hasOwnProperty(u)&&null!=i&&"onScroll"===u&&Tr("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=qr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===i.nodeType?i:i.ownerDocument,e===fe&&(e=pe(n)),e===fe?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Jr]=t,e[$r]=r,Xo(e,t),t.stateNode=e,u=Se(n,r),n){case"dialog":Tr("cancel",e),Tr("close",e),i=r;break;case"iframe":case"object":case"embed":Tr("load",e),i=r;break;case"video":case"audio":for(i=0;i<_r.length;i++)Tr(_r[i],e);i=r;break;case"source":Tr("error",e),i=r;break;case"img":case"image":case"link":Tr("error",e),Tr("load",e),i=r;break;case"details":Tr("toggle",e),i=r;break;case"input":ee(e,r),i=$(e,r),Tr("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Tr("invalid",e);break;case"textarea":ce(e,r),i=se(e,r),Tr("invalid",e);break;default:i=r}je(n,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?we(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&be(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(c.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Tr("scroll",e):null!=f&&O(e,s,f,u))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+X(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=qr)}Ur(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ai(Ii.current),Ai(Ni.current),Hi(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return la(Fi),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Hi(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fi.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===Ms||0===(134217727&Vs)&&0===(134217727&Bs)||gc(Ms,Rs))),(r||n)&&(t.flags|=4),null);case 4:return Pi(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return ri(t),null;case 19:if(la(Fi),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(u=r.rendering))if(s)os(r,!1);else{if(0!==Ls||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Li(e))){for(t.flags|=64,os(r,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fa(Fi,1&Fi.current|2),t.child}e=e.sibling}null!==r.tail&&Ua()>Hs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Li(u))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Vi)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ua()-r.renderingStartTime>Hs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ua(),n.sibling=null,t=Fi.current,fa(Fi,s?1&t|2:1&t),n):null;case 23:case 24:return xc(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function cs(e){switch(e.tag){case 1:ba(e.type)&&ga();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Pi(),la(ha),la(pa),Qi(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Di(e),null;case 13:return la(Fi),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return la(Fi),null;case 4:return Pi(),null;case 10:return ri(e),null;case 23:case 24:return xc(),null;default:return null}}function us(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Xo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ai(Ni.current);var o,s=null;switch(n){case"input":i=$(e,i),r=$(e,r),s=[];break;case"option":i=ie(e,i),r=ie(e,r),s=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":i=se(e,i),r=se(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=qr)}for(f in je(n,r),n=null,i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&null!=i[f])if("style"===f){var u=i[f];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(c.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(u=null!=i?i[f]:void 0,r.hasOwnProperty(f)&&l!==u&&(null!=l||null!=u))if("style"===f)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(c.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Tr("scroll",e),s||u===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===R?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,Zs=r),ls(0,t)},n}function ps(e,t,n){(n=li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return ls(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){qc(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Za(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Kr(t.stateNode.containerInfo))}throw Error(o(163))}function bs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Fc(n,e),Dc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Za(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&hi(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}hi(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Ur(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=ke("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ys(e,t){if(ja&&"function"===typeof ja.onCommitFiberUnmount)try{ja.onCommitFiberUnmount(xa,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Fc(t,n);else{r=t;try{a()}catch(i){qc(r,i)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){qc(t,i)}break;case 5:vs(t);break;case 4:Ss(e,t)}}function Os(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ks(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(ks(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ks(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xs(e,n,t):js(e,n,t)}function xs(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=qr));else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function js(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(js(e,t,n),e=e.sibling;null!==e;)js(e,t,n),e=e.sibling}function Ss(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(o(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var s=e,c=a,u=c;;)if(ys(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===c)break e;for(;null===u.sibling;){if(null===u.return||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(s=n,c=a.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(ys(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function _s(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,a),t=Se(e,r),a=0;a<i.length;a+=2){var s=i[a],c=i[a+1];"style"===s?we(n,c):"dangerouslySetInnerHTML"===s?be(n,c):"children"===s?ge(n,c):O(n,s,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?oe(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gs=Ua(),gs(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hs),t.forEach((function(t){var r=Bc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Es(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,Ts=k.ReactCurrentDispatcher,Is=k.ReactCurrentOwner,As=0,Ms=null,Ps=null,Rs=0,Ds=0,Fs=ua(0),Ls=0,zs=null,qs=0,Vs=0,Bs=0,Us=0,Ws=null,Gs=0,Hs=1/0;function Ks(){Hs=Ua()+500}var Xs,Qs=null,Ys=!1,Zs=null,Js=null,$s=!1,ec=null,tc=90,nc=[],rc=[],ac=null,ic=0,oc=null,sc=-1,cc=0,uc=0,lc=null,fc=!1;function dc(){return 0!==(48&As)?Ua():-1!==sc?sc:sc=Ua()}function pc(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wa()?1:2;if(0===cc&&(cc=qs),0!==Ya.transition){0!==uc&&(uc=null!==Ws?Ws.pendingLanes:0),e=cc;var t=4186112&~uc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wa(),0!==(4&As)&&98===e?e=qt(12,cc):e=qt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),cc),e}function hc(e,t,n){if(50<ic)throw ic=0,oc=null,Error(o(185));if(null===(e=vc(e,t)))return null;Ut(e,t,n),e===Ms&&(Bs|=t,4===Ls&&gc(e,Rs));var r=Wa();1===t?0!==(8&As)&&0===(48&As)?yc(e):(mc(e,n),0===As&&(Ks(),Xa())):(0===(4&As)||98!==r&&99!==r||(null===ac?ac=new Set([e]):ac.add(e)),mc(e,n)),Ws=e}function vc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mc(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var c=31-Wt(s),u=1<<c,l=i[c];if(-1===l){if(0===(u&r)||0!==(u&a)){l=t,Ft(u);var f=Dt;i[c]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);s&=~u}if(r=Lt(e,e===Ms?Rs:0),t=Dt,0===r)null!==n&&(n!==Fa&&Ca(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fa&&Ca(n)}15===t?(n=yc.bind(null,e),null===za?(za=[n],qa=_a(Aa,Qa)):za.push(n),n=Fa):14===t?n=Ka(99,yc.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Ka(n,bc.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function bc(e){if(sc=-1,uc=cc=0,0!==(48&As))throw Error(o(327));var t=e.callbackNode;if(Rc()&&e.callbackNode!==t)return null;var n=Lt(e,e===Ms?Rs:0);if(0===n)return null;var r=n,a=As;As|=16;var i=_c();for(Ms===e&&Rs===r||(Ks(),jc(e,r));;)try{Nc();break}catch(c){Sc(e,c)}if(ni(),Ts.current=i,As=a,null!==Ps?r=0:(Ms=null,Rs=0,r=Ls),0!==(qs&Bs))jc(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(n=zt(e))&&(r=Cc(e,n))),1===r)throw t=zs,jc(e,0),gc(e,n),mc(e,Ua()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ac(e);break;case 3:if(gc(e,n),(62914560&n)===n&&10<(r=Gs+500-Ua())){if(0!==Lt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){dc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Gr(Ac.bind(null,e),r);break}Ac(e);break;case 4:if(gc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var s=31-Wt(n);i=1<<s,(s=r[s])>a&&(a=s),n&=~i}if(n=a,10<(n=(120>(n=Ua()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Gr(Ac.bind(null,e),n);break}Ac(e);break;default:throw Error(o(329))}}return mc(e,Ua()),e.callbackNode===t?bc.bind(null,e):null}function gc(e,t){for(t&=~Us,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function yc(e){if(0!==(48&As))throw Error(o(327));if(Rc(),e===Ms&&0!==(e.expiredLanes&Rs)){var t=Rs,n=Cc(e,t);0!==(qs&Bs)&&(n=Cc(e,t=Lt(e,t)))}else n=Cc(e,t=Lt(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(t=zt(e))&&(n=Cc(e,t))),1===n)throw n=zs,jc(e,0),gc(e,t),mc(e,Ua()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ac(e),mc(e,Ua()),null}function Oc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Ks(),Xa())}}function kc(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Ks(),Xa())}}function wc(e,t){fa(Fs,Ds),Ds|=t,qs|=t}function xc(){Ds=Fs.current,la(Fs)}function jc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ga();break;case 3:Pi(),la(ha),la(pa),Qi();break;case 5:Di(r);break;case 4:Pi();break;case 13:case 19:la(Fi);break;case 10:ri(r);break;case 23:case 24:xc()}n=n.return}Ms=e,Ps=Hc(e.current,null),Rs=Ds=qs=t,Ls=0,zs=null,Us=Bs=Vs=0}function Sc(e,t){for(;;){var n=Ps;try{if(ni(),Yi.current=Ao,no){for(var r=$i.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}no=!1}if(Ji=0,to=eo=$i=null,ro=!1,Is.current=null,null===n||null===n.return){Ls=1,zs=t,Ps=null;break}e:{var i=e,o=n.return,s=n,c=t;if(t=Rs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Fi.current),d=o;do{var p;if(p=13===d.tag){var h=d.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var v=d.memoizedProps;p=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(p){var m=d.updateQueue;if(null===m){var b=new Set;b.add(u),d.updateQueue=b}else m.add(u);if(0===(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=li(-1,1);g.tag=2,fi(s,g)}s.lanes|=1;break e}c=void 0,s=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new fs,c=new Set,y.set(u,c)):void 0===(c=y.get(u))&&(c=new Set,y.set(u,c)),!c.has(s)){c.add(s);var O=Vc.bind(null,i,u,s);u.then(O,O)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),c=us(c,s),d=o;do{switch(d.tag){case 3:i=c,d.flags|=4096,t&=-t,d.lanes|=t,di(d,ds(0,i,t));break e;case 1:i=c;var k=d.type,w=d.stateNode;if(0===(64&d.flags)&&("function"===typeof k.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Js||!Js.has(w)))){d.flags|=4096,t&=-t,d.lanes|=t,di(d,ps(d,i,t));break e}}d=d.return}while(null!==d)}Ic(n)}catch(x){t=x,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function _c(){var e=Ts.current;return Ts.current=Ao,null===e?Ao:e}function Cc(e,t){var n=As;As|=16;var r=_c();for(Ms===e&&Rs===t||jc(e,t);;)try{Ec();break}catch(a){Sc(e,a)}if(ni(),As=n,Ts.current=r,null!==Ps)throw Error(o(261));return Ms=null,Rs=0,Ls}function Ec(){for(;null!==Ps;)Tc(Ps)}function Nc(){for(;null!==Ps&&!Ea();)Tc(Ps)}function Tc(e){var t=Xs(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?Ic(e):Ps=t,Is.current=null}function Ic(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ds)))return void(Ps=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ds)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=cs(t)))return n.flags&=2047,void(Ps=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Ls&&(Ls=5)}function Ac(e){var t=Wa();return Ha(99,Mc.bind(null,e,t)),null}function Mc(e,t){do{Rc()}while(null!==ec);if(0!==(48&As))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,c=e.expirationTimes;0<i;){var u=31-Wt(i),l=1<<u;a[u]=0,s[u]=-1,c[u]=-1,i&=~l}if(null!==ac&&0===(24&r)&&ac.has(e)&&ac.delete(e),e===Ms&&(Ps=Ms=null,Rs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=As,As|=32,Is.current=null,Vr=Qt,br(s=mr())){if("selectionStart"in s)c={start:s.selectionStart,end:s.selectionEnd};else e:if(c=(c=s.ownerDocument)&&c.defaultView||window,(l=c.getSelection&&c.getSelection())&&0!==l.rangeCount){c=l.anchorNode,i=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{c.nodeType,u.nodeType}catch(_){c=null;break e}var f=0,d=-1,p=-1,h=0,v=0,m=s,b=null;t:for(;;){for(var g;m!==c||0!==i&&3!==m.nodeType||(d=f+i),m!==u||0!==l&&3!==m.nodeType||(p=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)b=m,m=g;for(;;){if(m===s)break t;if(b===c&&++h===i&&(d=f),b===u&&++v===l&&(p=f),null!==(g=m.nextSibling))break;b=(m=b).parentNode}m=g}c=-1===d||-1===p?null:{start:d,end:p}}else c=null;c=c||{start:0,end:0}}else c=null;Br={focusedElem:s,selectionRange:c},Qt=!1,lc=null,fc=!1,Qs=r;do{try{Pc()}catch(_){if(null===Qs)throw Error(o(330));qc(Qs,_),Qs=Qs.nextEffect}}while(null!==Qs);lc=null,Qs=r;do{try{for(s=e;null!==Qs;){var y=Qs.flags;if(16&y&&ge(Qs.stateNode,""),128&y){var O=Qs.alternate;if(null!==O){var k=O.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(1038&y){case 2:ws(Qs),Qs.flags&=-3;break;case 6:ws(Qs),Qs.flags&=-3,_s(Qs.alternate,Qs);break;case 1024:Qs.flags&=-1025;break;case 1028:Qs.flags&=-1025,_s(Qs.alternate,Qs);break;case 4:_s(Qs.alternate,Qs);break;case 8:Ss(s,c=Qs);var w=c.alternate;Os(c),null!==w&&Os(w)}Qs=Qs.nextEffect}}catch(_){if(null===Qs)throw Error(o(330));qc(Qs,_),Qs=Qs.nextEffect}}while(null!==Qs);if(k=Br,O=mr(),y=k.focusedElem,s=k.selectionRange,O!==y&&y&&y.ownerDocument&&vr(y.ownerDocument.documentElement,y)){null!==s&&br(y)&&(O=s.start,void 0===(k=s.end)&&(k=O),"selectionStart"in y?(y.selectionStart=O,y.selectionEnd=Math.min(k,y.value.length)):(k=(O=y.ownerDocument||document)&&O.defaultView||window).getSelection&&(k=k.getSelection(),c=y.textContent.length,w=Math.min(s.start,c),s=void 0===s.end?w:Math.min(s.end,c),!k.extend&&w>s&&(c=s,s=w,w=c),c=hr(y,w),i=hr(y,s),c&&i&&(1!==k.rangeCount||k.anchorNode!==c.node||k.anchorOffset!==c.offset||k.focusNode!==i.node||k.focusOffset!==i.offset)&&((O=O.createRange()).setStart(c.node,c.offset),k.removeAllRanges(),w>s?(k.addRange(O),k.extend(i.node,i.offset)):(O.setEnd(i.node,i.offset),k.addRange(O))))),O=[];for(k=y;k=k.parentNode;)1===k.nodeType&&O.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<O.length;y++)(k=O[y]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Qt=!!Vr,Br=Vr=null,e.current=n,Qs=r;do{try{for(y=e;null!==Qs;){var x=Qs.flags;if(36&x&&bs(y,Qs.alternate,Qs),128&x){O=void 0;var j=Qs.ref;if(null!==j){var S=Qs.stateNode;Qs.tag,O=S,"function"===typeof j?j(O):j.current=O}}Qs=Qs.nextEffect}}catch(_){if(null===Qs)throw Error(o(330));qc(Qs,_),Qs=Qs.nextEffect}}while(null!==Qs);Qs=null,La(),As=a}else e.current=n;if($s)$s=!1,ec=e,tc=t;else for(Qs=r;null!==Qs;)t=Qs.nextEffect,Qs.nextEffect=null,8&Qs.flags&&((x=Qs).sibling=null,x.stateNode=null),Qs=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===oc?ic++:(ic=0,oc=e):ic=0,n=n.stateNode,ja&&"function"===typeof ja.onCommitFiberRoot)try{ja.onCommitFiberRoot(xa,n,void 0,64===(64&n.current.flags))}catch(_){}if(mc(e,Ua()),Ys)throw Ys=!1,e=Zs,Zs=null,e;return 0!==(8&As)||Xa(),null}function Pc(){for(;null!==Qs;){var e=Qs.alternate;fc||null===lc||(0!==(8&Qs.flags)?et(Qs,lc)&&(fc=!0):13===Qs.tag&&Es(e,Qs)&&et(Qs,lc)&&(fc=!0));var t=Qs.flags;0!==(256&t)&&ms(e,Qs),0===(512&t)||$s||($s=!0,Ka(97,(function(){return Rc(),null}))),Qs=Qs.nextEffect}}function Rc(){if(90!==tc){var e=97<tc?97:tc;return tc=90,Ha(e,Lc)}return!1}function Dc(e,t){nc.push(t,e),$s||($s=!0,Ka(97,(function(){return Rc(),null})))}function Fc(e,t){rc.push(t,e),$s||($s=!0,Ka(97,(function(){return Rc(),null})))}function Lc(){if(null===ec)return!1;var e=ec;if(ec=null,0!==(48&As))throw Error(o(331));var t=As;As|=32;var n=rc;rc=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],s=a.destroy;if(a.destroy=void 0,"function"===typeof s)try{s()}catch(u){if(null===i)throw Error(o(330));qc(i,u)}}for(n=nc,nc=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var c=a.create;a.destroy=c()}catch(u){if(null===i)throw Error(o(330));qc(i,u)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return As=t,Xa(),!0}function zc(e,t,n){fi(e,t=ds(0,t=us(n,t),1)),t=dc(),null!==(e=vc(e,1))&&(Ut(e,1,t),mc(e,t))}function qc(e,t){if(3===e.tag)zc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){zc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var a=ps(n,e=us(t,e),1);if(fi(n,a),a=dc(),null!==(n=vc(n,1)))Ut(n,1,a),mc(n,a);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function Vc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=dc(),e.pingedLanes|=e.suspendedLanes&n,Ms===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(62914560&Rs)===Rs&&500>Ua()-Gs?jc(e,0):Us|=n),mc(e,t)}function Bc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wa()?1:2:(0===cc&&(cc=qs),0===(t=Vt(62914560&~cc))&&(t=4194304))),n=dc(),null!==(e=vc(e,t))&&(Ut(e,t,n),mc(e,n))}function Uc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wc(e,t,n,r){return new Uc(e,t,n,r)}function Gc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hc(e,t){var n=e.alternate;return null===n?((n=Wc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kc(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Gc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case j:return Xc(n.children,a,i,t);case D:s=8,a|=16;break;case S:s=8,a|=1;break;case _:return(e=Wc(12,n,t,8|a)).elementType=_,e.type=_,e.lanes=i,e;case T:return(e=Wc(13,n,t,a)).type=T,e.elementType=T,e.lanes=i,e;case I:return(e=Wc(19,n,t,a)).elementType=I,e.lanes=i,e;case F:return Qc(n,a,i,t);case L:return(e=Wc(24,n,t,a)).elementType=L,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case E:s=9;break e;case N:s=11;break e;case A:s=14;break e;case M:s=16,r=null;break e;case P:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Wc(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Xc(e,t,n,r){return(e=Wc(7,e,r,t)).lanes=n,e}function Qc(e,t,n,r){return(e=Wc(23,e,r,t)).elementType=F,e.lanes=n,e}function Yc(e,t,n){return(e=Wc(6,e,null,t)).lanes=n,e}function Zc(e,t,n){return(t=Wc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function $c(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function eu(e,t,n,r){var a=t.current,i=dc(),s=pc(a);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(ba(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(o(171))}if(1===n.tag){var u=n.type;if(ba(u)){n=Oa(n,u,c);break e}}n=c}else n=da;return null===t.context?t.context=n:t.pendingContext=n,(t=li(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fi(a,t),hc(a,s,i),s}function tu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ru(e,t){nu(e,t),(e=e.alternate)&&nu(e,t)}function au(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Jc(e,t,null!=n&&!0===n.hydrate),t=Wc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ci(t),e[ea]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ou(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i._internalRoot;if("function"===typeof a){var s=a;a=function(){var e=tu(o);s.call(e)}}eu(t,o,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new au(e,0,t?{hydrate:!0}:void 0)}(n,r),o=i._internalRoot,"function"===typeof a){var c=a;a=function(){var e=tu(o);c.call(e)}}kc((function(){eu(t,o,e,a)}))}return tu(o)}function su(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(o(200));return $c(e,t,null,n)}Xs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ha.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ko(t),Ki();break;case 5:Ri(t);break;case 1:ba(t.type)&&ka(t);break;case 4:Mi(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;fa(Ja,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(fa(Fi,1&Fi.current),null!==(t=is(e,t,n))?t.sibling:null);fa(Fi,1&Fi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return as(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),fa(Fi,Fi.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return is(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ma(t,pa.current),ii(t,n),a=oo(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ba(r)){var i=!0;ka(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ci(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&mi(t,r,s,e),a.updater=bi,t.stateNode=a,a._reactInternals=t,ki(t,r,e,n),t=Ho(null,t,r,!0,i,n)}else t.tag=0,Lo(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Gc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===A)return 14}return 2}(a),e=Za(a,e),i){case 0:t=Wo(null,t,a,e,n);break e;case 1:t=Go(null,t,a,e,n);break e;case 11:t=zo(null,t,a,e,n);break e;case 14:t=qo(null,t,a,Za(a.type,e),r,n);break e}throw Error(o(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Wo(e,t,r,a=t.elementType===r?a:Za(r,a),n);case 1:return r=t.type,a=t.pendingProps,Go(e,t,r,a=t.elementType===r?a:Za(r,a),n);case 3:if(Ko(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,ui(e,t),pi(t,r,null,n),(r=t.memoizedState.element)===a)Ki(),t=is(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(qi=Xr(t.stateNode.containerInfo.firstChild),zi=t,i=Vi=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],Xi.push(i);for(n=Ci(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Lo(e,t,r,n),Ki();t=t.child}return t;case 5:return Ri(t),null===e&&Wi(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,Wr(r,a)?s=null:null!==i&&Wr(r,i)&&(t.flags|=16),Uo(e,t),Lo(e,t,s,n),t.child;case 6:return null===e&&Wi(t),null;case 13:return Jo(e,t,n);case 4:return Mi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_i(t,null,r,n):Lo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,zo(e,t,r,a=t.elementType===r?a:Za(r,a),n);case 7:return Lo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Lo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value;var c=t.type._context;if(fa(Ja,c._currentValue),c._currentValue=i,null!==s)if(c=s.value,0===(i=lr(c,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,i):1073741823))){if(s.children===a.children&&!ha.current){t=is(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){s=c.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&i)){1===c.tag&&((l=li(-1,n&-n)).tag=2,fi(c,l)),c.lanes|=n,null!==(l=c.alternate)&&(l.lanes|=n),ai(c.return,n),u.lanes|=n;break}l=l.next}}else s=10===c.tag&&c.type===t.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===t){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}Lo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ii(t,n),r=r(a=oi(a,i.unstable_observedBits)),t.flags|=1,Lo(e,t,r,n),t.child;case 14:return i=Za(a=t.type,t.pendingProps),qo(e,t,a,i=Za(a.type,i),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Za(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ba(r)?(e=!0,ka(t)):e=!1,ii(t,n),yi(t,r,a),ki(t,r,a,n),Ho(null,t,r,!0,e,n);case 19:return as(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},au.prototype.render=function(e){eu(e,this._internalRoot,null,null)},au.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;eu(null,e,null,(function(){t[ea]=null}))},tt=function(e){13===e.tag&&(hc(e,4,dc()),ru(e,4))},nt=function(e){13===e.tag&&(hc(e,67108864,dc()),ru(e,67108864))},rt=function(e){if(13===e.tag){var t=dc(),n=pc(e);hc(e,n,t),ru(e,n)}},at=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ia(r);if(!a)throw Error(o(90));Z(r),ne(r,a)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Me=Oc,Pe=function(e,t,n,r,a){var i=As;As|=4;try{return Ha(98,e.bind(null,t,n,r,a))}finally{0===(As=i)&&(Ks(),Xa())}},Re=function(){0===(49&As)&&(function(){if(null!==ac){var e=ac;ac=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mc(e,Ua())}))}Xa()}(),Rc())},De=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Ks(),Xa())}};var cu={Events:[ra,aa,ia,Ie,Ae,Rc,{current:!1}]},uu={findFiberByHostInstance:na,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lu={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{xa=fu.inject(lu),ja=fu}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cu,t.createPortal=su,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!==(48&n))return e(t);As|=1;try{if(e)return Ha(99,e.bind(null,t))}finally{As=n,Xa()}},t.hydrate=function(e,t,n){if(!iu(t))throw Error(o(200));return ou(null,e,t,!0,n)},t.render=function(e,t,n){if(!iu(t))throw Error(o(200));return ou(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!iu(e))throw Error(o(40));return!!e._reactRootContainer&&(kc((function(){ou(null,null,e,!1,(function(){e._reactRootContainer=null,e[ea]=null}))})),!0)},t.unstable_batchedUpdates=Oc,t.unstable_createPortal=function(e,t){return su(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!iu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ou(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(428)},function(e,t,n){"use strict";var r,a,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,f=null,d=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(d,0))},a=function(e,t){f=setTimeout(e,t)},i=function(){clearTimeout(f)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,h=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,b=null,g=-1,y=5,O=0;t.unstable_shouldYield=function(){return t.unstable_now()>=O},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var k=new MessageChannel,w=k.port2;k.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();O=e+y;try{b(!0,e)?w.postMessage(null):(m=!1,b=null)}catch(n){throw w.postMessage(null),n}}else m=!1},r=function(e){b=e,m||(m=!0,w.postMessage(null))},a=function(e,n){g=p((function(){e(t.unstable_now())}),n)},i=function(){h(g),g=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<_(a,t)))break e;e[r]=t,e[n]=a,n=r}}function j(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],s=i+1,c=e[s];if(void 0!==o&&0>_(o,n))void 0!==c&&0>_(c,o)?(e[r]=c,e[s]=n,r=s):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==c&&0>_(c,n)))break e;e[r]=c,e[s]=n,r=s}}}return t}return null}function _(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],E=[],N=1,T=null,I=3,A=!1,M=!1,P=!1;function R(e){for(var t=j(E);null!==t;){if(null===t.callback)S(E);else{if(!(t.startTime<=e))break;S(E),t.sortIndex=t.expirationTime,x(C,t)}t=j(E)}}function D(e){if(P=!1,R(e),!M)if(null!==j(C))M=!0,r(F);else{var t=j(E);null!==t&&a(D,t.startTime-e)}}function F(e,n){M=!1,P&&(P=!1,i()),A=!0;var r=I;try{for(R(n),T=j(C);null!==T&&(!(T.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=T.callback;if("function"===typeof o){T.callback=null,I=T.priorityLevel;var s=o(T.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?T.callback=s:T===j(C)&&S(C),R(n)}else S(C);T=j(C)}if(null!==T)var c=!0;else{var u=j(E);null!==u&&a(D,u.startTime-n),c=!1}return c}finally{T=null,I=r,A=!1}}var L=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||A||(M=!0,r(F))},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return j(C)},t.unstable_next=function(e){switch(I){case 1:case 2:case 3:var t=3;break;default:t=I}var n=I;I=t;try{return e()}finally{I=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=L,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=I;I=e;try{return t()}finally{I=n}},t.unstable_scheduleCallback=function(e,n,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:N++,callback:n,priorityLevel:e,startTime:o,expirationTime:c=o+c,sortIndex:-1},o>s?(e.sortIndex=o,x(E,e),null===j(C)&&e===j(E)&&(P?i():P=!0,a(D,o-s))):(e.sortIndex=c,x(C,e),M||A||(M=!0,r(F))),e},t.unstable_wrapCallback=function(e){var t=I;return function(){var n=I;I=t;try{return e.apply(this,arguments)}finally{I=n}}}},,,function(e,t,n){"use strict";var r=n(101),a=n(320),i=n(432),o=n(326);var s=function e(t){var n=new i(t),s=a(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return e(o(t,n))},s}(n(228));s.Axios=i,s.Cancel=n(229),s.CancelToken=n(445),s.isCancel=n(325),s.VERSION=n(327).version,s.all=function(e){return Promise.all(e)},s.spread=n(446),s.isAxiosError=n(447),e.exports=s,e.exports.default=s},function(e,t,n){"use strict";var r=n(101),a=n(321),i=n(433),o=n(434),s=n(326),c=n(444),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var a,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!r){var l=[o,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(i),a=Promise.resolve(e);l.length;)a=a.then(l.shift(),l.shift());return a}for(var f=e;n.length;){var d=n.shift(),p=n.shift();try{f=d(f)}catch(h){p(h);break}}try{a=o(f)}catch(h){return Promise.reject(h)}for(;i.length;)a=a.then(i.shift(),i.shift());return a},l.prototype.getUri=function(e){return e=s(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},function(e,t,n){"use strict";var r=n(101);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},function(e,t,n){"use strict";var r=n(101),a=n(435),i=n(325),o=n(228),s=n(229);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(101),a=n(228);e.exports=function(e,t,n){var i=this||a;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},function(e,t,n){"use strict";var r=n(101);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(324);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(101);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(a)&&s.push("path="+a),r.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(440),a=n(441);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(101),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},function(e,t,n){"use strict";var r=n(101);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(327).version,a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(a(r," has been removed"+(t?" in "+t:"")));return t&&!i[r]&&(i[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),a=r.length;a-- >0;){var i=r[a],o=t[i];if(o){var s=e[i],c=void 0===s||o(s,i,e);if(!0!==c)throw new TypeError("option "+i+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:a}},function(e,t,n){"use strict";var r=n(229);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,O=r?Symbol.for("react.responder"):60118,k=r?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case f:case d:case o:case c:case s:case h:return e;default:switch(e=e&&e.$$typeof){case l:case p:case b:case m:case u:return e;default:return t}}case i:return t}}}function x(e){return w(e)===d}t.AsyncMode=f,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=a,t.ForwardRef=p,t.Fragment=o,t.Lazy=b,t.Memo=m,t.Portal=i,t.Profiler=c,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return x(e)||w(e)===f},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===b},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===c},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===c||e===s||e===h||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===p||e.$$typeof===y||e.$$typeof===O||e.$$typeof===k||e.$$typeof===g)},t.typeOf=w},function(e,t,n){var r=n(450).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(N){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),o=new _(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return E()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=f;var p={};function h(){}function v(){}function m(){}var b={};l(b,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(C([])));y&&y!==n&&i.call(y,s)&&(b=y);var O=m.prototype=h.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,o,s,c){var u=d(e[a],e,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==r(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return v.prototype=m,l(O,"constructor",m),l(m,"constructor",v),v.displayName=l(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(w.prototype),l(w.prototype,c,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new w(f(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(O),l(O,u,"Generator"),l(O,s,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n(307);var r=n(1),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;a=i("react.element"),t.Fragment=i("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:l,props:i,_owner:o.current}}t.jsx=u,t.jsxs=u},function(e,t,n){var r=n(453),a=n(216);e.exports=function e(t,n,i,o,s){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!==t&&n!==n:r(t,n,i,o,e,s))}},function(e,t,n){var r=n(454),a=n(333),i=n(488),o=n(492),s=n(514),c=n(310),u=n(334),l=n(335),f="[object Arguments]",d="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,m,b){var g=c(e),y=c(t),O=g?d:s(e),k=y?d:s(t),w=(O=O==f?p:O)==p,x=(k=k==f?p:k)==p,j=O==k;if(j&&u(e)){if(!u(t))return!1;g=!0,w=!1}if(j&&!w)return b||(b=new r),g||l(e)?a(e,t,n,v,m,b):i(e,t,O,n,v,m,b);if(!(1&n)){var S=w&&h.call(e,"__wrapped__"),_=x&&h.call(t,"__wrapped__");if(S||_){var C=S?e.value():e,E=_?t.value():t;return b||(b=new r),m(C,E,n,v,b)}}return!!j&&(b||(b=new r),o(e,t,n,v,m,b))}},function(e,t,n){var r=n(230),a=n(460),i=n(461),o=n(462),s=n(463),c=n(464);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=a,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=c,e.exports=u},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(231),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(231);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(231);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(231);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},function(e,t,n){var r=n(230);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(230),a=n(308),i=n(332);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!a||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(o)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(329),a=n(468),i=n(232),o=n(331),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,f=u.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||a(e))&&(r(e)?d:s).test(o(e))}},function(e,t,n){var r=n(309),a=Object.prototype,i=a.hasOwnProperty,o=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(c){}var a=o.call(e);return r&&(t?e[s]=n:delete e[s]),a}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(469),a=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},function(e,t,n){var r=n(124)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(472),a=n(230),i=n(308);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||a),string:new r}}},function(e,t,n){var r=n(473),a=n(474),i=n(475),o=n(476),s=n(477);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=i,c.prototype.has=o,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(233);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(233),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(233),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},function(e,t,n){var r=n(233);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(234);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(234);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(234);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(234);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},function(e,t,n){var r=n(332),a=n(484),i=n(485);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=a,o.prototype.has=i,e.exports=o},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(309),a=n(489),i=n(328),o=n(333),s=n(490),c=n(491),u=r?r.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var h=1&r;if(p||(p=c),e.size!=t.size&&!h)return!1;var v=d.get(e);if(v)return v==t;r|=2,d.set(e,t);var m=o(p(e),p(t),r,u,f,d);return d.delete(e),m;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t,n){var r=n(124).Uint8Array;e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(493),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,o,s){var c=1&n,u=r(e),l=u.length;if(l!=r(t).length&&!c)return!1;for(var f=l;f--;){var d=u[f];if(!(c?d in t:a.call(t,d)))return!1}var p=s.get(e),h=s.get(t);if(p&&h)return p==t&&h==e;var v=!0;s.set(e,t),s.set(t,e);for(var m=c;++f<l;){var b=e[d=u[f]],g=t[d];if(i)var y=c?i(g,b,d,t,e,s):i(b,g,d,e,t,s);if(!(void 0===y?b===g||o(b,g,n,i,s):y)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var O=e.constructor,k=t.constructor;O==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof O&&O instanceof O&&"function"==typeof k&&k instanceof k||(v=!1)}return s.delete(e),s.delete(t),v}},function(e,t,n){var r=n(494),a=n(496),i=n(499);e.exports=function(e){return r(e,i,a)}},function(e,t,n){var r=n(495),a=n(310);e.exports=function(e,t,n){var i=t(e);return a(e)?i:r(i,n(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},function(e,t,n){var r=n(497),a=n(498),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return i.call(e,t)})))}:a;e.exports=s},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(500),a=n(509),i=n(513);e.exports=function(e){return i(e)?r(e):a(e)}},function(e,t,n){var r=n(501),a=n(502),i=n(310),o=n(334),s=n(505),c=n(335),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&a(e),f=!n&&!l&&o(e),d=!n&&!l&&!f&&c(e),p=n||l||f||d,h=p?r(e.length,String):[],v=h.length;for(var m in e)!t&&!u.call(e,m)||p&&("length"==m||f&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||h.push(m);return h}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(503),a=n(216),i=Object.prototype,o=i.hasOwnProperty,s=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return a(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,t,n){var r=n(215),a=n(216);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(215),a=n(336),i=n(216),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&a(e.length)&&!!o[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(330),a=t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===a&&r.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s}).call(this,n(74)(e))},function(e,t,n){var r=n(510),a=n(511),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(512)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(329),a=n(336);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},function(e,t,n){var r=n(515),a=n(308),i=n(516),o=n(517),s=n(518),c=n(215),u=n(331),l="[object Map]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",h="[object DataView]",v=u(r),m=u(a),b=u(i),g=u(o),y=u(s),O=c;(r&&O(new r(new ArrayBuffer(1)))!=h||a&&O(new a)!=l||i&&O(i.resolve())!=f||o&&O(new o)!=d||s&&O(new s)!=p)&&(O=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case v:return h;case m:return l;case b:return f;case g:return d;case y:return p}return t}),e.exports=O},function(e,t,n){var r=n(182)(n(124),"DataView");e.exports=r},function(e,t,n){var r=n(182)(n(124),"Promise");e.exports=r},function(e,t,n){var r=n(182)(n(124),"Set");e.exports=r},function(e,t,n){var r=n(182)(n(124),"WeakMap");e.exports=r},,,function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new E(r||[]);return i._invoke=function(e,t,n){var r=f;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?h:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=u;var f="suspendedStart",d="suspendedYield",p="executing",h="completed",v={};function m(){}function b(){}function g(){}var y={};c(y,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(N([])));k&&k!==n&&r.call(k,i)&&(y=k);var w=g.prototype=m.prototype=Object.create(y);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(a,i,o,s){var c=l(e[a],e,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function N(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:t,done:!0}}return b.prototype=g,c(w,"constructor",g),c(g,"constructor",b),b.displayName=c(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},x(j.prototype),c(j.prototype,o,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new j(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(w),c(w,s,"Generator"),c(w,i,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(a){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),o=r[0],s=r[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),l=0,f=s>0?o-4:o;for(n=0;n<f;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],o=16383,s=0,c=n-a;s<c;s+=o)i.push(l(e,s,s+o>c?c:s+o));1===a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],a=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=o.length;s<c;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var a,i,o=[],s=t;s<n;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,c=(1<<s)-1,u=c>>1,l=-7,f=n?a-1:0,d=n?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+e[t+f],f+=d,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=d,l-=8);if(0===i)i=1-u;else{if(i===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),i-=u}return(p?-1:1)*o*Math.pow(2,i-r)},t.write=function(e,t,n,r,a,i){var o,s,c,u=8*i-a-1,l=(1<<u)-1,f=l>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(o++,c/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*c-1)*Math.pow(2,a),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[n+p]=255&s,p+=h,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[n+p]=255&o,p+=h,o/=256,u-=8);e[n+p-h]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(e){var t,r=n(2),a=n(4),i=n(53),o=function(){return n(526)};var s=function(){function s(){Object(r.a)(this,s),this.util=n(527),this.textEncoder=new this.util.TextEncoder}return Object(a.a)(s,[{key:"fetch",value:function(e,n){return null!=Object(i.c)().global.fetch?Object(i.c)().global.fetch(e,n):(null==t&&(t=o()),t(e,n))}},{key:"now",value:function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),s}();Object(i.c)().get("IS_NODE")&&Object(i.c)().setPlatform("node",new s)}).call(this,n(181))},,,function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.alea=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xor128=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xorwow=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xorshift7=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),a=0,i=-32;i<c;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xor4096=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.tychei=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){var r;!function(a,i){var o,s=this,c=256,u=i.pow(c,6),l=i.pow(2,52),f=2*l,d=255;function p(e,t,n){var r=[],d=b(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,g(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(c):(e=new Uint8Array(c),(s.crypto||s.msCrypto).getRandomValues(e)),g(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,g(a)]}}():e,3),r),p=new h(r),y=function(){for(var e=p.g(6),t=u,n=0;e<l;)e=(e+n)*c,t*=c,n=p.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|p.g(4)},y.quick=function(){return p.g(4)/4294967296},y.double=y,b(g(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,p),e.state=function(){return v(p,{})}),n?(i.random=e,t):e})(y,d,"global"in t?t.global:this==i,t.state)}function h(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<c;)o[a]=a++;for(a=0;a<c;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*c+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(c)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function b(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=p,b(i.random(),a),e.exports){e.exports=p;try{o=n(535)}catch(y){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}([],Math)},,function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(537),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(110))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a=1,i={},o=!1,s=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},c.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return i[a]=o,r(a),a++},c.clearImmediate=u}function u(e){delete i[e]}function l(e){if(o)setTimeout(l,0,e);else{var t=i[e];if(t){o=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{u(e),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(110),n(181))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.alea=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xor128=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xorwow=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xorshift7=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),a=0,i=-32;i<c;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xor4096=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.tychei=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){var r;!function(a,i){var o,s=(0,eval)("this"),c=256,u=i.pow(c,6),l=i.pow(2,52),f=2*l,d=255;function p(e,t,n){var r=[],d=b(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,g(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(c):(e=new Uint8Array(c),(s.crypto||s.msCrypto).getRandomValues(e)),g(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,g(a)]}}():e,3),r),p=new h(r),y=function(){for(var e=p.g(6),t=u,n=0;e<l;)e=(e+n)*c,t*=c,n=p.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|p.g(4)},y.quick=function(){return p.g(4)/4294967296},y.double=y,b(g(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,p),e.state=function(){return v(p,{})}),n?(i.random=e,t):e})(y,d,"global"in t?t.global:this==i,t.state)}function h(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<c;)o[a]=a++;for(a=0;a<c;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*c+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(c)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function b(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=p,b(i.random(),a),e.exports){e.exports=p;try{o=n(545)}catch(y){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}([],Math)},,,,function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.alea=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xor128=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xorwow=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xorshift7=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),a=0,i=-32;i<c;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.xor4096=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=c:n(61)&&n(84)?void 0===(r=function(){return c}.call(t,n,t,a))||(a.exports=r):this.tychei=c}(0,e,n(61))}).call(this,n(74)(e))},function(e,t,n){var r;!function(a,i){var o,s=this,c=256,u=i.pow(c,6),l=i.pow(2,52),f=2*l,d=255;function p(e,t,n){var r=[],d=b(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,g(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(c):(e=new Uint8Array(c),(s.crypto||s.msCrypto).getRandomValues(e)),g(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,g(a)]}}():e,3),r),p=new h(r),y=function(){for(var e=p.g(6),t=u,n=0;e<l;)e=(e+n)*c,t*=c,n=p.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|p.g(4)},y.quick=function(){return p.g(4)/4294967296},y.double=y,b(g(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,p),e.state=function(){return v(p,{})}),n?(i.random=e,t):e})(y,d,"global"in t?t.global:this==i,t.state)}function h(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<c;)o[a]=a++;for(a=0;a<c;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*c+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(c)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function b(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=p,b(i.random(),a),e.exports){e.exports=p;try{o=n(555)}catch(y){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}([],Math)},,function(e,t,n){"use strict";e.exports=n(557)},function(e,t,n){"use strict";var r=t;function a(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(375),r.BufferWriter=n(566),r.Reader=n(376),r.BufferReader=n(567),r.util=n(169),r.rpc=n(568),r.roots=n(570),r.configure=a,a()},function(e,t,n){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),r=0,a=2,i=!0;for(;a<arguments.length;)n[r++]=arguments[a++];return new Promise((function(a,o){n[r]=function(e){if(i)if(i=!1,e)o(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];a.apply(null,t)}};try{e.apply(t||null,n)}catch(s){i&&(i=!1,o(s))}}))}},function(e,t,n){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var a=new Array(64),i=new Array(123),o=0;o<64;)i[a[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(e,t,n){for(var r,i=null,o=[],s=0,c=0;t<n;){var u=e[t++];switch(c){case 0:o[s++]=a[u>>2],r=(3&u)<<4,c=1;break;case 1:o[s++]=a[r|u>>4],r=(15&u)<<2,c=2;break;case 2:o[s++]=a[r|u>>6],o[s++]=a[63&u],c=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return c&&(o[s++]=a[r],o[s++]=61,1===c&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var s="invalid encoding";r.decode=function(e,t,n){for(var r,a=n,o=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&o>1)break;if(void 0===(u=i[u]))throw Error(s);switch(o){case 0:r=u,o=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,o=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,o=3;break;case 3:t[n++]=(3&r)<<6|u,o=0}}if(1===o)throw Error(s);return n-a},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){"use strict";function r(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function a(e,r,a){t[0]=e,r[a]=n[0],r[a+1]=n[1],r[a+2]=n[2],r[a+3]=n[3]}function i(e,r,a){t[0]=e,r[a]=n[3],r[a+1]=n[2],r[a+2]=n[1],r[a+3]=n[0]}function o(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function s(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?a:i,e.writeFloatBE=r?i:a,e.readFloatLE=r?o:s,e.readFloatBE=r?s:o}():function(){function t(e,t,n,r){var a=t<0?1:0;if(a&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((a<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((a<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((a<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),a=2*(r>>31)+1,i=r>>>23&255,o=8388607&r;return 255===i?o?NaN:a*(1/0):0===i?1401298464324817e-60*a*o:a*Math.pow(2,i-150)*(o+8388608)}e.writeFloatLE=t.bind(null,a),e.writeFloatBE=t.bind(null,i),e.readFloatLE=n.bind(null,o),e.readFloatBE=n.bind(null,s)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function a(e,r,a){t[0]=e,r[a]=n[0],r[a+1]=n[1],r[a+2]=n[2],r[a+3]=n[3],r[a+4]=n[4],r[a+5]=n[5],r[a+6]=n[6],r[a+7]=n[7]}function i(e,r,a){t[0]=e,r[a]=n[7],r[a+1]=n[6],r[a+2]=n[5],r[a+3]=n[4],r[a+4]=n[3],r[a+5]=n[2],r[a+6]=n[1],r[a+7]=n[0]}function o(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function s(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?a:i,e.writeDoubleBE=r?i:a,e.readDoubleLE=r?o:s,e.readDoubleBE=r?s:o}():function(){function t(e,t,n,r,a,i){var o=r<0?1:0;if(o&&(r=-r),0===r)e(0,a,i+t),e(1/r>0?0:2147483648,a,i+n);else if(isNaN(r))e(0,a,i+t),e(2146959360,a,i+n);else if(r>17976931348623157e292)e(0,a,i+t),e((o<<31|2146435072)>>>0,a,i+n);else{var s;if(r<22250738585072014e-324)e((s=r/5e-324)>>>0,a,i+t),e((o<<31|s/4294967296)>>>0,a,i+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=r*Math.pow(2,-c))>>>0,a,i+t),e((o<<31|c+1023<<20|1048576*s&1048575)>>>0,a,i+n)}}}function n(e,t,n,r,a){var i=e(r,a+t),o=e(r,a+n),s=2*(o>>31)+1,c=o>>>20&2047,u=4294967296*(1048575&o)+i;return 2047===c?u?NaN:s*(1/0):0===c?5e-324*s*u:s*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,a,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=n.bind(null,o,0,4),e.readDoubleBE=n.bind(null,s,4,0)}(),e}function a(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function i(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";var r=t;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,a=null,i=[],o=0;t<n;)(r=e[t++])<128?i[o++]=r:r>191&&r<224?i[o++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[o++]=55296+(r>>10),i[o++]=56320+(1023&r)):i[o++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),o=0);return a?(o&&a.push(String.fromCharCode.apply(String,i.slice(0,o))),a.join("")):String.fromCharCode.apply(String,i.slice(0,o))},r.write=function(e,t,n){for(var r,a,i=n,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&56320===(64512&(a=e.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&a),++o,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=n||8192,a=r>>>1,i=null,o=r;return function(n){if(n<1||n>a)return e(n);o+n>r&&(i=e(r),o=0);var s=t.call(i,o,o+=n);return 7&o&&(o=1+(7|o)),s}}},function(e,t,n){"use strict";e.exports=a;var r=n(169);function a(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=a.zero=new a(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new a(n,r)},a.from=function(e){if("number"===typeof e)return a.fromNumber(e);if(r.isString(e)){if(!r.Long)return a.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new a(e.low>>>0,e.high>>>0):i},a.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},a.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;a.fromHash=function(e){return e===o?i:new a((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},a.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},a.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=i;var r=n(375);(i.prototype=Object.create(r.prototype)).constructor=i;var a=n(169);function i(){r.call(this)}function o(e,t,n){e.length<40?a.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}i._configure=function(){i.alloc=a._Buffer_allocUnsafe,i.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&"set"===a.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},i.prototype.bytes=function(e){a.isString(e)&&(e=a._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=a.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()},function(e,t,n){"use strict";e.exports=i;var r=n(376);(i.prototype=Object.create(r.prototype)).constructor=i;var a=n(169);function i(e){r.call(this,e)}i._configure=function(){a.Buffer&&(i.prototype._slice=a.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},function(e,t,n){"use strict";t.Service=n(569)},function(e,t,n){"use strict";e.exports=a;var r=n(169);function a(e,t,n){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(a.prototype=Object.create(r.EventEmitter.prototype)).constructor=a,a.prototype.rpcCall=function e(t,n,a,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return r.asPromise(e,s,t,n,a,i);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return s.emit("error",e,t),o(e);if(null!==n){if(!(n instanceof a))try{n=a[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),o(e)}return s.emit("data",n,t),o(null,n)}s.end(!0)}))}catch(c){return s.emit("error",c,t),void setTimeout((function(){o(c)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},a.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"now",(function(){return a})),n.d(t,"timing",(function(){return i}));var r=e.process.hrtime(),a=function(){var t=e.process.hrtime(r);return t[0]+t[1]/1e9},i={navigationStart:Date.now()}}.call(this,n(110))},function(e,t,n){"use strict";n.r(t),n.d(t,"userAgent",(function(){return r}));var r=""},function(e,t,n){var r=n(575),a=n(576),i=n(577),o=n(579);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(578);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e){for(var t,n=new r(e),a=[];!n.eof();){var i=o();a.push(i)}return a;function o(){var e={};e.deltaTime=n.readVarInt();var r=n.readUInt8();if(240===(240&r)){if(255!==r){if(240==r){e.type="sysEx";i=n.readVarInt();return e.data=n.readBytes(i),e}if(247==r){e.type="endSysEx";i=n.readVarInt();return e.data=n.readBytes(i),e}throw"Unrecognised MIDI event type byte: "+r}e.meta=!0;var a=n.readUInt8(),i=n.readVarInt();switch(a){case 0:if(e.type="sequenceNumber",2!==i)throw"Expected length for sequenceNumber event is 2, got "+i;return e.number=n.readUInt16(),e;case 1:return e.type="text",e.text=n.readString(i),e;case 2:return e.type="copyrightNotice",e.text=n.readString(i),e;case 3:return e.type="trackName",e.text=n.readString(i),e;case 4:return e.type="instrumentName",e.text=n.readString(i),e;case 5:return e.type="lyrics",e.text=n.readString(i),e;case 6:return e.type="marker",e.text=n.readString(i),e;case 7:return e.type="cuePoint",e.text=n.readString(i),e;case 32:if(e.type="channelPrefix",1!=i)throw"Expected length for channelPrefix event is 1, got "+i;return e.channel=n.readUInt8(),e;case 33:if(e.type="portPrefix",1!=i)throw"Expected length for portPrefix event is 1, got "+i;return e.port=n.readUInt8(),e;case 47:if(e.type="endOfTrack",0!=i)throw"Expected length for endOfTrack event is 0, got "+i;return e;case 81:if(e.type="setTempo",3!=i)throw"Expected length for setTempo event is 3, got "+i;return e.microsecondsPerBeat=n.readUInt24(),e;case 84:if(e.type="smpteOffset",5!=i)throw"Expected length for smpteOffset event is 5, got "+i;var o=n.readUInt8();return e.frameRate={0:24,32:25,64:29,96:30}[96&o],e.hour=31&o,e.min=n.readUInt8(),e.sec=n.readUInt8(),e.frame=n.readUInt8(),e.subFrame=n.readUInt8(),e;case 88:if(e.type="timeSignature",2!=i&&4!=i)throw"Expected length for timeSignature event is 4 or 2, got "+i;return e.numerator=n.readUInt8(),e.denominator=1<<n.readUInt8(),4===i?(e.metronome=n.readUInt8(),e.thirtyseconds=n.readUInt8()):(e.metronome=36,e.thirtyseconds=8),e;case 89:if(e.type="keySignature",2!=i)throw"Expected length for keySignature event is 2, got "+i;return e.key=n.readInt8(),e.scale=n.readUInt8(),e;case 127:return e.type="sequencerSpecific",e.data=n.readBytes(i),e;default:return e.type="unknownMeta",e.data=n.readBytes(i),e.metatypeByte=a,e}}else{var s;if(0===(128&r)){if(null===t)throw"Running status byte encountered before status byte";s=r,r=t,e.running=!0}else s=n.readUInt8(),t=r;var c=r>>4;switch(e.channel=15&r,c){case 8:return e.type="noteOff",e.noteNumber=s,e.velocity=n.readUInt8(),e;case 9:var u=n.readUInt8();return e.type=0===u?"noteOff":"noteOn",e.noteNumber=s,e.velocity=u,0===u&&(e.byte9=!0),e;case 10:return e.type="noteAftertouch",e.noteNumber=s,e.amount=n.readUInt8(),e;case 11:return e.type="controller",e.controllerType=s,e.value=n.readUInt8(),e;case 12:return e.type="programChange",e.programNumber=s,e;case 13:return e.type="channelAftertouch",e.amount=s,e;case 14:return e.type="pitchBend",e.value=s+(n.readUInt8()<<7)-8192,e;default:throw"Unrecognised MIDI event type: "+c}}}}function r(e){this.buffer=e,this.bufferLen=this.buffer.length,this.pos=0}r.prototype.eof=function(){return this.pos>=this.bufferLen},r.prototype.readUInt8=function(){var e=this.buffer[this.pos];return this.pos+=1,e},r.prototype.readInt8=function(){var e=this.readUInt8();return 128&e?e-256:e},r.prototype.readUInt16=function(){return(this.readUInt8()<<8)+this.readUInt8()},r.prototype.readInt16=function(){var e=this.readUInt16();return 32768&e?e-65536:e},r.prototype.readUInt24=function(){return(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},r.prototype.readInt24=function(){var e=this.readUInt24();return 8388608&e?e-16777216:e},r.prototype.readUInt32=function(){return(this.readUInt8()<<24)+(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},r.prototype.readBytes=function(e){var t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=e,t},r.prototype.readString=function(e){var t=this.readBytes(e);return String.fromCharCode.apply(null,t)},r.prototype.readVarInt=function(){for(var e=0;!this.eof();){var t=this.readUInt8();if(!(128&t))return e+t;e+=127&t,e<<=7}return e},r.prototype.readChunk=function(){var e=this.readString(4),t=this.readUInt32();return{id:e,length:t,data:this.readBytes(t)}},e.exports=function(e){var t=new r(e),a=t.readChunk();if("MThd"!=a.id)throw"Bad MIDI file.  Expected 'MHdr', got: '"+a.id+"'";for(var i=function(e){var t=new r(e),n=t.readUInt16(),a=t.readUInt16(),i={format:n,numTracks:a},o=t.readUInt16();32768&o?(i.framesPerSecond=256-(o>>8),i.ticksPerFrame=255&o):i.ticksPerBeat=o;return i}(a.data),o=[],s=0;!t.eof()&&s<i.numTracks;s++){var c=t.readChunk();if("MTrk"!=c.id)throw"Bad MIDI file.  Expected 'MTrk', got: '"+c.id+"'";var u=n(c.data);o.push(u)}return{header:i,tracks:o}}},function(e,t){function n(e,t,n){var i,o=new a,s=t.length,c=null;for(i=0;i<s;i++)!1!==n.running&&(n.running||t[i].running)||(c=null),c=r(o,t[i],c,n.useByte9ForNoteOff);e.writeChunk("MTrk",o.buffer)}function r(e,t,n,r){var a=t.type,i=t.deltaTime,o=t.text||"",s=t.data||[],c=null;switch(e.writeVarInt(i),a){case"sequenceNumber":e.writeUInt8(255),e.writeUInt8(0),e.writeVarInt(2),e.writeUInt16(t.number);break;case"text":e.writeUInt8(255),e.writeUInt8(1),e.writeVarInt(o.length),e.writeString(o);break;case"copyrightNotice":e.writeUInt8(255),e.writeUInt8(2),e.writeVarInt(o.length),e.writeString(o);break;case"trackName":e.writeUInt8(255),e.writeUInt8(3),e.writeVarInt(o.length),e.writeString(o);break;case"instrumentName":e.writeUInt8(255),e.writeUInt8(4),e.writeVarInt(o.length),e.writeString(o);break;case"lyrics":e.writeUInt8(255),e.writeUInt8(5),e.writeVarInt(o.length),e.writeString(o);break;case"marker":e.writeUInt8(255),e.writeUInt8(6),e.writeVarInt(o.length),e.writeString(o);break;case"cuePoint":e.writeUInt8(255),e.writeUInt8(7),e.writeVarInt(o.length),e.writeString(o);break;case"channelPrefix":e.writeUInt8(255),e.writeUInt8(32),e.writeVarInt(1),e.writeUInt8(t.channel);break;case"portPrefix":e.writeUInt8(255),e.writeUInt8(33),e.writeVarInt(1),e.writeUInt8(t.port);break;case"endOfTrack":e.writeUInt8(255),e.writeUInt8(47),e.writeVarInt(0);break;case"setTempo":e.writeUInt8(255),e.writeUInt8(81),e.writeVarInt(3),e.writeUInt24(t.microsecondsPerBeat);break;case"smpteOffset":e.writeUInt8(255),e.writeUInt8(84),e.writeVarInt(5);var u=31&t.hour|{24:0,25:32,29:64,30:96}[t.frameRate];e.writeUInt8(u),e.writeUInt8(t.min),e.writeUInt8(t.sec),e.writeUInt8(t.frame),e.writeUInt8(t.subFrame);break;case"timeSignature":e.writeUInt8(255),e.writeUInt8(88),e.writeVarInt(4),e.writeUInt8(t.numerator);var l=255&Math.floor(Math.log(t.denominator)/Math.LN2);e.writeUInt8(l),e.writeUInt8(t.metronome),e.writeUInt8(t.thirtyseconds||8);break;case"keySignature":e.writeUInt8(255),e.writeUInt8(89),e.writeVarInt(2),e.writeInt8(t.key),e.writeUInt8(t.scale);break;case"sequencerSpecific":e.writeUInt8(255),e.writeUInt8(127),e.writeVarInt(s.length),e.writeBytes(s);break;case"unknownMeta":null!=t.metatypeByte&&(e.writeUInt8(255),e.writeUInt8(t.metatypeByte),e.writeVarInt(s.length),e.writeBytes(s));break;case"sysEx":e.writeUInt8(240),e.writeVarInt(s.length),e.writeBytes(s);break;case"endSysEx":e.writeUInt8(247),e.writeVarInt(s.length),e.writeBytes(s);break;case"noteOff":(c=(!1!==r&&t.byte9||r&&0==t.velocity?144:128)|t.channel)!==n&&e.writeUInt8(c),e.writeUInt8(t.noteNumber),e.writeUInt8(t.velocity);break;case"noteOn":(c=144|t.channel)!==n&&e.writeUInt8(c),e.writeUInt8(t.noteNumber),e.writeUInt8(t.velocity);break;case"noteAftertouch":(c=160|t.channel)!==n&&e.writeUInt8(c),e.writeUInt8(t.noteNumber),e.writeUInt8(t.amount);break;case"controller":(c=176|t.channel)!==n&&e.writeUInt8(c),e.writeUInt8(t.controllerType),e.writeUInt8(t.value);break;case"programChange":(c=192|t.channel)!==n&&e.writeUInt8(c),e.writeUInt8(t.programNumber);break;case"channelAftertouch":(c=208|t.channel)!==n&&e.writeUInt8(c),e.writeUInt8(t.amount);break;case"pitchBend":(c=224|t.channel)!==n&&e.writeUInt8(c);var f=8192+t.value,d=127&f,p=f>>7&127;e.writeUInt8(d),e.writeUInt8(p);break;default:throw"Unrecognized event type: "+a}return c}function a(){this.buffer=[]}a.prototype.writeUInt8=function(e){this.buffer.push(255&e)},a.prototype.writeInt8=a.prototype.writeUInt8,a.prototype.writeUInt16=function(e){var t=e>>8&255,n=255&e;this.writeUInt8(t),this.writeUInt8(n)},a.prototype.writeInt16=a.prototype.writeUInt16,a.prototype.writeUInt24=function(e){var t=e>>16&255,n=e>>8&255,r=255&e;this.writeUInt8(t),this.writeUInt8(n),this.writeUInt8(r)},a.prototype.writeInt24=a.prototype.writeUInt24,a.prototype.writeUInt32=function(e){var t=e>>24&255,n=e>>16&255,r=e>>8&255,a=255&e;this.writeUInt8(t),this.writeUInt8(n),this.writeUInt8(r),this.writeUInt8(a)},a.prototype.writeInt32=a.prototype.writeUInt32,a.prototype.writeBytes=function(e){this.buffer=this.buffer.concat(Array.prototype.slice.call(e,0))},a.prototype.writeString=function(e){var t,n=e.length,r=[];for(t=0;t<n;t++)r.push(e.codePointAt(t));this.writeBytes(r)},a.prototype.writeVarInt=function(e){if(e<0)throw"Cannot write negative variable-length integer";if(e<=127)this.writeUInt8(e);else{var t=e,n=[];for(n.push(127&t),t>>=7;t;){var r=127&t|128;n.push(r),t>>=7}this.writeBytes(n.reverse())}},a.prototype.writeChunk=function(e,t){this.writeString(e),this.writeUInt32(t.length),this.writeBytes(t)},e.exports=function(e,t){if("object"!==typeof e)throw"Invalid MIDI data";t=t||{};var r,i=e.header||{},o=e.tracks||[],s=o.length,c=new a;for(function(e,t,n){var r=null==t.format?1:t.format,i=128;t.timeDivision?i=t.timeDivision:t.ticksPerFrame&&t.framesPerSecond?i=-(255&t.framesPerSecond)<<8|255&t.ticksPerFrame:t.ticksPerBeat&&(i=32767&t.ticksPerBeat);var o=new a;o.writeUInt16(r),o.writeUInt16(n),o.writeUInt16(i),e.writeChunk("MThd",o.buffer)}(c,i,s),r=0;r<s;r++)n(c,o[r],t);return c.buffer}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createControlChanges=void 0;var r=n(380);t.createControlChanges=function(){return new Proxy({},{get:function(e,t){return e[t]?e[t]:r.controlChangeIds.hasOwnProperty(t)?e[r.controlChangeIds[t]]:void 0},set:function(e,t,n){return r.controlChangeIds.hasOwnProperty(t)?e[r.controlChangeIds[t]]=n:e[t]=n,!0}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PitchBend=void 0;var r=new WeakMap,a=function(){function e(e,t){r.set(this,t),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(e.prototype,"time",{get:function(){return r.get(this).ticksToSeconds(this.ticks)},set:function(e){var t=r.get(this);this.ticks=t.secondsToTicks(e)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},e}();t.PitchBend=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Instrument=void 0;var r=n(587),a=new WeakMap,i=function(){function e(e,t){if(this.number=0,a.set(this,t),this.number=0,e){var n=e.find((function(e){return"programChange"===e.type}));n&&(this.number=n.programNumber)}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.percussion?r.DrumKitByPatchID[this.number]:r.instrumentByPatchID[this.number]},set:function(e){var t=r.instrumentByPatchID.indexOf(e);-1!==t&&(this.number=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"family",{get:function(){return this.percussion?"drums":r.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"percussion",{get:function(){return 9===a.get(this).channel},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},e.prototype.fromJSON=function(e){this.number=e.number},e}();t.Instrument=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrumKitByPatchID=t.InstrumentFamilyByID=t.instrumentByPatchID=void 0,t.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],t.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],t.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}},function(e,t,n){"use strict";function r(e){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]}Object.defineProperty(t,"__esModule",{value:!0}),t.Note=void 0;var a=function(){var e=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,t={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var r=e.exec(n),a=r[1],i=r[2];return t[a.toLowerCase()]+12*(parseInt(i,10)+1)}}(),i=new WeakMap,o=function(){function e(e,t,n){i.set(this,n),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=t.velocity,this.ticks=e.ticks,this.durationTicks=t.ticks-e.ticks}return Object.defineProperty(e.prototype,"name",{get:function(){return function(e){var t=Math.floor(e/12)-1;return r(e)+t.toString()}(this.midi)},set:function(e){this.midi=a(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(e){var t=e-this.octave;this.midi+=12*t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pitch",{get:function(){return r(this.midi)},set:function(e){this.midi=12*(this.octave+1)+["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){var e=i.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)},set:function(e){var t=i.get(this).secondsToTicks(this.time+e);this.durationTicks=t-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return i.get(this).ticksToSeconds(this.ticks)},set:function(e){var t=i.get(this);this.ticks=t.secondsToTicks(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bars",{get:function(){return i.get(this).ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},e}();t.Note=o},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.encode=void 0;var a=n(377),i=n(312),o=n(590);function s(e){return(0,o.flatten)(e.notes.map((function(t){return function(e,t){return[{absoluteTime:e.ticks,channel:t,deltaTime:0,noteNumber:e.midi,type:"noteOn",velocity:Math.floor(127*e.velocity)},{absoluteTime:e.ticks+e.durationTicks,channel:t,deltaTime:0,noteNumber:e.midi,type:"noteOff",velocity:Math.floor(127*e.noteOffVelocity)}]}(t,e.channel)})))}function c(e,t){return{absoluteTime:e.ticks,channel:t,controllerType:e.number,deltaTime:0,type:"controller",value:Math.floor(127*e.value)}}function u(e){return{absoluteTime:0,channel:e.channel,deltaTime:0,programNumber:e.instrument.number,type:"programChange"}}t.encode=function(e){var t={header:{format:1,numTracks:e.tracks.length+1,ticksPerBeat:e.header.ppq},tracks:r([r(r(r(r([{absoluteTime:0,deltaTime:0,meta:!0,text:e.header.name,type:"trackName"}],e.header.keySignatures.map((function(e){return function(e){var t=i.keySignatureKeys.indexOf(e.key);return{absoluteTime:e.ticks,deltaTime:0,key:t+7,meta:!0,scale:"major"===e.scale?0:1,type:"keySignature"}}(e)})),!0),e.header.meta.map((function(e){return{absoluteTime:(t=e).ticks,deltaTime:0,meta:!0,text:t.text,type:t.type};var t})),!0),e.header.tempos.map((function(e){return function(e){return{absoluteTime:e.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/e.bpm),type:"setTempo"}}(e)})),!0),e.header.timeSignatures.map((function(e){return function(e){return{absoluteTime:e.ticks,deltaTime:0,denominator:e.timeSignature[1],meta:!0,metronome:24,numerator:e.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}(e)})),!0)],e.tracks.map((function(e){return r(r(r([(t=e.name,{absoluteTime:0,deltaTime:0,meta:!0,text:t,type:"trackName"}),u(e)],s(e),!0),function(e){for(var t=[],n=0;n<127;n++)e.controlChanges.hasOwnProperty(n)&&e.controlChanges[n].forEach((function(n){t.push(c(n,e.channel))}));return t}(e),!0),function(e){var t=[];return e.pitchBends.forEach((function(n){t.push(function(e,t){return{absoluteTime:e.ticks,channel:t,deltaTime:0,type:"pitchBend",value:e.value}}(n,e.channel))})),t}(e),!0);var t})),!0)};return t.tracks=t.tracks.map((function(e){e=e.sort((function(e,t){return e.absoluteTime-t.absoluteTime}));var t=0;return e.forEach((function(e){e.deltaTime=e.absoluteTime-t,t=e.absoluteTime,delete e.absoluteTime})),e.push({deltaTime:0,meta:!0,type:"endOfTrack"}),e})),new Uint8Array((0,a.writeMidi)(t))}},function(e,t,n){"use strict";function r(e){var t=[];return a(e,t),t}function a(e,t){for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?a(r,t):t.push(r)}}n.r(t),n.d(t,"flatten",(function(){return r}))},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";e.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},function(e,t){function n(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";var r=n(313),a=n(221),i=n(383),o=n(599);e.exports=function(e,t,n){var s,c,u=t.shape,l=u.length,f=1,d=new Array(l),p=0;for(s=l-1;s>=0;--s)if(d[s]=f,f*=u[s],p=Math.max(p,o.scratchMemory(u[s])),t.shape[s]!==n.shape[s])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var h,v=4*f+p;h="array"===t.dtype||"float64"===t.dtype||"custom"===t.dtype?i.mallocDouble(v):i.mallocFloat(v);var m,b,g,y,O=a(h,u.slice(0),d,0),k=a(h,u.slice(0),d.slice(0),f),w=a(h,u.slice(0),d.slice(0),2*f),x=a(h,u.slice(0),d.slice(0),3*f),j=4*f;for(r.assign(O,t),r.assign(k,n),s=l-1;s>=0&&(o(e,f/u[s],u[s],h,O.offset,k.offset,j),0!==s);--s){for(b=1,g=w.stride,y=x.stride,c=s-1;c<l;++c)y[c]=g[c]=b,b*=u[c];for(c=s-2;c>=0;--c)y[c]=g[c]=b,b*=u[c];r.assign(w,O),r.assign(x,k),m=O,O=w,w=m,m=k,k=x,x=m}r.assign(t,O),r.assign(n,k),i.free(h)}},function(e,t,n){"use strict";var r=n(597);e.exports=function(e){var t=["'use strict'","var CACHED={}"],n=[],a=e.funcName+"_cwise_thunk";t.push(["return function ",a,"(",e.shimArgs.join(","),"){"].join(""));for(var i=[],o=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],c=[],u=[],l=0;l<e.arrayArgs.length;++l){var f=e.arrayArgs[l];n.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),i.push("t"+f),i.push("r"+f),o.push("t"+f),o.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),l>0&&(c.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[l]))),u.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[l])+"]"))}for(e.arrayArgs.length>1&&(t.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),l=0;l<e.scalarArgs.length;++l)s.push("scalar"+e.scalarArgs[l]);return n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(r.bind(void 0,e))}},function(e,t,n){"use strict";var r=n(382);function a(e,t,n){var r,a,i=e.length,o=t.arrayArgs.length,s=t.indexArgs.length>0,c=[],u=[],l=0,f=0;for(r=0;r<i;++r)u.push(["i",r,"=0"].join(""));for(a=0;a<o;++a)for(r=0;r<i;++r)f=l,l=e[r],0===r?u.push(["d",a,"s",r,"=t",a,"p",l].join("")):u.push(["d",a,"s",r,"=(t",a,"p",l,"-s",f,"*t",a,"p",f,")"].join(""));for(u.length>0&&c.push("var "+u.join(",")),r=i-1;r>=0;--r)l=e[r],c.push(["for(i",r,"=0;i",r,"<s",l,";++i",r,"){"].join(""));for(c.push(n),r=0;r<i;++r){for(f=l,l=e[r],a=0;a<o;++a)c.push(["p",a,"+=d",a,"s",r].join(""));s&&(r>0&&c.push(["index[",f,"]-=s",f].join("")),c.push(["++index[",l,"]"].join(""))),c.push("}")}return c.join("\n")}function i(e,t,n){for(var r=e.body,a=[],i=[],o=0;o<e.args.length;++o){var s=e.args[o];if(!(s.count<=0)){var c=new RegExp(s.name,"g"),u="",l=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var f=t.offsetArgIndex.indexOf(o);l=t.offsetArgs[f].array,u="+q"+f;case"array":u="p"+l+u;var d="l"+o,p="a"+l;if(0===t.arrayBlockIndices[l])1===s.count?"generic"===n[l]?s.lvalue?(a.push(["var ",d,"=",p,".get(",u,")"].join("")),r=r.replace(c,d),i.push([p,".set(",u,",",d,")"].join(""))):r=r.replace(c,[p,".get(",u,")"].join("")):r=r.replace(c,[p,"[",u,"]"].join("")):"generic"===n[l]?(a.push(["var ",d,"=",p,".get(",u,")"].join("")),r=r.replace(c,d),s.lvalue&&i.push([p,".set(",u,",",d,")"].join(""))):(a.push(["var ",d,"=",p,"[",u,"]"].join("")),r=r.replace(c,d),s.lvalue&&i.push([p,"[",u,"]=",d].join("")));else{for(var h=[s.name],v=[u],m=0;m<Math.abs(t.arrayBlockIndices[l]);m++)h.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(m+1)+"*t"+l+"b"+m);if(c=new RegExp(h.join(""),"g"),u=v.join("+"),"generic"===n[l])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(c,[p,"[",u,"]"].join(""))}break;case"scalar":r=r.replace(c,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(c,"index");break;case"shape":r=r.replace(c,"shape")}}}return[a.join("\n"),r,i.join("\n")].join("\n").trim()}function o(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var a=e[r],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?t[r]="u"+a.charAt(1)+i:t[r]=a.charAt(0)+i,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}e.exports=function(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,s=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),u=0;u<e.arrayArgs.length;++u)c[u]=t[2*u],s[u]=t[2*u+1];var l=[],f=[],d=[],p=[],h=[];for(u=0;u<e.arrayArgs.length;++u){e.arrayBlockIndices[u]<0?(d.push(0),p.push(n),l.push(n),f.push(n+e.arrayBlockIndices[u])):(d.push(e.arrayBlockIndices[u]),p.push(e.arrayBlockIndices[u]+n),l.push(0),f.push(e.arrayBlockIndices[u]));for(var v=[],m=0;m<s[u].length;m++)d[u]<=s[u][m]&&s[u][m]<p[u]&&v.push(s[u][m]-d[u]);h.push(v)}var b=["SS"],g=["'use strict'"],y=[];for(m=0;m<n;++m)y.push(["s",m,"=SS[",m,"]"].join(""));for(u=0;u<e.arrayArgs.length;++u){b.push("a"+u),b.push("t"+u),b.push("p"+u);for(m=0;m<n;++m)y.push(["t",u,"p",m,"=t",u,"[",d[u]+m,"]"].join(""));for(m=0;m<Math.abs(e.arrayBlockIndices[u]);++m)y.push(["t",u,"b",m,"=t",u,"[",l[u]+m,"]"].join(""))}for(u=0;u<e.scalarArgs.length;++u)b.push("Y"+u);if(e.shapeArgs.length>0&&y.push("shape=SS.slice(0)"),e.indexArgs.length>0){var O=new Array(n);for(u=0;u<n;++u)O[u]="0";y.push(["index=[",O.join(","),"]"].join(""))}for(u=0;u<e.offsetArgs.length;++u){var k=e.offsetArgs[u],w=[];for(m=0;m<k.offset.length;++m)0!==k.offset[m]&&(1===k.offset[m]?w.push(["t",k.array,"p",m].join("")):w.push([k.offset[m],"*t",k.array,"p",m].join("")));0===w.length?y.push("q"+u+"=0"):y.push(["q",u,"=",w.join("+")].join(""))}var x=r([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for((y=y.concat(x)).length>0&&g.push("var "+y.join(",")),u=0;u<e.arrayArgs.length;++u)g.push("p"+u+"|=0");e.pre.body.length>3&&g.push(i(e.pre,e,c));var j=i(e.body,e,c),S=function(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}(h);S<n?g.push(function(e,t,n,r){for(var i=t.length,o=n.arrayArgs.length,s=n.blockSize,c=n.indexArgs.length>0,u=[],l=0;l<o;++l)u.push(["var offset",l,"=p",l].join(""));for(l=e;l<i;++l)u.push(["for(var j"+l+"=SS[",t[l],"]|0;j",l,">0;){"].join("")),u.push(["if(j",l,"<",s,"){"].join("")),u.push(["s",t[l],"=j",l].join("")),u.push(["j",l,"=0"].join("")),u.push(["}else{s",t[l],"=",s].join("")),u.push(["j",l,"-=",s,"}"].join("")),c&&u.push(["index[",t[l],"]=j",l].join(""));for(l=0;l<o;++l){for(var f=["offset"+l],d=e;d<i;++d)f.push(["j",d,"*t",l,"p",t[d]].join(""));u.push(["p",l,"=(",f.join("+"),")"].join(""))}for(u.push(a(t,n,r)),l=e;l<i;++l)u.push("}");return u.join("\n")}(S,h[0],e,j)):g.push(a(h[0],e,j)),e.post.body.length>3&&g.push(i(e.post,e,c)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+g.join("\n")+"\n----------");var _=[e.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",S,o(c)].join("");return new Function(["function ",_,"(",b.join(","),"){",g.join("\n"),"} return ",_].join(""))()}},function(e,t,n){"use strict";function r(e,t,n){var a=0|e[n];if(a<=0)return[];var i,o=new Array(a);if(n===e.length-1)for(i=0;i<a;++i)o[i]=t;else for(i=0;i<a;++i)o[i]=r(e,t,n+1);return o}e.exports=function(e,t){switch("undefined"===typeof t&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,t);break;case"object":if("number"===typeof e.length)return r(e,t,0)}return[]}},function(e,t,n){var r=n(384);function a(e,t,n,a,i,o){var s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w,x,j,S,_,C,E,N,T;for(e|=0,t|=0,i|=0,o|=0,s=n|=0,c=r.log2(s),j=0;j<t;++j){for(p=s>>1,f=0,u=0;u<s-1;u++){for(u<f&&(y=a[i+u],a[i+u]=a[i+f],a[i+f]=y,y=a[o+u],a[o+u]=a[o+f],a[o+f]=y),d=p;d<=f;)f-=d,d>>=1;f+=d}for(b=-1,g=0,m=1,h=0;h<c;h++){for(v=m,m<<=1,w=1,x=0,f=0;f<v;f++){for(u=f;u<s;u+=m)S=a[i+(l=u+v)],_=a[o+l],C=a[i+u],E=a[o+u],O=(N=w*(S+_))-_*(w+x),k=N+(T=S*(x-w)),a[i+l]=C-O,a[o+l]=E-k,a[i+u]+=O,a[o+u]+=k;T=w*(g-b),w=(N=b*(w+x))-x*(b+g),x=N+T}g=Math.sqrt((1-b)/2),e<0&&(g=-g),b=Math.sqrt((1+b)/2)}if(e<0){var I=1/s;for(u=0;u<s;u++)a[i+u]*=I,a[o+u]*=I}i+=n,o+=n}}e.exports=function(e,t,n,i,o,s,c){e|=0,t|=0,n|=0,o|=0,s|=0,r.isPow2(n)?a(e,t,n,i,o,s):function(e,t,n,i,o,s,c){e|=0,t|=0,n|=0,o|=0,s|=0,c|=0;var u,l,f,d,p,h,v,m,b,g=r.nextPow2(2*n+1),y=c,O=y+n,k=O+n,w=k+g,x=w+g,j=x+g,S=-e*Math.PI/n;for(b=0;b<n;++b)l=S*(b*b%(2*n)),d=Math.cos(l),p=Math.sin(l),i[x+(g-b)]=i[x+b]=i[y+b]=d,i[j+(g-b)]=i[j+b]=i[O+b]=p;for(b=n;b<=g-n;++b)i[x+b]=0;for(b=n;b<=g-n;++b)i[j+b]=0;a(1,1,g,i,x,j),S=e<0?1/n:1;for(u=0;u<t;++u){for(b=0;b<n;++b)l=i[o+b],f=i[s+b],h=(d=i[y+b])*(l+f),v=l*((p=-i[O+b])-d),m=f*(d+p),i[k+b]=h-m,i[w+b]=h+v;for(b=n;b<g;++b)i[k+b]=0;for(b=n;b<g;++b)i[w+b]=0;for(a(1,1,g,i,k,w),b=0;b<g;++b)l=i[k+b],f=i[w+b],h=(d=i[x+b])*(l+f),v=l*((p=i[j+b])-d),m=f*(d+p),i[k+b]=h-m,i[w+b]=h+v;for(a(-1,1,g,i,k,w),b=0;b<n;++b)l=i[k+b],f=i[w+b],h=(d=i[y+b])*(l+f),v=l*((p=-i[O+b])-d),m=f*(d+p),i[o+b]=S*(h-m),i[s+b]=S*(h+v);o+=n,s+=n}}(e,t,n,i,o,s,c)},e.exports.scratchMemory=function(e){return r.isPow2(e)?0:2*e+4*r.nextPow2(2*e+1)}},function(e,t,n){"use strict";var r=n(221),a=n(313),i=n(383);t.clone=function(e){var t=e.dtype;"generic"!==t&&"array"!==t||(t="double");var n=i.malloc(e.size,t),o=r(n,e.shape);return a.assign(o,e),o},t.malloc=function(e,t){t||(t="double");for(var n=1,a=new Array(e.length),o=e.length-1;o>=0;--o)a[o]=n,n*=e[o];return r(i.malloc(n,t),e,a,0)},t.free=function(e){"generic"!==e.dtype&&"array"!==e.dtype&&i.free(e.data)},t.zeros=function(e,t){t||(t="double");for(var n=1,a=new Array(e.length),o=e.length-1;o>=0;--o)a[o]=n,n*=e[o];var s=i.malloc(n,t);for(o=0;o<n;++o)s[o]=0;return r(s,e,a,0)},t.ones=function(e,t){t||(t="double");for(var n=1,a=new Array(e.length),o=e.length-1;o>=0;--o)a[o]=n,n*=e[o];var s=i.malloc(n,t);for(o=0;o<n;++o)s[o]=1;return r(s,e,a,0)},t.eye=function(e,t){var n,a;t||(t="double");var o=1,s=new Array(e.length);for(n=e.length-1;n>=0;--n)s[n]=o,o*=e[n];var c=i.malloc(o,t);for(n=0;n<o;++n)c[n]=0;var u=1/0,l=0;for(n=e.length-1;n>=0;n--)l+=s[n],u=Math.min(u,e[n]);for(n=0,a=0;n<u;n++,a+=l)c[a]=1;return r(c,e,s,0)}},function(e,t,n){"use strict";var r=n(602),a=n(381),i=["args","body"],o=["pre","post","printCode","funcName","blockSize"];e.exports=function(e){for(var t in e)i.indexOf(t)<0&&o.indexOf(t)<0&&console.warn("cwise: Unknown argument '"+t+"' passed to expression compiler");for(var n=0;n<i.length;++n)if(!e[i[n]])throw new Error("cwise: Missing argument: "+i[n]);return a({args:e.args,pre:r(e.pre||function(){}),body:r(e.body),post:r(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}},function(e,t,n){"use strict";(function(t){var r=n(603),a=n(382),i=0;function o(e,t,n){this.name=e,this.lvalue=t,this.rvalue=n,this.count=0}function s(e,t,n,r){this.body=e,this.args=t,this.thisVars=n,this.localVars=r}e.exports=function(e){for(var n=["(",e,")()"].join(""),c=r.parse(n,{range:!0}),u="_inline_"+i+++"_",l=function(e){for(var t=e.body[0].expression.callee.params,n=new Array(t.length),r=0;r<t.length;++r)n[r]=t[r].name;return n}(c),f=new Array(l.length),d=0;d<l.length;++d)f[d]=new o([u,"arg",d,"_"].join(""),!1,!1);for(var p=new Array(n.length),h=(d=0,n.length);d<h;++d)p[d]=n.charAt(d);var v,m=[],b=[];function g(e,t){for(var n=e.range[0],r=e.range[1],a=n+1;a<r;++a)p[a]="";p[n]=t}return function e(n,r){if(n.parent=r,"MemberExpression"===n.type)n.computed?(e(n.object,n),e(n.property,n)):"ThisExpression"===n.object.type?g(n,function(e){var t="this_"+e.replace(/\_/g,"__");return b.push(t),t}(n.property.name)):e(n.object,n);else{if("ThisExpression"===n.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===n.type){var a=n.name,i=l.indexOf(a);if(i>=0){var o=f[i],s=function(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?1:3:"UpdateExpression"===e.parent.type?3:2}(n);1&s&&(o.lvalue=!0),2&s&&(o.rvalue=!0),++o.count,g(n,o.name)}else(function(e){if("eval"===e)throw new Error("cwise-parser: eval() not allowed");return"undefined"!==typeof window?e in window:"undefined"!==typeof t?e in t:"undefined"!==typeof self&&e in self})(a)||g(n,function(e){var t=u+e.replace(/\_/g,"__");return m.push(t),t}(a))}else if("Literal"===n.type)"string"===typeof n.value&&g(n,"'"+n.value.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'");else{if("WithStatement"===n.type)throw new Error("cwise-parser: with() statements not allowed");for(var c=Object.keys(n),d=0,p=c.length;d<p;++d)if("parent"!==c[d]){var h=n[c[d]];if(h)if(h instanceof Array)for(var v=0;v<h.length;++v)h[v]&&"string"===typeof h[v].type&&e(h[v],n);else"string"===typeof h.type&&e(h,n)}}}}(c.body[0].expression.callee.body,void 0),a(m),a(b),new s((v=c.body[0].expression.callee.body,p.slice(v.range[0],v.range[1]).join("")),f,b,m)}}).call(this,n(110))},function(e,t,n){var r,a,i;!function(n,o){"use strict";a=[t],r=function(e){var t,n,r,a,i,o,s,c,u,l,f,d,p,h,v,m,b,g;function y(e,t){if(!e)throw new Error("ASSERT: "+t)}function O(e){return e>=48&&e<=57}function k(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function w(e){return"01234567".indexOf(e)>=0}function x(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function j(e){return 10===e||13===e||8232===e||8233===e}function S(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&s.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function _(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&s.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function C(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function E(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function N(e){return"eval"===e||"arguments"===e}function T(e){if(l&&E(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function I(e,t,n,r,a){var i;y("number"===typeof n,"Comment must have valid position"),b.lastCommentStart>=n||(b.lastCommentStart=n,i={type:e,value:t},g.range&&(i.range=[n,r]),g.loc&&(i.loc=a),g.comments.push(i),g.attachComment&&(g.leadingComments.push(i),g.trailingComments.push(i)))}function A(e){var t,n,r,a;for(t=f-e,n={start:{line:d,column:f-p-e}};f<h;)if(r=u.charCodeAt(f),++f,j(r))return g.comments&&(a=u.slice(t+e,f-1),n.end={line:d,column:f-p-1},I("Line",a,t,f-1,n)),13===r&&10===u.charCodeAt(f)&&++f,++d,void(p=f);g.comments&&(a=u.slice(t+e,f),n.end={line:d,column:f-p},I("Line",a,t,f,n))}function M(){var e,t,n,r;for(g.comments&&(e=f-2,t={start:{line:d,column:f-p-2}});f<h;)if(j(n=u.charCodeAt(f)))13===n&&10===u.charCodeAt(f+1)&&++f,++d,++f,p=f,f>=h&&ie({},o.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===u.charCodeAt(f+1))return++f,++f,void(g.comments&&(r=u.slice(e+2,f-2),t.end={line:d,column:f-p},I("Block",r,e,f,t)));++f}else++f;ie({},o.UnexpectedToken,"ILLEGAL")}function P(){var e,t;for(t=0===f;f<h;)if(x(e=u.charCodeAt(f)))++f;else if(j(e))++f,13===e&&10===u.charCodeAt(f)&&++f,++d,p=f,t=!0;else if(47===e)if(47===(e=u.charCodeAt(f+1)))++f,++f,A(2),t=!0;else{if(42!==e)break;++f,++f,M()}else if(t&&45===e){if(45!==u.charCodeAt(f+1)||62!==u.charCodeAt(f+2))break;f+=3,A(3)}else{if(60!==e)break;if("!--"!==u.slice(f+1,f+4))break;++f,++f,++f,++f,A(4)}}function R(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t){if(!(f<h&&k(u[f])))return"";r=u[f++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(a)}function D(){var e,t;for(e=u.charCodeAt(f++),t=String.fromCharCode(e),92===e&&(117!==u.charCodeAt(f)&&ie({},o.UnexpectedToken,"ILLEGAL"),++f,(e=R("u"))&&"\\"!==e&&S(e.charCodeAt(0))||ie({},o.UnexpectedToken,"ILLEGAL"),t=e);f<h&&_(e=u.charCodeAt(f));)++f,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==u.charCodeAt(f)&&ie({},o.UnexpectedToken,"ILLEGAL"),++f,(e=R("u"))&&"\\"!==e&&_(e.charCodeAt(0))||ie({},o.UnexpectedToken,"ILLEGAL"),t+=e);return t}function F(){var e,t;for(e=f++;f<h;){if(92===(t=u.charCodeAt(f)))return f=e,D();if(!_(t))break;++f}return u.slice(e,f)}function L(){var e,n;return e=f,{type:1===(n=92===u.charCodeAt(f)?D():F()).length?t.Identifier:T(n)?t.Keyword:"null"===n?t.NullLiteral:"true"===n||"false"===n?t.BooleanLiteral:t.Identifier,value:n,lineNumber:d,lineStart:p,start:e,end:f}}function z(){var e,n,r,a,i=f,s=u.charCodeAt(f),c=u[f];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++f,g.tokenize&&(40===s?g.openParenToken=g.tokens.length:123===s&&(g.openCurlyToken=g.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(s),lineNumber:d,lineStart:p,start:i,end:f};default:if(61===(e=u.charCodeAt(f+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return f+=2,{type:t.Punctuator,value:String.fromCharCode(s)+String.fromCharCode(e),lineNumber:d,lineStart:p,start:i,end:f};case 33:case 61:return f+=2,61===u.charCodeAt(f)&&++f,{type:t.Punctuator,value:u.slice(i,f),lineNumber:d,lineStart:p,start:i,end:f}}}return">>>="===(a=u.substr(f,4))?(f+=4,{type:t.Punctuator,value:a,lineNumber:d,lineStart:p,start:i,end:f}):">>>"===(r=a.substr(0,3))||"<<="===r||">>="===r?(f+=3,{type:t.Punctuator,value:r,lineNumber:d,lineStart:p,start:i,end:f}):c===(n=r.substr(0,2))[1]&&"+-<>&|".indexOf(c)>=0||"=>"===n?(f+=2,{type:t.Punctuator,value:n,lineNumber:d,lineStart:p,start:i,end:f}):"<>=!+-*%&|^/".indexOf(c)>=0?(++f,{type:t.Punctuator,value:c,lineNumber:d,lineStart:p,start:i,end:f}):void ie({},o.UnexpectedToken,"ILLEGAL")}function q(e){for(var n="";f<h&&k(u[f]);)n+=u[f++];return 0===n.length&&ie({},o.UnexpectedToken,"ILLEGAL"),S(u.charCodeAt(f))&&ie({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:d,lineStart:p,start:e,end:f}}function V(e){for(var n="0"+u[f++];f<h&&w(u[f]);)n+=u[f++];return(S(u.charCodeAt(f))||O(u.charCodeAt(f)))&&ie({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:d,lineStart:p,start:e,end:f}}function B(){var e,t;for(e=f+1;e<h;++e){if("8"===(t=u[e])||"9"===t)return!1;if(!w(t))return!0}return!0}function U(){var e,n,r;if(y(O((r=u[f]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),n=f,e="","."!==r){if(e=u[f++],r=u[f],"0"===e){if("x"===r||"X"===r)return++f,q(n);if(w(r)&&B())return V(n)}for(;O(u.charCodeAt(f));)e+=u[f++];r=u[f]}if("."===r){for(e+=u[f++];O(u.charCodeAt(f));)e+=u[f++];r=u[f]}if("e"===r||"E"===r)if(e+=u[f++],"+"!==(r=u[f])&&"-"!==r||(e+=u[f++]),O(u.charCodeAt(f)))for(;O(u.charCodeAt(f));)e+=u[f++];else ie({},o.UnexpectedToken,"ILLEGAL");return S(u.charCodeAt(f))&&ie({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:d,lineStart:p,start:n,end:f}}function W(){var e,n,r,a,i,s,c,l,v="",m=!1;for(c=d,l=p,y("'"===(e=u[f])||'"'===e,"String literal must starts with a quote"),n=f,++f;f<h;){if((r=u[f++])===e){e="";break}if("\\"===r)if((r=u[f++])&&j(r.charCodeAt(0)))++d,"\r"===r&&"\n"===u[f]&&++f,p=f;else switch(r){case"u":case"x":s=f,(i=R(r))?v+=i:(f=s,v+=r);break;case"n":v+="\n";break;case"r":v+="\r";break;case"t":v+="\t";break;case"b":v+="\b";break;case"f":v+="\f";break;case"v":v+="\v";break;default:w(r)?(0!==(a="01234567".indexOf(r))&&(m=!0),f<h&&w(u[f])&&(m=!0,a=8*a+"01234567".indexOf(u[f++]),"0123".indexOf(r)>=0&&f<h&&w(u[f])&&(a=8*a+"01234567".indexOf(u[f++]))),v+=String.fromCharCode(a)):v+=r}else{if(j(r.charCodeAt(0)))break;v+=r}}return""!==e&&ie({},o.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:v,octal:m,startLineNumber:c,startLineStart:l,lineNumber:d,lineStart:p,start:n,end:f}}function G(e,t){var n;try{n=new RegExp(e,t)}catch(r){ie({},o.InvalidRegExp)}return n}function H(){var e,t,n,r;for(y("/"===(e=u[f]),"Regular expression literal must start with a slash"),t=u[f++],n=!1,r=!1;f<h;)if(t+=e=u[f++],"\\"===e)j((e=u[f++]).charCodeAt(0))&&ie({},o.UnterminatedRegExp),t+=e;else if(j(e.charCodeAt(0)))ie({},o.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||ie({},o.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}function K(){var e,t,n,r;for(t="",n="";f<h&&_((e=u[f]).charCodeAt(0));)if(++f,"\\"===e&&f<h)if("u"===(e=u[f])){if(r=++f,e=R("u"))for(n+=e,t+="\\u";r<f;++r)t+=u[r];else f=r,n+="u",t+="\\u";oe({},o.UnexpectedToken,"ILLEGAL")}else t+="\\",oe({},o.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function X(){var e,n,r,a;return m=null,P(),e=f,n=H(),r=K(),a=G(n.value,r.value),g.tokenize?{type:t.RegularExpression,value:a,lineNumber:d,lineStart:p,start:e,end:f}:{literal:n.literal+r.literal,value:a,start:e,end:f}}function Q(){var e,t,n,r;return P(),e=f,t={start:{line:d,column:f-p}},n=X(),t.end={line:d,column:f-p},g.tokenize||(g.tokens.length>0&&(r=g.tokens[g.tokens.length-1]).range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||g.tokens.pop()),g.tokens.push({type:"RegularExpression",value:n.literal,range:[e,f],loc:t})),n}function Y(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}function Z(){var e,t;if(!(e=g.tokens[g.tokens.length-1]))return Q();if("Punctuator"===e.type){if("]"===e.value)return z();if(")"===e.value)return!(t=g.tokens[g.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?z():Q();if("}"===e.value){if(g.tokens[g.openCurlyToken-3]&&"Keyword"===g.tokens[g.openCurlyToken-3].type){if(!(t=g.tokens[g.openCurlyToken-4]))return z()}else{if(!g.tokens[g.openCurlyToken-4]||"Keyword"!==g.tokens[g.openCurlyToken-4].type)return z();if(!(t=g.tokens[g.openCurlyToken-5]))return Q()}return r.indexOf(t.value)>=0?z():Q()}return Q()}return"Keyword"===e.type&&"this"!==e.value?Q():z()}function J(){var e;return P(),f>=h?{type:t.EOF,lineNumber:d,lineStart:p,start:f,end:f}:S(e=u.charCodeAt(f))?L():40===e||41===e||59===e?z():39===e||34===e?W():46===e?O(u.charCodeAt(f+1))?U():z():O(e)?U():g.tokenize&&47===e?Z():z()}function $(){var e,r,a;return P(),e={start:{line:d,column:f-p}},r=J(),e.end={line:d,column:f-p},r.type!==t.EOF&&(a=u.slice(r.start,r.end),g.tokens.push({type:n[r.type],value:a,range:[r.start,r.end],loc:e})),r}function ee(){var e;return f=(e=m).end,d=e.lineNumber,p=e.lineStart,m="undefined"!==typeof g.tokens?$():J(),f=e.end,d=e.lineNumber,p=e.lineStart,e}function te(){var e,t,n;e=f,t=d,n=p,m="undefined"!==typeof g.tokens?$():J(),f=e,d=t,p=n}function ne(e,t){this.line=e,this.column=t}function re(e,t,n,r){this.start=new ne(e,t),this.end=new ne(n,r)}function ae(){var e,t,n,r;return e=f,t=d,n=p,P(),r=d!==t,f=e,d=t,p=n,r}function ie(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(function(e,t){return y(t<r.length,"Message reference must be in range"),r[t]}));throw"number"===typeof e.lineNumber?((n=new Error("Line "+e.lineNumber+": "+a)).index=e.start,n.lineNumber=e.lineNumber,n.column=e.start-p+1):((n=new Error("Line "+d+": "+a)).index=f,n.lineNumber=d,n.column=f-p+1),n.description=a,n}function oe(){try{ie.apply(null,arguments)}catch(e){if(!g.errors)throw e;g.errors.push(e)}}function se(e){if(e.type===t.EOF&&ie(e,o.UnexpectedEOS),e.type===t.NumericLiteral&&ie(e,o.UnexpectedNumber),e.type===t.StringLiteral&&ie(e,o.UnexpectedString),e.type===t.Identifier&&ie(e,o.UnexpectedIdentifier),e.type===t.Keyword){if(C(e.value))ie(e,o.UnexpectedReserved);else if(l&&E(e.value))return void oe(e,o.StrictReservedWord);ie(e,o.UnexpectedToken,e.value)}ie(e,o.UnexpectedToken,e.value)}function ce(e){var n=ee();n.type===t.Punctuator&&n.value===e||se(n)}function ue(e){var n=ee();n.type===t.Keyword&&n.value===e||se(n)}function le(e){return m.type===t.Punctuator&&m.value===e}function fe(e){return m.type===t.Keyword&&m.value===e}function de(){var e;return m.type===t.Punctuator&&("="===(e=m.value)||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function pe(){var e,n=f,r=d,a=p,i=m;if(59===u.charCodeAt(f)||le(";"))ee();else{if(e=d,P(),d!==e)return f=n,d=r,p=a,void(m=i);m.type===t.EOF||le("}")||se(m)}}function he(e){return e.type===a.Identifier||e.type===a.MemberExpression}function ve(){var e,t=[];for(e=m,ce("[");!le("]");)le(",")?(ee(),t.push(null)):(t.push(Pe()),le("]")||ce(","));return ee(),v.markEnd(v.createArrayExpression(t),e)}function me(e,t){var n,r,a;return n=l,a=m,r=st(),t&&l&&N(e[0].name)&&oe(t,o.StrictParamName),l=n,v.markEnd(v.createFunctionExpression(null,e,[],r),a)}function be(){var e,n;return n=m,(e=ee()).type===t.StringLiteral||e.type===t.NumericLiteral?(l&&e.octal&&oe(e,o.StrictOctalLiteral),v.markEnd(v.createLiteral(e),n)):v.markEnd(v.createIdentifier(e.value),n)}function ge(){var e,n,r,a,i,s;return s=m,(e=m).type===t.Identifier?(r=be(),"get"!==e.value||le(":")?"set"!==e.value||le(":")?(ce(":"),a=Pe(),v.markEnd(v.createProperty("init",r,a),s)):(n=be(),ce("("),(e=m).type!==t.Identifier?(ce(")"),oe(e,o.UnexpectedToken,e.value),a=me([])):(i=[Le()],ce(")"),a=me(i,e)),v.markEnd(v.createProperty("set",n,a),s)):(n=be(),ce("("),ce(")"),a=me([]),v.markEnd(v.createProperty("get",n,a),s))):e.type!==t.EOF&&e.type!==t.Punctuator?(n=be(),ce(":"),a=Pe(),v.markEnd(v.createProperty("init",n,a),s)):void se(e)}function ye(){var e,t,n,r,s,c=[],u={},f=String;for(s=m,ce("{");!le("}");)t=(e=ge()).key.type===a.Identifier?e.key.name:f(e.key.value),r="init"===e.kind?i.Data:"get"===e.kind?i.Get:i.Set,n="$"+t,Object.prototype.hasOwnProperty.call(u,n)?(u[n]===i.Data?l&&r===i.Data?oe({},o.StrictDuplicateProperty):r!==i.Data&&oe({},o.AccessorDataProperty):r===i.Data?oe({},o.AccessorDataProperty):u[n]&r&&oe({},o.AccessorGetSet),u[n]|=r):u[n]=r,c.push(e),le("}")||ce(",");return ce("}"),v.markEnd(v.createObjectExpression(c),s)}function Oe(){var e;return ce("("),e=Re(),ce(")"),e}function ke(){var e,n,r,a;if(le("("))return Oe();if(le("["))return ve();if(le("{"))return ye();if(e=m.type,a=m,e===t.Identifier)r=v.createIdentifier(ee().value);else if(e===t.StringLiteral||e===t.NumericLiteral)l&&m.octal&&oe(m,o.StrictOctalLiteral),r=v.createLiteral(ee());else if(e===t.Keyword){if(fe("function"))return lt();fe("this")?(ee(),r=v.createThisExpression()):se(ee())}else e===t.BooleanLiteral?((n=ee()).value="true"===n.value,r=v.createLiteral(n)):e===t.NullLiteral?((n=ee()).value=null,r=v.createLiteral(n)):le("/")||le("/=")?(r="undefined"!==typeof g.tokens?v.createLiteral(Q()):v.createLiteral(X()),te()):se(ee());return v.markEnd(r,a)}function we(){var e=[];if(ce("("),!le(")"))for(;f<h&&(e.push(Pe()),!le(")"));)ce(",");return ce(")"),e}function xe(){var e,t;return t=m,Y(e=ee())||se(e),v.markEnd(v.createIdentifier(e.value),t)}function je(){return ce("."),xe()}function Se(){var e;return ce("["),e=Re(),ce("]"),e}function _e(){var e,t,n;return n=m,ue("new"),e=Ee(),t=le("(")?we():[],v.markEnd(v.createNewExpression(e,t),n)}function Ce(){var e,t,n,r,a=b.allowIn;for(r=m,b.allowIn=!0,e=fe("new")?_e():ke();;){if(le("."))n=je(),e=v.createMemberExpression(".",e,n);else if(le("("))t=we(),e=v.createCallExpression(e,t);else{if(!le("["))break;n=Se(),e=v.createMemberExpression("[",e,n)}v.markEnd(e,r)}return b.allowIn=a,e}function Ee(){var e,t,n;for(y(b.allowIn,"callee of new expression always allow in keyword."),n=m,e=fe("new")?_e():ke();le(".")||le("[");)le("[")?(t=Se(),e=v.createMemberExpression("[",e,t)):(t=je(),e=v.createMemberExpression(".",e,t)),v.markEnd(e,n);return e}function Ne(){var e,n,r=m;return e=Ce(),m.type===t.Punctuator&&(!le("++")&&!le("--")||ae()||(l&&e.type===a.Identifier&&N(e.name)&&oe({},o.StrictLHSPostfix),he(e)||oe({},o.InvalidLHSInAssignment),n=ee(),e=v.markEnd(v.createPostfixExpression(n.value,e),r))),e}function Te(){var e,n,r;return m.type!==t.Punctuator&&m.type!==t.Keyword?n=Ne():le("++")||le("--")?(r=m,e=ee(),n=Te(),l&&n.type===a.Identifier&&N(n.name)&&oe({},o.StrictLHSPrefix),he(n)||oe({},o.InvalidLHSInAssignment),n=v.createUnaryExpression(e.value,n),n=v.markEnd(n,r)):le("+")||le("-")||le("~")||le("!")?(r=m,e=ee(),n=Te(),n=v.createUnaryExpression(e.value,n),n=v.markEnd(n,r)):fe("delete")||fe("void")||fe("typeof")?(r=m,e=ee(),n=Te(),n=v.createUnaryExpression(e.value,n),n=v.markEnd(n,r),l&&"delete"===n.operator&&n.argument.type===a.Identifier&&oe({},o.StrictDelete)):n=Ne(),n}function Ie(e,n){var r=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function Ae(){var e,t,n,r,a,i,o,s,c,u;if(e=m,c=Te(),0===(a=Ie(r=m,b.allowIn)))return c;for(r.prec=a,ee(),t=[e,m],i=[c,r,o=Te()];(a=Ie(m,b.allowIn))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),s=i.pop().value,c=i.pop(),n=v.createBinaryExpression(s,c,o),t.pop(),e=t[t.length-1],v.markEnd(n,e),i.push(n);(r=ee()).prec=a,i.push(r),t.push(m),n=Te(),i.push(n)}for(n=i[u=i.length-1],t.pop();u>1;)n=v.createBinaryExpression(i[u-1].value,i[u-2],n),u-=2,e=t.pop(),v.markEnd(n,e);return n}function Me(){var e,t,n,r,a;return a=m,e=Ae(),le("?")&&(ee(),t=b.allowIn,b.allowIn=!0,n=Pe(),b.allowIn=t,ce(":"),r=Pe(),e=v.createConditionalExpression(e,n,r),v.markEnd(e,a)),e}function Pe(){var e,t,n,r,i;return e=m,i=m,r=t=Me(),de()&&(he(t)||oe({},o.InvalidLHSInAssignment),l&&t.type===a.Identifier&&N(t.name)&&oe(e,o.StrictLHSAssignment),e=ee(),n=Pe(),r=v.markEnd(v.createAssignmentExpression(e.value,t,n),i)),r}function Re(){var e,t=m;if(e=Pe(),le(",")){for(e=v.createSequenceExpression([e]);f<h&&le(",");)ee(),e.expressions.push(Pe());v.markEnd(e,t)}return e}function De(){for(var e,t=[];f<h&&!le("}")&&"undefined"!==typeof(e=ft());)t.push(e);return t}function Fe(){var e,t;return t=m,ce("{"),e=De(),ce("}"),v.markEnd(v.createBlockStatement(e),t)}function Le(){var e,n;return n=m,(e=ee()).type!==t.Identifier&&se(e),v.markEnd(v.createIdentifier(e.value),n)}function ze(e){var t,n,r=null;return n=m,t=Le(),l&&N(t.name)&&oe({},o.StrictVarName),"const"===e?(ce("="),r=Pe()):le("=")&&(ee(),r=Pe()),v.markEnd(v.createVariableDeclarator(t,r),n)}function qe(e){var t=[];do{if(t.push(ze(e)),!le(","))break;ee()}while(f<h);return t}function Ve(){var e;return ue("var"),e=qe(),pe(),v.createVariableDeclaration(e,"var")}function Be(e){var t,n;return n=m,ue(e),t=qe(e),pe(),v.markEnd(v.createVariableDeclaration(t,e),n)}function Ue(){return ce(";"),v.createEmptyStatement()}function We(){var e=Re();return pe(),v.createExpressionStatement(e)}function Ge(){var e,t,n;return ue("if"),ce("("),e=Re(),ce(")"),t=ot(),fe("else")?(ee(),n=ot()):n=null,v.createIfStatement(e,t,n)}function He(){var e,t,n;return ue("do"),n=b.inIteration,b.inIteration=!0,e=ot(),b.inIteration=n,ue("while"),ce("("),t=Re(),ce(")"),le(";")&&ee(),v.createDoWhileStatement(e,t)}function Ke(){var e,t,n;return ue("while"),ce("("),e=Re(),ce(")"),n=b.inIteration,b.inIteration=!0,t=ot(),b.inIteration=n,v.createWhileStatement(e,t)}function Xe(){var e,t,n;return n=m,e=ee(),t=qe(),v.markEnd(v.createVariableDeclaration(t,e.value),n)}function Qe(){var e,t,n,r,a,i,s,c=b.allowIn;return e=t=n=null,ue("for"),ce("("),le(";")?ee():(fe("var")||fe("let")?(b.allowIn=!1,e=Xe(),b.allowIn=c,1===e.declarations.length&&fe("in")&&(ee(),r=e,a=Re(),e=null)):(b.allowIn=!1,e=Re(),b.allowIn=c,fe("in")&&(he(e)||oe({},o.InvalidLHSInForIn),ee(),r=e,a=Re(),e=null)),"undefined"===typeof r&&ce(";")),"undefined"===typeof r&&(le(";")||(t=Re()),ce(";"),le(")")||(n=Re())),ce(")"),s=b.inIteration,b.inIteration=!0,i=ot(),b.inIteration=s,"undefined"===typeof r?v.createForStatement(e,t,n,i):v.createForInStatement(r,a,i)}function Ye(){var e,n=null;return ue("continue"),59===u.charCodeAt(f)?(ee(),b.inIteration||ie({},o.IllegalContinue),v.createContinueStatement(null)):ae()?(b.inIteration||ie({},o.IllegalContinue),v.createContinueStatement(null)):(m.type===t.Identifier&&(e="$"+(n=Le()).name,Object.prototype.hasOwnProperty.call(b.labelSet,e)||ie({},o.UnknownLabel,n.name)),pe(),null!==n||b.inIteration||ie({},o.IllegalContinue),v.createContinueStatement(n))}function Ze(){var e,n=null;return ue("break"),59===u.charCodeAt(f)?(ee(),b.inIteration||b.inSwitch||ie({},o.IllegalBreak),v.createBreakStatement(null)):ae()?(b.inIteration||b.inSwitch||ie({},o.IllegalBreak),v.createBreakStatement(null)):(m.type===t.Identifier&&(e="$"+(n=Le()).name,Object.prototype.hasOwnProperty.call(b.labelSet,e)||ie({},o.UnknownLabel,n.name)),pe(),null!==n||b.inIteration||b.inSwitch||ie({},o.IllegalBreak),v.createBreakStatement(n))}function Je(){var e=null;return ue("return"),b.inFunctionBody||oe({},o.IllegalReturn),32===u.charCodeAt(f)&&S(u.charCodeAt(f+1))?(e=Re(),pe(),v.createReturnStatement(e)):ae()?v.createReturnStatement(null):(le(";")||le("}")||m.type===t.EOF||(e=Re()),pe(),v.createReturnStatement(e))}function $e(){var e,t;return l&&(P(),oe({},o.StrictModeWith)),ue("with"),ce("("),e=Re(),ce(")"),t=ot(),v.createWithStatement(e,t)}function et(){var e,t,n,r=[];for(n=m,fe("default")?(ee(),e=null):(ue("case"),e=Re()),ce(":");f<h&&!(le("}")||fe("default")||fe("case"));)t=ot(),r.push(t);return v.markEnd(v.createSwitchCase(e,r),n)}function tt(){var e,t,n,r,a;if(ue("switch"),ce("("),e=Re(),ce(")"),ce("{"),t=[],le("}"))return ee(),v.createSwitchStatement(e,t);for(r=b.inSwitch,b.inSwitch=!0,a=!1;f<h&&!le("}");)null===(n=et()).test&&(a&&ie({},o.MultipleDefaultsInSwitch),a=!0),t.push(n);return b.inSwitch=r,ce("}"),v.createSwitchStatement(e,t)}function nt(){var e;return ue("throw"),ae()&&ie({},o.NewlineAfterThrow),e=Re(),pe(),v.createThrowStatement(e)}function rt(){var e,t,n;return n=m,ue("catch"),ce("("),le(")")&&se(m),e=Le(),l&&N(e.name)&&oe({},o.StrictCatchVariable),ce(")"),t=Fe(),v.markEnd(v.createCatchClause(e,t),n)}function at(){var e,t=[],n=null;return ue("try"),e=Fe(),fe("catch")&&t.push(rt()),fe("finally")&&(ee(),n=Fe()),0!==t.length||n||ie({},o.NoCatchOrFinally),v.createTryStatement(e,[],t,n)}function it(){return ue("debugger"),pe(),v.createDebuggerStatement()}function ot(){var e,n,r,i,s=m.type;if(s===t.EOF&&se(m),s===t.Punctuator&&"{"===m.value)return Fe();if(i=m,s===t.Punctuator)switch(m.value){case";":return v.markEnd(Ue(),i);case"(":return v.markEnd(We(),i)}if(s===t.Keyword)switch(m.value){case"break":return v.markEnd(Ze(),i);case"continue":return v.markEnd(Ye(),i);case"debugger":return v.markEnd(it(),i);case"do":return v.markEnd(He(),i);case"for":return v.markEnd(Qe(),i);case"function":return v.markEnd(ut(),i);case"if":return v.markEnd(Ge(),i);case"return":return v.markEnd(Je(),i);case"switch":return v.markEnd(tt(),i);case"throw":return v.markEnd(nt(),i);case"try":return v.markEnd(at(),i);case"var":return v.markEnd(Ve(),i);case"while":return v.markEnd(Ke(),i);case"with":return v.markEnd($e(),i)}return(e=Re()).type===a.Identifier&&le(":")?(ee(),r="$"+e.name,Object.prototype.hasOwnProperty.call(b.labelSet,r)&&ie({},o.Redeclaration,"Label",e.name),b.labelSet[r]=!0,n=ot(),delete b.labelSet[r],v.markEnd(v.createLabeledStatement(e,n),i)):(pe(),v.markEnd(v.createExpressionStatement(e),i))}function st(){var e,n,r,i,s,c,d,p,g=[];for(p=m,ce("{");f<h&&m.type===t.StringLiteral&&(n=m,e=ft(),g.push(e),e.expression.type===a.Literal);)"use strict"===u.slice(n.start+1,n.end-1)?(l=!0,r&&oe(r,o.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(i=b.labelSet,s=b.inIteration,c=b.inSwitch,d=b.inFunctionBody,b.labelSet={},b.inIteration=!1,b.inSwitch=!1,b.inFunctionBody=!0;f<h&&!le("}")&&"undefined"!==typeof(e=ft());)g.push(e);return ce("}"),b.labelSet=i,b.inIteration=s,b.inSwitch=c,b.inFunctionBody=d,v.markEnd(v.createBlockStatement(g),p)}function ct(e){var t,n,r,a,i,s,c=[];if(ce("("),!le(")"))for(a={};f<h&&(n=m,t=Le(),i="$"+n.value,l?(N(n.value)&&(r=n,s=o.StrictParamName),Object.prototype.hasOwnProperty.call(a,i)&&(r=n,s=o.StrictParamDupe)):e||(N(n.value)?(e=n,s=o.StrictParamName):E(n.value)?(e=n,s=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(a,i)&&(e=n,s=o.StrictParamDupe)),c.push(t),a[i]=!0,!le(")"));)ce(",");return ce(")"),{params:c,stricted:r,firstRestricted:e,message:s}}function ut(){var e,t,n,r,a,i,s,c,u,f=[];return u=m,ue("function"),n=m,e=Le(),l?N(n.value)&&oe(n,o.StrictFunctionName):N(n.value)?(i=n,s=o.StrictFunctionName):E(n.value)&&(i=n,s=o.StrictReservedWord),f=(a=ct(i)).params,r=a.stricted,i=a.firstRestricted,a.message&&(s=a.message),c=l,t=st(),l&&i&&ie(i,s),l&&r&&oe(r,s),l=c,v.markEnd(v.createFunctionDeclaration(e,f,[],t),u)}function lt(){var e,t,n,r,a,i,s,c,u=null,f=[];return c=m,ue("function"),le("(")||(e=m,u=Le(),l?N(e.value)&&oe(e,o.StrictFunctionName):N(e.value)?(n=e,r=o.StrictFunctionName):E(e.value)&&(n=e,r=o.StrictReservedWord)),f=(a=ct(n)).params,t=a.stricted,n=a.firstRestricted,a.message&&(r=a.message),s=l,i=st(),l&&n&&ie(n,r),l&&t&&oe(t,r),l=s,v.markEnd(v.createFunctionExpression(u,f,[],i),c)}function ft(){if(m.type===t.Keyword)switch(m.value){case"const":case"let":return Be(m.value);case"function":return ut();default:return ot()}if(m.type!==t.EOF)return ot()}function dt(){for(var e,n,r,i=[];f<h&&(n=m).type===t.StringLiteral&&(e=ft(),i.push(e),e.expression.type===a.Literal);)"use strict"===u.slice(n.start+1,n.end-1)?(l=!0,r&&oe(r,o.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(;f<h&&"undefined"!==typeof(e=ft());)i.push(e);return i}function pt(){var e,t;return P(),te(),t=m,l=!1,e=dt(),v.markEnd(v.createProgram(e),t)}function ht(){var e,t,n,r=[];for(e=0;e<g.tokens.length;++e)n={type:(t=g.tokens[e]).type,value:t.value},g.range&&(n.range=t.range),g.loc&&(n.loc=t.loc),r.push(n);g.tokens=r}function vt(e,n){var r;"string"===typeof e||e instanceof String||(e=String(e)),v=c,f=0,d=(u=e).length>0?1:0,p=0,h=u.length,m=null,b={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},g={},(n=n||{}).tokens=!0,g.tokens=[],g.tokenize=!0,g.openParenToken=-1,g.openCurlyToken=-1,g.range="boolean"===typeof n.range&&n.range,g.loc="boolean"===typeof n.loc&&n.loc,"boolean"===typeof n.comment&&n.comment&&(g.comments=[]),"boolean"===typeof n.tolerant&&n.tolerant&&(g.errors=[]);try{if(te(),m.type===t.EOF)return g.tokens;for(ee();m.type!==t.EOF;)try{ee()}catch(a){if(m,g.errors){g.errors.push(a);break}throw a}ht(),r=g.tokens,"undefined"!==typeof g.comments&&(r.comments=g.comments),"undefined"!==typeof g.errors&&(r.errors=g.errors)}catch(i){throw i}finally{g={}}return r}function mt(e,t){var n,r;r=String,"string"===typeof e||e instanceof String||(e=r(e)),v=c,f=0,d=(u=e).length>0?1:0,p=0,h=u.length,m=null,b={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},g={},"undefined"!==typeof t&&(g.range="boolean"===typeof t.range&&t.range,g.loc="boolean"===typeof t.loc&&t.loc,g.attachComment="boolean"===typeof t.attachComment&&t.attachComment,g.loc&&null!==t.source&&void 0!==t.source&&(g.source=r(t.source)),"boolean"===typeof t.tokens&&t.tokens&&(g.tokens=[]),"boolean"===typeof t.comment&&t.comment&&(g.comments=[]),"boolean"===typeof t.tolerant&&t.tolerant&&(g.errors=[]),g.attachComment&&(g.range=!0,g.comments=[],g.bottomRightStack=[],g.trailingComments=[],g.leadingComments=[]));try{n=pt(),"undefined"!==typeof g.comments&&(n.comments=g.comments),"undefined"!==typeof g.tokens&&(ht(),n.tokens=g.tokens),"undefined"!==typeof g.errors&&(n.errors=g.errors)}catch(a){throw a}finally{g={}}return n}(n={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",n[t.EOF]="<end>",n[t.Identifier]="Identifier",n[t.Keyword]="Keyword",n[t.NullLiteral]="Null",n[t.NumericLiteral]="Numeric",n[t.Punctuator]="Punctuator",n[t.StringLiteral]="String",n[t.RegularExpression]="RegularExpression",r=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},i={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},s={NonAsciiIdentifierStart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),NonAsciiIdentifierPart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")},c={name:"SyntaxTree",processComment:function(e){var t,n;if(!(e.type===a.Program&&e.body.length>0)){for(g.trailingComments.length>0?g.trailingComments[0].range[0]>=e.range[1]?(n=g.trailingComments,g.trailingComments=[]):g.trailingComments.length=0:g.bottomRightStack.length>0&&g.bottomRightStack[g.bottomRightStack.length-1].trailingComments&&g.bottomRightStack[g.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(n=g.bottomRightStack[g.bottomRightStack.length-1].trailingComments,delete g.bottomRightStack[g.bottomRightStack.length-1].trailingComments);g.bottomRightStack.length>0&&g.bottomRightStack[g.bottomRightStack.length-1].range[0]>=e.range[0];)t=g.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):g.leadingComments.length>0&&g.leadingComments[g.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=g.leadingComments,g.leadingComments=[]),n&&(e.trailingComments=n),g.bottomRightStack.push(e)}},markEnd:function(e,t){return g.range&&(e.range=[t.start,f]),g.loc&&(e.loc=new re(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),d,f-p),this.postProcess(e)),g.attachComment&&this.processComment(e),e},postProcess:function(e){return g.source&&(e.loc.source=g.source),e},createArrayExpression:function(e){return{type:a.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:a.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){return{type:"||"===e||"&&"===e?a.LogicalExpression:a.BinaryExpression,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:a.BlockStatement,body:e}},createBreakStatement:function(e){return{type:a.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:a.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:a.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:a.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:a.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:a.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(e){return{type:a.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,r){return{type:a.ForStatement,init:e,test:t,update:n,body:r}},createForInStatement:function(e,t,n){return{type:a.ForInStatement,left:e,right:t,body:n,each:!1}},createFunctionDeclaration:function(e,t,n,r){return{type:a.FunctionDeclaration,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,n,r){return{type:a.FunctionExpression,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:a.Identifier,name:e}},createIfStatement:function(e,t,n){return{type:a.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:a.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:a.Literal,value:e.value,raw:u.slice(e.start,e.end)}},createMemberExpression:function(e,t,n){return{type:a.MemberExpression,computed:"["===e,object:t,property:n}},createNewExpression:function(e,t){return{type:a.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:a.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:a.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:a.Program,body:e}},createProperty:function(e,t,n){return{type:a.Property,key:t,value:n,kind:e}},createReturnStatement:function(e){return{type:a.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:a.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:a.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:a.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(e){return{type:a.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,r){return{type:a.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:r}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:a.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:a.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:a.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:a.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:a.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:a.WithStatement,object:e,body:t}}},e.version="1.2.5",e.tokenize=vt,e.parse=mt,e.Syntax=function(){var e,t={};for(e in"function"===typeof Object.create&&(t=Object.create(null)),a)a.hasOwnProperty(e)&&(t[e]=a[e]);return"function"===typeof Object.freeze&&Object.freeze(t),t}()},void 0===(i="function"===typeof r?r.apply(t,a):r)||(e.exports=i)}()},,function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,n){var r=n(124);e.exports=function(){return r.Date.now()}},function(e,t,n){var r=n(608),a=n(232),i=n(610),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?NaN:+e}},function(e,t,n){var r=n(609),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},function(e,t,n){var r=n(215),a=n(216);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},,function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"tf",(function(){return l})),n.d(t,"aux_inputs",(function(){return f})),n.d(t,"chords",(function(){return v})),n.d(t,"constants",(function(){return h})),n.d(t,"data",(function(){return O})),n.d(t,"logging",(function(){return m})),n.d(t,"melodies",(function(){return g})),n.d(t,"performance",(function(){return y})),n.d(t,"sequences",(function(){return b})),n.d(t,"MetronomeCallbackObject",(function(){return bq})),n.d(t,"Metronome",(function(){return gq})),n.d(t,"MidiConversionError",(function(){return Oq})),n.d(t,"midiToSequenceProto",(function(){return kq})),n.d(t,"sequenceProtoToMidi",(function(){return wq})),n.d(t,"urlToBlob",(function(){return xq})),n.d(t,"blobToNoteSequence",(function(){return jq})),n.d(t,"urlToNoteSequence",(function(){return Sq})),n.d(t,"BasePlayerCallback",(function(){return Nq})),n.d(t,"BasePlayer",(function(){return Tq})),n.d(t,"Player",(function(){return Aq})),n.d(t,"SoundFontPlayer",(function(){return Pq})),n.d(t,"PlayerWithClick",(function(){return Rq})),n.d(t,"MIDIPlayer",(function(){return Dq})),n.d(t,"BaseRecorderCallback",(function(){return Fq})),n.d(t,"Recorder",(function(){return Lq})),n.d(t,"BaseVisualizer",(function(){return qq})),n.d(t,"PianoRollCanvasVisualizer",(function(){return Vq})),n.d(t,"Visualizer",(function(){return Bq})),n.d(t,"BaseSVGVisualizer",(function(){return Uq})),n.d(t,"PianoRollSVGVisualizer",(function(){return Wq})),n.d(t,"WaterfallSVGVisualizer",(function(){return Gq})),n.d(t,"ScrollType",(function(){return Mq})),n.d(t,"StaffSVGVisualizer",(function(){return Hq})),n.d(t,"Coconet",(function(){return Jq})),n.d(t,"MusicRNN",(function(){return tV})),n.d(t,"MidiMe",(function(){return rV})),n.d(t,"Decoder",(function(){return fV})),n.d(t,"Encoder",(function(){return oV})),n.d(t,"MusicVAE",(function(){return OV})),n.d(t,"PianoGenie",(function(){return IV})),n.d(t,"PianoGenieKeysig",(function(){return MV})),n.d(t,"PianoGenieChord",(function(){return AV})),n.d(t,"PianoGenieKeysigChordFamily",(function(){return RV})),n.d(t,"PianoGenieKeysigChord",(function(){return PV})),n.d(t,"NoteSequence",(function(){return gE})),n.d(t,"OnsetsAndFrames",(function(){return bB})),n.d(t,"GANSynth",(function(){return LB})),n.d(t,"SPICE",(function(){return nU})),n.d(t,"DDSP",(function(){return gU}));var r={};n.r(r),n.d(r,"maxNorm",(function(){return Oe})),n.d(r,"unitNorm",(function(){return ke})),n.d(r,"nonNeg",(function(){return we})),n.d(r,"minMaxNorm",(function(){return xe}));var a={};n.r(a),n.d(a,"zeros",(function(){return Tt})),n.d(a,"ones",(function(){return It})),n.d(a,"constant",(function(){return At})),n.d(a,"randomUniform",(function(){return Mt})),n.d(a,"randomNormal",(function(){return Pt})),n.d(a,"truncatedNormal",(function(){return Rt})),n.d(a,"identity",(function(){return Dt})),n.d(a,"varianceScaling",(function(){return Ft})),n.d(a,"glorotUniform",(function(){return Lt})),n.d(a,"glorotNormal",(function(){return zt})),n.d(a,"heNormal",(function(){return qt})),n.d(a,"heUniform",(function(){return Vt})),n.d(a,"leCunNormal",(function(){return Bt})),n.d(a,"leCunUniform",(function(){return Ut})),n.d(a,"orthogonal",(function(){return Wt}));var i={};n.r(i),n.d(i,"inputLayer",(function(){return Oo})),n.d(i,"elu",(function(){return ko})),n.d(i,"reLU",(function(){return wo})),n.d(i,"leakyReLU",(function(){return xo})),n.d(i,"prelu",(function(){return jo})),n.d(i,"softmax",(function(){return So})),n.d(i,"thresholdedReLU",(function(){return _o})),n.d(i,"conv1d",(function(){return Co})),n.d(i,"conv2d",(function(){return Eo})),n.d(i,"conv2dTranspose",(function(){return No})),n.d(i,"conv3d",(function(){return To})),n.d(i,"separableConv2d",(function(){return Io})),n.d(i,"cropping2D",(function(){return Ao})),n.d(i,"upSampling2d",(function(){return Mo})),n.d(i,"depthwiseConv2d",(function(){return Po})),n.d(i,"activation",(function(){return Ro})),n.d(i,"dense",(function(){return Do})),n.d(i,"dropout",(function(){return Fo})),n.d(i,"spatialDropout1d",(function(){return Lo})),n.d(i,"flatten",(function(){return zo})),n.d(i,"repeatVector",(function(){return qo})),n.d(i,"reshape",(function(){return Vo})),n.d(i,"permute",(function(){return Bo})),n.d(i,"embedding",(function(){return Uo})),n.d(i,"add",(function(){return Wo})),n.d(i,"average",(function(){return Go})),n.d(i,"concatenate",(function(){return Ho})),n.d(i,"maximum",(function(){return Ko})),n.d(i,"minimum",(function(){return Xo})),n.d(i,"multiply",(function(){return Qo})),n.d(i,"dot",(function(){return Yo})),n.d(i,"batchNormalization",(function(){return Zo})),n.d(i,"layerNormalization",(function(){return Jo})),n.d(i,"zeroPadding2d",(function(){return $o})),n.d(i,"averagePooling1d",(function(){return es})),n.d(i,"avgPool1d",(function(){return ts})),n.d(i,"avgPooling1d",(function(){return ns})),n.d(i,"averagePooling2d",(function(){return rs})),n.d(i,"avgPool2d",(function(){return as})),n.d(i,"avgPooling2d",(function(){return is})),n.d(i,"averagePooling3d",(function(){return os})),n.d(i,"avgPool3d",(function(){return ss})),n.d(i,"avgPooling3d",(function(){return cs})),n.d(i,"globalAveragePooling1d",(function(){return us})),n.d(i,"globalAveragePooling2d",(function(){return ls})),n.d(i,"globalMaxPooling1d",(function(){return fs})),n.d(i,"globalMaxPooling2d",(function(){return ds})),n.d(i,"maxPooling1d",(function(){return ps})),n.d(i,"maxPooling2d",(function(){return hs})),n.d(i,"maxPooling3d",(function(){return vs})),n.d(i,"gru",(function(){return ms})),n.d(i,"gruCell",(function(){return bs})),n.d(i,"lstm",(function(){return gs})),n.d(i,"lstmCell",(function(){return ys})),n.d(i,"simpleRNN",(function(){return Os})),n.d(i,"simpleRNNCell",(function(){return ks})),n.d(i,"convLstm2d",(function(){return ws})),n.d(i,"convLstm2dCell",(function(){return xs})),n.d(i,"rnn",(function(){return js})),n.d(i,"stackedRNNCells",(function(){return Ss})),n.d(i,"bidirectional",(function(){return _s})),n.d(i,"timeDistributed",(function(){return Cs})),n.d(i,"globalMaxPool1d",(function(){return Es})),n.d(i,"globalMaxPool2d",(function(){return Ns})),n.d(i,"maxPool1d",(function(){return Ts})),n.d(i,"maxPool2d",(function(){return Is})),n.d(i,"Layer",(function(){return ln})),n.d(i,"RNN",(function(){return fi})),n.d(i,"RNNCell",(function(){return di})),n.d(i,"input",(function(){return fa})),n.d(i,"gaussianNoise",(function(){return As})),n.d(i,"gaussianDropout",(function(){return Ms})),n.d(i,"alphaDropout",(function(){return Ps})),n.d(i,"masking",(function(){return Rs}));var o={};n.r(o),n.d(o,"binaryAccuracy",(function(){return Ds})),n.d(o,"binaryCrossentropy",(function(){return Fs})),n.d(o,"sparseCategoricalAccuracy",(function(){return Ls})),n.d(o,"categoricalAccuracy",(function(){return zs})),n.d(o,"categoricalCrossentropy",(function(){return qs})),n.d(o,"precision",(function(){return Vs})),n.d(o,"recall",(function(){return Bs})),n.d(o,"cosineProximity",(function(){return Us})),n.d(o,"meanAbsoluteError",(function(){return Ws})),n.d(o,"meanAbsolutePercentageError",(function(){return Gs})),n.d(o,"MAPE",(function(){return Hs})),n.d(o,"mape",(function(){return Ks})),n.d(o,"meanSquaredError",(function(){return Xs})),n.d(o,"MSE",(function(){return Qs})),n.d(o,"mse",(function(){return Ys}));var s={};n.r(s),n.d(s,"modelFromJSON",(function(){return ta}));var c={};n.r(c),n.d(c,"l1l2",(function(){return Zs})),n.d(c,"l1",(function(){return Js})),n.d(c,"l2",(function(){return $s}));var u={};n.r(u),n.d(u,"array",(function(){return yf})),n.d(u,"Dataset",(function(){return bf})),n.d(u,"zip",(function(){return Of})),n.d(u,"CSVDataset",(function(){return Nf})),n.d(u,"TextLineDataset",(function(){return wf})),n.d(u,"csv",(function(){return qf})),n.d(u,"func",(function(){return Vf})),n.d(u,"generator",(function(){return Bf})),n.d(u,"microphone",(function(){return Gf})),n.d(u,"webcam",(function(){return Uf})),n.d(u,"FileDataSource",(function(){return Lf})),n.d(u,"URLDataSource",(function(){return zf})),n.d(u,"version_data",(function(){return Kf}));var l={};n.r(l),n.d(l,"AdadeltaOptimizer",(function(){return S.d})),n.d(l,"AdagradOptimizer",(function(){return S.e})),n.d(l,"AdamOptimizer",(function(){return S.f})),n.d(l,"AdamaxOptimizer",(function(){return S.g})),n.d(l,"MomentumOptimizer",(function(){return S.bc})),n.d(l,"Optimizer",(function(){return S.mc})),n.d(l,"RMSPropOptimizer",(function(){return S.tc})),n.d(l,"SGDOptimizer",(function(){return S.Lc})),n.d(l,"Tensor",(function(){return S.id})),n.d(l,"TensorBuffer",(function(){return S.jd})),n.d(l,"Variable",(function(){return S.qd})),n.d(l,"Rank",(function(){return S.vc})),n.d(l,"sumOutType",(function(){return S.Rh})),n.d(l,"upcastType",(function(){return S.pi})),n.d(l,"abs",(function(){return S.td})),n.d(l,"acos",(function(){return S.ud})),n.d(l,"acosh",(function(){return S.vd})),n.d(l,"add",(function(){return S.wd})),n.d(l,"addN",(function(){return S.xd})),n.d(l,"all",(function(){return S.zd})),n.d(l,"any",(function(){return S.Ad})),n.d(l,"argMax",(function(){return S.Bd})),n.d(l,"argMin",(function(){return S.Cd})),n.d(l,"asin",(function(){return S.Dd})),n.d(l,"asinh",(function(){return S.Ed})),n.d(l,"atan",(function(){return S.Fd})),n.d(l,"atan2",(function(){return S.Gd})),n.d(l,"atanh",(function(){return S.Hd})),n.d(l,"avgPool",(function(){return S.Id})),n.d(l,"avgPool3d",(function(){return S.Jd})),n.d(l,"basicLSTMCell",(function(){return S.Md})),n.d(l,"batchToSpaceND",(function(){return S.Rd})),n.d(l,"batchNorm",(function(){return S.Nd})),n.d(l,"batchNorm2d",(function(){return S.Od})),n.d(l,"batchNorm3d",(function(){return S.Pd})),n.d(l,"batchNorm4d",(function(){return S.Qd})),n.d(l,"bincount",(function(){return S.Sd})),n.d(l,"broadcastTo",(function(){return S.Ud})),n.d(l,"buffer",(function(){return S.Wd})),n.d(l,"cast",(function(){return S.Xd})),n.d(l,"ceil",(function(){return S.Yd})),n.d(l,"clipByValue",(function(){return S.Zd})),n.d(l,"clone",(function(){return S.ae})),n.d(l,"complex",(function(){return S.be})),n.d(l,"concat",(function(){return S.ce})),n.d(l,"concat1d",(function(){return S.de})),n.d(l,"concat2d",(function(){return S.ee})),n.d(l,"concat3d",(function(){return S.fe})),n.d(l,"concat4d",(function(){return S.ge})),n.d(l,"conv1d",(function(){return S.he})),n.d(l,"conv2d",(function(){return S.ie})),n.d(l,"conv2dTranspose",(function(){return S.je})),n.d(l,"conv3d",(function(){return S.ke})),n.d(l,"conv3dTranspose",(function(){return S.le})),n.d(l,"cos",(function(){return S.ne})),n.d(l,"cosh",(function(){return S.oe})),n.d(l,"cumsum",(function(){return S.qe})),n.d(l,"denseBincount",(function(){return S.se})),n.d(l,"depthToSpace",(function(){return S.ue})),n.d(l,"depthwiseConv2d",(function(){return S.ve})),n.d(l,"diag",(function(){return S.xe})),n.d(l,"dilation2d",(function(){return S.ye})),n.d(l,"div",(function(){return S.Ce})),n.d(l,"divNoNan",(function(){return S.De})),n.d(l,"dot",(function(){return S.Fe})),n.d(l,"elu",(function(){return S.He})),n.d(l,"equal",(function(){return S.Ne})),n.d(l,"erf",(function(){return S.Pe})),n.d(l,"exp",(function(){return S.Qe})),n.d(l,"expandDims",(function(){return S.Re})),n.d(l,"expm1",(function(){return S.Se})),n.d(l,"eye",(function(){return S.Te})),n.d(l,"fill",(function(){return S.Ve})),n.d(l,"floor",(function(){return S.Ye})),n.d(l,"floorDiv",(function(){return S.Ze})),n.d(l,"gather",(function(){return S.bf})),n.d(l,"greater",(function(){return S.kf})),n.d(l,"greaterEqual",(function(){return S.lf})),n.d(l,"imag",(function(){return S.pf})),n.d(l,"isFinite",(function(){return S.uf})),n.d(l,"isInf",(function(){return S.vf})),n.d(l,"isNaN",(function(){return S.wf})),n.d(l,"leakyRelu",(function(){return S.zf})),n.d(l,"less",(function(){return S.Af})),n.d(l,"lessEqual",(function(){return S.Bf})),n.d(l,"linspace",(function(){return S.Ff})),n.d(l,"localResponseNormalization",(function(){return S.Gf})),n.d(l,"log",(function(){return S.Hf})),n.d(l,"log1p",(function(){return S.If})),n.d(l,"logSigmoid",(function(){return S.Jf})),n.d(l,"logSoftmax",(function(){return S.Kf})),n.d(l,"logSumExp",(function(){return S.Lf})),n.d(l,"logicalAnd",(function(){return S.Mf})),n.d(l,"logicalNot",(function(){return S.Nf})),n.d(l,"logicalOr",(function(){return S.Of})),n.d(l,"logicalXor",(function(){return S.Pf})),n.d(l,"matMul",(function(){return S.Rf})),n.d(l,"max",(function(){return S.Tf})),n.d(l,"maxPool",(function(){return S.Uf})),n.d(l,"maxPool3d",(function(){return S.Vf})),n.d(l,"maxPoolWithArgmax",(function(){return S.Wf})),n.d(l,"maximum",(function(){return S.Xf})),n.d(l,"mean",(function(){return S.Zf})),n.d(l,"min",(function(){return S.bg})),n.d(l,"minimum",(function(){return S.cg})),n.d(l,"mirrorPad",(function(){return S.eg})),n.d(l,"mod",(function(){return S.fg})),n.d(l,"moments",(function(){return S.hg})),n.d(l,"mul",(function(){return S.jg})),n.d(l,"multiRNNCell",(function(){return S.lg})),n.d(l,"multinomial",(function(){return S.mg})),n.d(l,"neg",(function(){return S.ng})),n.d(l,"notEqual",(function(){return S.qg})),n.d(l,"oneHot",(function(){return S.sg})),n.d(l,"ones",(function(){return S.tg})),n.d(l,"onesLike",(function(){return S.ug})),n.d(l,"outerProduct",(function(){return S.wg})),n.d(l,"pad",(function(){return S.xg})),n.d(l,"pad1d",(function(){return S.yg})),n.d(l,"pad2d",(function(){return S.zg})),n.d(l,"pad3d",(function(){return S.Ag})),n.d(l,"pad4d",(function(){return S.Bg})),n.d(l,"pool",(function(){return S.Cg})),n.d(l,"pow",(function(){return S.Dg})),n.d(l,"prelu",(function(){return S.Fg})),n.d(l,"print",(function(){return S.Gg})),n.d(l,"prod",(function(){return S.Hg})),n.d(l,"rand",(function(){return S.Jg})),n.d(l,"randomGamma",(function(){return S.Kg})),n.d(l,"randomNormal",(function(){return S.Lg})),n.d(l,"randomUniform",(function(){return S.Mg})),n.d(l,"range",(function(){return S.Ng})),n.d(l,"real",(function(){return S.Pg})),n.d(l,"reciprocal",(function(){return S.Qg})),n.d(l,"relu",(function(){return S.Ug})),n.d(l,"relu6",(function(){return S.Vg})),n.d(l,"reshape",(function(){return S.Xg})),n.d(l,"reverse",(function(){return S.Yg})),n.d(l,"reverse1d",(function(){return S.Zg})),n.d(l,"reverse2d",(function(){return S.ah})),n.d(l,"reverse3d",(function(){return S.bh})),n.d(l,"reverse4d",(function(){return S.ch})),n.d(l,"round",(function(){return S.eh})),n.d(l,"rsqrt",(function(){return S.fh})),n.d(l,"scalar",(function(){return S.gh})),n.d(l,"selu",(function(){return S.jh})),n.d(l,"separableConv2d",(function(){return S.kh})),n.d(l,"setdiff1dAsync",(function(){return S.oh})),n.d(l,"sigmoid",(function(){return S.ph})),n.d(l,"sign",(function(){return S.qh})),n.d(l,"sin",(function(){return S.sh})),n.d(l,"sinh",(function(){return S.th})),n.d(l,"slice",(function(){return S.uh})),n.d(l,"slice1d",(function(){return S.vh})),n.d(l,"slice2d",(function(){return S.wh})),n.d(l,"slice3d",(function(){return S.xh})),n.d(l,"slice4d",(function(){return S.yh})),n.d(l,"softmax",(function(){return S.Ah})),n.d(l,"softplus",(function(){return S.Bh})),n.d(l,"spaceToBatchND",(function(){return S.Ch})),n.d(l,"fft",(function(){return S.Ue})),n.d(l,"ifft",(function(){return S.of})),n.d(l,"irfft",(function(){return S.tf})),n.d(l,"rfft",(function(){return S.dh})),n.d(l,"split",(function(){return S.Fh})),n.d(l,"sqrt",(function(){return S.Gh})),n.d(l,"square",(function(){return S.Hh})),n.d(l,"squaredDifference",(function(){return S.Ih})),n.d(l,"squeeze",(function(){return S.Kh})),n.d(l,"stack",(function(){return S.Lh})),n.d(l,"step",(function(){return S.Mh})),n.d(l,"stridedSlice",(function(){return S.Nh})),n.d(l,"sub",(function(){return S.Oh})),n.d(l,"sum",(function(){return S.Qh})),n.d(l,"tan",(function(){return S.Sh})),n.d(l,"tanh",(function(){return S.Th})),n.d(l,"tensor",(function(){return S.Uh})),n.d(l,"tensor1d",(function(){return S.Vh})),n.d(l,"tensor2d",(function(){return S.Wh})),n.d(l,"tensor3d",(function(){return S.Xh})),n.d(l,"tensor4d",(function(){return S.Yh})),n.d(l,"tensor5d",(function(){return S.Zh})),n.d(l,"tensor6d",(function(){return S.ai})),n.d(l,"tile",(function(){return S.ei})),n.d(l,"topk",(function(){return S.gi})),n.d(l,"truncatedNormal",(function(){return S.ji})),n.d(l,"unique",(function(){return S.ki})),n.d(l,"unsortedSegmentSum",(function(){return S.ni})),n.d(l,"unstack",(function(){return S.oi})),n.d(l,"variable",(function(){return S.ti})),n.d(l,"where",(function(){return S.wi})),n.d(l,"whereAsync",(function(){return S.xi})),n.d(l,"zeros",(function(){return S.yi})),n.d(l,"zerosLike",(function(){return S.zi})),n.d(l,"booleanMaskAsync",(function(){return S.Td})),n.d(l,"equalStrict",(function(){return S.Oe})),n.d(l,"greaterEqualStrict",(function(){return S.mf})),n.d(l,"greaterStrict",(function(){return S.nf})),n.d(l,"lessEqualStrict",(function(){return S.Cf})),n.d(l,"lessStrict",(function(){return S.Df})),n.d(l,"notEqualStrict",(function(){return S.rg})),n.d(l,"addStrict",(function(){return S.yd})),n.d(l,"divStrict",(function(){return S.Ee})),n.d(l,"maximumStrict",(function(){return S.Yf})),n.d(l,"minimumStrict",(function(){return S.dg})),n.d(l,"modStrict",(function(){return S.gg})),n.d(l,"mulStrict",(function(){return S.kg})),n.d(l,"powStrict",(function(){return S.Eg})),n.d(l,"squaredDifferenceStrict",(function(){return S.Jh})),n.d(l,"subStrict",(function(){return S.Ph})),n.d(l,"transpose",(function(){return S.ii})),n.d(l,"norm",(function(){return S.pg})),n.d(l,"movingAverage",(function(){return S.ig})),n.d(l,"scatterND",(function(){return S.hh})),n.d(l,"sparseToDense",(function(){return S.Dh})),n.d(l,"gatherND",(function(){return S.cf})),n.d(l,"dropout",(function(){return S.Ge})),n.d(l,"enclosingPowerOfTwo",(function(){return S.Ke})),n.d(l,"cosineWindow",(function(){return S.pe})),n.d(l,"inTopKAsync",(function(){return S.rf})),n.d(l,"op",(function(){return S.vg})),n.d(l,"OP_SCOPE_SUFFIX",(function(){return S.jc})),n.d(l,"image",(function(){return S.qf})),n.d(l,"linalg",(function(){return S.Ef})),n.d(l,"losses",(function(){return S.Qf})),n.d(l,"spectral",(function(){return S.Eh})),n.d(l,"fused",(function(){return S.af})),n.d(l,"signal",(function(){return S.rh})),n.d(l,"Reduction",(function(){return S.zc})),n.d(l,"train",(function(){return S.hi})),n.d(l,"enableProdMode",(function(){return S.Je})),n.d(l,"enableDebugMode",(function(){return S.Ie})),n.d(l,"disableDeprecationWarnings",(function(){return S.ze})),n.d(l,"deprecationWarn",(function(){return S.te})),n.d(l,"disposeVariables",(function(){return S.Be})),n.d(l,"engine",(function(){return S.Le})),n.d(l,"memory",(function(){return S.ag})),n.d(l,"profile",(function(){return S.Ig})),n.d(l,"tidy",(function(){return S.di})),n.d(l,"dispose",(function(){return S.Ae})),n.d(l,"keep",(function(){return S.xf})),n.d(l,"time",(function(){return S.fi})),n.d(l,"setBackend",(function(){return S.mh})),n.d(l,"ready",(function(){return S.Og})),n.d(l,"getBackend",(function(){return S.ef})),n.d(l,"removeBackend",(function(){return S.Wg})),n.d(l,"findBackend",(function(){return S.We})),n.d(l,"findBackendFactory",(function(){return S.Xe})),n.d(l,"registerBackend",(function(){return S.Rg})),n.d(l,"backend",(function(){return S.Kd})),n.d(l,"setPlatform",(function(){return S.nh})),n.d(l,"getKernel",(function(){return S.gf})),n.d(l,"getGradient",(function(){return S.ff})),n.d(l,"getKernelsForBackend",(function(){return S.hf})),n.d(l,"registerKernel",(function(){return S.Tg})),n.d(l,"registerGradient",(function(){return S.Sg})),n.d(l,"unregisterKernel",(function(){return S.mi})),n.d(l,"unregisterGradient",(function(){return S.li})),n.d(l,"copyRegisteredKernels",(function(){return S.me})),n.d(l,"customGrad",(function(){return S.re})),n.d(l,"grad",(function(){return S.if})),n.d(l,"grads",(function(){return S.jf})),n.d(l,"valueAndGrad",(function(){return S.ri})),n.d(l,"valueAndGrads",(function(){return S.si})),n.d(l,"variableGrads",(function(){return S.ui})),n.d(l,"Environment",(function(){return S.db})),n.d(l,"env",(function(){return S.Me})),n.d(l,"ENV",(function(){return S.ab})),n.d(l,"version_core",(function(){return S.vi})),n.d(l,"nextFrame",(function(){return S.og})),n.d(l,"browser",(function(){return S.Vd})),n.d(l,"io",(function(){return S.sf})),n.d(l,"math",(function(){return S.Sf})),n.d(l,"serialization",(function(){return S.lh})),n.d(l,"test_util",(function(){return S.ci})),n.d(l,"util",(function(){return S.qi})),n.d(l,"backend_util",(function(){return S.Ld})),n.d(l,"tensor_util",(function(){return S.bi})),n.d(l,"slice_util",(function(){return S.zh})),n.d(l,"gather_util",(function(){return S.df})),n.d(l,"scatter_util",(function(){return S.ih})),n.d(l,"device_util",(function(){return S.we})),n.d(l,"kernel_impls",(function(){return S.yf})),n.d(l,"KernelBackend",(function(){return S.Cb})),n.d(l,"DataStorage",(function(){return S.Q})),n.d(l,"Abs",(function(){return S.a})),n.d(l,"Acos",(function(){return S.b})),n.d(l,"Acosh",(function(){return S.c})),n.d(l,"Add",(function(){return S.h})),n.d(l,"AddN",(function(){return S.i})),n.d(l,"All",(function(){return S.j})),n.d(l,"Any",(function(){return S.k})),n.d(l,"ArgMax",(function(){return S.l})),n.d(l,"ArgMin",(function(){return S.m})),n.d(l,"Asin",(function(){return S.n})),n.d(l,"Asinh",(function(){return S.o})),n.d(l,"Atan",(function(){return S.p})),n.d(l,"Atanh",(function(){return S.r})),n.d(l,"Atan2",(function(){return S.q})),n.d(l,"AvgPool",(function(){return S.s})),n.d(l,"AvgPoolGrad",(function(){return S.v})),n.d(l,"AvgPool3D",(function(){return S.t})),n.d(l,"AvgPool3DGrad",(function(){return S.u})),n.d(l,"BatchMatMul",(function(){return S.w})),n.d(l,"BatchToSpaceND",(function(){return S.x})),n.d(l,"Bincount",(function(){return S.y})),n.d(l,"BroadcastTo",(function(){return S.z})),n.d(l,"Cast",(function(){return S.A})),n.d(l,"Ceil",(function(){return S.B})),n.d(l,"ClipByValue",(function(){return S.C})),n.d(l,"Complex",(function(){return S.D})),n.d(l,"ComplexAbs",(function(){return S.E})),n.d(l,"Concat",(function(){return S.F})),n.d(l,"Conv2D",(function(){return S.G})),n.d(l,"Conv2DBackpropFilter",(function(){return S.H})),n.d(l,"Conv2DBackpropInput",(function(){return S.I})),n.d(l,"Conv3D",(function(){return S.J})),n.d(l,"Conv3DBackpropFilterV2",(function(){return S.K})),n.d(l,"Conv3DBackpropInputV2",(function(){return S.L})),n.d(l,"Cos",(function(){return S.M})),n.d(l,"Cosh",(function(){return S.N})),n.d(l,"Cumsum",(function(){return S.P})),n.d(l,"CropAndResize",(function(){return S.O})),n.d(l,"DenseBincount",(function(){return S.R})),n.d(l,"DepthToSpace",(function(){return S.S})),n.d(l,"DepthwiseConv2dNative",(function(){return S.T})),n.d(l,"DepthwiseConv2dNativeBackpropFilter",(function(){return S.U})),n.d(l,"DepthwiseConv2dNativeBackpropInput",(function(){return S.V})),n.d(l,"Diag",(function(){return S.W})),n.d(l,"Dilation2D",(function(){return S.X})),n.d(l,"Dilation2DBackpropInput",(function(){return S.Z})),n.d(l,"Dilation2DBackpropFilter",(function(){return S.Y})),n.d(l,"RealDiv",(function(){return S.xc})),n.d(l,"Elu",(function(){return S.bb})),n.d(l,"EluGrad",(function(){return S.cb})),n.d(l,"Erf",(function(){return S.fb})),n.d(l,"Equal",(function(){return S.eb})),n.d(l,"Exp",(function(){return S.gb})),n.d(l,"ExpandDims",(function(){return S.hb})),n.d(l,"Expm1",(function(){return S.ib})),n.d(l,"FFT",(function(){return S.jb})),n.d(l,"Fill",(function(){return S.kb})),n.d(l,"FlipLeftRight",(function(){return S.lb})),n.d(l,"Floor",(function(){return S.mb})),n.d(l,"FloorDiv",(function(){return S.nb})),n.d(l,"FusedBatchNorm",(function(){return S.pb})),n.d(l,"GatherV2",(function(){return S.tb})),n.d(l,"GatherNd",(function(){return S.sb})),n.d(l,"Greater",(function(){return S.ub})),n.d(l,"GreaterEqual",(function(){return S.vb})),n.d(l,"Identity",(function(){return S.xb})),n.d(l,"IFFT",(function(){return S.wb})),n.d(l,"Imag",(function(){return S.yb})),n.d(l,"IsFinite",(function(){return S.zb})),n.d(l,"IsInf",(function(){return S.Ab})),n.d(l,"IsNan",(function(){return S.Bb})),n.d(l,"LeakyRelu",(function(){return S.Fb})),n.d(l,"Less",(function(){return S.Gb})),n.d(l,"LessEqual",(function(){return S.Hb})),n.d(l,"LinSpace",(function(){return S.Ib})),n.d(l,"Log",(function(){return S.Jb})),n.d(l,"Log1p",(function(){return S.Kb})),n.d(l,"LogicalAnd",(function(){return S.Mb})),n.d(l,"LogicalNot",(function(){return S.Nb})),n.d(l,"LogicalOr",(function(){return S.Ob})),n.d(l,"LogSoftmax",(function(){return S.Lb})),n.d(l,"LRN",(function(){return S.Db})),n.d(l,"LRNGrad",(function(){return S.Eb})),n.d(l,"Max",(function(){return S.Pb})),n.d(l,"Maximum",(function(){return S.Vb})),n.d(l,"MaxPool",(function(){return S.Qb})),n.d(l,"MaxPoolGrad",(function(){return S.Tb})),n.d(l,"MaxPool3D",(function(){return S.Rb})),n.d(l,"MaxPool3DGrad",(function(){return S.Sb})),n.d(l,"MaxPoolWithArgmax",(function(){return S.Ub})),n.d(l,"Mean",(function(){return S.Wb})),n.d(l,"Min",(function(){return S.Xb})),n.d(l,"Minimum",(function(){return S.Yb})),n.d(l,"MirrorPad",(function(){return S.Zb})),n.d(l,"Mod",(function(){return S.ac})),n.d(l,"Multinomial",(function(){return S.cc})),n.d(l,"Multiply",(function(){return S.dc})),n.d(l,"Neg",(function(){return S.ec})),n.d(l,"NotEqual",(function(){return S.ic})),n.d(l,"NonMaxSuppressionV3",(function(){return S.fc})),n.d(l,"NonMaxSuppressionV4",(function(){return S.gc})),n.d(l,"NonMaxSuppressionV5",(function(){return S.hc})),n.d(l,"OnesLike",(function(){return S.lc})),n.d(l,"OneHot",(function(){return S.kc})),n.d(l,"Pack",(function(){return S.nc})),n.d(l,"PadV2",(function(){return S.oc})),n.d(l,"Pool",(function(){return S.pc})),n.d(l,"Pow",(function(){return S.qc})),n.d(l,"Prelu",(function(){return S.rc})),n.d(l,"Prod",(function(){return S.sc})),n.d(l,"Range",(function(){return S.uc})),n.d(l,"Real",(function(){return S.wc})),n.d(l,"Reciprocal",(function(){return S.yc})),n.d(l,"Relu",(function(){return S.Ac})),n.d(l,"Reshape",(function(){return S.Cc})),n.d(l,"ResizeNearestNeighbor",(function(){return S.Fc})),n.d(l,"ResizeNearestNeighborGrad",(function(){return S.Gc})),n.d(l,"ResizeBilinear",(function(){return S.Dc})),n.d(l,"ResizeBilinearGrad",(function(){return S.Ec})),n.d(l,"Relu6",(function(){return S.Bc})),n.d(l,"Reverse",(function(){return S.Hc})),n.d(l,"Round",(function(){return S.Jc})),n.d(l,"Rsqrt",(function(){return S.Kc})),n.d(l,"ScatterNd",(function(){return S.Mc})),n.d(l,"Select",(function(){return S.Nc})),n.d(l,"Selu",(function(){return S.Oc})),n.d(l,"Slice",(function(){return S.Tc})),n.d(l,"Sin",(function(){return S.Rc})),n.d(l,"Sinh",(function(){return S.Sc})),n.d(l,"Sign",(function(){return S.Qc})),n.d(l,"Sigmoid",(function(){return S.Pc})),n.d(l,"Softplus",(function(){return S.Vc})),n.d(l,"Sqrt",(function(){return S.Zc})),n.d(l,"Sum",(function(){return S.fd})),n.d(l,"SpaceToBatchND",(function(){return S.Wc})),n.d(l,"SplitV",(function(){return S.Yc})),n.d(l,"Softmax",(function(){return S.Uc})),n.d(l,"SquaredDifference",(function(){return S.bd})),n.d(l,"Square",(function(){return S.ad})),n.d(l,"Sub",(function(){return S.ed})),n.d(l,"SparseToDense",(function(){return S.Xc})),n.d(l,"StridedSlice",(function(){return S.dd})),n.d(l,"Tan",(function(){return S.gd})),n.d(l,"Tanh",(function(){return S.hd})),n.d(l,"Tile",(function(){return S.kd})),n.d(l,"TopK",(function(){return S.ld})),n.d(l,"Transpose",(function(){return S.md})),n.d(l,"Unique",(function(){return S.nd})),n.d(l,"Unpack",(function(){return S.od})),n.d(l,"UnsortedSegmentSum",(function(){return S.pd})),n.d(l,"ZerosLike",(function(){return S.rd})),n.d(l,"Step",(function(){return S.cd})),n.d(l,"FromPixels",(function(){return S.ob})),n.d(l,"RotateWithOffset",(function(){return S.Ic})),n.d(l,"_FusedMatMul",(function(){return S.sd})),n.d(l,"FusedConv2D",(function(){return S.qb})),n.d(l,"FusedDepthwiseConv2D",(function(){return S.rb})),n.d(l,"CallbackList",(function(){return wn})),n.d(l,"CustomCallback",(function(){return Sn})),n.d(l,"History",(function(){return jn})),n.d(l,"Callback",(function(){return ec})),n.d(l,"callbacks",(function(){return ac})),n.d(l,"EarlyStopping",(function(){return rc})),n.d(l,"InputSpec",(function(){return an})),n.d(l,"SymbolicTensor",(function(){return on})),n.d(l,"LayersModel",(function(){return $r})),n.d(l,"input",(function(){return fa})),n.d(l,"loadLayersModel",(function(){return la})),n.d(l,"model",(function(){return ca})),n.d(l,"registerCallbackConstructor",(function(){return da})),n.d(l,"sequential",(function(){return ua})),n.d(l,"RNN",(function(){return fi})),n.d(l,"Sequential",(function(){return sa})),n.d(l,"LayerVariable",(function(){return tn})),n.d(l,"version_layers",(function(){return pr})),n.d(l,"constraints",(function(){return r})),n.d(l,"initializers",(function(){return a})),n.d(l,"layers",(function(){return i})),n.d(l,"metrics",(function(){return o})),n.d(l,"models",(function(){return s})),n.d(l,"regularizers",(function(){return c})),n.d(l,"GraphModel",(function(){return lf})),n.d(l,"loadGraphModel",(function(){return ff})),n.d(l,"deregisterOp",(function(){return cc.a})),n.d(l,"registerOp",(function(){return cc.c})),n.d(l,"version_converter",(function(){return pf})),n.d(l,"data",(function(){return u})),n.d(l,"version",(function(){return h_}));var f={};n.r(f),n.d(f,"auxiliaryInputFromSpec",(function(){return v_})),n.d(f,"AuxiliaryInput",(function(){return m_})),n.d(f,"BinaryCounter",(function(){return b_}));var d={};n.r(d),n.d(d,"names",(function(){return y_})),n.d(d,"tokenize",(function(){return x_})),n.d(d,"props",(function(){return E_})),n.d(d,"name",(function(){return N_})),n.d(d,"pc",(function(){return T_})),n.d(d,"midi",(function(){return I_})),n.d(d,"midiToFreq",(function(){return A_})),n.d(d,"freq",(function(){return M_})),n.d(d,"freqToMidi",(function(){return D_})),n.d(d,"chroma",(function(){return F_})),n.d(d,"oct",(function(){return L_})),n.d(d,"stepToLetter",(function(){return z_})),n.d(d,"altToAcc",(function(){return V_})),n.d(d,"from",(function(){return B_})),n.d(d,"build",(function(){return U_})),n.d(d,"fromMidi",(function(){return W_})),n.d(d,"simplify",(function(){return G_})),n.d(d,"enharmonic",(function(){return H_}));var p={};n.r(p),n.d(p,"names",(function(){return wC})),n.d(p,"props",(function(){return jC})),n.d(p,"intervals",(function(){return SC})),n.d(p,"notes",(function(){return _C})),n.d(p,"exists",(function(){return CC})),n.d(p,"supersets",(function(){return EC})),n.d(p,"subsets",(function(){return NC})),n.d(p,"tokenize",(function(){return IC}));var h={};n.r(h),n.d(h,"DEFAULT_QUARTERS_PER_MINUTE",(function(){return MC})),n.d(h,"DEFAULT_STEPS_PER_BAR",(function(){return PC})),n.d(h,"DEFAULT_STEPS_PER_QUARTER",(function(){return RC})),n.d(h,"DEFAULT_STEPS_PER_SECOND",(function(){return DC})),n.d(h,"DEFAULT_VELOCITY",(function(){return FC})),n.d(h,"DEFAULT_PROGRAM",(function(){return LC})),n.d(h,"DEFAULT_TICKS_PER_QUARTER",(function(){return zC})),n.d(h,"DEFAULT_CHANNEL",(function(){return qC})),n.d(h,"DRUM_CHANNEL",(function(){return VC})),n.d(h,"NON_DRUM_CHANNELS",(function(){return BC})),n.d(h,"DEFAULT_DRUM_PITCH_CLASSES",(function(){return UC})),n.d(h,"MIN_MIDI_VELOCITY",(function(){return WC})),n.d(h,"MAX_MIDI_VELOCITY",(function(){return GC})),n.d(h,"MIDI_VELOCITIES",(function(){return HC})),n.d(h,"NO_CHORD",(function(){return KC})),n.d(h,"NUM_PITCH_CLASSES",(function(){return XC})),n.d(h,"MIN_MIDI_PITCH",(function(){return QC})),n.d(h,"MAX_MIDI_PITCH",(function(){return YC})),n.d(h,"MIDI_PITCHES",(function(){return ZC})),n.d(h,"MIN_PIANO_PITCH",(function(){return JC})),n.d(h,"MAX_PIANO_PITCH",(function(){return $C})),n.d(h,"MIN_DRUM_PITCH",(function(){return eE})),n.d(h,"MAX_DRUM_PITCH",(function(){return tE})),n.d(h,"MIN_MIDI_PROGRAM",(function(){return nE})),n.d(h,"MAX_MIDI_PROGRAM",(function(){return rE})),n.d(h,"LO_CLICK_PITCH",(function(){return aE})),n.d(h,"HI_CLICK_PITCH",(function(){return iE})),n.d(h,"LO_CLICK_CLASS",(function(){return oE})),n.d(h,"HI_CLICK_CLASS",(function(){return sE}));var v={};n.r(v),n.d(v,"ChordQuality",(function(){return AC})),n.d(v,"ChordSymbolException",(function(){return uE})),n.d(v,"ChordEncodingException",(function(){return lE})),n.d(v,"ChordSymbols",(function(){return fE})),n.d(v,"ChordEncoder",(function(){return dE})),n.d(v,"chordEncoderFromType",(function(){return pE})),n.d(v,"MajorMinorChordEncoder",(function(){return vE})),n.d(v,"TriadChordEncoder",(function(){return mE})),n.d(v,"PitchChordEncoder",(function(){return bE}));var m={};n.r(m),n.d(m,"Level",(function(){return hE})),n.d(m,"verbosity",(function(){return OE})),n.d(m,"setVerbosity",(function(){return kE})),n.d(m,"log",(function(){return wE})),n.d(m,"logWithDuration",(function(){return xE}));var b={};n.r(b),n.d(b,"MultipleTimeSignatureException",(function(){return jE})),n.d(b,"BadTimeSignatureException",(function(){return SE})),n.d(b,"NegativeTimeException",(function(){return _E})),n.d(b,"MultipleTempoException",(function(){return CE})),n.d(b,"QuantizationStatusException",(function(){return EE})),n.d(b,"clone",(function(){return NE})),n.d(b,"stepsPerQuarterToStepsPerSecond",(function(){return TE})),n.d(b,"quantizeToStep",(function(){return IE})),n.d(b,"quantizeNoteSequence",(function(){return PE})),n.d(b,"isQuantizedSequence",(function(){return RE})),n.d(b,"assertIsQuantizedSequence",(function(){return DE})),n.d(b,"isRelativeQuantizedSequence",(function(){return FE})),n.d(b,"assertIsRelativeQuantizedSequence",(function(){return LE})),n.d(b,"isAbsoluteQuantizedSequence",(function(){return zE})),n.d(b,"assertIsAbsoluteQuantizedSequence",(function(){return qE})),n.d(b,"unquantizeSequence",(function(){return VE})),n.d(b,"createQuantizedNoteSequence",(function(){return BE})),n.d(b,"mergeInstruments",(function(){return UE})),n.d(b,"replaceInstruments",(function(){return WE})),n.d(b,"mergeConsecutiveNotes",(function(){return GE})),n.d(b,"applySustainControlChanges",(function(){return HE})),n.d(b,"concatenate",(function(){return KE})),n.d(b,"trim",(function(){return XE})),n.d(b,"split",(function(){return ZE}));var g={};n.r(g),n.d(g,"NO_EVENT",(function(){return JE})),n.d(g,"NOTE_OFF",(function(){return $E})),n.d(g,"Melody",(function(){return eN})),n.d(g,"MelodyRhythm",(function(){return tN})),n.d(g,"MelodyShape",(function(){return nN})),n.d(g,"MelodyRegister",(function(){return rN}));var y={};n.r(y),n.d(y,"Performance",(function(){return aN}));var O={};n.r(O),n.d(O,"DEFAULT_DRUM_PITCH_CLASSES",(function(){return UC})),n.d(O,"converterFromSpec",(function(){return iN})),n.d(O,"DataConverter",(function(){return oN})),n.d(O,"DrumsConverter",(function(){return sN})),n.d(O,"DrumRollConverter",(function(){return cN})),n.d(O,"DrumsOneHotConverter",(function(){return uN})),n.d(O,"MelodyConverter",(function(){return lN})),n.d(O,"MelodyRhythmConverter",(function(){return dN})),n.d(O,"MelodyShapeConverter",(function(){return pN})),n.d(O,"TrioConverter",(function(){return hN})),n.d(O,"TrioRhythmConverter",(function(){return vN})),n.d(O,"MultitrackConverter",(function(){return mN})),n.d(O,"GrooveConverter",(function(){return bN}));var k={};n.r(k),n.d(k,"assert",(function(){return oR})),n.d(k,"assertRange",(function(){return sR})),n.d(k,"assertContextRunning",(function(){return cR})),n.d(k,"setLogger",(function(){return lR})),n.d(k,"log",(function(){return fR})),n.d(k,"warn",(function(){return dR}));var w={};n.r(w);var x={};n.r(x),n.d(x,"getContext",(function(){return uD})),n.d(x,"setContext",(function(){return lD})),n.d(x,"Clock",(function(){return GD})),n.d(x,"Context",(function(){return eD})),n.d(x,"BaseContext",(function(){return $R})),n.d(x,"Delay",(function(){return HD})),n.d(x,"Gain",(function(){return FD})),n.d(x,"Offline",(function(){return KD})),n.d(x,"OfflineContext",(function(){return oD})),n.d(x,"Param",(function(){return AD})),n.d(x,"ToneAudioBuffer",(function(){return iD})),n.d(x,"ToneAudioBuffers",(function(){return XD})),n.d(x,"ToneAudioNode",(function(){return MD})),n.d(x,"connectSeries",(function(){return PD})),n.d(x,"connect",(function(){return RD})),n.d(x,"disconnect",(function(){return DD})),n.d(x,"FrequencyClass",(function(){return jD})),n.d(x,"Frequency",(function(){return CD})),n.d(x,"MidiClass",(function(){return QD})),n.d(x,"Midi",(function(){return YD})),n.d(x,"TimeClass",(function(){return wD})),n.d(x,"Time",(function(){return xD})),n.d(x,"TicksClass",(function(){return ZD})),n.d(x,"Ticks",(function(){return JD})),n.d(x,"TransportTimeClass",(function(){return ED})),n.d(x,"TransportTime",(function(){return ND})),n.d(x,"Emitter",(function(){return JR})),n.d(x,"IntervalTimeline",(function(){return eF})),n.d(x,"StateTimeline",(function(){return ID})),n.d(x,"Timeline",(function(){return HR})),n.d(x,"isUndef",(function(){return pR})),n.d(x,"isDefined",(function(){return hR})),n.d(x,"isFunction",(function(){return vR})),n.d(x,"isNumber",(function(){return mR})),n.d(x,"isObject",(function(){return bR})),n.d(x,"isBoolean",(function(){return gR})),n.d(x,"isArray",(function(){return yR})),n.d(x,"isString",(function(){return OR})),n.d(x,"isNote",(function(){return kR})),n.d(x,"dbToGain",(function(){return hD})),n.d(x,"gainToDb",(function(){return vD})),n.d(x,"intervalToFrequencyRatio",(function(){return mD})),n.d(x,"ftom",(function(){return gD})),n.d(x,"mtof",(function(){return OD})),n.d(x,"optionsFromArguments",(function(){return DR})),n.d(x,"defaultArg",(function(){return FR})),n.d(x,"Unit",(function(){return w})),n.d(x,"debug",(function(){return k})),n.d(x,"Noise",(function(){return lF})),n.d(x,"UserMedia",(function(){return hF})),n.d(x,"Oscillator",(function(){return bF})),n.d(x,"AMOscillator",(function(){return wF})),n.d(x,"FMOscillator",(function(){return xF})),n.d(x,"PulseOscillator",(function(){return jF})),n.d(x,"FatOscillator",(function(){return SF})),n.d(x,"PWMOscillator",(function(){return _F})),n.d(x,"OmniOscillator",(function(){return EF})),n.d(x,"ToneOscillatorNode",(function(){return mF})),n.d(x,"LFO",(function(){return AF})),n.d(x,"ToneBufferSource",(function(){return uF})),n.d(x,"Player",(function(){return RF})),n.d(x,"Players",(function(){return DF})),n.d(x,"GrainPlayer",(function(){return FF})),n.d(x,"Add",(function(){return NF})),n.d(x,"Abs",(function(){return LF})),n.d(x,"AudioToGain",(function(){return OF})),n.d(x,"GainToAudio",(function(){return zF})),n.d(x,"GreaterThan",(function(){return UF})),n.d(x,"GreaterThanZero",(function(){return BF})),n.d(x,"Multiply",(function(){return kF})),n.d(x,"Negate",(function(){return qF})),n.d(x,"Pow",(function(){return WF})),n.d(x,"Signal",(function(){return qD})),n.d(x,"connectSignal",(function(){return VD})),n.d(x,"Scale",(function(){return TF})),n.d(x,"ScaleExp",(function(){return GF})),n.d(x,"Subtract",(function(){return VF})),n.d(x,"SyncedSignal",(function(){return HF})),n.d(x,"WaveShaper",(function(){return yF})),n.d(x,"Zero",(function(){return IF})),n.d(x,"AMSynth",(function(){return eL})),n.d(x,"DuoSynth",(function(){return iL})),n.d(x,"FMSynth",(function(){return oL})),n.d(x,"MetalSynth",(function(){return cL})),n.d(x,"MembraneSynth",(function(){return uL})),n.d(x,"MonoSynth",(function(){return aL})),n.d(x,"NoiseSynth",(function(){return lL})),n.d(x,"PluckSynth",(function(){return yL})),n.d(x,"PolySynth",(function(){return OL})),n.d(x,"Sampler",(function(){return kL})),n.d(x,"Synth",(function(){return JF})),n.d(x,"Loop",(function(){return xL})),n.d(x,"Part",(function(){return jL})),n.d(x,"Pattern",(function(){return HL})),n.d(x,"Sequence",(function(){return KL})),n.d(x,"ToneEvent",(function(){return wL})),n.d(x,"AutoFilter",(function(){return ZL})),n.d(x,"AutoPanner",(function(){return $L})),n.d(x,"AutoWah",(function(){return tz})),n.d(x,"BitCrusher",(function(){return rz})),n.d(x,"Chebyshev",(function(){return iz})),n.d(x,"Chorus",(function(){return lz})),n.d(x,"Distortion",(function(){return fz})),n.d(x,"FeedbackDelay",(function(){return pz})),n.d(x,"FrequencyShifter",(function(){return vz})),n.d(x,"Freeverb",(function(){return gz})),n.d(x,"JCReverb",(function(){return wz})),n.d(x,"PingPongDelay",(function(){return jz})),n.d(x,"PitchShift",(function(){return Sz})),n.d(x,"Phaser",(function(){return _z})),n.d(x,"Reverb",(function(){return Cz})),n.d(x,"StereoWidener",(function(){return Iz})),n.d(x,"Tremolo",(function(){return Az})),n.d(x,"Vibrato",(function(){return Mz})),n.d(x,"Analyser",(function(){return Pz})),n.d(x,"Meter",(function(){return Dz})),n.d(x,"FFT",(function(){return Fz})),n.d(x,"DCMeter",(function(){return Lz})),n.d(x,"Waveform",(function(){return zz})),n.d(x,"Follower",(function(){return ez})),n.d(x,"Channel",(function(){return Bz})),n.d(x,"CrossFade",(function(){return XL})),n.d(x,"Merge",(function(){return sz})),n.d(x,"MidSideMerge",(function(){return Nz})),n.d(x,"MidSideSplit",(function(){return Ez})),n.d(x,"Mono",(function(){return Uz})),n.d(x,"MultibandSplit",(function(){return Wz})),n.d(x,"Panner",(function(){return JL})),n.d(x,"Panner3D",(function(){return Hz})),n.d(x,"PanVol",(function(){return Vz})),n.d(x,"Recorder",(function(){return Kz})),n.d(x,"Solo",(function(){return qz})),n.d(x,"Split",(function(){return oz})),n.d(x,"Volume",(function(){return nF})),n.d(x,"Compressor",(function(){return Xz})),n.d(x,"Gate",(function(){return Qz})),n.d(x,"Limiter",(function(){return Yz})),n.d(x,"MidSideCompressor",(function(){return Zz})),n.d(x,"MultibandCompressor",(function(){return Jz})),n.d(x,"AmplitudeEnvelope",(function(){return ZF})),n.d(x,"Envelope",(function(){return KF})),n.d(x,"FrequencyEnvelope",(function(){return rL})),n.d(x,"EQ3",(function(){return $z})),n.d(x,"Filter",(function(){return nL})),n.d(x,"OnePoleFilter",(function(){return bL})),n.d(x,"FeedbackCombFilter",(function(){return mL})),n.d(x,"LowpassCombFilter",(function(){return gL})),n.d(x,"Convolver",(function(){return eq})),n.d(x,"BiquadFilter",(function(){return tL})),n.d(x,"version",(function(){return gN})),n.d(x,"start",(function(){return fD})),n.d(x,"supported",(function(){return iR})),n.d(x,"now",(function(){return tq})),n.d(x,"immediate",(function(){return nq})),n.d(x,"Transport",(function(){return rq})),n.d(x,"getTransport",(function(){return aq})),n.d(x,"Destination",(function(){return iq})),n.d(x,"Master",(function(){return oq})),n.d(x,"getDestination",(function(){return sq})),n.d(x,"Listener",(function(){return cq})),n.d(x,"getListener",(function(){return uq})),n.d(x,"Draw",(function(){return lq})),n.d(x,"getDraw",(function(){return fq})),n.d(x,"context",(function(){return dq})),n.d(x,"loaded",(function(){return pq})),n.d(x,"Buffer",(function(){return hq})),n.d(x,"Buffers",(function(){return vq})),n.d(x,"BufferSource",(function(){return mq}));var j,S=n(0),_=n(2),C=n(4),E=n(5),N=n(6);function T(){return null==j&&(j=Object(S.Kd)().epsilon()),j}var I=n(28),A=n(8),M=n(25),P=n(20),R=n(13),D=n(203);var F=n(271);function L(e,t,n){return L=Object(F.a)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Object(D.a)(a,n.prototype),a},L.apply(null,arguments)}function z(e){var t="function"===typeof Map?new Map:void 0;return z=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return L(e,arguments,Object(R.a)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(D.a)(r,e)},z(e)}var q=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),n.prototype),r}return n}(z(Error)),V=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),n.prototype),r}return n}(z(Error)),B=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),n.prototype),r}return n}(z(Error)),U=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),n.prototype),r}return n}(z(Error)),W=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),n.prototype),r}return n}(z(Error));Error;function G(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function H(e,t){if(!e)throw new W(t)}function K(e,t){var n,r=0,a=Object(M.a)(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(i){a.e(i)}finally{a.f()}return r}function X(e){return 1===e.length?e[0]:e}function Q(e){return Array.isArray(e)?e:[e]}function Y(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Z(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var J={};function $(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function ee(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return ee(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?ee(a):e[r]=a.value)}}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in J)i=J[o];else if(null==(i=t[o]))throw new B("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new B("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var c,u,l=s.className;if(l in n){var f=Object(A.a)(n[l],2);c=f[0],u=f[1]}else if(l in J){var d=Object(A.a)(J.className,2);c=d[0],u=d[1]}else if(l in t){var p=Object(A.a)(t[l],2);c=p[0],u=p[1]}if(null==c)throw new B("Unknown ".concat(r,": ").concat(l,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=u){for(var h={},v=0,m=Object.keys(J);v<m.length;v++){var b=m[v];h[b]=J[b]}for(var g=0,y=Object.keys(n);g<y.length;g++){var O=y[g];h[O]=n[O]}var k=s.config;k.customObjects=h;for(var w=Object.assign({},J),x=0,j=Object.keys(n);x<j.length;x++){var S=j[x];J[S]=n[S]}ee(s.config);var _=u(c,s.config,n,a);return J=Object.assign({},w),_}for(var C=Object.assign({},J),E=0,N=Object.keys(n);E<N.length;E++){var T=N[E];J[T]=n[T]}var I=new c(s.config);return J=Object.assign({},C),I}function ne(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function re(e){if(null==e)return e;var t,n=[],r=Object(M.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function ae(e){if(null==e)throw new B("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function ie(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new B("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return H(n>=0),H(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function se(e,t){Array.isArray(e)?(S.qi.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return se(e,"element ".concat(n+1," of ").concat(t))}))):S.qi.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(ce(e),".")}))}function ce(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return ce(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function ue(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function le(e,t){return Object(S.di)((function(){return S.Gh(S.Qh(S.jg(e,e),t,!0))}))}var fe=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"getConfig",value:function(){return{}}}]),n}(S.lh.Serializable),de=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Object(C.a)(n,[{key:"apply",value:function(e){var t=this;return Object(S.di)((function(){var n=le(e,t.axis),r=S.Zd(n,0,t.maxValue);return S.jg(e,S.Ce(r,S.wd(T(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(fe);de.className="MaxNorm",S.lh.registerClass(de);var pe=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Object(C.a)(n,[{key:"apply",value:function(e){var t=this;return Object(S.di)((function(){return S.Ce(e,S.wd(T(),le(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(fe);pe.className="UnitNorm",S.lh.registerClass(pe);var he=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){return S.Ug(e)}}]),n}(fe);he.className="NonNeg",S.lh.registerClass(he);var ve=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Object(C.a)(n,[{key:"apply",value:function(e){var t=this;return Object(S.di)((function(){var n=le(e,t.axis),r=S.wd(S.jg(t.rate,S.Zd(n,t.minValue,t.maxValue)),S.jg(1-t.rate,n));return S.jg(e,S.Ce(r,S.wd(T(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(fe);ve.className="MinMaxNorm",S.lh.registerClass(ve);var me={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function be(e){return $(e)}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return te(e,S.lh.SerializationMap.getMap().classNameMap,t,"constraint")}function ye(e){return null==e?null:"string"===typeof e?ge({className:e in me?me[e]:e,config:{}}):e instanceof fe?e:ge(e)}function Oe(e){return new de(e)}function ke(e){return new pe(e)}function we(){return new he}function xe(e){return new ve(e)}var je=["channelsFirst","channelsLast"],Se=["nearest","bilinear"],_e=["valid","same","causal"],Ce=["max","avg"],Ee=["sum","mul","concat","ave"],Ne=new Map;function Te(e){ie(je,"DataFormat",e)}function Ie(e){ie(_e,"PaddingMode",e)}function Ae(e){ie(Ce,"PoolMode",e)}var Me=[];function Pe(e,t){Me.push(e);try{var n=t();return Me.pop(),n}catch(r){throw Me.pop(),r}}function Re(e){if(!Le(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Me.length?"":Me.join("/")+"/")+e}function De(e){if(!Le(e))throw new Error("Not a valid tensor name: '"+e+"'");Ne.has(e)||Ne.set(e,0);var t=Ne.get(e);if(Ne.set(e,Ne.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return Ne.set(n,1),n}return e}var Fe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Le(e){return!!e.match(Fe)}function ze(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function qe(e){return e=Array.isArray(e)?new Float32Array(e):e,Object(S.Vh)(e)}function Ve(e){return S.bg(qe(e)).dataSync()[0]}function Be(e){return S.Tf(qe(e)).dataSync()[0]}function Ue(e,t){if(t<e)throw new B("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function We(e,t){return e.asType(t)}function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function He(e){var t=[ze(e.shape)];return e.reshape(t)}function Ke(e,t,n){return Object(S.di)((function(){switch(e.rank){case 1:return S.vh(e,t,n);case 2:return S.wh(e,[t,0],[n,e.shape[1]]);case 3:return S.xh(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return S.yh(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return S.uh(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return S.uh(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new B("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Xe(e,t,n){return Object(S.di)((function(){switch(e.rank){case 1:return S.vh(e,t,n);case 2:return S.wh(e,[0,t],[e.shape[0],n]);case 3:return S.xh(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return S.yh(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new B("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Qe(e,t,n,r){return Object(S.di)((function(){switch(e.rank){case 1:return S.vh(e,t,n);case 2:switch(r){case 1:return Ke(e,t,n);case 2:return Xe(e,t,n);default:throw new B("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return Ke(e,t,n);case 2:return S.xh(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Xe(e,t,n);default:throw new B("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return Ke(e,t,n);case 2:return S.yh(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return S.yh(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Xe(e,t,n);default:throw new B("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new B("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Ye(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),S.ce(e,n)}function Ze(e,t){switch(e.rank){case 1:return S.de([e,t]);case 2:return S.ee([e,t],0);case 3:return S.fe([e,t],0);case 4:return S.ge([e,t],0);default:throw new B("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function Je(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new B("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return S.ei(e,t)}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return S.Lg(e,t,n,r,a)}function et(e,t,n,r){if(e.rank<2||t.rank<2)throw new U("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new U("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return S.af.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?rt(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=e.reshape([-1,i]);var o=t.shape.slice(),s=o.pop(),c=o.pop(),u=[].concat(Object(I.a)(o),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=t.transpose(l).reshape([c,-1]);var f=[].concat(Object(I.a)(a),Object(I.a)(u));return S.af.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?rt(e.rank,r,"channelsLast"):null,activation:n}).reshape(f)}function tt(e,t,n){return Object(S.di)((function(){return t=Array.isArray(t)?Object(S.Vh)(t,"int32"):t.toInt(),S.bf(e,t,n)}))}function nt(e){return S.jg(e,e)}function rt(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new B("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1,1,1]):t.reshape([1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,1,1,r[0]]):t.reshape([1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1,1]):t.reshape([1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,1,r[0]]):t.reshape([1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1]):t.reshape([1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,r[0]]):t.reshape([1].concat(r))}else if(e<3)return t;throw new B("Unsupported input rank by biasAdd: ".concat(t.rank))}function at(e,t,n){return Object(S.di)((function(){return null==n&&(n="channelsLast"),Te(n),e.add(rt(e.rank,t,n))}))}function it(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new U("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return S.He(e)}function ot(e,t,n,r){return Object(S.di)((function(){return S.Ge(e,t,n,r)}))}function st(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var ct=["fanIn","fanOut","fanAvg"],ut=["normal","uniform","truncatedNormal"];var lt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(S.lh.Serializable),ft=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e,t){return Object(S.yi)(e,t)}}]),n}(lt);ft.className="Zeros",S.lh.registerClass(ft);var dt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e,t){return Object(S.tg)(e,t)}}]),n}(lt);dt.className="Ones",S.lh.registerClass(dt);var pt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),r=t.call(this),"object"!==typeof e)throw new B("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new B("config must have value set but got ".concat(e));return r.value=e.value,r}return Object(C.a)(n,[{key:"apply",value:function(e,t){var n=this;return Object(S.di)((function(){return Object(S.jg)(Object(S.gh)(n.value),Object(S.tg)(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(lt);pt.className="Constant",S.lh.registerClass(pt);var ht=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return Object(C.a)(n,[{key:"apply",value:function(e,t){return Object(S.Mg)(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(lt);ht.className="RandomUniform",S.lh.registerClass(ht);var vt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Object(C.a)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new U("randomNormal does not support dType ".concat(t,"."));return $e(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(lt);vt.className="RandomNormal",S.lh.registerClass(vt);var mt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Object(C.a)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new U("truncatedNormal does not support dType ".concat(t,"."));return Object(S.ji)(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(lt);mt.className="TruncatedNormal",S.lh.registerClass(mt);var bt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return Object(C.a)(n,[{key:"apply",value:function(e,t){var n=this;return Object(S.di)((function(){if(2!==e.length||e[0]!==e[1])throw new B("Identity matrix initializer can only be used for 2D square matrices.");return Object(S.jg)(n.gain,Object(S.Te)(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(lt);bt.className="Identity",S.lh.registerClass(bt);var gt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r,a;if(Object(_.a)(this,n),r=t.call(this),e.scale<0)throw new B("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,ie(ct,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){ie(ut,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return Object(C.a)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(Te(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=ze(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=ze(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=ze(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new U("".concat(this.getClassName()," does not support dType ").concat(t,"."));return Object(S.ji)(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return Object(S.Mg)(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(lt);gt.className="VarianceScaling",S.lh.registerClass(gt);var yt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return Object(C.a)(n,[{key:"getClassName",value:function(){return gt.className}}]),n}(gt);yt.className="GlorotUniform",S.lh.registerClass(yt);var Ot=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return Object(C.a)(n,[{key:"getClassName",value:function(){return gt.className}}]),n}(gt);Ot.className="GlorotNormal",S.lh.registerClass(Ot);var kt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Object(C.a)(n,[{key:"getClassName",value:function(){return gt.className}}]),n}(gt);kt.className="HeNormal",S.lh.registerClass(kt);var wt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Object(C.a)(n,[{key:"getClassName",value:function(){return gt.className}}]),n}(gt);wt.className="HeUniform",S.lh.registerClass(wt);var xt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Object(C.a)(n,[{key:"getClassName",value:function(){return gt.className}}]),n}(gt);xt.className="LeCunNormal",S.lh.registerClass(xt);var jt=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Object(C.a)(n,[{key:"getClassName",value:function(){return gt.className}}]),n}(gt);jt.className="LeCunNormal",S.lh.registerClass(jt);var St=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new U("Random seed is not implemented for Orthogonal Initializer yet.");return r}return Object(C.a)(n,[{key:"apply",value:function(e,t){var n=this;return Object(S.di)((function(){if(e.length<2)throw new U("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=$e(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=S.Ef.gramSchmidt(t);return e[0]>e[1]&&(r=r.transpose()),Object(S.jg)(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(lt);St.className="Orthogonal",S.lh.registerClass(St);var _t={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return te(e,S.lh.SerializationMap.getMap().classNameMap,t,"initializer")}function Et(e){return $(e)}function Nt(e){if("string"===typeof e){var t=e in _t?_t[e]:e;if("GlorotNormal"===t)return new Ot;if("GlorotUniform"===t)return new yt;if("HeNormal"===t)return new kt;if("HeUniform"===t)return new wt;if("LeCunNormal"===t)return new xt;if("LeCunUniform"===t)return new jt;var n={};return n.className=t,n.config={},Ct(n)}return e instanceof lt?e:Ct(e)}function Tt(){return new ft}function It(){return new dt}function At(e){return new pt(e)}function Mt(e){return new ht(e)}function Pt(e){return new vt(e)}function Rt(e){return new mt(e)}function Dt(e){return new bt(e)}function Ft(e){return new gt(e)}function Lt(e){return new yt(e)}function zt(e){return new Ot(e)}function qt(e){return new kt(e)}function Vt(e){return new wt(e)}function Bt(e){return new xt(e)}function Ut(e){return new jt(e)}function Wt(e){return new St(e)}var Gt=0;function Ht(){return Gt++}var Kt={};function Xt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in Kt||(Kt[e]=0),Kt[e]+=1,e+Kt[e].toString()}function Qt(e){return Array.isArray(e)&&Array.isArray(e[0])}function Yt(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Zt(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new B("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function Jt(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new B("Expected exactly 1 Shape; got ".concat(e.length))}return e}function $t(e){var t,n=0,r=Object(M.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(i){r.e(i)}finally{r.f()}return n}var en="Variable",tn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:en,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(_.a)(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=Ht(),r=null==r?en:r,this.originalName=Re(r),this.name=De(this.originalName),this.trainable_=a,this.constraint=i,this.val=S.ti(t,this.trainable_,this.name,this.dtype)}return Object(C.a)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function nn(e){return e.map((function(e){return e.read()}))}function rn(e){e.forEach((function(e){e[0].write(e[1])}))}var an=function e(t){Object(_.a)(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}},on=function e(t,n,r,a,i,o,s){Object(_.a)(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=Ht(),null!=o&&(this.originalName=Re(o),this.name=De(this.originalName)),this.rank=n.length},sn=0,cn=function(){function e(t,n){Object(_.a)(this,e),this.callArgs=n,this.id=sn++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=Object(M.a)(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(o){a.e(o)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return Object(C.a)(e,[{key:"getConfig",value:function(){var e,t=[],n=Object(M.a)(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(a){n.e(a)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),un=0,ln=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_.a)(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=un++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=Y(i)+"_"+Xt(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var c=r.dtype;null==c&&(c=r.inputDType),null==c&&(c="float32"),e.dtype=c}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return Object(C.a)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new V("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new B("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return X(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return X(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new q("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new q("Layer ".concat(this.name)+" is not connected, no input to return.");return X(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new q("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new q("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return X(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=Q(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=Q(this.inputSpec);if(e.length!==t.length)throw new B("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new B("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new B("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new B("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new B("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var c=Number(s),u=a.axes[s],l=c>=0?o[c]:o[o.length+c];if(null!=u&&-1===[u,null].indexOf(l))throw new B("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(c," of input shape to ")+"have value ".concat(u," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var f=0;f<a.shape.length;++f){var d=a.shape[f],p=r.shape[f];if(null!=d&&null!=p&&d!==p)throw new B("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=Q(e),i=!0,o=Object(M.a)(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof on)){i=!1;break}}}catch(l){o.e(l)}finally{o.f()}var s,c=!0,u=Object(M.a)(a);try{for(u.s();!(s=u.n()).done;){if(s.value instanceof on){c=!1;break}}}catch(l){u.e(l)}finally{u.f()}if(i===c)throw new B("Arguments to apply() must be all SymbolicTensors or all Tensors");return Pe(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=Object(M.a)(Q(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(l){o.e(l)}finally{o.f()}n.build(X(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&c&&(n._refCount=1)}if(n.assertInputCompatibility(e),c){var u,f=n.call(e,t),d=Q(f),p=[],h=Object(M.a)(d);try{for(h.s();!(u=h.n()).done;){var v=u.value;-1!==a.indexOf(v)&&(v=v.clone()),p.push(v)}}catch(l){h.e(l)}finally{h.f()}if(f=X(p),null!=n.activityRegularizer)throw new U("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return f}var m,b=function(e){e=Q(e);var t,n=[],r=Object(M.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(l){r.e(l)}finally{r.f()}return X(n)}(e),g=n.computeOutputShape(b),y="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?b[0]:b),m=null!=g&&g.length>0&&Array.isArray(g[0])?g.map((function(r,a){return new on(y,r,n,Q(e),t,n.name,a)})):new on(y,g,n,Q(e),t,n.name),n.addInboundNode(e,m,null,null,b,g,t),n._refCount++,null!=n.activityRegularizer)throw new U("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new q("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=Object(M.a)(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(o){n.e(o)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new q("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new V("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return $t(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return nn(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;Object(S.di)((function(){var n=t.weights;if(n.length!==e.length)throw new B('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=nn(n),i=0;i<a.length;++i){var o=a[i],s=n[i],c=e[i];if(!S.qi.arraysEqual(o.shape,c.shape))throw new B("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(c.shape));r.push([s,c])}rn(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o){if(-1!==this._addedWeightNames.indexOf(e))throw new B("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=Nt("zeros"));var s=r.apply(t,n),c=new tn(s,n,e,i,o);return s.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=Q(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,Object(I.a)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=Q(e);t=Q(t),n=Q(n),r=Q(r),a=Yt(a),i=Yt(i);var c,u=[],l=[],f=[],d=Object(M.a)(s);try{for(d.s();!(c=d.n()).done;){var p=c.value;u.push(p.sourceLayer),l.push(p.nodeIndex),f.push(p.tensorIndex)}}catch(v){d.e(v)}finally{d.f()}new cn({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:f,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(S.lh.Serializable);function fn(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=fn(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]),c=Object(M.a)(s);try{for(c.s();!(o=c.n()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}}catch(l){c.e(l)}finally{c.f()}}return a}var dn=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:Xt("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new B("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new B("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new B("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new on(r.dtype,r.batchInputShape,Object(P.a)(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new cn({outboundLayer:Object(P.a)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return Object(C.a)(n,[{key:"apply",value:function(e,t){throw new B("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(ln);function pn(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new B("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new dn({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}dn.className="InputLayer",S.lh.registerClass(dn);var hn,vn=n(3),mn=n.n(vn),bn=n(12);function gn(e){return yn.apply(this,arguments)}function yn(){return(yn=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o,s,c,u;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!==typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(c=e.sent,u=0;u<c.length;++u)t[r[u]]=c[u][0];Object(S.Ae)(a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function On(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(hn||(hn={}));var kn=function(){function e(){Object(_.a)(this,e),this.validationData=null}return Object(C.a)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),wn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Object(_.a)(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return Object(C.a)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=Object(M.a)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=Object(M.a)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(M.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(M.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(M.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(M.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Object(M.a)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Object(M.a)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xn=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.call(this)}return Object(C.a)(n,[{key:"onEpochBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"===typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=Object(S.di)((function(){return Object(S.wd)(o.totals[e],Object(S.jg)(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=Object(M.a)(this.params.metrics),e.prev=2,i=function(){var e=a.value;if(null==o.totals[e])return"continue";"number"===typeof o.totals[e]?n[e]=o.totals[e]/o.seen:Object(S.di)((function(){var t=Object(S.jg)(Object(S.Ce)(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),Object(S.xf)(n[e])}))},r.s();case 5:if((a=r.n()).done){e.next=11;break}if("continue"!==i()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(kn),jn=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"onTrainBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r,a,i,o,s,c,u;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(c=e.sent,u=0;u<c.length;++u)this.history[n[u]][r[u]].dispose(),this.history[n[u]][r[u]]=c[u][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(kn),Sn=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;if(Object(_.a)(this,n),(a=t.call(this)).currentEpoch=0,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return S.qi.isNumber(a.yieldEvery)&&(a.maybeWait=function(e,t){var n,r=S.qi.now();return function(){var a=S.qi.now();return a-r<t?n:(r=a,n=e.apply(void 0,arguments))}}(a.maybeWait.bind(Object(P.a)(a)),a.yieldEvery)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return Object(C.a)(n,[{key:"maybeWait",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,gn(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(Object(S.og)()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,gn(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,gn(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(Object(S.og)()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,gn(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,gn(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(Object(S.og)()):S.qi.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,gn(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,gn(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(kn);function _n(e,t){return null==e&&(e={}),e instanceof kn?[e]:Array.isArray(e)&&e[0]instanceof kn?e:Q(e).map((function(e){return new Sn(e,t)}))}var Cn=function(){function e(){Object(_.a)(this,e)}return Object(C.a)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){S.qi.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new B("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,Object(I.a)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function En(e,t,n,r,a,i,o,s,c){var u=new jn,l=[new xn].concat(Object(I.a)(Cn.createCallbacks(t)));null!=e&&l.push.apply(l,Object(I.a)(e)),l.push(u);var f=new wn(l);return f.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:c}),{callbackList:f,history:u}}Cn.constructors={};var Nn=n(14);function Tn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return te(e,S.lh.SerializationMap.getMap().classNameMap,t,"layer",n)}function In(e,t){return Object(S.di)((function(){"float32"!==e.dtype&&(e=e.asType("float32"));var n=S.Qh(nt(e),t,!0),r=S.Ve(n.shape,T()),a=S.Gh(S.Xf(n,r));return S.Ce(e,a)}))}function An(e,t){return Object(S.di)((function(){return S.Zf(nt(S.Oh(t,e)),-1)}))}function Mn(e,t){return Object(S.di)((function(){return S.Zf(S.td(S.Oh(t,e)),-1)}))}function Pn(e,t){return Object(S.di)((function(){var n=S.Oh(e,t),r=S.Zd(S.td(e),T(),Number.MAX_VALUE),a=S.td(S.Ce(n,r));return S.jg(100,S.Zf(a,-1))}))}function Rn(e,t){return Object(S.di)((function(){var n=S.Zd(t,T(),Number.MAX_VALUE),r=S.Hf(S.wd(1,n)),a=S.Zd(e,T(),Number.MAX_VALUE),i=S.Hf(S.wd(1,a));return S.Zf(nt(S.Oh(r,i)),-1)}))}function Dn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(S.di)((function(){if(n)t=S.Ah(t);else{var r=S.Qh(t,t.shape.length-1,!0);t=S.Ce(t,r)}return t=S.Zd(t,T(),1-T()),S.ng(S.Qh(S.jg(e.toFloat(),S.Hf(t)),t.shape.length-1))}))}function Fn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(S.di)((function(){var r=S.Ye(He(e)).toInt(),a=(t=S.Zd(t,T(),1-T())).shape;return Dn(S.sg(r,a[a.length-1]).reshape(a),t,n)}))}function Ln(e,t){return Object(S.di)((function(){var n;return n=S.Zd(t,T(),1-T()),n=S.Hf(S.Ce(n,S.Oh(1,n))),S.Zf(function(e,t){if(!S.qi.arraysEqual(e.shape,t.shape))throw new B("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Object(S.di)((function(){var n=t.relu(),r=t.abs().neg();return n.sub(t.mul(e)).add(r.exp().log1p())}))}(e,n),-1)}))}function zn(e,t){return Object(S.di)((function(){var n=S.Zd(e,T(),1),r=S.Zd(t,T(),1);return S.Qh(S.jg(e,S.Hf(S.Ce(n,r))),-1)}))}function qn(e,t){return Object(S.di)((function(){var n=In(e,-1),r=In(t,-1),a=S.jg(n,r);return S.ng(S.Qh(a,-1))}))}var Vn={meanSquaredError:An,meanAbsoluteError:Mn,meanAbsolutePercentageError:Pn,meanSquaredLogarithmicError:Rn,squaredHinge:function(e,t){return Object(S.di)((function(){var n=S.Xf(0,S.Oh(1,S.jg(e,t)));return S.Zf(nt(n),-1)}))},hinge:function(e,t){return Object(S.di)((function(){var n=S.Xf(0,S.Oh(1,S.jg(e,t)));return S.Zf(n,-1)}))},categoricalHinge:function(e,t){return Object(S.di)((function(){var n=S.Qh(S.jg(e,t),-1),r=S.Tf(S.jg(S.Oh(1,e),t),-1);return S.Xf(0,S.wd(1,S.Oh(r,n)))}))},logcosh:function(e,t){return Object(S.di)((function(){var n=Math.log(2),r=S.Oh(t,e),a=S.Oh(S.wd(r,S.Bh(S.jg(-2,r))),n);return S.Zf(a,-1)}))},categoricalCrossentropy:Dn,sparseCategoricalCrossentropy:Fn,binaryCrossentropy:Ln,kullbackLeiblerDivergence:zn,poisson:function(e,t){return Object(S.di)((function(){var n=S.Hf(S.wd(T(),t));return S.Zf(S.Oh(t,S.jg(e,n)),-1)}))},cosineProximity:qn};function Bn(e){if("string"===typeof e){if(e in Vn)return Vn[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new B(t)}return e}function Un(e,t){return Object(S.di)((function(){var n=S.jg(.5,S.ug(t)),r=We(S.kf(t,n),e.dtype);return S.Zf(S.Ne(e,r),-1)}))}function Wn(e,t){return Object(S.di)((function(){return We(S.Ne(S.Bd(e,-1),S.Bd(t,-1)),"float32")}))}function Gn(e,t){return Object(S.di)((function(){return S.Mf(e.equal(1),t.equal(1)).sum().cast("float32")}))}function Hn(e,t){return Object(S.di)((function(){var n=Gn(e,t),r=function(e,t){return Object(S.di)((function(){return S.Mf(e.equal(0),t.equal(1)).sum().cast("float32")}))}(e,t),a=n.add(r);return S.wi(S.kf(a,0),n.div(a),0).cast("float32")}))}function Kn(e,t){return Object(S.di)((function(){var n=Gn(e,t),r=function(e,t){return Object(S.di)((function(){return S.Mf(e.equal(1),t.equal(0)).sum().cast("float32")}))}(e,t),a=n.add(r);return S.wi(S.kf(a,0),n.div(a),0).cast("float32")}))}function Xn(e,t){return Ln(e,t)}function Qn(e,t){return e.rank===t.rank&&(e=e.squeeze([e.rank-1])),(t=t.argMax(-1)).dtype!==e.dtype&&(t=t.asType(e.dtype)),S.Ne(e,t).asType("float32")}var Yn=Dn,Zn=Fn,Jn={binaryAccuracy:Un,categoricalAccuracy:Wn,precision:Hn,categoricalCrossentropy:Yn,sparseCategoricalCrossentropy:Zn,mse:An,MSE:An,mae:Mn,MAE:Mn,mape:Pn,MAPE:Pn,cosine:qn};function $n(e){if("string"===typeof e&&e in Jn)return Jn[e];if("string"!==typeof e&&null!=e)return e;throw new B("Unknown metric ".concat(e))}function er(e){if(H(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(Vn);n<r.length;n++){var a=r[n];if(Vn[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(Jn);i<o.length;i++){var s=o[i];if(Jn[s]===e){t=s;break}}return void 0!==t?t:e.name}var tr=1048576;function nr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!rr(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>tr&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(tr,"."))}}function rr(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!rr(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=Object(M.a)(e);try{for(i.s();!(a=i.n()).done;){if(!rr(a.value))return!1}}catch(s){i.e(s)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function ar(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=or(e),o=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var c;(c=r).push.apply(c,Object(I.a)(e.nodesByDepth[s]))}a("_".repeat(t)),sr(o,n,a),a("=".repeat(t));for(var u=e.layers,l=0;l<u.length;++l)i?cr(u[l],n,a):ur(u[l],n,r,a),a((l===u.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var f=ir(e),d=$t(e.nonTrainableWeights);a("Total params: ".concat(f+d)),a("Trainable params: ".concat(f)),a("Non-trainable params: ".concat(d)),a("_".repeat(t))}function ir(e){return null!=e.collectedTrainableWeights?$t(e.collectedTrainableWeights):$t(e.trainableWeights)}function or(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,Object(I.a)(s))}if(t){var c,u=Object(M.a)(e.layers);try{for(u.s();!(c=u.n()).done;){var l,f=c.value,d=!1,p=Object(M.a)(f.inboundNodes);try{for(p.s();!(l=p.n()).done;){var h=l.value;if(-1!==r.indexOf(h)){if(d){t=!1;break}d=!0}}}catch(v){p.e(v)}finally{p.f()}if(!t)break}}catch(v){u.e(v)}finally{u.f()}}return t}function sr(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function cr(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(o){r="multiple"}var a=e.name,i=e.getClassName();sr(["".concat(a," (").concat(i,")"),r,e.countParams().toString()],t,n)}function ur(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(b){a="multiple"}var i,o=[],s=Object(M.a)(e.inboundNodes);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var u=0;u<c.inboundLayers.length;++u){var l=c.inboundLayers[u].name,f=c.nodeIndices[u],d=c.tensorIndices[u];o.push("".concat(l,"[").concat(f,"][").concat(d,"]"))}}}catch(b){s.e(b)}finally{s.f()}var p=e.name,h=e.getClassName(),v=0===o.length?"":o[0];sr(["".concat(p," (").concat(h,")"),a,e.countParams().toString(),v],t,r);for(var m=1;m<o.length;++m)sr(["","","",o[m]],t,r)}function lr(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function fr(e,t){if(null===e)return null;if("string"===typeof e)return Z(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];lr(t,a,i)?n.push(i):n.push(fr(i,t))}return n}for(var o={},s=0,c=Object.keys(e);s<c.length;s++){var u=c[s],l=e[u];if("name"===u&&"string"===typeof l)o[u]=l;else{var f=Z(u);o[f]=fr(l,f)}}return o}function dr(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return Y(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];lr(t,a,i)?n.push(i):n.push(dr(i,t))}return n}for(var o={},s=0,c=Object.keys(e);s<c.length;s++){var u=c[s],l=e[u],f=Y(u);o[f]="name"!==u&&"className"!==u||"string"!==typeof l?dr(l,u):l}return o}var pr="2.8.6";var hr=function(){function e(t){if(Object(_.a)(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=Object(M.a)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(o){a.e(o)}finally{a.f()}}}return Object(C.a)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new B("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Object(S.Xd)(t,e.dtype)}catch(n){throw new B("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof on){if(null==this.id2Value[e.id])throw new B("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new B("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof on){if(null==this.id2Value[e.id])throw new B("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new B("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Object(S.Ae)(this.id2Mask)}}]),e}(),vr={},mr={};function br(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],c=s.map((function(e){return e.name})),u=[],l=t.names(),f=Object(M.a)(c);try{for(f.s();!(a=f.n()).done;){var d=a.value;-1!==l.indexOf(d)?u.push(t.getValue(d)):u.push(null)}}catch(z){f.e(z)}finally{f.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,h,v=c.join(",")+"|"+t.names().join(",");if(null==vr[v]){var m=function(e,t){S.qi.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=yr(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=Object(M.a)(e);try{for(s.s();!(i=s.n()).done;){var c,u=yr(i.value,t),l=u.sorted,f=u.recipientMap,d=Object(M.a)(l);try{for(d.s();!(c=d.n()).done;){var p=c.value;o.has(p.name)||(n.push(p),o.add(p.name))}}catch(z){d.e(z)}finally{d.f()}var h=function(e){null==r[e]&&(r[e]=new Set),f[e].forEach((function(t){return r[e].add(t)}))};for(var v in f)h(v)}}catch(z){s.e(z)}finally{s.f()}}return{sorted:n,recipientCounts:gr(r)}}(s,t);p=m.sorted,h=m.recipientCounts,vr[v]=p,mr[v]=h}p=vr[v],h={},i||Object.assign(h,mr[v]);for(var b=new hr(t),g=0;g<p.length;++g){if(null!=r){var y=Object(S.ag)().numTensors;y>r.maxNumTensors&&(r.maxNumTensors=y),y<r.minNumTensors&&(r.minNumTensors=y)}var O=p[g],k=O.sourceLayer;if(!(k instanceof dn)){var w,x=[],j=[],_=[],C=!1,E=Object(M.a)(O.inputs);try{for(E.s();!(w=E.n()).done;){var N=w.value,T=b.getValue(N),I=b.getMask(N);x.push(T),j.push(I),null!=I&&(C=!0),i||(h[N.name]--,0!==h[N.name]||t.hasKey(N)||-1!==c.indexOf(N.name)||T.isDisposed||!0===N.sourceLayer.stateful||_.push(T))}}catch(z){E.e(z)}finally{E.f()}C&&((n=n||{}).mask=j[0]);var A=Q(k.apply(x,n)),P=null;k.supportsMasking&&(P=k.computeMask(x,j));for(var R=Or(O),D=Array.isArray(R)?R:[R],F=0;F<D.length;++F){b.hasKey(D[F])||b.add(D[F],A[F],Array.isArray(P)?P[0]:P);var L=c.indexOf(D[F].name);-1!==L&&(u[L]=A[F])}i||Object(S.Ae)(_)}}return b.disposeMasks(),o?u:u[0]}function gr(e){var t={};for(var n in e)t[n]=e[n].size;return t}function yr(e,t){var n,r=new Set,a=[],i={},o=Object(M.a)(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(v){o.e(v)}finally{o.f()}var c=[],u=[];for(c.push(e);c.length>0;){var l=c[c.length-1];if(r.has(l.name))c.pop();else{var f=u[u.length-1]===c.length-1;if(0===l.inputs.length||f)c.pop(),a.push(l),r.add(l.name),f&&u.pop();else{u.push(c.length-1);var d,p=Object(M.a)(l.inputs);try{for(p.s();!(d=p.n()).done;){var h=d.value;null==i[h.name]&&(i[h.name]=new Set),i[h.name].add(l.name),r.has(h.name)||c.push(h)}}catch(v){p.e(v)}finally{p.f()}}}}return{sorted:a,recipientMap:i}}function Or(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=Object(M.a)(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(o){i.e(o)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}var kr=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=Xt(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],re(r.inputs).length!==r.inputs.length)throw new B("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));re(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=Object(M.a)(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=s.sourceLayer,u=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(c),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}}catch(Te){o.e(Te)}finally{o.f()}var f,d=Object(M.a)(r.inputs);try{for(d.s();!(f=d.n()).done;){var p=f.value,h=p.sourceLayer,v=p.nodeIndex,m=p.tensorIndex;H(0===v,"input layer has >1 nodes"),H(0===m,"input layer has >1 tensors"),r.inputLayers.push(h),r.inputLayersNodeIndices.push(v),r.inputLayersTensorIndices.push(m)}}catch(Te){d.e(Te)}finally{d.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var b=0;b<r.inputLayers.length;b++){var g=r.inputLayers[b];if(!(g instanceof dn))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(b," (0-based) originates ")+"from layer type ".concat(g.getClassName(),"."));r.inputNames.push(g.name),r.feedInputShapes.push(g.batchInputShape),r.feedInputNames.push(g.name)}var y,O=Object(M.a)(r.outputLayers);try{for(O.s();!(y=O.n()).done;){var k=y.value;r.outputNames.push(k.name)}}catch(Te){O.e(Te)}finally{O.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var w,x={},j={},S={},C={},E={},N=[],T=function e(t,a,i,o,s,c){null!=o&&null!=s&&null!=c||(o=t.sourceLayer,s=t.nodeIndex,c=t.tensorIndex);var u=o.inboundNodes[s];if(-1!==i.indexOf(u))throw new V("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(u)){r.containerNodes.add(n.nodeKey(o,s)),o.id in E||(E[o.id]=Object.keys(E).length),-1===i.indexOf(u)&&i.push(u);for(var l=u.inboundLayers.length,f=0;f<l;f++){e(u.inputTensors[f],a,i,u.inboundLayers[f],u.nodeIndices[f],u.tensorIndices[f])}for(a.push(u);i.indexOf(u)>=0;)i.splice(i.indexOf(u),1);N.push(u)}},I=[],A=[],R=Object(M.a)(r.outputs);try{for(R.s();!(w=R.n()).done;){T(w.value,I,A)}}catch(Te){R.e(Te)}finally{R.f()}var D,F=N.slice().reverse(),L=Object(M.a)(F);try{for(L.s();!(D=L.n()).done;){var z=D.value;j[z.id]=z,z.id in x||(x[z.id]=0);var q=x[z.id],U=null==S[z.outboundLayer.id]?0:S[z.outboundLayer.id];q=Math.max(q,U),S[z.outboundLayer.id]=q,C[z.outboundLayer.id]=z.outboundLayer,x[z.id]=q;for(var W=0;W<z.inboundLayers.length;W++){var G=z.inboundLayers[W],K=z.nodeIndices[W],X=G.inboundNodes[K],Q=null==x[X.id]?0:x[X.id];x[X.id]=Math.max(q+1,Q),j[X.id]=X}}}catch(Te){L.e(Te)}finally{L.f()}var Y={};for(var Z in x){var J=x[Z];J in Y||(Y[J]=[]),Y[J].push(j[Z])}var $={};for(var ee in S){var te=S[ee];te in $||($[te]=[]),$[te].push(C[ee])}var ae=Object.keys($).map((function(e){return parseInt(e,10)})).sort(ne);r.layers=[];var ie,oe=Object(M.a)(ae);try{for(oe.s();!(ie=oe.n()).done;){var se=$[ie.value];se.sort((function(e,t){var n=E[e.id],r=E[t.id];return n<r?-1:n>r?1:0}));var ce,ue=Object(M.a)(se);try{for(ue.s();!(ce=ue.n()).done;){var le=ce.value;le instanceof n&&r.internalContainerRefs.push(le),r.layers.push(le)}}catch(Te){ue.e(Te)}finally{ue.f()}}}catch(Te){oe.e(Te)}finally{oe.f()}r.layersByDepth=$,ae=Object.keys(Y).map((function(e){return parseInt(e,10)})).sort(ne);var fe,de=r.inputs.slice(),pe=[],he=Object(M.a)(ae);try{for(he.s();!(fe=he.n()).done;){var ve,me=fe.value,be=Object(M.a)(Y[me]);try{for(be.s();!(ve=be.n()).done;){var ge=ve.value,ye=ge.outboundLayer;if(null!=ye){var Oe,ke=Object(M.a)(ge.inputTensors);try{for(ke.s();!(Oe=ke.n()).done;){var we=Oe.value;if(-1===de.indexOf(we))throw new V("Graph disconnected: cannot obtain value for tensor ".concat(we)+' at layer "'.concat(ye.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(pe))}}catch(Te){ke.e(Te)}finally{ke.f()}var xe,je=Object(M.a)(ge.outputTensors);try{for(je.s();!(xe=je.n()).done;){var Se=xe.value;de.push(Se)}}catch(Te){je.e(Te)}finally{je.f()}pe.push(ye.name)}}}catch(Te){be.e(Te)}finally{be.f()}}}catch(Te){he.e(Te)}finally{he.f()}r.nodesByDepth=Y;var _e,Ce=r.layers.map((function(e){return e.name})),Ee=Object(M.a)(Ce);try{var Ne=function(){var e=_e.value,t=Ce.filter((function(t){return t===e})).length;if(1!==t)throw new V('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(Ce))};for(Ee.s();!(_e=Ee.n()).done;)Ne()}catch(Te){Ee.e(Te)}finally{Ee.f()}return r.outboundNodes=[],r.inboundNodes=[],new cn({outboundLayer:Object(P.a)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return Object(C.a)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=Object(M.a)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(s){n.e(s)}finally{n.f()}var a,i=Object(M.a)(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(s){i.e(s)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new B("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=Object(M.a)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Object(M.a)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(I.a)(r.nonTrainableWeights))}}catch(c){n.e(c)}finally{n.f()}if(!this.trainable){var a,i=[],o=Object(M.a)(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,Object(I.a)(s.trainableWeights))}}catch(c){o.e(c)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=Object(M.a)(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,c=Object(M.a)(s.weights);try{for(c.s();!(o=c.n()).done;){var u=o.value;if(null!=r[u.originalName])throw new B("Duplicate weight name: ".concat(u.originalName));r[u.originalName]=u,a++}}catch(b){c.e(b)}finally{c.f()}}}catch(b){i.e(b)}finally{i.f()}var l=[];for(var f in e){var d=f;if(null==r[f]){var p=f.split("/"),h=p.slice(0,-2).concat([p[p.length-1]]);d=h.join("/")}if(null!=r[d])l.push([r[d],e[f]]);else if(n)throw new B("Provided weight data has no target variable: ".concat(f));delete r[d]}if(n){var v=[];for(var m in r)v.push(m);if(v.length>0)throw new B("".concat(v.length," of ").concat(a," weights are not set: ")+"".concat(v))}rn(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(pr),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=dr(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){e=Q(e);for(var r=new hr,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return br(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return Object(S.di)((function(){var r;return e=Q(e),r=null==t?G(null,e.length):Q(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=Yt(e);if(t.length!==this.inputLayers.length)throw new B("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(ne);if(o.length>1){var s,c=Object(M.a)(o);try{for(c.s();!(s=c.n()).done;){var u,l=s.value,f=this.nodesByDepth[l],d=Object(M.a)(f);try{for(d.s();!(u=d.n()).done;){var p=u.value,h=p.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(h.id)){for(var v=[],m=0;m<p.inboundLayers.length;m++){var b=p.inboundLayers[m],g=p.nodeIndices[m],y=p.tensorIndices[m],O=n["".concat(b.name,"_").concat(g,"_").concat(y)];v.push(O)}for(var k=Yt(h.computeOutputShape(X(v))),w=h.inboundNodes.indexOf(p),x=0;x<k.length;x++){n["".concat(h.name,"_").concat(w,"_").concat(x)]=k[x]}}}}catch(P){d.e(P)}finally{d.f()}}}catch(P){c.e(P)}finally{c.f()}}for(var j=[],S=[],_=0;_<this.outputLayers.length;_++){var C=this.outputLayers[_],E=this.outputLayersNodeIndices[_],N=this.outputLayersTensorIndices[_],T="".concat(C.name,"_").concat(E,"_").concat(N);S.push(T)}for(var I=0;I<S.length;I++){var A=S[I];H(A in n),j.push(n[A])}return X(j)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=G(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,c=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(ne),u=Object(M.a)(c);try{for(u.s();!(s=u.n()).done;){var l,f=s.value,d=this.nodesByDepth[f],p=Object(M.a)(d);try{for(p.s();!(l=p.n()).done;){var h,v=l.value,m=v.outboundLayer,b=v.inputTensors,g=v.outputTensors,y=new Array,O=Object(M.a)(b);try{for(O.s();!(h=O.n()).done;){var k=h.value;k.id in n&&y.push(n[k.id])}}catch(X){O.e(X)}finally{O.f()}if(y.length===b.length){var w={},x=void 0,j=void 0,S=void 0,_=void 0;if(null!=v.callArgs&&(w=v.callArgs),1===y.length){var C=Object(A.a)(y[0],2),E=C[0],N=C[1];null==w.mask&&(w.mask=N),S=Q(m.call(E,w)),_=Q(m.computeMask(E,N)),x=[E],j=[N]}else x=y.map((function(e){return e[0]})),j=y.map((function(e){return e[1]})),null==w.mask&&(w.mask=j),S=Q(m.call(x,w)),_=Q(m.computeMask(x,j));if(m.activityRegularizer)throw new U("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var T=0;T<g.length;++T){var I=g[T],P=S[T],R=_[T];n[I.id]=[P,R]}}}}catch(X){p.e(X)}finally{p.f()}}}catch(X){u.e(X)}finally{u.f()}var D,F=[],L=[],z=[],q=Object(M.a)(this.outputs);try{for(q.s();!(D=q.n()).done;){var V=D.value;H(V.id in n,"Could not compute output ".concat(V.name," : ").concat(V.id));var B=Object(A.a)(n[V.id],2),W=B[0],K=B[1];z.push(W.shape),F.push(W),L.push(K)}}catch(X){q.e(X)}finally{q.f()}return[F,L,z]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=Object(M.a)(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var c=n.nodeKey(o,s);this.containerNodes.has(c)&&(a[c]=t,t+=1)}}}catch(u){i.e(u)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new B("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new B("Provide either a layer name or layer index");var n,r=Object(M.a)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(i){r.e(i)}finally{r.f()}throw new B("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return Object(S.di)((function(){var t,r=[],a=Object(M.a)(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,Object(I.a)(i.calculateLosses()))}}catch(c){a.e(c)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=Object(M.a)(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),c=o.getConfig(),u=[],l=0;l<o.inboundNodes.length;l++){var f=o.inboundNodes[l],d=n.nodeKey(o,l),p={};if(this.containerNodes.has(d)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch(D){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(f.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),p={}}if(f.inboundLayers.length>0){for(var h=[],v=0;v<f.inboundLayers.length;v++){var m=f.inboundLayers[v],b=f.nodeIndices[v],g=f.tensorIndices[v],y=r[n.nodeKey(m,b)];null==y&&(y=0),h.push([m.name,y,g,p])}u.push(h)}}}var O={};O.name=o.name,O.className=s,O.config=c,O.inboundNodes=u,a.push(O)}}catch(D){i.e(D)}finally{i.f()}t.layers=a;for(var k=[],w=0;w<this.inputLayers.length;w++){var x=this.inputLayers[w],j=this.inputLayersNodeIndices[w],S=n.nodeKey(x,j);if(this.containerNodes.has(S)){var _=r[S];null!==_&&void 0!==_||(_=0);var C=this.inputLayersTensorIndices[w];k.push([x.name,_,C])}}t.inputLayers=k;for(var E=[],N=0;N<this.outputLayers.length;N++){var T=this.outputLayers[N],I=this.outputLayersNodeIndices[N],A=n.nodeKey(T,I);if(this.containerNodes.has(A)){var P=r[A];null!==P&&void 0!==P||(P=0);var R=this.outputLayersTensorIndices[N];E.push([T.name,P,R])}}return t.outputLayers=E,t}},{key:"stateful",get:function(){if(this._stateful)throw new B("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=Object(M.a)(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;Object(S.di)((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=Object(M.a)(t);try{for(s.s();!(a=s.n()).done;){var c=a.value,u=c[0],l=c[1],f=c[2];if(n=null==c[3]?{}:c[3],!(u in r))return void i(e,t);var d=r[u];if(d.inboundNodes.length<=l)return void i(e,t);var p=d.inboundNodes[l];o.push(p.outputTensors[f])}}catch(h){s.e(h)}finally{s.f()}o.length>0&&e.apply(X(o),n)}function s(e){var a=e.name,o=Tn(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new B("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var c,u=t.name,l=t.layers,f=Object(M.a)(l);try{for(f.s();!(c=f.n()).done;){var d=c.value;s(d)}}catch(U){f.e(U)}finally{f.f()}for(;!ae(a);){var p,h=Object(M.a)(l);try{for(h.s();!(p=h.n()).done;){var v=p.value,m=r[v.name];if(m.name in a){var b=a[m.name];delete a[m.name];var g,y=Object(M.a)(b);try{for(y.s();!(g=y.n()).done;){var O=g.value;o(m,O)}}catch(U){y.e(U)}finally{y.f()}}}}catch(U){h.e(U)}finally{h.f()}}var k,w=[],x=[],j=t.inputLayers,S=Object(M.a)(j);try{for(S.s();!(k=S.n()).done;){var _=k.value,C=_[0],E=_[1],N=_[2];H(C in r);var T=r[C],I=T.inboundNodes[E].outputTensors;w.push(I[N])}}catch(U){S.e(U)}finally{S.f()}var A,P=t.outputLayers,R=Object(M.a)(P);try{for(R.s();!(A=R.n()).done;){var D=A.value,F=D[0],L=D[1],z=D[2];H(F in r);var q=r[F],V=q.inboundNodes[L].outputTensors;x.push(V[z])}}catch(U){R.e(U)}finally{R.f()}return new e({inputs:w,outputs:x,name:u})}}]),n}(ln);function wr(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function xr(e,t){return wr(e,t,"classWeight")}function jr(e,t,n,r){return Sr.apply(this,arguments)}function Sr(){return(Sr=Object(bn.a)(mn.a.mark((function e(t,n,r,a){var i,o,s;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=Object(S.di)((function(){if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1){return t.argMax(1)}if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),Object(S.Ae)(i),s=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",Object(S.Vh)(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _r(e,t){return Object(S.jg)(e,t)}function Cr(e,t){var n,r,a=t;n=a.xs,r=a.ys,S.qi.assert(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=Er("input",e.inputNames,n),o=Er("output",e.outputNames,r),s=i[0].shape[0];S.qi.assert(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),S.qi.assert(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var c=function(t){S.qi.assert(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},u=0;u<i.length;u++)c(u);for(var l=function(t){S.qi.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},f=0;f<o.length;f++)l(f);return{xs:i,ys:o}}function Er(e,t,n){if(n instanceof S.id)return[n];if(Array.isArray(n))return S.qi.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=Object(M.a)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new B("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(s){i.e(s)}finally{i.f()}return a}function Nr(e){if(3===e.length)throw new U("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function Tr(e,t,n){return Ir.apply(this,arguments)}function Ir(){return(Ir=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w,x,j,_,C,E,N,T,I,A,M,P,R,D,F;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,S.qi.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),S.qi.assert(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),S.qi.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),S.qi.assert(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),S.qi.assert(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(Mr(r.validationData)?S.qi.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(c=Nr(r.validationData),o=c.xs,s=c.ys)),u=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),f=i?l.slice().concat(l.map((function(e){return"val_"+e}))):l.slice(),d=_n(r.callbacks,r.yieldEvery),p=null==r.verbose?1:r.verbose,h=En(d,p,r.epochs,null,null,Ar(n,r),null,i,f),v=h.callbackList,m=h.history,v.setModel(t),t.history=m,e.next=22,v.onTrainBegin();case 22:return t.stopTraining_=!1,b=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:g=e.sent;case 27:if(!(b<r.epochs)){e.next=98;break}return y={},e.next=31,v.onEpochBegin(b);case 31:if(O=0,k=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:g=e.sent;case 37:if(a&&!(O<r.batchesPerEpoch)){e.next=91;break}return e.next=40,g.next();case 40:if(w=e.sent,!a||!w.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(O," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==w.value){e.next=73;break}return x=Cr(t,w.value),j=x.xs,_=x.ys,(C={}).batch=k,C.size=j[0].shape[0],e.next=51,v.onBatchBegin(k,C);case 51:if(E=[],null==r.classWeight){e.next=64;break}N=xr(r.classWeight,t.outputNames),T=0;case 55:if(!(T<N.length)){e.next=64;break}return e.t0=E,e.next=59,jr(_[T],null,N[T]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++T,e.next=55;break;case 64:for(I=j.concat(_).concat(E),A=u(I),S.Ae(I),M=0;M<l.length;++M)P=l[M],R=A[M],C[P]=R,S.xf(R);return e.next=70,v.onBatchEnd(k,C);case 70:On(C),k++,O++;case 73:if(!(a?O>=r.batchesPerEpoch:w.done)){e.next=87;break}if(!i){e.next=86;break}if(D=void 0,!Mr(r.validationData)){e.next=84;break}return e.t2=Q,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,D=(0,e.t2)(e.t3),e.next=85;break;case 84:D=Q(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(F=0;F<t.metricsNames.length;++F)y["val_".concat(t.metricsNames[F])]=D[F];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,v.onEpochEnd(b,y);case 93:if(b++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,v.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])})))).apply(this,arguments)}function Ar(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function Mr(e){return"function"===typeof e.iterator}function Pr(e){return"function"===typeof e.next}function Rr(e,t,n){return Dr.apply(this,arguments)}function Dr(){return(Dr=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new U("Verbose mode is not implemented yet.");case 6:if(S.qi.assert(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!Pr(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,c=0,u=0,l=mn.a.mark((function e(){var n;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=S.di((function(){return n.value&&function(){var e=Cr(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),l=S.di((function(){return i(s)}));if(S.Ae(s),0===u)for(var f=0;f<l.length;++f)o.push(Object(S.gh)(0));for(var d=s[0].shape[0],p=function(e){var t=l[e],n=o[e];o[e]=S.di((function(){return S.wd(o[e],S.jg(d,t))})),u>0&&S.Ae(n)},h=0;h<l.length;++h)p(h);S.Ae(l),c+=d,++u}(),o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(u<r.batches)){e.next=25;break}return e.delegateYield(l(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(f=0;f<o.length;++f)d=o[f],o[f]=S.Ce(o[f],c),S.Ae(d);return e.abrupt("return",X(o));case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fr(e){S.qi.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function Lr(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return Ke(e,t,n-t)})):Ke(e,t,n-t)}function zr(e,t){return S.di((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return zr(e,t)})):tt(e,"int32"===t.dtype?t:t.toInt())}))}function qr(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function Vr(e,t,n,r,a,i,o,s,c,u,l,f,d,p,h){return Br.apply(this,arguments)}function Br(){return(Br=Object(bn.a)(mn.a.mark((function e(t,n,r,a,i,o,s,c,u,l,f,d,p,h,v){var m,b,g,y,O,k,w,x;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==f&&(f=!0),null==p&&(p=0),m=!1,null!=u&&null!=l&&(m=!0),null==v){e.next=10;break}if(m=!0,null!=h){e.next=10;break}throw new B("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(b=t.checkNumSamples(r,i,h,"steps_per_epoch"))&&(g=Ue(0,b)),null==s&&(s=1),y=En(c,s,o,p,b,h,i,m,d),O=y.callbackList,k=y.history,O.setModel(t),t.history=k,e.next=18,O.onTrainBegin();case 18:t.stopTraining_=!1,w=mn.a.mark((function e(o){var s;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.onEpochBegin(o);case 2:if(s={},null==h){e.next=7;break}throw new U("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(mn.a.mark((function e(){var o,c,d,p;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==f){e.next=4;break}throw new U("batch shuffling is not implemneted yet");case 4:f&&S.qi.shuffle(g);case 5:o=Object(S.Vh)(g),c=qr(b,i),d=mn.a.mark((function e(f){var d;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={},e.next=3,O.onBatchBegin(f,d);case 3:return S.di((function(){var e=c[f][0],p=c[f][1],h=Ke(o,e,p-e);d.batch=f,d.size=p-e;for(var v=zr(r,h),b=n(v),g=0;g<a.length;++g){var y=a[g],O=b[g];d[y]=O,S.xf(O)}if(f===c.length-1&&m)for(var k=t.testLoop(u,l,i),w=0;w<a.length;++w){var x=a[w],j=k[w];S.xf(j),s["val_"+x]=j}})),e.next=6,O.onBatchEnd(f,d);case 6:if(On(d),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 9:if(!(p<c.length)){e.next=17;break}return e.delegateYield(d(p),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++p,e.next=9;break;case 17:o.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,O.onEpochEnd(o,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),x=p;case 21:if(!(x<o)){e.next=29;break}return e.delegateYield(w(x),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++x,e.next=21;break;case 29:return e.next=31,O.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ur(e,t,n){return Wr.apply(this,arguments)}function Wr(){return Wr=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w,x,j,_,C,E,N=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N.length>3&&void 0!==N[3]?N[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,Fr(d=null==a.batchSize?32:a.batchSize),p=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,p,d);case 10:if(h=e.sent,i=h[0],o=h[1],f=h[2],v=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(v=!0,2!==a.validationData.length){e.next=22;break}s=a.validationData[0],c=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new U("validationData including sample weights is not supported yet.");case 26:throw new B("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));case 27:return b=!0,e.next=30,t.standardizeUserData(s,c,null,null,b,d);case 30:g=e.sent,u=g[0],l=g[1],m=u.concat(l),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(v=!0,y=Math.floor(i[0].shape[0]*(1-a.validationSplit)),O=i[0].shape[0],u=Lr(i,y,O),i=Lr(i,0,y),l=Lr(o,y,O),o=Lr(o,0,y),m=u.concat(l)):null!=a.validationSteps&&(v=!0);case 37:return k=i.concat(o).concat(f),t.checkTrainableWeightsConsistency(),w=t.makeTrainFunction(),x=t.getDedupedMetricsNames(),v?(t.makeTestFunction(),j=t.testFunction,_=x.slice().concat(x.map((function(e){return"val_"+e})))):(j=null,m=[],_=x.slice()),C=_n(a.callbacks,a.yieldEvery),e.next=45,Vr(t,w,k,x,d,a.epochs,a.verbose,C,j,m,a.shuffle,_,a.initialEpoch,null,null);case 45:return E=e.sent,e.abrupt("return",E);case 47:return e.prev=47,t.isTraining=!1,Hr(i,n),Hr(o,r),Hr(u,s),Hr(l,c),null!=f&&S.Ae(f),e.finish(47);case 55:case"end":return e.stop()}}),e,null,[[4,,47,55]])}))),Wr.apply(this,arguments)}function Gr(e){var t=[];e instanceof S.id&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(Ge(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Hr(e,t){if(null!=e){var n=[];if(t instanceof S.id)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof S.id)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function Kr(e){return Array.isArray(e)}function Xr(e){return!function(e){return e instanceof S.id}(e)&&!Kr(e)}function Qr(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(Kr(e)&&e.length>0)o=!0;else if(Xr(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new B("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(Xr(e)){e=e,r=[];var c,u=Object(M.a)(t);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(null==e[l])throw new B('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(m){u.e(m)}finally{u.f()}}else if(Kr(e)){if((e=e).length!==t.length)throw new B("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(e=e,t.length>1)throw new B("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=Gr(r),null!=n)for(var f=0;f<t.length;++f)if(null!=n[f]){var d=r[f];if(d.shape.length!==n[f].length)throw new B("Error when checking ".concat(i,": expected ").concat(t[f]," ")+"to have ".concat(n[f].length," dimension(s). but got array with ")+"shape ".concat(d.shape));for(var p=0;p<n[f].length;++p)if(0!==p||a){var h=d.shape[p],v=n[f][p];if(null!=v&&v>=0&&h!==v)throw new B("Error when checking ".concat(i,": expected ").concat(t[f]," ")+"to have shape [".concat(n[f],"], but got array with shape ")+"[".concat(d.shape,"]."))}}return r}function Yr(e,t,n){var r=re(e.map((function(e){return e.shape[0]})));r.sort();var a=re(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new B("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new B("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!S.qi.arraysEqual(r,a))throw new B("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function Zr(e,t,n){for(var r=[An,Ln,Dn],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===Dn&&1===i.shape[i.shape.length-1])throw new B("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var c=i.shape.slice(1),u=s.slice(1),l=0;l<c.length;++l){var f=c[l],d=u[l];if(null!=d&&f!==d)throw new B("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function Jr(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new B("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new B("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new B("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var c=0;c<n[o].length;++c)if(0!==c||a){var u=s.shape[c],l=n[o][c];if(null!=l&&l!==u)throw new B("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var $r=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).isTraining=!1,r}return Object(C.a)(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new B("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");ar(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return S.hi.adagrad(.01)},Adadelta:function(){return S.hi.adadelta(1,.95,T())},Adam:function(){return S.hi.adam(.001,.9,.999,T())},Adamax:function(){return S.hi.adamax(.002,.9,.999,T(),0)},RMSProp:function(){return S.hi.rmsprop(.001,.9,0,T())},SGD:function(){return S.hi.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new B("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof S.mc))throw new B("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new B("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return Bn(e)}))}else{var a=Bn(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new B('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=Object(M.a)(this.outputNames);try{for(s.s();!(o=s.n()).done;){var c=o.value;null==e.loss[c]&&console.warn('Output "'.concat(c,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(c," during training")),n.push(Bn(e.loss[c]))}}catch(v){s.e(v)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var u=0;u<this.outputs.length;++u){var l=this.internalOutputShapes[u],f=this.outputNames[u];this.feedOutputNames.push(f),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[u])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Pe("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===d.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var p=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=Object(M.a)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(v){i.e(v)}finally{i.f()}return a}(e.metrics,this.outputNames),h=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};Pe("metric",(function(){for(var e=function(e){if(-1!==d.indexOf(e))return"continue";!function(n){var r,a,i,o,s=Object(M.a)(n);try{for(s.s();!(o=s.n()).done;){var c=o.value;if("string"===typeof c&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(c)){var u=t.internalOutputShapes[e];1===u[u.length-1]||t.lossFunctions[e]===Ln?-1!==["accuracy","acc"].indexOf(c)?a=Un:-1!==["crossentropy","ce"].indexOf(c)&&(a=Xn):t.lossFunctions[e]===Fn?-1!==["accuracy","acc"].indexOf(c)?a=Qn:-1!==["crossentropy","ce"].indexOf(c)&&(a=Zn):-1!==["accuracy","acc"].indexOf(c)?a=Wn:-1!==["crossentropy","ce"].indexOf(c)&&(a=Yn);var l=void 0;-1!==["accuracy","acc"].indexOf(c)?l="acc":-1!==["crossentropy","ce"].indexOf(c)&&(l="ce"),i=a,r=""+l}else{var f=$n(c);i=f,r=""+er(c)}var d=void 0;Pe(r,(function(){d=i})),h(e,r,d)}}catch(v){s.e(v)}finally{s.f()}}(p[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;Fr(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,c=this.testLoop(s,o,r,n.verbose,n.steps);return X(c)}finally{Hr(i[0],e),Hr(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",Rr(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new B("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new B("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new B("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new hr;if(e instanceof S.id&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new B("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,c=Object(M.a)(this.inputs);try{for(c.s();!(s=c.n()).done;){var u=s.value,l=e[u.name];if(null==l)throw new B("No value is provided for the model's input ".concat(u.name));i.add(u,l)}}catch(d){c.e(d)}finally{c.f()}}var f=br(a,i);return n?f:f[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=G(null,e.length),r=e.length,a=Object(M.a)(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),c=0;c<e.length;++c){var u=s.indexOf(e[c]);if(-1!==u&&(n[c]=o[u],r--),0===r)break}if(0===r)break}}catch(f){a.e(f)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new B("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S.di((function(){var a=t.checkNumSamples(e);if(r)throw new U("Verbose predictLoop() is not implemented yet.");for(var i=qr(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){S.di((function(){var r=i[n][0],a=i[n][1],o=Lr(e,r,a),s=[];if(Array.isArray(o))for(var c=0;c<o.length;++c)s.push({key:t.inputs[c],value:o[c]});else s.push({key:t.inputs[0],value:o});var u=new hr(s);return br(t.outputs,u)})).forEach((function(e,t){return o[t].push(e)}))},c=0;c<i.length;++c)s(c);return X(o.map((function(e){return S.ce(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Gr(e);Jr(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return Fr(r),this.predictLoop(n,r)}finally{Hr(n,e)}}},{key:"predictOnBatch",value:function(e){Jr(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new V("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a],o=this.feedLossFns[a];o===Fn?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(Yr(e=Qr(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Qr(t,this.feedOutputNames,r,!1,"target")),Zr(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new B("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a){var i,o,s,c,u,l,f,d,p,h=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(h.length>4&&void 0!==h[4])||h[4],o=h.length>5?h[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),c=Object(A.a)(s,2),u=c[0],l=c[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(f=null,null==a){e.next=19;break}d=xr(a,this.outputNames),f=[],p=0;case 10:if(!(p<d.length)){e.next=19;break}return e.t0=f,e.next=14,jr(l[p],null,d[p]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++p,e.next=10;break;case 19:return e.abrupt("return",[u,l,f]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return S.di((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new U("Verbose mode is not implemented yet.");if(null!=i)throw new U("steps mode in testLoop() is not implemented yet");for(var c=qr(o,n),u=Object(S.Vh)(Ue(0,o)),l=0;l<c.length;++l){var f=c[l][0],d=c[l][1],p=Ke(u,f,d-f),h=zr(t,p),v=e(h);if(0===l)for(var m=0;m<v.length;++m)s.push(Object(S.gh)(0));for(var b=0;b<v.length;++b){var g=v[b];s[b]=S.wd(s[b],S.jg(d-f,g))}}for(var y=0;y<s.length;++y)s[y]=S.Ce(s[y],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(K(e,r)>1){var i=K(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var c,u=new hr(t),l=br(e.outputs,u,{training:!0}),f=0;f<e.lossFunctions.length;++f){var d=(0,e.lossFunctions[f])(a[f],l[f]);null!=i[f]&&(d=_r(d,i[f]));var p=S.Zf(d);n.push(p),c=0===f?d:S.wd(c,d)}for(var h=0;h<e.metricsTensors.length;++h){var v=void 0;if(e.outputs.length>1&&h<e.outputs.length)v=n[h];else{var m=e.metricsTensors[h][0],b=e.metricsTensors[h][1];v=S.Zf(m(a[b],l[b]))}S.xf(v),o.push(v)}return c=S.Zf(c),e.calculateLosses().forEach((function(e){c=S.wd(c,e)})),c}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return S.di((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var c=new hr(o),u=br(e.outputs,c),l=0;l<e.lossFunctions.length;++l){var f=e.lossFunctions[l],d=S.Zf(f(i[l],u[l]));n=0===l?d:S.wd(n,d),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var h=e.metricsTensors[p][0],v=e.metricsTensors[p][1],m=S.Zf(h(i[v],u[v]));r.push(m)}return r}))}}},{key:"fit",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",Ur(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tr(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f,d;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),s=o(a.concat(i)),c=[],u=Object(M.a)(s),e.prev=9,u.s();case 11:if((l=u.n()).done){e.next=19;break}return f=l.value,e.next=15,f.data();case 15:d=e.sent,c.push(d[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),u.e(e.t0);case 24:return e.prev=24,u.f(),e.finish(24);case 27:return S.Ae(s),e.abrupt("return",X(c));case 29:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=S.ag().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-S.ag().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=Y(this.loss);else if(Array.isArray(this.loss)){var t,n=Object(M.a)(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(c){n.e(c)}finally{n.f()}e=this.loss.map((function(e){return Y(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=Y(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[Y(er(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return Y(er(e))}));var e={};for(var t in this.metrics)e[t]=Y(er(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=Tn(fr(e.optimizer_config));if("string"===typeof e.loss)t=Z(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return Z(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=Z(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return Z(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=Z(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=S.sf.getSaveHandlers(t)).length){e.next=6;break}throw new B("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new B("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new B("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,S.sf.encodeWeights(this.getNamedWeights(n));case 13:if(a=e.sent,!1,null,i=this.toJSON(null,false),o={modelTopology:i,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(pr),convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){e.next=34;break}return o.trainingConfig=this.getTrainingConfig(),c="optimizer",e.t0=S.sf,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=c,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:u=e.sent,l=u.data,f=u.specs,(s=a.specs).push.apply(s,Object(I.a)(f)),a.data=S.sf.concatenateArrayBuffers([a.data,l]);case 34:return null!=this.userDefinedMetadata&&(!0,nr(this.userDefinedMetadata,this.name,true),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=a.data,o.weightSpecs=a.specs,e.abrupt("return",t.save(o));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){nr(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(kr);$r.className="Model",S.lh.registerClass($r);var ea=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}($r);function ta(e,t){return na.apply(this,arguments)}function na(){return(na=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o,s,c,u,l;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modelTopology"in t||(t={modelTopology:t}),null!=(r=(t=t).modelTopology).model_config&&(r=r.model_config),a=fr(r),i=Tn(a,n),null==t.weightsManifest){e.next=15;break}return e.next=9,S.sf.loadWeights(t.weightsManifest,t.pathPrefix,i.weights.map((function(e){return e.originalName})));case 9:o=e.sent,s={},c=Object(M.a)(i.weights);try{for(c.s();!(u=c.n()).done;)l=u.value,s[l.originalName]=o[l.originalName]}catch(f){c.e(f)}finally{c.f()}i.loadWeights(s),Object(S.Ae)(o);case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(){return(ra=Object(bn.a)(mn.a.mark((function e(t,n){var r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!==typeof t){e.next=10;break}if(0!==(r=S.sf.getLoadHandlers(t,n)).length){e.next=7;break}r.push(S.sf.browserHTTPRequest(t,n)),e.next=9;break;case 7:if(!(r.length>1)){e.next=9;break}throw new B("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat(t,"'"));case 9:t=r[0];case 10:return e.abrupt("return",aa(t,void 0,n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(e,t,n){return ia.apply(this,arguments)}function ia(){return(ia=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=3;break}throw new B("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,t.load();case 5:if(a=e.sent,null!=(i=a.modelTopology).model_config&&(i=i.model_config),o=null==r.strict||r.strict,s=null!=a.weightData&&null!=a.weightSpecs&&o,c=Tn(fr(i),n,s),null!=(u=a.trainingConfig)&&c.loadTrainingConfig(u),null!=a.userDefinedMetadata&&c.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=24;break}if(null!=a.weightSpecs){e.next=17;break}throw new B("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 17:if(l=oa(a.weightData,a.weightSpecs),f=l.modelWeights,d=l.optimizerWeights,c.loadWeights(f,o),!(null!=c.optimizer&&d.length>0)){e.next=22;break}return e.next=22,c.optimizer.setWeights(d);case 22:Object(S.Ae)(f),Object(S.Ae)(d.map((function(e){return e.tensor})));case 24:return e.abrupt("return",c);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oa(e,t){var n=S.sf.decodeWeights(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}ea.className="Functional",S.lh.registerClass(ea);var sa=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:Xt("sequential_"),null!=e.layers){var a,i=Object(M.a)(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(s){i.e(s)}finally{i.f()}}return r}return Object(C.a)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new B("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof $r;if(r){if(1!==(t=e).outputs.length)throw new B("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new B("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new B("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=pn({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new B("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new B("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=fn(this.outputs[0])}this.inboundNodes=[],new cn({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:G(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(Jt(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new $r({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),Object(Nn.a)(Object(R.a)(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),Object(Nn.a)(Object(R.a)(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new V("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new V("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new V("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new V("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new B("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new B("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=Object(M.a)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(i){n.e(i)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new B("Legacy serialization format not supported yet.");r=t}else S.qi.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new U("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,c=Object(M.a)(r);try{for(c.s();!(s=c.n()).done;){var u=s.value,l=void 0,f=Tn(u,l,a);a&&f.setFastWeightInitDuringBuild(!0),o.add(f)}}catch(d){c.e(d)}finally{c.f()}return o}}]),n}($r);function ca(e){return new $r(e)}function ua(e){return new sa(e)}function la(e,t){return null==t&&(t={}),function(e,t){return ra.apply(this,arguments)}(e,t)}function fa(e){return pn(e)}function da(e,t){Cn.registerCallbackConstructor(e,t)}sa.className="Sequential",S.lh.registerClass(sa);var pa=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"getConfig",value:function(){return{}}}]),n}(S.lh.Serializable),ha=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return it(e,t)}}]),n}(pa);ha.className="elu",S.lh.registerClass(ha);var va=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){return S.jh(e)}}]),n}(pa);va.className="selu",S.lh.registerClass(va);var ma=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){return S.Ug(e)}}]),n}(pa);ma.className="relu",S.lh.registerClass(ma);var ba=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){return Object(S.di)((function(){return S.cg(6,S.Ug(e))}))}}]),n}(pa);ba.className="relu6",S.lh.registerClass(ba);var ga=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){return e}}]),n}(pa);ga.className="linear",S.lh.registerClass(ga);var ya=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){return S.ph(e)}}]),n}(pa);ya.className="sigmoid",S.lh.registerClass(ya);var Oa=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){return function(e){return Object(S.di)((function(){var t=S.wd(.5,S.jg(.2,e));return S.Zd(t,0,1)}))}(e)}}]),n}(pa);Oa.className="hardSigmoid",S.lh.registerClass(Oa);var ka=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){return S.Bh(e)}}]),n}(pa);ka.className="softplus",S.lh.registerClass(ka);var wa=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){return function(e){return Object(S.di)((function(){return S.Ce(e,S.td(e).add(1))}))}(e)}}]),n}(pa);wa.className="softsign",S.lh.registerClass(wa);var xa=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){return S.Th(e)}}]),n}(pa);xa.className="tanh",S.lh.registerClass(xa);var ja=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return S.Ah(e,t)}}]),n}(pa);ja.className="softmax",S.lh.registerClass(ja);var Sa=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return S.Kf(e,t)}}]),n}(pa);Sa.className="logSoftmax",S.lh.registerClass(Sa);var _a=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(S.di)((function(){return S.ph(e.mul(t)).mul(e)}))}}]),n}(pa);function Ca(e){return e.getClassName()}function Ea(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return te(e,S.lh.SerializationMap.getMap().classNameMap,t,"activation")}function Na(e){if(null==e){var t={className:"linear",config:{}};return Ea(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},Ea(n)}return e instanceof pa?e:Ea(e)}function Ta(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}_a.className="swish",S.lh.registerClass(_a);var Ia=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(S.lh.Serializable),Aa=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this),Ta(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return Object(C.a)(n,[{key:"apply",value:function(e){var t=this;return Object(S.di)((function(){var n=Object(S.yi)([1]);return t.hasL1&&(n=Object(S.wd)(n,Object(S.Qh)(S.jg(t.l1,Object(S.td)(e))))),t.hasL2&&(n=Object(S.wd)(n,Object(S.Qh)(S.jg(t.l2,nt(e))))),n.asScalar()}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(Ia);Aa.className="L1L2",S.lh.registerClass(Aa);var Ma={l1l2:"L1L2"};function Pa(e){return $(e)}function Ra(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return te(e,S.lh.SerializationMap.getMap().classNameMap,t,"regularizer")}function Da(e){return null==e?null:"string"===typeof e?Ra({className:e in Ma?Ma[e]:e,config:{}}):e instanceof Ia?e:Ra(e)}var Fa=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return Object(C.a)(n,[{key:"call",value:function(e,t){e=Zt(e);var n=Object(S.Ug)(e);return null!=this.maxValue&&(n=Object(S.Zd)(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Fa.className="ReLU",S.lh.registerClass(Fa);var La=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Object(C.a)(n,[{key:"call",value:function(e,t){var n=Zt(e);return Object(S.zf)(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);La.className="LeakyReLU",S.lh.registerClass(La);var za=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=Nt(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=Da(e.alphaRegularizer),r.alphaConstraint=ye(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new B("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return Object(C.a)(n,[{key:"build",value:function(e){var t=(e=Jt(e)).slice(1);if(null!=this.sharedAxes){var n,r=Object(M.a)(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(o){r.e(o)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new an({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=Zt(e),Object(S.Fg)(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:Et(this.alphaInitializer),alphaRegularizer:Pa(this.alphaRegularizer),alphaConstraint:be(this.alphaConstraint),sharedAxes:this.sharedAxes},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);za.className="PReLU",S.lh.registerClass(za);var qa=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new U("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Object(C.a)(n,[{key:"call",value:function(e,t){var n=Zt(e);return Object(S.He)(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);qa.className="ELU",S.lh.registerClass(qa);var Va=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return Object(C.a)(n,[{key:"call",value:function(e,t){var n=Zt(e);return n.mul(We(n.greater(this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Va.className="ThresholdedReLU",S.lh.registerClass(Va);var Ba=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new ja).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return Object(C.a)(n,[{key:"call",value:function(e,t){var n=Zt(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Ba.className="Softmax",S.lh.registerClass(Ba);var Ua=n(77);function Wa(e,t,n){if("number"===typeof e)return G(e,t);if(e.length!==t)throw new B("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((i=a)!==parseInt(i.toString(),10))throw new B("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var i}function Ga(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function Ha(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Be([n-t,0]);else{if("same"!==r)throw new B("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function Ka(e,t){return Object(S.di)((function(){return Te(t),"channelsFirst"===t?S.ii(e,[0,2,3,1]):e}))}function Xa(e,t){return Object(S.di)((function(){return Te(t),"channelsFirst"===t?S.ii(e,[0,2,3,4,1]):e}))}function Qa(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Object(S.di)((function(){if(null==i&&(i="channelsLast"),Te(i),3!==e.shape.length)throw new B("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new B("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new B("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=S.ii(e,[0,2,1])),"causal"===a)throw new U("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=S.he(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=at(s,n)),s}))}function Ya(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Object(S.di)((function(){if(null==i&&(i="channelsLast"),Te(i),3!==e.rank&&4!==e.rank)throw new B("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new B("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var c=Ka(e,i);if("causal"===a)throw new U("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=S.af.conv2d({x:c,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(c=S.ii(c,[0,3,1,2])),c}))}function Za(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return Object(S.di)((function(){if(null==i&&(i="channelsLast"),Te(i),4!==e.rank&&5!==e.rank)throw new B("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new B("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=Xa(e,i);if("causal"===a)throw new U("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=S.ke(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=at(s,n)),"channelsFirst"===i&&(s=S.ii(s,[0,4,1,2,3])),s}))}var Ja=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;if(Object(_.a)(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,se(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new U("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=Wa(r.kernelSize,e,"kernelSize"),a.strides=Wa(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,Ie(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,Te(a.dataFormat),a.activation=Na(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=Nt(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=ye(r.biasConstraint),a.biasRegularizer=Da(r.biasRegularizer),a.activityRegularizer=Da(r.activityRegularizer),a.dilationRate=Wa(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new B("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new B("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new B("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return Object(C.a)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Ca(this.activation),useBias:this.useBias,biasInitializer:Et(this.biasInitializer),biasRegularizer:Pa(this.biasRegularizer),activityRegularizer:Pa(this.activityRegularizer),biasConstraint:be(this.biasConstraint)},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(H("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!oe(e.kernelSize,"number",1,3))throw new B("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ln),$a=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;return Object(_.a)(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,se(a.filters,"filters"),a.kernelInitializer=Nt(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=ye(r.kernelConstraint),a.kernelRegularizer=Da(r.kernelRegularizer),a}return Object(C.a)(n,[{key:"build",value:function(e){e=Jt(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new B("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:Object(Ua.a)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){var t;e=Zt(e);var r=null==n.bias?null:n.bias.read(),a=ue(n.activation.getClassName());if(null!=a&&2===n.rank)t=Ya(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=Qa(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=Ya(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new U("convolutions greater than 3D are not implemented yet.");t=Za(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=Jt(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=Ga(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:Et(this.kernelInitializer),kernelRegularizer:Pa(this.kernelRegularizer),kernelConstraint:be(this.kernelConstraint)},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new B("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(Ja),ei=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return Object(C.a)(n,[{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!oe(e.kernelSize,"number",1,2))throw new B("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}($a);ei.className="Conv2D",S.lh.registerClass(ei);var ti=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return Object(C.a)(n,[{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new B("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}($a);ti.className="Conv3D",S.lh.registerClass(ti);var ni=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),(r=t.call(this,e)).inputSpec=[new an({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new B("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return Object(C.a)(n,[{key:"build",value:function(e){if(4!==(e=Jt(e)).length)throw new B("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new B("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new an({ndim:4,axes:Object(Ua.a)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return S.di((function(){var t=Zt(e);if(4!==t.shape.length)throw new B("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],c=i[a],u=n.kernelSize[0],l=n.kernelSize[1],f=n.strides[0],d=n.strides[1],p=[o,Ha(s,f,u,n.padding),Ha(c,d,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=S.ii(t,[0,2,3,1]));var h=S.je(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(h=S.ii(h,[0,3,1,2])),null!=n.bias&&(h=at(h,n.bias.read(),n.dataFormat)),null!=n.activation&&(h=n.activation.apply(h)),h}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=Jt(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],c=this.strides[1];return a[t]=this.filters,a[n]=Ha(a[n],s,i,this.padding),a[r]=Ha(a[r],c,o,this.padding),a}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(ei);ni.className="Conv2DTranspose",S.lh.registerClass(ni);var ri=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;if(Object(_.a)(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new B("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new B("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new B("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=Nt(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=Da(r.depthwiseRegularizer),a.depthwiseConstraint=ye(r.depthwiseConstraint),a.pointwiseInitializer=Nt(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=Da(r.pointwiseRegularizer),a.pointwiseConstraint=ye(r.pointwiseConstraint),a}return Object(C.a)(n,[{key:"build",value:function(e){if((e=Jt(e)).length<this.rank+2)throw new B("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new B("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new an({ndim:this.rank+2,axes:Object(Ua.a)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){var t;if(e=Zt(e),1===n.rank)throw new U("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=S.ii(e,[0,2,3,1])),t=S.kh(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=at(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=S.ii(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Et(this.depthwiseInitializer),e.pointwiseInitializer=Et(this.pointwiseInitializer),e.depthwiseRegularizer=Pa(this.depthwiseRegularizer),e.pointwiseRegularizer=Pa(this.pointwiseRegularizer),e.depthwiseConstraint=be(this.depthwiseConstraint),e.pointwiseConstraint=be(this.pointwiseConstraint),e}}]),n}($a);ri.className="SeparableConv";var ai=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,2,e)}return n}(ri);ai.className="SeparableConv2D",S.lh.registerClass(ai);var ii=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return Object(C.a)(n,[{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!oe(e.kernelSize,"number",1,1))throw new B("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}($a);ii.className="Conv1D",S.lh.registerClass(ii);var oi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){if(e=Zt(e),"channelsLast"===n.dataFormat){var t=Qe(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return Qe(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=Qe(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return Qe(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);oi.className="Cropping2D",S.lh.registerClass(oi);var si=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r,a;return Object(_.a)(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Te(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,ie(Se,"InterpolationFormat",a),r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return S.di((function(){var t=Zt(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=S.ii(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?t.resizeNearestNeighbor([a,i]):t.resizeBilinear([a,i]);return S.ii(o,[0,3,1,2])}var s=n.size[0]*r[1],c=n.size[1]*r[2];return"nearest"===n.interpolation?t.resizeNearestNeighbor([s,c]):t.resizeBilinear([s,c])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);si.className="UpSampling2D",S.lh.registerClass(si);var ci=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=Nt(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=ye(e.depthwiseConstraint),r.depthwiseRegularizer=Da(e.depthwiseRegularizer),r}return Object(C.a)(n,[{key:"build",value:function(e){if((e=Jt(e)).length<4)throw new B("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new B("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return Object(S.di)((function(){null==a&&(a="channelsLast"),Te(a);var o=Ka(e,a);if(4!==e.rank)throw new B("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new B("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=S.ve(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=S.ii(o,[0,3,1,2])),o}))}(e=Zt(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=at(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=Jt(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Ga(t,this.kernelSize[0],this.padding,this.strides[0]),i=Ga(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Et(this.depthwiseInitializer),e.depthwiseRegularizer=Pa(this.depthwiseRegularizer),e.depthwiseConstraint=be(this.depthwiseRegularizer),e}}]),n}(Ja);function ui(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new B("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function li(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return S.di((function(){var c=t.shape.length;if(c<3)throw new B("Input should be at least 3D, but is ".concat(c,"D."));var u=[1,0].concat(Ue(2,c));if(t=S.ii(t,u),null!=i)throw new U("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=a.asType("bool").asType("float32")).rank===c-1&&(a=S.Re(a,-1)),a=S.ii(a,u)),r&&(t=S.Yg(t,0),null!=a&&(a=S.Yg(a,0)));var l,f,d=[],p=n,h=t.shape[0],v=S.oi(t);null!=a&&(f=S.oi(a));for(var m,b=function(t){var n=v[t],r=S.di((function(){return e(n,p)}));if(null==a)l=r[0],p=r[1];else{var i=S.di((function(){var e=f[t],n=S.ug(e).sub(e);return{output:r[0].mul(e).add(p[0].mul(n)),newStates:p.map((function(t,a){return r[1][a].mul(e).add(t.mul(n))}))}}));l=i.output,p=i.newStates}s&&d.push(l)},g=0;g<h;++g)b(g);if(s){m=S.Lh(d,1)}return[l,m,p]}))}ci.className="DepthwiseConv2D",S.lh.registerClass(ci);var fi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r,a;if(Object(_.a)(this,n),r=t.call(this,e),null==e.cell)throw new B("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new yi({cells:e.cell}):e.cell).stateSize)throw new B("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new an({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return Object(C.a)(n,[{key:"getStates",value:function(){return null==this.states_?Ue(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){Qt(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=Object(M.a)(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(c){o.e(c)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return S.di((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new U("Constants support is not implemented in RNN yet.");Qt(e)&&(e=e[0]),e=e;var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new an({shape:[t,null].concat(Object(I.a)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!S.qi.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new B("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new an({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(S.di)((function(){if(!t.stateful)throw new q("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new B("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return S.yi([r,e])})):t.states_=[S.yi([r,t.cell.stateSize])];else if(null==e)S.Ae(t.states_),null!=t.keptStates&&(S.Ae(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return S.yi([r,e])})):t.states_[0]=S.yi([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new B("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):S.Ae(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!S.qi.arraysEqual(i.shape,s))throw new B("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return S.xf(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=ui(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var c,u=Object(M.a)(r);try{for(u.s();!(c=u.n()).done;){var l=c.value;this.stateSpec.push(new an({shape:l.shape}))}}catch(v){u.e(v)}finally{u.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof on){var f=[e].concat(o),d=this.inputSpec.concat(s),p=this.inputSpec;this.inputSpec=d;var h=Object(Nn.a)(Object(R.a)(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=p,h}return Object(Nn.a)(Object(R.a)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=Zt(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new B("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},c=li((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),u=c[0],l=c[1],f=c[2];n.stateful&&n.resetStates(f,a);var d=n.returnSequences?l:u;return n.returnState?[d].concat(f):d}))}},{key:"getInitialState",value:function(e){var t=this;return Object(S.di)((function(){var n=S.yi(e.shape);return n=Ge(n=S.Qh(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?Je(n,[1,e]):n})):t.cell.stateSize>1?[Je(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){Object(Nn.a)(Object(R.a)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=Tn(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(ln);fi.className="RNN",S.lh.registerClass(fi);var di=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(ln),pi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,se(r.units,"units"),r.activation=Na(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Nt(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Nt(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Nt(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Da(e.kernelRegularizer),r.recurrentRegularizer=Da(e.recurrentRegularizer),r.biasRegularizer=Da(e.biasRegularizer),r.kernelConstraint=ye(e.kernelConstraint),r.recurrentConstraint=ye(e.recurrentConstraint),r.biasConstraint=ye(e.biasConstraint),r.dropout=Ve([1,Be([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Ve([1,Be([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Object(C.a)(n,[{key:"build",value:function(e){e=Jt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){if(2!==(e=e).length)throw new B("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Oi({ones:function(){return S.ug(e)},rate:n.dropout,training:i})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Oi({ones:function(){return S.ug(r)},rate:n.recurrentDropout,training:i}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=et(null!=o?S.jg(e,o):e,n.kernel.read()),null!=n.bias&&(a=at(a,n.bias.read())),null!=s&&(r=S.jg(r,s));var c=S.wd(a,et(r,n.recurrentKernel.read()));return null!=n.activation&&(c=n.activation.apply(c)),[c,c]}))}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Ca(this.activation),useBias:this.useBias,kernelInitializer:Et(this.kernelInitializer),recurrentInitializer:Et(this.recurrentInitializer),biasInitializer:Et(this.biasInitializer),kernelRegularizer:Pa(this.kernelRegularizer),recurrentRegularizer:Pa(this.recurrentRegularizer),biasRegularizer:Pa(this.biasRegularizer),activityRegularizer:Pa(this.activityRegularizer),kernelConstraint:be(this.kernelConstraint),recurrentConstraint:be(this.recurrentConstraint),biasConstraint:be(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(di);pi.className="SimpleRNNCell",S.lh.registerClass(pi);var hi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),e.cell=new pi(e),t.call(this,e)}return Object(C.a)(n,[{key:"call",value:function(e,t){var r=this;return Object(S.di)((function(){null!=r.cell.dropoutMask&&(S.Ae(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(S.Ae(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return Object(Nn.a)(Object(R.a)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(fi);hi.className="SimpleRNN",S.lh.registerClass(hi);var vi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new B("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,se(r.units,"units"),r.activation=Na(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Na(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Nt(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Nt(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Nt(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Da(e.kernelRegularizer),r.recurrentRegularizer=Da(e.recurrentRegularizer),r.biasRegularizer=Da(e.biasRegularizer),r.kernelConstraint=ye(e.kernelConstraint),r.recurrentConstraint=ye(e.recurrentConstraint),r.biasConstraint=ye(e.biasConstraint),r.dropout=Ve([1,Be([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Ve([1,Be([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Object(C.a)(n,[{key:"build",value:function(e){var t=(e=Jt(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){if(2!==(e=e).length)throw new B("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Oi({ones:function(){return S.ug(e)},rate:n.dropout,training:r,count:3})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Oi({ones:function(){return S.ug(a)},rate:n.recurrentDropout,training:r,count:3}));var i,o,s,c=n.dropoutMask,u=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=S.jg(e,c[0]));var l=et(e,n.kernel.read());n.useBias&&(l=at(l,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=S.jg(a,u[0]));var f=n.recurrentKernel.read(),d=S.Fh(f,[2*n.units,n.units],f.rank-1),p=Object(A.a)(d,2),h=p[0],v=p[1],m=et(a,h),b=S.Fh(l,3,l.rank-1),g=Object(A.a)(b,3),y=g[0],O=g[1],k=g[2],w=S.Fh(m,2,m.rank-1),x=Object(A.a)(w,2),j=x[0],_=x[1];i=n.recurrentActivation.apply(S.wd(y,j)),o=n.recurrentActivation.apply(S.wd(O,_));var C=et(S.jg(o,a),v);s=n.activation.apply(S.wd(k,C));var E=S.wd(S.jg(i,a),S.jg(S.wd(1,S.ng(i)),s));return[E,E]}))}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Ca(this.activation),recurrentActivation:Ca(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Et(this.kernelInitializer),recurrentInitializer:Et(this.recurrentInitializer),biasInitializer:Et(this.biasInitializer),kernelRegularizer:Pa(this.kernelRegularizer),recurrentRegularizer:Pa(this.recurrentRegularizer),biasRegularizer:Pa(this.biasRegularizer),activityRegularizer:Pa(this.activityRegularizer),kernelConstraint:be(this.kernelConstraint),recurrentConstraint:be(this.recurrentConstraint),biasConstraint:be(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(di);vi.className="GRUCell",S.lh.registerClass(vi);var mi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new vi(e),t.call(this,e)}return Object(C.a)(n,[{key:"call",value:function(e,t){var r=this;return Object(S.di)((function(){null!=r.cell.dropoutMask&&(S.Ae(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(S.Ae(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return Object(Nn.a)(Object(R.a)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(fi);mi.className="GRU",S.lh.registerClass(mi);var bi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,se(r.units,"units"),r.activation=Na(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Na(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Nt(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Nt(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Nt(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=Da(e.kernelRegularizer),r.recurrentRegularizer=Da(e.recurrentRegularizer),r.biasRegularizer=Da(e.biasRegularizer),r.kernelConstraint=ye(e.kernelConstraint),r.recurrentConstraint=ye(e.recurrentConstraint),r.biasConstraint=ye(e.biasConstraint),r.dropout=Ve([1,Be([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Ve([1,Be([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Object(C.a)(n,[{key:"build",value:function(e){var t,n,r=(e=Jt(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new dt).apply([i]),o=a.apply([2*i]);return Ze(Ze(n,r),o)}}]),n}(lt),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){var r=null!=t.training&&t.training;if(3!==(e=e).length)throw new B("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Oi({ones:function(){return S.ug(e)},rate:n.dropout,training:r,count:4})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Oi({ones:function(){return S.ug(a)},rate:n.recurrentDropout,training:r,count:4}));var o,s,c,u,l=n.dropoutMask,f=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=S.jg(e,l[0]));var d=et(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=S.jg(a,f[0])),d=S.wd(d,et(a,n.recurrentKernel.read())),n.useBias&&(d=at(d,n.bias.read()));var p=S.Fh(d,4,d.rank-1),h=Object(A.a)(p,4),v=h[0],m=h[1],b=h[2],g=h[3];o=n.recurrentActivation.apply(v),s=n.recurrentActivation.apply(m),c=S.wd(S.jg(s,i),S.jg(o,n.activation.apply(b))),u=n.recurrentActivation.apply(g);var y=S.jg(u,n.activation.apply(c));return[y,y,c]}))}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Ca(this.activation),recurrentActivation:Ca(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Et(this.kernelInitializer),recurrentInitializer:Et(this.recurrentInitializer),biasInitializer:Et(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Pa(this.kernelRegularizer),recurrentRegularizer:Pa(this.recurrentRegularizer),biasRegularizer:Pa(this.biasRegularizer),activityRegularizer:Pa(this.activityRegularizer),kernelConstraint:be(this.kernelConstraint),recurrentConstraint:be(this.recurrentConstraint),biasConstraint:be(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(di);bi.className="LSTMCell",S.lh.registerClass(bi);var gi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new bi(e),t.call(this,e)}return Object(C.a)(n,[{key:"call",value:function(e,t){var r=this;return Object(S.di)((function(){null!=r.cell.dropoutMask&&(S.Ae(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(S.Ae(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return Object(Nn.a)(Object(R.a)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(fi);gi.className="LSTM",S.lh.registerClass(gi);var yi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).cells=e.cells,r}return Object(C.a)(n,[{key:"stateSize",get:function(){var e,t=[],n=Object(M.a)(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,Object(I.a)(r.stateSize)):t.push(r.stateSize)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){var r,a=(e=e).slice(1),i=[],o=Object(M.a)(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(m){o.e(m)}finally{o.f()}i.reverse();for(var c,u=[],l=0;l<n.cells.length;++l){var f=n.cells[l];a=i[l],c=0===l?[e[0]].concat(a):[c[0]].concat(a),c=f.call(c,t),u.push(c.slice(1))}a=[];var d,p=Object(M.a)(u.slice().reverse());try{for(p.s();!(d=p.n()).done;){var h,v=d.value;(h=a).push.apply(h,Object(I.a)(v))}}catch(m){p.e(m)}finally{p.f()}return[c[0]].concat(a)}))}},{key:"build",value:function(e){var t;Qt(e)&&(e=e[0]),e=e,this.cells.forEach((function(n,r){Pe("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=Object(M.a)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(I.a)(r.trainableWeights))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Object(M.a)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(I.a)(r.nonTrainableWeights))}}catch(c){n.e(c)}finally{n.f()}if(!this.trainable){var a,i=[],o=Object(M.a)(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,Object(I.a)(s.trainableWeights))}}catch(c){o.e(c)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=Object(M.a)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(I.a)(r.weights))}}catch(a){n.e(a)}finally{n.f()}return nn(t)}},{key:"setWeights",value:function(e){var t,n=[],r=Object(M.a)(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(c){r.e(c)}finally{r.f()}rn(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=Object(M.a)(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(Tn(o,r))}}catch(s){i.e(s)}finally{i.f()}return new e({cells:a})}}]),n}(di);function Oi(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=function(){return ot(t(),n)},c=function(){return st(s,t,a)};return!o||o<=1?S.xf(c().clone()):Array(o).fill(void 0).map(c).map((function(e){return S.xf(e.clone())}))}yi.className="StackedRNNCells",S.lh.registerClass(yi);var ki=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},wi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),e.unroll)throw new U("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new U("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new an({ndim:5})],r}return Object(C.a)(n,[{key:"call",value:function(e,t){var r=this;return S.di((function(){if(null!=r.cell.dropoutMask&&(S.Ae(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(S.Ae(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new B("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return Object(Nn.a)(Object(R.a)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(Object(I.a)(t.slice(2)))),this.returnState&&(t=[t].concat(Object(I.a)(Array(2).fill([e[0]].concat(Object(I.a)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return S.di((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat(Object(I.a)(a.slice(2))),o=S.yi(i);return Array.isArray(n)?Array(n.length).fill(o):[o]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];S.di((function(){if(!t.stateful)throw new q("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat(Object(I.a)(a.slice(2)));if(null==r[0])throw new B("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return S.yi(i)})):t.states_=[S.yi(i)];else if(null==e)S.Ae(t.states_),null!=t.keptStates&&(S.Ae(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return S.yi(i)})):t.states_[0]=S.yi(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new B("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):S.Ae(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],c=i;if(!S.qi.arraysEqual(s.shape,c))throw new B("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(c,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return S.xf(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,c="channelsFirst"===n,u=e[c?3:2],l=e[c?4:3],f=Ga(u,a[0],i,o[0],s[0]),d=Ga(l,a[1],i,o[1],s[1]);return[].concat(Object(I.a)(e.slice(0,2)),Object(I.a)(c?[r,f,d]:[f,d,r]))}}]),n}(fi);wi.className="ConvRNN2D";var xi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;Object(_.a)(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,c=e.dataFormat,u=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,se(r.filters,"filters"),r.kernelSize=Wa(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return se(e,"kernelSize")})),r.strides=Wa(o||1,2,"strides"),r.strides.forEach((function(e){return se(e,"strides")})),r.padding=s||"valid",Ie(r.padding),r.dataFormat=c||"channelsLast",Te(r.dataFormat),r.dilationRate=Wa(u||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return se(e,"dilationRate")})),r}return Object(C.a)(n,[{key:"build",value:function(e){var t;e=Jt(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new B("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,c=this.filters;o=new(t=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"apply",value:function(e,t){return Ye([s.apply([c]),S.tg([c]),s.apply([2*c])])}}]),n}(lt),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return S.di((function(){if(3!==e.length)throw new B("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Oi({ones:function(){return S.ug(a)},rate:n.dropout,training:r,count:4}));var s=n.dropoutMask,c=function(e,t,n){return t&&t[n]?S.jg(t[n],e):e},u=c(a,s,0),l=c(a,s,1),f=c(a,s,2),d=c(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Oi({ones:function(){return S.ug(i)},rate:n.recurrentDropout,training:r,count:4}));var p=n.recurrentDropoutMask,h=c(i,p,0),v=c(i,p,1),m=c(i,p,2),b=c(i,p,3),g=S.Fh(n.kernel.read(),4,3),y=Object(A.a)(g,4),O=y[0],k=y[1],w=y[2],x=y[3],j=n.useBias?S.Fh(n.bias.read(),4):[null,null,null,null],_=Object(A.a)(j,4),C=_[0],E=_[1],N=_[2],T=_[3];u=n.inputConv(u,O,C,n.padding),l=n.inputConv(l,k,E,n.padding),f=n.inputConv(f,w,N,n.padding),d=n.inputConv(d,x,T,n.padding);var I=S.Fh(n.recurrentKernel.read(),4,3),M=Object(A.a)(I,4),P=M[0],R=M[1],D=M[2],F=M[3];h=n.recurrentConv(h,P),v=n.recurrentConv(v,R),m=n.recurrentConv(m,D),b=n.recurrentConv(b,F);var L=n.recurrentActivation.apply(S.wd(u,h)),z=n.recurrentActivation.apply(S.wd(l,v)),q=S.wd(S.jg(z,o),S.jg(L,n.activation.apply(S.wd(f,m)))),V=S.jg(n.recurrentActivation.apply(S.wd(d,b)),n.activation.apply(q));return[V,V,q]}))}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this),t=(e.units,ki(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var a=S.ie(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?at(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return S.ie(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(bi);xi.className="ConvLSTM2DCell",S.lh.registerClass(xi);var ji=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){Object(_.a)(this,n);var r=new xi(e);return t.call(this,Object.assign({},e,{cell:r}))}return Object(C.a)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(wi);ji.className="ConvLSTM2D",S.lh.registerClass(ji);var Si=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return Object(C.a)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){n.invokeCallHook(e,t);var r=Zt(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return st((function(){return ot(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this)}}]),n}(ln);Si.className="Dropout",S.lh.registerClass(Si);var _i=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return Object(C.a)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(Si);_i.className="SpatialDropout1D",S.lh.registerClass(_i);var Ci=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,se(r.units,"units"),r.activation=Na(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=Nt(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=Nt(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=ye(e.kernelConstraint),r.biasConstraint=ye(e.biasConstraint),r.kernelRegularizer=Da(e.kernelRegularizer),r.biasRegularizer=Da(e.biasRegularizer),r.activityRegularizer=Da(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return Object(C.a)(n,[{key:"build",value:function(e){var t=(e=Jt(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:Object(Ua.a)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=Jt(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){n.invokeCallHook(e,t);var r,a=Zt(e),i=ue(n.activation.getClassName());return null!=i?r=et(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=et(a,n.kernel.read()),null!=n.bias&&(r=at(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:Ca(this.activation),useBias:this.useBias,kernelInitializer:Et(this.kernelInitializer),biasInitializer:Et(this.biasInitializer),kernelRegularizer:Pa(this.kernelRegularizer),biasRegularizer:Pa(this.biasRegularizer),activityRegularizer:Pa(this.activityRegularizer),kernelConstraint:be(this.kernelConstraint),biasConstraint:be(this.biasConstraint)},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Ci.className="Dense",S.lh.registerClass(Ci);var Ei=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){e=Jt(e);var t,n=Object(M.a)(e.slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new B('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(r){n.e(r)}finally{n.f()}return[e[0],ze(e,1)]}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){n.invokeCallHook(e,t);var r=Zt(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=r.transpose(a)}return function(e){if(e.rank<=1)throw new B("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],ze(e.shape,1)];return e.reshape(t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Ei.className="Flatten",S.lh.registerClass(Ei);var Ni=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=Na(e.activation),r}return Object(C.a)(n,[{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){n.invokeCallHook(e,t);var r=Zt(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:Ca(this.activation)},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Ni.className="Activation",S.lh.registerClass(Ni);var Ti=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){return e=Zt(e),t=e,r=n.n,Object(S.di)((function(){if(2!==t.shape.length)throw new B("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return Je(Ge(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Ti.className="RepeatVector",S.lh.registerClass(Ti);var Ii=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;Object(_.a)(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return Object(C.a)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new B("Can only specifiy one unknown dimension.");i=o}else a*=s}var c=ze(e);if(null!==i){if(0===a||c%a!==0)throw new B(n);r[i]=c/a}else if(c!==a)throw new B(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){n.invokeCallHook(e,t);var r=Zt(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return r.reshape(i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Ii.className="Reshape",S.lh.registerClass(Ii);var Ai=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=Ue(1,e.dims.length+1);if(!S.qi.arraysEqual(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new an({ndim:r.dims.length+1})],r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){var t=(e=Jt(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return Object(S.ii)(Zt(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Ai.className="Permute",S.lh.registerClass(Ai);var Mi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=Zt(e);return Object(S.Ad)(Object(S.qg)(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){n.invokeCallHook(e,t);var r=Zt(e),a=Object(S.Ad)(Object(S.qg)(r,n.maskValue),-1,!0);return r.mul(a.asType(r.dtype))}))}}]),n}(ln);Mi.className="Masking",S.lh.registerClass(Mi);var Pi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(Q(e.inputLength))}return r.inputDim=e.inputDim,se(r.inputDim,"inputDim"),r.outputDim=e.outputDim,se(r.outputDim,"outputDim"),r.embeddingsInitializer=Nt(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=Da(e.embeddingsRegularizer),r.activityRegularizer=Da(e.activityRegularizer),r.embeddingsConstraint=ye(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return Object(C.a)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return Object(S.di)((function(){return n.maskZero?(e=Zt(e),Object(S.qg)(e,Object(S.zi)(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=Jt(e),null==this.inputLength)return[].concat(Object(I.a)(e),[this.outputDim]);var t=Q(this.inputLength);if(t.length!==e.length-1)throw new B('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new B('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(Object(I.a)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){n.invokeCallHook(e,t);var r=Zt(e);return"int32"!==r.dtype&&(r=We(r,"int32")),tt(n.embeddings.read(),r.as1D()).reshape(Jt(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Et(this.embeddingsInitializer),embeddingsRegularizer:Pa(this.embeddingsRegularizer),activityRegularizer:Pa(this.activityRegularizer),embeddingsConstraint:be(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Pi.className="Embedding",S.lh.registerClass(Pi);var Ri=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return Object(C.a)(n,[{key:"mergeFunction",value:function(e){throw new U}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new B("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Jt(e)]),(e=e).length<2)throw new B("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=Object(M.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(u){r.e(u)}finally{r.f()}if((n=re(n)).length>1)throw new B("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var c=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===re(c).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){if(e=e,n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=Be(r),o=Object(M.a)(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,c=s.rank,u=0;u<i-c;++u)s=Ge(s,1);t.push(s)}}catch(C){o.e(C)}finally{o.f()}return n.mergeFunction(t)}var l,f=!1,d=Object(M.a)(e);try{for(d.s();!(l=d.n()).done;){var p=l.value,h=p.rank;if(null==h){var v=p.shape,m=v[0],b=v.slice(1).concat([m]),g=p.reshape([m].concat(ze(v.slice(1))));g=(g=S.ii(g,[1,0])).reshape(b),t.push(g),f=!0}else if(h>1){var y=Ue(1,h).concat([0]);t.push(S.ii(p,y)),f=!0}else t.push(p)}}catch(C){d.e(C)}finally{d.f()}var O=n.mergeFunction(t),k=O.rank;if(f)if(null==k){var w=O.shape,x=w[w.length-1],j=[x].concat(w.slice(0,w.length-1));O=S.ii(O.reshape([-1,x]),[1,0]).reshape(j)}else if(k>1){var _=[k-1].concat(Ue(0,k-1));O=S.ii(O,_)}return O}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=Object(M.a)(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(c){o.e(c)}finally{o.f()}return t=1===(i=re(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return S.di((function(){if(null==t)return null;if(!Array.isArray(t))throw new B("`mask` should be an Array");if(!Array.isArray(e))throw new B("`inputs` should be an Array");if(t.length!==e.length)throw new B("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:S.Re(e,0)})))[0],r=1;r<t.length-1;++r)n=S.Mf(n,t[r]);return n}))}}]),n}(ln),Di=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"mergeFunction",value:function(e){return Object(S.di)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=S.wd(t,e[n]);return t}))}}]),n}(Ri);Di.className="Add",S.lh.registerClass(Di);var Fi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"mergeFunction",value:function(e){return Object(S.di)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=S.jg(t,e[n]);return t}))}}]),n}(Ri);Fi.className="Multiply",S.lh.registerClass(Fi);var Li=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"mergeFunction",value:function(e){return Object(S.di)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=S.wd(t,e[n]);return S.jg(1/e.length,t)}))}}]),n}(Ri);Li.className="Average",S.lh.registerClass(Li);var zi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"mergeFunction",value:function(e){return Object(S.di)((function(){for(var t=e[0],n=1;n<e.length;++n)t=S.Xf(t,e[n]);return t}))}}]),n}(Ri);zi.className="Maximum",S.lh.registerClass(zi);var qi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"mergeFunction",value:function(e){return Object(S.di)((function(){for(var t=e[0],n=1;n<e.length;++n)t=S.cg(t,e[n]);return t}))}}]),n}(Ri);qi.className="Minimum",S.lh.registerClass(qi);var Vi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Object(C.a)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new B("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;var t,n=!0,r=Object(M.a)(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(f){r.e(f)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,c=!1,u=Object(M.a)(a);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(S.qi.arraysEqual(l,o)){c=!0;break}}}catch(f){u.e(f)}finally{u.f()}c||a.push(o)}if(a.length>1)throw new B("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return Object(S.di)((function(){return Ye(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new B("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=Object(M.a)(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(s){i.e(s)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new B("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new B("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new B("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return S.di((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(S.ug(e[i]).asType("bool")):t[i].rank<e[i].rank?a.push(S.Re(t[i],-1)):a.push(t[i]);var o=S.ce(a,n.axis);return S.zd(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ri);function Bi(e,t){for(;e<0;)e+=t;return e}Vi.className="Concatenate",S.lh.registerClass(Vi);var Ui=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Object(C.a)(n,[{key:"build",value:function(e){S.qi.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new U("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new B("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new B("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return Bi(t,e[n].shape.length)})):[Bi(this.axes,n.shape.length),Bi(this.axes,r.shape.length)],this.normalize&&(n=In(n,t[0]),r=In(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new U("batchDot is not implemented for tensors of 4D or higher rank yet");if(S.qi.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),S.qi.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new U("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return S.di((function(){var n,o;if(r>a){n=r-a;for(var s=[],c=0;c<n;++c)s.push(1);t=t.reshape(t.shape.concat(s))}else if(a>r){n=a-r;for(var u=[],l=0;l<n;++l)u.push(1);e=e.reshape(e.shape.concat(u))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?e.mul(t).sum(i[0]):e.transpose([1,0]).mul(t).sum(i[1]);else{var f=i[0]!==e.shape.length-1,d=i[1]===t.shape.length-1;o=e.matMul(t,f,d)}if(n>0){for(var p,h=[],v=p=r>a?r+a-3:r-1;v<p+n;++v)h.push(v);o=o.squeeze(h)}return 1===o.shape.length&&(o=o.expandDims(1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[Bi(this.axes,e.length),Bi(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){S.qi.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new U("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ri);Ui.className="Dot",S.lh.registerClass(Ui);var Wi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){n.invokeCallHook(e,t);var r=Zt(e);return st((function(){return $e(r.shape,0,n.stddev).add(r)}),(function(){return r}),t.training||!1)}))}}]),n}(ln);Wi.className="GaussianNoise",S.lh.registerClass(Wi);var Gi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){n.invokeCallHook(e,t);var r=Zt(e);if(n.rate>0&&n.rate<1){return st((function(){var e=Math.sqrt(n.rate/(1-n.rate));return r.mul($e(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(ln);Gi.className="GaussianDropout",S.lh.registerClass(Gi);var Hi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return Object(C.a)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||Zt(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return st((function(){var t=Zt(e),a=-1.7580993408473766,i=Object(S.lf)(Object(S.Mg)(r),n.rate);i=We(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate;return t.mul(i).add(i.add(-1).mul(a)).mul(o).add(s)}),(function(){return Zt(e)}),t.training||!1)}return e}))}}]),n}(ln);function Ki(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=S.Od(e,t,n,r,a,o);else if(3===e.rank)i=S.Pd(e,t,n,r,a,o);else{if(4!==e.rank)throw new U("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=S.Qd(e,t,n,r,a,o)}return i}function Xi(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Object(S.di)((function(){var i=S.hg(e,r),o=i.mean,s=i.variance;return[Ki(e,o,s,n,t,a),o,s]}))}function Qi(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Object(S.di)((function(){var i,o=S.hg(e,r),s=o.mean,c=o.variance,u=[],l=Object(M.a)(Ue(0,e.rank));try{for(l.s();!(i=l.n()).done;){var f=i.value;-1!==r.indexOf(f)?u.push(1):u.push(e.shape[f])}}catch(m){l.e(m)}finally{l.f()}var d=s.reshape(u),p=c.reshape(u),h=null==t?null:t.reshape(u),v=null==n?null:n.reshape(u);return[Ki(e,d,p,v,h,a),s,c]}))}Hi.className="AlphaDropout",S.lh.registerClass(Hi);var Yi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=Nt(e.betaInitializer||"zeros"),r.gammaInitializer=Nt(e.gammaInitializer||"ones"),r.movingMeanInitializer=Nt(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=Nt(e.movingVarianceInitializer||"ones"),r.betaConstraint=ye(e.betaConstraint),r.gammaConstraint=ye(e.gammaConstraint),r.betaRegularizer=Da(e.betaRegularizer),r.gammaRegularizer=Da(e.gammaRegularizer),r}return Object(C.a)(n,[{key:"build",value:function(e){e=Jt(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new B("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new an({ndim:e.length,axes:Object(Ua.a)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){var r=null!=t.training&&t.training,a=Zt(e),i=a.shape,o=i.length,s=Ue(0,o),c=n.axis>=0?n.axis:n.axis+o;s.splice(c,1);var u=G(1,o);u[c]=i[c];var l=s.slice();l.sort();var f=!S.qi.arraysEqual(l,Ue(0,o).slice(0,o-1));if(!r)return function(){if(f){var e=n.movingMean.read().reshape(u),t=n.movingVariance.read().reshape(u),r=n.center?n.beta.read().reshape(u):null,i=n.scale?n.gamma.read().reshape(u):null;return Ki(a,e,t,r,i,n.epsilon)}return Ki(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var d=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return S.qi.arraysEqual(r.slice().sort(),Ue(0,e.rank-1))?Xi(e,t,n,r,a):Qi(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),s,n.epsilon),p=Object(A.a)(d,3),h=p[0],v=p[1],m=p[2],b=function(e,t,n){S.di((function(){var r=1-n,a=e.read(),i=a.sub(t).mul(r);e.write(a.sub(i))}))};return b(n.movingMean,v,n.momentum),b(n.movingVariance,m,n.momentum),h}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Et(this.betaInitializer),gammaInitializer:Et(this.gammaInitializer),movingMeanInitializer:Et(this.movingMeanInitializer),movingVarianceInitializer:Et(this.movingVarianceInitializer),betaRegularizer:Pa(this.betaRegularizer),gammaRegularizer:Pa(this.gammaRegularizer),betaConstraint:be(this.betaConstraint),gammaConstraint:be(this.gammaConstraint)},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Yi.className="BatchNormalization",S.lh.registerClass(Yi);var Zi=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=Object(M.a)(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(s){i.e(s)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=Nt(e.betaInitializer||"zeros"),r.gammaInitializer=Nt(e.gammaInitializer||"ones"),r.betaRegularizer=Da(e.betaRegularizer),r.gammaRegularizer=Da(e.gammaRegularizer),r.supportsMasking=!0,r}return Object(C.a)(n,[{key:"build",value:function(e){var t=(e=Jt(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=Object(M.a)(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(s){a.e(s)}finally{a.f()}if(this.axis.length!==re(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=Zt(e),a=r.shape,i=a.length;return Object(S.di)((function(){var e,t=Object(S.hg)(r,n.axis,!0),o=t.mean,s=t.variance,c=G(1,i),u=Object(M.a)(n.axis);try{for(u.s();!(e=u.n()).done;){var l=e.value;c[l]=a[l]}}catch(b){u.e(b)}finally{u.f()}for(var f=function(e){return null!=e&&e.shape.length!==i&&n.axis!==[i-1]?e.reshape(c):e},d=f(n.gamma.read()),p=f(n.beta.read()),h=[],v=[],m=0;m<i;++m)-1!==n.axis.indexOf(m)?(h.push(a[m]),v.push(1)):(h.push(1),v.push(a[m]));return o=o.tile(h),s=s.tile(h),d=d.tile(v),p=p.tile(v),Ki(r,o,s,p,d,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Et(this.betaInitializer),gammaInitializer:Et(this.gammaInitializer),betaRegularizer:Pa(this.betaRegularizer),gammaRegularizer:Pa(this.gammaRegularizer)},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);Zi.className="LayerNormalization",S.lh.registerClass(Zi);var Ji=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new B("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new B("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new B("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new an({ndim:4})],r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=Jt(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){return t=Zt(e),r=n.padding,a=n.dataFormat,Object(S.di)((function(){if(4!==t.rank)throw new B("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new B("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new B("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],S.xg(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln);function $i(e,t,n,r,a,i){return Object(S.di)((function(){var o;Te(a),Ae(i),Ie(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=Ka(e,a);var s="same"===r?"same":"valid";return o="max"===i?S.Uf(e,t,n,s):S.Id(e,t,n,s),"channelsFirst"===a&&(o=S.ii(o,[0,3,1,2])),o}))}function eo(e,t,n,r,a,i){return Object(S.di)((function(){var o;Te(a),Ae(i),Ie(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=Xa(e,a);var s="same"===r?"same":"valid";return o="max"===i?S.Vf(e,t,n,s):S.Jd(e,t,n,s),"channelsFirst"===a&&(o=S.ii(o,[0,4,1,2,3])),o}))}Ji.className="ZeroPadding2D",S.lh.registerClass(Ji);var to=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new B("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(se(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new B("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return se(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,Ie(r.padding),r.inputSpec=[new an({ndim:3})],r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){var t=Ga((e=Jt(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){n.invokeCallHook(e,t),e=Ge(Zt(e),2);var r=n.poolingFunction(Zt(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return S.Kh(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln),no=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Te(a),Ie(r),$i(e,t,n,r,a,"max")}}]),n}(to);no.className="MaxPooling1D",S.lh.registerClass(no);var ro=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Te(a),Ie(r),$i(e,t,n,r,a,"avg")}}]),n}(to);ro.className="AveragePooling1D",S.lh.registerClass(ro);var ao=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new B("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return se(r.poolSize,"poolSize"),se(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Te(r.dataFormat),Ie(r.padding),r.inputSpec=[new an({ndim:4})],r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){e=Jt(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=Ga(t,this.poolSize[0],this.padding,this.strides[0]),n=Ga(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){return n.invokeCallHook(e,t),n.poolingFunction(Zt(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln),io=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Te(a),Ie(r),$i(e,t,n,r,a,"max")}}]),n}(ao);io.className="MaxPooling2D",S.lh.registerClass(io);var oo=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Te(a),Ie(r),$i(e,t,n,r,a,"avg")}}]),n}(ao);oo.className="AveragePooling2D",S.lh.registerClass(oo);var so=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new B("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return se(r.poolSize,"poolSize"),se(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Te(r.dataFormat),Ie(r.padding),r.inputSpec=[new an({ndim:5})],r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){e=Jt(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=Ga(t,this.poolSize[0],this.padding,this.strides[0]),n=Ga(n,this.poolSize[1],this.padding,this.strides[1]),r=Ga(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){return n.invokeCallHook(e,t),n.poolingFunction(Zt(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln),co=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Te(a),Ie(r),eo(e,t,n,r,a,"max")}}]),n}(so);co.className="MaxPooling3D",S.lh.registerClass(co);var uo=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(C.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Te(a),Ie(r),eo(e,t,n,r,a,"avg")}}]),n}(so);uo.className="AveragePooling3D",S.lh.registerClass(uo);var lo=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).inputSpec=[new an({ndim:3})],r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new U}}]),n}(ln),fo=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e||{})}return Object(C.a)(n,[{key:"call",value:function(e,t){return Object(S.di)((function(){var t=Zt(e);return S.Zf(t,1)}))}}]),n}(lo);fo.className="GlobalAveragePooling1D",S.lh.registerClass(fo);var po=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e||{})}return Object(C.a)(n,[{key:"call",value:function(e,t){return Object(S.di)((function(){var t=Zt(e);return S.Tf(t,1)}))}}]),n}(lo);po.className="GlobalMaxPooling1D",S.lh.registerClass(po);var ho=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Te(r.dataFormat),r.inputSpec=[new an({ndim:4})],r}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new U}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ln),vo=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){var t=Zt(e);return"channelsLast"===n.dataFormat?S.Zf(t,[1,2]):S.Zf(t,[2,3])}))}}]),n}(ho);vo.className="GlobalAveragePooling2D",S.lh.registerClass(vo);var mo=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){var t=Zt(e);return"channelsLast"===n.dataFormat?S.Tf(t,[1,2]):S.Tf(t,[2,3])}))}}]),n}(ho);mo.className="GlobalMaxPooling2D",S.lh.registerClass(mo);var bo=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).layer=e.layer,r}return Object(C.a)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){Object(Nn.a)(Object(R.a)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=Tn(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(ln),go=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return Object(C.a)(n,[{key:"build",value:function(e){if((e=Jt(e)).length<3)throw new B("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),Object(Nn.a)(Object(R.a)(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=Jt(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){return li((function(e,r){return[Zt(n.layer.call(e,t)),[]]}),e=Zt(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(bo);go.className="TimeDistributed",S.lh.registerClass(go);var yo=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;Object(_.a)(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=Tn(i),a.goBackwards=!0!==a.goBackwards;var o,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=Tn(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=r.mergeMode,ie(Ee,"BidirectionalMergeMode",o),e.weights)throw new U("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return Object(C.a)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):X(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=ui(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return Object(Nn.a)(Object(R.a)(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var c=r.length;if(c%2>0)throw new B("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,Object(I.a)(r));var u=r.map((function(e){return new an({shape:e.shape})}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),s.push.apply(s,Object(I.a)(u))}if(null!=a)throw new U("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof on,f=0,d=o;f<d.length;f++){if(d[f]instanceof on!==l)throw new B("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var p=[e].concat(o),h=this.inputSpec.concat(s),v=this.inputSpec;this.inputSpec=h;var m=Object(Nn.a)(Object(R.a)(n.prototype),"apply",this).call(this,p,t);return this.inputSpec=v,m}return Object(Nn.a)(Object(R.a)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Object(S.di)((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var c=s.slice(0,s.length/2),u=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:c})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:u}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=S.Yg(a,1)),"concat"===n.mergeMode?o=Ye([r,a]):"sum"===n.mergeMode?o=S.wd(r,a):"ave"===n.mergeMode?o=S.jg(.5,S.wd(r,a)):"mul"===n.mergeMode?o=S.jg(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;Pe(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),Pe(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){Object(Nn.a)(Object(R.a)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=Object(Nn.a)(Object(R.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=Tn(t.layer);if(delete t.layer,null!=t.numConstants)throw new U("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(bo);function Oo(e){return new dn(e)}function ko(e){return new qa(e)}function wo(e){return new Fa(e)}function xo(e){return new La(e)}function jo(e){return new za(e)}function So(e){return new Ba(e)}function _o(e){return new Va(e)}function Co(e){return new ii(e)}function Eo(e){return new ei(e)}function No(e){return new ni(e)}function To(e){return new ti(e)}function Io(e){return new ai(e)}function Ao(e){return new oi(e)}function Mo(e){return new si(e)}function Po(e){return new ci(e)}function Ro(e){return new Ni(e)}function Do(e){return new Ci(e)}function Fo(e){return new Si(e)}function Lo(e){return new _i(e)}function zo(e){return new Ei(e)}function qo(e){return new Ti(e)}function Vo(e){return new Ii(e)}function Bo(e){return new Ai(e)}function Uo(e){return new Pi(e)}function Wo(e){return new Di(e)}function Go(e){return new Li(e)}function Ho(e){return new Vi(e)}function Ko(e){return new zi(e)}function Xo(e){return new qi(e)}function Qo(e){return new Fi(e)}function Yo(e){return new Ui(e)}function Zo(e){return new Yi(e)}function Jo(e){return new Zi(e)}function $o(e){return new Ji(e)}function es(e){return new ro(e)}function ts(e){return es(e)}function ns(e){return es(e)}function rs(e){return new oo(e)}function as(e){return rs(e)}function is(e){return rs(e)}function os(e){return new uo(e)}function ss(e){return os(e)}function cs(e){return os(e)}function us(e){return new fo(e)}function ls(e){return new vo(e)}function fs(e){return new po(e)}function ds(e){return new mo(e)}function ps(e){return new no(e)}function hs(e){return new io(e)}function vs(e){return new co(e)}function ms(e){return new mi(e)}function bs(e){return new vi(e)}function gs(e){return new gi(e)}function ys(e){return new bi(e)}function Os(e){return new hi(e)}function ks(e){return new pi(e)}function ws(e){return new ji(e)}function xs(e){return new xi(e)}function js(e){return new fi(e)}function Ss(e){return new yi(e)}function _s(e){return new yo(e)}function Cs(e){return new go(e)}yo.className="Bidirectional",S.lh.registerClass(yo);var Es=fs,Ns=ds,Ts=ps,Is=hs;function As(e){return new Wi(e)}function Ms(e){return new Gi(e)}function Ps(e){return new Hi(e)}function Rs(e){return new Mi(e)}function Ds(e,t){return Un(e,t)}function Fs(e,t){return Xn(e,t)}function Ls(e,t){return Qn(e,t)}function zs(e,t){return Wn(e,t)}function qs(e,t){return Yn(e,t)}function Vs(e,t){return Hn(e,t)}function Bs(e,t){return Kn(e,t)}function Us(e,t){return qn(e,t)}function Ws(e,t){return Mn(e,t)}function Gs(e,t){return Pn(e,t)}function Hs(e,t){return Pn(e,t)}function Ks(e,t){return Pn(e,t)}function Xs(e,t){return An(e,t)}function Qs(e,t){return An(e,t)}function Ys(e,t){return An(e,t)}function Zs(e){return new Aa(e)}function Js(e){return Ta(t=e),new Aa({l1:null!=t?t.l1:null,l2:0});var t}function $s(e){return Ta(t=e),new Aa({l2:null!=t?t.l2:null,l1:0});var t}var ec=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).model=null,e}return Object(C.a)(n,[{key:"setModel",value:function(e){if(!(e instanceof $r))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}]),n}(kn);function tc(e,t){return e<t}function nc(e,t){return e>t}var rc=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;if(Object(_.a)(this,n),r=t.call(this),null==e&&(e={}),e.restoreBestWeights)throw new U("restoreBestWeights = True is not implemented in EarlyStopping yet.");return r.monitor=e.monitor||"val_loss",r.minDelta=Math.abs(e.minDelta||0),r.patience=e.patience||0,r.verbose=e.verbose||0,r.mode=e.mode||"auto",r.baseline=e.baseline,-1===["auto","min","max"].indexOf(r.mode)&&(console.warn("EarlyStopping mode '".concat(r.mode,"' is invalid. ")+"Falling back to mode 'auto'."),r.mode="auto"),"min"===r.mode?r.monitorFunc=tc:"max"===r.mode||-1!==r.monitor.indexOf("acc")?r.monitorFunc=nc:r.monitorFunc=tc,r.monitorFunc===tc&&(r.minDelta*=-1),r}return Object(C.a)(n,[{key:"onTrainBegin",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===tc?1/0:-1/0;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn(n);case 2:if(null!=(r=this.getMonitorValue(n))){e.next=5;break}return e.abrupt("return");case 5:this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMonitorValue",value:function(e){null==e&&(e={});var t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. ")+"Available metrics are: ".concat(Object.keys(e))),t}}]),n}(ec);var ac={earlyStopping:function(e){return new rc(e)}},ic=n(100),oc=n(9),sc=function(){function e(t,n,r){var a=this;Object(_.a)(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return Object(C.a)(e,[{key:"getInput",value:function(e){return Object(oc.e)(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return Object(oc.e)(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Object(ic.f)(this.node.rawAttrs,e,t);if(null!=n.s)return Object(ic.i)(this.node.rawAttrs,e,t);if(null!=n.b)return Object(ic.c)(this.node.rawAttrs,e,t);if(null!=n.shape)return Object(ic.k)(this.node.rawAttrs,e,t);if(null!=n.type)return Object(ic.e)(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Object(ic.g)(this.node.rawAttrs,e,t);if(null!=n.list.s)return Object(ic.h)(this.node.rawAttrs,e,t);if(null!=n.list.shape)return Object(ic.j)(this.node.rawAttrs,e,t);if(null!=n.list.b)return Object(ic.b)(this.node.rawAttrs,e,t);if(null!=n.list.type)return Object(ic.d)(this.node.rawAttrs,e,t)}return t}}]),e}(),cc=n(170),uc=n(33),lc=n(339),fc=n(196),dc=n(27),pc=n(36),hc=n(248),vc=n(184),mc=n(34),bc=n(154),gc=n(126),yc=n(89),Oc=n(157),kc=n(81),wc=n(337),xc=n(338),jc=n(340),Sc=n(341),_c=n(342),Cc=n(242),Ec=n(343),Nc=n(346),Tc=n(102),Ic=n(187),Ac=n(245),Mc=n(189),Pc=n(350),Rc=n(80),Dc=n(351),Fc=n(190),Lc=n(121),zc=n(251),qc=n(191),Vc=n(62),Bc=n(362),Uc=n(174),Wc=n(130),Gc=n(363),Hc=n(259),Kc=n(136),Xc=n(261),Qc=n(365),Yc=n(262),Zc=n(252),Jc=n(72),$c=n(54),eu=n(219),tu=n(368),nu=n(347),ru=n(198),au=n(258),iu=n(256),ou=n(192),su=n(197);function cu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";S.qi.assert(uu(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function uu(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(-1!==e[n]&&-1!==t[n]&&e[n]!==t[n])return!1;return!0}var lu=function(){function e(t,n,r,a,i,o,s){Object(_.a)(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Object(S.gh)(0),Object(S.xf)(this.idTensor)}return Object(C.a)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),cu(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Object(S.xf)(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return Object(S.Uh)([],[0].concat(this.elementShape));var r=this.readMany(e);return cu(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Object(S.Lh)(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return Object(S.Uh)([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return cu(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),Object(S.ce)(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,Object(I.a)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,Object(S.oi)(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];Object(S.di)((function(){t=Object(S.Xg)(t,[1,r,i]);for(var s=0;s<e.length;++s){var c=[0,0===s?0:a[s-1],0],u=[1,e[s],i];o[s]=Object(S.Xg)(Object(S.uh)(t,c,u),n.elementShape)}return o}));for(var s=[],c=0;c<e.length;c++)s[c]=c;this.writeMany(s,o)}}]),e}(),fu=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Object(_.a)(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));cu(n,e.shape,"TensorList shape mismatch: "),Object(S.xf)(e)})),this.idTensor=Object(S.gh)(0),this.maxNumElements=a,Object(S.xf)(this.idTensor)}return Object(C.a)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e(Object(I.a)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));return cu(e,this.elementShape,"TensorList shape mismatch: "),Object(S.di)((function(){var t=n.tensors.map((function(t){return Object(S.Xg)(t,e)}));return Object(S.Lh)(t,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=this.tensors.pop();return cu(n.shape,e,"TensorList shape mismatch: "),Object(S.Xg)(n,e)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(cu(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Object(S.xf)(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));return cu(this.tensors[e].shape,t,"TensorList shape mismatch: "),this.tensors[e]}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));cu(this.elementShape,t.shape,"TensorList shape mismatch: "),Object(S.xf)(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));return cu(this.elementShape,n,"TensorList shape mismatch: "),0===(e=e.slice(0,this.size())).length?Object(S.Uh)([],[0].concat(this.elementShape)):Object(S.di)((function(){var t=e.map((function(e){return Object(S.Xg)(r.tensors[e],n)}));return Object(S.Lh)(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));return cu(this.elementShape,t,"TensorList shape mismatch: "),0===this.size()?Object(S.Uh)([],[0].concat(this.elementShape)):Object(S.di)((function(){var e=n.tensors.map((function(e){return Object(S.Xg)(e,t)}));return Object(S.ce)(e,0)}))}}]),e}();function du(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));cu(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=Object(S.oi)(e);return new fu(a,t,r)}function pu(e,t,n){return new fu([],e,t,n)}function hu(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,Object(I.a)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new fu([],n,e.dtype,r),o=Object(S.oi)(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function vu(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=0===r?0:e.size/r,o=Object(S.di)((function(){var o=[];e=Object(S.Xg)(e,[1,r,i]);for(var s=0;s<t.length;++s){var c=[0,0===s?0:a[s-1],0],u=[1,t[s],i];o[s]=Object(S.Xg)(Object(S.uh)(e,c,u),n)}return e.dispose(),o})),s=new fu([],n,e.dtype,t.length),c=0;c<o.length;c++)s.setItem(c,o[c]);return s}var mu=function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w,x,j,_,C,E,N,T,I,A,M,P,R,D,F,L,z,q,V,B,U,W,G,H,K,X,Q,Y,Z,J,$,ee,te,ne,re,ae,ie,oe,se,ce,ue,le,fe,de,pe,he,ve,me,be,ge,ye,Oe,ke,we,xe,je,Se,_e,Ce,Ee,Ne,Te,Ie,Ae,Me,Pe,Re,De,Fe,Le,ze,qe,Ve,Be,Ue,We,Ge,He;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?121:"TensorListStack"===e.t0?127:"TensorListFromTensor"===e.t0?133:"TensorListConcat"===e.t0?139:"TensorListPushBack"===e.t0?144:"TensorListPopBack"===e.t0?149:"TensorListSplit"===e.t0?154:160;break;case 3:return a=Object(oc.d)("thenBranch",t,n,r),i=Object(oc.d)("elseBranch",t,n,r),o=Object(oc.d)("cond",t,n,r),s=Object(oc.d)("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield(mn.a.mark((function e(){var a,i,o,s,c,u,l,f;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(oc.d)("body",t,n,r),i=Object(oc.d)("cond",t,n,r),o=Object(oc.d)("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,c=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:u=e.sent,s.forEach((function(e){e.kept||-1!==c.indexOf(e.id)||e.dispose()})),l=o,f=mn.a.mark((function e(){var t,n,o;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==c.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:u=e.sent,o.forEach((function(e){e.kept||-1!==c.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!u[0]){e.next=17;break}return e.delegateYield(f(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(c=e.t1)){e.next=19;break}return e.abrupt("return",c.v);case 19:return u=Object(oc.d)("pred",t,n,r),e.abrupt("return",[Object(oc.a)(u)]);case 21:return l=Object(oc.d)("pred",t,n,r),(f=Object(oc.d)("data",t,n,r)).kept||(f=Object(oc.a)(f)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,f],e.next=31;break;case 30:e.t2=[f,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(d=t.inputNames.find((function(e){return void 0!==Object(oc.e)(e,n,r)})),!d){e.next=36;break}return p=Object(oc.e)(d,n,r),e.abrupt("return",[Object(oc.a)(p)]);case 36:return e.abrupt("return",void 0);case 37:return h=Object(oc.d)("frameName",t,n,r),v=Object(oc.d)("tensor",t,n,r),r.enterFrame(h),e.abrupt("return",[Object(oc.a)(v)]);case 41:return m=Object(oc.d)("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[Object(oc.a)(m)]);case 44:return b=Object(oc.d)("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[Object(oc.a)(b)]);case 47:return g=Object(oc.d)("size",t,n,r),y=Object(oc.d)("dtype",t,n,r),O=Object(oc.d)("elementShape",t,n,r),k=Object(oc.d)("dynamicSize",t,n,r),w=Object(oc.d)("clearAfterRead",t,n,r),x=Object(oc.d)("identicalElementShapes",t,n,r),j=Object(oc.d)("name",t,n,r),_=new lu(j,y,g,O,x,k,w),r.addTensorArray(_),e.abrupt("return",[_.idTensor,Object(S.gh)(1)]);case 57:return C=Object(oc.d)("tensorArrayId",t,n,r),E=Object(oc.d)("index",t,n,r),N=Object(oc.d)("tensor",t,n,r),(T=r.getTensorArray(C.id)).write(E,N),e.abrupt("return",[T.idTensor]);case 63:return I=Object(oc.d)("tensorArrayId",t,n,r),A=Object(oc.d)("index",t,n,r),M=r.getTensorArray(I.id),e.abrupt("return",[M.read(A)]);case 67:return P=Object(oc.d)("tensorArrayId",t,n,r),R=Object(oc.d)("indices",t,n,r),D=Object(oc.d)("dtype",t,n,r),F=r.getTensorArray(P.id),e.abrupt("return",[F.gather(R,D)]);case 72:return L=Object(oc.d)("tensorArrayId",t,n,r),z=Object(oc.d)("indices",t,n,r),q=Object(oc.d)("tensor",t,n,r),(V=r.getTensorArray(L.id)).scatter(z,q),e.abrupt("return",[V.idTensor]);case 78:return B=Object(oc.d)("tensorArrayId",t,n,r),U=r.getTensorArray(B.id),W=Object(oc.d)("dtype",t,n,r),e.abrupt("return",[U.concat(W)]);case 82:return G=Object(oc.d)("tensorArrayId",t,n,r),H=Object(oc.d)("tensor",t,n,r),K=Object(oc.d)("lengths",t,n,r),(X=r.getTensorArray(G.id)).split(K,H),e.abrupt("return",[X.idTensor]);case 88:return Q=Object(oc.d)("tensorArrayId",t,n,r),Y=r.getTensorArray(Q.id),e.abrupt("return",[Object(S.gh)(Y.size(),"int32")]);case 91:return Z=Object(oc.d)("tensorArrayId",t,n,r),(J=r.getTensorArray(Z.id)).clearAndClose(),e.abrupt("return",[J.idTensor]);case 95:return $=Object(oc.d)("tensorListId",t,n,r),ee=Object(oc.d)("index",t,n,r),te=Object(oc.d)("tensor",t,n,r),(ne=r.getTensorList($.id)).setItem(ee,te),e.abrupt("return",[ne.idTensor]);case 101:return re=Object(oc.d)("tensorListId",t,n,r),ae=Object(oc.d)("index",t,n,r),ie=Object(oc.d)("elementShape",t,n,r),oe=Object(oc.d)("elementDType",t,n,r),se=r.getTensorList(re.id),e.abrupt("return",[se.getItem(ae,ie,oe)]);case 107:return ce=Object(oc.d)("indices",t,n,r),ue=Object(oc.d)("tensor",t,n,r),le=Object(oc.d)("elementShape",t,n,r),fe=Object(oc.d)("numElements",t,n,r),de=hu(ue,ce,le,fe),r.addTensorList(de),e.abrupt("return",[de.idTensor]);case 114:return pe=Object(oc.d)("elementShape",t,n,r),he=Object(oc.d)("elementDType",t,n,r),ve="TensorListReserve"===t.op?"numElements":"maxNumElements",me=Object(oc.d)(ve,t,n,r),be=pu(pe,he,me),r.addTensorList(be),e.abrupt("return",[be.idTensor]);case 121:return ge=Object(oc.d)("tensorListId",t,n,r),ye=Object(oc.d)("indices",t,n,r),Oe=Object(oc.d)("elementShape",t,n,r),ke=Object(oc.d)("elementDType",t,n,r),we=r.getTensorList(ge.id),e.abrupt("return",[we.gather(ye,ke,Oe)]);case 127:return xe=Object(oc.d)("tensorListId",t,n,r),je=Object(oc.d)("elementShape",t,n,r),Se=Object(oc.d)("elementDType",t,n,r),_e=Object(oc.d)("numElements",t,n,r),Ce=r.getTensorList(xe.id),e.abrupt("return",[Ce.stack(je,Se,_e)]);case 133:return Ee=Object(oc.d)("tensor",t,n,r),Ne=Object(oc.d)("elementShape",t,n,r),Te=Object(oc.d)("elementDType",t,n,r),Ie=du(Ee,Ne,Te),r.addTensorList(Ie),e.abrupt("return",[Ie.idTensor]);case 139:return Ae=Object(oc.d)("tensorListId",t,n,r),Me=r.getTensorList(Ae.id),Pe=Object(oc.d)("dtype",t,n,r),Re=Object(oc.d)("elementShape",t,n,r),e.abrupt("return",[Me.concat(Pe,Re)]);case 144:return De=Object(oc.d)("tensorListId",t,n,r),Fe=Object(oc.d)("tensor",t,n,r),(Le=r.getTensorList(De.id)).pushBack(Fe),e.abrupt("return",[Le.idTensor]);case 149:return ze=Object(oc.d)("tensorListId",t,n,r),qe=Object(oc.d)("elementShape",t,n,r),Ve=Object(oc.d)("elementDType",t,n,r),Be=r.getTensorList(ze.id),e.abrupt("return",[Be.popBack(qe,Ve)]);case 154:return Ue=Object(oc.d)("tensor",t,n,r),We=Object(oc.d)("elementShape",t,n,r),Ge=Object(oc.d)("lengths",t,n,r),He=vu(Ue,Ge,We),r.addTensorList(He),e.abrupt("return",[He.idTensor]);case 160:throw TypeError("Node type ".concat(t.op," is not implemented"));case 161:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),bu=n(243),gu=n(111),yu=n(40),Ou=n(244),ku=n(127),wu=n(348),xu=n(186),ju=n(195),Su=n(359),_u=n(344),Cu=n(358),Eu=n(247);function Nu(e,t,n){var r=Object(oc.d)("fusedOps",e,t,n),a=Object(A.a)(r,2),i=a[0],o=a[1],s="biasadd"===i,c="prelu"===o,u="fusedbatchnorm"===i,l=Object(oc.d)("numArgs",e,t,n);if(s){if(c&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");var f=Object(oc.d)("strides",e,t,n),d=Object(oc.c)(e,t,n),p=Object(oc.d)("dataFormat",e,t,n).toUpperCase(),h=Object(oc.d)("dilations",e,t,n),v=Object(oc.d)("args",e,t,n),m=Object(A.a)(v,2);return{stride:f,pad:d,dataFormat:p,dilations:h,biasArg:m[0],preluArg:m[1],activationFunc:o,leakyreluAlpha:Object(oc.d)("leakyreluAlpha",e,t,n)}}var Tu=n(185),Iu=n(355),Au=n(360),Mu=n(173),Pu=n(129),Ru=n(361),Du=n(257),Fu=n(220),Lu=n(369),zu=n(112),qu=n(45),Vu=n(32),Bu=n(267),Uu=n(364);function Wu(e,t,n){return{boxes:Object(oc.d)("boxes",e,t,n),scores:Object(oc.d)("scores",e,t,n),maxOutputSize:Object(oc.d)("maxOutputSize",e,t,n),iouThreshold:Object(oc.d)("iouThreshold",e,t,n),scoreThreshold:Object(oc.d)("scoreThreshold",e,t,n),softNmsSigma:Object(oc.d)("softNmsSigma",e,t,n)}}var Gu=function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w,x,j,S,_,C;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?8:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?14:"Where"===e.t0?19:"ListDiff"===e.t0?26:27;break;case 3:return a=Wu(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,c=a.iouThreshold,u=a.scoreThreshold,l=a.softNmsSigma,e.next=6,yu.Bb.nonMaxSuppressionWithScoreAsync(i,o,s,c,u,l);case 6:return f=e.sent,e.abrupt("return",[f.selectedIndices,f.selectedScores]);case 8:return d=Wu(t,n,r),p=d.boxes,h=d.scores,v=d.maxOutputSize,m=d.iouThreshold,b=d.scoreThreshold,g=Object(oc.d)("padToMaxOutputSize",t,n,r),e.next=12,yu.Bb.nonMaxSuppressionPaddedAsync(p,h,v,m,b,g);case 12:return y=e.sent,e.abrupt("return",[y.selectedIndices,y.validOutputs]);case 14:return O=Wu(t,n,r),k=O.boxes,w=O.scores,x=O.maxOutputSize,j=O.iouThreshold,S=O.scoreThreshold,e.next=17,yu.Bb.nonMaxSuppressionAsync(k,w,x,j,S);case 17:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 19:return _=Vu.a(Object(oc.d)("condition",t,n,r),"bool"),e.next=22,Bu.a(_);case 22:return e.t2=e.sent,C=[e.t2],_.dispose(),e.abrupt("return",C);case 26:return e.abrupt("return",Uu.a(Object(oc.d)("x",t,n,r),Object(oc.d)("y",t,n,r)));case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Hu=n(265),Ku=n(266),Xu=n(123),Qu=n(37),Yu=function(){function e(t,n){Object(_.a)(this,e),this.keyDType=t,this.valueDType=n,this.handle=Object(S.gh)(0),this.tensorMap=new Map,Object(S.xf)(this.handle)}return Object(C.a)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"import",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",Object(S.di)((function(){var e=Object(S.oi)(n),t=r.length,i=e.length;S.qi.assert(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],c=e[o];Object(S.xf)(c),a.tensorMap.set(s,c)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",Object(S.di)((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return Object(S.Lh)(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),Zu=function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a){var i,o,s,c,u,l,f,d,p,h,v;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:24;break;case 3:return i=Object(oc.d)("keyDType",t,n,r),o=Object(oc.d)("valueDType",t,n,r),s=new Yu(i,o),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return c=Object(oc.d)("tableHandle",t,n,r,a),u=Object(oc.d)("keys",t,n,r),l=Object(oc.d)("values",t,n,r),f=a.getHashTableById(c.id),e.next=14,f.import(u,l);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return d=Object(oc.d)("tableHandle",t,n,r,a),p=Object(oc.d)("keys",t,n,r),h=Object(oc.d)("defaultValue",t,n,r),v=a.getHashTableById(d.id),e.next=22,v.find(p,h);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:throw TypeError("Node type ".concat(t.op," is not implemented"));case 25:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Ju=n(128),$u=n(155),el=n(85),tl=n(95),nl=n(152),rl=n(96),al=n(103),il=n(153),ol=n(194),sl=n(70),cl=n(59),ul=n(92),ll=n(133),fl=n(250),dl=n(366),pl=n(357),hl=n(385),vl=n(114),ml=n(144),bl=n(172),gl=n(42),yl=n(238),Ol=n(239),kl=n(240),wl=n(241),xl=n(188),jl=n(345),Sl=n(349),_l=n(64),Cl=n(151),El=n(90),Nl=n(57),Tl=n(367),Il=n(158),Al=n(22),Ml=n(104),Pl=n(132),Rl=n(137),Dl=n(122),Fl=n(372),Ll=n(373),zl=n(199),ql=n(175),Vl=n(200),Bl=n(263),Ul=n(109),Wl=n(254),Gl=n(97),Hl=n(156),Kl=n(150),Xl=n(246),Ql=n(171);function Yl(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return S.di((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[uc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"AddN":return[lc.a(Object(oc.d)("tensors",e,t,n))];case"FloorMod":case"Mod":return[fc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"Mul":return[dc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"RealDiv":case"Div":return[pc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"DivNoNan":return[hc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"FloorDiv":return[vc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"Sub":return[mc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"Minimum":return[bc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"Maximum":return[gc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"Pow":return[yc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"SquaredDifference":return[Oc.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return S.di((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[kc.a(Object(oc.d)("x",e,t,n))];case"Acos":return[wc.a(Object(oc.d)("x",e,t,n))];case"Acosh":return[xc.a(Object(oc.d)("x",e,t,n))];case"Asin":return[jc.a(Object(oc.d)("x",e,t,n))];case"Asinh":return[Sc.a(Object(oc.d)("x",e,t,n))];case"Atan":return[_c.a(Object(oc.d)("x",e,t,n))];case"Atan2":return[Cc.a(Object(oc.d)("x",e,t,n),Object(oc.d)("y",e,t,n))];case"Atanh":return[Ec.a(Object(oc.d)("x",e,t,n))];case"Ceil":return[Nc.a(Object(oc.d)("x",e,t,n))];case"Complex":return[Tc.a(Object(oc.d)("real",e,t,n),Object(oc.d)("imag",e,t,n))];case"Cos":return[Ic.a(Object(oc.d)("x",e,t,n))];case"Cosh":return[Ac.a(Object(oc.d)("x",e,t,n))];case"Elu":return[Mc.a(Object(oc.d)("x",e,t,n))];case"Erf":return[Pc.a(Object(oc.d)("x",e,t,n))];case"Exp":return[Rc.a(Object(oc.d)("x",e,t,n))];case"Expm1":return[Dc.a(Object(oc.d)("x",e,t,n))];case"Floor":return[Fc.a(Object(oc.d)("x",e,t,n))];case"Log":return[Lc.a(Object(oc.d)("x",e,t,n))];case"Log1p":return[zc.a(Object(oc.d)("x",e,t,n))];case"Imag":return[qc.a(Object(oc.d)("x",e,t,n))];case"Neg":return[Vc.a(Object(oc.d)("x",e,t,n))];case"Reciprocal":return[Bc.a(Object(oc.d)("x",e,t,n))];case"Real":return[Uc.a(Object(oc.d)("x",e,t,n))];case"Relu":return[Wc.a(Object(oc.d)("x",e,t,n))];case"Round":return[Gc.a(Object(oc.d)("x",e,t,n))];case"Selu":return[Hc.a(Object(oc.d)("x",e,t,n))];case"Sigmoid":return[Kc.a(Object(oc.d)("x",e,t,n))];case"Sin":return[Xc.a(Object(oc.d)("x",e,t,n))];case"Sign":return[Qc.a(Object(oc.d)("x",e,t,n))];case"Sinh":return[Yc.a(Object(oc.d)("x",e,t,n))];case"Softplus":return[Zc.a(Object(oc.d)("x",e,t,n))];case"Sqrt":return[Jc.a(Object(oc.d)("x",e,t,n))];case"Square":return[$c.a(Object(oc.d)("x",e,t,n))];case"Tanh":return[eu.a(Object(oc.d)("x",e,t,n))];case"Tan":return[tu.a(Object(oc.d)("x",e,t,n))];case"ClipByValue":return[nu.a(Object(oc.d)("x",e,t,n),Object(oc.d)("clipValueMin",e,t,n),Object(oc.d)("clipValueMax",e,t,n))];case"Relu6":return[ru.a(Object(oc.d)("x",e,t,n))];case"Rsqrt":return[au.a(Object(oc.e)(e.inputNames[0],t,n))];case"Prod":return[iu.a(Object(oc.d)("x",e,t,n),Object(oc.d)("axes",e,t,n))];case"LeakyRelu":return[ou.a(Object(oc.d)("x",e,t,n),Object(oc.d)("alpha",e,t,n))];case"Prelu":return[su.a(Object(oc.d)("x",e,t,n),Object(oc.d)("alpha",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return mu(e,t,n);case"convolution":return S.di((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=Object(oc.d)("stride",e,t,n),a=Object(oc.d)("pad",e,t,n),i=Object(oc.d)("dataFormat",e,t,n).toUpperCase(),o=Object(oc.d)("dilation",e,t,n);return[bu.a(Object(oc.d)("x",e,t,n),Object(oc.d)("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=Object(oc.d)("strides",e,t,n),c=Object(oc.c)(e,t,n),u=Object(oc.d)("dataFormat",e,t,n).toUpperCase(),l=Object(oc.d)("dilations",e,t,n);return[gu.a(Object(oc.d)("x",e,t,n),Object(oc.d)("filter",e,t,n),[s[1],s[2]],c,u,[l[1],l[2]])];case"_FusedConv2D":var f=Nu(e,t,n),d=f.stride,p=f.pad,h=f.dataFormat,v=f.dilations,m=f.biasArg,b=f.preluArg,g=f.activationFunc,y=f.leakyreluAlpha;return[yu.sb.conv2d({x:Object(oc.d)("x",e,t,n),filter:Object(oc.d)("filter",e,t,n),strides:[d[1],d[2]],pad:p,dataFormat:h,dilations:[v[1],v[2]],bias:m,activation:g,preluActivationWeights:b,leakyreluAlpha:y})];case"FusedDepthwiseConv2dNative":var O=Nu(e,t,n),k=O.stride,w=O.pad,x=O.dataFormat,j=O.dilations,S=O.biasArg,_=O.preluArg,C=O.activationFunc,E=O.leakyreluAlpha;return[yu.sb.depthwiseConv2d({x:Object(oc.d)("x",e,t,n),filter:Object(oc.d)("filter",e,t,n),strides:[k[1],k[2]],pad:w,dataFormat:x,dilations:[j[1],j[2]],bias:S,activation:C,preluActivationWeights:_,leakyreluAlpha:E})];case"Conv2DBackpropInput":case"Conv2dTranspose":var N=Object(oc.d)("outputShape",e,t,n),T=Object(oc.d)("strides",e,t,n),I=Object(oc.c)(e,t,n);return[Ou.a(Object(oc.d)("x",e,t,n),Object(oc.d)("filter",e,t,n),N,[T[1],T[2]],I)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var A=Object(oc.d)("strides",e,t,n),M=Object(oc.c)(e,t,n),P=Object(oc.d)("dilations",e,t,n),R=Object(oc.d)("dataFormat",e,t,n).toUpperCase();return[ku.a(Object(oc.d)("input",e,t,n),Object(oc.d)("filter",e,t,n),[A[1],A[2]],M,R,[P[1],P[2]])];case"Conv3D":var D=Object(oc.d)("strides",e,t,n),F=Object(oc.d)("pad",e,t,n),L=Object(oc.d)("dataFormat",e,t,n).toUpperCase(),z=Object(oc.d)("dilations",e,t,n);return[wu.a(Object(oc.d)("x",e,t,n),Object(oc.d)("filter",e,t,n),[D[1],D[2],D[3]],F,L,[z[1],z[2],z[3]])];case"AvgPool":var q=Object(oc.d)("strides",e,t,n),V=Object(oc.d)("pad",e,t,n),B=Object(oc.d)("kernelSize",e,t,n);return[xu.a(Object(oc.d)("x",e,t,n),[B[1],B[2]],[q[1],q[2]],V)];case"MaxPool":var U=Object(oc.d)("strides",e,t,n),W=Object(oc.d)("pad",e,t,n),G=Object(oc.d)("kernelSize",e,t,n);return[ju.a(Object(oc.d)("x",e,t,n),[G[1],G[2]],[U[1],U[2]],W)];case"MaxPoolWithArgmax":var H=Object(oc.d)("strides",e,t,n),K=Object(oc.d)("pad",e,t,n),X=Object(oc.d)("kernelSize",e,t,n),Q=Object(oc.d)("includeBatchInIndex",e,t,n),Y=Su.a(Object(oc.d)("x",e,t,n),[X[1],X[2]],[H[1],H[2]],K,Q);return[Y.result,Y.indexes];case"AvgPool3D":var Z=Object(oc.d)("strides",e,t,n),J=Object(oc.d)("pad",e,t,n),$=Object(oc.d)("kernelSize",e,t,n);return[_u.a(Object(oc.d)("x",e,t,n),[$[1],$[2],$[3]],[Z[1],Z[2],Z[3]],J)];case"MaxPool3D":var ee=Object(oc.d)("strides",e,t,n),te=Object(oc.d)("pad",e,t,n),ne=Object(oc.d)("kernelSize",e,t,n);return[Cu.a(Object(oc.d)("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=Object(oc.d)("strides",e,t,n),ae=Object(oc.d)("pad",e,t,n),ie=Object(oc.d)("dilations",e,t,n),oe=re[1],se=re[2],ce=ie[1],ue=ie[2];return[Eu.a(Object(oc.d)("x",e,t,n),Object(oc.d)("filter",e,t,n),[oe,se],ae,[ce,ue],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return S.di((function(){return function(e,t,n){switch(e.op){case"Fill":var r=Object(oc.d)("shape",e,t,n),a=Object(oc.d)("dtype",e,t,n),i=Object(oc.d)("value",e,t,n);return[Tu.a(r,i,a)];case"LinSpace":var o=Object(oc.d)("start",e,t,n),s=Object(oc.d)("stop",e,t,n),c=Object(oc.d)("num",e,t,n);return[Iu.a(o,s,c)];case"Multinomial":var u=Object(oc.d)("logits",e,t,n),l=Object(oc.d)("numSamples",e,t,n),f=Object(oc.d)("seed",e,t,n);return[Au.a(u,l,f)];case"OneHot":var d=Object(oc.d)("indices",e,t,n),p=Object(oc.d)("depth",e,t,n),h=Object(oc.d)("onValue",e,t,n),v=Object(oc.d)("offValue",e,t,n);return[Mu.a(d,p,h,v)];case"Ones":return[Pu.a(Object(oc.d)("shape",e,t,n),Object(oc.d)("dtype",e,t,n))];case"OnesLike":return[Ru.a(Object(oc.d)("x",e,t,n))];case"RandomUniform":return[Du.a(Object(oc.d)("shape",e,t,n),Object(oc.d)("minval",e,t,n),Object(oc.d)("maxval",e,t,n),Object(oc.d)("dtype",e,t,n))];case"Range":var m=Object(oc.d)("start",e,t,n),b=Object(oc.d)("stop",e,t,n),g=Object(oc.d)("step",e,t,n);return[Fu.a(m,b,g,Object(oc.d)("dtype",e,t,n))];case"TruncatedNormal":var y=Object(oc.d)("shape",e,t,n),O=Object(oc.d)("mean",e,t,n),k=Object(oc.d)("stdDev",e,t,n),w=Object(oc.d)("seed",e,t,n);return[Lu.a(y,O,k,Object(oc.d)("dtype",e,t,n),w)];case"Zeros":return[zu.a(Object(oc.d)("shape",e,t,n),Object(oc.d)("dtype",e,t,n))];case"ZerosLike":return[qu.a(Object(oc.d)("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return Gu(e,t,n);case"evaluation":return S.di((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=Object(oc.d)("x",e,t,n),a=Object(oc.d)("k",e,t,n),i=Object(oc.d)("sorted",e,t,n),o=Hu.a(r,a,i);return[o.values,o.indices];case"Unique":var s=Object(oc.d)("x",e,t,n),c=Ku.a(s);return[c.values,c.indices];case"UniqueV2":var u=Object(oc.d)("x",e,t,n),l=Object(oc.d)("axis",e,t,n),f=Ku.a(u,l);return[f.values,f.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return S.di((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=Object(oc.d)("images",e,t,n),a=Object(oc.d)("size",e,t,n),i=Object(oc.d)("alignCorners",e,t,n),o=Object(oc.d)("halfPixelCenters",e,t,n);return[yu.Bb.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=Object(oc.d)("images",e,t,n),c=Object(oc.d)("size",e,t,n),u=Object(oc.d)("alignCorners",e,t,n),l=Object(oc.d)("halfPixelCenters",e,t,n);return[yu.Bb.resizeNearestNeighbor(s,[c[0],c[1]],u,l)];case"CropAndResize":var f=Object(oc.d)("image",e,t,n),d=Object(oc.d)("boxes",e,t,n),p=Object(oc.d)("boxInd",e,t,n),h=Object(oc.d)("cropSize",e,t,n),v=Object(oc.d)("method",e,t,n),m=Object(oc.d)("extrapolationValue",e,t,n);return[yu.Bb.cropAndResize(f,d,p,h,v,m)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return S.di((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=Object(oc.d)("default",e,t,n);return[Object(oc.e)(e.name,t,n)||r];case"Placeholder":return[Object(oc.e)(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":var a=Object(oc.d)("x",e,t,n);return[Object(oc.a)(a)];case"IdentityN":return Object(oc.d)("x",e,t,n).map((function(e){return Object(oc.a)(e)}));case"Snapshot":var i=Object(oc.d)("x",e,t,n);return[Object(oc.a)(i)];case"Shape":return[Xu.a(Object(oc.d)("x",e,t,n).shape,"int32")];case"ShapeN":return Object(oc.d)("x",e,t,n).map((function(e){return Xu.a(e.shape)}));case"Size":return[Qu.a(Object(oc.d)("x",e,t,n).size,"int32")];case"Rank":return[Qu.a(Object(oc.d)("x",e,t,n).rank,"int32")];case"NoOp":return[Qu.a(1)];case"Print":var o=Object(oc.d)("x",e,t,n),s=Object(oc.d)("data",e,t,n),c=Object(oc.d)("message",e,t,n),u=Object(oc.d)("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(var l=0;l<s.length;l++)console.log(Array.prototype.slice.call(s[l].dataSync()).slice(0,u));return[o];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return S.di((function(){return function(e,t,n){switch(e.op){case"Equal":return[Ju.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"NotEqual":return[$u.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"Greater":return[el.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"GreaterEqual":return[tl.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"Less":return[nl.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"LessEqual":return[rl.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"LogicalAnd":return[al.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"LogicalNot":return[il.a(Object(oc.d)("a",e,t,n))];case"LogicalOr":return[ol.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];case"Select":case"SelectV2":return[sl.a(Object(oc.d)("condition",e,t,n),Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return S.di((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[cl.a(Object(oc.d)("a",e,t,n),Object(oc.d)("b",e,t,n),Object(oc.d)("transposeA",e,t,n),Object(oc.d)("transposeB",e,t,n))];case"Transpose":return[ul.a(Object(oc.d)("x",e,t,n),Object(oc.d)("perm",e,t,n))];case"_FusedMatMul":var r=Object(oc.d)("fusedOps",e,t,n),a=Object(A.a)(r,2),i=a[0],o=a[1],s="biasadd"===i,c="prelu"===o,u=Object(oc.d)("numArgs",e,t,n),l=Object(oc.d)("leakyreluAlpha",e,t,n);if(s){if(c&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var f=Object(oc.d)("args",e,t,n),d=Object(A.a)(f,2),p=d[0],h=d[1];return[yu.sb.matMul({a:Object(oc.d)("a",e,t,n),b:Object(oc.d)("b",e,t,n),transposeA:Object(oc.d)("transposeA",e,t,n),transposeB:Object(oc.d)("transposeB",e,t,n),bias:p,activation:o,preluActivationWeights:h,leakyreluAlpha:l})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return S.di((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[ll.a(Object(oc.d)("x",e,t,n),Object(oc.d)("mean",e,t,n),Object(oc.d)("variance",e,t,n),Object(oc.d)("offset",e,t,n),Object(oc.d)("scale",e,t,n),Object(oc.d)("epsilon",e,t,n))];case"LRN":return[fl.a(Object(oc.d)("x",e,t,n),Object(oc.d)("radius",e,t,n),Object(oc.d)("bias",e,t,n),Object(oc.d)("alpha",e,t,n),Object(oc.d)("beta",e,t,n))];case"Softmax":return[dl.a(Object(oc.d)("x",e,t,n))];case"LogSoftmax":return[pl.a(Object(oc.d)("x",e,t,n))];case"SparseToDense":return[hl.a(Object(oc.d)("sparseIndices",e,t,n),Object(oc.d)("outputShape",e,t,n),Object(oc.d)("sparseValues",e,t,n),Object(oc.d)("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return S.di((function(){return function(e,t,n){switch(e.op){case"Max":var r=Object(oc.d)("axis",e,t,n),a=Object(oc.d)("keepDims",e,t,n);return[vl.a(Object(oc.d)("x",e,t,n),r,a)];case"Mean":var i=Object(oc.d)("axis",e,t,n),o=Object(oc.d)("keepDims",e,t,n);return[ml.a(Object(oc.d)("x",e,t,n),i,o)];case"Min":var s=Object(oc.d)("axis",e,t,n),c=Object(oc.d)("keepDims",e,t,n);return[bl.a(Object(oc.d)("x",e,t,n),s,c)];case"Sum":var u=Object(oc.d)("axis",e,t,n),l=Object(oc.d)("keepDims",e,t,n);return[gl.a(Object(oc.d)("x",e,t,n),u,l)];case"All":var f=Object(oc.d)("axis",e,t,n),d=Object(oc.d)("keepDims",e,t,n);return[yl.a(Object(oc.d)("x",e,t,n),f,d)];case"Any":var p=Object(oc.d)("axis",e,t,n),h=Object(oc.d)("keepDims",e,t,n);return[Ol.a(Object(oc.d)("x",e,t,n),p,h)];case"ArgMax":var v=Object(oc.d)("axis",e,t,n);return[kl.a(Object(oc.d)("x",e,t,n),v)];case"ArgMin":var m=Object(oc.d)("axis",e,t,n);return[wl.a(Object(oc.d)("x",e,t,n),m)];case"Prod":var b=Object(oc.d)("axis",e,t,n),g=Object(oc.d)("keepDims",e,t,n);return[iu.a(Object(oc.d)("x",e,t,n),b,g)];case"Cumsum":var y=Object(oc.d)("axis",e,t,n),O=Object(oc.d)("exclusive",e,t,n),k=Object(oc.d)("reverse",e,t,n);return[xl.a(Object(oc.d)("x",e,t,n),y,O,k)];case"Bincount":var w=Object(oc.d)("x",e,t,n),x=Object(oc.d)("weights",e,t,n),j=Object(oc.d)("size",e,t,n);return[jl.a(w,x,j)];case"DenseBincount":var S=Object(oc.d)("x",e,t,n),_=Object(oc.d)("weights",e,t,n),C=Object(oc.d)("size",e,t,n),E=Object(oc.d)("binaryOutput",e,t,n);return[Sl.a(S,_,C,E)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return S.di((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=Object(oc.d)("n",e,t,n),a=Object(oc.d)("axis",e,t,n),i=Object(oc.d)("tensors",e,t,n);return i=i.slice(0,r),[_l.a(i,a)];case"Gather":var o=Object(oc.d)("x",e,t,n),s=Object(oc.d)("indices",e,t,n);return[Cl.a(o,Vu.a(s,"int32"),0)];case"GatherV2":var c=Object(oc.d)("axis",e,t,n),u=Object(oc.d)("batchDims",e,t,n),l=Object(oc.d)("x",e,t,n),f=Object(oc.d)("indices",e,t,n);return[Cl.a(l,Vu.a(f,"int32"),c,u)];case"Reverse":for(var d=Object(oc.d)("dims",e,t,n),p=[],h=0;h<d.length;h++)d[h]&&p.push(h);var v=Object(oc.d)("x",e,t,n);return[El.a(v,p)];case"ReverseV2":var m=Object(oc.d)("axis",e,t,n),b=Object(oc.d)("x",e,t,n);return[El.a(b,m)];case"Slice":var g=Object(oc.d)("begin",e,t,n),y=Object(oc.d)("size",e,t,n);return[Nl.a(Object(oc.d)("x",e,t,n),g,y)];case"StridedSlice":var O=Object(oc.d)("begin",e,t,n),k=Object(oc.d)("end",e,t,n),w=Object(oc.d)("strides",e,t,n),x=Object(oc.d)("beginMask",e,t,n),j=Object(oc.d)("endMask",e,t,n),_=Object(oc.d)("ellipsisMask",e,t,n),C=Object(oc.d)("newAxisMask",e,t,n),E=Object(oc.d)("shrinkAxisMask",e,t,n),N=Object(oc.d)("x",e,t,n);return[Tl.a(N,O,k,w,x,j,_,C,E)];case"Pack":return Object(S.di)((function(){var r=Object(oc.d)("axis",e,t,n),a=Object(oc.d)("tensors",e,t,n),i=a[0].shape,o=Il.a(a[0]).shape,s=a.map((function(e){var t=S.qi.arraysEqual(e.shape,i);if(!t&&!S.qi.arraysEqual(Il.a(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:Al.a(e,i)}));return[Ml.a(s,r)]}));case"Unpack":var T=Object(oc.d)("axis",e,t,n),I=Object(oc.d)("tensor",e,t,n);return Pl.a(I,T);case"Tile":var A=Object(oc.d)("reps",e,t,n);return[Rl.a(Object(oc.d)("x",e,t,n),A)];case"Split":case"SplitV":var M=Object(oc.d)("axis",e,t,n),P=Object(oc.d)("numOrSizeSplits",e,t,n),R=Object(oc.d)("x",e,t,n);return Dl.a(R,P,M);case"ScatterNd":var D=Object(oc.d)("indices",e,t,n),F=Object(oc.d)("values",e,t,n),L=Object(oc.d)("shape",e,t,n);return[Fl.a(D,F,L)];case"GatherNd":var z=Object(oc.d)("x",e,t,n),q=Object(oc.d)("indices",e,t,n);return[Ll.a(z,q)];case"SparseToDense":var V=Object(oc.d)("sparseIndices",e,t,n),B=Object(oc.d)("outputShape",e,t,n),U=Object(oc.d)("sparseValues",e,t,n),W=Object(oc.d)("defaultValue",e,t,n);return[hl.a(V,U,B,U.dtype===W.dtype?W:Vu.a(W,U.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return S.di((function(){return function(e,t,n){switch(e.op){case"FFT":return[zl.a(Object(oc.d)("x",e,t,n))];case"IFFT":return[ql.a(Object(oc.d)("x",e,t,n))];case"RFFT":return[Vl.a(Object(oc.d)("x",e,t,n))];case"IRFFT":return[Bl.a(Object(oc.d)("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return S.di((function(){return function(e,t,n){switch(e.op){case"Cast":return[Vu.a(Object(oc.d)("x",e,t,n),Object(oc.d)("dtype",e,t,n))];case"ExpandDims":var r=Object(oc.d)("axis",e,t,n);return[Ul.a(Object(oc.d)("x",e,t,n),r)];case"Squeeze":var a=Object(oc.d)("axis",e,t,n);return[Il.a(Object(oc.d)("x",e,t,n),a)];case"Reshape":return[Al.a(Object(oc.d)("x",e,t,n),Object(oc.d)("shape",e,t,n))];case"MirrorPad":return[Wl.a(Object(oc.d)("x",e,t,n),Object(oc.d)("padding",e,t,n),Object(oc.d)("mode",e,t,n))];case"PadV2":case"Pad":return[Gl.a(Object(oc.d)("x",e,t,n),Object(oc.d)("padding",e,t,n),Object(oc.d)("constantValue",e,t,n))];case"SpaceToBatchND":var i=Object(oc.d)("blockShape",e,t,n),o=Object(oc.d)("paddings",e,t,n);return[Hl.a(Object(oc.d)("x",e,t,n),i,o)];case"BatchToSpaceND":var s=Object(oc.d)("blockShape",e,t,n),c=Object(oc.d)("crops",e,t,n);return[Kl.a(Object(oc.d)("x",e,t,n),s,c)];case"DepthToSpace":var u=Object(oc.d)("blockSize",e,t,n),l=Object(oc.d)("dataFormat",e,t,n).toUpperCase();return[Xl.a(Object(oc.d)("x",e,t,n),u,l)];case"BroadcastTo":return[Ql.a(Object(oc.d)("x",e,t,n),Object(oc.d)("shape",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return Zu(e,t,n,r);case"custom":var a=Object(cc.b)(e.op);if(a&&a.customExecutor)return a.customExecutor(new sc(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return S.qi.isPromise(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var Zl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(_.a)(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return Object(C.a)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function Jl(e,t,n,r){var a=new Set,i=[],o=null,s=null,c=new Set,u=Object.keys(e).map((function(e){return Object(oc.g)(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return Object(oc.g)(e.name)[0]})));for(var f=Object(I.a)(t);f.length>0;){var d=f.pop();(nf(d)||rf(d)||af(d))&&null==o&&(s=(o=d).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(d.name),null==n[d.name]&&(-1===u.indexOf(d.name)&&-1===l.indexOf(d.name)&&(0!==d.inputs.length?d.inputs.forEach((function(e){c.has(e.name)||(c.add(e.name),f.push(e))})):i.push(d.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var $l=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],ef=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],tf=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function nf(e){return $l.indexOf(e.op)>=0}function rf(e){return ef.indexOf(e.op)>=0}function af(e){return tf.indexOf(e.op)>=0}var of=function(){function e(t,n){var r=this;Object(_.a)(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return Object(C.a)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,Object(I.a)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=Jl(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return Object(oc.g)(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var c=new Set,u=[];i.length>0;){var l=i.pop();c.add(l.name),t[l.name]||u.push(l),l.children.forEach((function(e){!c.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return c.has(e.name)}))&&i.push(e)}))}return u}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[Object(oc.g)(e)[0]]})),i=t.map((function(e){return Object(oc.g)(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),c=this.compiledMap.get(s);null==c&&(c=this.compile(e,o),this.compiledMap.set(s,c));var u={},l={};return Object(S.di)((function(){var r=new Zl(n.weightMap,u,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=Object(oc.g)(t),r=Object(A.a)(n,2),i=r[0],o=[];o[r[1]]=e[t],a[i]=o}));for(var o=n.getFrozenTensorIds(a),s={},f=0;f<c.length;f++){var d=c[f];if(!a[d.name]){var p=Yl(d,a,r,n._resourceManager);if(S.qi.isPromise(p))throw new Error("The execution of the op '".concat(d.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[d.name]=p,n.checkTensorForDisposal(d.name,d,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return Object(oc.e)(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var t=Object(oc.f)(e.name,n,r);null!=t&&t.forEach((function(e){if(e&&!a.has(e.id)){var t=o[e.id];1===t?(e.dispose(),delete o[e.id]):null!=t&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_executeAsync",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f,d=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]&&d[2],a=d.length>3&&void 0!==d[3]?d[3]:{},i=d.length>4&&void 0!==d[4]?d[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n)),o=new Zl(this.weightMap,a,i,this.functionExecutorMap),e.next=7,this.executeWithControlFlow(t,o,n,r);case 7:return s=e.sent,c=n.map((function(e){return Object(oc.e)(e,s,o)})),u=c.map((function(e){return e.id})),l=Object.keys(t).map((function(e){return t[e].id})),f=new Set([].concat(Object(I.a)(u),Object(I.a)(l),Object(I.a)(this.weightIds))),Object.keys(s).forEach((function(e){s[e].forEach((function(e){!e||e.isDisposed||f.has(e.id)||e.dispose()}))})),null==this.parent&&o.dispose(f),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a){var i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return w.graph.nodes[Object(oc.g)(e)[0]]})),s=r.map((function(e){return Object(oc.g)(e)[0]})),0===(c=s.map((function(e){return w.graph.nodes[e]}))).length&&(c=this._outputs),u=Jl(t,c,this.weightMap,this._initNodes),l=u.usedNodes,f=u.missingInputs,d=u.dynamicNode,p=u.syncInputs,h=[].concat(Object(I.a)(o),Object(I.a)(this.graph.weights),Object(I.a)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),v=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=Object(oc.g)(e),r=Object(A.a)(n,2),a=r[0],i=[];i[r[1]]=t[e],v[a]=i})),m={},b=this.getFrozenTensorIds(v),g={};case 12:if(!(h.length>0)){e.next=18;break}return y=this.processStack(o,h,n,v,g,b,s,m,l),e.next=16,Promise.all(y);case 16:e.next=12;break;case 18:if(null!=d||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((O=c.filter((function(e){return!nf(e)&&!Object(oc.e)(e.name,v,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw k="",null!=d&&(k="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(O,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(f,"]. ").concat(k));case 24:return e.abrupt("return",v);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,c){for(var u=this,l=[],f=function(){var e=t.pop();n.currentContext=e.contexts;var f="";if("Enter"===e.node.op&&Object(oc.d)("isConstant",e.node,r,n)){var d=Object(oc.b)(e.node.name,n),p=Object(A.a)(d,1);f=p[0]}if(null==r[e.node.name]){var h=Yl(e.node,r,n,u._resourceManager);if(!f){var v=Object(oc.b)(e.node.name,n),m=Object(A.a)(v,1);f=m[0]}var b=n.currentContext;S.qi.isPromise(h)?l.push(h.then((function(l){return r[f]=l,n.currentContext=b,u.checkTensorForDisposal(f,e.node,r,n,i,o,s),u.processChildNodes(e.node,t,n,r,a,c),l}))):(r[f]=h,u.checkTensorForDisposal(f,e.node,r,n,i,o,s),u.processChildNodes(e.node,t,n,r,a,c))}else u.processChildNodes(e.node,t,n,r,a,c)};t.length>0;)f();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=Object(oc.b)(e.name,n),s=Object(A.a)(o,1)[0];!a[s]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!Object(oc.e)(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!Object(oc.e)(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=Object(oc.g)(n),i=Object(A.a)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,c=s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e}));S.qi.assert(c,(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&S.qi.assert(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=Object(oc.g)(e),r=Object(A.a)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=Object(oc.g)(e),r=Object(A.a)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),sf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(_.a)(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return Object(C.a)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),cf="?tfjs-format=file",uf="model.json",lf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(_.a)(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new sf}return Object(C.a)(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=S.sf.browserHTTPRequest(e,this.loadOptions);else{var t=S.sf.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(S.sf.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=3;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,this.handler.load();case 5:return t=e.sent,e.abrupt("return",this.loadSync(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=S.sf.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new of(ic.a.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=ic.a.Instance.transformGraph(e.modelInitializer);this.initializer=new of(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=S.sf.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof S.id)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function ff(e){return df.apply(this,arguments)}function df(){return df=Object(bn.a)(mn.a.mark((function e(t){var n,r,a=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t).concat(uf).concat(cf)),r=new lf(t,n),e.next=8,r.load();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),df.apply(this,arguments)}var pf="2.8.6",hf=n(295),vf=n(83),mf=n(120),bf=function(){function e(){Object(_.a)(this,e),this.size=null}return Object(C.a)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return S.qi.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),gf(Object(bn.a)(mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,kf));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,gf(Object(bn.a)(mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,gf(Object(bn.a)(mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return S.di((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return gf(Object(bn.a)(mn.a.mark((function n(){return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return S.di((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return gf(Object(bn.a)(mn.a.mark((function n(){return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return gf(Object(bn.a)(mn.a.mark((function n(){return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,gf(Object(bn.a)(mn.a.mark((function t(){var r;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(vf.e)(Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",Object(vf.d)(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,gf(Object(bn.a)(mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=hf.alea(t||S.qi.now().toString());return gf(Object(bn.a)(mn.a.mark((function t(){var i;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,gf(Object(bn.a)(mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function gf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){Object(E.a)(a,n);var r=Object(N.a)(a);function a(){var e;return Object(_.a)(this,a),(e=r.apply(this,arguments)).size=t,e}return Object(C.a)(a,[{key:"iterator",value:function(){var t=Object(bn.a)(mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(bf))}function yf(e){return gf(Object(bn.a)(mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(vf.f)(e));case 1:case"end":return t.stop()}}),t)}))),e.length)}function Of(e){if(!Object(mf.e)(e))throw new Error("The argument to zip() must be an object or array.");var t;if(Array.isArray(e))for(var n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(var r in e)t=null==t?e[r].size:Math.min(t,e[r].size);return gf(Object(bn.a)(mn.a.mark((function t(){var n;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(mf.c)(e,(function(e){if(e instanceof bf)return{value:e.iterator(),recurse:!1};if(Object(mf.e)(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}));case 2:return n=t.sent,t.abrupt("return",Object(vf.g)(n,vf.c.SHORTEST));case 4:case"end":return t.stop()}}),t)}))),t)}function kf(e){if(null===e)return null;var t=e[0];return Object(mf.a)(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof S.id?S.Lh(e):S.Uh(e)}(e),recurse:!1}:{value:null,recurse:!0}}bf.MAX_BUFFER_SIZE=1e4;var wf=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this)).input=e,r}return Object(C.a)(n,[{key:"iterator",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.input.iterator();case 2:return t=e.sent,n=t.decodeUTF8(),r=n.split("\n").map((function(e){return e.endsWith("\r")&&(e=e.slice(0,-1)),e})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(bf),xf='"',jf=Symbol("out"),Sf=Symbol("field"),_f=Symbol("quote"),Cf=Symbol("quoteafterquote"),Ef=Symbol("quoteinquote"),Nf=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;return Object(_.a)(this,n),(a=t.call(this)).input=e,a.hasHeader=!0,a.fullColumnNames=null,a.columnNamesValidated=!1,a.columnConfigs=null,a.configuredColumnsOnly=!1,a.delimiter=",",a.delimWhitespace=!1,a.base=new wf(e),r||(r={}),a.hasHeader=!1!==r.hasHeader,a.fullColumnNames=r.columnNames,a.columnConfigs=r.columnConfigs,a.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(S.qi.assert(null==r.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),a.delimWhitespace=!0,a.delimiter=" "):a.delimiter=r.delimiter?r.delimiter:",",a}return Object(C.a)(n,[{key:"columnNames",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.columnNamesValidated){e.next=3;break}return e.next=3,this.setColumnNames();case 3:return e.abrupt("return",this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setColumnNames",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r,a,i,o,s=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeReadHeaderLine();case 2:if(t=e.sent,this.fullColumnNames||t){e.next=7;break}throw new Error("Column names must be provided if there is no header line.");case 7:this.fullColumnNames&&t&&S.qi.assert(t.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+s.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."}));case 8:if(this.fullColumnNames||(this.fullColumnNames=t),n=this.fullColumnNames.reduce((function(e,t){return e[t]=e[t]+1||1,e}),{}),r=Object.keys(n).filter((function(e){return n[e]>1})),S.qi.assert(0===r.length,(function(){return"Duplicate column names found: "+r.toString()})),!this.columnConfigs){e.next=22;break}a=0,i=Object.keys(this.columnConfigs);case 14:if(!(a<i.length)){e.next=22;break}if(o=i[a],-1!==this.fullColumnNames.indexOf(o)){e.next=19;break}throw new Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");case 19:a++,e.next=14;break;case 22:this.columnNamesValidated=!0;case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"maybeReadHeaderLine",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r,a;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasHeader){e.next=14;break}return e.next=3,this.base.iterator();case 3:return t=e.sent,e.next=6,t.next();case 6:if(!(n=e.sent).done){e.next=9;break}throw new Error("No data was found for CSV parsing.");case 9:return r=n.value,a=this.parseRow(r,!1),e.abrupt("return",a);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iterator",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.columnNamesValidated){e.next=3;break}return e.next=3,this.setColumnNames();case 3:return e.next=5,this.base.iterator();case 5:return t=e.sent,this.hasHeader&&(t=t.skip(1)),e.abrupt("return",t.map((function(e){return n.makeDataElement(e)})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makeDataElement",value:function(e){for(var t=this.parseRow(e),n={},r={},a=0;a<this.fullColumnNames.length;a++){var i=this.fullColumnNames[a],o=this.columnConfigs?this.columnConfigs[i]:null;if(!this.configuredColumnsOnly||o){var s=t[a],c=null;if(""===s)if(o&&void 0!==o.default)c=o.default;else{if(o&&(o.required||o.isLabel))throw new Error("Required column ".concat(i," is empty in this line: ").concat(e));c=void 0}else{var u=Number(s);if(isNaN(u))c=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){default:c=u;break;case"int32":c=Math.floor(u);break;case"bool":c=this.getBoolean(s)}else c=u}o&&o.isLabel?r[i]=c:n[i]=c}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}},{key:"getBoolean",value:function(e){return"1"===e||"true"===e.toLowerCase()?1:0}},{key:"parseRow",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0,a=e.length,i=jf,o=0;o<a;o++)switch(i){case jf:switch(e.charAt(o)){case xf:r=o+1,i=_f;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),i=jf;break;default:i=Sf,r=o}break;case Sf:if(e.charAt(o)===this.delimiter)n.push(e.substring(r,o)),i=jf,r=o+1;break;case _f:if(e.charAt(o)===xf)i=Cf;break;case Cf:switch(e.charAt(o)){case this.delimiter:n.push(e.substring(r,o-1)),i=jf,r=o+1;break;case xf:i=_f;break;default:i=Ef}break;case Ef:if(e.charAt(o)===xf)i=_f}if(i===Cf?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}}]),n}(bf),Tf=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;Object(_.a)(this,n),(r=t.call(this)).microphoneConfig=e,r.isClosed=!1,r.fftSize=e.fftSize||1024;var a=Math.log2(r.fftSize);if(r.fftSize<0||a<4||a>14||!Number.isInteger(a))throw new Error("Invalid fftSize: it must be a power of 2 between "+"2 to 4 and 2 to 14, but got ".concat(r.fftSize));if(r.numFrames=e.numFramesPerSpectrogram||43,r.sampleRateHz=e.sampleRateHz,r.columnTruncateLength=e.columnTruncateLength||r.fftSize,r.audioTrackConstraints=e.audioTrackConstraints,r.smoothingTimeConstant=e.smoothingTimeConstant||0,r.includeSpectrogram=!1!==e.includeSpectrogram,r.includeWaveform=!0===e.includeWaveform,!r.includeSpectrogram&&!r.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return r}return Object(C.a)(n,[{key:"summary",value:function(){return"microphone"}},{key:"start",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1});case 3:this.stream=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error thrown while initializing video stream: ".concat(e.t0.message));case 9:if(this.stream){e.next=11;break}throw new Error("Could not obtain audio from microphone.");case 11:if(t=window.AudioContext||window.webkitAudioContext,this.audioContext=new t,this.sampleRateHz){e.next=17;break}this.sampleRateHz=this.audioContext.sampleRate,e.next=19;break;case 17:if(this.audioContext.sampleRate===this.sampleRateHz){e.next=19;break}throw new Error("Mismatch in sampling rate: "+"Expected: ".concat(this.sampleRateHz,"; ")+"Actual: ".concat(this.audioContext.sampleRate));case 19:return n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),e.abrupt("return");case 27:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r,a,i;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.next=4,this.getAudioData();case 4:return r=e.sent,this.includeSpectrogram&&(a=this.flattenQueue(r.freqDataQueue),t=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(r.timeDataQueue),n=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),e.abrupt("return",{value:{spectrogram:t,waveform:n},done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"capture",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAudioData",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r,a=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=0,e.abrupt("return",new Promise((function(e){var i=setInterval((function(){a.includeSpectrogram&&(a.analyser.getFloatFrequencyData(a.freqData),a.freqData[0]===-1/0&&e({freqDataQueue:t,timeDataQueue:n}),t.push(a.freqData.slice(0,a.columnTruncateLength))),a.includeWaveform&&(a.analyser.getFloatTimeDomainData(a.timeData),n.push(a.timeData.slice())),++r===a.numFrames&&(clearInterval(i),e({freqDataQueue:t,timeDataQueue:n}))}),a.fftSize/a.sampleRateHz*1e3)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}},{key:"toArray",value:function(){throw new Error("Can not convert infinite audio stream to array.")}},{key:"getSampleRate",value:function(){return this.sampleRateHz}},{key:"flattenQueue",value:function(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n}},{key:"getTensorFromAudioDataArray",value:function(e,t){var n=new Float32Array(S.qi.sizeFromShape(t));return n.set(e,n.length-e.length),Object(S.Uh)(n,t)}}],[{key:"create",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,r,a=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},!Object(S.Me)().get("IS_NODE")){e.next=3;break}throw new Error("microphone API is only supported in browser environment.");case 3:return r=new n(t),e.next=6,r.start();case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(vf.a),If=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;if(Object(_.a)(this,n),(a=t.call(this)).webcamVideoElement=e,a.webcamConfig=r,a.isClosed=!0,a.resize=!1,a.needToResize())if(a.resize=!0,a.cropSize=[a.webcamConfig.resizeHeight,a.webcamConfig.resizeWidth],a.cropBoxInd=Object(S.Vh)([0],"int32"),a.webcamConfig.centerCrop){var i=1*a.webcamConfig.resizeWidth/a.webcamVideoElement.width,o=1*a.webcamConfig.resizeHeight/a.webcamVideoElement.height,s=(1-i)/2,c=(1-o)/2,u=s+i,l=o+c;a.cropBox=Object(S.Wh)([c,s,l,u],[1,4])}else a.cropBox=Object(S.Wh)([0,0,1,1],[1,4]);return a}return Object(C.a)(n,[{key:"summary",value:function(){return"webcam"}},{key:"start",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.webcamConfig.facingMode&&S.qi.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: ".concat(t.webcamConfig.facingMode,". ")+"Please provide 'user' or 'environment'"})),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}});case 4:this.stream=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message="Error thrown while initializing video stream: ".concat(e.t0.message),e.t0;case 11:if(this.stream){e.next=13;break}throw new Error("Could not obtain video from webcam.");case 13:try{this.webcamVideoElement.srcObject=this.stream}catch(n){console.log(n),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,e.abrupt("return",new Promise((function(e){t.webcamVideoElement.onloadedmetadata=function(){e()}})));case 17:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:e.prev=2,t=S.Vd.fromPixels(this.webcamVideoElement),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(e.t0)));case 9:if(!this.resize){e.next=22;break}return e.prev=10,e.abrupt("return",{value:this.cropAndResizeFrame(t),done:!1});case 14:throw e.prev=14,e.t1=e.catch(10),new Error("Error thrown cropping the video: ".concat(e.t1.message));case 17:return e.prev=17,t.dispose(),e.finish(17);case 20:e.next=23;break;case 22:return e.abrupt("return",{value:t,done:!1});case 23:case"end":return e.stop()}}),e,this,[[2,6],[10,14,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"needToResize",value:function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}},{key:"cropAndResizeFrame",value:function(e){var t=this;return Object(S.di)((function(){var n,r=e.toFloat().expandDims(0),a=(n=S.qf.cropAndResize(r,t.cropBox,t.cropBoxInd,t.cropSize,"bilinear")).shape;return n.reshape(a.slice(1))}))}},{key:"capture",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()}));try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}},{key:"toArray",value:function(){throw new Error("Can not convert infinite video stream to array.")}}],[{key:"create",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var r,a,i=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},!Object(S.Me)().get("IS_NODE")){e.next=3;break}throw new Error("tf.data.webcam is only supported in browser environment.");case 3:if(t){e.next=9;break}if(t=document.createElement("video"),r.resizeWidth&&r.resizeHeight){e.next=7;break}throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");case 7:t.width=r.resizeWidth,t.height=r.resizeHeight;case 9:return a=new n(t,r),e.next=12,a.start();case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(vf.a),Af=function e(){Object(_.a)(this,e)},Mf=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_.a)(this,n),(r=t.call(this)).file=e,r.options=a,S.qi.assert(e instanceof Uint8Array||!!Object(S.Me)().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),r.offset=a.offset||0,r.chunkSize=a.chunkSize||1048576,r}return Object(C.a)(n,[{key:"summary",value:function(){return"FileChunks ".concat(this.file)}},{key:"next",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=new Promise((function(e,t){var r=n.offset+n.chunkSize;if(n.file instanceof Uint8Array)e(new Uint8Array(n.file.slice(n.offset,r)));else{var a=new FileReader;a.onload=function(n){var r=a.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(r)},a.onabort=function(e){return t(new Error("Aborted"))},a.onerror=function(e){return t(new Error(e.type))};var i=n.file.slice(n.offset,r);a.readAsArrayBuffer(i)}n.offset=r})),e.next=5,t;case 5:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(406).a);function Pf(e){return Rf.apply(this,arguments)}function Rf(){return Rf=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o,s=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},"string"===typeof t?r=t:(r=t.url,a=Df(t)),e.next=4,S.qi.fetch(r,a);case 4:if(!(i=e.sent).ok){e.next=14;break}return e.t0=Uint8Array,e.next=9,i.arrayBuffer();case 9:return e.t1=e.sent,o=new e.t0(e.t1),e.abrupt("return",new Mf(o,n));case 14:throw new Error(i.statusText);case 15:case"end":return e.stop()}}),e)}))),Rf.apply(this,arguments)}var Df=function(e){return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};function Ff(e){return"string"===typeof e&&"file://"===e.substr(0,7)}var Lf=function(e){Object(E.a)(r,e);var t=Object(N.a)(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_.a)(this,r),(n=t.call(this)).input=e,n.options=a,n}return Object(C.a)(r,[{key:"iterator",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ff(this.input)&&Object(S.Me)().get("IS_NODE")&&(t=n(547),this.input=t.readFileSync(this.input.substr(7))),e.abrupt("return",new Mf(this.input,this.options));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(Af),zf=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_.a)(this,n),(r=t.call(this)).url=e,r.fileOptions=a,r}return Object(C.a)(n,[{key:"iterator",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ff(this.url)){e.next=4;break}return e.abrupt("return",new Lf(this.url,this.fileOptions).iterator());case 4:return e.abrupt("return",Pf(this.url,this.fileOptions));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Af);function qf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Nf(new zf(e),t)}function Vf(e){var t=Object(vf.e)(e);return gf(Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))))}function Bf(e){return gf(Object(bn.a)(mn.a.mark((function t(){var n;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,t.abrupt("return",Object(vf.e)((function(){return n.next()})));case 4:case"end":return t.stop()}}),t)}))))}function Uf(e,t){return Wf.apply(this,arguments)}function Wf(){return(Wf=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",If.create(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gf(e){return Hf.apply(this,arguments)}function Hf(){return(Hf=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tf.create(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kf="2.8.6";function Xf(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&S.qi.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var Qf=S.yf.whereImpl,Yf=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new S.Q(Object(P.a)(e),Object(S.Le)()),e}return Object(C.a)(n,[{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,Object(S.Me)().get("IS_NODE")&&S.Ld.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&S.qi.isString(n[0])){var a=n.map((function(e){return S.qi.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r){this.data.set(e,{values:t,dtype:r,refCount:1})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return S.Ld.mergeRealAndImagArrays(a,i)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return S.qi.decodeString(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(S.Wd)(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return Object(S.Le)().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensorInfos;null!=t&&(this.disposeData(t.real.dataId),this.disposeData(t.imag.dataId)),this.data.delete(e)}}},{key:"disposeIntermediateTensorInfo",value:function(e){var t=e.dataId;if(this.data.has(t)){var n=this.data.get(t);n.refCount--,n.refCount<1&&this.disposeData(t)}}},{key:"time",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.qi.now(),t(),r=S.qi.now()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){Xf([e],"where");var t=this.readSync(e.dataId);return Qf(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"epsilon",this).call(this)}}]),n}(S.Cb);function Zf(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(Xf(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var c=o,u=c.data.get(s.dataId).values,l=S.qi.sizeFromShape(s.shape),f=n||s.dtype,d=S.qi.getArrayFromDType(f,l),p=0;p<l;++p)d[p]=t(u[p],i);return c.makeTensorInfo(s.shape,f,d)}}function Jf(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(Xf(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var c=o,u=c.data.get(s.dataId).values,l=n||s.dtype,f=t(u,l,i);return c.makeTensorInfo(s.shape,l,f)}}Object(S.Rg)("cpu",(function(){return new Yf}),1);var $f=Zf(S.bb,(function(e){return e>=0?e:Math.exp(e)-1})),ed={kernelName:S.bb,backendName:"cpu",kernelFunc:$f};function td(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var nd={kernelName:S.xb,backendName:"cpu",kernelFunc:td};function rd(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;Xf([a],"leakyRelu");for(var o=S.qi.sizeFromShape(a.shape),s=n.data.get(a.dataId).values,c=S.qi.getTypedArrayFromDType("float32",o),u=0;u<s.length;u++)c[u]=s[u]<0?i*s[u]:s[u];return n.makeTensorInfo(a.shape,"float32",c)}var ad={kernelName:S.Fb,backendName:"cpu",kernelFunc:rd};function id(e){return function(t,n,r,a,i){var o=S.Ld.assertAndGetBroadcastShape(t,n),s=o.length,c=S.qi.computeStrides(o),u=S.qi.sizeFromShape(o),l=S.qi.getTypedArrayFromDType(i,u),f=t.length,d=n.length,p=S.qi.computeStrides(t),h=S.qi.computeStrides(n),v=S.Ld.getBroadcastDims(t,o),m=S.Ld.getBroadcastDims(n,o);if(v.length+m.length===0)for(var b=0;b<l.length;++b)l[b]=e(r[b%r.length],a[b%a.length]);else for(var g=function(t){var n=S.qi.indexToLoc(t,s,c),i=n.slice(-f);v.forEach((function(e){return i[e]=0}));var o=S.qi.locToIndex(i,f,p),u=n.slice(-d);m.forEach((function(e){return u[e]=0}));var b=S.qi.locToIndex(u,d,h);l[t]=e(r[o],a[b])},y=0;y<l.length;++y)g(y);return[l,o]}}var od=id((function(e,t){return e<0?t*e:e}));function sd(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;Xf([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=od(r.shape,a.shape,i,o,r.dtype),c=Object(A.a)(s,2),u=c[0],l=c[1];return n.makeTensorInfo(l,r.dtype,u)}var cd={kernelName:S.rc,backendName:"cpu",kernelFunc:sd},ud=Zf(S.Ac,(function(e){return Math.max(0,e)})),ld={kernelName:S.Ac,backendName:"cpu",kernelFunc:ud},fd=Zf(S.Bc,(function(e){return Math.min(Math.max(0,e),6)})),dd={kernelName:S.Bc,backendName:"cpu",kernelFunc:fd};function pd(e,t,n,r,a){if("linear"===n)return td({inputs:{x:t},backend:e});if("relu"===n)return ud({inputs:{x:t},backend:e});if("elu"===n)return $f({inputs:{x:t},backend:e});if("relu6"===n)return fd({inputs:{x:t},backend:e});if("prelu"===n)return sd({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return rd({inputs:{x:t},backend:e,attrs:{alpha:a}});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function hd(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var vd={kernelName:S.D,backendName:"cpu",kernelFunc:hd};function md(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=md(e,t,"float32"),a=md(e,t,"float32");return hd({inputs:{real:r,imag:a},backend:e})}var i=S.qi.makeZerosTypedArray(S.qi.sizeFromShape(t),n);return e.makeTensorInfo(t,n,i)}function bd(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var gd={kernelName:S.wc,backendName:"cpu",kernelFunc:bd};function yd(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return td({inputs:{x:a},backend:n});var o=md(n,a.shape,a.dtype),s=yd({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),c=hd({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}if("complex64"===a.dtype){var u=bd({inputs:{input:a},backend:n}),l=yd({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),l}if(!S.qi.hasEncodingLoss(a.dtype,i)){var f=td({inputs:{x:a},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}if("int32"===i){var d=n.data.get(a.dataId).values,p=Int32Array.from(d);return n.makeTensorInfo(a.shape,"int32",p)}if("bool"===i){var h=n.data.get(a.dataId).values,v=S.qi.toTypedArray([0],a.dtype),m=id((function(e,t){return e!==t?1:0}))(a.shape,[],h,v,"bool"),b=Object(A.a)(m,2),g=b[0],y=b[1];return n.makeTensorInfo(y,"bool",g)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var Od={kernelName:S.A,backendName:"cpu",kernelFunc:yd};function kd(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,c=i;Xf([o,s],e);var u=c.data.get(o.dataId).values,l=c.data.get(s.dataId).values,f=r||o.dtype,d=t(o.shape,s.shape,u,l,f),p=Object(A.a)(d,2),h=p[0],v=p[1];return c.makeTensorInfo(v,f,h)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,c=i;if("complex64"===o.dtype||"complex64"===s.dtype){var u=yd({inputs:{x:o},backend:c,attrs:{dtype:"complex64"}}),l=c.data.get(u.dataId),f=l.complexTensorInfos.real,d=l.complexTensorInfos.imag,p=c.data.get(f.dataId).values,h=c.data.get(d.dataId).values,v=yd({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),m=c.data.get(v.dataId),b=m.complexTensorInfos.real,g=m.complexTensorInfos.imag,y=c.data.get(b.dataId).values,O=c.data.get(g.dataId).values,k=n(o.shape,s.shape,p,h,y,O),w=Object(A.a)(k,3),x=w[0],j=w[1],S=w[2],_=c.makeTensorInfo(S,"float32",x),C=c.makeTensorInfo(S,"float32",j),E=hd({inputs:{real:_,imag:C},backend:c});return c.disposeIntermediateTensorInfo(u),c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(_),c.disposeIntermediateTensorInfo(C),E}var N=c.data.get(o.dataId).values,T=c.data.get(s.dataId).values,I=r||o.dtype,M=t(o.shape,s.shape,N,T,I),P=Object(A.a)(M,2),R=P[0],D=P[1];return c.makeTensorInfo(D,I,R)}}function wd(e){return function(t,n,r,a,i,o){var s=S.Ld.assertAndGetBroadcastShape(t,n),c=S.qi.sizeFromShape(s),u=s.length,l=S.qi.computeStrides(s),f=S.qi.getTypedArrayFromDType("float32",c),d=S.qi.getTypedArrayFromDType("float32",c),p=S.Ld.getBroadcastDims(t,s),h=S.Ld.getBroadcastDims(n,s),v=S.Ld.mergeRealAndImagArrays(r,a),m=S.Ld.mergeRealAndImagArrays(i,o),b=t.length,g=S.qi.computeStrides(t),y=n.length,O=S.qi.computeStrides(n);if(p.length+h.length===0)for(var k=0;k<f.length;k++){var w=k%v.length,x=k%m.length,j=e(v[2*w],v[2*w+1],m[2*x],m[2*x+1]);f[k]=j.real,d[k]=j.imag}else for(var _=function(t){var n=S.qi.indexToLoc(t,u,l),r=n.slice(-b);p.forEach((function(e){return r[e]=0}));var a=S.qi.locToIndex(r,b,g),i=n.slice(-y);h.forEach((function(e){return i[e]=0}));var o=S.qi.locToIndex(i,y,O),s=e(v[2*a],v[2*a+1],m[2*o],m[2*o+1]);f[t]=s.real,d[t]=s.imag},C=0;C<f.length;C++)_(C);return[f,d,s]}}var xd=id((function(e,t){return e+t})),jd=wd((function(e,t,n,r){return{real:e+n,imag:t+r}})),Sd=kd(S.h,xd,jd),_d={kernelName:S.h,backendName:"cpu",kernelFunc:Sd};function Cd(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=S.qi.sizeFromShape(a.shape),s=S.qi.inferFromImplicitShape(i,o),c=S.qi.sizeFromShape(s);S.qi.assert(o===c,(function(){return"The new shape (".concat(s,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var u=n.data.get(a.dataId);if(null!=u.complexTensorInfos){var l=u.complexTensorInfos.real,f=u.complexTensorInfos.imag;l.shape=s,f.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var Ed={kernelName:S.Cc,backendName:"cpu",kernelFunc:Cd};function Nd(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;Xf([a,i],"matMul");var c=a.shape.length,u=i.shape.length,l=o?a.shape[c-2]:a.shape[c-1],f=s?i.shape[u-1]:i.shape[u-2],d=o?a.shape[c-1]:a.shape[c-2],p=s?i.shape[u-2]:i.shape[u-1],h=a.shape.slice(0,-2),v=i.shape.slice(0,-2),m=S.qi.sizeFromShape(h),b=S.qi.sizeFromShape(v),g=m===b||1===m||1===b;S.qi.assert(c>=2&&u>=2&&g,(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+"batch dimensions of (".concat(h,") and (").concat(v,").")}));var y=(m>b?a.shape.slice(0,-2):i.shape.slice(0,-2)).concat([d,p]);S.qi.assert(l===f,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(f,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));for(var O=s?[b,p,f]:[b,f,p],k=Cd({inputs:{x:a},backend:n,attrs:{shape:o?[m,l,d]:[m,d,l]}}),w=Cd({inputs:{x:i},backend:n,attrs:{shape:O}}),x=o?k.shape[1]:k.shape[2],j=o?k.shape[2]:k.shape[1],_=s?w.shape[1]:w.shape[2],C=Math.max(m,b),E=n.data.get(k.dataId).values,N=n.data.get(w.dataId).values,T=S.qi.computeStrides(k.shape),I=S.qi.computeStrides(w.shape),M=o?[T[0],1,T[1]]:[T[0],T[1],1],P=Object(A.a)(M,3),R=P[0],D=P[1],F=P[2],L=s?[1,I[1],I[0]]:[I[1],1,I[0]],z=Object(A.a)(L,3),q=z[0],V=z[1],B=z[2],U=j*_,W=Object(S.Wd)([C,j,_],k.dtype),G=W.values,H=n.blockSize,K=0;K<C;K++)for(var X=0;X<j;X+=H)for(var Q=0;Q<_;Q+=H)for(var Y=0;Y<x;Y+=H)for(var Z=Math.min(X+H,j),J=Math.min(Q+H,_),$=Math.min(Y+H,x),ee=X;ee<Z;ee++)for(var te=Q;te<J;te++){for(var ne=0,re=Y;re<$;re++){var ae=Math.min(K,m-1)*R,ie=Math.min(K,b-1)*B;ne+=E[ae+ee*D+re*F]*N[re*q+te*V+ie]}G[K*U+(ee*_+te)]+=ne}return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(y,W.dtype,W.values)}var Td={kernelName:S.w,backendName:"cpu",kernelFunc:Nd};var Id={kernelName:S.sd,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,c=a.b,u=a.bias,l=a.preluActivationWeights,f=o.transposeA,d=o.transposeB,p=o.activation,h=o.leakyreluAlpha,v=[];t=Nd({inputs:{a:s,b:c},attrs:{transposeA:f,transposeB:d},backend:i}),u&&(n=Sd({inputs:{a:t,b:u},backend:i}),v.push(t),t=n),p&&(r=pd(i,t,p,l,h),v.push(t),t=r);for(var m=0,b=v;m<b.length;m++){var g=b[m];i.disposeIntermediateTensorInfo(g)}return t}};function Ad(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var Md={kernelName:S.a,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;Xf(t,"abs");var r=new Float32Array(S.qi.sizeFromShape(t.shape));return r=Ad(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,"float32")}},Pd=Zf(S.b,(function(e){return Math.acos(e)})),Rd={kernelName:S.b,backendName:"cpu",kernelFunc:Pd},Dd=Zf(S.c,(function(e){return Math.acosh(e)})),Fd={kernelName:S.c,backendName:"cpu",kernelFunc:Dd};var Ld={kernelName:S.i,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;Xf(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=Object(S.Wd)(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var c=a[s],u=0;u<o.length;u++)o[u]+=c[u];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function zd(e,t,n,r,a){for(var i=t.length,o=S.qi.sizeFromShape(t),s=S.qi.computeStrides(t),c=S.qi.computeStrides(a),u=S.qi.getTypedArrayFromDType(n,S.qi.sizeFromShape(a)),l=0;l<o;++l){for(var f=S.qi.indexToLoc(l,i,s),d=new Array(f.length),p=0;p<d.length;p++)d[p]=f[r[p]];u[S.qi.locToIndex(d,i,c)]=e[l]}return u}function qd(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;Xf(a,"transpose");for(var o=a.shape.length,s=new Array(o),c=0;c<s.length;c++)s[c]=a.shape[i[c]];var u=zd(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(u,s,a.dtype),shape:s,dtype:a.dtype}}var Vd={kernelName:S.md,backendName:"cpu",kernelFunc:qd};var Bd={kernelName:S.j,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;Xf(a,"all");var s=S.qi.parseAxisParam(i,a.shape),c=s,u=S.Ld.getAxesPermutation(c,a.shape.length),l=a;null!=u&&(l=qd({inputs:{x:a},backend:n,attrs:{perm:u}}),c=S.Ld.getInnerMostAxes(c.length,a.shape.length)),S.Ld.assertAxesAreInnerMostDims("all",c,l.shape.length);for(var f=S.Ld.computeOutAndReduceShapes(l.shape,c),d=Object(A.a)(f,2),p=d[0],h=d[1],v=S.qi.sizeFromShape(h),m=S.qi.makeZerosTypedArray(S.qi.sizeFromShape(p),l.dtype),b=n.data.get(l.dataId).values,g=0;g<m.length;++g){for(var y=g*v,O=b[y],k=0;k<v;++k){var w=b[y+k];O=O&&w}m[g]=O}null!=u&&n.disposeIntermediateTensorInfo(l);var x=n.makeTensorInfo(p,l.dtype,m);if(o){var j=Cd({inputs:{x:x},backend:n,attrs:{shape:S.Ld.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(x),j}return x}};var Ud={kernelName:S.k,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;Xf(a,"any");var s=S.qi.parseAxisParam(i,a.shape),c=s,u=S.Ld.getAxesPermutation(c,a.shape.length),l=a;null!=u&&(l=qd({inputs:{x:a},backend:n,attrs:{perm:u}}),c=S.Ld.getInnerMostAxes(c.length,a.shape.length)),S.Ld.assertAxesAreInnerMostDims("any",c,l.shape.length);for(var f=S.Ld.computeOutAndReduceShapes(l.shape,c),d=Object(A.a)(f,2),p=d[0],h=d[1],v=S.qi.sizeFromShape(h),m=S.qi.makeZerosTypedArray(S.qi.sizeFromShape(p),l.dtype),b=n.data.get(l.dataId).values,g=0;g<m.length;++g){for(var y=g*v,O=b[y],k=0;k<v;++k){var w=b[y+k];O=O||w}m[g]=O}null!=u&&n.disposeIntermediateTensorInfo(l);var x=n.makeTensorInfo(p,l.dtype,m);if(o){var j=Cd({inputs:{x:x},backend:n,attrs:{shape:S.Ld.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(x),j}return x}};var Wd={kernelName:S.l,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;Xf(a,"argMax");var o=S.qi.parseAxisParam(i,a.shape),s=S.Ld.getAxesPermutation(o,a.shape.length),c=a,u=[];null!=s&&(c=qd({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(c),o=S.Ld.getInnerMostAxes(o.length,c.shape.length)),o=[o[0]],S.Ld.assertAxesAreInnerMostDims("argMax",o,c.shape.length);for(var l=S.Ld.computeOutAndReduceShapes(c.shape,o),f=Object(A.a)(l,2),d=f[0],p=f[1],h=S.qi.sizeFromShape(d),v=S.qi.makeZerosTypedArray(h,"int32"),m=S.qi.sizeFromShape(p),b=n.data.get(c.dataId).values,g=0;g<v.length;++g){for(var y=g*m,O=b[y],k=0,w=0;w<m;++w){var x=b[y+w];x>O&&(O=x,k=w)}v[g]=k}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",v)}};var Gd={kernelName:S.m,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;Xf(a,"argMin");var o=S.qi.parseAxisParam(i,a.shape),s=S.Ld.getAxesPermutation(o,a.shape.length),c=a,u=[];null!=s&&(c=qd({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(c),o=S.Ld.getInnerMostAxes(o.length,c.shape.length)),o=[o[0]],S.Ld.assertAxesAreInnerMostDims("argMin",o,c.shape.length);for(var l=S.Ld.computeOutAndReduceShapes(c.shape,o),f=Object(A.a)(l,2),d=f[0],p=f[1],h=S.qi.sizeFromShape(d),v=S.qi.makeZerosTypedArray(h,"int32"),m=S.qi.sizeFromShape(p),b=n.data.get(c.dataId).values,g=0;g<v.length;++g){for(var y=g*m,O=b[y],k=0,w=0;w<m;++w){var x=b[y+w];x<O&&(O=x,k=w)}v[g]=k}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",v)}},Hd=Zf(S.n,(function(e){return Math.asin(e)})),Kd={kernelName:S.n,backendName:"cpu",kernelFunc:Hd},Xd=Zf(S.o,(function(e){return Math.asinh(e)})),Qd={kernelName:S.o,backendName:"cpu",kernelFunc:Xd},Yd=Zf(S.p,(function(e){return Math.atan(e)})),Zd={kernelName:S.p,backendName:"cpu",kernelFunc:Yd},Jd=id((function(e,t){return Math.atan2(e,t)})),$d=kd(S.q,Jd),ep={kernelName:S.q,backendName:"cpu",kernelFunc:$d},tp=Zf(S.r,(function(e){return Math.atanh(e)})),np={kernelName:S.r,backendName:"cpu",kernelFunc:tp};function rp(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,c=a.dilationHeight,u=a.dilationWidth,l=a.effectiveFilterHeight,f=a.effectiveFilterWidth,d=a.padInfo.top,p=a.padInfo.left,h="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Object(S.Wd)(a.outShape,n),m=v.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],g=a.outShape[2]*a.outShape[3],y=a.outShape[3],O=0;O<a.batchSize;++O)for(var k=O*b,w=O*r[0],x=0;x<a.inChannels;++x)for(var j=0;j<a.outHeight;++j)for(var _=j*o-d,C=Math.max(0,_),E=Math.min(a.inHeight,l+_),N=k+j*g,T=0;T<a.outWidth;++T){for(var I=T*s-p,A=Math.max(0,I),M=Math.min(a.inWidth,f+I),P=h,R=0,D=0,F=C;F<E;F+=c){for(var L=w+F*r[1],z=A;z<M;z+=u){var q=e[L+z*r[2]+x];"max"===i&&q>P?P=q:"avg"===i&&(R+=q,D++)}if(isNaN(P))break}m[N+T*y+x]="avg"===i?R/D:P}return v}function ap(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Object(S.Wd)(r.outShape,"int32"),s=r.strideHeight,c=r.strideWidth,u=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,v=Object(S.Wd)(t,n,e),m=0;m<r.batchSize;++m)for(var b=0;b<r.inChannels;++b)for(var g=0;g<r.outHeight;++g){for(var y=g*s-p,O=y;O<0;)O+=u;for(var k=Math.min(r.inHeight,f+y),w=0;w<r.outWidth;++w){for(var x=w*c-h,j=x;j<0;)j+=l;for(var _=Math.min(r.inWidth,d+x),C=Number.NEGATIVE_INFINITY,E=-1,N=O;N<k;N+=u)for(var T=N-y,I=j;I<_;I+=l){var A=I-x,M=v.get(m,N,I,b);M>C&&(C=M,E=a?i?((m*r.inHeight+N)*r.inWidth+I)*r.inChannels+b:(N*r.inWidth+I)*r.inChannels+b:T*d+A)}o.set(E,m,g,w,b)}}return o}function ip(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,c=a.strideWidth,u=a.dilationDepth,l=a.dilationHeight,f=a.dilationWidth,d=a.effectiveFilterDepth,p=a.effectiveFilterHeight,h=a.effectiveFilterWidth,v=a.padInfo.front,m=a.padInfo.top,b=a.padInfo.left,g="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=Object(S.Wd)(a.outShape,n),O=y.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],x=a.outShape[3]*a.outShape[4],j=a.outShape[4],_=0;_<a.batchSize;++_)for(var C=_*k,E=_*r[0],N=0;N<a.inChannels;++N)for(var T=0;T<a.outDepth;++T){for(var I=T*o-v,A=I;A<0;)A+=u;for(var M=Math.min(a.inDepth,d+I),P=C+T*w,R=0;R<a.outHeight;++R){for(var D=R*s-m,F=D;F<0;)F+=l;for(var L=Math.min(a.inHeight,p+D),z=P+R*x,q=0;q<a.outWidth;++q){for(var V=q*c-b,B=V;B<0;)B+=f;for(var U=Math.min(a.inWidth,h+V),W=z+q*j,G=g,H=0,K=0,X=A;X<M;X+=u){for(var Q=E+X*r[1],Y=F;Y<L;Y+=l){for(var Z=Q+Y*r[2],J=B;J<U;J+=f){var $=e[Z+J*r[3]+N];if("max"===i&&$>G?G=$:"avg"===i&&(H+=$,K++),isNaN(G))break}if(isNaN(G))break}if(isNaN(G))break}O[W+N]="avg"===i?H/K:G}}}return y}var op={kernelName:S.s,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Xf(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,c=r.dimRoundingMode;S.qi.assert(S.Ld.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var u,l=S.Ld.computePool2DInfo(a.shape,i,o,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&S.qi.arraysEqual(l.inShape,l.outShape))u=td({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,d=S.qi.computeStrides(a.shape),p=rp(f,a.shape,a.dtype,d,l,"avg");u=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return u}};var sp={kernelName:S.t,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,c=r.dimRoundingMode,u=r.dataFormat,l=r.dilations;Xf(a,"avgPool3d");var f=l;null==f&&(f=[1,1,1]);var d=S.Ld.computePool3DInfo(a.shape,i,o,f,s,c,u),p=ip(n.data.get(a.dataId).values,a.shape,a.dtype,S.qi.computeStrides(a.shape),d,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}};var cp={kernelName:S.u,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,c=r.pad,u=r.dilations,l=r.dimRoundingMode;Xf([a,i],"avgPool3DGrad");for(var f=S.Ld.computePool3DInfo(i.shape,o,s,u,c,l),d=f.strideDepth,p=f.strideHeight,h=f.strideWidth,v=f.filterDepth,m=f.filterHeight,b=f.filterWidth,g=f.dilationDepth,y=f.dilationHeight,O=f.dilationWidth,k=f.effectiveFilterDepth,w=f.effectiveFilterHeight,x=f.effectiveFilterWidth,j=k-1-f.padInfo.front,_=x-1-f.padInfo.left,C=w-1-f.padInfo.top,E=Object(S.Wd)(i.shape,"float32"),N=1/(v*m*b),T=n.bufferSync(a),I=0;I<f.batchSize;++I)for(var A=0;A<f.inChannels;++A)for(var M=0;M<f.inDepth;++M)for(var P=0;P<f.inHeight;++P)for(var R=0;R<f.inWidth;++R){for(var D=M-j,F=P-C,L=R-_,z=0,q=0;q<k;q+=g){var V=(D+q)/d;if(!(V<0||V>=f.outDepth||Math.floor(V)!==V))for(var B=0;B<w;B+=y){var U=(F+B)/p;if(!(U<0||U>=f.outHeight||Math.floor(U)!==U))for(var W=0;W<x;W+=O){var G=(L+W)/h;if(!(G<0||G>=f.outWidth||Math.floor(G)!==G))z+=T.get(I,V,U,G,A)}}}E.set(z*N,I,M,P,R,A)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var up={kernelName:S.v,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Xf([a,i],"avgPoolGrad");for(var s=r.filterSize,c=r.strides,u=r.pad,l=S.Ld.computePool2DInfo(o.shape,s,c,1,u),f=l.strideHeight,d=l.strideWidth,p=l.filterHeight,h=l.filterWidth,v=l.dilationHeight,m=l.dilationWidth,b=l.effectiveFilterHeight,g=l.effectiveFilterWidth,y=g-1-l.padInfo.left,O=b-1-l.padInfo.top,k=Object(S.Wd)(o.shape,"float32"),w=1/(p*h),x=n.data.get(a.dataId).values,j=Object(S.Wd)(a.shape,"float32",x),_=0;_<l.batchSize;++_)for(var C=0;C<l.inChannels;++C)for(var E=0;E<l.inHeight;++E)for(var N=0;N<l.inWidth;++N){for(var T=E-O,I=N-y,A=0,M=0;M<b;M+=v){var P=(T+M)/f;if(!(P<0||P>=l.outHeight||Math.floor(P)!==P))for(var R=0;R<g;R+=m){var D=(I+R)/d;if(!(D<0||D>=l.outWidth||Math.floor(D)!==D))A+=j.get(_,P,D,C)}}k.set(A*w,_,E,N,C)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var lp={kernelName:S.pb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,c=t.variance;S.qi.assert(s.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),S.qi.assert(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),S.qi.assert(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),Xf([a,s,c,i,o],"batchNorm");var u=r.varianceEpsilon;null==u&&(u=.001);for(var l=n.data.get(a.dataId).values,f=n.data.get(s.dataId).values,d=n.data.get(c.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),h=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(l.length),m=h.length,b=p.length,g=d.length,y=f.length,O=0,k=0,w=0,x=0,j=0;j<l.length;++j)v[j]=h[O++]+(l[j]-f[k++])*p[w++]/Math.sqrt(d[x++]+u),O>=m&&(O=0),k>=y&&(k=0),w>=b&&(w=0),x>=g&&(x=0);return n.makeTensorInfo(a.shape,a.dtype,v)}};function fp(e,t,n,r,a){var i=S.zh.isSliceContinous(r,t,n),o=S.qi.sizeFromShape(n),s=S.qi.computeStrides(r);if(i){var c=S.zh.computeFlatOffset(t,s);return"string"===a?e.slice(c,c+o):e.subarray(c,c+o)}for(var u="string"===a?S.Ld.fromUint8ToStringArray(e):e,l=Object(S.Wd)(r,a,u),f=Object(S.Wd)(n,a),d=0;d<f.size;++d){var p=f.indexToLoc(d),h=p.map((function(e,n){return e+t[n]}));f.set.apply(f,[l.get.apply(l,Object(I.a)(h))].concat(Object(I.a)(p)))}return"string"===a?S.Ld.fromStringArrayToUint8(f.values):f.values}function dp(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;Xf(a,"slice");var s=S.zh.parseSliceParams(a,i,o),c=Object(A.a)(s,2),u=c[0],l=c[1];S.zh.assertParamsValid(a,u,l);var f=fp(n.data.get(a.dataId).values,u,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,f)}var pp={kernelName:S.Tc,backendName:"cpu",kernelFunc:dp};var hp={kernelName:S.x,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Xf([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),c=S.Ld.getReshaped(a.shape,i,s),u=S.Ld.getPermuted(c.length,i.length),l=S.Ld.getReshapedPermuted(a.shape,i,s),f=S.Ld.getSliceBeginCoords(o,i.length),d=S.Ld.getSliceSize(l,o,i.length),p=Cd({inputs:{x:a},backend:n,attrs:{shape:c}}),h=qd({inputs:{x:p},backend:n,attrs:{perm:u}}),v=Cd({inputs:{x:h},backend:n,attrs:{shape:l}}),m=dp({inputs:{x:v},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),m}};function vp(e,t,n,r,a){for(var i=S.qi.sizeFromShape(r),o=S.qi.makeZerosTypedArray(a,n),s=0;s<e.length;s++){var c=e[s];if(c<0)throw new Error("Input x must be non-negative!");c>=a||(o[c]+=i>0?t[s]:1)}return o}function mp(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=Object(S.Wd)([a,n],t.dtype),s=0;s<a;s++)for(var c=0;c<i;c++){var u=e.get(s,c);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,s,u):t.size>0?o.set(o.get(s,u)+t.get(s,c),s,u):o.set(o.get(s,u)+1,s,u))}return o}var bp={kernelName:S.y,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=vp(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};function gp(e){return function(t,n,r){for(var a=S.qi.getTypedArrayFromDType(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}var yp=gp((function(e){return Math.ceil(e)})),Op=Jf(S.B,yp),kp={kernelName:S.B,backendName:"cpu",kernelFunc:Op},wp=Zf(S.C,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),xp={kernelName:S.C,backendName:"cpu",kernelFunc:wp},jp={kernelName:S.E,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(S.qi.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,u=0;u<s.length;u++){var l=s[u],f=c[u];r[u]=Math.hypot(l,f)}return n.makeOutput(r,t.shape,"float32")}};function Sp(e,t,n,r){var a=S.qi.getArrayFromDType(n,S.qi.sizeFromShape(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=S.qi.sizeFromShape(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?S.Ld.fromUint8ToStringArray(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var c=s*t[1]+o,u=0;u<e.shape[1];++u)a[c+u]=r[i++];o+=e.shape[1]}))}return a}function _p(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Cp={kernelName:S.yb,backendName:"cpu",kernelFunc:_p};function Ep(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=S.qi.parseAxisParam(r,t[0].shape)[0],i=S.Ld.computeOutShape(t.map((function(e){return e.shape})),a);if(0===S.qi.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return S.qi.sizeFromShape(e.shape)>0}));if(1===o.length)return td({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));if(S.Ld.assertParamsConsistent(s,a),"complex64"===o[0].dtype){var c=o.map((function(e){return bd({inputs:{input:e},backend:n})})),u=o.map((function(e){return _p({inputs:{input:e},backend:n})})),l=Ep({inputs:c,backend:n,attrs:{axis:a}}),f=Ep({inputs:u,backend:n,attrs:{axis:a}}),d=hd({inputs:{real:l,imag:f},backend:n});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),d}var p=o.map((function(e){var t=S.qi.sizeFromShape(e.shape.slice(a));return Cd({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),h=p.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));i=S.Ld.computeOutShape(p.map((function(e){return e.shape})),1);var v=1===p[0].shape[0],m=Sp(h,i,t[0].dtype,v),b=S.Ld.computeOutShape(o.map((function(e){return e.shape})),a),g=n.makeTensorInfo(b,t[0].dtype,m);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var Np={kernelName:S.F,backendName:"cpu",kernelFunc:Ep};function Tp(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,c=r.dataFormat,u=r.dilations,l=r.dimRoundingMode;Xf([a,i],"conv2d");for(var f=S.Ld.convertConv2DDataFormat(c),d=S.Ld.computeConv2DInfo(a.shape,i.shape,o,u,s,l,!1,f),p=d.filterHeight,h=d.filterWidth,v=d.dilationHeight,m=d.dilationWidth,b=d.padInfo.left,g=d.padInfo.top,y="channelsLast"===d.dataFormat,O=new S.jd(d.outShape,a.dtype),k=S.qi.computeStrides(a.shape),w=S.qi.computeStrides(i.shape),x=k[0],j=y?k[1]:k[2],_=y?k[2]:1,C=y?1:k[1],E=O.strides[0],N=y?O.strides[1]:O.strides[2],T=y?O.strides[2]:1,I=y?1:O.strides[1],A=n.data.get(a.dataId).values,M=n.data.get(i.dataId).values,P=O.values,R=0;R<d.batchSize;++R)for(var D=R*x,F=R*E,L=0;L<d.outHeight;++L)for(var z=F+L*N,q=L*d.strideHeight-g,V=0;V<p;++V){var B=q+V*v;if(!(B<0||B>=d.inHeight))for(var U=V*w[0],W=D+B*j,G=0;G<d.outWidth;++G)for(var H=z+G*T,K=G*d.strideWidth-b,X=0;X<h;++X){var Q=K+X*m;if(!(Q<0||Q>=d.inWidth))for(var Y=W+Q*_,Z=U+X*w[1],J=0;J<d.inChannels;++J){for(var $=A[Y+J*C],ee=0;ee<d.outChannels;++ee)P[H+ee*I]+=$*M[Z+ee];Z+=d.outChannels}}}return n.makeTensorInfo(O.shape,O.dtype,P)}var Ip={kernelName:S.G,backendName:"cpu",kernelFunc:Tp};var Ap={kernelName:S.H,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,c=r.dataFormat,u=r.dimRoundingMode,l=r.filterShape;Xf([a,i],"conv2dBackpropFilter");for(var f=S.Ld.convertConv2DDataFormat(c),d=S.Ld.computeConv2DInfo(a.shape,l,o,1,s,u,!1,f),p=d.strideHeight,h=d.strideWidth,v=d.filterHeight,m=d.filterWidth,b="channelsLast"===d.dataFormat,g=new S.jd(d.filterShape,"float32"),y=d.padInfo.left,O=d.padInfo.top,k=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,x=new S.jd(a.shape,a.dtype,k),j=new S.jd(i.shape,i.dtype,w),_=0;_<v;++_)for(var C=Math.max(0,Math.ceil((O-_)/p)),E=Math.min(d.outHeight,(d.inHeight+O-_)/p),N=0;N<m;++N)for(var T=Math.max(0,Math.ceil((y-N)/h)),I=Math.min(d.outWidth,(d.inWidth+y-N)/h),A=0;A<d.inChannels;++A)for(var M=0;M<d.outChannels;++M){for(var P=0,R=0;R<d.batchSize;++R)for(var D=C;D<E;++D)for(var F=_+D*p-O,L=T;L<I;++L){var z=N+L*h-y;P+=b?x.get(R,F,z,A)*j.get(R,D,L,M):x.get(R,A,F,z)*j.get(R,M,D,L)}g.set(P,_,N,A,M)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var Mp={kernelName:S.I,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,c=r.pad,u=r.dataFormat,l=r.dimRoundingMode;Xf([a,i],"conv2dBackpropInput");var f=S.qi.computeStrides(i.shape),d=S.qi.computeStrides(a.shape),p=S.Ld.convertConv2DDataFormat(u),h=S.Ld.computeConv2DInfo(o,i.shape,s,1,c,l,!1,p),v=new S.jd(h.inShape,"float32"),m=v.values,b=n.data.get(a.dataId).values,g=n.data.get(i.dataId).values,y=Object(A.a)(f,3),O=y[0],k=y[1],w=y[2],x=h.batchSize,j=h.filterHeight,_=h.filterWidth,C=h.inChannels,E=h.inHeight,N=h.inWidth,T=h.outChannels,I=h.outHeight,M=h.outWidth,P=h.strideHeight,R=h.strideWidth;p=h.dataFormat;for(var D=j-1-h.padInfo.top,F=_-1-h.padInfo.left,L="channelsLast"===p,z=v.strides[0],q=L?v.strides[1]:v.strides[2],V=L?v.strides[2]:1,B=L?1:v.strides[1],U=d[0],W=L?d[1]:d[2],G=L?d[2]:1,H=L?1:d[1],K=0;K<x;++K)for(var X=0;X<C;++X)for(var Q=0;Q<E;++Q)for(var Y=Q-D,Z=Math.max(0,Math.ceil(Y/P)),J=Math.min(I,(j+Y)/P),$=0;$<N;++$){for(var ee=$-F,te=Math.max(0,Math.ceil(ee/R)),ne=Math.min(M,(_+ee)/R),re=0,ae=Z;ae<J;++ae)for(var ie=ae*P-Y,oe=te;oe<ne;++oe)for(var se=U*K+W*ae+G*oe,ce=O*(j-1-ie)+k*(_-1-(oe*R-ee))+w*X,ue=0;ue<T;++ue){re+=b[se+H*ue]*g[ce+ue]}m[z*K+q*Q+V*$+B*X]=re}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var Pp={kernelName:S.J,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,c=r.dilations;Xf([a,i],"conv3d");for(var u=S.Ld.computeConv3DInfo(a.shape,i.shape,o,c,s),l=u.filterDepth,f=u.filterHeight,d=u.filterWidth,p=u.dilationDepth,h=u.dilationHeight,v=u.dilationWidth,m=u.padInfo,b=m.front,g=m.left,y=m.top,O=new S.jd(u.outShape,a.dtype),k=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,x=O.values,j=S.qi.computeStrides(a.shape),_=S.qi.computeStrides(i.shape),C=0;C<u.batchSize;++C)for(var E=C*j[0],N=C*O.strides[0],T=0;T<u.outDepth;++T)for(var I=N+T*O.strides[1],A=T*u.strideDepth-b,M=0;M<l;++M){var P=A+M*p;if(!(P<0||P>=u.inDepth))for(var R=M*_[0],D=E+P*j[1],F=0;F<u.outHeight;++F)for(var L=I+F*O.strides[2],z=F*u.strideHeight-y,q=0;q<f;++q){var V=z+q*h;if(!(V<0||V>=u.inHeight))for(var B=R+q*_[1],U=D+V*j[2],W=0;W<u.outWidth;++W)for(var G=L+W*u.outChannels,H=W*u.strideWidth-g,K=0;K<d;++K){var X=H+K*v;if(!(X<0||X>=u.inWidth))for(var Q=B+K*_[2],Y=U+X*u.inChannels,Z=Q,J=0;J<u.inChannels;++J){for(var $=k[Y+J],ee=0;ee<u.outChannels;++ee)x[G+ee]+=$*w[Z+ee];Z+=u.outChannels}}}}return n.makeTensorInfo(O.shape,O.dtype,O.values)}};var Rp={kernelName:S.K,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,c=r.filterShape;Xf([a,i],"conv3dBackpropFilterV2");for(var u=S.qi.computeStrides(a.shape),l=S.qi.computeStrides(i.shape),f=S.Ld.computeConv3DInfo(a.shape,c,o,1,s),d=f.strideDepth,p=f.strideHeight,h=f.strideWidth,v=f.filterDepth,m=f.filterHeight,b=f.filterWidth,g=new S.jd(f.filterShape,"float32"),y=g.values,O=Object(A.a)(g.strides,4),k=O[0],w=O[1],x=O[2],j=O[3],_=n.data.get(i.dataId).values,C=Object(A.a)(l,4),E=C[0],N=C[1],T=C[2],I=C[3],M=n.data.get(a.dataId).values,P=Object(A.a)(u,4),R=P[0],D=P[1],F=P[2],L=P[3],z=f.padInfo.front,q=f.padInfo.left,V=f.padInfo.top,B=0;B<v;++B)for(var U=Math.max(0,Math.ceil((z-B)/d)),W=Math.min(f.outDepth,(f.inDepth+z-B)/d),G=B*k,H=0;H<m;++H)for(var K=Math.max(0,Math.ceil((V-H)/p)),X=Math.min(f.outHeight,(f.inHeight+V-H)/p),Q=H*w+G,Y=0;Y<b;++Y)for(var Z=Math.max(0,Math.ceil((q-Y)/h)),J=Math.min(f.outWidth,(f.inWidth+q-Y)/h),$=Y*x+Q,ee=0;ee<f.inChannels;++ee)for(var te=ee*j+$,ne=0;ne<f.outChannels;++ne){for(var re=0,ae=0;ae<f.batchSize;++ae)for(var ie=ae*R,oe=ae*E,se=U;se<W;++se)for(var ce=(B+se*d-z)*D+ie,ue=se*N+oe,le=K;le<X;++le)for(var fe=(H+le*p-V)*F+ce,de=le*T+ue,pe=Z;pe<J;++pe){var he=pe*I+de;re+=M[(Y+pe*h-q)*L+fe+ee]*_[he+ne]}y[te+ne]=re}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var Dp={kernelName:S.L,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,c=r.inputShape;Xf([a],"conv3dBackpropInputV2");for(var u=S.qi.computeStrides(a.shape),l=S.qi.computeStrides(i.shape),f=S.Ld.computeConv3DInfo(c,i.shape,s,1,o),d=new S.jd(f.inShape,"float32"),p=d.values,h=Object(A.a)(d.strides,4),v=h[0],m=h[1],b=h[2],g=h[3],y=n.data.get(a.dataId).values,O=Object(A.a)(u,4),k=O[0],w=O[1],x=O[2],j=O[3],_=n.data.get(i.dataId).values,C=Object(A.a)(l,4),E=C[0],N=C[1],T=C[2],I=C[3],M=f.batchSize,P=f.filterDepth,R=f.filterHeight,D=f.filterWidth,F=f.inChannels,L=f.inDepth,z=f.inHeight,q=f.inWidth,V=f.outChannels,B=f.outDepth,U=f.outHeight,W=f.outWidth,G=f.strideDepth,H=f.strideHeight,K=f.strideWidth,X=P-1-f.padInfo.front,Q=R-1-f.padInfo.top,Y=D-1-f.padInfo.left,Z=0;Z<M;++Z)for(var J=0;J<F;++J)for(var $=0;$<L;++$)for(var ee=$-X,te=Math.max(0,Math.ceil(ee/G)),ne=Math.min(B,(P+ee)/G),re=0;re<z;++re)for(var ae=re-Q,ie=Math.max(0,Math.ceil(ae/H)),oe=Math.min(U,(R+ae)/H),se=0;se<q;++se){for(var ce=se-Y,ue=Math.max(0,Math.ceil(ce/K)),le=Math.min(W,(D+ce)/K),fe=0,de=te;de<ne;++de)for(var pe=de*G-ee,he=ie;he<oe;++he)for(var ve=he*H-ae,me=ue;me<le;++me)for(var be=k*Z+w*de+x*he+j*me,ge=E*(P-1-pe)+N*(R-1-ve)+T*(D-1-(me*K-ce))+I*J,ye=0;ye<V;++ye){fe+=y[be+ye]*_[ge+ye]}p[v*Z+m*$+b*re+g*se+J]=fe}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},Fp=Zf(S.M,(function(e){return Math.cos(e)})),Lp={kernelName:S.M,backendName:"cpu",kernelFunc:Fp},zp=Zf(S.N,(function(e){return Math.cosh(e)})),qp={kernelName:S.N,backendName:"cpu",kernelFunc:zp};var Vp={kernelName:S.O,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,c=r.method,u=r.extrapolationValue,l=Object(A.a)(a.shape,4),f=l[0],d=l[1],p=l[2],h=l[3],v=i.shape[0],m=Object(A.a)(s,2),b=m[0],g=m[1],y=Object(S.Wd)([v,b,g,h],"float32"),O=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,w=n.data.get(a.dataId).values,x=S.qi.computeStrides(a.shape),j=S.qi.computeStrides(y.shape),_=0;_<v;_++){var C=4*_,E=O[C],N=O[C+1],T=O[C+2],I=O[C+3],M=k[_];if(!(M>=f))for(var P=b>1?(T-E)*(d-1)/(b-1):0,R=g>1?(I-N)*(p-1)/(g-1):0,D=0;D<b;D++){var F=b>1?E*(d-1)+D*P:.5*(E+T)*(d-1);if(F<0||F>d-1)for(var L=0;L<g;L++)for(var z=0;z<h;z++){var q=z+L*j[2]+D*j[1]+_*j[0];y.values[q]=u}else if("bilinear"===c)for(var V=Math.floor(F),B=Math.ceil(F),U=F-V,W=0;W<g;W++){var G=g>1?N*(p-1)+W*R:.5*(N+I)*(p-1);if(G<0||G>p-1)for(var H=0;H<h;H++){var K=H+W*j[2]+D*j[1]+_*j[0];y.values[K]=u}else for(var X=Math.floor(G),Q=Math.ceil(G),Y=G-X,Z=0;Z<h;Z++){var J=Z+X*x[2]+V*x[1]+M*x[0],$=w[J],ee=w[J=Z+Q*x[2]+V*x[1]+M*x[0]],te=w[J=Z+X*x[2]+B*x[1]+M*x[0]],ne=$+(ee-$)*Y,re=te+(w[J=Z+Q*x[2]+B*x[1]+M*x[0]]-te)*Y;J=Z+W*j[2]+D*j[1]+_*j[0],y.values[J]=ne+(re-ne)*U}}else for(var ae=0;ae<g;++ae){var ie=g>1?N*(p-1)+ae*R:.5*(N+I)*(p-1);if(ie<0||ie>p-1)for(var oe=0;oe<h;oe++){var se=oe+ae*j[2]+D*j[1]+_*j[0];y.values[se]=u}else for(var ce=Math.round(ie),ue=Math.round(F),le=0;le<h;le++){var fe=le+ce*x[2]+ue*x[1]+M*x[0],de=le+ae*j[2]+D*j[1]+_*j[0];y.values[de]=w[fe]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var Bp={kernelName:S.P,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;Xf(a,"cumsum");var c=S.Ld.getAxesPermutation([i],a.shape.length),u=a;null!=c&&(u=qd({inputs:{x:a},backend:n,attrs:{perm:c}}));var l=S.Ld.getInnerMostAxes(1,a.shape.length)[0];if(l!==u.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(u.shape.length-1," but got axis=").concat(l));for(var f=Object(S.pi)(u.dtype,"int32"),d=S.qi.makeZerosTypedArray(S.qi.sizeFromShape(u.shape),f),p=n.data.get(u.dataId).values,h=u.shape[u.shape.length-1],v=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},m=0;m<p.length;m+=h)for(var b=0;b<h;b++){var g=v(m,b);if(0===b)d[g]=o?0:p[g];else{var y=v(m,b-1);d[g]=o?p[y]+d[y]:p[g]+d[y]}}var O=n.makeTensorInfo(u.shape,f,d);if(null!=c){var k=qd({inputs:{x:O},backend:n,attrs:{perm:S.Ld.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(O),n.disposeIntermediateTensorInfo(u),k}return O}};var Up={kernelName:S.R,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var c=vp(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}if(2===a.shape.length){var u=mp(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var Wp={kernelName:S.S,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;S.qi.assert("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)})),S.qi.assert(i>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(i)}));for(var s=a.shape[0],c=a.shape[1],u=a.shape[2],l=a.shape[3],f=c*i,d=u*i,p=l/(i*i),h=n.data.get(a.dataId).values,v=new Float32Array(s*f*d*p),m=0,b=0;b<s;++b)for(var g=0;g<f;++g)for(var y=Math.floor(g/i),O=g%i,k=0;k<d;++k)for(var w=Math.floor(k/i),x=(O*i+k%i)*p,j=0;j<p;++j){var _=j+x+l*(w+u*(y+c*b));v[m++]=h[_]}return n.makeTensorInfo([s,f,d,p],a.dtype,v)}};function Gp(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,c=r.dilations,u=r.dimRoundingMode;Xf([a,i],"depthwiseConv2DNative");var l=S.qi.computeStrides(a.shape),f=S.qi.computeStrides(i.shape),d=c;null==d&&(d=[1,1]),S.qi.assert(S.Ld.eitherStridesOrDilationsAreOne(o,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(d,"'")}));for(var p=S.Ld.computeConv2DInfo(a.shape,i.shape,o,d,s,u,!0),h=p.filterHeight,v=p.filterWidth,m=p.dilationHeight,b=p.dilationWidth,g=p.padInfo,y=g.left,O=g.top,k=p.outChannels/p.inChannels,w=new S.jd(p.outShape,a.dtype),x=n.data.get(a.dataId).values,j=n.data.get(i.dataId).values,_=w.values,C=0;C<p.batchSize;++C)for(var E=C*l[0],N=C*w.strides[0],T=0;T<p.outHeight;++T)for(var I=N+T*w.strides[1],A=T*p.strideHeight-y,M=0;M<h;++M){var P=A+M*m;if(!(P<0||P>=p.inHeight))for(var R=M*f[0],D=E+P*l[1],F=0;F<p.outWidth;++F)for(var L=I+F*w.strides[2],z=F*p.strideWidth-O,q=0;q<v;++q){var V=z+q*b;if(!(V<0||V>=p.inWidth))for(var B=R+q*f[1],U=D+V*p.inChannels,W=L,G=B,H=0;H<p.inChannels;++H){for(var K=x[U+H],X=0;X<k;++X)_[W+X]+=K*j[G+X];W+=k,G+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var Hp={kernelName:S.T,backendName:"cpu",kernelFunc:Gp};var Kp={kernelName:S.U,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,c=r.pad,u=r.dimRoundingMode,l=r.filterShape;Xf([a,i],"depthwiseConv2dNativeBackpropFilter");for(var f=S.Ld.computeConv2DInfo(a.shape,l,o,s,c,u,!0),d=f.strideHeight,p=f.strideWidth,h=f.filterHeight,v=f.filterWidth,m=new S.jd(f.filterShape,"float32"),b=f.padInfo.left,g=f.padInfo.top,y=f.outChannels/f.inChannels,O=n.data.get(a.dataId).values,k=new S.jd(a.shape,a.dtype,O),w=n.data.get(i.dataId).values,x=new S.jd(i.shape,i.dtype,w),j=0;j<h;++j)for(var _=Math.max(0,Math.ceil((g-j)/d)),C=Math.min(f.outHeight,(f.inHeight+g-j)/d),E=0;E<v;++E)for(var N=Math.max(0,Math.ceil((b-E)/p)),T=Math.min(f.outWidth,(f.inWidth+b-E)/p),I=0;I<f.outChannels;++I){for(var A=Math.trunc(I/y),M=I%y,P=0,R=0;R<f.batchSize;++R)for(var D=_;D<C;++D)for(var F=j+D*d-g,L=N;L<T;++L){var z=E+L*p-b;P+=k.get(R,F,z,A)*x.get(R,D,L,I)}m.set(P,j,E,A,M)}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var Xp={kernelName:S.V,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,c=r.pad,u=r.dimRoundingMode,l=r.inputShape;Xf([a,i],"depthwiseConv2DNativeBackpropInput");for(var f=S.qi.computeStrides(a.shape),d=S.qi.computeStrides(i.shape),p=S.Ld.computeConv2DInfo(l,i.shape,o,s,c,u,!0),h=new S.jd(p.inShape,"float32"),v=h.values,m=Object(A.a)(h.strides,3),b=m[0],g=m[1],y=m[2],O=n.data.get(a.dataId).values,k=Object(A.a)(f,3),w=k[0],x=k[1],j=k[2],_=n.data.get(i.dataId).values,C=Object(A.a)(d,3),E=C[0],N=C[1],T=C[2],I=p.batchSize,M=p.filterHeight,P=p.filterWidth,R=p.inChannels,D=p.inHeight,F=p.inWidth,L=p.outChannels,z=p.outHeight,q=p.outWidth,V=p.strideHeight,B=p.strideWidth,U=M-1-p.padInfo.top,W=P-1-p.padInfo.left,G=L/R,H=0;H<I;++H)for(var K=0;K<R;++K)for(var X=0;X<D;++X)for(var Q=X-U,Y=Math.max(0,Math.ceil(Q/V)),Z=Math.min(z,(M+Q)/V),J=0;J<F;++J){for(var $=J-W,ee=Math.max(0,Math.ceil($/B)),te=Math.min(q,(P+$)/B),ne=0,re=Y;re<Z;++re)for(var ae=re*V-Q,ie=ee;ie<te;++ie)for(var oe=w*H+x*re+j*ie,se=E*(M-1-ae)+N*(P-1-(ie*B-$))+T*K,ce=0;ce<G;++ce){ne+=O[oe+(K*G+ce)]*_[se+ce]}v[b*H+g*X+y*J+K]=ne}return n.makeTensorInfo(h.shape,h.dtype,h.values)}};var Qp={kernelName:S.W,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=S.qi.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,o=Object(S.Wd)([a,a],r.dtype),s=o.values,c=0;c<i.length;c++)s[c*a+c]=i[c];var u=[].concat(Object(I.a)(r.shape),Object(I.a)(r.shape));return n.makeTensorInfo(u,o.dtype,o.values)}},Yp={kernelName:S.X,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,c=r.dilations,u=n,l=u.data.get(a.dataId).values,f=a.shape.length,d=u.data.get(i.dataId).values,p=i.shape.length,h=S.Ld.computeDilation2DInfo(a.shape,i.shape,o,s,"NHWC",c),v=h.batchSize,m=h.inHeight,b=h.inWidth,g=h.inChannels,y=h.outHeight,O=h.outWidth,k=h.padInfo,w=h.strideHeight,x=h.strideWidth,j=h.filterHeight,_=h.filterWidth,C=h.dilationHeight,E=h.dilationWidth,N=h.outShape,T=S.qi.sizeFromShape(N),I=N.length,A=S.qi.getArrayFromDType(a.dtype,T),M=0;M<v;++M)for(var P=0;P<y;++P)for(var R=P*w-k.top,D=0;D<O;++D)for(var F=D*x-k.left,L=0;L<g;++L){for(var z=Number.MIN_SAFE_INTEGER,q=0;q<j;++q){var V=R+q*C;if(V>=0&&V<m)for(var B=0;B<_;++B){var U=F+B*E;if(U>=0&&U<b){var W=S.qi.locToIndex([M,V,U,L],f,S.qi.computeStrides(a.shape)),G=S.qi.locToIndex([q,B,L],p,S.qi.computeStrides(i.shape)),H=l[W]+d[G];H>z&&(z=H)}}}A[S.qi.locToIndex([M,P,D,L],I,S.qi.computeStrides(N))]=z}return{dataId:u.write(S.qi.toTypedArray(A,a.dtype),N,a.dtype),shape:N,dtype:a.dtype}}},Zp={kernelName:S.Y,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,c=r.pad,u=r.dilations,l=n,f=S.qi.toNestedArray(a.shape,l.data.get(a.dataId).values),d=S.qi.toNestedArray(i.shape,l.data.get(i.dataId).values),p=S.Ld.computeDilation2DInfo(a.shape,i.shape,s,c,"NHWC",u),h=p.batchSize,v=p.inHeight,m=p.inWidth,b=p.inChannels,g=p.outHeight,y=p.outWidth,O=p.padInfo,k=p.strideHeight,w=p.strideWidth,x=p.filterHeight,j=p.filterWidth,_=p.dilationHeight,C=p.dilationWidth,E=p.outShape;S.qi.assert(o.rank===E.length,(function(){return"Error in ".concat(S.Y,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(o.rank)}));for(var N=S.qi.toNestedArray(E,l.data.get(o.dataId).values),T=S.qi.makeZerosNestedTypedArray(i.shape,i.dtype),I=0;I<h;++I)for(var A=0;A<g;++A)for(var M=A*k-O.top,P=0;P<y;++P)for(var R=P*w-O.left,D=0;D<b;++D){for(var F=Number.MIN_SAFE_INTEGER,L=0,z=0,q=0;q<x;++q){var V=M+q*_;if(V>=0&&V<v)for(var B=0;B<j;++B){var U=R+B*C;if(U>=0&&U<m){var W=f[I][V][U][D]+d[q][B][D];W>F&&(F=W,L=q,z=B)}}}T[L][z][D]+=N[I][A][P][D]}return{dataId:l.write(S.qi.toTypedArray(T,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Jp={kernelName:S.Z,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,c=r.pad,u=r.dilations,l=n,f=S.qi.toNestedArray(a.shape,l.data.get(a.dataId).values),d=S.qi.toNestedArray(i.shape,l.data.get(i.dataId).values),p=S.Ld.computeDilation2DInfo(a.shape,i.shape,s,c,"NHWC",u),h=p.batchSize,v=p.inHeight,m=p.inWidth,b=p.inChannels,g=p.outHeight,y=p.outWidth,O=p.padInfo,k=p.strideHeight,w=p.strideWidth,x=p.filterHeight,j=p.filterWidth,_=p.dilationHeight,C=p.dilationWidth,E=p.outShape;S.qi.assert(o.rank===E.length,(function(){return"Error in ".concat(S.Z,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(o.rank)}));for(var N=S.qi.toNestedArray(E,l.data.get(o.dataId).values),T=S.qi.makeZerosNestedTypedArray(a.shape,a.dtype),I=0;I<h;++I)for(var A=0;A<g;++A)for(var M=A*k-O.top,P=0;P<y;++P)for(var R=P*w-O.left,D=0;D<b;++D){for(var F=Number.MIN_SAFE_INTEGER,L=M<0?0:M,z=R<0?0:R,q=0;q<x;++q){var V=M+q*_;if(V>=0&&V<v)for(var B=0;B<j;++B){var U=R+B*C;if(U>=0&&U<m){var W=f[I][V][U][D]+d[q][B][D];W>F&&(F=W,L=V,z=U)}}}T[I][L][z][D]+=N[I][A][P][D]}return{dataId:l.write(S.qi.toTypedArray(T,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};var $p={kernelName:S.cb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;Xf([r,a],"eluGrad");for(var i=new Float32Array(S.qi.sizeFromShape(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,c=0;c<o.length;++c){var u=o[c];i[c]=u>=1?s[c]:s[c]*(u+1)}return n.makeTensorInfo(a.shape,"float32",i)}},eh=id((function(e,t){return e===t?1:0})),th=kd(S.eb,eh,null,"bool"),nh={kernelName:S.eb,backendName:"cpu",kernelFunc:th},rh=S.Ld.ERF_P,ah=S.Ld.ERF_A1,ih=S.Ld.ERF_A2,oh=S.Ld.ERF_A3,sh=S.Ld.ERF_A4,ch=S.Ld.ERF_A5,uh=Zf(S.fb,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+rh*n);return t*(1-((((ch*r+sh)*r+oh)*r+ih)*r+ah)*r*Math.exp(-n*n))})),lh={kernelName:S.fb,backendName:"cpu",kernelFunc:uh},fh=gp((function(e){return Math.exp(e)})),dh=Jf(S.gb,fh),ph={kernelName:S.gb,backendName:"cpu",kernelFunc:dh};function hh(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),c=i;return i<0&&(S.qi.assert(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),c=o+i+1),s.splice(c,0,1),Cd({inputs:{x:a},backend:n,attrs:{shape:s}})}var vh={kernelName:S.hb,backendName:"cpu",kernelFunc:hh},mh=gp((function(e){return Math.expm1(e)})),bh=Jf(S.ib,mh),gh={kernelName:S.ib,backendName:"cpu",kernelFunc:bh},yh=id((function(e,t){return e*t})),Oh=wd((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),kh=kd(S.dc,yh,Oh),wh={kernelName:S.dc,backendName:"cpu",kernelFunc:kh},xh=id((function(e,t){return e/t})),jh=kd(S.xc,xh),Sh={kernelName:S.xc,backendName:"cpu",kernelFunc:jh},_h=id((function(e,t){return e-t})),Ch=wd((function(e,t,n,r){return{real:e-n,imag:t-r}})),Eh=kd(S.ed,_h,Ch),Nh={kernelName:S.ed,backendName:"cpu",kernelFunc:Eh};function Th(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,c=o.complexTensorInfos.imag,u=[a,i],l=S.qi.sizeFromShape(u),f=S.qi.getTypedArrayFromDType("float32",l),d=S.qi.getTypedArrayFromDType("float32",l),p=0;p<a;p++){for(var h=dp({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,i]}}),v=dp({inputs:{x:c},backend:n,attrs:{begin:[p,0],size:[1,i]}}),m=hd({inputs:{real:h,imag:v},backend:n}),b=Ih(m,t,n),g=b.real,y=b.imag,O=S.Ld.mergeRealAndImagArrays(g,y),k=0;k<i;k++){var w=S.Ld.getComplexWithIndex(O,k);f[p*i+k]=w.real,d[p*i+k]=w.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m)}var x=n.makeTensorInfo(u,"float32",f),j=n.makeTensorInfo(u,"float32",d),_=hd({inputs:{real:x,imag:j},backend:n});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(j),_}function Ih(e,t,n){var r=S.qi.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((b=r)&b-1)){var s=Ah(i,o,r,t,n),c=[e.shape[0],e.shape[1]];if(t){var u=n.makeTensorInfo(c,"float32",s.real),l=n.makeTensorInfo(c,"float32",s.imag),f=n.makeTensorInfo([],"float32",S.qi.createScalarValue(r,"float32")),d=td({inputs:{x:f},backend:n}),p=Sh.kernelFunc({inputs:{a:u,b:f},backend:n}),h=Sh.kernelFunc({inputs:{a:l,b:d},backend:n}),v=n.data.get(p.dataId).values,m=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),{real:v,imag:m}}return s}var b,g=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var c=S.Ld.exponent(a*s,t,n),u=S.Ld.getComplexWithIndex(e,s);i+=u.real*c.real-u.imag*c.imag,o+=u.real*c.imag+u.imag*c.real}n&&(i/=t,o/=t),S.Ld.assignToTypedArray(r,i,o,a)}return r}(S.Ld.mergeRealAndImagArrays(i,o),r,t);return S.Ld.splitRealAndImagArrays(g)}function Ah(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=S.Ld.mergeRealAndImagArrays(e,t),o=n/2,s=S.Ld.complexWithEvenIndex(i),c=s.real,u=s.imag,l=[c.length],f=a.makeTensorInfo(l,"float32",c),d=a.makeTensorInfo(l,"float32",u),p=hd({inputs:{real:f,imag:d},backend:a}),h=S.Ld.complexWithOddIndex(i),v=h.real,m=h.imag,b=[v.length],g=a.makeTensorInfo(b,"float32",v),y=a.makeTensorInfo(b,"float32",m),O=hd({inputs:{real:g,imag:y},backend:a}),k=Ah(c,u,o,r,a),w=k.real,x=k.imag,j=[w.length],_=a.makeTensorInfo(j,"float32",w),C=a.makeTensorInfo(j,"float32",x),E=hd({inputs:{real:_,imag:C},backend:a}),N=Ah(v,m,o,r,a),T=N.real,I=N.imag,A=[T.length],M=a.makeTensorInfo(A,"float32",T),P=a.makeTensorInfo(A,"float32",I),R=hd({inputs:{real:M,imag:P},backend:a}),D=S.Ld.exponents(n,r),F=[D.real.length],L=a.makeTensorInfo(F,"float32",D.real),z=a.makeTensorInfo(F,"float32",D.imag),q=hd({inputs:{real:L,imag:z},backend:a}),V=kh({inputs:{a:q,b:R},backend:a}),B=Sd({inputs:{a:E,b:V},backend:a}),U=Eh({inputs:{a:E,b:V},backend:a}),W=bd({inputs:{input:B},backend:a}),G=bd({inputs:{input:U},backend:a}),H=_p({inputs:{input:B},backend:a}),K=_p({inputs:{input:U},backend:a}),X=Ep({inputs:[W,G],backend:a,attrs:{axis:0}}),Q=Ep({inputs:[H,K],backend:a,attrs:{axis:0}}),Y=a.data.get(X.dataId).values,Z=a.data.get(Q.dataId).values;return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(Q),{real:Y,imag:Z}}var Mh={kernelName:S.jb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=S.qi.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=Cd({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=Th(o,!1,n),c=Cd({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}};function Ph(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||S.qi.inferDtype(a),o=S.qi.getArrayFromDType(i,S.qi.sizeFromShape(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var Rh={kernelName:S.kb,backendName:"cpu",kernelFunc:Ph};var Dh={kernelName:S.lb,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=S.qi.getTypedArrayFromDType(r.dtype,S.qi.sizeFromShape(r.shape)),o=Object(A.a)(r.shape,4),s=o[0],c=o[1],u=o[2],l=o[3],f=a.data.get(r.dataId).values,d=0;d<s;d++)for(var p=d*u*c*l,h=0;h<c;h++)for(var v=h*(u*l),m=0;m<u;m++)for(var b=m*l,g=0;g<l;g++){var y=[s,h,m,g][2],O=Math.round(u-y),k=p+v+b+g,w=f[k];if(O>=0&&O<u)w=f[p+v+O*l+g];i[k]=w}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Fh=gp((function(e){return Math.floor(e)})),Lh=Jf(S.mb,Fh),zh={kernelName:S.mb,backendName:"cpu",kernelFunc:Lh},qh=id((function(e,t){return Math.floor(e/t)})),Vh=kd(S.nb,qh,null,"int32"),Bh={kernelName:S.nb,backendName:"cpu",kernelFunc:Vh};var Uh={kernelName:S.qb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,c=r.strides,u=r.pad,l=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,v=Tp({inputs:{x:a,filter:i},backend:n,attrs:{strides:c,pad:u,dataFormat:l,dilations:f,dimRoundingMode:d}});if(o){var m=v;v=Sd({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(p){var b=v;v=pd(n,v,p,s,h),n.disposeIntermediateTensorInfo(b)}return v}};var Wh={kernelName:S.rb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,c=r.strides,u=r.pad,l=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,v=Gp({inputs:{x:a,filter:i},backend:n,attrs:{strides:c,pad:u,dataFormat:l,dilations:f,dimRoundingMode:d}});if(o){var m=v;v=Sd({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(p){var b=v;v=pd(n,v,p,s,h),n.disposeIntermediateTensorInfo(b)}return v}};var Gh={kernelName:S.sb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=S.qi.sizeFromShape(r.shape),o=a.shape,s=o[o.length-1],c=S.Ld.prepareAndValidate(r,a),u=Object(A.a)(c,4),l=u[0],f=u[1],d=u[2],p=u[3];if(0===f)return n.makeTensorInfo(l,r.dtype,[]);for(var h=Object(S.Wd)([f,d],r.dtype),v=n.data.get(a.dataId).values,m=n.data.get(r.dataId).values,b=0;b<f;b++){for(var g=[],y=0,O=0;O<s;O++){var k=v[b*s+O];y+=k*p[O],g.push(k)}if(y<0||y>=i/d)throw new Error("Invalid indices: ".concat(g," does not index into ").concat(r.shape));for(var w=0;w<d;w++)h.values[b*d+w]=m[y*d+w]}return n.makeTensorInfo(l,h.dtype,h.values)}};function Hh(e,t,n){for(var r=Object(S.Wd)(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],c=t.locToIndex([o,s]);i[2]=t.values[c];var u=e.locToIndex(i);r.values[a]=e.values[u]}return r}var Kh={kernelName:S.tb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;Xf([a,i],"gatherV2");var c=s;null==s&&(c=0);var u=S.qi.sizeFromShape(i.shape),l=S.qi.parseAxisParam(o,a.shape)[0],f=S.Ld.segment_util.collectGatherOpShapeInfo(a,i,l,c),d=Cd({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),p=Cd({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,u/f.batchSize]}}),h=[f.batchSize,f.outerSize,u/f.batchSize,f.sliceSize],v=n.bufferSync(p),m=Hh(n.bufferSync(d),v,h);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.makeTensorInfo(f.outputShape,m.dtype,m.values)}},Xh=id((function(e,t){return e>t?1:0})),Qh=kd(S.ub,Xh,null,"bool"),Yh={kernelName:S.ub,backendName:"cpu",kernelFunc:Qh},Zh=id((function(e,t){return e>=t?1:0})),Jh=kd(S.vb,Zh,null,"bool"),$h={kernelName:S.vb,backendName:"cpu",kernelFunc:Jh};var ev={kernelName:S.wb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=S.qi.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=Cd({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=Th(o,!0,n),c=Cd({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}},tv=Zf(S.zb,(function(e){return Number.isFinite(e)?1:0}),"bool"),nv={kernelName:S.zb,backendName:"cpu",kernelFunc:tv},rv=Zf(S.Ab,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),av={kernelName:S.Ab,backendName:"cpu",kernelFunc:rv},iv=Zf(S.Bb,(function(e){return Number.isNaN(e)?1:0}),"bool"),ov={kernelName:S.Bb,backendName:"cpu",kernelFunc:iv},sv=id((function(e,t){return e<t?1:0})),cv=kd(S.Gb,sv,null,"bool"),uv={kernelName:S.Gb,backendName:"cpu",kernelFunc:cv},lv=id((function(e,t){return e<=t?1:0})),fv=kd(S.Hb,lv,null,"bool"),dv={kernelName:S.Hb,backendName:"cpu",kernelFunc:fv};function pv(e,t,n){var r=(t-e)/(n-1),a=S.qi.makeZerosTypedArray(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var hv={kernelName:S.Ib,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=pv(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},vv=gp((function(e){return Math.log(e)})),mv=Jf(S.Jb,vv),bv={kernelName:S.Jb,backendName:"cpu",kernelFunc:mv},gv=Zf(S.Kb,(function(e){return Math.log1p(e)})),yv={kernelName:S.Kb,backendName:"cpu",kernelFunc:gv},Ov=id((function(e,t){return e&&t})),kv=kd(S.Mb,Ov,null,"bool"),wv={kernelName:S.Mb,backendName:"cpu",kernelFunc:kv},xv=Zf(S.Nb,(function(e){return e?0:1}),"bool"),jv={kernelName:S.Nb,backendName:"cpu",kernelFunc:xv},Sv=id((function(e,t){return e||t})),_v=kd(S.Ob,Sv,null,"bool"),Cv={kernelName:S.Ob,backendName:"cpu",kernelFunc:_v};var Ev={kernelName:S.Db,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,c=r.beta;Xf(a,"LRN");var u=a.shape[3],l=u-1,f=n.data.get(a.dataId).values,d=S.qi.sizeFromShape(a.shape),p=new Float32Array(d);function h(e){for(var t=e%u,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,l),a=0;n<=r;n++){var o=f[n];a+=o*o}return a}for(var v=0;v<d;v++){var m=h(v),b=f[v]*Math.pow(o+s*m,-c);p[v]=b}return n.makeTensorInfo(a.shape,a.dtype,p)}};var Nv={kernelName:S.Eb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,c=r.bias,u=r.alpha,l=r.beta;Xf(o,"LRNGrad");for(var f=S.qi.sizeFromShape(o.shape),d=o.shape[3],p=n.data.get(o.dataId).values,h=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,m=new Float32Array(f),b=f,g=0;g<b;g++){for(var y=g%d,O=g-y+Math.max(0,y-s),k=g-y+Math.min(d,y+s+1),w=0,x=O;x<k;x++)w+=Math.pow(h[x],2);w=u*w+c;for(var j=O;j<k;j++){var _=-2*u*l*h[j]*v[g]/w;g===j&&(_+=Math.pow(w,-l)),_*=p[g],m[j]+=_}}return n.makeTensorInfo(o.shape,a.dtype,m)}};function Tv(e,t,n,r){for(var a=S.qi.getTypedArrayFromDType(r,S.qi.sizeFromShape(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],c=0;c<t;++c){var u=e[o+c];u>s&&(s=u)}a[i]=s}return a}function Iv(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,c=a.shape,u=c.length,l=S.qi.parseAxisParam(i,c),f=l,d=S.Ld.getAxesPermutation(f,u),p=s.data.get(a.dataId).values;if(null!=d){for(var h=new Array(u),v=0;v<h.length;v++)h[v]=c[d[v]];p=zd(p,c,a.dtype,d,h),f=S.Ld.getInnerMostAxes(f.length,u),c=h}Xf(a,"max"),S.Ld.assertAxesAreInnerMostDims("max",f,u);var m=S.Ld.computeOutAndReduceShapes(c,f),b=Object(A.a)(m,2),g=b[0],y=b[1],O=Tv(p,S.qi.sizeFromShape(y),g,a.dtype),k=s.write(O,g,a.dtype),w=g;o&&(w=S.Ld.expandShapeToKeepDim(g,l));return{dataId:k,shape:w,dtype:a.dtype}}var Av={kernelName:S.Pb,backendName:"cpu",kernelFunc:Iv},Mv=id((function(e,t){return Math.max(e,t)})),Pv=kd(S.Vb,Mv),Rv={kernelName:S.Vb,backendName:"cpu",kernelFunc:Pv};var Dv={kernelName:S.Qb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Xf(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,c=r.dimRoundingMode;S.qi.assert(S.Ld.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var u,l=S.Ld.computePool2DInfo(a.shape,i,o,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&S.qi.arraysEqual(l.inShape,l.outShape))u=td({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,d=S.qi.computeStrides(a.shape),p=rp(f,a.shape,a.dtype,d,l,"max");u=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return u}};var Fv={kernelName:S.Rb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,c=r.dimRoundingMode,u=r.dataFormat,l=r.dilations;Xf(a,"maxPool3d");var f=l;null==f&&(f=[1,1,1]);var d=S.Ld.computePool3DInfo(a.shape,i,o,f,s,c,u),p=ip(n.data.get(a.dataId).values,a.shape,a.dtype,S.qi.computeStrides(a.shape),d,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}};var Lv={kernelName:S.Sb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,c=r.pad,u=r.dilations,l=r.dimRoundingMode;Xf([a,i],"maxPool3DGrad");for(var f=S.Ld.computePool3DInfo(i.shape,o,s,u,c,l),d=function(e,t){for(var n=Object(S.Wd)(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,v=0;v<t.batchSize;++v)for(var m=0;m<t.inChannels;++m)for(var b=0;b<t.outDepth;++b){for(var g=b*r-d,y=g;y<0;)y+=o;for(var O=Math.min(t.inDepth,u+g),k=0;k<t.outHeight;++k){for(var w=k*a-p,x=w;x<0;)x+=s;for(var j=Math.min(t.inHeight,l+w),_=0;_<t.outWidth;++_){for(var C=_*i-h,E=C;E<0;)E+=c;for(var N=Math.min(t.inWidth,f+C),T=Number.NEGATIVE_INFINITY,I=-1,A=y;A<O;A+=o)for(var M=A-g,P=x;P<j;P+=s)for(var R=P-w,D=E;D<N;D+=c){var F=D-C,L=e.get(v,A,P,D,m);L>=T&&(T=L,I=M*l*f+R*l+F)}n.set(I,v,b,k,_,m)}}}return n}(n.bufferSync(i),f),p=f.strideDepth,h=f.strideHeight,v=f.strideWidth,m=f.dilationDepth,b=f.dilationHeight,g=f.dilationWidth,y=f.effectiveFilterDepth,O=f.effectiveFilterHeight,k=f.effectiveFilterWidth,w=y-1-f.padInfo.front,x=k-1-f.padInfo.left,j=O-1-f.padInfo.top,_=Object(S.Wd)(i.shape,"float32"),C=n.bufferSync(a),E=0;E<f.batchSize;++E)for(var N=0;N<f.inChannels;++N)for(var T=0;T<f.inDepth;++T)for(var I=0;I<f.inHeight;++I)for(var A=0;A<f.inWidth;++A){for(var M=T-w,P=I-j,R=A-x,D=0,F=0;F<y;F+=m){var L=(M+F)/p;if(!(L<0||L>=f.outDepth||Math.floor(L)!==L))for(var z=0;z<O;z+=b){var q=(P+z)/h;if(!(q<0||q>=f.outHeight||Math.floor(q)!==q))for(var V=0;V<k;V+=g){var B=(R+V)/v;if(!(B<0||B>=f.outWidth||Math.floor(B)!==B)){var U=y*O*k-1-d.get(E,L,q,B,N)===F*O*k+z*k+V?1:0;if(0!==U)D+=C.get(E,L,q,B,N)*U}}}}_.set(D,E,T,I,A,N)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var zv={kernelName:S.Tb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Xf([i,t.output],"maxPoolGrad");for(var s=r.filterSize,c=r.strides,u=r.pad,l=r.dimRoundingMode,f=S.Ld.computePool2DInfo(o.shape,s,c,1,u,l),d=n.data.get(o.dataId).values,p=Object(S.Wd)(f.outShape,o.dtype,ap(d,o.shape,o.dtype,f).values),h=f.strideHeight,v=f.strideWidth,m=f.dilationHeight,b=f.dilationWidth,g=f.effectiveFilterHeight,y=f.effectiveFilterWidth,O=y-1-f.padInfo.left,k=g-1-f.padInfo.top,w=Object(S.Wd)(o.shape,"float32"),x=n.data.get(a.dataId).values,j=Object(S.Wd)(a.shape,"float32",x),_=0;_<f.batchSize;++_)for(var C=0;C<f.inChannels;++C)for(var E=0;E<f.inHeight;++E)for(var N=0;N<f.inWidth;++N){for(var T=E-k,I=N-O,A=0,M=0;M<g;M+=m){var P=(T+M)/h;if(!(P<0||P>=f.outHeight||Math.floor(P)!==P))for(var R=0;R<y;R+=b){var D=(I+R)/v;if(!(D<0||D>=f.outWidth||Math.floor(D)!==D)){var F=g*y-1-p.get(_,P,D,C)===M*y+R?1:0;if(0!==F)A+=j.get(_,P,D,C)*F}}}w.set(A,_,E,N,C)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var qv={kernelName:S.Ub,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,c=n.includeBatchInIndex,u=r;Xf(a,"MaxPoolWithArgmax");var l=u.data.get(a.dataId).values,f=S.Ld.computePool2DInfo(a.shape,i,o,[1,1],s),d=function(e,t,n,r,a){var i=rp(e,0,n,S.qi.computeStrides(t),a,"max"),o=ap(e,t,n,a,!0,r);return[i.values,o.values]}(l,a.shape,a.dtype,c,f),p=Object(A.a)(d,2),h=p[0],v=p[1],m=u.write(h,f.outShape,a.dtype),b=u.write(v,f.outShape,a.dtype);return[{dataId:m,shape:f.outShape,dtype:a.dtype},{dataId:b,shape:f.outShape,dtype:"int32"}]}};function Vv(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;Xf(i,"sum");var c=(t="bool"===i.dtype?yd({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):td({inputs:{x:i},backend:r})).shape.length,u=S.qi.parseAxisParam(o,t.shape),l=S.Ld.getAxesPermutation(u,c),f=u,d=t;null!=l&&(d=qd({inputs:{x:t},backend:r,attrs:{perm:l}}),f=S.Ld.getInnerMostAxes(f.length,c)),S.Ld.assertAxesAreInnerMostDims("sum",f,d.shape.length);for(var p=S.Ld.computeOutAndReduceShapes(d.shape,f),h=Object(A.a)(p,2),v=h[0],m=h[1],b=md(r,v,S.Ld.upcastType(d.dtype,"int32")),g=S.qi.sizeFromShape(m),y=r.data.get(b.dataId).values,O=r.data.get(d.dataId).values,k=0;k<y.length;++k){for(var w=k*g,x=0,j=0;j<g;++j)x+=O[w+j];y[k]=x}if(s){var _=b;b=Cd({inputs:{x:b},backend:r,attrs:{shape:S.Ld.expandShapeToKeepDim(b.shape,u)}}),r.disposeIntermediateTensorInfo(_)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(d),b}var Bv={kernelName:S.fd,backendName:"cpu",kernelFunc:Vv};var Uv={kernelName:S.Wb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=S.qi.parseAxisParam(i,a.shape),c=S.Ld.computeOutAndReduceShapes(a.shape,s)[1],u=S.qi.sizeFromShape(c),l=[],f=n.makeTensorInfo([],"float32",new Float32Array([u]));l.push(f);var d=yd({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(d);var p=jh({inputs:{a:d,b:f},backend:n});l.push(p);var h=Vv({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:o}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}};var Wv={kernelName:S.Xb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;Xf(a,"min");var s=S.qi.parseAxisParam(i,a.shape),c=s,u=S.Ld.getAxesPermutation(c,a.shape.length),l=a;null!=u&&(l=qd({inputs:{x:a},backend:n,attrs:{perm:u}}),c=S.Ld.getInnerMostAxes(c.length,a.shape.length)),S.Ld.assertAxesAreInnerMostDims("min",c,l.shape.length);for(var f=S.Ld.computeOutAndReduceShapes(l.shape,c),d=Object(A.a)(f,2),p=d[0],h=d[1],v=S.qi.sizeFromShape(h),m=S.qi.makeZerosTypedArray(S.qi.sizeFromShape(p),l.dtype),b=n.data.get(l.dataId).values,g=0;g<m.length;++g){for(var y=g*v,O=b[y],k=0;k<v;++k){var w=b[y+k];w<O&&(O=w)}m[g]=O}null!=u&&n.disposeIntermediateTensorInfo(l);var x=n.makeTensorInfo(p,l.dtype,m);if(o){var j=Cd({inputs:{x:x},backend:n,attrs:{shape:S.Ld.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(x),j}return x}},Gv=id((function(e,t){return Math.min(e,t)})),Hv=kd(S.Yb,Gv),Kv={kernelName:S.Yb,backendName:"cpu",kernelFunc:Hv};var Xv={kernelName:S.Zb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;Xf(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),c=i.map((function(e){return e[0]})),u=i.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===o?0:1,f=n.data.get(a.dataId).values,d=a.shape.length,p=S.qi.computeStrides(a.shape),h=S.qi.sizeFromShape(s),v=s.length,m=S.qi.computeStrides(s),b=S.qi.getTypedArrayFromDType(a.dtype,h),g=0;g<h;g++){for(var y=S.qi.indexToLoc(g,v,m),O=0;O<v;O++)y[O]<c[O]?y[O]=2*c[O]-y[O]-l:y[O]>=u[O]&&(y[O]=2*(u[O]-1)-y[O]+l);y=y.map((function(e,t){return e-c[t]}));var k=S.qi.locToIndex(y,d,p);b[g]=f[k]}return{dataId:n.write(b,s,a.dtype),shape:s,dtype:a.dtype}}},Qv=id((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),Yv=kd(S.ac,Qv),Zv={kernelName:S.ac,backendName:"cpu",kernelFunc:Yv},Jv=n(408);function $v(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var c=S.qi.parseAxisParam([s],a.shape),u=Iv({inputs:{x:a},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),l=S.Ld.expandShapeToKeepDim(u.shape,c),f=Cd({inputs:{x:u},backend:n,attrs:{shape:l}}),d=Eh({inputs:{a:a,b:f},backend:n}),p=dh({inputs:{x:d},backend:n}),h=Vv({inputs:{x:p},backend:n,attrs:{axis:c,keepDims:!1}}),v=Cd({inputs:{x:h},backend:n,attrs:{shape:l}}),m=jh({inputs:{a:p,b:v},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),m}var em={kernelName:S.Uc,backendName:"cpu",kernelFunc:$v};var tm={kernelName:S.cc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;Xf(a,"multinomial");for(var c=s?a:$v({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=c.shape[0],l=c.shape[1],f=n.data.get(c.dataId).values,d=[u,i],p=S.qi.makeZerosTypedArray(S.qi.sizeFromShape(d),"int32"),h=0;h<u;++h){var v=h*l,m=new Float32Array(l-1);m[0]=f[v];for(var b=1;b<m.length;++b)m[b]=m[b-1]+f[v+b];for(var g=Jv.alea(o.toString()),y=h*i,O=0;O<i;++O){var k=g();p[y+O]=m.length;for(var w=0;w<m.length;w++)if(k<m[w]){p[y+O]=w;break}}}return s||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(d,"int32",p)}};function nm(e,t,n){var r=S.qi.createScalarValue(-1,n);return yh([],t,r,e,n)}var rm={kernelName:S.ec,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;Xf(r,"neg");var a=nm(n.data.get(r.dataId).values,r.shape,r.dtype),i=Object(A.a)(a,2),o=i[0],s=i[1];return n.makeTensorInfo(s,r.dtype,o)}},am=S.yf.nonMaxSuppressionV3Impl;var im={kernelName:S.fc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold;Xf(a,"NonMaxSuppression");var u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,f=am(u,l,o,s,c).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},om=S.yf.nonMaxSuppressionV4Impl;var sm={kernelName:S.gc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,u=r.padToMaxOutputSize;Xf(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=om(l,f,o,s,c,u),p=d.selectedIndices,h=d.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},cm=S.yf.nonMaxSuppressionV5Impl;var um={kernelName:S.hc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,u=r.softNmsSigma;Xf(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=cm(l,f,o,s,c,u),p=d.selectedIndices,h=d.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},lm=id((function(e,t){return e!==t?1:0})),fm=kd(S.ic,lm,null,"bool"),dm={kernelName:S.ic,backendName:"cpu",kernelFunc:fm};var pm={kernelName:S.kc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue;Xf(a,"oneHot");var c=S.qi.sizeFromShape(a.shape),u=new Float32Array(c*i);u.fill(s);for(var l=n.data.get(a.dataId).values,f=0;f<c;++f)l[f]>=0&&l[f]<i&&(u[f*i+l[f]]=o);return n.makeTensorInfo([].concat(Object(I.a)(a.shape),[i]),"int32",u)}};function hm(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=bd({inputs:{input:r},backend:n}),i=hm({inputs:{x:a},backend:n}),o=_p({inputs:{input:r},backend:n}),s=hm({inputs:{x:o},backend:n}),c=hd({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}return Ph({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var vm={kernelName:S.rd,backendName:"cpu",kernelFunc:hm};var mm={kernelName:S.lc,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=bd({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=_p({inputs:{input:a},backend:r}),c=hm({inputs:{x:s},backend:r}),u=hd({inputs:{real:o,imag:c},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(c),u}return Ph({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function bm(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return hh({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){S.qi.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),S.qi.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=Ep({inputs:t.map((function(e){var t=hh({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var gm={kernelName:S.nc,backendName:"cpu",kernelFunc:bm};var ym={kernelName:S.oc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;Xf(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),c=i.map((function(e){return e[0]})),u=n.data.get(a.dataId).values,l=S.qi.sizeFromShape(a.shape),f=a.shape.length,d=S.qi.computeStrides(a.shape),p=S.qi.sizeFromShape(s),h=s.length,v=S.qi.computeStrides(s),m=S.qi.getTypedArrayFromDType(a.dtype,p);0!==o&&m.fill(o);for(var b=0;b<l;b++){var g=S.qi.indexToLoc(b,f,d).map((function(e,t){return e+c[t]}));m[S.qi.locToIndex(g,h,v)]=u[b]}return{dataId:n.write(m,s,a.dtype),shape:s,dtype:a.dtype}}},Om=id((function(e,t){return Math.pow(e,t)})),km=kd(S.qc,Om),wm={kernelName:S.qc,backendName:"cpu",kernelFunc:km};function xm(e,t,n,r){for(var a=S.Ld.computeOutAndReduceShapes(e,r),i=Object(A.a)(a,2),o=i[0],s=i[1],c=Object(S.pi)(t,"int32"),u=S.qi.makeZerosTypedArray(S.qi.sizeFromShape(o),c),l=S.qi.sizeFromShape(s),f=0;f<u.length;++f){for(var d=f*l,p=1,h=0;h<l;++h)p*=n[d+h];u[f]=p}return{outVals:u,outShape:o,outDtype:c}}var jm={kernelName:S.sc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;Xf(a,"prod");var s=a.shape.length,c=S.qi.parseAxisParam(i,a.shape),u=S.Ld.getAxesPermutation(c,s),l=c,f=a,d=[];null!=u&&(f=qd({inputs:{x:a},backend:n,attrs:{perm:u}}),d.push(f),l=S.Ld.getInnerMostAxes(l.length,s));var p=n.data.get(f.dataId).values,h=xm(f.shape,f.dtype,p,l),v=h.outVals,m=h.outShape,b=h.outDtype,g=m;return o&&(g=S.Ld.expandShapeToKeepDim(m,c)),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(g,b,v)}};function Sm(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return S.qi.makeZerosTypedArray(0,r);var a=Math.abs(Math.ceil((t-e)/n)),i=S.qi.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return i}var _m={kernelName:S.uc,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=Sm(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},Cm=Zf(S.yc,(function(e){return 1/e})),Em={kernelName:S.yc,backendName:"cpu",kernelFunc:Cm};var Nm={kernelName:S.Dc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;Xf(a,"resizeBilinear");for(var c=S.qi.computeStrides(a.shape),u=Object(A.a)(s,2),l=u[0],f=u[1],d=Object(A.a)(a.shape,4),p=d[0],h=d[1],v=d[2],m=d[3],b=n.data.get(a.dataId).values,g=new Float32Array(S.qi.sizeFromShape([p,l,f,m])),y=[i&&l>1?h-1:h,i&&f>1?v-1:v],O=[i&&l>1?l-1:l,i&&f>1?f-1:f],k=0,w=y[0]/O[0],x=y[1]/O[1],j=0;j<p;j++)for(var _=0;_<l;_++){var C=void 0;C=o?w*(_+.5)-.5:w*_;for(var E=Math.max(0,Math.floor(C)),N=C-E,T=Math.min(h-1,Math.ceil(C)),I=j*c[0]+E*c[1],M=j*c[0]+T*c[1],P=0;P<f;P++){var R=void 0;R=o?x*(P+.5)-.5:x*P;for(var D=Math.max(0,Math.floor(R)),F=R-D,L=Math.min(v-1,Math.ceil(R)),z=I+D*c[2],q=M+D*c[2],V=I+L*c[2],B=M+L*c[2],U=0;U<m;U++){var W=b[z+U],G=b[q+U],H=W+(b[V+U]-W)*F,K=H+(G+(b[B+U]-G)*F-H)*N;g[k++]=K}}}return n.makeTensorInfo([p,l,f,m],"float32",g)}};var Tm={kernelName:S.Ec,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;Xf([i,a],"resizeBilinearGrad");for(var s=S.qi.computeStrides(a.shape),c=Object(A.a)(a.shape,4),u=c[0],l=c[1],f=c[2],d=c[3],p=Object(A.a)(i.shape,3),h=p[1],v=p[2],m=new Float32Array(u*l*f*d),b=[o&&h>1?l-1:l,o&&v>1?f-1:f],g=[o&&h>1?h-1:h,o&&v>1?v-1:v],y=b[0]/g[0],O=b[1]/g[1],k=n.data.get(i.dataId).values,w=0,x=0;x<u;x++)for(var j=x*s[0],_=0;_<h;_++)for(var C=_*y,E=Math.floor(C),N=Math.min(Math.ceil(C),l-1),T=j+E*s[1],I=j+N*s[1],M=C-E,P=1-M,R=0;R<v;R++)for(var D=R*O,F=Math.floor(D),L=Math.min(Math.ceil(D),f-1),z=D-F,q=1-z,V=T+F*s[2],B=T+L*s[2],U=I+F*s[2],W=I+L*s[2],G=P*q,H=P*z,K=M*q,X=M*z,Q=0;Q<d;Q++){var Y=k[w++];m[V+Q]+=Y*G,m[B+Q]+=Y*H,m[U+Q]+=Y*K,m[W+Q]+=Y*X}return n.makeTensorInfo([u,f,l,d],"float32",m)}};var Im={kernelName:S.Fc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;Xf(a,"resizeNearestNeighbor");for(var c=S.qi.computeStrides(a.shape),u=Object(A.a)(s,2),l=u[0],f=u[1],d=Object(A.a)(a.shape,4),p=d[0],h=d[1],v=d[2],m=d[3],b=n.data.get(a.dataId).values,g=new Float32Array(p*l*f*m),y=[i&&l>1?h-1:h,i&&f>1?v-1:v],O=[i&&l>1?l-1:l,i&&f>1?f-1:f],k=y[0]/O[0],w=y[1]/O[1],x=0,j=0;j<p;j++)for(var _=j*c[0],C=0;C<l;C++){var E=o?k*(C+.5):k*C,N=Math.min(h-1,i?Math.round(E):Math.floor(E));o&&(N=Math.max(0,N));for(var T=_+N*c[1],I=0;I<f;I++){var M=o?w*(I+.5):w*I,P=Math.min(v-1,i?Math.round(M):Math.floor(M));o&&(P=Math.max(0,P));for(var R=T+P*c[2],D=0;D<m;D++){var F=b[R+D];g[x++]=F}}}return n.makeTensorInfo([p,l,f,m],a.dtype,g)}};var Am={kernelName:S.Gc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;Xf([i,a],"resizeNearestNeighborGrad");for(var s=S.qi.computeStrides(a.shape),c=S.qi.computeStrides(i.shape),u=Object(A.a)(a.shape,4),l=u[0],f=u[1],d=u[2],p=u[3],h=Object(A.a)(i.shape,3),v=h[1],m=h[2],b=new Float32Array(l*f*d*p),g=n.data.get(i.dataId).values,y=[o&&v>1?f-1:f,o&&m>1?d-1:d],O=[o&&v>1?v-1:v,o&&m>1?m-1:m],k=y[0]/O[0],w=y[1]/O[1],x=1/k,j=1/w,_=2*Math.ceil(x)+2,C=2*Math.ceil(j)+2,E=0;E<l;E++)for(var N=E*s[0],T=0;T<f;T++)for(var I=N+T*s[1],M=Math.floor(T*x),P=Math.floor(M-_/2),R=0;R<d;R++)for(var D=I+R*s[2],F=Math.floor(R*j),L=Math.floor(F-C/2),z=0;z<p;z++){for(var q=0,V=0;V<_;V++){var B=V+P;if(!(B<0||B>=v)){var U=N+B*c[1],W=B*k;if(T===Math.min(f-1,o?Math.round(W):Math.floor(W)))for(var G=0;G<C;G++){var H=G+L;if(!(H<0||H>=m)){var K=U+H*c[2],X=H*w;R===Math.min(d-1,o?Math.round(X):Math.floor(X))&&(q+=g[K+z])}}}}b[D+z]=q}return n.makeTensorInfo(a.shape,a.dtype,b)}};var Mm={kernelName:S.Hc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;Xf(a,"reverse");var o=a.shape.length,s=S.qi.parseAxisParam(i,a.shape);if(0===o)return td({inputs:{x:a},backend:n});for(var c=new S.jd(a.shape,a.dtype),u=n.bufferSync(a),l=function(e){var t=c.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),c.set.apply(c,[u.get.apply(u,Object(I.a)(n))].concat(Object(I.a)(t)))},f=0;f<c.size;f++)l(f);return n.makeTensorInfo(c.shape,c.dtype,c.values)}},Pm={kernelName:S.Ic,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,c=r,u=S.qi.getTypedArrayFromDType(a.dtype,S.qi.sizeFromShape(a.shape)),l=Object(A.a)(a.shape,4),f=l[0],d=l[1],p=l[2],h=l[3],v=S.Ld.getImageCenter(s,d,p),m=Object(A.a)(v,2),b=m[0],g=m[1],y=Math.sin(i),O=Math.cos(i),k=c.data.get(a.dataId).values,w=0;w<f;w++)for(var x=w*p*d*h,j=0;j<d;j++)for(var _=j*(p*h),C=0;C<p;C++)for(var E=C*h,N=0;N<h;N++){var T=[f,j,C,N],I=T[2],M=T[1],P=(I-b)*O-(M-g)*y,R=(I-b)*y+(M-g)*O;P=Math.round(P+b),R=Math.round(R+g);var D=o;if("number"!==typeof o&&(D=3===N?255:o[N]),P>=0&&P<p&&R>=0&&R<d)D=k[x+R*(p*h)+P*h+N];u[x+_+E+N]=D}return{dataId:c.write(u,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Rm=Zf(S.Jc,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),Dm={kernelName:S.Jc,backendName:"cpu",kernelFunc:Rm},Fm=gp((function(e){return 1/Math.sqrt(e)})),Lm=Jf(S.Kc,Fm),zm={kernelName:S.Kc,backendName:"cpu",kernelFunc:Lm};function qm(e,t,n,r,a,i,o,s,c,u){var l=[r/a,a],f=e.values,d=t.values;if(0===r)return Object(S.Wd)(n,t.dtype);var p=Object(S.Wd)(l,t.dtype);p.values.fill(c);for(var h=0;h<i;h++){for(var v=[],m=0,b=0;b<o;b++){var g=f[h*o+b];v.push(g),m+=g*s[b]}if(m<0||m>=r/a)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var y=0;y<a;y++)u?p.values[m*a+y]+=d[h*a+y]:p.values[m*a+y]=0===t.rank?d[0]:d[h*a+y]}return p}var Vm={kernelName:S.Mc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=S.Ld.calculateShapes(i,a,o),c=s.sliceRank,u=s.numUpdates,l=s.sliceSize,f=s.strides,d=s.outputSize,p=qm(n.bufferSync(a),n.bufferSync(i),o,d,l,u,c,f,0,!0);return n.makeTensorInfo(o,p.dtype,p.values)}};var Bm={kernelName:S.Nc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;Xf([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=Object(S.pi)(a.dtype,i.dtype),f=S.qi.makeZerosTypedArray(S.qi.sizeFromShape(a.shape),l),d=0,p=0===o||o>1||1===a.shape.length?1:S.qi.sizeFromShape(a.shape.slice(1)),h=0;h<s.length;h++)for(var v=0;v<p;v++)1===s[h]?f[d++]=c[h]:f[d++]=u[h];return n.makeTensorInfo(a.shape,l,f)}},Um=S.Ld.SELU_SCALEALPHA,Wm=S.Ld.SELU_SCALE,Gm=Zf(S.Oc,(function(e){return e>=0?Wm*e:Um*(Math.exp(e)-1)})),Hm={kernelName:S.Oc,backendName:"cpu",kernelFunc:Gm},Km=Zf(S.Pc,(function(e){return 1/(1+Math.exp(-e))})),Xm={kernelName:S.Pc,backendName:"cpu",kernelFunc:Km},Qm=Zf(S.Qc,(function(e){return e<0?-1:e>0?1:0})),Ym={kernelName:S.Qc,backendName:"cpu",kernelFunc:Qm},Zm=Zf(S.Rc,(function(e){return Math.sin(e)})),Jm={kernelName:S.Rc,backendName:"cpu",kernelFunc:Zm},$m=Zf(S.Sc,(function(e){return Math.sinh(e)})),eb={kernelName:S.Sc,backendName:"cpu",kernelFunc:$m},tb=Math.log(1.1920928955078125e-7)+2,nb=Zf(S.Vc,(function(e){var t=e>-tb,n=e<tb,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),rb={kernelName:S.Vc,backendName:"cpu",kernelFunc:nb};var ab={kernelName:S.Wc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;Xf([a],"spaceToBatchND");var s=S.qi.sizeFromShape(i),c=[[0,0]];c.push.apply(c,Object(I.a)(o));for(var u=1+i.length;u<a.shape.length;++u)c.push([0,0]);var l=ym.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:c,constantValue:0}}),f=S.Ld.getReshaped(l.shape,i,s,!1),d=S.Ld.getPermuted(f.length,i.length,!1),p=S.Ld.getReshapedPermuted(l.shape,i,s,!1),h=Cd({inputs:{x:l},backend:n,attrs:{shape:f}}),v=qd({inputs:{x:h},backend:n,attrs:{perm:d}}),m=Cd({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),m}};var ib={kernelName:S.Xc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,c=S.Ld.calculateShapes(i,a,s),u=c.sliceRank,l=c.numUpdates,f=c.sliceSize,d=c.strides,p=c.outputSize,h=qm(n.bufferSync(a),n.bufferSync(i),s,p,f,l,u,d,n.data.get(o.dataId).values[0],!1);return n.makeTensorInfo(s,h.dtype,h.values)}};var ob={kernelName:S.Yc,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=S.qi.parseAxisParam(o,a.shape)[0],c=S.Ld.prepareSplitSize(a,i,s),u=new Array(a.shape.length).fill(0),l=a.shape.slice();return c.map((function(e){var t=Object(I.a)(l);t[s]=e;var r=dp({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r}))}},sb=Zf(S.Zc,(function(e){return Math.sqrt(e)})),cb={kernelName:S.Zc,backendName:"cpu",kernelFunc:sb},ub={kernelName:S.ad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;Xf(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var c=i[s];o[s]=c*c}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},lb=id((function(e,t){var n=e-t;return n*n})),fb=kd(S.bd,lb),db={kernelName:S.bd,backendName:"cpu",kernelFunc:fb},pb=Zf(S.cd,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),hb={kernelName:S.cd,backendName:"cpu",kernelFunc:pb};function vb(e,t,n,r){for(var a=Object(S.Wd)(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),c=0;c<s.length;c++)s[c]=o[c]*n[c]+r[c];a.set.apply(a,[t.get.apply(t,s)].concat(Object(I.a)(o)))}return a}var mb={kernelName:S.dd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,c=r.beginMask,u=r.endMask,l=r.ellipsisMask,f=r.newAxisMask,d=r.shrinkAxisMask;Xf(a,"stridedSlice");var p,h=S.zh.sliceInfo(a.shape,i,o,s,c,u,l,f,d),v=h.nonStrided,m=h.$begin,b=h.$strides,g=h.size,y=h.newShape,O=h.outShape,k=Cd({inputs:{x:a},backend:n,attrs:{shape:y}});if(v){var w=dp({inputs:{x:k},backend:n,attrs:{begin:m,size:g}});p=Cd({inputs:{x:w},backend:n,attrs:{shape:O}}),n.disposeIntermediateTensorInfo(w)}else if(O.some((function(e){return 0===e})))p=n.makeTensorInfo(O,a.dtype,[]);else{var x=vb(O,n.bufferSync(k),b,m);p=n.makeTensorInfo(x.shape,x.dtype,x.values)}var j=Cd({inputs:{x:p},backend:n,attrs:{shape:O}});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(p),j}},bb=Zf(S.gd,(function(e){return Math.tan(e)})),gb={kernelName:S.gd,backendName:"cpu",kernelFunc:bb},yb=Zf(S.hd,(function(e){return Math.tanh(e)})),Ob={kernelName:S.hd,backendName:"cpu",kernelFunc:yb};function kb(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=Object(S.Wd)(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),c=0;c<s.length;c++)s[c]=o[c]%e.shape[c];var u=e.locToIndex(s);a.values[i]=e.values[u]}return a}var wb={kernelName:S.kd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;Xf(a,"tile");var o=kb(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function xb(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,c=S.qi.getTypedArrayFromDType(n,o*r),u=S.qi.getTypedArrayFromDType("int32",o*r),l=0;l<o;l++){for(var f=l*s,d=e.subarray(f,f+s),p=[],h=0;h<d.length;h++)p.push({value:d[h],index:h});p.sort((function(e,t){return t.value-e.value}));for(var v=l*r,m=c.subarray(v,v+r),b=u.subarray(v,v+r),g=0;g<r;g++)m[g]=p[g].value,b[g]=p[g].index}var y=t.slice();return y[y.length-1]=r,[Object(S.Wd)(y,n,c),Object(S.Wd)(y,"int32",u)]}var jb={kernelName:S.ld,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k;r.sorted,Xf(a,"topk");var o=xb(n.data.get(a.dataId).values,a.shape,a.dtype,i),s=Object(A.a)(o,2),c=s[0],u=s[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}};function Sb(e,t,n,r){for(var a=S.qi.parseAxisParam(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var c={},u=new Int32Array(n[a]),l=new S.jd(i,r,e),f=[],d=1===i[0]&&1===i[2],p=0;p<n[a];p++){var h=void 0;if(d)h=e[p].toString();else{for(var v=[],m=0;m<i[0];m++)for(var b=0;b<i[2];b++)v.push(l.get(m,p,b));h=v.join(",")}if(void 0!==c[h])u[p]=c[h];else{var g=Object.keys(c).length;c[h]=g,u[p]=g,f.push(p)}}var y=i.slice();y[1]=Object.keys(c).length;var O=new S.jd(y,r);f.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)O.set(l.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=y[1],{outputValues:O.values,outputShape:k,indices:u}}var _b={kernelName:S.nd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;Xf(i,"unique");var o=Sb(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,c=o.outputShape,u=o.indices;return[r.makeTensorInfo(c,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};var Cb={kernelName:S.od,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],c=new Array(o-1),u=0,l=0;l<o;l++)l!==i&&(c[u++]=a.shape[l]);var f=new Array(o).fill(0),d=a.shape.slice();d[i]=1;for(var p=new Array(s),h=0;h<p.length;h++){f[i]=h;var v=dp({inputs:{x:a},backend:n,attrs:{begin:f,size:d}});p[h]=Cd({inputs:{x:v},backend:n,attrs:{shape:c}}),n.disposeIntermediateTensorInfo(v)}return p}};for(var Eb={kernelName:S.pd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;Xf(a,"unsortedSegmentSum");for(var s=[],c=[],u=a.shape.length-i.shape.length,l=i,f=0;f<u;++f){var d=hh({inputs:{input:l},backend:n,attrs:{dim:f+1}});l=d,c.push(d)}for(var p=0;p<o;++p){var h=S.qi.createScalarValue(p,"int32"),v=n.makeTensorInfo([],"int32",h),m=th({inputs:{a:v,b:l},backend:n}),b=yd({inputs:{x:m},backend:n,attrs:{dtype:"float32"}}),g=kh({inputs:{a:b,b:a},backend:n}),y=Vv({inputs:{x:g},backend:n,attrs:{axis:0,keepDims:!1}});s.push(y),c.push(v),c.push(m),c.push(b),c.push(g),c.push(y)}var O=bm({inputs:s,backend:n,attrs:{axis:0}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),O}},Nb=0,Tb=[Id,Md,Rd,Fd,_d,Ld,Bd,Ud,Wd,Gd,Kd,Qd,Zd,ep,np,op,sp,cp,up,Td,lp,hp,bp,Od,kp,xp,vd,jp,Np,Ap,Mp,Ip,Rp,Dp,Pp,Lp,qp,Vp,Bp,Up,Wp,Hp,Kp,Xp,Qp,Yp,Jp,Zp,Sh,ed,$p,nh,lh,ph,vh,gh,Mh,Rh,Dh,zh,Bh,Uh,Wh,Gh,Kh,Yh,$h,nd,ev,Cp,nv,av,ov,ad,uv,dv,hv,bv,yv,wv,jv,Cv,Ev,Nv,Rv,Dv,Fv,Lv,zv,qv,Av,Uv,Wv,Kv,Xv,Zv,tm,wh,rm,im,sm,um,dm,pm,mm,gm,ym,wm,cd,jm,_m,gd,Em,ld,dd,Ed,Nm,Tm,Im,Am,Mm,Pm,Dm,zm,Vm,Bm,Hm,Xm,Ym,Jm,eb,pp,em,rb,ab,ib,ob,cb,ub,db,hb,mb,Nh,Bv,gb,Ob,wb,jb,Vd,_b,Cb,Eb,vm];Nb<Tb.length;Nb++){var Ib=Tb[Nb];Object(S.Tg)(Ib)}var Ab,Mb,Pb,Rb={},Db={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Fb(e){if(!(e in Rb)){var t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);if(t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete Rb[e]}),!1),1===e)return t.getContext("webgl",Db)||t.getContext("experimental-webgl",Db);return t.getContext("webgl2",Db)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;Rb[e]=t}var n=Rb[e];return n.isContextLost()?(delete Rb[e],Fb(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Rb[e])}function Lb(e,t){return[t,e]}function zb(e){var t=S.qi.sizeFromShape(e),n=Math.ceil(t/4);return S.qi.sizeToSquarishShape(n)}function qb(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Vb(e,t){var n,r,a,i,o,s,c,u,l,f=e;return 2===Object(S.Me)().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,a=f.RGBA16F,i=f.RGBA32F,o=f.RED,s=4,c=1,u=f.HALF_FLOAT,l=f.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=f.RGBA,o=e.RGBA,s=4,c=4,u=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:c,textureTypeHalfFloat:u,textureTypeFloat:l}}function Bb(e,t){var n=t();return Object(S.Me)().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(Ab||(Ab={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Mb||(Mb={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Pb||(Pb={}));function Ub(e){return!!(Object(S.Me)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function Wb(e,t){return rg(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function Gb(e,t){var n=rg(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(Bb(e,(function(){return e.shaderSource(n,t)})),Bb(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=Xb.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return S.qi.rightPad((t+1).toString(),i)+e})),s=0,c=0;c<o.length;c++)s=Math.max(o[c].length,s);var u=o.slice(0,r-1),l=o.slice(r-1,r),f=o.slice(r);console.log(u.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(S.qi.rightPad(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var Hb,Kb,Xb=/ERROR: [0-9]+:([0-9]+):/g;function Qb(e,t){if(Bb(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Yb(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(Bb(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Bb(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),Bb(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function Zb(e,t,n){return rg(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function Jb(e,t,n){return e.getUniformLocation(t,n)}function $b(e,t,n,r){Bb(e,(function(){return function(e,t,n){ag(e,n),Bb(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),Bb(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),Bb(e,(function(){return e.uniform1i(n,r)}))}function eg(e,t,n){Bb(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),Bb(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function tg(e,t){Bb(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),Bb(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function ng(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function rg(e,t,n){var r=Bb(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function ag(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function ig(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return S.qi.sizeFromShape(e.slice(0,e.length-t))}function og(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function sg(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[ig(e)].concat(Object(I.a)(og(e)))),t}function cg(e){return e%2===0}function ug(e,t){if(e=e.slice(-2),t=t.slice(-2),S.qi.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(cg(n)&&cg(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&cg(e[0])&&cg(t[0])}function lg(e,t){return null!=e.getExtension(t)}function fg(e){try{if(null!=Fb(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function dg(e){if(0===e)return!1;var t=Fb(e);if(1!==e){if(lg(t,"EXT_color_buffer_float"))return pg(t);var n="EXT_color_buffer_half_float";if(lg(t,n)){var r=t.getExtension(n);return function(e,t){var n=Vb(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!lg(t,"OES_texture_float")&&(!!lg(t,"WEBGL_color_buffer_float")&&pg(t))}function pg(e){var t=Vb(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function hg(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&S.qi.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var vg=Object(S.Me)();function mg(){var e,t,n,r,a,i,o,s,c,u;return 2===Object(S.Me)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",c="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:c,defineRound:u}}function bg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=S.qi.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function gg(e){var t=S.qi.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}vg.registerFlag("HAS_WEBGL",(function(){return vg.getNumber("WEBGL_VERSION")>0})),vg.registerFlag("WEBGL_VERSION",(function(){return fg(2)?2:fg(1)?1:0})),vg.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),vg.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===vg.get("WEBGL_VERSION")})),vg.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),vg.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),vg.registerFlag("WEBGL_PACK",(function(){return vg.getBool("HAS_WEBGL")})),vg.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return vg.getBool("WEBGL_PACK")})),vg.registerFlag("WEBGL_PACK_CLIP",(function(){return vg.getBool("WEBGL_PACK")})),vg.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),vg.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return vg.getBool("WEBGL_PACK")})),vg.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return vg.getBool("WEBGL_PACK")})),vg.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return vg.getBool("WEBGL_PACK")})),vg.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return vg.getBool("WEBGL_PACK")})),vg.registerFlag("WEBGL_PACK_REDUCE",(function(){return vg.getBool("WEBGL_PACK")})),vg.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return vg.getBool("WEBGL_PACK")})),vg.registerFlag("WEBGL_CONV_IM2COL",(function(){return vg.getBool("WEBGL_PACK")})),vg.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==Hb){var t=Fb(e);Hb=t.getParameter(t.MAX_TEXTURE_SIZE)}return Hb}(vg.getNumber("WEBGL_VERSION"))})),vg.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==Kb){var t=Fb(e);Kb=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Kb)}(vg.getNumber("WEBGL_VERSION"))})),vg.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=vg.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=Fb(e);return lg(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:lg(t,"EXT_disjoint_timer_query")?1:0}(e)})),vg.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return vg.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!S.we.isMobile()})),vg.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=Fb(e);if(1===e){if(!lg(t,"OES_texture_float"))return!1}else if(!lg(t,"EXT_color_buffer_float"))return!1;return pg(t)}(vg.getNumber("WEBGL_VERSION"))})),vg.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!vg.getBool("WEBGL_FORCE_F16_TEXTURES")&&vg.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),vg.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return dg(vg.getNumber("WEBGL_VERSION"))})),vg.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=vg.getNumber("WEBGL_VERSION"))&&null!=Fb(e).fenceSync;var e})),vg.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return vg.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),vg.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))}));var yg="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",Og=function e(t){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Ab.DENSE;var n=zb(t),r=mg();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(bg(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},kg=function e(t){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Ab.DENSE;var n=zb(t),r=mg();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(bg(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},wg=function e(t){Object(_.a)(this,e),this.variableNames=["A"],this.outTexUsage=Mb.DOWNLOAD;var n=mg();this.outputShape=t,this.userCode="\n      ".concat(yg,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},xg=function e(t){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Mb.DOWNLOAD;var n=mg();this.outputShape=t,this.userCode="\n      ".concat(yg,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},jg=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(_.a)(this,e),this.variableNames=["A"];var a=mg(),i=Object(A.a)(n,2),o=i[0],s=i[1];this.outputShape=t;var c="result";r&&(c="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(gg(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ").concat(s,";\n        int c = imod(flatIndex, ").concat(s,");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n        vec4 values = ").concat(a.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(a.output," = vec4(").concat(c,", 0., 0., 0.);\n      }\n    ")},Sg=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=mg(),i=Object(A.a)(n,2),o=i[0],s=i[1];this.outputShape=t;var c="",u="result";r&&(u="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var f=0;f<=1;f++){var d=2*l+f;c+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(f," < ").concat(t[2],") {\n            localCoords[2] += ").concat(f,";\n            if(localCoords[1] + ").concat(l," < ").concat(t[1],") {\n              localCoords[1] += ").concat(l,";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ").concat(s,";\n              c = imod(flatIndex, ").concat(s,");\n              uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n              values = ").concat(a.texture2D,"(A, uv);\n\n              if(offset == 0) {\n                result[").concat(d,"] = values[0];\n              } else if(offset == 1) {\n                result[").concat(d,"] = values[1];\n              } else if(offset == 2) {\n                result[").concat(d,"] = values[2];\n              } else {\n                result[").concat(d,"] = values[3];\n              }\n            }\n          }\n        ")}this.userCode="\n      ".concat(gg(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ").concat(c,"\n\n        ").concat(a.output," = ").concat(u,";\n      }\n    ")};function _g(e){var t=mg();return function(e,t){var n=rg(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(Bb(e,(function(){return e.shaderSource(n,t)})),Bb(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function Cg(e){return function(e,t){var n=rg(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Bb(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),Bb(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Eg(e){return function(e,t){var n=rg(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Bb(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),Bb(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function Ng(e,t,n,r,a,i){!function(e,t){var n=Object(S.Me)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return rg(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return Bb(e,(function(){return e.bindTexture(s,o)})),Bb(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),Bb(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),Bb(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),Bb(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),Bb(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})),Bb(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),o}function Tg(e){return e.internalFormatFloat}function Ig(e){return e.internalFormatHalfFloat}function Ag(e){return e.downloadTextureFormat}function Mg(e){return e.internalFormatPackedFloat}function Pg(e){return e.internalFormatPackedHalfFloat}function Rg(e,t,n,r,a,i,o,s){var c=e,u=new Float32Array(function(e,t){var n=qb(e,t),r=Object(A.a)(n,2);return r[0]*r[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,u),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),u}var Dg=function(){function e(t){Object(_.a)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Object(S.Me)().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){Rb[e]=t}(n,t)):this.gl=Fb(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(1===Object(S.Me)().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=Wb(this.gl,"OES_texture_float"),lg(this.gl,i))this.textureHalfFloatExtension=Wb(this.gl,i);else if(Object(S.Me)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),lg(this.gl,a))this.colorBufferHalfFloatExtension=Wb(this.gl,a);else if(Object(S.Me)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",lg(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!lg(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=Cg(this.gl),this.indexBuffer=Eg(this.gl),this.framebuffer=function(e){return rg(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=Vb(this.gl,this.textureHalfFloatExtension)}return Object(C.a)(e,[{key:"debug",get:function(){return Object(S.Me)().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Bb(t,(function(){return t.finish()})),Bb(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),Bb(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),Bb(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),Bb(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),Bb(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Lb(t,n),i=Object(A.a)(a,2);return Ng(e,i[0],i[1],Tg(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Lb(t,n),i=Object(A.a)(a,2);return Ng(e,i[0],i[1],Ig(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Lb(t,n),i=Object(A.a)(a,2);return Ng(e,i[0],i[1],Ag(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){Bb(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?Bb(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):Bb(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),Bb(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,c;Bb(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,c=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,c=i.internalFormatPackedFloat),o.set(a),Bb(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,c,n,r,0,e.RGBA,s,o)})),Bb(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qb(t,n),i=Object(A.a)(a,2);return Ng(e,i[0],i[1],Pg(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qb(t,n),i=Object(A.a)(a,2);return Ng(e,i[0],i[1],Mg(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(tg(this.gl,this.framebuffer),this.outputTexture=null),Bb(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=Lb(t,n),i=Object(A.a)(a,2),o=i[0],s=i[1],c=new Uint8Array(t*n*4);return Bb(e,(function(){return e.readPixels(0,0,o,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return Rg(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();Bb(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return Bb(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),Bb(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),Bb(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(Object(S.Me)().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return Bb(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){this.throwIfDisposed();var t=this.gl,n=Gb(t,e),r=_g(t),a=function(e){return rg(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(t);return Bb(t,(function(){return t.attachShader(a,r)})),Bb(t,(function(){return t.attachShader(a,n)})),function(e,t){if(Bb(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,a),this.debug&&Qb(t,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=function(e,t,n){return Bb(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),Yb(e,t,"clipSpacePos",n,3,20,0)&&Yb(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),a}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Bb(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Qb(this.gl,this.program),Bb(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?Zb(this.gl,e,t):Jb(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),Bb(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),$b(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=qb(t,n),a=Object(A.a)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&Qb(this.gl,this.program),ng(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Bb(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),Bb(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Wb(this.gl,2===Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.qi.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||S.qi.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),eg(this.gl,e,this.framebuffer),this.debug&&ng(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(eg(this.gl,this.outputTexture,this.framebuffer),this.debug&&ng(this.gl)):tg(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;eg(r,e,this.framebuffer),this.debug&&ng(r),this.outputTexture=e,Bb(r,(function(){return r.viewport(0,0,t,n)})),Bb(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),Bb(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var Fg=S.Ld.getBroadcastDims;function Lg(e,t,n,r){var a=[];e.forEach((function(e){var t=S.qi.sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(a.push("uniform sampler2D ".concat(e.name,";")),a.push("uniform int offset".concat(e.name,";")))}));var i,o,s=a.join("\n"),c=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="";r+=n?qg(e):zg(e);var a=e.shapeInfo.logicalShape,i=t.logicalShape;a.length<=i.length&&(r+=n?Kg(e,t):Xg(e,t));return r}(e,t,r)})).join("\n"),u=t.texShape,l=mg(),f=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(Vg,"\n    ").concat(Bg,"\n    ").concat(Ug,"\n  ")}(l);return t.isPacked?(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===n[0])return"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(n[1],".0);\n      }\n    ");if(1===n[1])return"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(n[0],".0);\n      }\n    ");return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      return 2 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n    }\n  ")}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(S.qi.arraysEqual(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(n[0],", ").concat(n[1],"));\n      }\n    ");var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),a=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t);default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),i=a,o="",s="b, r, c",c=2;c<e.length-1;c++)i*=e[e.length-c-1],o="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+o,s="b".concat(c,", ")+s;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(s,");\n    }\n  ")}(e,t)}}(t.logicalShape,u),o=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){if(1===t[0])return"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t);case 2:return function(e,t){if(S.qi.arraysEqual(e,t))return"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=bg(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t);case 4:return function(e,t){var n=bg(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t);case 5:return function(e,t){var n=bg(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=bg(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u),o=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),r&&(d+=Wg),[d,f,o,s,i,c,n].join("\n")}function zg(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(n,"() {return ").concat(t,";}");var r=Object(A.a)(e.shapeInfo.texShape,2),a=r[0],i=r[1];if(1===a&&1===i)return"\n      float ".concat(n,"() {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var o=Object(A.a)(e.shapeInfo.texShape,2),s=o[0],c=o[1],u=Gg(t);return"\n    float ".concat(n,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(c,", ").concat(u,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(n,"(int index) {\n        ").concat(Hg(e),"\n      }\n    ");var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===i&&1===a)return"\n      float ".concat(n,"(int index) {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var o=Gg(t);if(1===i)return"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / ").concat(a,".0);\n        return sampleTexture(").concat(t,", uv);\n      }\n    ");if(1===a)return"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(t,", uv);\n      }\n    ");return"\n    float ".concat(n,"(int index) {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(i,", index + ").concat(o,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&S.qi.arraysEqual(t,a)){var i=a[0],o=a[1];return"\n    float ".concat(r,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o,".0, ").concat(i,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}var s=S.qi.squeezeShape(t),c=s.newShape,u=s.keptDims,l=c;if(l.length<t.length){var f=Yg(e,l),d=["row","col"];return"\n      ".concat(zg(f),"\n      float ").concat(r,"(int row, int col) {\n        return ").concat(r,"(").concat(Zg(d,u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(t[1],", 1)));\n        ").concat(Hg(e),"\n      }\n    ");var p=a[0],h=a[1],v=Gg(n);if(1===h)return"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(t[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");if(1===p)return"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(t[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(h,".0, 0.5);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n  float ".concat(r,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(t[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n    return sampleTexture(").concat(n,", uv);\n  }\n")}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],i=t[2],o=S.qi.squeezeShape(t),s=o.newShape,c=o.keptDims,u=s;if(u.length<t.length){var l=Yg(e,u),f=["row","col","depth"];return"\n        ".concat(zg(l),"\n        float ").concat(r,"(int row, int col, int depth) {\n          return ").concat(r,"(").concat(Zg(f,c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(a,", ").concat(i,", 1)));\n        ").concat(Hg(e),"\n      }\n    ");var d=e.shapeInfo.texShape,p=d[0],h=d[1],v=e.shapeInfo.flatOffset;if(h===a&&null==v)return"\n        float ".concat(r,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(p,".0);\n          return sampleTexture(").concat(n,", uv);\n        }\n      ");if(h===i&&null==v)return"\n    float ".concat(r,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(t[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(p,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var m=Gg(n);return"\n      float ".concat(r,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a," + col * ").concat(i," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n        return sampleTexture(").concat(n,", uv);\n      }\n  ")}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],i=t[2]*a,o=t[1]*i,s=S.qi.squeezeShape(t),c=s.newShape,u=s.keptDims;if(c.length<t.length){var l=Yg(e,c),f=["row","col","depth","depth2"];return"\n      ".concat(zg(l),"\n      float ").concat(r,"(int row, int col, int depth, int depth2) {\n        return ").concat(r,"(").concat(Zg(f,u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(o,", ").concat(i,", ").concat(a,", 1)));\n        ").concat(Hg(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],v=p[1];if(v===o&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(t[1]*t[2],", ").concat(t[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=Gg(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(i," +\n          depth * ").concat(a," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(v,", index + ").concat(m,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,c=S.qi.squeezeShape(t),u=c.newShape,l=c.keptDims;if(u.length<t.length){var f=Yg(e,u),d=["row","col","depth","depth2","depth3"];return"\n      ".concat(zg(f),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(Zg(d,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(Hg(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,v=h[0],m=h[1];if(m===s&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===a&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var b=Gg(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(b,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=S.qi.squeezeShape(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=Yg(e,i),c=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(zg(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(Zg(c,o),");\n      }\n    ")}var u=t[5],l=t[4]*u,f=t[3]*l,d=t[2]*f,p=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(p,", ").concat(d,", ").concat(f,", ").concat(l,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(Hg(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,v=e.shapeInfo.texShape,m=v[0],b=v[1];if(b===p&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(f,", ").concat(l,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(b,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(b===u&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(b,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=Gg(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(p," + col * ").concat(d," + depth * ").concat(f," +\n          depth2 * ").concat(l," + depth3 * ").concat(u," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(b,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(t.length,"-D input sampling")+" is not yet supported")}}function qg(e){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=mg();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=mg();return"\n    vec4 ".concat(n,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(a[0],", ").concat(a[1],", index);\n      return ").concat(i.texture2D,"(").concat(t,", uv);\n    }\n  ")}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=a[0],o=a[1],s=mg();if(null!=a&&S.qi.arraysEqual(t,a))return"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o,".0, ").concat(i,".0);\n\n        return ").concat(s.texture2D,"(").concat(n,", uv);\n      }\n    ");var c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=Math.ceil(t[1]/2);return"\n    vec4 ".concat(r,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(s.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0]){var o=[1,2],s=Yg(e,t.slice(1)),c=["b","row","col"];return"\n        ".concat(qg(s),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat(Zg(c,o),");\n        }\n      ")}var u=i[0],l=i[1],f=Math.ceil(t[2]/2),d=f*Math.ceil(t[1]/2),p=mg();return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(u,", ").concat(l,", ").concat(d,", ").concat(f,", b, row, col);\n      return ").concat(p.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=o[0],c=o[1],u=Math.ceil(t[n-1]/2),l=u*Math.ceil(t[n-2]/2),f="int b, int row, int col",d="b * ".concat(l," + (row / 2) * ").concat(u," + (col / 2)"),p=2;p<n-1;p++)f="int b".concat(p,", ")+f,l*=t[n-p-1],d="b".concat(p," * ").concat(l," + ")+d;var h=mg();return"\n    vec4 ".concat(a,"(").concat(f,") {\n      int index = ").concat(d,";\n      int texR = index / ").concat(c,";\n      int texC = index - texR * ").concat(c,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(c,", ").concat(s,");\n      return ").concat(h.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e)}}var Vg="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Bg="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Ug="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Wg="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Gg(e){return"offset".concat(e)}function Hg(e){var t=e.name,n=S.qi.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function Kg(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,c=Fg(e.shapeInfo.logicalShape,t.logicalShape),u=Qg(s),l=s-o,f=["x","y","z","w","u","v"];n=0===o?"":s<2&&c.length>=1?"coords = 0;":c.map((function(e){return"coords.".concat(f[e+l]," = 0;")})).join("\n");var d="";d=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+l])})).join(", ");var p="return outputValue;",h=1===S.qi.sizeFromShape(e.shapeInfo.logicalShape),v=1===S.qi.sizeFromShape(t.logicalShape);if(1!==o||h||v){if(h&&!v)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){var m=o-2,b=o-1;c.indexOf(m)>-1&&c.indexOf(b)>-1?p="return vec4(outputValue.x);":c.indexOf(m)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(b)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(u," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(d,");\n      ").concat(p,"\n    }\n  ")}function Xg(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===c&&null==e.shapeInfo.flatOffset&&S.qi.arraysEqual(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var u,l=Qg(c),f=Fg(e.shapeInfo.logicalShape,t.logicalShape),d=c-s,p=["x","y","z","w","u","v"];u=0===s?"":c<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords.".concat(p[e+d]," = 0;")})).join("\n");var h="";return h=c<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+d])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}function Qg(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function Yg(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Zg(e,t){return t.map((function(t){return e[t]})).join(", ")}function Jg(e,t,n,r){var a=t.userCode,i=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=i.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},c=Lg(i,s,a,t.packedInputs),u=e.createProgram(c),l=null,f=e.getUniformLocation(u,"NAN",!1);1===Object(S.Me)().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(u,"INFINITY",!1));for(var d={},p=0;p<t.variableNames.length;p++){var h=t.variableNames[p];d[h]=e.getUniformLocation(u,h,false),d["offset".concat(h)]=e.getUniformLocation(u,"offset".concat(h),false)}return{program:t,source:c,webGLProgram:u,uniformLocations:d,inShapeInfos:o,outShapeInfo:s,infLoc:l,nanLoc:f}}function $g(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!S.qi.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!S.qi.arraysEqual(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function ey(e,t,n,r,a){$g(t.inShapeInfos,n),$g([t.outShapeInfo],[r]);var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i,o[0],o[1]):e.setOutputMatrixTexture(i,o[0],o[1]),e.setProgram(t.webGLProgram),1===Object(S.Me)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)];if(null!=i)if(n.isUniform)if(S.qi.sizeFromShape(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(i,s)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,i,r)})),null!=a&&a(e,t.webGLProgram),e.executeProgram()}function ty(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+="".concat(e.shape,"_").concat(n,"_").concat(t)}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a}var ny=xd,ry=vp,ay=mp,iy=yp,oy=Sp,sy=fh,cy=mh,uy=Fh,ly=Hh,fy=Xh,dy=sv,py=pv,hy=vv,vy=Tv,my=Mv,by=Gv,gy=yh,yy=nm,Oy=xm,ky=Sm,wy=Fm,xy=Ad,jy=fp,Sy=vb,_y=_h,Cy=kb,Ey=xb,Ny=zd,Ty=Sb;function Iy(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function Ay(e,t){return 1===t?[e]:Iy(e,t)}var My=function e(t){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var r=Ay("rc",n),a=Qg(n),i=function(e,t,n){if(1===e)return"rc > ".concat(t[0]);for(var r="",a=e-2;a<e;a++)r+="".concat(n[a]," >= ").concat(t[a]),a<e-1&&(r+="||");return r}(n,t,r),o=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = ".concat(a[0],";\n    int c = ").concat(a[1],";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ").concat(t,";\n    bool rEdge = rp1 >= ").concat(n,";\n  ")}(n,t[t.length-1],t[t.length-2],r),s=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i="".concat(0===r?"r":"rp1",", ").concat(0===a?"c":"cp1"),o=2;o<e;o++)i="".concat(t[t.length-1-o],",")+i;n.push(i)}return n}(n,t);if(1===n)return"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0");return"getA(".concat(r[0],"),\n          cEdge ? 0. : getA(").concat(r[1],"),\n          rEdge ? 0. : getA(").concat(r[2],"),\n          rEdge || cEdge ? 0. : getA(").concat(r[3],")")}(t,r);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(i,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(s,"));\n          }\n        }\n      ")}};var Py=function e(t,n){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e){var t=bg(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(t,"\n      return ivec3(r, c, d);\n    }\n  ")}(n),"\n      ").concat(gg(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(t[1],";\n        int cols = ").concat(t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")};var Ry=function(){function e(t){Object(_.a)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Object(C.a)(e,[{key:"acquireTexture",value:function(e,t,n){var r=Fy(t,n),a=Ly(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=Dy(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===Pb.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===Pb.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===Pb.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Pb.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Pb.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=Fy(n,r),i=Ly(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=Dy(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Object(S.Me)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var c=this.usedTextures[i],u=c.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(u,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function Dy(e,t,n,r,a){var i,o=function(e,t){switch(e){case Pb.PACKED_2X2_FLOAT32:return Mg(t);case Pb.PACKED_2X2_FLOAT16:return Pg(t);case Pb.UNPACKED_FLOAT32:return Tg(t);case Pb.UNPACKED_FLOAT16:return Ig(t);case Pb.PACKED_4X1_UNSIGNED_BYTE:return Ag(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=qb(e[0],e[1]),c=Object(A.a)(s,2);i=c[0]*c[1]}else{var u=Lb(e[0],e[1]),l=Object(A.a)(u,2);i=l[0]*l[1]}var f=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*f}function Fy(e,t){if(e===Mb.UPLOAD)return Pb.PACKED_2X2_FLOAT32;if(e===Mb.RENDER||null==e)return function(e){return Object(S.Me)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Pb.PACKED_2X2_FLOAT32:Pb.UNPACKED_FLOAT32:e?Pb.PACKED_2X2_FLOAT16:Pb.UNPACKED_FLOAT16}(t);if(e===Mb.DOWNLOAD||e===Mb.PIXELS)return Pb.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function Ly(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var zy=function e(t,n){Object(_.a)(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},qy="if (isnan(x)) return x;",Vy="return x;",By="return abs(x);";var Uy="return (x >= 0.0) ? x : (exp(x) - 1.0);",Wy=qy+"\n  return (x < 0.0) ? 0.0 : x;\n",Gy=qy+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Hy="return x;",Ky="return x;",Xy="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Qy="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Yy="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Zy=function e(t,n){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},Jy=function e(t){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,r=Ay("rc",n),a=Qg(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")},$y=S.yf.whereImpl,eO={};var tO=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r,a;if(Object(_.a)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.warnedAboutCPUBackend=!1,r.pendingDeletes=0,r.disposed=!1,!Object(S.Me)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var i=Fb(Object(S.Me)().getNumber("WEBGL_VERSION"));r.binaryCache=((a=Object(S.Me)().getNumber("WEBGL_VERSION"))in eO||(eO[a]={}),eO[a]),r.gpgpu=new Dg(i),r.canvas=i.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=e,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=e.gl.canvas;return r.textureManager=new Ry(r.gpgpu),r.numMBBeforeWarning=null==Object(S.Me)().global.screen?1024:Object(S.Me)().global.screen.height*Object(S.Me)().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new S.Q(Object(P.a)(r),Object(S.Le)()),r}return Object(C.a)(n,[{key:"numDataIds",value:function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((Object(S.Me)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Object(S.Me)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Mb.UPLOAD,refCount:1,complexParentRefCount:0}),r}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"decComplexRef",value:function(e){if(this.texData.has(e)){var t=this.texData.get(e);t.complexParentRefCount>0&&t.refCount--}}},{key:"move",value:function(e,t,n,r){if(Object(S.Me)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Mb.UPLOAD,refCount:1,complexParentRefCount:0})}},{key:"disposeIntermediateTensorInfo",value:function(e){var t=e.dataId;if(this.texData.has(t)){var n=this.texData.get(t);n.refCount--,n.refCount<1&&this.disposeData(t)}}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var c;c=s?new Zy(o,Hy):new zy(o,Hy);var u=this.runWebGLProgram(c,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(u.dataId);return this.disposeIntermediateTensorInfo(u),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,d,p=null!=this.activeTimers;if(p&&(f=S.qi.now()),"complex64"===r){var h=this.readSync(a.real.dataId),v=this.readSync(a.imag.dataId);d=S.Ld.mergeRealAndImagArrays(h,v)}else d=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=S.qi.now()-f),this.convertAndCacheOnCPU(e,d)}},{key:"read",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w,x;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,c=r.complexTensorInfos,u=r.isPacked,null==o){e.next=11;break}return l=u?new Zy(i,Hy):new zy(i,Hy),f=this.runWebGLProgram(l,[{dataId:t,shape:i,dtype:s}],s),d=this.read(f.dataId),this.disposeIntermediateTensorInfo(f),e.abrupt("return",d);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(Object(S.Me)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Object(S.Me)().getNumber("WEBGL_VERSION")){e.next=15;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 15:if(p=null,"complex64"!==s&&Object(S.Me)().get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(t),m=this.texData.get(h.dataId),p=(v=this.gpgpu).createBufferFromTexture.apply(v,[m.texture].concat(Object(I.a)(zb(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=21;break}return e.next=21,this.gpgpu.createAndWaitForFence();case 21:if("complex64"!==s){e.next=30;break}return e.next=24,Promise.all([this.read(c.real.dataId),this.read(c.imag.dataId)]);case 24:g=e.sent,y=g[0],O=g[1],b=S.Ld.mergeRealAndImagArrays(y,O),e.next=31;break;case 30:null==p?b=this.getValuesFromTexture(t):(k=S.qi.sizeFromShape(i),b=this.gpgpu.downloadFloat32MatrixFromBuffer(p,k));case 31:return null!=h&&this.disposeIntermediateTensorInfo(h),w=this.convertAndCacheOnCPU(t,b),x=this.pendingRead.get(t),this.pendingRead.delete(t),x.forEach((function(e){return e(w)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),e.abrupt("return",w);case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return S.qi.decodeString(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(S.Wd)(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!Ub(n)){if(Object(S.Me)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=S.qi.sizeFromShape(n);if(Object(S.Me)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),c=this.texData.get(s.dataId),u=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[c.texture].concat(Object(I.a)(zb(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),u}var l=Object(S.Me)().getBool("WEBGL_PACK")&&!0===a,f=l?sg(n):n,d=l?new xg(f):new wg(f),p=this.runWebGLProgram(d,[{shape:f,dtype:r,dataId:e}],"float32"),h=this.texData.get(p.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture,h.texShape[0],h.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(p),v}},{key:"time",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o,s,c;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeTimers,r=[],a=!1,null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,t(),i=S.qi.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=S.qi.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,a&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=19;break}return e.next=14,Promise.all(i);case 14:c=e.sent,s.kernelMs=S.qi.sum(c),s.getExtraProfileInfo=function(){return c.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=20;break;case 19:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 20:return this.uploadWaitMs=0,this.downloadWaitMs=0,e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:S.qi.now(),endMs:null}}},{key:"endTimer",value:function(e){return Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=S.qi.now(),e)}},{key:"getQueryTime",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object(S.Me)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e))if(this.texData.get(e).complexParentRefCount>0)this.texData.get(e).refCount--;else{this.releaseGPUData(e);var t=this.texData.get(e).complexTensorInfos;null!=t&&(this.texData.get(t.real.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.real),this.texData.get(t.imag.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.imag)),this.texData.delete(e)}}}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,c=s&&s.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"getCPUBackend",value:function(){return Object(S.Me)().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Object(S.Le)().findBackend("cpu")),this.cpuBackend):null}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,r=this.getCPUBackend();return Object(S.Me)().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=r||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=r&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&S.qi.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){S.Ld.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return $y(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new Zy(e.shape,t);return this.compileAndRun(r,[e],n)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=xy(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Object(S.Me)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,By,e.dtype);var n=new zy(e.shape,By);return this.compileAndRun(n,[e])}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&S.qi.isString(n[0])){var a=n.map((function(e){return S.qi.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return Object(S.Le)().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new Jy(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new My(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[ig(e.shape)].concat(Object(I.a)(og(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[ig(t)].concat(Object(I.a)(og(t))),i=new Py(a,n),o=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}},{key:"decode",value:function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype,o=sg(a);t=r?new kg(o):new Og(o);return{dtype:i,shape:a,dataId:this.runWebGLProgram(t,[{shape:o,dtype:i,dataId:e}],i,null,!0).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(o.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===Ab.DENSE){var c=zb(e.outputShape);s.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===S.qi.sizeFromShape(o.shape))return s.values=S.qi.getTypedArrayFromDType(o.dtype,0),o;var u=[],l=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&S.qi.sizeFromShape(t.shape)<=Object(S.Me)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),u.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!ug(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),u.push(t),n=a.texData.get(t.dataId),r.shape=i}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);var f,d={shape:o.shape,texData:s,isUniform:!1},p=ty(e,l,d),h=this.getAndSaveBinary(p,(function(){return Jg(a.gpgpu,e,l,d)})),v=null!=this.activeTimers;if(v&&(f=this.startTimer()),ey(this.gpgpu,h,l,d,r),u.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),v&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)})),!Object(S.Me)().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){var m=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),m}return o}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return Object(S.Le)().makeTensorFromDataId(i.dataId,i.shape,i.dtype)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!Object(S.Me)().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Object(S.di)((function(){if(!Object(S.Me)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Object(S.Me)().getBool("DEBUG");Object(S.Me)().set("DEBUG",!1);var n=e.abs(Object(S.gh)(1e-8)).dataSync()[0];if(Object(S.Me)().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var c,u=null!=this.activeTimers;u&&(c=S.qi.now());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(S.Me)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?S.qi.nearestLargerEven(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=S.qi.squeezeShape(e);e=r.newShape}var a=S.qi.sizeFromShape(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=ig(e),o=2,s=2;if(e.length){var c=og(e),u=Object(A.a)(c,2);o=u[0],s=u[1]}return a=i*(o/2)*(s/2),S.qi.sizeToSquarishShape(a).map((function(e){return 2*e}))}return S.qi.sizeToSquarishShape(a)}(n,s),t.texShape=l),null!=a){var f,d=sg(n),p=l[1],h=l[0],v=a instanceof Uint8Array;if(s){var m=qb(l[0],l[1]),b=Object(A.a)(m,2);p=b[0],h=b[1],f=new Sg(d,[h,p],v)}else f=new jg(d,[h,p],v);var g=this.makeTensorInfo([h,p],r);this.texData.get(g.dataId).usage=v?Mb.PIXELS:Mb.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),p,h,a);var y=this.runWebGLProgram(f,[g],r,null,!0),O=this.texData.get(y.dataId);t.texture=O.texture,t.texShape=O.texShape,t.isPacked=O.isPacked,t.usage=O.usage,this.disposeIntermediateTensorInfo(g),this.texData.delete(y.dataId),t.values=null,u&&(this.uploadWaitMs+=S.qi.now()-c)}else{var k=this.acquireTexture(l,o,r,s);t.texture=k}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*S.qi.bytesPerElement(t)}}]),n}(S.Cb);S.we.isBrowser()&&Object(S.Rg)("webgl",(function(){return new tO}),2);var nO=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["A","B"],this.outputShape=S.Ld.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")},rO=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(_.a)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=S.Ld.assertAndGetBroadcastShape(n,r);var i=this.outputShape.length,o="";if(a)if(0===i||1===S.qi.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=Qg(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var c=Ay("coords",i);o+="\n            bool nextRowOutOfBounds =\n              (".concat(c[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(c[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")};function aO(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var iO={kernelName:S.xb,backendName:"webgl",kernelFunc:aO};function oO(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=aO({inputs:{x:r},backend:n});n.texData.get(s.dataId).complexParentRefCount++;var c=aO({inputs:{x:a},backend:n});return n.texData.get(c.dataId).complexParentRefCount++,o.complexTensorInfos={real:s,imag:c},i}var sO={kernelName:S.D,backendName:"webgl",kernelFunc:oO},cO="return (a < 0.) ? b * a : a;",uO="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var lO={kernelName:S.Fb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",S.qi.createScalarValue(i,"float32")),s=Object(S.Me)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rO(uO,a.shape,o.shape):new nO(cO,a.shape,o.shape),c=n.runWebGLProgram(s,[a,o],a.dtype);return n.disposeIntermediateTensorInfo(o),c}},fO="return (a < 0.) ? b * a : a;",dO="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var pO={kernelName:S.rc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=Object(S.Me)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rO(dO,r.shape,a.shape):new nO(fO,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}};function hO(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,c=o.x,u=s,l=a||c.dtype;if(u.shouldExecuteOnCPU([c])&&null!=r){var f=u.texData.get(c.dataId),d=r(f.values,l);return u.makeTensorInfo(c.shape,l,d)}return i=Object(S.Me)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Zy(c.shape,n):new zy(c.shape,t),u.runWebGLProgram(i,[c],l)}}function vO(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,c=e.dtype;return function(e){var r=e.inputs,i=e.backend,u=r.a,l=r.b,f=i;if(o&&"complex64"===u.dtype){var d=f.texData.get(u.dataId),p=f.texData.get(l.dataId),h=[[d.complexTensorInfos.real,p.complexTensorInfos.real],[d.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=Object(A.a)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:u.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new nO(t,u.shape,l.shape);return f.runWebGLProgram(s,[i,o],Object(S.pi)(r.dtype,a.dtype))})),v=Object(A.a)(h,2),m=v[0],b=v[1],g=oO({inputs:{real:m,imag:b},backend:f});return f.disposeIntermediateTensorInfo(m),f.disposeIntermediateTensorInfo(b),g}var y,O=c||Object(S.pi)(u.dtype,l.dtype);if(f.shouldExecuteOnCPU([u,l])&&null!=s){var k=f.texData.get(u.dataId),w=f.texData.get(l.dataId),x=s(u.shape,l.shape,k.values,w.values,O),j=Object(A.a)(x,2),_=j[0],C=j[1],E=f.makeTensorInfo(C,O);return f.texData.get(E.dataId).values=_,E}return y=Object(S.Me)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new rO(n,u.shape,l.shape,a):new nO(t,u.shape,l.shape),f.runWebGLProgram(y,[u,l],O)}}function mO(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?Ky:Vy;if("relu"===e)return t?Qy:Wy;if("elu"===e)return t?Xy:Uy;if("relu6"===e)return t?Yy:Gy;if("prelu"===e)return t?dO:fO;if("leakyrelu"===e)return t?uO:cO;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var bO=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(_.a)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;var l=a?t[1]:t[2],f=Math.ceil(l/2),d=a?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",b="";s&&(m=c?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):u?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),b="result = activation(result);");var g=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");var y="rc.x",O="rc.x";t[0]<n[0]?y="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(O="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(m,"\n\n      const float sharedDimension = ").concat(f,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(f,"; i++) {\n          int batchA = ").concat(y,";\n          int batchB = ").concat(O,";\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(v[0],");\n          result += (").concat(h[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(g,"\n\n        ").concat(b,"\n\n        setOutput(result);\n      }\n    ")},gO="return areal * breal - aimag * bimag;",yO="return areal * bimag + aimag * breal;",OO=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=S.Ld.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")},kO="return a * b;";function wO(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=S.Ld.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),c=r.texData.get(i.dataId),u=new OO(gO,a.shape,i.shape),l=new OO(yO,a.shape,i.shape),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:i.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:i.shape}],d=r.runWebGLProgram(u,f,"float32"),p=r.runWebGLProgram(l,f,"float32"),h=oO({inputs:{real:d,imag:p},backend:r});return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),h}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),m=r.texData.get(i.dataId),b=gy(a.shape,i.shape,v.values,m.values,o),g=Object(A.a)(b,2),y=g[0],O=g[1],k=r.makeTensorInfo(O,o);return r.texData.get(k.dataId).values=y,k}return t=Object(S.Me)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rO(kO,a.shape,i.shape):new nO(kO,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var xO={kernelName:S.dc,backendName:"webgl",kernelFunc:wO};function jO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=S.qi.sizeFromShape(a.shape),c=S.qi.inferFromImplicitShape(i,s),u=S.qi.sizeFromShape(c);S.qi.assert(s===u,(function(){return"The new shape (".concat(c,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=o.texData.get(a.dataId);return!l.isPacked||ug(a.shape,c)||null!==l.texture&&ug(l.shape,c)?(o.incRef(a.dataId),{dataId:a.dataId,shape:c,dtype:a.dtype}):function(e,t,n){var r=[ig(e.shape)].concat(Object(I.a)(og(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[ig(t)].concat(Object(I.a)(og(t))),o=new Py(i,r),s=n.runWebGLProgram(o,[a],e.dtype,null,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(a,c,o)}var SO={kernelName:S.Cc,backendName:"webgl",kernelFunc:jO},_O=function e(t,n){Object(_.a)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),c=r%4,u="sumValue += dot(values, ones);";if(null!=n){var l=1/n;u="sumValue += dot(values * ".concat(S.qi.isInt(l)?l.toPrecision(2):l,", ones);")}var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(u,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(u,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(u,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(u,"\n        }\n        setOutput(sumValue);\n      }\n    ")},CO=function e(t,n){Object(_.a)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",c="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",c="min"):"max"===n&&(s="-1.0 / 1e-20",c="max");var u="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?u="sumValue":"prod"===n?u="prodValue":"all"===n?u="allValue":"any"===n&&(u="anyValue");var l=4*Math.floor(r/4),f=r%4,d="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(c,"(values, minMaxValue);\n      }\n    "),p="vec4";"all"===n?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(u,");\n      }\n    ")};function EO(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=S.Ld.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,c=a[o],u=c.inSize,l=c.windowSize,f=c.outSize,d=void 0;d="mean"===n?0===o?new _O({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:f},u):new _O({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:f}):new CO({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:f},n),s=i,i=r.runWebGLProgram(d,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var NO=function e(t,n){Object(_.a)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=Qg(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")};var TO=function e(t,n){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=Qg(this.rank),o=Iy("rc",this.rank),s=new Array(this.rank),c=0;c<n.length;c++)s[n[c]]=o[c];var u="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),f="getChannel(getA(".concat(s.join(),"), ").concat(u,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(f,";\n      if(").concat(l,") {\n        result[1] = ").concat(f,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(f,";\n        if(").concat(l,") {\n          result[3] = ").concat(f,";\n        }\n      }\n      setOutput(result);\n    }\n    ")};function IO(e,t,n){var r=Object(S.Me)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TO(e.shape,t):new NO(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function AO(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=S.qi.parseAxisParam(a,e.shape),s=o,c=S.Ld.getAxesPermutation(s,i),u=null!=c,l=e;u&&(l=IO(e,c,r),s=S.Ld.getInnerMostAxes(s.length,i)),S.Ld.assertAxesAreInnerMostDims("sum",s,i);var f=S.Ld.computeOutAndReduceShapes(l.shape,s),d=Object(A.a)(f,2),p=d[0],h=d[1],v=p;n&&(v=S.Ld.expandShapeToKeepDim(p,o));var m=S.qi.sizeFromShape(h),b=jO({inputs:{x:l},attrs:{shape:[S.qi.sizeFromShape(e.shape)/m,m]},backend:r}),g=EO(b,Object(S.Rh)(e.dtype),"sum",r),y=jO({inputs:{x:g},attrs:{shape:v},backend:r});return r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(g),u&&r.disposeIntermediateTensorInfo(l),y}(t.x,r.axis,r.keepDims,n)}var MO={kernelName:S.fd,backendName:"webgl",kernelFunc:AO};function PO(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,c=i.shape.length,u=new Array(c),l=0;l<u.length;l++)u[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var f=s.texData.get(i.dataId).values,d=Ny(f,i.shape,i.dtype,o,u);t=s.makeTensorInfo(u,i.dtype),s.texData.get(t.dataId).values=d}else t=IO(i,o,s);return t}var RO={kernelName:S.md,backendName:"webgl",kernelFunc:PO};function DO(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,c=e.preluActivationWeights,u=void 0===c?null:c,l=e.leakyreluAlpha,f=void 0===l?0:l,d=e.activation,p=void 0===d?null:d,h=t.shape.length,v=n.shape.length,m=r?t.shape[h-2]:t.shape[h-1],b=a?n.shape[v-1]:n.shape[v-2],g=r?t.shape[h-1]:t.shape[h-2],y=a?n.shape[v-2]:n.shape[v-1],O=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=S.qi.sizeFromShape(O),x=S.qi.sizeFromShape(k),j=w===x||1===w||1===x;S.qi.assert(h>=2&&v>=2&&j,(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+"batch dimensions of (".concat(O,") and (").concat(k,").")}));var _=(w>x?t.shape.slice(0,-2):n.shape.slice(0,-2)).concat([g,y]);S.qi.assert(m===b,(function(){return"Error in matMul: inner shapes (".concat(m,") and (")+"".concat(b,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var C,E=r?[w,m,g]:[w,g,m],N=a?[x,y,b]:[x,b,y],T=jO({inputs:{x:t},backend:i,attrs:{shape:E}}),I=jO({inputs:{x:n},backend:i,attrs:{shape:N}}),A=[T,I],M=Math.max(w,x),P=r?T.shape[1]:T.shape[2],R=null!=s,D=null!=u,F="leakyrelu"===p,L=null!=p?mO(p,!0):null;if((1===g||1===y)&&P>1e3&&!1===(R||D||F||null!=L)){var z=T,q=I;r&&(z=PO({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),A.push(z)),a&&(q=PO({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),A.push(q));var V=1===y,B=z;1!==y&&(B=jO({inputs:{x:z},backend:i,attrs:{shape:[M,P,1]}}),A.push(B));var U=1===y?2:1,W=q;V&&(W=jO({inputs:{x:q},backend:i,attrs:{shape:[M,1,P]}}),A.push(W));var G=wO({inputs:{a:B,b:W},backend:i});C=AO({inputs:{x:G},backend:i,attrs:{axis:U,keepDims:!0}}),A.push(G)}else{var H=Object(S.pi)(t.dtype,n.dtype),K=new bO(E,N,[M,g,y],r,a,R,L,D,F),X=[T,I];if(null!=s&&X.push(s),D&&X.push(u),F){var Q=i.makeTensorInfo([],"float32",S.qi.createScalarValue(f,"float32"));X.push(Q),A.push(Q)}C=i.runWebGLProgram(K,X,H)}var Y=jO({inputs:{x:C},backend:i,attrs:{shape:_}});A.push(C);for(var Z=0,J=A;Z<J.length;Z++){var $=J[Z];i.disposeIntermediateTensorInfo($)}return Y}var FO={kernelName:S.sd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,c=r.transposeA,u=r.transposeB,l=r.activation;return DO({a:a,b:i,transposeA:c,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},LO="return abs(x);";var zO={kernelName:S.a,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=xy(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=Object(S.Me)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Zy(a.shape,LO):new zy(a.shape,LO),r.runWebGLProgram(t,[a],a.dtype)}},qO=hO({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),VO={kernelName:S.b,backendName:"webgl",kernelFunc:qO},BO=hO({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),UO={kernelName:S.c,backendName:"webgl",kernelFunc:BO},WO="return a + b;",GO=vO({opSnippet:WO,packedOpSnippet:WO,supportsComplex:!0,cpuKernelImpl:ny}),HO={kernelName:S.h,backendName:"webgl",kernelFunc:GO},KO=function e(t,n){Object(_.a)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},XO=function e(t,n){Object(_.a)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")};var QO={kernelName:S.i,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return aO({inputs:{x:a[0]},backend:r});if(a.length>Object(S.Me)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var c=a.map((function(e){return e.dtype})).reduce((function(e,t){return Object(S.pi)(e,t)})),u=a.map((function(e){return e.shape})),l=Object(S.Me)().getBool("WEBGL_PACK")?new XO(a[0].shape,u):new KO(a[0].shape,u);return r.runWebGLProgram(l,a,c)}};var YO={kernelName:S.j,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,c=S.qi.parseAxisParam(i,a.shape),u=c,l=S.Ld.getAxesPermutation(u,s),f=a;null!=l&&(f=PO({inputs:{x:a},backend:n,attrs:{perm:l}}),u=S.Ld.getInnerMostAxes(u.length,s)),S.Ld.assertAxesAreInnerMostDims("all",u,s);var d,p=S.Ld.computeOutAndReduceShapes(f.shape,u),h=Object(A.a)(p,2),v=h[0],m=h[1],b=jO({inputs:{x:f},backend:n,attrs:{shape:[-1,S.qi.sizeFromShape(m)]}}),g=EO(b,b.dtype,"all",n);return d=jO(o?{inputs:{x:g},backend:n,attrs:{shape:S.Ld.expandShapeToKeepDim(v,c)}}:{inputs:{x:g},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(f),d}};var ZO={kernelName:S.k,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,c=S.qi.parseAxisParam(i,a.shape),u=c,l=S.Ld.getAxesPermutation(u,s),f=a;null!=l&&(f=PO({inputs:{x:a},backend:n,attrs:{perm:l}}),u=S.Ld.getInnerMostAxes(u.length,s)),S.Ld.assertAxesAreInnerMostDims("any",u,s);var d,p=S.Ld.computeOutAndReduceShapes(f.shape,u),h=Object(A.a)(p,2),v=h[0],m=h[1],b=jO({inputs:{x:f},backend:n,attrs:{shape:[-1,S.qi.sizeFromShape(m)]}}),g=EO(b,b.dtype,"any",n);return d=jO(o?{inputs:{x:g},backend:n,attrs:{shape:S.Ld.expandShapeToKeepDim(v,c)}}:{inputs:{x:g},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(f),d}},JO=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",c=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(c,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")},$O=function e(t,n,r,a){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,S.qi.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,c,u=this.outputShape,l=u.length,f=Qg(l),d=Ay("coords",l);if(1===o){var p=Qg(c=l+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(d.join(),", 0);\n        ++").concat(d[l-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(d.join(),", 0);\n        ++").concat(d[l-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(d.join(),", 0);\n        --").concat(d[l-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(d.join(),", 0);\n        --").concat(d[l-2],";")}else c=l,s="\n        ".concat(f," sourceLocR = coords;\n        ++").concat(d[l-1],";\n        ").concat(f," sourceLocG = coords;\n        ++").concat(d[l-2],";\n        ").concat(f," sourceLocA = coords;\n        --").concat(d[l-1],";\n        ").concat(f," sourceLocB = coords;\n        --").concat(d[l-2],";");var h=["x","y","z","w","u","v"].slice(0,c),v="."+h[c-1],m=h.map((function(e){return"int "+e})),b=Ay("sourceLocR",c-1).concat("inIdx.r"),g=Ay("sourceLocG",c-1).concat("inIdx.g"),y=Ay("sourceLocB",c-1).concat("inIdx.b"),O=Ay("sourceLocA",c-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(O.join(),")));"),x="vec4(\n            getAChannel(".concat(b.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(O.join(),") : 0.)"),j=a?"":"\n      float getBestIndicesAChannel(".concat(m.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(m.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(j,"\n      void main() {\n        ").concat(f," coords = getOutputCoords();\n        bool hasNextCol = ").concat(d[l-1]," < ").concat(u[l-1]-1,";\n        bool hasNextRow = ").concat(d[l-2]," < ").concat(u[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(v,", sourceLocG").concat(v,",\n          sourceLocB").concat(v,", sourceLocA").concat(v,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(x,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(x,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")};function ek(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=S.Ld.computeOptimalWindowSize(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},c=new JO(s,n,null==r),u=[t];null!=r&&u.push(r);var l=e.runWebGLProgram(c,u,"int32");if(1===l.shape[1])return l;var f=ek(e,t,n,l);return e.disposeIntermediateTensorInfo(l),f}function tk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=S.Ld.computeOptimalWindowSize(i),s=new $O(a,o,n,null==r),c=null==r?[t]:[t,r],u=e.runWebGLProgram(s,c,"int32");if(u.shape.length===t.shape.length){var l=tk(e,t,n,u);return e.disposeIntermediateTensorInfo(u),l}return u}function nk(e,t,n,r){var a=[n];if(S.Ld.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Object(S.Me)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=S.Ld.computeOutAndReduceShapes(t.shape,a),s=Object(A.a)(o,2),c=s[0],u=s[1],l=S.qi.sizeFromShape(u),f=jO({inputs:{x:t},backend:e,attrs:{shape:[-1,l]}});i.push(f);var d=ek(e,f,r);i.push(d);var p=jO({inputs:{x:d},backend:e,attrs:{shape:c}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),p}return tk(e,t,r)}var rk={kernelName:S.l,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=S.qi.parseAxisParam(i,a.shape),s=S.Ld.getAxesPermutation(o,a.shape.length),c=a,u=[];null!=s&&(c=PO({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(c),o=S.Ld.getInnerMostAxes(o.length,c.shape.length)),S.Ld.assertAxesAreInnerMostDims("argMax",[o[0]],c.shape.length);var l=nk(n,c,o[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var ak={kernelName:S.m,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=S.qi.parseAxisParam(i,a.shape),s=S.Ld.getAxesPermutation(o,a.shape.length),c=a,u=[];null!=s&&(c=PO({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(c),o=S.Ld.getInnerMostAxes(o.length,c.shape.length)),S.Ld.assertAxesAreInnerMostDims("argMin",[o[0]],c.shape.length);var l=nk(n,c,o[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},ik=hO({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),ok={kernelName:S.n,backendName:"webgl",kernelFunc:ik},sk=hO({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),ck={kernelName:S.o,backendName:"webgl",kernelFunc:sk},uk=hO({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),lk={kernelName:S.p,backendName:"webgl",kernelFunc:uk},fk=vO({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),dk={kernelName:S.q,backendName:"webgl",kernelFunc:fk},pk=hO({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),hk={kernelName:S.r,backendName:"webgl",kernelFunc:pk},vk=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(_.a)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,c=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,m="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),b="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="0.0";if(v||(g="-1.0 / 1e-20"),r){var y=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(c,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(y," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?m:b:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var O="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var w=4*Math.floor(o/4),x=o%4,j="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(O,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(g,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(g,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(u,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(j,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat(1===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(j,"\n          } else if (").concat(2===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(j,"\n          } else if (").concat(3===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(j,"\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}},mk=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(_.a)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,c=t.strideHeight,u=t.strideWidth,l=t.dilationDepth,f=t.dilationHeight,d=t.dilationWidth,p=t.effectiveFilterDepth,h=t.effectiveFilterHeight,v=t.effectiveFilterWidth,m=t.padInfo.front,b=t.padInfo.top,g=t.padInfo.left;this.outputShape=t.outShape;var y="avg"===n,O="0.0";if(y||(O="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(c,", ").concat(u,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(b,", ").concat(g,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(f,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",x="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(x="avgValue / count");var j=4*Math.floor(o/4),S=o%4,C="\n      if (".concat(y,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(c,", ").concat(u,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(b,", ").concat(g,");\n      const float initializationValue = ").concat(O,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(O,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(f,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(j,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(C,"\n            }\n\n            int xC = xCCorner + ").concat(j,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(C,"\n            }\n          }\n          setOutput(").concat(x,");\n        }\n      }\n    ")}};var bk={kernelName:S.s,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;hg(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,c=r.dimRoundingMode;S.qi.assert(S.Ld.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var u=S.Ld.computePool2DInfo(a.shape,i,o,1,s,c);if(1===u.filterWidth&&1===u.filterHeight&&S.qi.arraysEqual(u.inShape,u.outShape))return aO({inputs:{x:a},backend:n});var l=new vk(u,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var gk={kernelName:S.t,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,c=r.dimRoundingMode,u=r.dataFormat,l=S.Ld.computePool3DInfo(a.shape,i,o,[1,1,1],s,c,u),f=new mk(l,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}},yk=function e(t){Object(_.a)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=c-1-t.padInfo.top,f=u-1-t.padInfo.left,d=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(f,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(c,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(u,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Ok=function e(t){Object(_.a)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,c=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterDepth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=f-1-t.padInfo.front,v=d-1-t.padInfo.top,m=p-1-t.padInfo.left,b=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(v,", ").concat(m,");\n      const float avgMultiplier = float(").concat(b,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(c,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(u,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var kk={kernelName:S.u,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,c=r.pad,u=r.dimRoundingMode,l=S.Ld.computePool3DInfo(i.shape,o,s,[1,1,1],c,u),f=new Ok(l);return n.runWebGLProgram(f,[a],i.dtype)}};var wk={kernelName:S.v,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;hg([a,i],"avgPoolGrad");var s=r.filterSize,c=r.strides,u=r.pad,l=S.Ld.computePool2DInfo(o.shape,s,c,1,u),f=new yk(l);return n.runWebGLProgram(f,[a],o.dtype)}};var xk={kernelName:S.w,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return DO({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},jk=function e(t,n,r,a,i,o){Object(_.a)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],S.Ld.assertAndGetBroadcastShape(t,n),S.Ld.assertAndGetBroadcastShape(t,r);var s="0.0";null!=a&&(S.Ld.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var c="1.0";null!=i&&(S.Ld.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(c,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")},Sk=function e(t,n,r,a,i,o){Object(_.a)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],S.Ld.assertAndGetBroadcastShape(t,n),S.Ld.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=a&&(S.Ld.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var c="vec4(1.0)";null!=i&&(S.Ld.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(c,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")},_k={kernelName:S.pb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,c=t.scale;S.qi.assert(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),S.qi.assert(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),S.qi.assert(null==c||i.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var u=r.varianceEpsilon;null==u&&(u=.001);var l=[a,i,o],f=null;null!=s&&(f=s.shape,l.push(s));var d=null;null!=c&&(d=c.shape,l.push(c));var p=Object(S.Me)().getBool("WEBGL_PACK_NORMALIZATION")?new Sk(a.shape,i.shape,o.shape,f,d,u):new jk(a.shape,i.shape,o.shape,f,d,u);return n.runWebGLProgram(p,l,l[0].dtype)}},Ck=function(){function e(t){Object(_.a)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=Qg(this.rank),a="uniform int start[".concat(this.rank,"];"),i=function(e){if(1===e)return"sourceLoc";if(e<=6)return Ek.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),o=t.map((function(e,t){return"sourceLoc.".concat(Ek[t]," = start[").concat(t,"] + coords.").concat(Ek[t],";")}));n="\n        ".concat(r," sourceLoc;\n        ").concat(r," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      ".concat(a,"\n      void main() {\n        ").concat(n,"\n        setOutput(getSource(").concat(i,"));\n      }\n    ")}return Object(C.a)(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the ")+"length of start (".concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}(),Ek=["x","y","z","w","u","v"];var Nk=function(){function e(t){Object(_.a)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=Qg(this.rank),r=Ay("coords",this.rank),a=Ay("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),c=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),u=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      uniform int start[".concat(this.rank,"];\n      void main() {\n        ").concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(u,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")}return Object(C.a)(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the ")+"length of start (".concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}();function Tk(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size,s=S.zh.parseSliceParams(a,i,o),c=Object(A.a)(s,2),u=c[0],l=c[1];if(S.zh.assertParamsValid(a,u,l),0===S.qi.sizeFromShape(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var f=n.texData.get(a.dataId),d=jy(f.values,u,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,d)}var p=n.texData.get(a.dataId).isPacked,h=S.zh.isSliceContinous(a.shape,u,l);if(p||!h){var v=Object(S.Me)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Nk(l):new Ck(l),m=v.getCustomSetupFunc(u);return n.runWebGLProgram(v,[a],a.dtype,m)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.complexParentRefCount=0,o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=S.zh.computeFlatOffset(t,S.qi.computeStrides(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var c=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,c+1),i}(a,u,l,n)}var Ik={kernelName:S.Tc,backendName:"webgl",kernelFunc:Tk},Ak={kernelName:S.x,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;S.qi.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),c=S.Ld.getReshaped(a.shape,i,s),u=S.Ld.getPermuted(c.length,i.length),l=S.Ld.getReshapedPermuted(a.shape,i,s),f=S.Ld.getSliceBeginCoords(o,i.length),d=S.Ld.getSliceSize(l,o,i.length),p=[],h=jO({inputs:{x:a},backend:n,attrs:{shape:c}}),v=PO({inputs:{x:h},backend:n,attrs:{perm:u}}),m=jO({inputs:{x:v},backend:n,attrs:{shape:l}}),b=Tk({inputs:{x:m},backend:n,attrs:{begin:f,size:d}});return p.push(h),p.push(v),p.push(m),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}};var Mk={kernelName:S.y,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),c=n.readSync(i.dataId),u=ry(s,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}},Pk=vO({opSnippet:"return float(a != b);",dtype:"bool"}),Rk={kernelName:S.ic,backendName:"webgl",kernelFunc:Pk};function Dk(e){var t=e.inputs,n=e.backend,r=t.input;return aO({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Fk={kernelName:S.wc,backendName:"webgl",kernelFunc:Dk};var Lk={kernelName:S.A,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return aO({inputs:{x:i},backend:r});var s=S.yi(i.shape),c=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),u=oO({inputs:{real:c,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(c),u}if("complex64"===i.dtype){var l=Dk({inputs:{input:i},backend:r}),f=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),f}if(!S.qi.hasEncodingLoss(i.dtype,o)){var d=aO({inputs:{x:i},backend:r});return{dataId:d.dataId,shape:d.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new zy(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var p=r.makeTensorInfo([],"bool",S.qi.getTypedArrayFromDType("bool",1)),h=Pk({inputs:{a:i,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),h}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},zk="return ceil(x);",qk=hO({opSnippet:zk,packedOpSnippet:zk,cpuKernelImpl:iy}),Vk={kernelName:S.B,backendName:"webgl",kernelFunc:qk},Bk=function(){function e(t){Object(_.a)(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return Object(C.a)(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}(),Uk=function(){function e(t){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return Object(C.a)(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}();var Wk={kernelName:S.C,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax,c=(t=Object(S.Me)().getBool("WEBGL_PACK_CLIP")?new Uk(i.shape):new Bk(i.shape)).getCustomSetupFunc(o,s);return r.runWebGLProgram(t,[i],i.dtype,c)}},Gk=function e(t){Object(_.a)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "};function Hk(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var Kk={kernelName:S.E,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new Gk(r.shape),o=[Hk(r,a.complexTensorInfos.real),Hk(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},Xk=function e(t){Object(_.a)(this,e),this.outputShape=[],this.outputShape=S.Ld.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,c=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(c,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")},Qk=function e(t,n){Object(_.a)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=S.Ld.computeOutShape(t,n);var r=this.outputShape,a=r.length,i=Qg(a),o=Ay("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var c=new Array(t.length-1);c[0]=t[0][n];for(var u=1;u<c.length;u++)c[u]=c[u-1]+t[u][n];for(var l=s[n],f=s.slice(-2),d=s.join(),p="if (".concat(l," < ").concat(c[0],") {\n        return getChannel(\n            getT0(").concat(d,"), vec2(").concat(f.join(),"));\n        }"),h=1;h<c.length;h++){var v=c[h-1];p+="\n        if (".concat(l," < ").concat(c[h],"  && ").concat(l," >= ").concat(c[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat(Yk(s,l,v),"),\n            vec2(").concat(Yk(f,l,v),"));\n        }")}var m=c.length,b=c[c.length-1];p+="\n        return getChannel(\n          getT".concat(m,"(").concat(Yk(s,l,b),"),\n          vec2(").concat(Yk(f,l,b),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")};function Yk(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function Zk(e){var t=e.inputs,n=e.backend,r=t.input;return aO({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var Jk={kernelName:S.yb,backendName:"webgl",kernelFunc:Zk};function $k(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return Dk({inputs:{input:e},backend:n})})),i=e.map((function(e){return Zk({inputs:{input:e},backend:n})})),o=$k(a,t,n),s=$k(i,t,n),c=oO({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}if("string"===r){var u=ew(e,t,n),l=u.tensors2D,f=u.outShape,d=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),p=1===l[0].shape[0],h=oy(d,f,r,p),v=S.Ld.computeOutShape(e.map((function(e){return e.shape})),t),m=n.makeTensorInfo(v,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}if(e.length>Object(S.Me)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var b=Math.floor(e.length/2),g=$k(e.slice(0,b),t,n),y=$k(e.slice(b),t,n),O=$k([g,y],t,n);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),O}if(Object(S.Me)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var k=new Qk(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(k,e,r)}var w=ew(e,t,n),x=w.tensors2D,j=w.outShape,_=new Xk(x.map((function(e){return e.shape}))),C=n.runWebGLProgram(_,x,r);x.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var E=jO({inputs:{x:C},attrs:{shape:j},backend:n});return n.disposeIntermediateTensorInfo(C),E}function ew(e,t,n){var r=S.Ld.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return jO({inputs:{x:e},attrs:{shape:[-1,S.qi.sizeFromShape(e.shape.slice(t))]},backend:n})})),outShape:r}}function tw(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=S.qi.parseAxisParam(r,t[0].shape)[0],i=S.Ld.computeOutShape(t.map((function(e){return e.shape})),a);if(0===S.qi.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return S.qi.sizeFromShape(e.shape)>0}));if(1===o.length)return aO({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));return S.Ld.assertParamsConsistent(s,a),$k(o,a,n)}var nw={kernelName:S.F,backendName:"webgl",kernelFunc:tw},rw=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(_.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,c=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),v=t.inChannels%4,m="channelsLast"===t.dataFormat,b=m?1:2,g=m?2:3,y=m?3:1,O="",k="";r&&(O=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(O,"\n\n      const ivec2 strides = ivec2(").concat(c,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(y,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(b,"], coords[").concat(g,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")},aw=function e(t){Object(_.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,c=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,f=t.filterDepth,d=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(f,"; wF++) {\n          int xF = xFCorner + wF * ").concat(c,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(u,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},iw=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var a=r.filterWidth,i=r.inChannels,o=r.strideWidth,s=r.strideHeight,c=r.padInfo,u=r.outWidth,l=r.dilationWidth,f=r.dilationHeight,d=r.dataFormat,p=c.left,h=c.top,v=i*a,m=mg(),b="channelsLast"===d,g=b?0:1,y=b?1:2,O="",k=0;k<=1;k++)for(var w=0;w<=1;w++)O+="\n          blockIndex = rc.y + ".concat(w,";\n          pos = rc.x + ").concat(k,";\n\n          if(blockIndex < ").concat(t[1]," && pos < ").concat(t[0],") {\n            offsetY = int(blockIndex / (").concat(u,")) * ").concat(s," - ").concat(h,";\n            d0 = offsetY + ").concat(f," * (pos / ").concat(v,");\n\n            if(d0 < ").concat(n[g]," && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ").concat(u,".) * ").concat(o,". - ").concat(p,".);\n              d1 = offsetX + ").concat(l," * (int(mod(float(pos), ").concat(v,".) / ").concat(i,".));\n\n              if(d1 < ").concat(n[y]," && d1 >= 0) {\n\n                ch = int(mod(float(pos), ").concat(i,".));\n\n                if (").concat(b,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*k+w,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*k+w,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(O,"\n\n        ").concat(m.output," = result;\n      }\n    ")};function ow(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,c=e.preluActivationWeights,u=void 0===c?null:c,l=e.leakyreluAlpha,f=void 0===l?0:l,d=e.activation,p=void 0===d?null:d,h=n.shape,v=i.texData.get(n.dataId),m=a.inChannels,b=h[0]*h[1]*h[2],g=a.outChannels,y="channelsLast"===a.dataFormat,O=[],k=(1===b||1===g)&&m>1e3,w=h[2]%2!==0&&!!v.isPacked;if(!k&&Object(S.Me)().getBool("WEBGL_LAZILY_UNPACK")&&Object(S.Me)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&w){var x=y?h[0]*h[1]*(h[2]+1):h[0]*h[2]*(h[3]+1),j={dataId:n.dataId,shape:[1,x,a.inChannels],dtype:n.dtype},_=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,S.qi.assert(ug(v.shape,j.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(j.shape," isn't free")}));var C=jO({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});O.push(C);var E=DO({a:j,b:C,backend:i,transposeA:false,transposeB:false,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:f}),N=i.texData.get(E.dataId);S.qi.assert(N.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=_,N.shape=a.outShape,(t=aO({inputs:{x:E},backend:i})).shape=a.outShape,O.push(E)}else{var T=jO({inputs:{x:n},backend:i,attrs:{shape:[1,y?h[0]*h[1]*h[2]:h[0]*h[2]*h[3],a.inChannels]}}),I=jO({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),A=DO({a:T,b:I,transposeA:false,transposeB:false,backend:i,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:f});t=jO({inputs:{x:A},backend:i,attrs:{shape:a.outShape}}),O.push(T),O.push(I),O.push(A)}for(var M=0,P=O;M<P.length;M++){var R=P[M];i.disposeIntermediateTensorInfo(R)}return t}function sw(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,c=void 0===s?null:s,u=e.leakyreluAlpha,l=void 0===u?0:u,f=e.activation,d=void 0===f?null:f,p=r.filterWidth,h=r.filterHeight,v=r.inChannels,m=r.outWidth,b=r.outHeight,g="channelsLast"===r.dataFormat,y=p*h*v,O=b*m,k=[y,O],w=[],x=jO({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),j=jO({inputs:{x:n},backend:a,attrs:{shape:[1,y,S.qi.sizeFromShape(n.shape)/y]}});w.push(x),w.push(j);var _=new iw(k,x.shape,r),C=a.runWebGLProgram(_,[x],"float32"),E=jO({inputs:{x:C},backend:a,attrs:{shape:[1,k[0],k[1]]}});w.push(C),w.push(E);var N=null!=o,T=null!=c,I="leakyrelu"===d,A=d?mO(d,!0):null,M=new bO(E.shape,j.shape,[1,O,r.outChannels],!0,!1,N,A,T,I),P=[E,j];if(o&&P.push(o),T&&P.push(c),I){var R=a.makeTensorInfo([],"float32",S.qi.createScalarValue(l,"float32"));P.push(R),w.push(R)}var D=a.runWebGLProgram(M,P,"float32"),F=jO({inputs:{x:D},backend:a,attrs:{shape:g?[1,b,m,r.outChannels]:[1,r.outChannels,b,m]}});w.push(D);for(var L=0,z=w;L<z.length;L++){var q=z[L];a.disposeIntermediateTensorInfo(q)}return F}var cw={kernelName:S.G,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,c=a.pad,u=a.dataFormat,l=a.dilations,f=a.dimRoundingMode,d=S.Ld.convertConv2DDataFormat(u),p=S.Ld.computeConv2DInfo(i.shape,o.shape,s,l,c,f,!1,d);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(Object(S.Me)().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=sw({x:i,filter:o,convInfo:p,backend:r});else{var h=new rw(p);t=r.runWebGLProgram(h,[i,o],"float32")}else t=ow({x:i,filter:o,convInfo:p,backend:r});var v=jO({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),v}},uw=function e(t){Object(_.a)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},lw=function e(t){Object(_.a)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,c=r-1-t.padInfo.left,u=o?1:2,l=o?2:3,f=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(f,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(u,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},fw=function e(t){Object(_.a)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},dw=function e(t){Object(_.a)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,c=n-1-t.padInfo.front,u=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(c,", ").concat(u,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var pw={kernelName:S.H,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,c=r.dataFormat,u=r.dimRoundingMode,l=r.filterShape,f=S.Ld.convertConv2DDataFormat(c),d=S.Ld.computeConv2DInfo(a.shape,l,o,1,s,u,!1,f),p=new uw(d);return n.runWebGLProgram(p,[a,i],"float32")}};var hw={kernelName:S.I,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,c=r.pad,u=r.dataFormat,l=r.dimRoundingMode,f=S.Ld.convertConv2DDataFormat(u),d=S.Ld.computeConv2DInfo(o,i.shape,s,1,c,l,!1,f),p=new lw(d);return n.runWebGLProgram(p,[a,i],"float32")}};var vw={kernelName:S.J,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,c=r.dilations,u=S.Ld.computeConv3DInfo(a.shape,i.shape,o,c,s),l=new aw(u);return n.runWebGLProgram(l,[a,i],"float32")}};var mw={kernelName:S.K,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,c=r.filterShape,u=S.Ld.computeConv3DInfo(a.shape,c,o,1,s),l=new fw(u);return n.runWebGLProgram(l,[a,i],"float32")}};var bw={kernelName:S.L,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,c=r.inputShape,u=S.Ld.computeConv3DInfo(c,i.shape,s,1,o),l=new dw(u);return n.runWebGLProgram(l,[a,i],"float32")}},gw=hO({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),yw={kernelName:S.M,backendName:"webgl",kernelFunc:gw},Ow=hO({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),kw={kernelName:S.N,backendName:"webgl",kernelFunc:Ow},ww=function e(t,n,r,a,i){Object(_.a)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=Object(A.a)(t,4),s=o[0],c=o[1],u=o[2],l=o[3],f=Object(A.a)(n,1)[0],d=Object(A.a)(r,2),p=d[0],h=d[1];this.outputShape=[f,p,h,l];var v="bilinear"===a?1:0,m="".concat(c-1,".0"),b="".concat(u-1,".0"),g=p>1?["".concat((c-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(m," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(m)],y=Object(A.a)(g,3),O=y[0],k=y[1],w=y[2],x=h>1?["".concat((u-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(b," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(b)],j=Object(A.a)(x,3),S=j[0],C=j[1],E=j[2];this.userCode="\n      const float height_ratio = float(".concat(O,");\n      const float width_ratio = float(").concat(S,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(k,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(w,";\n        if( in_y < 0.0 || in_y > ").concat(m," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(E,";\n        if( in_x < 0.0 || in_x > ").concat(b," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(v," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")},xw={kernelName:S.O,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,c=r.method,u=r.extrapolationValue,l=new ww(a.shape,i.shape,s,c,u);return n.runWebGLProgram(l,[a,i,o],"float32")}},jw=function(){function e(t,n,r){Object(_.a)(this,e),this.variableNames=["x"],this.outputShape=t;var a=t.length,i=n?"0.0":"getX(".concat(Sw(a,"coords"),")"),o=t[t.length-1],s="",c="";n?(s=r?"end != ".concat(o-1):"end != 0",c=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(o):"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode="\n      uniform float index;\n      void main() {\n        ".concat(Qg(a)," coords = getOutputCoords();\n        int end = ").concat(_w(a,"coords"),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(c,";\n          ").concat(_w(a,"coords")," = idx;\n          val += getX(").concat(Sw(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}return Object(C.a)(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.index&&(t.index=n.getUniformLocation(r,"index")),n.gl.uniform1f(t.index,e)}}}]),e}();function Sw(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function _w(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var Cw={kernelName:S.P,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,c=a.shape.length,u=S.Ld.getAxesPermutation([i],c),l=a;null!=u&&(l=PO({inputs:{x:a},backend:n,attrs:{perm:u}}));var f=S.Ld.getInnerMostAxes(1,c)[0];if(f!==c-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(i));for(var d=l.shape[f],p=aO({inputs:{x:l},backend:n}),h=0;h<=Math.ceil(Math.log2(d))-1;h++){var v=new jw(l.shape,!1,s),m=v.getCustomSetupFunc(h),b=p;p=n.runWebGLProgram(v,[p],p.dtype,m),n.disposeIntermediateTensorInfo(b)}if(o){var g=new jw(l.shape,o,s),y=p;p=n.runWebGLProgram(g,[p],p.dtype),n.disposeIntermediateTensorInfo(y)}if(null!=u){var O=PO({inputs:{x:p},backend:n,attrs:{perm:S.Ld.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(l),O}return p}};var Ew={kernelName:S.R,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var c=n.readSync(a.dataId),u=n.readSync(i.dataId),l=ry(c,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var f=n.bufferSync(a),d=n.bufferSync(i),p=ay(f,d,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},Nw=function(){function e(t,n,r){Object(_.a)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Object(C.a)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var Tw={kernelName:S.S,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;S.qi.assert(i>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(i)}));var s=a.shape[0],c="NHWC"===o?a.shape[1]:a.shape[2],u="NHWC"===o?a.shape[2]:a.shape[3],l="NHWC"===o?a.shape[3]:a.shape[1],f=c*i,d=u*i,p=l/(i*i),h=new Nw("NHWC"===o?[s,f,d,p]:[s,p,f,d],i,o);return n.runWebGLProgram(h,[a],a.dtype)}},Iw=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(_.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,s=t.inWidth,c=t.padInfo.top,u=t.padInfo.left,l=t.strideHeight,f=t.strideWidth,d=t.dilationHeight,p=t.dilationWidth,h=t.filterHeight,v=t.filterWidth,m=t.outChannels/t.inChannels,b="",g="";r&&(b=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),g="result = activation(result);");var y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(f,");\n      const ivec2 pads = ivec2(").concat(c,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(m,";\n        int q = d2 - d1 * ").concat(m,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(d,";\n\n          if (xR < 0 || xR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(v,"; wC++) {\n            int xC = xCCorner + wC * ").concat(p,";\n\n            if (xC < 0 || xC >= ").concat(s,") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(y,"\n        ").concat(g,"\n        setOutput(result);\n      }\n    ")},Aw=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(_.a)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var o=t.inHeight,s=t.inWidth,c=t.padInfo.top,u=t.padInfo.left,l=t.strideHeight,f=t.strideWidth,d=t.dilationHeight,p=t.dilationWidth,h=t.filterHeight,v=t.filterWidth,m=v,b="int xR; int xC; int xCOffset;",g=0;g<h;g++)for(var y=0;y<v;y++)b+="\n          vec4 xTexelR".concat(g,"C").concat(2*y," = vec4(0.);\n          vec4 wR").concat(g,"C").concat(y," = vec4(0.);\n          vec4 xR").concat(g,"C").concat(y," = vec4(0.);");for(var O=0;O<h;O++)for(var k=0;k<m;k++){var w=2*k;if(b+="\n          xR = xRCorner + ".concat(O*d,";\n          xC = xCCorner + ").concat(w*p,";\n        "),1===f){if(w<v&&(b+=u%2===1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ".concat(o," && xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(O,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(s,") {\n                    xTexelR").concat(O,"C").concat(w,".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR").concat(O,"C").concat(w," = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ").concat(o," && xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(s,") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR").concat(O,"C").concat(w," = vec4(previous.zw, xTexelR").concat(O,"C").concat(w,".xy);\n                } else {\n                  xR").concat(O,"C").concat(w," = vec4(0, 0, xTexelR").concat(O,"C").concat(w,".xy);\n                }\n              "):"\n                if(xR >= 0 && xR < ".concat(o," && xC >= 0 && xC < ").concat(s,") {\n                  xTexelR").concat(O,"C").concat(w," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(O,"C").concat(w," = vec4(0.);\n                }\n\n                xR").concat(O,"C").concat(w," = xTexelR").concat(O,"C").concat(w,";\n              "),w+1<v)){var x=u%2===0?S.qi.nearestLargerEven(p):p;p%2===0&&u%2===1||p%2!==0&&u%2!==1?(b+="\n                  xCOffset = xC + ".concat(u%2," + ").concat(x,";\n\n                  if(xR >= 0 && xR < ").concat(o," &&\n                    xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    xTexelR").concat(O,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                  }\n                "),p>1&&(b+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ".concat(o," &&\n                      xCOffset >= 0 && xCOffset < ").concat(s,") {\n                      xTexelR").concat(O,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR").concat(O,"C").concat(w," = vec4(0.);\n                    }\n                  ")),b+="\n                  xR".concat(O,"C").concat(w+1," = vec4(\n                    xTexelR").concat(O,"C").concat(w,".zw, xTexelR").concat(O,"C").concat(w+2,".xy);\n                ")):b+="\n                  xCOffset = xC + ".concat(x,";\n\n                  if(xR >= 0 && xR < ").concat(o," &&\n                    xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    xTexelR").concat(O,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR").concat(O,"C").concat(w+1," = xTexelR").concat(O,"C").concat(w+2,";\n                ")}}else w<v&&(b+="\n              if(xR >= 0 && xR < ".concat(o,") {\n            "),u%2===1?(b+="\n                xCOffset = xC + 1 - ".concat(f,";\n                if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(O,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(O,"C").concat(w," = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ").concat(s,") {\n                  xTexelR").concat(O,"C").concat(w+2," = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR").concat(O,"C").concat(w+2," = vec4(0.);\n                }\n\n                xR").concat(O,"C").concat(w," = vec4(\n                  xTexelR").concat(O,"C").concat(w,".zw, xTexelR").concat(O,"C").concat(w+2,".zw);\n              "),w+1<v&&(b+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ".concat(f,";\n                  if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR").concat(O,"C").concat(w+1," = vec4(xTexelR").concat(O,"C").concat(w+2,".xy, final.xy);\n                "))):(b+="\n                if(xC >= 0 && xC < ".concat(s,") {\n                  xTexelR").concat(O,"C").concat(w," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(O,"C").concat(w," = vec4(0.);\n                }\n\n                xCOffset = xC + ").concat(f,";\n                if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(O,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(O,"C").concat(w+2," = vec4(0.);\n                }\n\n                xR").concat(O,"C").concat(w," = vec4(\n                  xTexelR").concat(O,"C").concat(w,".xy, xTexelR").concat(O,"C").concat(w+2,".xy);\n              "),w+1<v&&(b+="\n                  xR".concat(O,"C").concat(w+1," = vec4(\n                    xTexelR").concat(O,"C").concat(w,".zw, xTexelR").concat(O,"C").concat(w+2,".zw);\n                "))),b+="}");w<v&&(b+="\n            vec4 wTexelR".concat(O,"C").concat(w," = getW(").concat(O,", ").concat(w,", d1, q);\n            wR").concat(O,"C").concat(w," = vec4(wTexelR").concat(O,"C").concat(w,".xz, wTexelR").concat(O,"C").concat(w,".xz);\n          "),w+1<v&&(b+="\n              vec4 wTexelR".concat(O,"C").concat(w+1," = getW(").concat(O,", ").concat(w+1,", d1, q);\n              wR").concat(O,"C").concat(w+1," =\n                vec4(wTexelR").concat(O,"C").concat(w+1,".xz, wTexelR").concat(O,"C").concat(w+1,".xz);")))}for(var j=0;j<h;j++)for(var C=0;C<v;C++)b+="dotProd += xR".concat(j,"C").concat(C," * wR").concat(j,"C").concat(C,";");var E="",N="";r&&(E=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),N="result = activation(result);");var T=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(E,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(f,");\n      const ivec2 pads = ivec2(").concat(c,", ").concat(u,");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ").concat(b,"\n\n        vec4 result = dotProd;\n        ").concat(T,"\n        ").concat(N,"\n        setOutput(result);\n      }\n    ")};var Mw={kernelName:S.T,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,c=r.dilations,u=r.dimRoundingMode,l=c;null==l&&(l=[1,1]),S.qi.assert(S.Ld.eitherStridesOrDilationsAreOne(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var f,d=S.Ld.computeConv2DInfo(a.shape,i.shape,o,l,s,u,!0);return f=Object(S.Me)().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new Aw(d):new Iw(d),n.runWebGLProgram(f,[a,i],"float32")}},Pw=function e(t){Object(_.a)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Rw=function e(t){Object(_.a)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,c=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(c,"; dm++) {\n              int d2 = d1 * ").concat(c," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var Dw={kernelName:S.U,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,c=r.pad,u=r.dimRoundingMode,l=r.filterShape,f=S.Ld.computeConv2DInfo(a.shape,l,o,s,c,u,!0),d=new Pw(f);return n.runWebGLProgram(d,[a,i],"float32")}};var Fw={kernelName:S.V,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,c=r.pad,u=r.dimRoundingMode,l=r.inputShape,f=S.Ld.computeConv2DInfo(l,i.shape,o,s,c,u,!0),d=new Rw(f);return n.runWebGLProgram(d,[a,i],"float32")}},Lw=function e(t){Object(_.a)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "};var zw={kernelName:S.W,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(Object(I.a)(r.shape),Object(I.a)(r.shape)),i=S.qi.sizeFromShape(r.shape),o=jO({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new Lw(i),c=n.runWebGLProgram(s,[o],o.dtype),u=jO({inputs:{x:c},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),u}},qw=function e(t){Object(_.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,c=t.filterWidth,u=t.dilationHeight,l=t.dilationWidth,f=a.top,d=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(u,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(c,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")};var Vw={kernelName:S.X,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,c=a.pad,u=a.dilations,l=S.Ld.computeDilation2DInfo(i.shape,o.shape,s,c,"NHWC",u),f=new qw(l),d=jO({inputs:{x:t=r.runWebGLProgram(f,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),d}},Bw=hO({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Uw={kernelName:S.bb,backendName:"webgl",kernelFunc:Bw},Ww={kernelName:S.cb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=Object(S.Me)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rO("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new nO("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},Gw=vO({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool"}),Hw={kernelName:S.eb,backendName:"webgl",kernelFunc:Gw},Kw=hO({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(S.Ld.ERF_P,";\n  float a1 = ").concat(S.Ld.ERF_A1,";\n  float a2 = ").concat(S.Ld.ERF_A2,";\n  float a3 = ").concat(S.Ld.ERF_A3,";\n  float a4 = ").concat(S.Ld.ERF_A4,";\n  float a5 = ").concat(S.Ld.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),Xw={kernelName:S.fb,backendName:"webgl",kernelFunc:Kw},Qw="return exp(x);",Yw=hO({opSnippet:Qw,packedOpSnippet:Qw,cpuKernelImpl:sy}),Zw={kernelName:S.gb,backendName:"webgl",kernelFunc:Yw};function Jw(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),c=a;return a<0&&(S.qi.assert(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),c=o+a+1),s.splice(c,0,1),jO({inputs:{x:i},backend:r,attrs:{shape:s}})}var $w={kernelName:S.hb,backendName:"webgl",kernelFunc:Jw},ex="return exp(x) - 1.0;",tx=hO({opSnippet:ex,packedOpSnippet:ex,cpuKernelImpl:cy}),nx={kernelName:S.ib,backendName:"webgl",kernelFunc:tx},rx=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")};function ax(e,t,n){var r=n.texData.get(e.dataId),a=S.qi.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],o=jO({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,c=new rx("real",s,t),u=new rx("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],f=n.runWebGLProgram(c,l,"float32"),d=n.runWebGLProgram(u,l,"float32"),p=oO({inputs:{real:f,imag:d},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d);var h=jO({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),h}var ix={kernelName:S.jb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return ax(t.input,!1,n)}},ox=function(){function e(t,n){Object(_.a)(this,e),this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return Object(C.a)(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}}}]),e}();function sx(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||S.qi.inferDtype(a))){var o=S.qi.getArrayFromDType(i,S.qi.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new ox(r,a),c=s.getCustomSetupFunc(a);return t.runWebGLProgram(s,[],i,c)}var cx,ux={kernelName:S.kb,backendName:"webgl",kernelFunc:sx},lx=function e(t){Object(_.a)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},fx={kernelName:S.lb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new lx(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},dx="return floor(x);",px=hO({opSnippet:dx,packedOpSnippet:dx,cpuKernelImpl:uy}),hx={kernelName:S.mb,backendName:"webgl",kernelFunc:px},vx=vO({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),mx={kernelName:S.nb,backendName:"webgl",kernelFunc:vx},bx=function e(t){Object(_.a)(this,e),this.variableNames=["A"];var n=mg(),r=Object(A.a)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")},gx=function e(t){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=mg(),r=Object(A.a)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},yx={kernelName:S.ob,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,c="undefined"!==typeof ImageBitmap&&a instanceof ImageBitmap,u=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],l=Object(A.a)(u,2),f=l[0],d=l[1],p=[d,f],h=[d,f,i];(s||o||c)&&(null==cx&&(cx=document.createElement("canvas").getContext("2d")),cx.canvas.width=f,cx.canvas.height=d,cx.drawImage(a,0,0,f,d),a=cx.canvas);var v=n.makeTensorInfo(p,"int32");n.texData.get(v.dataId).usage=Mb.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(v.dataId),a);var m=Object(S.Me)().getBool("WEBGL_PACK")?new gx(h):new bx(h),b=n.runWebGLProgram(m,[v],"int32");return n.disposeData(v.dataId),b}};var Ox={kernelName:S.qb,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,c=n.preluActivationWeights,u=a.strides,l=a.pad,f=a.dataFormat,d=a.dilations,p=a.dimRoundingMode,h=a.activation,v=a.leakyreluAlpha,m=S.Ld.convertConv2DDataFormat(f),b=S.Ld.computeConv2DInfo(i.shape,o.shape,u,d,l,p,!1,m),g=[];if(1!==b.filterHeight||1!==b.filterWidth||1!==b.dilationHeight||1!==b.dilationWidth||1!==b.strideHeight||1!==b.strideWidth||"SAME"!==b.padInfo.type&&"VALID"!==b.padInfo.type)if(Object(S.Me)().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=sw({x:i,filter:o,convInfo:b,backend:r,bias:s,activation:h,preluActivationWeights:c,leakyreluAlpha:v});else{var y=null!=s,O=null!=c,k="leakyrelu"===h,w=h?mO(h,!1):null,x=new rw(b,y,w,O,k),j=[i,o];if(s&&j.push(s),c&&j.push(c),k){var _=r.makeTensorInfo([],"float32",S.qi.createScalarValue(v,"float32"));j.push(_),g.push(_)}t=r.runWebGLProgram(x,j,"float32")}else t=ow({x:i,filter:o,convInfo:b,backend:r,bias:s,activation:h,preluActivationWeights:c,leakyreluAlpha:v});var C=jO({inputs:{x:t},backend:r,attrs:{shape:b.outShape}});return g.push(t),g.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),C}};var kx={kernelName:S.rb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,c=r.strides,u=r.pad,l=r.dilations,f=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,h=[],v=l;null==v&&(v=[1,1]),S.qi.assert(S.Ld.eitherStridesOrDilationsAreOne(c,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(v,"'")}));var m,b=S.Ld.computeConv2DInfo(a.shape,i.shape,c,v,u,f,!0),g=Object(S.Me)().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,y=d?mO(d,g):null,O=[a,i],k=null!=o,w=null!=s,x="leakyrelu"===d;if(k&&O.push(o),w&&O.push(s),x){var j=n.makeTensorInfo([],"float32",S.qi.createScalarValue(p,"float32"));O.push(j),h.push(j)}m=g?new Aw(b,k,y,w,x):new Iw(b,k,y,w,x);var _=n.runWebGLProgram(m,O,"float32");return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),_}},wx=function e(t,n,r){Object(_.a)(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=Qg(n.length),i=Qg(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")};var xx={kernelName:S.sb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=S.Ld.prepareAndValidate(r,a),c=Object(A.a)(s,4),u=c[0],l=c[1],f=c[2],d=c[3],p=jO({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),h=jO({inputs:{x:r},backend:n,attrs:{shape:[S.qi.sizeFromShape(r.shape)/f,f]}}),v=new wx(o,d,[l,f]),m=n.runWebGLProgram(v,[h,p],h.dtype),b=jO({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),b}},jx=function e(t,n){Object(_.a)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=Qg(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("int(getIndices(resRC.x, resRC.z))"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")};var Sx={kernelName:S.tb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,c=S.qi.parseAxisParam(o,a.shape)[0],u=S.Ld.segment_util.collectGatherOpShapeInfo(a,i,c,s),l=S.qi.sizeFromShape(i.shape),f=[],d=jO({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=jO({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,l/u.batchSize]}});f.push(d),f.push(p);var h=[u.batchSize,u.outerSize,l/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(p),m=n.bufferSync(d),b=ly(m,v,h);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(u.outputShape,b.dtype,b.values)}var g=new jx(d.shape,h),y=n.runWebGLProgram(g,[d,p],d.dtype);f.push(y);var O=jO({inputs:{x:y},backend:n,attrs:{shape:u.outputShape}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),O}},_x=vO({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:fy,dtype:"bool"}),Cx={kernelName:S.ub,backendName:"webgl",kernelFunc:_x},Ex=vO({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool"}),Nx={kernelName:S.vb,backendName:"webgl",kernelFunc:Ex};var Tx={kernelName:S.wb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return ax(t.input,!0,n)}},Ix=hO({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Ax={kernelName:S.zb,backendName:"webgl",kernelFunc:Ix},Mx=hO({opSnippet:"return float(isinf(x));",dtype:"bool"}),Px={kernelName:S.Ab,backendName:"webgl",kernelFunc:Mx},Rx=hO({opSnippet:"return float(isnan(x));",dtype:"bool"}),Dx={kernelName:S.Bb,backendName:"webgl",kernelFunc:Rx},Fx=vO({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:dy,dtype:"bool"}),Lx={kernelName:S.Gb,backendName:"webgl",kernelFunc:Fx},zx=vO({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",dtype:"bool"}),qx={kernelName:S.Hb,backendName:"webgl",kernelFunc:zx};var Vx={kernelName:S.Ib,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=py(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},Bx=hO({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:hy}),Ux={kernelName:S.Jb,backendName:"webgl",kernelFunc:Bx},Wx=hO({opSnippet:"return log(1.0 + x);"}),Gx={kernelName:S.Kb,backendName:"webgl",kernelFunc:Wx},Hx=vO({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Kx={kernelName:S.Mb,backendName:"webgl",kernelFunc:Hx},Xx=hO({opSnippet:"return float(!(x >= 1.0));"}),Qx={kernelName:S.Nb,backendName:"webgl",kernelFunc:Xx},Yx=vO({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),Zx={kernelName:S.Ob,backendName:"webgl",kernelFunc:Yx},Jx=function e(t,n,r,a,i){Object(_.a)(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,c=t[3]-1;this.outputShape=t;var u="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(u,")"):1===i?"1.0/(".concat(u,")"):"exp(log(".concat(u,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(c,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")},$x=function e(t,n,r,a,i){Object(_.a)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,c=t[3]-1;this.outputShape=t;var u="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(u,")"):1===i?"1.0/(".concat(u,")"):"exp(log(".concat(u,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(c,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")},ej={kernelName:S.Db,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,c=r.beta,u=Object(S.Me)().getBool("WEBGL_PACK_NORMALIZATION")?new $x(a.shape,i,o,s,c):new Jx(a.shape,i,o,s,c);return n.runWebGLProgram(u,[a],a.dtype)}},tj=function e(t,n,r,a,i){Object(_.a)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")},nj={kernelName:S.Eb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,c=r.bias,u=r.alpha,l=r.beta,f=new tj(a.shape,s,c,u,l);return n.runWebGLProgram(f,[a,i,o],a.dtype)}};function rj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,c=S.qi.parseAxisParam(i,a.shape),u=c,l=S.Ld.getAxesPermutation(u,s),f=null!=l,d=n.shouldExecuteOnCPU([a]),p=a;if(f){if(d){for(var h=n.texData.get(p.dataId).values,v=new Array(s),m=0;m<v.length;m++)v[m]=a.shape[l[m]];var b=Ny(h,a.shape,a.dtype,l,v);p=n.makeTensorInfo(v,a.dtype),n.texData.get(p.dataId).values=b}else p=IO(a,l,n);u=S.Ld.getInnerMostAxes(u.length,s)}S.Ld.assertAxesAreInnerMostDims("max",u,s);var g,y=S.Ld.computeOutAndReduceShapes(p.shape,u),O=Object(A.a)(y,2),k=O[0],w=O[1],x=k;if(o&&(x=S.Ld.expandShapeToKeepDim(k,c)),d){var j=n.texData.get(p.dataId).values,_=vy(j,S.qi.sizeFromShape(w),x,a.dtype);g=n.makeTensorInfo(x,a.dtype),n.texData.get(g.dataId).values=_}else g=function(e,t,n,r){var a=S.qi.sizeFromShape(t),i=jO({inputs:{x:e},attrs:{shape:[S.qi.sizeFromShape(e.shape)/a,a]},backend:r}),o=EO(i,e.dtype,"max",r),s=jO({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(p,w,x,n);return f&&n.disposeIntermediateTensorInfo(p),g}var aj={kernelName:S.Pb,backendName:"webgl",kernelFunc:rj},ij=vO({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:my}),oj={kernelName:S.Vb,backendName:"webgl",kernelFunc:ij};var sj={kernelName:S.Qb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;hg(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,c=r.dimRoundingMode;S.qi.assert(S.Ld.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var u=S.Ld.computePool2DInfo(a.shape,i,o,1,s,c);if(1===u.filterWidth&&1===u.filterHeight&&S.qi.arraysEqual(u.inShape,u.outShape))return aO({inputs:{x:a},backend:n});var l=new vk(u,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var cj={kernelName:S.Rb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,c=r.dataFormat,u=r.dimRoundingMode,l=S.Ld.computePool3DInfo(a.shape,i,o,[1,1,1],s,u,c),f=new mk(l,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}},uj=function e(t){Object(_.a)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,c=o-1-t.padInfo.left,u=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(u," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},lj=function e(t){Object(_.a)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,f=c-1-t.padInfo.front,d=u-1-t.padInfo.top,p=l-1-t.padInfo.left,h=c*u*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(d,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(c,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(u," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var fj={kernelName:S.Sb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,c=r.pad,u=r.dimRoundingMode,l=S.Ld.computePool3DInfo(i.shape,o,s,[1,1,1],c,u),f=new mk(l,"max",!0),d=n.runWebGLProgram(f,[i],i.dtype),p=new lj(l),h=n.runWebGLProgram(p,[a,d],i.dtype);return n.disposeIntermediateTensorInfo(d),h}};var dj={kernelName:S.Tb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;hg([i,t.output],"maxPoolGrad");var s=r.filterSize,c=r.strides,u=r.pad,l=r.dimRoundingMode,f=S.Ld.computePool2DInfo(o.shape,s,c,1,u,l),d=new vk(f,"max",!0),p=n.runWebGLProgram(d,[o],o.dtype),h=new uj(f),v=n.runWebGLProgram(h,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),v}};var pj={kernelName:S.Ub,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,c=n.includeBatchInIndex,u=r;S.qi.assert(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];S.qi.assert(S.Ld.eitherStridesOrDilationsAreOne(o,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")}));var f=S.Ld.computePool2DInfo(a.shape,i,o,l,s),d=function(e,t,n,r){var a=new vk(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new vk(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,c,f,u),p=Object(A.a)(d,2);return[p[0],p[1]]}};var hj={kernelName:S.Wb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,c=a.shape.length,u=S.qi.parseAxisParam(o,a.shape),l=u,f=S.Ld.getAxesPermutation(l,c),d=null!=f,p=s.shouldExecuteOnCPU([a]),h=[],v=a;if(d){if(p){for(var m=s.texData.get(v.dataId).values,b=new Array(c),g=0;g<b.length;g++)b[g]=a.shape[f[g]];var y=Ny(m,a.shape,a.dtype,f,b);v=s.makeTensorInfo(b,a.dtype),s.texData.get(v.dataId).values=y}else v=IO(a,f,s);h.push(v),l=S.Ld.getInnerMostAxes(l.length,c)}S.Ld.assertAxesAreInnerMostDims("sum",l,c);var O=S.Ld.computeOutAndReduceShapes(v.shape,l),k=Object(A.a)(O,2),w=k[0],x=k[1],j=w;i&&(j=S.Ld.expandShapeToKeepDim(w,u));for(var _=function(e,t,n,r){var a=S.qi.sizeFromShape(t),i=jO({inputs:{x:e},attrs:{shape:[S.qi.sizeFromShape(e.shape)/a,a]},backend:r}),o=EO(i,"float32","mean",r),s=jO({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(v,x,j,s),C=0,E=h;C<E.length;C++){var N=E[C];s.disposeIntermediateTensorInfo(N)}return _}};var vj={kernelName:S.Xb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,c=S.qi.parseAxisParam(i,a.shape),u=c,l=S.Ld.getAxesPermutation(u,s),f=a;null!=l&&(f=PO({inputs:{x:a},backend:n,attrs:{perm:l}}),u=S.Ld.getInnerMostAxes(u.length,a.shape.length)),S.Ld.assertAxesAreInnerMostDims("min",u,s);var d,p=S.Ld.computeOutAndReduceShapes(f.shape,u),h=Object(A.a)(p,2),v=h[0],m=h[1],b=jO({inputs:{x:f},backend:n,attrs:{shape:[-1,S.qi.sizeFromShape(m)]}}),g=EO(b,b.dtype,"min",n);return d=jO(o?{inputs:{x:g},backend:n,attrs:{shape:S.Ld.expandShapeToKeepDim(v,c)}}:{inputs:{x:g},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(f),d}},mj=vO({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:by}),bj={kernelName:S.Yb,backendName:"webgl",kernelFunc:mj},gj=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=Qg(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),u="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(u,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(u,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(c,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(u,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(u,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")},yj=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=Qg(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),c=Ay("rc",a),u=Ay("source",a),l="".concat(c[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(u.slice(-2).join(),")"),d="reflect"===r?0:1,p="";if(1===a){var h="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(u.join(),"), ").concat(f,");\n        ").concat(c[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(u.join(),"), ").concat(f,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(u.join(),"), ").concat(f,");\n        ").concat(c[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(u.join(),"), ").concat(f,");\n        }\n        rc = outputLoc;\n        ").concat(c[a-2]," += 1;\n        if(").concat(c[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(u.join(),"), ").concat(f,");\n          ").concat(c[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(u.join(),"), ").concat(f,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")},Oj={kernelName:S.Zb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=Object(S.Me)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yj(a.shape,i,o):new gj(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},kj=vO({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),wj={kernelName:S.ac,backendName:"webgl",kernelFunc:kj},xj=function(){function e(t,n,r){Object(_.a)(this,e),this.variableNames=["probs"],this.outputShape=[t,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")}return Object(C.a)(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}}}]),e}(),jj=vO({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Sj={kernelName:S.xc,backendName:"webgl",kernelFunc:jj},_j="return a - b;",Cj=vO({opSnippet:_j,packedOpSnippet:_j,supportsComplex:!0,cpuKernelImpl:_y}),Ej={kernelName:S.ed,backendName:"webgl",kernelFunc:Cj};function Nj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=S.qi.parseAxisParam([i],a.shape),s=rj({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),c=S.Ld.expandShapeToKeepDim(s.shape,o),u=jO({inputs:{x:s},backend:n,attrs:{shape:c}}),l=Cj({inputs:{a:a,b:u},backend:n}),f=Yw({inputs:{x:l},backend:n}),d=AO({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:!1}}),p=jO({inputs:{x:d},backend:n,attrs:{shape:c}}),h=jj({inputs:{a:f,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),h}var Tj={kernelName:S.Uc,backendName:"webgl",kernelFunc:Nj};var Ij={kernelName:S.cc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,c=s?a:Nj({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=c.shape[0],l=c.shape[1],f=new xj(u,l,i),d=f.getCustomSetupFunc(o),p=n.runWebGLProgram(f,[c],"int32",d);return s||n.disposeIntermediateTensorInfo(c),p}},Aj="return -x;";var Mj={kernelName:S.ec,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=yy(i.values,a.shape,a.dtype),s=Object(A.a)(o,2),c=s[0],u=s[1];return r.makeTensorInfo(u,a.dtype,c)}return t=Object(S.Me)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Zy(a.shape,Aj):new zy(a.shape,Aj),r.runWebGLProgram(t,[a],a.dtype)}},Pj=S.yf.nonMaxSuppressionV3Impl;var Rj={kernelName:S.fc,backendName:"webgl",kernelFunc:function(e){S.Ld.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,u=n.readSync(a.dataId),l=n.readSync(i.dataId),f=Pj(u,l,o,s,c).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},Dj=S.yf.nonMaxSuppressionV4Impl;var Fj={kernelName:S.gc,backendName:"webgl",kernelFunc:function(e){S.Ld.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,u=r.padToMaxOutputSize,l=n.readSync(a.dataId),f=n.readSync(i.dataId),d=Dj(l,f,o,s,c,u),p=d.selectedIndices,h=d.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},Lj=S.yf.nonMaxSuppressionV5Impl;var zj={kernelName:S.hc,backendName:"webgl",kernelFunc:function(e){S.Ld.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,u=r.softNmsSigma,l=n.readSync(a.dataId),f=n.readSync(i.dataId),d=Lj(l,f,o,s,c,u),p=d.selectedIndices,h=d.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},qj=function e(t,n,r,a){Object(_.a)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")},Vj={kernelName:S.kc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,c=S.qi.sizeFromShape(a.shape),u=new qj(c,i,o,s),l=jO({inputs:{x:a},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(u,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var d=jO({inputs:{x:f},backend:n,attrs:{shape:[].concat(Object(I.a)(a.shape),[i])}});return n.disposeIntermediateTensorInfo(f),d}};function Bj(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=Dk({inputs:{input:r},backend:n}),i=Bj({inputs:{x:a},backend:n}),o=Zk({inputs:{input:r},backend:n}),s=Bj({inputs:{x:o},backend:n}),c=oO({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}return sx({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var Uj={kernelName:S.rd,backendName:"webgl",kernelFunc:Bj};var Wj={kernelName:S.lc,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=Dk({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=Zk({inputs:{input:a},backend:r}),c=Bj({inputs:{x:s},backend:r}),u=oO({inputs:{real:o,imag:c},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(c),u}return sx({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var Gj={kernelName:S.nc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Jw({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){S.qi.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),S.qi.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=tw({inputs:t.map((function(e){var t=Jw({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},Hj=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=Qg(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(").concat(r,"));\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(c,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(").concat(r,"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")},Kj=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=Qg(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),c=Ay("rc",a),u=Ay("source",a),l="".concat(c[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(u.slice(-2).join(),")"),d=["".concat(i," rc = outputLoc;"),"".concat(c[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(c[a-2]," += 1;\n       if(").concat(c[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(c[a-1]," += 1;\n         if(").concat(l,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",v=0,m=1===a?2:4;v<m;v++)h+="\n        ".concat(d[v],"\n        if (").concat(p,") {\n          result[").concat(v,"] = float(").concat(r,");\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(u.join(),"), ").concat(f,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")},Xj=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue,s=Object(S.Me)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Kj(a.shape,i,o):new Hj(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)},Qj={kernelName:S.oc,backendName:"webgl",kernelFunc:Xj},Yj=vO({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Zj={kernelName:S.qc,backendName:"webgl",kernelFunc:Yj};var Jj={kernelName:S.sc,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,c=i.shape.length,u=[],l=S.qi.parseAxisParam(o,i.shape),f=l,d=S.Ld.getAxesPermutation(f,c),p=i;if(null!=d&&(p=PO({inputs:{x:i},backend:r,attrs:{perm:d}}),f=S.Ld.getInnerMostAxes(f.length,c),u.push(p)),S.Ld.assertAxesAreInnerMostDims("prod",f,c),r.shouldExecuteOnCPU([p])){var h=r.texData.get(p.dataId).values,v=Oy(p.shape,p.dtype,h,f),m=v.outVals,b=v.outShape,g=v.outDtype;t=r.makeTensorInfo(b,g,m)}else{var y=S.Ld.computeOutAndReduceShapes(p.shape,f),O=Object(A.a)(y,2),k=O[0],w=O[1],x=S.qi.sizeFromShape(w),j=jO({inputs:{x:p},backend:r,attrs:{shape:[-1,x]}}),_=EO(j,Object(S.Rh)(i.dtype),"prod",r);t=jO({inputs:{x:_},backend:r,attrs:{shape:k}}),u.push(j),u.push(_)}if(s){u.push(t);var C=S.Ld.expandShapeToKeepDim(t.shape,l);t=jO({inputs:{x:t},backend:r,attrs:{shape:C}})}return u.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},$j=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=ky(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},eS={kernelName:S.uc,backendName:"webgl",kernelFunc:$j},tS=hO({opSnippet:"return 1.0 / x;"}),nS={kernelName:S.yc,backendName:"webgl",kernelFunc:tS},rS=hO({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),aS={kernelName:S.Ac,backendName:"webgl",kernelFunc:rS},iS=hO({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),oS={kernelName:S.Bc,backendName:"webgl",kernelFunc:iS},sS=function e(t,n,r,a,i){Object(_.a)(this,e),this.variableNames=["A"],this.outputShape=[];var o=Object(A.a)(t,4),s=o[0],c=o[1],u=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,d=[a&&n>1?c-1:c,a&&r>1?u-1:u],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(u,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")},cS=function e(t,n,r,a,i){Object(_.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=Object(A.a)(t,4),s=o[0],c=o[1],u=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,d=[a&&n>1?c-1:c,a&&r>1?u-1:u],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],",\n          ").concat(d[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(u,".0,\n                                     ").concat(u,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")};var uS={kernelName:S.Dc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,c=Object(A.a)(s,2),u=c[0],l=c[1],f=Object(S.Me)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new cS(a.shape,u,l,i,o):new sS(a.shape,u,l,i,o);return n.runWebGLProgram(f,[a],"float32")}},lS=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Object(A.a)(n,3),i=a[1],o=a[2],s=Object(A.a)(t,3),c=s[1],u=s[2],l=[r&&c>1?i-1:i,r&&u>1?o-1:o],f=[r&&c>1?c-1:c,r&&u>1?u-1:u],d=l[0]/f[0],p=l[1]/f[1],h=1/d,v=1/p,m=2*Math.ceil(h)+2,b=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(d,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(u,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")};var fS={kernelName:S.Ec,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new lS(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},dS=function e(t,n,r,a,i){Object(_.a)(this,e),this.variableNames=["A"],this.outputShape=[];var o=Object(A.a)(t,4),s=o[0],c=o[1],u=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,d=[a&&n>1?c-1:c,a&&r>1?u-1:u],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";f=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(u,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")};var pS={kernelName:S.Fc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,c=Object(A.a)(s,2),u=c[0],l=c[1],f=new dS(a.shape,u,l,i,o);return n.runWebGLProgram(f,[a],a.dtype)}},hS=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Object(A.a)(n,3),i=a[1],o=a[2],s=Object(A.a)(t,3),c=s[1],u=s[2],l=[r&&c>1?i-1:i,r&&u>1?o-1:o],f=[r&&c>1?c-1:c,r&&u>1?u-1:u],d=l[0]/f[0],p=l[1]/f[1],h=1/d,v=1/p,m=2*Math.ceil(h)+2,b=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(d,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(u,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(f[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(f[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")};var vS={kernelName:S.Gc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new hS(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},mS=function e(t,n){Object(_.a)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=Qg(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")},bS=function e(t,n){Object(_.a)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=Ay("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=Qg(r);function c(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return c(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",c(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",c(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",c(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")};var gS={kernelName:S.Hc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=S.qi.parseAxisParam(i,a.shape);if(0===o)return aO({inputs:{x:a},backend:n});var c=Object(S.Me)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bS(a.shape,s):new mS(a.shape,s);return n.runWebGLProgram(c,[a],a.dtype)}},yS=function e(t,n,r,a){Object(_.a)(this,e),this.variableNames=["Image"],this.outputShape=[];var i=t[1],o=t[2],s=Math.sin(n).toFixed(3),c=Math.cos(n).toFixed(3);this.outputShape=t;var u=S.Ld.getImageCenter(a,i,o),l=Object(A.a)(u,2),f=l[0],d=l[1],p=f.toFixed(3),h=d.toFixed(3),v="";v="number"===typeof r?"float outputValue = ".concat(r.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(r.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ".concat(p,") * ").concat(c," - (float(y) - ").concat(h,") * ").concat(s,";\n          float coordYFloat = (float(x) - ").concat(p,") * ").concat(s," + (float(y) - ").concat(h,") * ").concat(c,";\n          int coordX = int(round(coordXFloat + ").concat(p,"));\n          int coordY = int(round(coordYFloat + ").concat(h,"));\n          ").concat(v,"\n          if(coordX >= 0 && coordX < ").concat(o," && coordY >= 0 && coordY < ").concat(i,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},OS={kernelName:S.Ic,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,c=r,u=new yS(a.shape,i,o,s);return c.runWebGLProgram(u,[a],a.dtype)}},kS=hO({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),wS={kernelName:S.Jc,backendName:"webgl",kernelFunc:kS},xS=hO({opSnippet:"return inversesqrt(x);",cpuKernelImpl:wy}),jS={kernelName:S.Kc,backendName:"webgl",kernelFunc:xS},SS=function e(t,n,r,a,i,o){Object(_.a)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Qg(i.length),c=Qg(o.length),u="";1===r?u="i":2===r&&(u="i, j");var l="getIndices(".concat(u,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var d="getUpdates(".concat(f,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")};var _S={kernelName:S.Mc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=S.Ld.calculateShapes(i,a,o),c=s.sliceRank,u=s.numUpdates,l=s.sliceSize,f=s.strides,d=s.outputSize,p=[d/l,l];if(0===d)return n.makeTensorInfo(o,a.dtype);var h=jO({inputs:{x:a},backend:n,attrs:{shape:[u,c]}}),v=jO({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),b=new SS(u,c,h.shape.length,v.shape.length,f,p),g=n.runWebGLProgram(b,[v,h,m],v.dtype),y=jO({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),y}},CS=function e(t,n,r){var a,i;if(Object(_.a)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],c=[],u=0;u<n.length;u++)c.push("".concat(o[u])),u<t&&s.push("".concat(o[u]));a=s.join(),i=c.join()}var l=Qg(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")};var ES={kernelName:S.Nc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new CS(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],Object(S.pi)(a.dtype,i.dtype))}},NS=hO({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(S.Ld.SELU_SCALEALPHA,";\n  float scale = ").concat(S.Ld.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),TS={kernelName:S.Oc,backendName:"webgl",kernelFunc:NS},IS=hO({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"}),AS={kernelName:S.Pc,backendName:"webgl",kernelFunc:IS},MS=hO({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),PS={kernelName:S.Qc,backendName:"webgl",kernelFunc:MS},RS=hO({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),DS={kernelName:S.Rc,backendName:"webgl",kernelFunc:RS},FS=hO({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),LS={kernelName:S.Sc,backendName:"webgl",kernelFunc:FS},zS=hO({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),qS={kernelName:S.Vc,backendName:"webgl",kernelFunc:zS},VS={kernelName:S.Wc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;S.qi.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),c=[[0,0]];c.push.apply(c,Object(I.a)(o));for(var u=1+i.length;u<a.shape.length;++u)c.push([0,0]);var l=[],f=Xj({inputs:{x:a},backend:n,attrs:{paddings:c,constantValue:0}}),d=S.Ld.getReshaped(f.shape,i,s,!1),p=S.Ld.getPermuted(d.length,i.length,!1),h=S.Ld.getReshapedPermuted(f.shape,i,s,!1),v=jO({inputs:{x:f},backend:n,attrs:{shape:d}}),m=PO({inputs:{x:v},backend:n,attrs:{perm:p}}),b=jO({inputs:{x:m},backend:n,attrs:{shape:h}});return l.push(f),l.push(v),l.push(m),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}};var BS={kernelName:S.Xc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,c=S.Ld.calculateShapes(i,a,s),u=c.sliceRank,l=c.numUpdates,f=c.strides,d=c.outputSize,p=new SS(l,u,a.shape.length,i.shape.length,f,[d,1],!1),h=n.runWebGLProgram(p,[i,a,o],i.dtype),v=jO({inputs:{x:h},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),v}};var US={kernelName:S.Yc,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=S.qi.parseAxisParam(o,a.shape)[0],c=S.Ld.prepareSplitSize(a,i,s),u=a.shape.length,l=new Array(u).fill(0),f=a.shape.slice();return c.map((function(e){var t=Object(I.a)(f);t[s]=e;var r=Tk({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},WS=hO({opSnippet:"return sqrt(x);"}),GS={kernelName:S.Zc,backendName:"webgl",kernelFunc:WS},HS=hO({opSnippet:"return x * x;"}),KS={kernelName:S.ad,backendName:"webgl",kernelFunc:HS},XS="return (a - b) * (a - b);",QS=vO({opSnippet:XS,packedOpSnippet:XS}),YS={kernelName:S.bd,backendName:"webgl",kernelFunc:QS};var ZS={kernelName:S.cd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=qy+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new zy(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},JS=function e(t,n,r){Object(_.a)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=Qg(r.length),o=Qg(r.length),s="";if(1===a)s="coords * strides + begin";else{var c=0;s=r.map((function(e,t){return c++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(c-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")};var $S={kernelName:S.dd,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,c=a.strides,u=a.beginMask,l=a.endMask,f=a.ellipsisMask,d=a.newAxisMask,p=a.shrinkAxisMask,h=S.zh.sliceInfo(i.shape,o,s,c,u,l,f,d,p),v=h.nonStrided,m=h.$begin,b=h.$strides,g=h.size,y=h.newShape,O=h.outShape,k=jO({inputs:{x:i},backend:r,attrs:{shape:y}});if(v){var w=Tk({inputs:{x:k},backend:r,attrs:{begin:m,size:g}});t=jO({inputs:{x:w},backend:r,attrs:{shape:O}}),r.disposeIntermediateTensorInfo(w)}else if(O.some((function(e){return 0===e})))t=r.makeTensorInfo(O,i.dtype,[]);else{if(r.shouldExecuteOnCPU([k])){var x=r.texData.get(k.dataId).values,j=Object(S.Wd)(k.shape,k.dtype,x),_=Sy(O,j,b,m);t=r.makeTensorInfo(O,k.dtype,_.values)}else{var C=new JS(m,b,O);t=r.runWebGLProgram(C,[k],k.dtype)}}var E=jO({inputs:{x:t},backend:r,attrs:{shape:O}});return r.disposeIntermediateTensorInfo(k),r.disposeIntermediateTensorInfo(t),E}},e_=hO({opSnippet:"return tan(x);"}),t_={kernelName:S.gd,backendName:"webgl",kernelFunc:e_},n_=hO({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),r_={kernelName:S.hd,backendName:"webgl",kernelFunc:n_},a_=function e(t,n){Object(_.a)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=Qg(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")};function i_(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype){var o=n.readSync(a.dataId).map((function(e){return S.qi.decodeString(e)})),s=Object(S.Wd)(a.shape,a.dtype,o),c=Cy(s,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var u=new a_(a.shape,i);return n.runWebGLProgram(u,[a],a.dtype)}var o_={kernelName:S.kd,backendName:"webgl",kernelFunc:i_};var s_={kernelName:S.ld,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=n.readSync(a.dataId),c=Ey(s,a.shape,a.dtype,i,o),u=Object(A.a)(c,2),l=u[0],f=u[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(f.shape,f.dtype,f.values)]}};var c_={kernelName:S.nd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;hg(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=Ty(o,a,i.shape,i.dtype),c=s.outputValues,u=s.outputShape,l=s.indices;return[r.makeTensorInfo(u,i.dtype,c),r.makeTensorInfo([l.length],"int32",l)]}};var u_={kernelName:S.od,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,c=a.shape[i],u=new Array(s-1),l=0,f=0;f<s;f++)f!==i&&(u[l++]=o.shape[f]);var d=[],p=new Array(s).fill(0),h=o.shape.slice();h[i]=1;for(var v=new Array(c),m=0;m<v.length;m++){p[i]=m;var b=Tk({inputs:{x:o},backend:n,attrs:{begin:p,size:h}}),g=jO({inputs:{x:b},backend:n,attrs:{shape:u}});v[m]=g,d.push(b)}return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},l_=function e(t,n){Object(_.a)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var c=4*Math.floor(r/4),u=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")};for(var f_=0,d_=[ej,nj,FO,zO,VO,UO,HO,QO,YO,ZO,rk,ak,ok,ck,dk,lk,hk,gk,bk,kk,wk,xk,_k,Ak,Mk,Lk,Vk,Wk,Kk,sO,nw,pw,hw,cw,mw,bw,vw,yw,kw,xw,Cw,Ew,Tw,Dw,Fw,Mw,zw,Vw,Uw,Ww,Hw,Xw,Zw,$w,nx,ix,ux,fx,hx,mx,yx,Ox,kx,xx,Sx,Cx,Nx,iO,Tx,Jk,Ax,Px,Dx,lO,Lx,qx,Vx,Gx,Ux,Kx,Qx,Zx,aj,cj,sj,fj,dj,pj,oj,hj,vj,bj,Oj,wj,Ij,xO,Mj,Rj,Fj,zj,Rk,Vj,Wj,Gj,Qj,Zj,pO,Jj,eS,Fk,Sj,nS,oS,aS,SO,uS,fS,pS,vS,gS,OS,wS,jS,_S,ES,TS,AS,PS,DS,LS,Ik,Tj,qS,VS,BS,US,GS,KS,YS,ZS,$S,Ej,MO,t_,r_,o_,s_,RO,c_,u_,{kernelName:S.pd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,c=[],u=0,l=S.Ld.getAxesPermutation([u],s),f=a;null!=l&&(f=PO({inputs:{x:a},backend:n,attrs:{perm:l}}),c.push(f),u=S.Ld.getInnerMostAxes(1,s)[0]);var d=S.Ld.segment_util.computeOutShape(f.shape,u,o),p=S.qi.sizeFromShape([f.shape[u]]),h=jO({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}});c.push(h);var v=function e(t,r,a,i,o){var s=t.shape[0],u=t.shape[1],l=S.Ld.segment_util.segOpComputeOptimalWindowSize(u,o),f=new l_({windowSize:l,inSize:u,batchSize:s,numSegments:o},r),d=n.compileAndRun(f,[t,a],i);if(c.push(d),d.shape[1]===o)return d;var p=$j({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),h=i_({inputs:{x:p},backend:n,attrs:{reps:[u/l]}});return c.push(p),c.push(h),e(d,r,h,i,o)}(h,"unsortedSegmentSum",i,Object(S.Rh)(a.dtype),o),m=jO({inputs:{x:v},backend:n,attrs:{shape:d}}),b=m;if(null!=l){c.push(m);var g=S.Ld.getUndoAxesPermutation(l);b=PO({inputs:{x:b},backend:n,attrs:{perm:g}})}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}},Uj];f_<d_.length;f_++){var p_=d_[f_];Object(S.Tg)(p_)}var h_={"tfjs-core":S.vi,"tfjs-backend-cpu":"2.8.6","tfjs-backend-webgl":"2.8.6","tfjs-data":Kf,"tfjs-layers":pr,"tfjs-converter":pf,tfjs:"2.8.6"};function v_(e){if("BinaryCounter"===e.type)return new b_(e.args);throw new Error("Unknown auxiliary input: ".concat(e))}var m_=function e(t){Object(_.a)(this,e),this.depth=t},b_=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e.numBits)}return Object(C.a)(n,[{key:"getTensors",value:function(e){for(var t=S.Wd([e,this.depth]),n=0;n<e;++n)for(var r=0;r<this.depth;++r)t.set(Math.floor((n+1)/Math.pow(2,r))%2?1:-1,n,r);return t.toTensor().as2D(e,this.depth)}}]),n}(m_),g_="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),y_=function(e){return"string"!==typeof e?g_.slice():g_.filter((function(t){var n=t[1]||" ";return-1!==e.indexOf(n)}))},O_=y_(" #"),k_=y_(" b"),w_=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function x_(e){"string"!==typeof e&&(e="");var t=w_.exec(e);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}var j_,S_,__=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),C_=[0,2,4,5,7,9,11],E_=(j_=function(e){var t=x_(e);if(""===t[0]||""!==t[3])return __;var n=t[0],r=t[1],a=t[2],i={letter:n,acc:r,octStr:a,pc:n+r,name:n+r+a,step:(n.charCodeAt(0)+3)%7,alt:"b"===r[0]?-r.length:r.length,oct:a.length?+a:null,chroma:0,midi:null,freq:null};return i.chroma=(C_[i.step]+i.alt+120)%12,i.midi=null!==i.oct?C_[i.step]+i.alt+12*(i.oct+1):null,i.freq=A_(i.midi),Object.freeze(i)},void 0===S_&&(S_={}),function(e){return S_[e]||(S_[e]=j_(e))}),N_=function(e){return E_(e).name},T_=function(e){return E_(e).pc},I_=function(e){if("number"!==typeof e&&"string"!==typeof e)return null;var t,n=E_(e).midi,r=n||0===n?n:+e;return(t=r)>=0&&t<=127?r:null},A_=function(e,t){return void 0===t&&(t=440),"number"===typeof e?Math.pow(2,(e-69)/12)*t:null},M_=function(e){return E_(e).freq||A_(e)},P_=Math.log(2),R_=Math.log(440),D_=function(e){var t=12*(Math.log(e)-R_)/P_+69;return Math.round(100*t)/100},F_=function(e){return E_(e).chroma},L_=function(e){return E_(e).oct},z_=function(e){return"CDEFGAB"[e]},q_=function(e,t){return Array(t+1).join(e)},V_=function(e){return n=function(e){return e<0?q_("b",-e):q_("#",e)},"number"!==typeof(t=e)?"":n(t);var t,n},B_=function(e,t){void 0===e&&(e={}),void 0===t&&(t=null);var n=t?Object.assign({},E_(t),e):e,r=n.step,a=n.alt,i=n.oct;if("number"!==typeof r)return null;var o=z_(r);if(!o)return null;var s=o+V_(a);return i||0===i?s+i:s},U_=B_;function W_(e,t){return void 0===t&&(t=!1),e=Math.round(e),(!0===t?O_:k_)[e%12]+(Math.floor(e/12)-1)}var G_=function(e,t){void 0===t&&(t=!0);var n=E_(e),r=n.alt,a=n.chroma,i=n.midi;if(null===a)return null;var o=!1===t?r<0:r>0;return null===i?T_(W_(a,o)):W_(i,o)},H_=function(e){return G_(e,!1)};var K_=new RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$"),X_=[0,2,4,5,7,9,11],Q_="PMMPPMM",Y_=("1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" "),Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null,oct:null})),Z_=function(e){return(Math.abs(e)-1)%7},J_=function(e){var t=function(e){var t=K_.exec(""+e);return null===t?null:t[1]?[t[1],t[2]]:[t[4],t[3]]}(e);if(null===t)return Y_;var n,r,a={num:0,q:"d",name:"",type:"M",step:0,dir:-1,simple:1,alt:0,oct:0,semitones:0,chroma:0,ic:0};return a.num=+t[0],a.q=t[1],a.step=Z_(a.num),a.type=Q_[a.step],"M"===a.type&&"P"===a.q?Y_:(a.name=""+a.num+a.q,a.dir=a.num<0?-1:1,a.simple=8===a.num||-8===a.num?a.num:a.dir*(a.step+1),a.alt=(n=a.type,"M"===(r=a.q)&&"M"===n||"P"===r&&"P"===n?0:"m"===r&&"M"===n?-1:/^A+$/.test(r)?r.length:/^d+$/.test(r)?"P"===n?-r.length:-r.length-1:null),a.oct=Math.floor((Math.abs(a.num)-1)/7),a.semitones=a.dir*(X_[a.step]+a.alt+12*a.oct),a.chroma=(a.dir*(X_[a.step]+a.alt)%12+12)%12,Object.freeze(a))},$_={};function eC(e){return"string"!==typeof e?Y_:$_[e]||($_[e]=J_(e))}"P m M m M P d P m M m M".split(" ");var tC=[0,2,4,-1,1,3,5],nC=tC.map((function(e){return Math.floor(7*e/12)})),rC=[3,0,4,1,5,2,6];var aC=function(e,t,n){var r=rC[function(e){var t=(e+1)%7;return t<0?7+t:t}(e)],a=Math.floor((e+1)/7);return void 0===t?{step:r,alt:a,dir:n}:{step:r,alt:a,oct:t+4*a+nC[r],dir:n}},iC=function(e){return function(e,t){return void 0===t&&(t={}),function(n){return t[n]||(t[n]=e(n))}}((function(t){var n=e(t);return null===n.name?null:function(e){var t=e.step,n=e.alt,r=e.oct,a=e.dir;void 0===a&&(a=1);var i=tC[t]+7*n;return null===r?[a*i]:[a*i,a*(r-nC[t]-4*n)]}(n)}))},oC=iC(E_),sC=iC(eC);function cC(e,t){if(1===arguments.length)return function(t){return cC(e,t)};var n=oC(e),r=sC(t);if(null===n||null===r)return null;var a=1===n.length?[n[0]+r[0]]:[n[0]+r[0],n[1]+r[1]];return U_(aC(a[0],a[1]))}var uC=n(409),lC=n(410),fC=function(e){return F_(e)||function(e){return eC(e).chroma}(e)||0},dC=function(e){return parseInt(pC(e),2)};function pC(e){if(vC(e))return e;if(!Array.isArray(e))return"";var t=[0,0,0,0,0,0,0,0,0,0,0,0];return e.map(fC).forEach((function(e){t[e]=1})),t.join("")}var hC=/^[01]{12}$/;function vC(e){return hC.test(e)}"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function mC(e,t){return arguments.length>1?mC(e)(t):(e=dC(e),function(t){return(t=dC(t))!==e&&(t&e)===t})}function bC(e,t){return arguments.length>1?bC(e)(t):(e=dC(e),function(t){return(t=dC(t))!==e&&(t|e)===t})}var gC=function(e){var t=Object.keys(e).sort(),n=[],r=[],a=function(e,t,a){n[e]=t,r[a]=r[a]||[],r[a].push(e)};t.forEach((function(t){var n=e[t][0].split(" "),r=e[t][1],i=pC(n);a(t,n,i),r&&r.forEach((function(e){return a(e,n,i)}))}));var i=Object.keys(n).sort(),o=function(e){return n[e]};return o.names=function(e){return"string"===typeof e?(r[e]||[]).slice():(!0===e?i:t).slice()},o},yC=gC(uC),OC=gC(lC),kC=(function(e,t){var n=function(n){return e(n)||t(n)};n.names=function(n){return e.names(n).concat(t.names(n))}}(yC,OC),Object.freeze({name:null,intervals:[],names:[],chroma:null,setnum:null}));yC.names;var wC=OC.names,xC=Object.freeze({name:null,names:[],intervals:[],chroma:null,setnum:null}),jC=function(e,t){return void 0===t&&(t={}),function(n){return t[n]||(t[n]=e(n))}}((function(e){var t=OC(e);if(!t)return xC;var n={intervals:t,name:e};return n.chroma=pC(t),n.setnum=parseInt(n.chroma,2),n.names=OC.names(n.chroma),n})),SC=function(e){return jC(IC(e)[1]).intervals};function _C(e,t){if(t)return jC(t).intervals.map(cC(e));var n=IC(e),r=n[0],a=n[1];return jC(a).intervals.map(cC(r))}var CC=function(e){return void 0!==OC(IC(e)[1])},EC=function(e){if(!SC(e).length)return[];var t=bC(SC(e));return OC.names().filter((function(e){return t(OC(e))}))},NC=function(e){var t=mC(SC(e));return OC.names().filter((function(e){return t(OC(e))}))},TC=/^(6|64|7|9|11|13)$/;function IC(e){var t=x_(e);return""===t[0]?["",e]:"A"===t[0]&&"ug"===t[3]?["","aug"]:TC.test(t[2])?[t[0]+t[1],t[2]+t[3]]:[t[0]+t[1]+t[2],t[3]]}var AC,MC=120,PC=16,RC=4,DC=100,FC=80,LC=0,zC=220,qC=0,VC=9,BC=[0,1,2,3,4,5,6,7,8,10,11,12,13,14,15],UC=[[36,35],[38,27,28,31,32,33,34,37,39,40,56,65,66,75,85],[42,44,54,68,69,70,71,73,78,80],[46,67,72,74,79,81],[45,29,41,61,64,84],[48,47,60,63,77,86,87],[50,30,43,62,76,83],[49,55,57,58],[51,52,53,59,82]],WC=0,GC=127,HC=GC-WC+1,KC="N.C.",XC=12,QC=0,YC=127,ZC=YC-QC+1,JC=21,$C=108,eE=35,tE=81,nE=0,rE=127,aE=89,iE=90,oE=9,sE=10,cE=[["1P","3M","5P"],["1P","3m","5P"],["1P","3M","5A"],["1P","3m","5d"]];!function(e){e[e.Major=0]="Major",e[e.Minor=1]="Minor",e[e.Augmented=2]="Augmented",e[e.Diminished=3]="Diminished",e[e.Other=4]="Other"}(AC||(AC={}));var uE=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(z(Error)),lE=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(z(Error)),fE=function(){function e(){Object(_.a)(this,e)}return Object(C.a)(e,null,[{key:"pitches",value:function(e){if(!p.tokenize(e)[0]||!p.exists(e))throw new uE("Unrecognized chord symbol: ".concat(e));return p.notes(e).map(d.chroma)}},{key:"root",value:function(e){var t=p.tokenize(e)[0];if(!t)throw new uE("Chord symbol has unknown root: ".concat(e));return d.chroma(t)}},{key:"quality",value:function(e){if(!p.exists(e))throw new uE("Unrecognized chord symbol: ".concat(e));var t=p.intervals(e),n=cE.map((function(e){return e.every((function(e){return t.includes(e)}))})),r=n.indexOf(!0),a=n.lastIndexOf(!0);return r>=0&&r===a?r:AC.Other}}]),e}(),dE=function(){function e(){Object(_.a)(this,e)}return Object(C.a)(e,[{key:"encodeProgression",value:function(e,t){var n=this,r=e.map((function(e){return n.encode(e)})),a=Array.from(Array(t).keys()).map((function(e){return Math.floor(e*r.length/t)}));return S.Lh(a.map((function(e){return r[e]})))}}]),e}();function pE(e){switch(e){case"MajorMinorChordEncoder":return new vE;case"TriadChordEncoder":return new mE;case"PitchChordEncoder":return new bE;default:throw new Error("Unknown chord encoder type: ".concat(e))}}var hE,vE=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).depth=1+2*XC,e}return Object(C.a)(n,[{key:"index",value:function(e){if(e===KC)return 0;var t=fE.root(e),n=1+fE.quality(e)*XC+t;if(n>=this.depth)throw new lE("Chord is neither major nor minor: ".concat(e));return n}},{key:"encode",value:function(e){var t=this;return S.di((function(){return S.sg(S.Vh([t.index(e)],"int32"),t.depth).as1D()}))}}]),n}(dE),mE=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).depth=1+4*XC,e}return Object(C.a)(n,[{key:"index",value:function(e){if(e===KC)return 0;var t=fE.root(e),n=1+fE.quality(e)*XC+t;if(n>=this.depth)throw new lE("Chord is not a standard triad: ".concat(e));return n}},{key:"encode",value:function(e){var t=this;return S.di((function(){return S.sg(S.Vh([t.index(e)],"int32"),t.depth).as1D()}))}}]),n}(dE),bE=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).depth=1+3*XC,e}return Object(C.a)(n,[{key:"encode",value:function(e){var t=this;return S.di((function(){if(e===KC)return S.sg(S.Vh([0],"int32"),t.depth).as1D();var n=fE.root(e),r=S.sg(S.Vh([n],"int32"),XC).as1D(),a=S.Wd([XC]);fE.pitches(e).forEach((function(e){return a.set(1,e)}));var i=a.toTensor().as1D(),o=r;return S.de([S.Vh([0]),r,i,o])}))}}]),n}(dE),gE=n(411).tensorflow.magenta.NoteSequence,yE=n(58);!function(e){e[e.NONE=0]="NONE",e[e.WARN=5]="WARN",e[e.INFO=10]="INFO",e[e.DEBUG=20]="DEBUG"}(hE||(hE={}));var OE=10;function kE(e){e=e}function wE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Magenta.js",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(0===n)throw Error("Logging level cannot be NONE.");if(OE>=n){var r=5===n?console.warn:console.log;r("%c ".concat(t," "),"background:magenta; color:white",e)}}function xE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Magenta.js",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,a=(yE.d.now()-t)/1e3;wE("".concat(e," in ").concat(a.toPrecision(3),"s"),n,r)}var jE=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(z(Error)),SE=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(z(Error)),_E=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(z(Error)),CE=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(z(Error)),EE=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(z(Error));function NE(e){return gE.decode(gE.encode(e).finish())}function TE(e,t){return e*t/60}function IE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=e*t;return Math.floor(r+(1-n))}function AE(e){return e.controlChanges.concat(e.textAnnotations)}function ME(e){if(e.tempos&&0!==e.tempos.length){if(e.tempos.sort((function(e,t){return e.time-t.time})),0!==e.tempos[0].time&&e.tempos[0].qpm!==MC)throw new CE("NoteSequence has an implicit tempo change from initial "+"".concat(MC," qpm to ")+"".concat(e.tempos[0].qpm," qpm at ").concat(e.tempos[0].time," seconds."));for(var t=1;t<e.tempos.length;t++)if(e.tempos[t].qpm!==e.tempos[0].qpm)throw new CE("NoteSequence has at least one tempo change from "+"".concat(e.tempos[0].qpm," qpm to ").concat(e.tempos[t].qpm)+"qpm at ".concat(e.tempos[t].time," seconds."))}}function PE(e,t){var n=NE(e);if(n.quantizationInfo=gE.QuantizationInfo.create({stepsPerQuarter:t}),n.timeSignatures.length>0){if(n.timeSignatures.sort((function(e,t){return e.time-t.time})),0!==n.timeSignatures[0].time&&(4!==n.timeSignatures[0].numerator||4!==n.timeSignatures[0].denominator))throw new jE("NoteSequence has an implicit change from initial 4/4 time "+"signature to ".concat(n.timeSignatures[0].numerator,"/")+"".concat(n.timeSignatures[0].denominator," at ")+"".concat(n.timeSignatures[0].time," seconds."));for(var r=1;r<n.timeSignatures.length;r++){var a=n.timeSignatures[r];if(a.numerator!==n.timeSignatures[0].numerator||a.denominator!==n.timeSignatures[0].denominator)throw new jE("NoteSequence has at least one time signature change from "+"".concat(n.timeSignatures[0].numerator,"/")+"".concat(n.timeSignatures[0].denominator," to ")+"".concat(a.numerator,"/").concat(a.denominator," ")+"at ".concat(a.time," seconds"))}n.timeSignatures[0].time=0,n.timeSignatures=[n.timeSignatures[0]]}else{var i=gE.TimeSignature.create({numerator:4,denominator:4,time:0});n.timeSignatures.push(i)}var o,s=n.timeSignatures[0];if(!(o=s.denominator)||0!==(o&o-1))throw new SE("Denominator is not a power of 2. Time signature: "+"".concat(s.numerator,"/").concat(s.denominator));if(0===s.numerator)throw new SE("Numerator is 0. Time signature: "+"".concat(s.numerator,"/").concat(s.denominator));if(n.tempos.length>0)ME(n),n.tempos[0].time=0,n.tempos=[n.tempos[0]];else{var c=gE.Tempo.create({qpm:MC,time:0});n.tempos.push(c)}var u=TE(t,n.tempos[0].qpm);return n.totalQuantizedSteps=IE(e.totalTime,u),function(e,t){var n,r=Object(M.a)(e.notes);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.quantizedStartStep=IE(a.startTime,t),a.quantizedEndStep=IE(a.endTime,t),a.quantizedEndStep===a.quantizedStartStep&&(a.quantizedEndStep+=1),a.quantizedStartStep<0||a.quantizedEndStep<0)throw new _E("Got negative note time: start_step = "+"".concat(a.quantizedStartStep,", end_step = ")+"".concat(a.quantizedEndStep));a.quantizedEndStep>e.totalQuantizedSteps&&(e.totalQuantizedSteps=a.quantizedEndStep)}}catch(i){r.e(i)}finally{r.f()}AE(e).forEach((function(e){if(e.quantizedStep=IE(e.time,t),e.quantizedStep<0)throw new _E("Got negative event time: step = ".concat(e.quantizedStep))}))}(n,u),n}function RE(e){return e.quantizationInfo&&(e.quantizationInfo.stepsPerQuarter>0||e.quantizationInfo.stepsPerSecond>0)}function DE(e){if(!RE(e))throw new EE("NoteSequence ".concat(e.id," is not quantized (missing quantizationInfo)"))}function FE(e){return e.quantizationInfo&&e.quantizationInfo.stepsPerQuarter>0}function LE(e){if(!FE(e))throw new EE("NoteSequence ".concat(e.id," is not quantized or is quantized based on absolute timing"))}function zE(e){return e.quantizationInfo&&e.quantizationInfo.stepsPerSecond>0}function qE(e){if(!zE(e))throw new EE("NoteSequence ".concat(e.id," is not quantized or is quantized based on relative timing"))}function VE(e,t){LE(e),ME(e);var n=NE(e);t?n.tempos&&n.tempos.length>0?n.tempos[0].qpm=t:n.tempos.push(gE.Tempo.create({time:0,qpm:t})):t=e.tempos&&e.tempos.length>0?n.tempos[0].qpm:MC;var r=function(e){return e/n.quantizationInfo.stepsPerQuarter*(60/t)};return n.totalTime=r(n.totalQuantizedSteps),n.notes.forEach((function(e){e.startTime=r(e.quantizedStartStep),e.endTime=r(e.quantizedEndStep),n.totalTime=Math.max(n.totalTime,e.endTime),delete e.quantizedStartStep,delete e.quantizedEndStep})),AE(n).forEach((function(e){e.time=r(e.time)})),delete n.totalQuantizedSteps,delete n.quantizationInfo,n}function BE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RC,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MC;return gE.create({quantizationInfo:{stepsPerQuarter:e},tempos:[{qpm:t}]})}function UE(e){var t=NE(e),n=t.notes.concat(t.pitchBends).concat(t.controlChanges),r=Array.from(new Set(n.filter((function(e){return!e.isDrum})).map((function(e){return e.program}))));return n.forEach((function(e){e.isDrum?(e.program=0,e.instrument=r.length):e.instrument=r.indexOf(e.program)})),t}function WE(e,t){var n=new Set(e.notes.map((function(e){return e.instrument}))),r=new Set(t.notes.map((function(e){return e.instrument}))),a=[];e.notes.forEach((function(e){r.has(e.instrument)||a.push(gE.Note.create(e))})),t.notes.forEach((function(e){n.has(e.instrument)&&a.push(gE.Note.create(e))}));var i=NE(e);return i.notes=a.sort((function(e,t){var n=e.instrument-t.instrument;return n||e.quantizedStartStep-t.quantizedStartStep})),i}function GE(e){DE(e);var t=NE(e);t.notes=[];var n=e.notes.sort((function(e,t){var n=e.instrument-t.instrument;return n||e.quantizedStartStep-t.quantizedStartStep})),r=new gE.Note;r.pitch=n[0].pitch,r.instrument=n[0].instrument,r.quantizedStartStep=n[0].quantizedStartStep,r.quantizedEndStep=n[0].quantizedEndStep,t.notes.push(r);for(var a=0,i=1;i<n.length;i++){var o=n[i],s=t.notes[a];if(s.instrument===o.instrument&&s.pitch===o.pitch&&o.quantizedStartStep===s.quantizedEndStep&&o.quantizedStartStep%16!==0)t.notes[a].quantizedEndStep+=o.quantizedEndStep-o.quantizedStartStep;else{var c=new gE.Note;c.pitch=n[i].pitch,c.instrument=n[i].instrument,c.quantizedStartStep=n[i].quantizedStartStep,c.quantizedEndStep=n[i].quantizedEndStep,t.notes.push(c),a++}}return t}function HE(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;!function(e){e[e.SUSTAIN_ON=0]="SUSTAIN_ON",e[e.SUSTAIN_OFF=1]="SUSTAIN_OFF",e[e.NOTE_ON=2]="NOTE_ON",e[e.NOTE_OFF=3]="NOTE_OFF"}(t||(t={}));var r=RE(e);if(r)throw new Error("Can only apply sustain to unquantized NoteSequence.");var a,i=NE(e),o=[],s=Object(M.a)(i.notes);try{for(s.s();!(a=s.n()).done;){var c=a.value;!1===c.isDrum&&(null!==c.startTime&&o.push({time:c.startTime,type:t.NOTE_ON,event:c}),null!==c.endTime&&o.push({time:c.endTime,type:t.NOTE_OFF,event:c}))}}catch(F){s.e(F)}finally{s.f()}var u,l=Object(M.a)(i.controlChanges);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(f.controlNumber===n){var d=f.controlValue;d>=64?o.push({time:f.time,type:t.SUSTAIN_ON,event:f}):d<64&&o.push({time:f.time,type:t.SUSTAIN_OFF,event:f})}}}catch(F){l.e(F)}finally{l.f()}o.sort((function(e,t){return e.time-t.time}));for(var p={},h={},v=0,m=0,b=o;m<b.length;m++){var g=b[m];v=g.time;var y=g.type,O=g.event;if(y===t.SUSTAIN_ON)h[O.instrument]=!0;else if(y===t.SUSTAIN_OFF){h[O.instrument]=!1;var k=[];O.instrument in p||(p[O.instrument]=[]);var w,x=Object(M.a)(p[O.instrument]);try{for(x.s();!(w=x.n()).done;){var j=w.value;j.endTime<v?(j.endTime=v,v>i.totalTime&&(i.totalTime=v)):k.push(j)}}catch(F){x.e(F)}finally{x.f()}p[O.instrument]=k}else if(y===t.NOTE_ON){if(!0===h[O.instrument]){var S=[];O.instrument in p||(p[O.instrument]=[]);var _,C=Object(M.a)(p[O.instrument]);try{for(C.s();!(_=C.n()).done;){var E=_.value;E.pitch===O.pitch?(E.endTime=v,E.startTime===E.endTime&&i.notes.push(E)):S.push(E)}}catch(F){C.e(F)}finally{C.f()}p[O.instrument]=S}O.instrument in p||(p[O.instrument]=[]),p[O.instrument].push(O)}else if(y===t.NOTE_OFF)if(!0===h[O.instrument]);else{var N=p[O.instrument].indexOf(O);N>-1&&p[O.instrument].splice(N,1)}}for(var T=0,I=Object.values(p);T<I.length;T++){var A,P=I[T],R=Object(M.a)(P);try{for(R.s();!(A=R.n()).done;){var D=A.value;D.endTime=v,i.totalTime=v}}catch(F){R.e(F)}finally{R.f()}}return i}function KE(e,t){if(t&&t.length!==e.length)throw new Error("Number of sequences to concatenate and their individual\n durations does not match.");if(RE(e[0])){for(var n=0;n<e.length;++n)if(DE(e[n]),e[n].quantizationInfo.stepsPerQuarter!==e[0].quantizationInfo.stepsPerQuarter)throw new Error("Not all sequences have the same quantizationInfo");return QE(e,"totalQuantizedSteps","quantizedStartStep","quantizedEndStep",t)}return QE(e,"totalTime","startTime","endTime",t)}function XE(e,t,n,r){return RE(e)?YE(e,t,n,"totalQuantizedSteps","quantizedStartStep","quantizedEndStep",r):YE(e,t,n,"totalTime","startTime","endTime",r)}function QE(e,t,n,r,a){for(var i,o=0,s=0;s<e.length;++s){var c=a?a[s]:e[s][t];if(0===c)throw Error("Sequence ".concat(e[s].id," has no ").concat(t,", and no individual duration was provided."));0===s?i=NE(e[0]):Array.prototype.push.apply(i.notes,e[s].notes.map((function(e){var t=gE.Note.create(e);return t[n]+=o,t[r]+=o,t}))),o+=c}return i[t]=o,i}function YE(e,t,n,r,a,i,o){var s=NE(e);s[r]=n,s.notes=s.notes.filter((function(e){return e[a]>=t&&e[a]<=n&&(o||e[i]<=n)})),s[r]-=t;for(var c=0;c<s.notes.length;c++)s.notes[c][a]-=t,s.notes[c][i]-=t,o&&(s.notes[c][i]=Math.min(s.notes[c][i],s[r]));return s}function ZE(e,t){DE(e);for(var n=NE(e),r=n.notes.sort((function(e,t){return e.quantizedStartStep-t.quantizedStartStep})),a=[],i=0,o=[],s=0;s<r.length;s++){var c=r[s],u=c.quantizedStartStep,l=c.quantizedEndStep;if(c.quantizedStartStep-=i,c.quantizedEndStep-=i,!(c.quantizedStartStep<0))if(c.quantizedEndStep<=t)o.push(c);else{if(c.quantizedStartStep<t){var f=gE.Note.create(c);f.quantizedEndStep=t,f.startTime=f.endTime=void 0,o.push(f),c.quantizedStartStep=i+t,c.quantizedEndStep=l}else c.quantizedStartStep=u,c.quantizedEndStep=l;if((c.quantizedEndStep>t||c.quantizedStartStep>t)&&(s-=1),0!==o.length){var d=NE(n);d.notes=o,d.totalQuantizedSteps=t,a.push(d)}o=[],i+=t}}if(0!==o.length){var p=NE(n);p.notes=o,p.totalQuantizedSteps=t,a.push(p)}return a}var JE=0,$E=1,eN=function(){function e(t,n,r){Object(_.a)(this,e),this.events=t,this.minPitch=n,this.maxPitch=r}return Object(C.a)(e,[{key:"toNoteSequence",value:function(e,t){for(var n=BE(e,t),r=null,a=0;a<this.events.length;++a){var i=this.events[a];switch(i){case JE:break;case $E:r&&(r.quantizedEndStep=a,n.notes.push(r),r=null);break;default:r&&(r.quantizedEndStep=a,n.notes.push(r)),r=gE.Note.create({pitch:i-2+this.minPitch,quantizedStartStep:a})}}return r&&(r.quantizedEndStep=this.events.length,n.notes.push(r)),n.totalQuantizedSteps=this.events.length,n}}],[{key:"fromNoteSequence",value:function(t,n,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0;DE(t);var o=t.notes.sort((function(e,t){return e.quantizedStartStep===t.quantizedStartStep?t.pitch-e.pitch:e.quantizedStartStep-t.quantizedStartStep})),s=new Int32Array(i||t.totalQuantizedSteps),c=-1;return o.forEach((function(e){if(e.quantizedStartStep===c){if(a)return;throw new Error("`NoteSequence` is not monophonic.")}if(e.pitch<n||e.pitch>r)throw Error("`NoteSequence` has a pitch outside of the valid range: "+"".concat(e.pitch));s[e.quantizedStartStep]=e.pitch-n+2,s[e.quantizedEndStep]=$E,c=e.quantizedStartStep})),new e(s,n,r)}}]),e}(),tN=function(){function e(){Object(_.a)(this,e),this.depth=1}return Object(C.a)(e,[{key:"extract",value:function(e){for(var t=e.events.length,n=S.Wd([t,1]),r=0;r<t;++r)n.set(e.events[r]>=2?1:0,r,0);return n.toTensor().as2D(t,1)}}]),e}(),nN=function(){function e(){Object(_.a)(this,e),this.depth=3}return Object(C.a)(e,[{key:"extract",value:function(e){for(var t=e.events.length,n=S.Wd([t,3]),r=null,a=null,i=0;i<t;++i)if(e.events[i]>=2){if(null!==r){0===n.get(r,0)&&0===n.get(r,1)&&0===n.get(r,2)&&(r=-1);var o=void 0;o=e.events[i]<a?0:e.events[i]>a?2:1;for(var s=i;s>r;--s)n.set(1,s,o)}r=i,a=e.events[i]}if(r!==t-1)if(null===r||0===n.get(r,0)&&0===n.get(r,1)&&0===n.get(r,2))for(var c=0;c<t;++c)n.set(1,c,1);else for(var u=t-1;u>r;--u)for(var l=0;l<3;l++)n.set(n.get(r,l),u,l);return n.toTensor().as2D(t,3)}}]),e}(),rN=function(){function e(t){Object(_.a)(this,e),this.boundaryPitches=t,this.depth=t.length+1}return Object(C.a)(e,[{key:"meanMelodyPitch",value:function(e){for(var t=0,n=0,r=null,a=0;a<e.events.length;++a)e.events[a]===$E?r=null:e.events[a]>=2&&(r=e.minPitch+e.events[a]-2),null!==r&&(t+=r,n+=1);return n?t/n:null}},{key:"extract",value:function(e){var t=e.events.length,n=this.meanMelodyPitch(e);if(null===n)return S.yi([t,this.depth]);for(var r=0;r<this.boundaryPitches.length&&n>=this.boundaryPitches[r];)r++;for(var a=S.Wd([t,this.depth]),i=0;i<t;++i)a.set(1,i,r);return a.toTensor().as2D(t,this.depth)}}]),e}(),aN=function(){function e(t,n,r,a,i){Object(_.a)(this,e),this.events=t,this.maxShiftSteps=n,this.numVelocityBins=r,this.program=a,this.isDrum=i}return Object(C.a)(e,[{key:"getNumSteps",value:function(){return this.events.filter((function(e){return"time-shift"===e.type})).map((function(e){return e.steps})).reduce((function(e,t){return e+t}),0)}},{key:"setNumSteps",value:function(e){var t=this.getNumSteps();if(t<e){if(this.events.length){var n=this.events[this.events.length-1];if("time-shift"===n.type){var r=Math.min(e-t,this.maxShiftSteps-n.steps);n.steps+=r,t+=r}}for(;t<e;)t+this.maxShiftSteps>e?(this.events.push({type:"time-shift",steps:e-t}),t=e):(this.events.push({type:"time-shift",steps:this.maxShiftSteps}),t+=this.maxShiftSteps)}else if(t>e)for(;this.events.length&&t>e;){var a=this.events[this.events.length-1];"time-shift"===a.type?t-a.steps<e?(a.steps-=t-e,t=e):(this.events.pop(),t-=a.steps):this.events.pop()}}},{key:"toNoteSequence",value:function(e){for(var t=this,n=this.numVelocityBins?Math.ceil((HC-1)/this.numVelocityBins):void 0,r=gE.create(),a=0,i=void 0,o=new Map,s=QC;s<=YC;++s)o.set(s,[]);var c,u=Object(M.a)(this.events);try{for(u.s();!(c=u.n()).done;){var l=c.value;switch(l.type){case"note-on":o.get(l.pitch).push([a,i]);break;case"note-off":var f=o.get(l.pitch);if(f.length){var d=f.shift(),p=Object(A.a)(d,2),h=p[0],v=p[1];a>h?r.notes.push(gE.Note.create({pitch:l.pitch,velocity:v,instrument:e,quantizedStartStep:h,quantizedEndStep:a,program:this.program,isDrum:this.isDrum})):wE("Ignoring zero-length note: "+"(pitch = ".concat(l.pitch,", step = ").concat(a,")"),"Performance")}else wE("Ignoring note-off with no previous note-on:"+"(pitch = ".concat(l.pitch,", step = ").concat(a,")"),"Performance");break;case"time-shift":a+=l.steps;break;case"velocity-change":if(!n)throw new Error("Unexpected velocity change event: ".concat(l));i=WC+(l.velocityBin-1)*n+1;break;default:throw new Error("Unrecognized performance event: ".concat(l))}}}catch(m){u.e(m)}finally{u.f()}return o.forEach((function(n,i){var o,s=Object(M.a)(n);try{for(s.s();!(o=s.n()).done;){var c=Object(A.a)(o.value,2),u=c[0],l=c[1];a>u?r.notes.push(gE.Note.create({pitch:i,velocity:l,instrument:e,quantizedStartStep:u,quantizedEndStep:a,program:t.program,isDrum:t.isDrum})):wE("Ignoring zero-length note: "+"(pitch = ".concat(i,", step = ").concat(a,")"),"Performance")}}catch(m){s.e(m)}finally{s.f()}})),r.totalQuantizedSteps=a,r}}],[{key:"fromNoteSequence",value:function(t,n,r,a){DE(t);var i,o=t.notes.filter((function(e,t){return void 0===a||e.instrument===a})),s=o.sort((function(e,t){return e.startTime===t.startTime?e.pitch-t.pitch:e.startTime-t.startTime})),c=s.map((function(e,t){return{step:e.quantizedStartStep,index:t,isOffset:0}})),u=s.map((function(e,t){return{step:e.quantizedEndStep,index:t,isOffset:1}})),l=c.concat(u).sort((function(e,t){return e.step===t.step?e.index===t.index?e.isOffset-t.isOffset:e.index-t.index:e.step-t.step})),f=r?Math.ceil((HC-1)/r):void 0,d=[],p=0,h=r,v=Object(M.a)(l);try{for(v.s();!(i=v.n()).done;){var m=i.value;if(m.step>p){for(;m.step>p+n;)d.push({type:"time-shift",steps:n}),p+=n;d.push({type:"time-shift",steps:m.step-p}),p=m.step}if(m.isOffset)d.push({type:"note-off",pitch:s[m.index].pitch});else{if(f){var b=Math.floor((s[m.index].velocity-WC-1)/f)+1;b!==h&&(d.push({type:"velocity-change",velocityBin:b}),h=b)}d.push({type:"note-on",pitch:s[m.index].pitch})}}}catch(k){v.e(k)}finally{v.f()}var g=!!o.some((function(e){return e.isDrum}))&&(!o.some((function(e){return!e.isDrum}))||void 0),y=Array.from(new Set(o.map((function(e){return e.program})))),O=new e(d,n,r,g||1!==y.length?void 0:y[0],g);return O.setNumSteps(t.totalQuantizedSteps),O}}]),e}();function iN(e){switch(e.type){case"MelodyConverter":return new lN(e.args);case"MelodyRhythmConverter":return new dN(e.args);case"MelodyShapeConverter":return new pN(e.args);case"DrumsConverter":return new sN(e.args);case"DrumRollConverter":return new cN(e.args);case"TrioConverter":return new hN(e.args);case"TrioRhythmConverter":return new vN(e.args);case"DrumsOneHotConverter":return new uN(e.args);case"MultitrackConverter":return new mN(e.args);case"GrooveConverter":return new bN(e.args);default:throw new Error("Unknown DataConverter type: ".concat(e))}}var oN=function(){function e(t){Object(_.a)(this,e),this.NUM_SPLITS=0,this.SEGMENTED_BY_TRACK=!1,this.numSteps=t.numSteps,this.numSegments=t.numSegments}return Object(C.a)(e,[{key:"tensorSteps",value:function(e){return S.gh(e.shape[0],"int32")}}]),e}(),sN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;Object(_.a)(this,n),(r=t.call(this,e)).pitchClasses=e.pitchClasses||UC,r.pitchToClass=new Map;for(var a=function(e){r.pitchClasses[e].forEach((function(t){r.pitchToClass.set(t,e)}))},i=0;i<r.pitchClasses.length;++i)a(i);return r.depth=r.pitchClasses.length+1,r}return Object(C.a)(n,[{key:"toTensor",value:function(e){var t=this;DE(e);for(var n=this.numSteps||e.totalQuantizedSteps,r=S.Wd([n,this.pitchClasses.length+1],"int32"),a=0;a<n;++a)r.set(1,a,-1);return e.notes.forEach((function(e){r.set(1,e.quantizedStartStep,t.pitchToClass.get(e.pitch)),r.set(0,e.quantizedStartStep,-1)})),r.toTensor()}},{key:"toNoteSequence",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=BE(n,r),i=t.argMax(1),e.next=4,i.data();case 4:for(o=e.sent,i.dispose(),s=0;s<o.length;++s)for(c=0;c<this.pitchClasses.length;c++)o[s]>>c&1&&a.notes.push(gE.Note.create({pitch:this.pitchClasses[c][0],quantizedStartStep:s,quantizedEndStep:s+1,isDrum:!0}));return a.totalQuantizedSteps=o.length,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(oN),cN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"toNoteSequence",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=BE(n,r),e.next=3,t.data();case 3:for(i=e.sent,o=0;o<t.shape[0];++o)for(s=i.slice(o*this.pitchClasses.length,(o+1)*this.pitchClasses.length),c=0;c<s.length;++c)s[c]&&a.notes.push(gE.Note.create({pitch:this.pitchClasses[c][0],quantizedStartStep:o,quantizedEndStep:o+1,isDrum:!0}));return a.totalQuantizedSteps=t.shape[0],e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(sN),uN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).depth=Math.pow(2,r.pitchClasses.length),r}return Object(C.a)(n,[{key:"toTensor",value:function(e){var t=this;LE(e);var n,r=this.numSteps||e.totalQuantizedSteps,a=Array(r).fill(0),i=Object(M.a)(e.notes);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.pitch,c=o.quantizedStartStep;a[c]+=Math.pow(2,this.pitchToClass.get(s))}}catch(u){i.e(u)}finally{i.f()}return S.di((function(){return S.sg(S.Vh(a,"int32"),t.depth)}))}}]),n}(sN),lN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).NOTE_OFF=1,r.FIRST_PITCH=2,r.minPitch=e.minPitch,r.maxPitch=e.maxPitch,r.ignorePolyphony=e.ignorePolyphony,r.depth=e.maxPitch-e.minPitch+1+r.FIRST_PITCH,r}return Object(C.a)(n,[{key:"toTensor",value:function(e){var t=this,n=eN.fromNoteSequence(e,this.minPitch,this.maxPitch,this.ignorePolyphony,this.numSteps);return S.di((function(){return S.sg(S.Uh(n.events,[n.events.length],"int32"),t.depth)}))}},{key:"toNoteSequence",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.argMax(1),e.next=3,a.data();case 3:return i=e.sent,a.dispose(),o=new eN(i,this.minPitch,this.maxPitch),e.abrupt("return",o.toNoteSequence(n,r));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(oN),fN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;return Object(_.a)(this,n),(a=t.call(this,e)).minPitch=e.minPitch,a.maxPitch=e.maxPitch,a.ignorePolyphony=e.ignorePolyphony,a.melodyControl=r,a.depth=r.depth,a}return Object(C.a)(n,[{key:"toTensor",value:function(e){var t=eN.fromNoteSequence(e,this.minPitch,this.maxPitch,this.ignorePolyphony,this.numSteps);return this.melodyControl.extract(t)}}]),n}(oN),dN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e,new tN)}return Object(C.a)(n,[{key:"toNoteSequence",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=BE(n,r),e.next=3,t.data();case 3:for(i=e.sent,o=0;o<i.length;++o)i[o]&&a.notes.push(gE.Note.create({pitch:UC[1][0],quantizedStartStep:o,quantizedEndStep:o+1,isDrum:!0}));return a.totalQuantizedSteps=i.length,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(fN),pN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e,new nN)}return Object(C.a)(n,[{key:"toNoteSequence",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=BE(n,r),i=t.argMax(1),e.next=4,i.data();case 4:o=e.sent,i.dispose(),s=Math.round((this.maxPitch+this.minPitch)/2),c=0;case 8:if(!(c<o.length)){e.next=23;break}e.t0=o[c],e.next=0===e.t0?12:2===e.t0?15:18;break;case 12:return(s-=1)<this.minPitch&&(s=this.minPitch,wE("Pitch range exceeded when creating NoteSequence from shape.","MelodyShapeConverter")),e.abrupt("break",19);case 15:return(s+=1)>this.maxPitch&&(s=this.maxPitch,wE("Pitch range exceeded when creating NoteSequence from shape.","MelodyShapeConverter")),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:a.notes.push(gE.Note.create({pitch:s,quantizedStartStep:c,quantizedEndStep:c+1}));case 20:++c,e.next=8;break;case 23:return a.totalQuantizedSteps=o.length,e.abrupt("return",a);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(fN),hN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).NUM_SPLITS=3,r.MEL_PROG_RANGE=[0,31],r.BASS_PROG_RANGE=[32,39],e.melArgs.numSteps=e.numSteps,e.bassArgs.numSteps=e.numSteps,e.drumsArgs.numSteps=e.numSteps,r.melConverter=new lN(e.melArgs),r.bassConverter=new lN(e.bassArgs),r.drumsConverter=new uN(e.drumsArgs),r.depth=r.melConverter.depth+r.bassConverter.depth+r.drumsConverter.depth,r}return Object(C.a)(n,[{key:"toTensor",value:function(e){var t=this;DE(e);var n=NE(e),r=NE(e),a=NE(e);return n.notes=e.notes.filter((function(e){return!e.isDrum&&e.program>=t.MEL_PROG_RANGE[0]&&e.program<=t.MEL_PROG_RANGE[1]})),r.notes=e.notes.filter((function(e){return!e.isDrum&&e.program>=t.BASS_PROG_RANGE[0]&&e.program<=t.BASS_PROG_RANGE[1]})),a.notes=e.notes.filter((function(e){return e.isDrum})),S.di((function(){return S.ce([t.melConverter.toTensor(n),t.bassConverter.toTensor(r),t.drumsConverter.toTensor(a)],-1)}))}},{key:"toNoteSequence",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=S.Fh(t,[this.melConverter.depth,this.bassConverter.depth,this.drumsConverter.depth],-1),e.next=3,this.melConverter.toNoteSequence(o[0],n,r);case 3:return(s=e.sent).notes.forEach((function(e){e.instrument=0,e.program=0})),e.next=7,this.bassConverter.toNoteSequence(o[1],n,r);case 7:return c=e.sent,(a=s.notes).push.apply(a,Object(I.a)(c.notes.map((function(e){return e.instrument=1,e.program=l.BASS_PROG_RANGE[0],e})))),e.next=11,this.drumsConverter.toNoteSequence(o[2],n,r);case 11:return u=e.sent,(i=s.notes).push.apply(i,Object(I.a)(u.notes.map((function(e){return e.instrument=2,e})))),o.forEach((function(e){return e.dispose()})),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(oN),vN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).NUM_SPLITS=3,r.trioConverter=new hN(e),r.depth=3,r}return Object(C.a)(n,[{key:"toTensor",value:function(e){var t=this;return S.di((function(){var n=t.trioConverter.toTensor(e),r=S.Fh(n,[t.trioConverter.melConverter.depth,t.trioConverter.bassConverter.depth,t.trioConverter.drumsConverter.depth],1),a=S.Bd(r[0],1),i=S.Bd(r[1],1),o=S.Bd(r[2],1),s=S.kf(a,1),c=S.kf(i,1),u=S.kf(o,0);return S.Lh([s,c,u],1)}))}},{key:"toNoteSequence",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=S.Fh(t,3,1),e.next=3,Promise.all(a.map((function(e){return e.data()})));case 3:for(i=e.sent,o=BE(n,r),s=0;s<this.numSteps;++s)i[0][s]&&o.notes.push(gE.Note.create({pitch:72,quantizedStartStep:s,quantizedEndStep:s+1,instrument:0,program:0})),i[1][s]&&o.notes.push(gE.Note.create({pitch:36,quantizedStartStep:s,quantizedEndStep:s+1,instrument:1,program:32})),i[2][s]&&o.notes.push(gE.Note.create({pitch:UC[1][0],quantizedStartStep:s,quantizedEndStep:s+1,instrument:2,isDrum:!0}));return o.totalQuantizedSteps=this.numSteps,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(oN),mN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).SEGMENTED_BY_TRACK=!0,r.stepsPerQuarter=e.stepsPerQuarter,r.totalSteps=e.totalSteps,r.numVelocityBins=e.numVelocityBins,r.minPitch=e.minPitch?e.minPitch:QC,r.maxPitch=e.maxPitch?e.maxPitch:YC,r.numPitches=r.maxPitch-r.minPitch+1,r.performanceEventDepth=2*r.numPitches+r.totalSteps+r.numVelocityBins,r.numPrograms=rE-nE+2,r.endToken=r.performanceEventDepth+r.numPrograms,r.depth=r.endToken+1,r.endTensor=S.di((function(){return S.sg(S.Vh([r.endToken],"int32"),r.depth).as1D()})),r}return Object(C.a)(n,[{key:"trackToTensor",value:function(e){var t=this,n=this.numSteps/this.numSegments,r=void 0;if(e){for(;e.events.length>n-2;)e.events.pop();(r=S.Wd([e.events.length+2],"int32")).set(this.performanceEventDepth+(e.isDrum?this.numPrograms-1:e.program),0),e.events.forEach((function(e,n){switch(e.type){case"note-on":r.set(e.pitch-t.minPitch,n+1);break;case"note-off":r.set(t.numPitches+e.pitch-t.minPitch,n+1);break;case"time-shift":r.set(2*t.numPitches+e.steps-1,n+1);break;case"velocity-change":r.set(2*t.numPitches+t.totalSteps+e.velocityBin-1,n+1);break;default:throw new Error("Unrecognized performance event: ".concat(e))}})),r.set(this.endToken,e.events.length+1)}else r=S.Wd([1],"int32",new Int32Array([this.endToken]));return S.di((function(){var e=S.sg(r.toTensor(),t.depth);return e.pad([[0,n-e.shape[0]],[0,0]])}))}},{key:"toTensor",value:function(e){var t=this;if(LE(e),e.quantizationInfo.stepsPerQuarter!==this.stepsPerQuarter)throw new Error("Steps per quarter note mismatch: ".concat(e.quantizationInfo.stepsPerQuarter," != ").concat(this.stepsPerQuarter));var n=NE(e);n.notes=e.notes.filter((function(e){return e.pitch>=t.minPitch&&e.pitch<=t.maxPitch}));for(var r=new Set(n.notes.map((function(e){return e.instrument}))),a=Array.from(r).map((function(e){return aN.fromNoteSequence(n,t.totalSteps,t.numVelocityBins,e)})).sort((function(e,t){return t.isDrum?-1:e.isDrum?1:e.program-t.program}));a.length>this.numSegments;)a.pop();for(a.forEach((function(e){return e.setNumSteps(t.totalSteps)}));a.length<this.numSegments;)a.push(void 0);return S.di((function(){return S.ce(a.map((function(e){return t.trackToTensor(e)})),0)}))}},{key:"tokensToTrack",value:function(e){var t=this,n=e.indexOf(this.endToken),r=n>=0?n:e.length,a=e.slice(0,r),i=a.filter((function(e){return e<t.performanceEventDepth})),o=a.filter((function(e){return e>=t.performanceEventDepth})),s=o.length?o[0]-this.performanceEventDepth<this.numPrograms-1?[o[0]-this.performanceEventDepth,!1]:[0,!0]:[0,!1],c=Object(A.a)(s,2),u=c[0],l=c[1],f=Array.from(i).map((function(e){if(e<t.numPitches)return{type:"note-on",pitch:t.minPitch+e};if(e<2*t.numPitches)return{type:"note-off",pitch:t.minPitch+e-t.numPitches};if(e<2*t.numPitches+t.totalSteps)return{type:"time-shift",steps:e-2*t.numPitches+1};if(e<2*t.numPitches+t.totalSteps+t.numVelocityBins)return{type:"velocity-change",velocityBin:e-2*t.numPitches-t.totalSteps+1};throw new Error("Invalid performance event token: ".concat(e))}));return new aN(f,this.totalSteps,this.numVelocityBins,u,l)}},{key:"toNoteSequence",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o=this,s=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:this.stepsPerQuarter,r=s.length>2?s[2]:void 0,(a=BE(n,r)).totalQuantizedSteps=this.totalSteps,i=S.di((function(){return S.Fh(t.argMax(1),o.numSegments)})),e.next=7,Promise.all(i.map(function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data();case 2:return n=e.sent,r=o.tokensToTrack(n),t.dispose(),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.sent.forEach((function(e,t){var n;e.setNumSteps(o.totalSteps),(n=a.notes).push.apply(n,Object(I.a)(e.toNoteSequence(t).notes))})),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(oN),bN=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;Object(_.a)(this,n),(r=t.call(this,e)).TAPIFY_CHANNEL=3,r.stepsPerQuarter=e.stepsPerQuarter||RC,r.pitchClasses=e.pitchClasses||UC,r.pitchToClass=new Map;for(var a=function(e){r.pitchClasses[e].forEach((function(t){r.pitchToClass.set(t,e)}))},i=0;i<r.pitchClasses.length;++i)a(i);return r.humanize=e.humanize||!1,r.tapify=e.tapify||!1,r.splitInstruments=e.splitInstruments||!1,r.depth=3,r}return Object(C.a)(n,[{key:"toTensor",value:function(e){for(var t=this,n=FE(e)?e:PE(e,this.stepsPerQuarter),r=this.numSteps,a=n.tempos&&n.tempos.length?n.tempos[0].qpm:MC,i=60/a/this.stepsPerQuarter,o=[],s=0;s<r;++s)o.push(new Map);n.notes.forEach((function(e){if(t.tapify||t.pitchToClass.has(e.pitch)){var n=e.quantizedStartStep;if(n>=o.length)throw Error("Model does not support sequences with more than ".concat(r," steps (").concat(r*i," seconds at qpm ").concat(a,")."));var s=t.tapify?t.TAPIFY_CHANNEL:t.pitchToClass.get(e.pitch);(!o[n].has(s)||o[n].get(s).velocity<e.velocity)&&o[n].set(s,e)}}));var c=this.pitchClasses.length,u=S.Wd([r,c]),l=S.Wd([r,c]),f=S.Wd([r,c]);function d(e){if(void 0===e.startTime)return 0;var t=e.startTime;return 2*(e.quantizedStartStep*i-t)/i}for(var p=0;p<r;++p)for(var h=0;h<c;++h){var v=o[p].get(h);u.set(v?1:0,p,h),this.humanize||this.tapify||l.set(v?v.velocity/GC:0,p,h),this.humanize||f.set(v?d(v):0,p,h)}return S.di((function(){var e=u.toTensor(),n=l.toTensor(),a=f.toTensor(),i=t.splitInstruments?r*c:r;return S.ce([e.as2D(i,-1),n.as2D(i,-1),a.as2D(i,-1)],1)}))}},{key:"toNoteSequence",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=function(e,t,n){return Math.min(Math.max(e,t),n)},r=O.length>2&&void 0!==O[2]?O[2]:MC,!n||n===this.stepsPerQuarter){e.next=4;break}throw Error("`stepsPerQuarter` is set by the model.");case 4:return n=this.stepsPerQuarter,a=this.splitInstruments?t.shape[0]/this.pitchClasses.length:t.shape[0],i=60/r/this.stepsPerQuarter,o=gE.create({totalTime:a*i,tempos:[{qpm:r}]}),e.next=10,t.data();case 10:for(s=e.sent,u=this.pitchClasses.length,l=0;l<a;++l)for(f=s.slice(l*u*this.depth,(l+1)*u*this.depth),d=0;d<u;++d)p=f[this.splitInstruments?d*this.depth:d],h=this.splitInstruments?d*this.depth+1:u+d,v=f[h],m=this.splitInstruments?d*this.depth+2:2*u+d,b=f[m],p>.5&&(g=c(Math.round(v*GC),WC,GC),y=c(b/2,-.5,.5),o.notes.push(gE.Note.create({pitch:this.pitchClasses[d][0],startTime:(l-y)*i,endTime:(l-y+1)*i,velocity:g,isDrum:!0})));return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(oN),gN="14.7.77",yN=n(142),ON=new WeakSet,kN=new WeakMap,wN=new WeakMap,xN=new WeakMap,jN=new WeakMap,SN=new WeakMap,_N=new WeakMap,CN=new WeakMap,EN=new WeakMap,NN=new WeakMap,TN={construct:function(){return TN}},IN=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,AN=function(e,t){for(var n=[],r=e.replace(/^[\s]+/,""),a=r.match(IN);null!==a;){var i=a[1].slice(1,-1),o=a[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,t).toString());n.push(o),a=(r=r.slice(a[0].length).replace(/^[\s]+/,"")).match(IN)}return[n.join(";"),r]},MN=function(e){if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},PN=function(e){if(!function(e){try{new new Proxy(e,TN)}catch(t){return!1}return!0}(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!==typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},RN=function(e,t){var n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},DN=function(e,t){var n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");var r=Object(A.a)(n,1)[0];return e.delete(r),r},FN=function(e,t,n,r){var a=RN(e,t),i=DN(a,(function(e){return e[0]===n&&e[1]===r}));return 0===a.size&&e.delete(t),i},LN=function(e){return RN(_N,e)},zN=function(e){if(ON.has(e))throw new Error("The AudioNode is already stored.");ON.add(e),LN(e).forEach((function(e){return e(!0)}))},qN=function(e){return"port"in e},VN=function(e){if(!ON.has(e))throw new Error("The AudioNode is not stored.");ON.delete(e),LN(e).forEach((function(e){return e(!1)}))},BN=function(e,t){!qN(e)&&t.every((function(e){return 0===e.size}))&&VN(e)},UN=n(29),WN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},GN=function(e,t){return e.context===t},HN=function(e){try{e.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},KN=function(){return new DOMException("","IndexSizeError")},XN=function(e){var t;e.getChannelData=(t=e.getChannelData,function(n){try{return t.call(e,n)}catch(r){if(12===r.code)throw KN();throw r}})},QN={numberOfChannels:1},YN=-34028234663852886e22,ZN=-YN,JN=function(e){return ON.has(e)},$N={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},eT=function(e){return RN(kN,e)},tT=function(e){return RN(xN,e)},nT=function e(t,n){eT(t).activeInputs.forEach((function(r){return r.forEach((function(r){var a=Object(A.a)(r,1)[0];n.includes(t)||e(a,[].concat(Object(I.a)(n),[t]))}))}));var r,a=function(e){return"playbackRate"in e}(t)?[t.playbackRate]:qN(t)?Array.from(t.parameters.values()):function(e){return"frequency"in e&&"gain"in e}(t)?[t.Q,t.detune,t.frequency,t.gain]:function(e){return"offset"in e}(t)?[t.offset]:function(e){return!("frequency"in e)&&"gain"in e}(t)?[t.gain]:function(e){return"detune"in e&&"frequency"in e}(t)?[t.detune,t.frequency]:function(e){return"pan"in e}(t)?[t.pan]:[],i=Object(M.a)(a);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=tT(o);void 0!==s&&s.activeInputs.forEach((function(t){var r=Object(A.a)(t,1)[0];return e(r,n)}))}}catch(c){i.e(c)}finally{i.f()}JN(t)&&VN(t)},rT=function(e){nT(e.destination,[])},aT=function(e){return void 0===e||"number"===typeof e||"string"===typeof e&&("balanced"===e||"interactive"===e||"playback"===e)},iT=function(e){return"context"in e},oT=function(e){return iT(e[0])},sT=function(e,t,n,r){var a,i=Object(M.a)(e);try{for(i.s();!(a=i.n()).done;){if(n(a.value)){if(r)return!1;throw Error("The set contains at least one similar element.")}}}catch(o){i.e(o)}finally{i.f()}return e.add(t),!0},cT=function(e,t,n,r){var a=Object(A.a)(n,2),i=a[0],o=a[1];sT(e,[t,i,o],(function(e){return e[0]===t&&e[1]===i}),r)},uT=function(e,t,n){var r=Object(A.a)(t,3),a=r[0],i=r[1],o=r[2],s=e.get(a);void 0===s?e.set(a,new Set([[i,o]])):sT(s,[i,o],(function(e){return e[0]===i}),n)},lT=function(e){return"inputs"in e},fT=function(e,t,n,r){if(lT(t)){var a=t.inputs[r];return e.connect(a,n,0),[a,n,0]}return e.connect(t,n,r),[t,n,r]},dT=function(e,t,n){var r,a=Object(M.a)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i[0]===t&&i[1]===n)return e.delete(i),i}}catch(o){a.e(o)}finally{a.f()}return null},pT=function(e,t){if(!LN(e).delete(t))throw new Error("Missing the expected event listener.")},hT=function(e,t,n){var r=RN(e,t),a=DN(r,(function(e){return e[0]===n}));return 0===r.size&&e.delete(t),a},vT=function(e,t,n,r){lT(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},mT=function(e){return RN(wN,e)},bT=function(e){return RN(jN,e)},gT=function(e){return CN.has(e)},yT=function(e){return!ON.has(e)},OT=function(e,t){return new Promise((function(n){if(null!==t)n(!0);else{var r=e.createScriptProcessor(256,1,1),a=e.createGain(),i=e.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;var s=e.createBufferSource();s.buffer=i,s.loop=!0,s.connect(r).connect(e.destination),s.connect(a),s.disconnect(a),r.onaudioprocess=function(t){var a=t.inputBuffer.getChannelData(0);Array.prototype.some.call(a,(function(e){return 1===e}))?n(!0):n(!1),s.stop(),r.onaudioprocess=null,s.disconnect(r),r.disconnect(e.destination)},s.start()}}))},kT=function(e,t){var n,r=new Map,a=Object(M.a)(e);try{for(a.s();!(n=a.n()).done;){var i,o=n.value,s=Object(M.a)(o);try{for(s.s();!(i=s.n()).done;){var c=i.value,u=r.get(c);r.set(c,void 0===u?1:u+1)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}r.forEach((function(e,n){return t(n,e)}))},wT=function(e){return"context"in e},xT=function(e,t,n,r){var a=tT(t),i=a.activeInputs,o=a.passiveInputs,s=eT(e).outputs,c=LN(e),u=function(a){var s=mT(e),c=bT(t);if(a){var u=hT(o,e,n);cT(i,e,u,!1),r||gT(e)||s.connect(c,n)}else{var l=function(e,t,n){return DN(e,(function(e){return e[0]===t&&e[1]===n}))}(i,e,n);uT(o,l,!1),r||gT(e)||s.disconnect(c,n)}};return!!sT(s,[t,n],(function(e){return e[0]===t&&e[1]===n}),!0)&&(c.add(u),JN(e)?cT(i,e,[n,u],!0):uT(o,[e,n,u],!0),!0)},jT=function(e,t,n,r,a){var i=function(e,t,n,r){var a=eT(t),i=a.activeInputs,o=a.passiveInputs,s=dT(i[r],e,n);return null===s?[FN(o,e,n,r)[2],!1]:[s[2],!0]}(e,n,r,a),o=Object(A.a)(i,2),s=o[0],c=o[1];if(null!==s&&(pT(e,s),!c||t||gT(e)||vT(mT(e),mT(n),r,a)),JN(n)){var u=eT(n).activeInputs;BN(n,u)}},ST=function(e,t,n,r){var a=function(e,t,n){var r=tT(t),a=r.activeInputs,i=r.passiveInputs,o=dT(a,e,n);return null===o?[hT(i,e,n)[1],!1]:[o[2],!0]}(e,n,r),i=Object(A.a)(a,2),o=i[0],s=i[1];null!==o&&(pT(e,o),!s||t||gT(e)||mT(e).disconnect(bT(n),r))},_T=function(){function e(t){Object(_.a)(this,e),this._map=new Map(t)}return Object(C.a)(e,[{key:"size",get:function(){return this._map.size}},{key:"entries",value:function(){return this._map.entries()}},{key:"forEach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach((function(r,a){return e.call(n,r,a,t)}))}},{key:"get",value:function(e){return this._map.get(e)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"keys",value:function(){return this._map.keys()}},{key:"values",value:function(){return this._map.values()}}]),e}(),CT={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function ET(e,t,n,r,a){if("function"===typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,a);else{var i=e.getChannelData(r);if(0===t[n].byteLength)t[n]=i.slice(a,a+128);else{var o=new Float32Array(i.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(o)}}}var NT=function(e,t,n,r,a){"function"===typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],r,a):0!==t[n].byteLength&&e.getChannelData(r).set(t[n],a)},TT=function(e,t){for(var n=[],r=0;r<e;r+=1){for(var a=[],i="number"===typeof t?t:t[r],o=0;o<i;o+=1)a.push(new Float32Array(128));n.push(a)}return n},IT=function(e,t){var n=RN(NN,e),r=mT(t);return RN(n,r)},AT=function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a,i,o,s){var c,u,l,f,d,p,h,v,m,b,g;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null===n?128*Math.ceil(t.context.length/128):n.length,u=a.channelCount*a.numberOfInputs,l=i.reduce((function(e,t){return e+t}),0),f=0===l?null:r.createBuffer(l,c,r.sampleRate),void 0!==o){e.next=6;break}throw new Error("Missing the processor constructor.");case 6:return d=eT(t),e.next=9,IT(r,t);case 9:p=e.sent,h=TT(a.numberOfInputs,a.channelCount),v=TT(a.numberOfOutputs,i),m=Array.from(t.parameters.keys()).reduce((function(e,t){return Object(UN.a)(Object(UN.a)({},e),{},Object(Ua.a)({},t,new Float32Array(128)))}),{}),b=function(e){if(a.numberOfInputs>0&&null!==n)for(var c=0;c<a.numberOfInputs;c+=1)for(var l=0;l<a.channelCount;l+=1)ET(n,h[c],l,l,e);void 0!==o.parameterDescriptors&&null!==n&&o.parameterDescriptors.forEach((function(t,r){var a=t.name;ET(n,m,a,u+r,e)}));for(var b=0;b<a.numberOfInputs;b+=1)for(var g=0;g<i[b];g+=1)0===v[b][g].byteLength&&(v[b][g]=new Float32Array(128));try{var y=h.map((function(e,t){return 0===d.activeInputs[t].size?[]:e})),O=s(e/r.sampleRate,r.sampleRate,(function(){return p.process(y,v,m)}));if(null!==f)for(var k=0,w=0;k<a.numberOfOutputs;k+=1){for(var x=0;x<i[k];x+=1)NT(f,v[k],x,w+x,e);w+=i[k]}if(!O)return"break"}catch(j){return t.dispatchEvent(new ErrorEvent("processorerror",{colno:j.colno,filename:j.filename,lineno:j.lineno,message:j.message})),"break"}},g=0;case 15:if(!(g<c)){e.next=22;break}if("break"!==b(g)){e.next=19;break}return e.abrupt("break",22);case 19:g+=128,e.next=15;break;case 22:return e.abrupt("return",f);case 23:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,o,s){return e.apply(this,arguments)}}(),MT={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},PT={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},RT={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},DT={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},FT={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},LT=function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return new Promise((function(t){var a=function(){r.onmessage=null,n.close(),r.close(),t()};r.onmessage=function(){return a()};try{n.postMessage(e,[e])}finally{a()}}))},zT={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},qT=function(e,t,n){var r=t[n];if(void 0===r)throw e();return r},VT={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},BT={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},UT=function(){return new DOMException("","InvalidStateError")},WT=function(){return new DOMException("","InvalidAccessError")},GT={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},HT=function(e,t,n,r,a,i,o,s,c,u,l){for(var f=u.length,d=s,p=0;p<f;p+=1){for(var h=n[0]*u[p],v=1;v<a;v+=1){var m=d-v&c-1;h+=n[v]*i[m],h-=e[v]*o[m]}for(var b=a;b<r;b+=1)h+=n[b]*i[d-b&c-1];for(var g=a;g<t;g+=1)h-=e[g]*o[d-g&c-1];i[d]=u[p],o[d]=h,d=d+1&c-1,l[p]=h}return d},KT=function(e,t,n,r){var a=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),o=a.length,s=i.length,c=Math.min(o,s);if(1!==a[0]){for(var u=0;u<o;u+=1)i[u]/=a[0];for(var l=1;l<s;l+=1)a[l]/=a[0]}for(var f=new Float32Array(32),d=new Float32Array(32),p=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),h=e.numberOfChannels,v=0;v<h;v+=1){var m=e.getChannelData(v),b=p.getChannelData(v);f.fill(0),d.fill(0),HT(a,o,i,s,c,f,d,0,32,m,b)}return p},XT=function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a,i,o,s,c,u,l,f,d,p,h,v,m){var b;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t(n,n)&&t(r,r)&&t(i,i)&&t(o,o)&&t(c,c)&&t(u,u)&&t(l,l)&&t(f,f)&&t(d,d)&&t(p,p)&&t(h,h))){e.next=5;break}return e.next=3,Promise.all([t(a,a),t(s,s),t(v,v),t(m,m)]);case 3:return b=e.sent,e.abrupt("return",b.every((function(e){return e})));case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,o,s,c,u,l,f,d,p,h,v,m){return e.apply(this,arguments)}}(),QT={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},YT=function(e){var t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{var n=e.decodeAudioData(t.buffer,(function(){}));return void 0!==n&&(n.catch((function(){})),!0)}catch(r){}return!1},ZT={numberOfChannels:1},JT=function(e,t,n){var r=t[n];void 0!==r&&r!==e[n]&&(e[n]=r)},$T=function(e,t){JT(e,t,"channelCount"),JT(e,t,"channelCountMode"),JT(e,t,"channelInterpretation")},eI=function(e){return"function"===typeof e.getFloatTimeDomainData},tI=function(e,t,n){var r=t[n];void 0!==r&&r!==e[n].value&&(e[n].value=r)},nI=function(e){var t;e.start=(t=e.start,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;if("number"===typeof a&&a<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,a)})},rI=function(e){var t;e.stop=(t=e.stop,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},aI=function(e,t){return null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t)))))},iI=function(e){return new Promise((function(t,n){var r=new MessageChannel,a=r.port1,i=r.port2;a.onmessage=function(e){var n=e.data;a.close(),i.close(),t(n)},a.onmessageerror=function(e){var t=e.data;a.close(),i.close(),n(t)},i.postMessage(e)}))},oI=function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iI(n);case 2:return r=e.sent,e.abrupt("return",new t(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),sI=function(e,t){var n=e.createBiquadFilter();return $T(n,t),tI(n,t,"Q"),tI(n,t,"detune"),tI(n,t,"frequency"),tI(n,t,"gain"),JT(n,t,"type"),n},cI=function(e,t){var n=e.createChannelSplitter(t.numberOfOutputs);return $T(n,t),function(e){var t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:function(){return t},set:function(e){if(e!==t)throw UT()}}),Object.defineProperty(e,"channelCountMode",{get:function(){return"explicit"},set:function(e){if("explicit"!==e)throw UT()}}),Object.defineProperty(e,"channelInterpretation",{get:function(){return"discrete"},set:function(e){if("discrete"!==e)throw UT()}})}(n),n};function uI(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var lI=function(e,t){return e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e},fI=["offset"],dI=function(e,t){var n=e.createDelay(t.maxDelayTime);return $T(n,t),tI(n,t,"delayTime"),n},pI=function(e,t){var n=e.createGain();return $T(n,t),tI(n,t,"gain"),n};function hI(e,t){var n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function vI(e,t){for(var n,r,a=[0,0],i=e.length-1;i>=0;i-=1)r=t,(a=[(n=a)[0]*r[0]-n[1]*r[1],n[0]*r[1]+n[1]*r[0]])[0]+=e[i];return a}var mI,bI,gI,yI,OI,kI,wI,xI,jI,SI,_I,CI,EI,NI,TI,II,AI,MI,PI,RI,DI,FI,LI,zI,qI,VI,BI,UI,WI,GI,HI,KI,XI,QI,YI,ZI,JI,$I,eA,tA,nA,rA,aA,iA,oA,sA,cA,uA,lA,fA,dA,pA,hA,vA,mA,bA,gA,yA,OA,kA,wA,xA,jA=["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"],SA=function(e,t,n,r){return e.createScriptProcessor(t,n,r)},_A=["channelCount","channelCountMode","pan"],CA=["curve","oversample"],EA=function(){return new DOMException("","NotSupportedError")},NA={numberOfChannels:1},TA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},IA={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},AA={disableNormalization:!1},MA={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},PA=function(){return new DOMException("","UnknownError")},RA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},DA=function(e,t,n){return void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0])},FA=function(e){if(null===e)return!1;var t=e.length;return t%2!==0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},LA=function(e,t,n,r){for(var a=e;!a.hasOwnProperty(t);)a=Object.getPrototypeOf(a);var i=Object.getOwnPropertyDescriptor(a,t),o=i.get,s=i.set;Object.defineProperty(e,t,{get:n(o),set:r(s)})},zA=function(e){var t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},qA=function(e){var t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch(r){return!1}},VA=function(e){var t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},BA=function(){try{new DOMException}catch(e){return!1}return!0},UA=function(){return new Promise((function(e){var t=new ArrayBuffer(0),n=new MessageChannel,r=n.port1,a=n.port2;r.onmessage=function(t){var n=t.data;return e(null!==n)},a.postMessage(t,[t])}))},WA=function(e,t){var n=t.createGain();e.connect(n);var r,a=(r=e.disconnect,function(){r.call(e,n),e.removeEventListener("ended",a)});e.addEventListener("ended",a),lI(e,n),e.stop=function(t){var r=!1;return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(r)try{t.call(e,a)}catch(i){n.gain.setValueAtTime(0,a)}else t.call(e,a),r=!0}}(e.stop)},GA=function(e,t){return function(n){var r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"===typeof t?t.call(e,n):t.handleEvent.call(e,n)}},HA=(mI=sT,function(e,t,n,r){var a=Object(A.a)(n,3),i=a[0],o=a[1],s=a[2];mI(e[o],[t,i,s],(function(e){return e[0]===t&&e[1]===i}),r)}),KA=function(e){return function(t,n,r,a){var i=Object(A.a)(r,3),o=i[0],s=i[1],c=i[2],u=t.get(o);void 0===u?t.set(o,new Set([[s,n,c]])):e(u,[s,n,c],(function(e){return e[0]===s&&e[1]===n}),a)}}(sT),XA=(bI=DN,function(e,t,n,r){return bI(e[r],(function(e){return e[0]===t&&e[1]===n}))}),QA=new WeakMap,YA=function(e){return function(t){var n;return null!==(n=e.get(t))&&void 0!==n?n:0}}(QA),ZA=(gI=new Map,yI=new WeakMap,function(e,t){var n=yI.get(e);if(void 0!==n)return n;var r=gI.get(e);if(void 0!==r)return r;try{var a=t();return a instanceof Promise?(gI.set(e,a),a.catch((function(){return!1})).then((function(t){return gI.delete(e),yI.set(e,t),t}))):(yI.set(e,a),a)}catch(i){return yI.set(e,!1),!1}}),JA="undefined"===typeof window?null:window,$A=(OI=ZA,kI=KN,function(e,t){var n=e.createAnalyser();if($T(n,t),!(t.maxDecibels>t.minDecibels))throw kI();return JT(n,t,"fftSize"),JT(n,t,"maxDecibels"),JT(n,t,"minDecibels"),JT(n,t,"smoothingTimeConstant"),OI(eI,(function(){return eI(n)}))||function(e){e.getFloatTimeDomainData=function(t){var n=new Uint8Array(t.length);e.getByteTimeDomainData(n);for(var r=Math.max(n.length,e.fftSize),a=0;a<r;a+=1)t[a]=.0078125*(n[a]-128);return t}}(n),n}),eM=(wI=eT,function(e){var t=wI(e);if(null===t.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer}),tM=function(e,t,n){return function(){var r=Object(bn.a)(mn.a.mark((function r(a,i,o){var s;return mn.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e(a),r.next=3,Promise.all(s.activeInputs.map((function(e,r){return Array.from(e).map(function(){var e=Object(bn.a)(mn.a.mark((function e(s){var c,u,l,f,d,p;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(A.a)(s,2),u=c[0],l=c[1],f=t(u),e.next=4,f.render(u,i);case 4:d=e.sent,p=a.context.destination,n(u)||a===p&&n(a)||d.connect(o,l,r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).reduce((function(e,t){return[].concat(Object(I.a)(e),Object(I.a)(t))}),[]));case 3:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}()}(eT,eM,gT),nM=(xI=$A,jI=mT,SI=tM,function(){var e=new WeakMap,t=function(){var t=Object(bn.a)(mn.a.mark((function t(n,r){var a,i;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=jI(n),GN(a,r)||(i={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant},a=xI(r,i)),e.set(r,a),t.next=6,SI(n,r,a);case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{render:function(n,r){var a=e.get(r);return void 0!==a?Promise.resolve(a):t(n,r)}}}),rM=(_I=SN,function(e){var t=_I.get(e);if(void 0===t)throw UT();return t}),aM=function(e){return null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null}(JA),iM=(CI=aM,function(e){return null!==CI&&e instanceof CI}),oM=new WeakMap,sM=(EI=GA,function(){function e(t){Object(_.a)(this,e),this._nativeEventTarget=t,this._listeners=new WeakMap}return Object(C.a)(e,[{key:"addEventListener",value:function(e,t,n){if(null!==t){var r=this._listeners.get(t);void 0===r&&(r=EI(this,t),"function"===typeof t&&this._listeners.set(t,r)),this._nativeEventTarget.addEventListener(e,r,n)}}},{key:"dispatchEvent",value:function(e){return this._nativeEventTarget.dispatchEvent(e)}},{key:"removeEventListener",value:function(e,t,n){var r=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===r?null:r,n)}}]),e}()),cM=function(e){return null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null}(JA),uM=(NI=cM,function(e){return null!==NI&&e instanceof NI}),lM=function(e){return function(t){return null!==e&&"function"===typeof e.AudioNode&&t instanceof e.AudioNode}}(JA),fM=function(e){return function(t){return null!==e&&"function"===typeof e.AudioParam&&t instanceof e.AudioParam}}(JA),dM=function(e){return null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null}(JA),pM=function(e,t,n,r,a,i,o,s,c,u,l,f,d,p,h,v){return function(u){Object(E.a)(b,u);var m=Object(N.a)(b);function b(t,r,a,i){var o;Object(_.a)(this,b),(o=m.call(this,a))._context=t,o._nativeAudioNode=a;var s=l(t);return f(s)&&!0!==n(OT,(function(){return OT(s,v)}))&&function(e){var t,n,r=new Map;e.connect=(t=e.connect.bind(e),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=wT(e)?t(e,n,a):t(e,n),o=r.get(e);return void 0===o?r.set(e,[{input:a,output:n}]):o.every((function(e){return e.input!==a||e.output!==n}))&&o.push({input:a,output:n}),i}),e.disconnect=(n=e.disconnect,function(t,a,i){if(n.apply(e),void 0===t)r.clear();else if("number"===typeof t){var o,s=Object(M.a)(r);try{for(s.s();!(o=s.n()).done;){var c=Object(A.a)(o.value,2),u=c[0],l=c[1].filter((function(e){return e.output!==t}));0===l.length?r.delete(u):r.set(u,l)}}catch(m){s.e(m)}finally{s.f()}}else if(r.has(t))if(void 0===a)r.delete(t);else{var f=r.get(t);if(void 0!==f){var d=f.filter((function(e){return e.output!==a&&(e.input!==i||void 0===i)}));0===d.length?r.delete(t):r.set(t,d)}}var p,h=Object(M.a)(r);try{var v=function(){var t=Object(A.a)(p.value,2),n=t[0];t[1].forEach((function(t){wT(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)}))};for(h.s();!(p=h.n()).done;)v()}catch(m){h.e(m)}finally{h.f()}})}(a),wN.set(Object(P.a)(o),a),_N.set(Object(P.a)(o),new Set),"closed"!==t.state&&r&&zN(Object(P.a)(o)),e(Object(P.a)(o),i,a),o}return Object(C.a)(b,[{key:"channelCount",get:function(){return this._nativeAudioNode.channelCount},set:function(e){this._nativeAudioNode.channelCount=e}},{key:"channelCountMode",get:function(){return this._nativeAudioNode.channelCountMode},set:function(e){this._nativeAudioNode.channelCountMode=e}},{key:"channelInterpretation",get:function(){return this._nativeAudioNode.channelInterpretation},set:function(e){this._nativeAudioNode.channelInterpretation=e}},{key:"context",get:function(){return this._context}},{key:"numberOfInputs",get:function(){return this._nativeAudioNode.numberOfInputs}},{key:"numberOfOutputs",get:function(){return this._nativeAudioNode.numberOfOutputs}},{key:"connect",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw a();var u=l(this._context),f=h(u);if(d(e)||p(e))throw i();if(iT(e)){var v=mT(e);try{var m,b=fT(this._nativeAudioNode,v,n,s),g=yT(this);if(f||g)(m=this._nativeAudioNode).disconnect.apply(m,Object(I.a)(b));"closed"!==this.context.state&&!g&&yT(e)&&zN(e)}catch(j){if(12===j.code)throw i();throw j}var y=t(this,e,n,s,f);if(y){var O=c([this],e);kT(O,r(f))}return e}var k=bT(e);if("playbackRate"===k.name&&1024===k.maxValue)throw o();try{this._nativeAudioNode.connect(k,n),(f||yT(this))&&this._nativeAudioNode.disconnect(k,n)}catch(j){if(12===j.code)throw i();throw j}var w=xT(this,e,n,f);if(w){var x=c([this],e);kT(x,r(f))}}},{key:"disconnect",value:function(e,t,n){var r,o=l(this._context),u=h(o);if(void 0===e)r=function(e,t){var n,r=eT(e),a=[],i=Object(M.a)(r.outputs);try{for(i.s();!(n=i.n()).done;){var o=n.value;oT(o)?jT.apply(void 0,[e,t].concat(Object(I.a)(o))):ST.apply(void 0,[e,t].concat(Object(I.a)(o))),a.push(o[0])}}catch(s){i.e(s)}finally{i.f()}return r.outputs.clear(),a}(this,u);else if("number"===typeof e){if(e<0||e>=this.numberOfOutputs)throw a();r=function(e,t,n){var r,a=eT(e),i=[],o=Object(M.a)(a.outputs);try{for(o.s();!(r=o.n()).done;){var s=r.value;s[1]===n&&(oT(s)?jT.apply(void 0,[e,t].concat(Object(I.a)(s))):ST.apply(void 0,[e,t].concat(Object(I.a)(s))),i.push(s[0]),a.outputs.delete(s))}}catch(c){o.e(c)}finally{o.f()}return i}(this,u,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw a();if(iT(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw a();if(r=function(e,t,n,r,a){var i=eT(e);return Array.from(i.outputs).filter((function(e){return e[0]===n&&(void 0===r||e[1]===r)&&(void 0===a||e[2]===a)})).map((function(n){return oT(n)?jT.apply(void 0,[e,t].concat(Object(I.a)(n))):ST.apply(void 0,[e,t].concat(Object(I.a)(n))),i.outputs.delete(n),n[0]}))}(this,u,e,t,n),0===r.length)throw i()}var f,d=Object(M.a)(r);try{for(d.s();!(f=d.n()).done;){var p=f.value,v=c([this],p);kT(v,s)}}catch(m){d.e(m)}finally{d.f()}}}]),b}(u)}((TI=kN,function(e,t,n){for(var r=[],a=0;a<n.numberOfInputs;a+=1)r.push(new Set);TI.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),function(e,t,n,r,a,i,o,s,c,u,l,f,d){var p=new WeakMap;return function(h,v,m,b,g){var y=i(v),O=y.activeInputs,k=y.passiveInputs,w=i(h).outputs,x=s(h),j=function(i){var s=c(v),u=c(h);if(i){var y=FN(k,h,m,b);e(O,h,y,!1),g||f(h)||n(u,s,m,b),d(v)&&zN(v)}else{var w=r(O,h,m,b);t(k,b,w,!1),g||f(h)||a(u,s,m,b);var x=o(v);if(0===x)l(v)&&BN(v,O);else{var j=p.get(v);void 0!==j&&clearTimeout(j),p.set(v,setTimeout((function(){l(v)&&BN(v,O)}),1e3*x))}}};return!!u(w,[v,m,b],(function(e){return e[0]===v&&e[1]===m&&e[2]===b}),!0)&&(x.add(j),l(h)?e(O,h,[m,b,j],!0):t(k,b,[h,m,j],!0),!0)}}(HA,KA,fT,XA,vT,eT,YA,LN,mT,sT,JN,gT,yT),ZA,function(e,t,n,r,a,i){return function(o){return function(s,c){var u=e.get(s);if(void 0===u){if(!o&&i(s)){var l,f=r(s),d=n(s).outputs,p=Object(M.a)(d);try{for(p.s();!(l=p.n()).done;){var h=l.value;if(oT(h)){var v=r(h[0]);t(f,v,h[1],h[2])}else{var m=a(h[0]);f.disconnect(m,h[1])}}}catch(b){p.e(b)}finally{p.f()}}e.set(s,c)}else e.set(s,u+c)}}}(CN,vT,eT,mT,bT,JN),KN,WT,EA,function(e,t,n,r,a,i,o,s){return function(c,u){var l=t.get(c);if(void 0===l)throw new Error("Missing the expected cycle count.");var f=i(c.context),d=s(f);if(l===u){if(t.delete(c),!d&&o(c)){var p,h=r(c),v=n(c).outputs,m=Object(M.a)(v);try{for(m.s();!(p=m.n()).done;){var b=p.value;if(oT(b)){var g=r(b[0]);e(h,g,b[1],b[2])}else{var y=a(b[0]);h.connect(y,b[1])}}}catch(O){m.e(O)}finally{m.f()}}}else t.set(c,l-u)}}(fT,CN,eT,mT,bT,rM,JN,iM),function(e,t,n){return function r(a,i){var o=iT(i)?i:n(e,i);if(function(e){return"delayTime"in e}(o))return[];if(a[0]===o)return[a];if(a.includes(o))return[];var s=t(o).outputs;return Array.from(s).map((function(e){return r([].concat(Object(I.a)(a),[o]),e[0])})).reduce((function(e,t){return e.concat(t)}),[])}}(oM,eT,RN),sM,rM,uM,lM,fM,iM,dM),hM=function(e,t,n,r,a,i){return function(e){Object(E.a)(s,e);var o=Object(N.a)(s);function s(e,n){var c;Object(_.a)(this,s);var u=a(e),l=Object(UN.a)(Object(UN.a)({},WN),n),f=r(u,l),d=i(u)?t():null;return(c=o.call(this,e,!1,f,d))._nativeAnalyserNode=f,c}return Object(C.a)(s,[{key:"fftSize",get:function(){return this._nativeAnalyserNode.fftSize},set:function(e){this._nativeAnalyserNode.fftSize=e}},{key:"frequencyBinCount",get:function(){return this._nativeAnalyserNode.frequencyBinCount}},{key:"maxDecibels",get:function(){return this._nativeAnalyserNode.maxDecibels},set:function(e){var t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}},{key:"minDecibels",get:function(){return this._nativeAnalyserNode.minDecibels},set:function(e){var t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}},{key:"smoothingTimeConstant",get:function(){return this._nativeAnalyserNode.smoothingTimeConstant},set:function(e){this._nativeAnalyserNode.smoothingTimeConstant=e}},{key:"getByteFrequencyData",value:function(e){this._nativeAnalyserNode.getByteFrequencyData(e)}},{key:"getByteTimeDomainData",value:function(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}},{key:"getFloatFrequencyData",value:function(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}},{key:"getFloatTimeDomainData",value:function(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}}]),s}(e)}(pM,nM,KN,$A,rM,iM),vM=new WeakSet,mM=function(e){return null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null}(JA),bM=(II=new Uint32Array(1),function(e){return II[0]=e,II[0]}),gM=function(e,t){return function(n){n.copyFromChannel=function(r,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e(i),s=e(a);if(s>=n.numberOfChannels)throw t();for(var c=n.length,u=n.getChannelData(s),l=r.length,f=o<0?-o:0;f+o<c&&f<l;f+=1)r[f]=u[f+o]},n.copyToChannel=function(r,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e(i),s=e(a);if(s>=n.numberOfChannels)throw t();for(var c=n.length,u=n.getChannelData(s),l=r.length,f=o<0?-o:0;f+o<c&&f<l;f+=1)u[f+o]=r[f]}}}(bM,KN),yM=function(e){return function(t){t.copyFromChannel=function(n){return function(r,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e(i),s=e(a);if(o<t.length)return n.call(t,r,s,o)}}(t.copyFromChannel),t.copyToChannel=function(n){return function(r,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e(i),s=e(a);if(o<t.length)return n.call(t,r,s,o)}}(t.copyToChannel)}}(bM),OM=function(e,t,n,r,a,i,o,s){var c=null;return function(u){function l(u){if(Object(_.a)(this,l),null===a)throw new Error("Missing the native OfflineAudioContext constructor.");var f=Object(UN.a)(Object(UN.a)({},QN),u),d=f.length,p=f.numberOfChannels,h=f.sampleRate;null===c&&(c=new a(1,1,44100));var v=null!==r&&t(i,i)?new r({length:d,numberOfChannels:p,sampleRate:h}):c.createBuffer(p,d,h);if(0===v.numberOfChannels)throw n();return"function"!==typeof v.copyFromChannel?(o(v),XN(v)):t(HN,(function(){return HN(v)}))||s(v),e.add(v),v}return Object(C.a)(l,null,[{key:u,value:function(t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===l.prototype||e.has(t)}}]),l}(Symbol.hasInstance)}(vM,ZA,EA,mM,aM,(AI=mM,function(){if(null===AI)return!1;try{new AI({length:1,sampleRate:44100})}catch(e){return!1}return!0}),gM,yM),kM=(MI=pI,function(e,t){var n=MI(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination),t.addEventListener("ended",(function e(){t.removeEventListener("ended",e),t.disconnect(n),n.disconnect()}))}),wM=(PI=eM,RI=tT,DI=gT,function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=RI(t),e.next=3,Promise.all(Array.from(a.activeInputs).map(function(){var e=Object(bn.a)(mn.a.mark((function e(t){var a,i,o,s,c;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(A.a)(t,2),i=a[0],o=a[1],s=PI(i),e.next=4,s.render(i,n);case 4:c=e.sent,DI(i)||c.connect(r,o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),xM=function(e){return function(t,n,r){return e(n,t,r)}}(wM),jM=function(e,t,n,r,a,i,o,s,c,u,l){return function(f,d){var p=f.createBufferSource();return $T(p,d),tI(p,d,"playbackRate"),JT(p,d,"buffer"),JT(p,d,"loop"),JT(p,d,"loopEnd"),JT(p,d,"loopStart"),t(n,(function(){return n(f)}))||function(e){e.start=function(t){var n=!1;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(n)throw UT();t.call(e,r,a,i),n=!0}}(e.start)}(p),t(r,(function(){return r(f)}))||c(p),t(a,(function(){return a(f)}))||u(p,f),t(i,(function(){return i(f)}))||nI(p),t(o,(function(){return o(f)}))||l(p,f),t(s,(function(){return s(f)}))||rI(p),e(f,p),p}}(kM,ZA,(function(e){var t=e.createBufferSource();t.start();try{t.start()}catch(n){return!0}return!1}),(function(e){var t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch(r){return!1}return!0}),(function(e){var t=e.createBufferSource();t.start();try{t.stop()}catch(n){return!1}return!0}),zA,qA,VA,(function(e){var t;e.start=(t=e.start,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,i=e.buffer,o=null===i?r:Math.min(i.duration,r);null!==i&&o>i.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,o,a)})}),(FI=LA,function(e,t){var n=t.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=n),FI(e,"buffer",(function(t){return function(){var r=t.call(e);return r===n?null:r}}),(function(t){return function(r){return t.call(e,null===r?n:r)}}))}),WA),SM=function(e,t){return function(n,r,a){return e(r).replay(a),t(r,n,a)}}(function(e){return function(t){var n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer}}(tT),wM),_M=function(e,t,n,r,a){return function(){var i=new WeakMap,o=null,s=null,c=function(){var c=Object(bn.a)(mn.a.mark((function c(u,l){var f,d,p,h;return mn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(f=n(u),(d=GN(f,l))||(p={buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,loop:f.loop,loopEnd:f.loopEnd,loopStart:f.loopStart,playbackRate:f.playbackRate.value},f=t(l,p),null!==o&&(h=f).start.apply(h,Object(I.a)(o)),null!==s&&f.stop(s)),i.set(l,f),d){c.next=9;break}return c.next=7,r(l,u.playbackRate,f.playbackRate);case 7:c.next=11;break;case 9:return c.next=11,e(l,u.playbackRate,f.playbackRate);case 11:return c.next=13,a(u,l,f);case 13:return c.abrupt("return",f);case 14:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}();return{set start(e){o=e},set stop(e){s=e},render:function(e,t){var n=i.get(t);return void 0!==n?Promise.resolve(n):c(e,t)}}}}(xM,jM,mT,SM,tM),CM=function(e,t,n,r,a,i,o,s,c,u,l,f,d){return function(p,h,v){var m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,g=new yN.AutomationEventList(v.defaultValue),y=h?r(g):null,O={get defaultValue(){return v.defaultValue},get maxValue(){return null===m?v.maxValue:m},get minValue(){return null===b?v.minValue:b},get value(){return v.value},set value(e){v.value=e,O.setValueAtTime(e,p.context.currentTime)},cancelAndHoldAtTime:function(e){if("function"===typeof v.cancelAndHoldAtTime)null===y&&g.flush(p.context.currentTime),g.add(a(e)),v.cancelAndHoldAtTime(e);else{var t=Array.from(g).pop();null===y&&g.flush(p.context.currentTime),g.add(a(e));var n=Array.from(g).pop();v.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?v.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?v.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?v.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&v.setValueCurveAtTime(n.values,n.startTime,n.duration))}return O},cancelScheduledValues:function(e){return null===y&&g.flush(p.context.currentTime),g.add(i(e)),v.cancelScheduledValues(e),O},exponentialRampToValueAtTime:function(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;return null===y&&g.flush(p.context.currentTime),g.add(o(e,t)),v.exponentialRampToValueAtTime(e,t),O},linearRampToValueAtTime:function(e,t){return null===y&&g.flush(p.context.currentTime),g.add(s(e,t)),v.linearRampToValueAtTime(e,t),O},setTargetAtTime:function(e,t,n){return null===y&&g.flush(p.context.currentTime),g.add(c(e,t,n)),v.setTargetAtTime(e,t,n),O},setValueAtTime:function(e,t){return null===y&&g.flush(p.context.currentTime),g.add(u(e,t)),v.setValueAtTime(e,t),O},setValueCurveAtTime:function(e,t,n){var r=e instanceof Float32Array?e:new Float32Array(e);if(null!==f&&"webkitAudioContext"===f.name){for(var a=t+n,i=p.context.sampleRate,o=Math.ceil(t*i),s=Math.floor(a*i),c=s-o,u=new Float32Array(c),h=0;h<c;h+=1){var m=(r.length-1)/n*((o+h)/i-t),b=Math.floor(m),k=Math.ceil(m);u[h]=b===k?r[b]:(1-(m-b))*r[b]+(1-(k-m))*r[k]}null===y&&g.flush(p.context.currentTime),g.add(l(u,t,n)),v.setValueCurveAtTime(u,t,n);var w=s/i;w<a&&d(O,u[u.length-1],w),d(O,r[r.length-1],a)}else null===y&&g.flush(p.context.currentTime),g.add(l(r,t,n)),v.setValueCurveAtTime(r,t,n);return O}};return n.set(O,v),t.set(O,p),e(O,y),O}}((LI=xN,function(e,t){LI.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),oM,jN,(function(e){return{replay:function(t){var n,r=Object(M.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("exponentialRampToValue"===a.type){var i=a.endTime,o=a.value;t.exponentialRampToValueAtTime(o,i)}else if("linearRampToValue"===a.type){var s=a.endTime,c=a.value;t.linearRampToValueAtTime(c,s)}else if("setTarget"===a.type){var u=a.startTime,l=a.target,f=a.timeConstant;t.setTargetAtTime(l,u,f)}else if("setValue"===a.type){var d=a.startTime,p=a.value;t.setValueAtTime(p,d)}else{if("setValueCurve"!==a.type)throw new Error("Can't apply an unknown automation.");var h=a.duration,v=a.startTime,m=a.values;t.setValueCurveAtTime(m,v,h)}}}catch(b){r.e(b)}finally{r.f()}}}}),yN.createCancelAndHoldAutomationEvent,yN.createCancelScheduledValuesAutomationEvent,yN.createExponentialRampToValueAutomationEvent,yN.createLinearRampToValueAutomationEvent,yN.createSetTargetAutomationEvent,yN.createSetValueAutomationEvent,yN.createSetValueCurveAutomationEvent,cM,(function e(t,n,r){try{t.setValueAtTime(n,r)}catch(a){if(9!==a.code)throw a;e(t,n,r+1e-7)}})),EM=function(e,t,n,r,a,i,o,s){return function(e){Object(E.a)(u,e);var c=Object(N.a)(u);function u(e,r){var s;Object(_.a)(this,u);var l=i(e),f=Object(UN.a)(Object(UN.a)({},$N),r),d=a(l,f),p=o(l),h=p?t():null;return(s=c.call(this,e,!1,d,h))._audioBufferSourceNodeRenderer=h,s._isBufferNullified=!1,s._isBufferSet=null!==f.buffer,s._nativeAudioBufferSourceNode=d,s._onended=null,s._playbackRate=n(Object(P.a)(s),p,d.playbackRate,ZN,YN),s}return Object(C.a)(u,[{key:"buffer",get:function(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer},set:function(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw r();this._isBufferSet=!0}}},{key:"loop",get:function(){return this._nativeAudioBufferSourceNode.loop},set:function(e){this._nativeAudioBufferSourceNode.loop=e}},{key:"loopEnd",get:function(){return this._nativeAudioBufferSourceNode.loopEnd},set:function(e){this._nativeAudioBufferSourceNode.loopEnd=e}},{key:"loopStart",get:function(){return this._nativeAudioBufferSourceNode.loopStart},set:function(e){this._nativeAudioBufferSourceNode.loopStart=e}},{key:"onended",get:function(){return this._onended},set:function(e){var t="function"===typeof e?s(this,e):null;this._nativeAudioBufferSourceNode.onended=t;var n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}},{key:"playbackRate",get:function(){return this._playbackRate}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(t,n,r),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===r?[t,n]:[t,n,r]),"closed"!==this.context.state){zN(this);var a=function t(){e._nativeAudioBufferSourceNode.removeEventListener("ended",t),JN(e)&&VN(e)};this._nativeAudioBufferSourceNode.addEventListener("ended",a)}}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}}]),u}(e)}(pM,_M,CM,UT,jM,rM,iM,GA),NM=function(e,t,n,r,a,i,o,s){return function(e){Object(E.a)(u,e);var c=Object(N.a)(u);function u(e,n){var r;Object(_.a)(this,u);var l=i(e),f=o(l),d=a(l,n,f),p=f?t(s):null;return(r=c.call(this,e,!1,d,p))._isNodeOfNativeOfflineAudioContext=f,r._nativeAudioDestinationNode=d,r}return Object(C.a)(u,[{key:"channelCount",get:function(){return this._nativeAudioDestinationNode.channelCount},set:function(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}},{key:"channelCountMode",get:function(){return this._nativeAudioDestinationNode.channelCountMode},set:function(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=e}},{key:"maxChannelCount",get:function(){return this._nativeAudioDestinationNode.maxChannelCount}}]),u}(e)}(pM,(function(e){var t=new WeakMap,n=function(){var n=Object(bn.a)(mn.a.mark((function n(r,a){var i;return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=a.destination,t.set(a,i),n.next=4,e(r,a,i);case 4:return n.abrupt("return",i);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return{render:function(e,r){var a=t.get(r);return void 0!==a?Promise.resolve(a):n(e,r)}}}),KN,UT,function(e,t){return function(n,r,a){var i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch(s){}a&&"explicit"!==i.channelCountMode&&(i.channelCountMode="explicit"),0===i.maxChannelCount&&Object.defineProperty(i,"maxChannelCount",{value:r});var o=e(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return t(o,"channelCount",(function(e){return function(){return e.call(o)}}),(function(e){return function(t){e.call(o,t);try{i.channelCount=t}catch(n){if(t>i.maxChannelCount)throw n}}})),t(o,"channelCountMode",(function(e){return function(){return e.call(o)}}),(function(e){return function(t){e.call(o,t),i.channelCountMode=t}})),t(o,"channelInterpretation",(function(e){return function(){return e.call(o)}}),(function(e){return function(t){e.call(o,t),i.channelInterpretation=t}})),Object.defineProperty(o,"maxChannelCount",{get:function(){return i.maxChannelCount}}),o.connect(i),o}}(pI,LA),rM,iM,tM),TM=function(e,t,n,r,a){return function(){var i=new WeakMap,o=function(){var o=Object(bn.a)(mn.a.mark((function o(s,c){var u,l,f;return mn.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(u=n(s),(l=GN(u,c))||(f={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type},u=t(c,f)),i.set(c,u),l){o.next=15;break}return o.next=7,r(c,s.Q,u.Q);case 7:return o.next=9,r(c,s.detune,u.detune);case 9:return o.next=11,r(c,s.frequency,u.frequency);case 11:return o.next=13,r(c,s.gain,u.gain);case 13:o.next=23;break;case 15:return o.next=17,e(c,s.Q,u.Q);case 17:return o.next=19,e(c,s.detune,u.detune);case 19:return o.next=21,e(c,s.frequency,u.frequency);case 21:return o.next=23,e(c,s.gain,u.gain);case 23:return o.next=25,a(s,c,u);case 25:return o.abrupt("return",u);case 26:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}();return{render:function(e,t){var n=i.get(t);return void 0!==n?Promise.resolve(n):o(e,t)}}}}(xM,sI,mT,SM,tM),IM=function(e){return function(t,n){return e.set(t,n)}}(QA),AM=(zI=CM,qI=TM,VI=WT,BI=sI,UI=rM,WI=iM,GI=IM,function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;Object(_.a)(this,n);var i=UI(e),o=Object(UN.a)(Object(UN.a)({},MT),r),s=BI(i,o),c=WI(i),u=c?qI():null;return(a=t.call(this,e,!1,s,u))._Q=zI(Object(P.a)(a),c,s.Q,ZN,YN),a._detune=zI(Object(P.a)(a),c,s.detune,1200*Math.log2(ZN),-1200*Math.log2(ZN)),a._frequency=zI(Object(P.a)(a),c,s.frequency,e.sampleRate/2,0),a._gain=zI(Object(P.a)(a),c,s.gain,40*Math.log10(ZN),YN),a._nativeBiquadFilterNode=s,GI(Object(P.a)(a),1),a}return Object(C.a)(n,[{key:"detune",get:function(){return this._detune}},{key:"frequency",get:function(){return this._frequency}},{key:"gain",get:function(){return this._gain}},{key:"Q",get:function(){return this._Q}},{key:"type",get:function(){return this._nativeBiquadFilterNode.type},set:function(e){this._nativeBiquadFilterNode.type=e}},{key:"getFrequencyResponse",value:function(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(r){if(11===r.code)throw VI();throw r}if(e.length!==t.length||t.length!==n.length)throw VI()}}]),n}(pM)),MM=function(e,t){return function(n,r,a){var i,o,s=new Set;return n.connect=(i=n.connect,function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=0===s.size;if(t(a))return i.call(n,a,o,c),e(s,[a,o,c],(function(e){return e[0]===a&&e[1]===o&&e[2]===c}),!0),u&&r(),a;i.call(n,a,o),e(s,[a,o],(function(e){return e[0]===a&&e[1]===o}),!0),u&&r()}),n.disconnect=(o=n.disconnect,function(e,r,i){var c=s.size>0;if(void 0===e)o.apply(n),s.clear();else if("number"===typeof e){o.call(n,e);var u,l=Object(M.a)(s);try{for(l.s();!(u=l.n()).done;){var f=u.value;f[1]===e&&s.delete(f)}}catch(m){l.e(m)}finally{l.f()}}else{t(e)?o.call(n,e,r,i):o.call(n,e,r);var d,p=Object(M.a)(s);try{for(p.s();!(d=p.n()).done;){var h=d.value;h[0]!==e||void 0!==r&&h[1]!==r||void 0!==i&&h[2]!==i||s.delete(h)}}catch(m){p.e(m)}finally{p.f()}}var v=0===s.size;c&&v&&a()}),n}}(sT,lM),PM=(HI=UT,KI=MM,function(e,t){t.channelCount=1,t.channelCountMode="explicit",Object.defineProperty(t,"channelCount",{get:function(){return 1},set:function(){throw HI()}}),Object.defineProperty(t,"channelCountMode",{get:function(){return"explicit"},set:function(){throw HI()}});var n=e.createBufferSource();KI(t,(function(){for(var e=t.numberOfInputs,r=0;r<e;r+=1)n.connect(t,0,r)}),(function(){return n.disconnect(t)}))}),RM=function(e,t){return function(n,r){var a=n.createChannelMerger(r.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,a),$T(a,r),a}}(cM,PM),DM=function(e,t,n){return function(){var r=new WeakMap,a=function(){var a=Object(bn.a)(mn.a.mark((function a(i,o){var s,c;return mn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=t(i),GN(s,o)||(c={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfInputs:s.numberOfInputs},s=e(o,c)),r.set(o,s),a.next=6,n(i,o,s);case 6:return a.abrupt("return",s);case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return{render:function(e,t){var n=r.get(t);return void 0!==n?Promise.resolve(n):a(e,t)}}}}(RM,mT,tM),FM=function(e,t,n,r,a){return function(e){Object(E.a)(o,e);var i=Object(N.a)(o);function o(e,s){Object(_.a)(this,o);var c=r(e),u=Object(UN.a)(Object(UN.a)({},PT),s),l=n(c,u),f=a(c)?t():null;return i.call(this,e,!1,l,f)}return o}(e)}(pM,DM,RM,rM,iM),LM=function(e,t,n){return function(){var r=new WeakMap,a=function(){var a=Object(bn.a)(mn.a.mark((function a(i,o){var s,c;return mn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=t(i),GN(s,o)||(c={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfOutputs:s.numberOfOutputs},s=e(o,c)),r.set(o,s),a.next=6,n(i,o,s);case 6:return a.abrupt("return",s);case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return{render:function(e,t){var n=r.get(t);return void 0!==n?Promise.resolve(n):a(e,t)}}}}(cI,mT,tM),zM=function(e,t,n,r,a,i){return function(e){Object(E.a)(s,e);var o=Object(N.a)(s);function s(e,c){Object(_.a)(this,s);var u=r(e),l=i(Object(UN.a)(Object(UN.a)({},RT),c)),f=n(u,l),d=a(u)?t():null;return o.call(this,e,!1,f,d)}return s}(e)}(pM,LM,cI,rM,iM,(function(e){return Object(UN.a)(Object(UN.a)({},e),{},{channelCount:e.numberOfOutputs})})),qM=function(e,t,n,r){return function(a,i){var o=i.offset,s=uI(i,fI),c=a.createBuffer(1,2,44100),u=t(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(a,Object(UN.a)(Object(UN.a)({},s),{},{gain:o})),f=c.getChannelData(0);f[0]=1,f[1]=1,u.buffer=c,u.loop=!0;var d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(e){l.channelCount=e},get channelCountMode(){return l.channelCountMode},set channelCountMode(e){l.channelCountMode=e},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(e){l.channelInterpretation=e},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return u.onended},set onended(e){u.onended=e},addEventListener:function(){return u.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return u.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return u.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.start.call(u,e)},stop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.stop.call(u,e)}};return e(a,u),r(lI(d,l),(function(){return u.connect(l)}),(function(){return u.disconnect(l)}))}}(kM,jM,pI,MM),VM=function(e,t,n,r,a){return function(i,o){if(void 0===i.createConstantSource)return n(i,o);var s=i.createConstantSource();return $T(s,o),tI(s,o,"offset"),t(r,(function(){return r(i)}))||nI(s),t(a,(function(){return a(i)}))||rI(s),e(i,s),s}}(kM,ZA,qM,zA,VA),BM=function(e,t,n,r,a){return function(){var i=new WeakMap,o=null,s=null,c=function(){var c=Object(bn.a)(mn.a.mark((function c(u,l){var f,d,p;return mn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(f=n(u),(d=GN(f,l))||(p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,offset:f.offset.value},f=t(l,p),null!==o&&f.start(o),null!==s&&f.stop(s)),i.set(l,f),d){c.next=9;break}return c.next=7,r(l,u.offset,f.offset);case 7:c.next=11;break;case 9:return c.next=11,e(l,u.offset,f.offset);case 11:return c.next=13,a(u,l,f);case 13:return c.abrupt("return",f);case 14:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}();return{set start(e){o=e},set stop(e){s=e},render:function(e,t){var n=i.get(t);return void 0!==n?Promise.resolve(n):c(e,t)}}}}(xM,VM,mT,SM,tM),UM=function(e,t,n,r,a,i,o){return function(e){Object(E.a)(c,e);var s=Object(N.a)(c);function c(e,o){var u;Object(_.a)(this,c);var l=a(e),f=Object(UN.a)(Object(UN.a)({},DT),o),d=r(l,f),p=i(l),h=p?n():null;return(u=s.call(this,e,!1,d,h))._constantSourceNodeRenderer=h,u._nativeConstantSourceNode=d,u._offset=t(Object(P.a)(u),p,d.offset,ZN,YN),u._onended=null,u}return Object(C.a)(c,[{key:"offset",get:function(){return this._offset}},{key:"onended",get:function(){return this._onended},set:function(e){var t="function"===typeof e?o(this,e):null;this._nativeConstantSourceNode.onended=t;var n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){zN(this);var n=function t(){e._nativeConstantSourceNode.removeEventListener("ended",t),JN(e)&&VN(e)};this._nativeConstantSourceNode.addEventListener("ended",n)}}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}}]),c}(e)}(pM,CM,BM,VM,rM,iM,GA),WM=function(e,t){return function(n,r){var a=n.createConvolver();if($T(a,r),r.disableNormalization===a.normalize&&(a.normalize=!r.disableNormalization),JT(a,r,"buffer"),r.channelCount>2)throw e();if(t(a,"channelCount",(function(e){return function(){return e.call(a)}}),(function(t){return function(n){if(n>2)throw e();return t.call(a,n)}})),"max"===r.channelCountMode)throw e();return t(a,"channelCountMode",(function(e){return function(){return e.call(a)}}),(function(t){return function(n){if("max"===n)throw e();return t.call(a,n)}})),a}}(EA,LA),GM=function(e,t,n){return function(){var r=new WeakMap,a=function(){var a=Object(bn.a)(mn.a.mark((function a(i,o){var s,c;return mn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=t(i),GN(s,o)||(c={buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,disableNormalization:!s.normalize},s=e(o,c)),r.set(o,s),!lT(s)){a.next=9;break}return a.next=7,n(i,o,s.inputs[0]);case 7:a.next=11;break;case 9:return a.next=11,n(i,o,s);case 11:return a.abrupt("return",s);case 12:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return{render:function(e,t){var n=r.get(t);return void 0!==n?Promise.resolve(n):a(e,t)}}}}(WM,mT,tM),HM=function(e,t,n,r,a,i){return function(e){Object(E.a)(s,e);var o=Object(N.a)(s);function s(e,c){var u;Object(_.a)(this,s);var l=r(e),f=Object(UN.a)(Object(UN.a)({},FT),c),d=n(l,f),p=a(l)?t():null;return(u=o.call(this,e,!1,d,p))._isBufferNullified=!1,u._nativeConvolverNode=d,null!==f.buffer&&i(Object(P.a)(u),f.buffer.duration),u}return Object(C.a)(s,[{key:"buffer",get:function(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer},set:function(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){var t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,44100),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}},{key:"normalize",get:function(){return this._nativeConvolverNode.normalize},set:function(e){this._nativeConvolverNode.normalize=e}}]),s}(e)}(pM,GM,WM,rM,iM,IM),KM=function(e,t,n,r,a){return function(i){var o=new WeakMap,s=function(){var s=Object(bn.a)(mn.a.mark((function s(c,u){var l,f,d;return mn.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(l=n(c),(f=GN(l,u))||(d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:i},l=t(u,d)),o.set(u,l),f){s.next=9;break}return s.next=7,r(u,c.delayTime,l.delayTime);case 7:s.next=11;break;case 9:return s.next=11,e(u,c.delayTime,l.delayTime);case 11:return s.next=13,a(c,u,l);case 13:return s.abrupt("return",l);case 14:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}();return{render:function(e,t){var n=o.get(t);return void 0!==n?Promise.resolve(n):s(e,t)}}}}(xM,dI,mT,SM,tM),XM=function(e,t,n,r,a,i,o){return function(e){Object(E.a)(c,e);var s=Object(N.a)(c);function c(e,u){var l;Object(_.a)(this,c);var f=a(e),d=Object(UN.a)(Object(UN.a)({},zT),u),p=r(f,d),h=i(f),v=h?n(d.maxDelayTime):null;return(l=s.call(this,e,!1,p,v))._delayTime=t(Object(P.a)(l),h,p.delayTime),o(Object(P.a)(l),d.maxDelayTime),l}return Object(C.a)(c,[{key:"delayTime",get:function(){return this._delayTime}}]),c}(e)}(pM,CM,KM,dI,rM,iM,IM),QM=(XI=EA,function(e,t){var n=e.createDynamicsCompressor();if($T(n,t),t.channelCount>2)throw XI();if("max"===t.channelCountMode)throw XI();return tI(n,t,"attack"),tI(n,t,"knee"),tI(n,t,"ratio"),tI(n,t,"release"),tI(n,t,"threshold"),n}),YM=function(e,t,n,r,a){return function(){var i=new WeakMap,o=function(){var o=Object(bn.a)(mn.a.mark((function o(s,c){var u,l,f;return mn.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(u=n(s),(l=GN(u,c))||(f={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value},u=t(c,f)),i.set(c,u),l){o.next=17;break}return o.next=7,r(c,s.attack,u.attack);case 7:return o.next=9,r(c,s.knee,u.knee);case 9:return o.next=11,r(c,s.ratio,u.ratio);case 11:return o.next=13,r(c,s.release,u.release);case 13:return o.next=15,r(c,s.threshold,u.threshold);case 15:o.next=27;break;case 17:return o.next=19,e(c,s.attack,u.attack);case 19:return o.next=21,e(c,s.knee,u.knee);case 21:return o.next=23,e(c,s.ratio,u.ratio);case 23:return o.next=25,e(c,s.release,u.release);case 25:return o.next=27,e(c,s.threshold,u.threshold);case 27:return o.next=29,a(s,c,u);case 29:return o.abrupt("return",u);case 30:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}();return{render:function(e,t){var n=i.get(t);return void 0!==n?Promise.resolve(n):o(e,t)}}}}(xM,QM,mT,SM,tM),ZM=function(e,t,n,r,a,i,o,s){return function(e){Object(E.a)(u,e);var c=Object(N.a)(u);function u(e,a){var l;Object(_.a)(this,u);var f=i(e),d=Object(UN.a)(Object(UN.a)({},VT),a),p=r(f,d),h=o(f),v=h?n():null;return(l=c.call(this,e,!1,p,v))._attack=t(Object(P.a)(l),h,p.attack),l._knee=t(Object(P.a)(l),h,p.knee),l._nativeDynamicsCompressorNode=p,l._ratio=t(Object(P.a)(l),h,p.ratio),l._release=t(Object(P.a)(l),h,p.release),l._threshold=t(Object(P.a)(l),h,p.threshold),s(Object(P.a)(l),.006),l}return Object(C.a)(u,[{key:"attack",get:function(){return this._attack}},{key:"channelCount",get:function(){return this._nativeDynamicsCompressorNode.channelCount},set:function(e){var t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,a()}},{key:"channelCountMode",get:function(){return this._nativeDynamicsCompressorNode.channelCountMode},set:function(e){var t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,a()}},{key:"knee",get:function(){return this._knee}},{key:"ratio",get:function(){return this._ratio}},{key:"reduction",get:function(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}},{key:"release",get:function(){return this._release}},{key:"threshold",get:function(){return this._threshold}}]),u}(e)}(pM,CM,YM,QM,EA,rM,iM,IM),JM=function(e,t,n,r,a){return function(){var i=new WeakMap,o=function(){var o=Object(bn.a)(mn.a.mark((function o(s,c){var u,l,f;return mn.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(u=n(s),(l=GN(u,c))||(f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value},u=t(c,f)),i.set(c,u),l){o.next=9;break}return o.next=7,r(c,s.gain,u.gain);case 7:o.next=11;break;case 9:return o.next=11,e(c,s.gain,u.gain);case 11:return o.next=13,a(s,c,u);case 13:return o.abrupt("return",u);case 14:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}();return{render:function(e,t){var n=i.get(t);return void 0!==n?Promise.resolve(n):o(e,t)}}}}(xM,pI,mT,SM,tM),$M=function(e,t,n,r,a,i){return function(e){Object(E.a)(s,e);var o=Object(N.a)(s);function s(e,c){var u;Object(_.a)(this,s);var l=a(e),f=Object(UN.a)(Object(UN.a)({},BT),c),d=r(l,f),p=i(l),h=p?n():null;return(u=o.call(this,e,!1,d,h))._gain=t(Object(P.a)(u),p,d.gain,ZN,YN),u}return Object(C.a)(s,[{key:"gain",get:function(){return this._gain}}]),s}(e)}(pM,CM,JM,pI,rM,iM),eP=function(e,t,n,r){return function(a,i,o){var s=o.channelCount,c=o.channelCountMode,u=o.channelInterpretation,l=o.feedback,f=o.feedforward,d=aI(i,a.sampleRate),p=l instanceof Float64Array?l:new Float64Array(l),h=f instanceof Float64Array?f:new Float64Array(f),v=p.length,m=h.length,b=Math.min(v,m);if(0===v||v>20)throw r();if(0===p[0])throw t();if(0===m||m>20)throw r();if(0===h[0])throw t();if(1!==p[0]){for(var g=0;g<m;g+=1)h[g]/=p[0];for(var y=1;y<v;y+=1)p[y]/=p[0]}var O=n(a,d,s,s);O.channelCount=s,O.channelCountMode=c,O.channelInterpretation=u;for(var k=[],w=[],x=[],j=0;j<s;j+=1){k.push(0);var S=new Float32Array(32),_=new Float32Array(32);S.fill(0),_.fill(0),w.push(S),x.push(_)}O.onaudioprocess=function(e){for(var t=e.inputBuffer,n=e.outputBuffer,r=t.numberOfChannels,a=0;a<r;a+=1){var i=t.getChannelData(a),o=n.getChannelData(a);k[a]=HT(p,v,h,m,b,w[a],x[a],k[a],32,i,o)}};var C=a.sampleRate/2,E={get bufferSize(){return d},get channelCount(){return O.channelCount},set channelCount(e){O.channelCount=e},get channelCountMode(){return O.channelCountMode},set channelCountMode(e){O.channelCountMode=e},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(e){O.channelInterpretation=e},get context(){return O.context},get inputs(){return[O]},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},addEventListener:function(){return O.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return O.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse:function(t,n,r){if(t.length!==n.length||n.length!==r.length)throw e();for(var a=t.length,i=0;i<a;i+=1){var o=-Math.PI*(t[i]/C),s=[Math.cos(o),Math.sin(o)],c=hI(vI(h,s),vI(p,s));n[i]=Math.sqrt(c[0]*c[0]+c[1]*c[1]),r[i]=Math.atan2(c[1],c[0])}},removeEventListener:function(){return O.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};return lI(E,O)}}(WT,UT,SA,EA),tP=function(e,t,n,r){return function(a){return e(YT,(function(){return YT(a)}))?Promise.resolve(e(r,r)).then((function(e){if(!e){var t=n(a,512,0,1);a.oncomplete=function(){t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=function(){return a.currentTime},t.connect(a.destination)}return a.startRendering()})):new Promise((function(e){var n=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=function(t){n.disconnect(),e(t.renderedBuffer)},n.connect(a.destination),a.startRendering()}))}}(ZA,pI,SA,function(e,t){return function(){if(null===t)return Promise.resolve(!1);var n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((function(e){n.oncomplete=function(){r.disconnect(),e(0!==n.currentTime)},n.startRendering()}))}}(pI,aM)),nP=function(e,t,n,r,a){return function(i,o){var s=new WeakMap,c=null,u=function(){var u=Object(bn.a)(mn.a.mark((function u(l,f){var d,p,h,v,m;return mn.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(d=null,p=t(l),h=GN(p,f),void 0===f.createIIRFilter?d=e(f,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):h||(p=f.createIIRFilter(o,i)),s.set(f,null===d?p:d),null===d){u.next=17;break}if(null!==c){u.next=11;break}if(null!==n){u.next=9;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 9:v=new n(l.context.destination.channelCount,l.context.length,f.sampleRate),c=Object(bn.a)(mn.a.mark((function e(){var t;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(l,v,v.destination);case 2:return e.next=4,a(v);case 4:return t=e.sent,e.abrupt("return",KT(t,f,i,o));case 6:case"end":return e.stop()}}),e)})))();case 11:return u.next=13,c;case 13:return m=u.sent,d.buffer=m,d.start(0),u.abrupt("return",d);case 17:return u.next=19,r(l,f,p);case 19:return u.abrupt("return",p);case 20:case"end":return u.stop()}}),u)})));return function(e,t){return u.apply(this,arguments)}}();return{render:function(e,t){var n=s.get(t);return void 0!==n?Promise.resolve(n):u(e,t)}}}}(jM,mT,aM,tM,tP),rP=function(e,t,n,r,a,i){return function(e){Object(E.a)(s,e);var o=Object(N.a)(s);function s(e,c){var u;Object(_.a)(this,s);var l=r(e),f=a(l),d=Object(UN.a)(Object(UN.a)({},GT),c),p=t(l,f?null:e.baseLatency,d),h=f?n(d.feedback,d.feedforward):null;return u=o.call(this,e,!1,p,h),function(e){var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,function(n,r,a){if(n.length!==r.length||r.length!==a.length)throw WT();return t.call(e,n,r,a)})}(p),u._nativeIIRFilterNode=p,i(Object(P.a)(u),1),u}return Object(C.a)(s,[{key:"getFrequencyResponse",value:function(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}}]),s}(e)}(pM,(QI=eP,function(e,t,n){if(void 0===e.createIIRFilter)return QI(e,t,n);var r=e.createIIRFilter(n.feedforward,n.feedback);return $T(r,n),r}),nP,rM,iM,IM),aP=function(e,t,n,r,a,i,o,s){return function(c,u){var l=u.listener,f=void 0===l.forwardX?function(){var f=new Float32Array(1),d=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=o(u),h=!1,v=[0,0,-1,0,1,0],m=[0,0,0],b=function(){if(!h){h=!0;var e=r(u,256,9,0);e.onaudioprocess=function(e){var t=e.inputBuffer,n=[i(t,f,0),i(t,f,1),i(t,f,2),i(t,f,3),i(t,f,4),i(t,f,5)];n.some((function(e,t){return e!==v[t]}))&&(l.setOrientation.apply(l,n),v=n);var r=[i(t,f,6),i(t,f,7),i(t,f,8)];r.some((function(e,t){return e!==m[t]}))&&(l.setPosition.apply(l,r),m=r)},d.connect(e)}},g=function(e){return function(t){t!==v[e]&&(v[e]=t,l.setOrientation.apply(l,Object(I.a)(v)))}},y=function(e){return function(t){t!==m[e]&&(m[e]=t,l.setPosition.apply(l,Object(I.a)(m)))}},O=function(t,r,i){var o=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});o.connect(d,0,t),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:function(){return r}});var l,f,h,v,m,g,y,O=e({context:c},p,o.offset,ZN,YN);return s(O,"value",(function(e){return function(){return e.call(O)}}),(function(e){return function(t){try{e.call(O,t)}catch(n){if(9!==n.code)throw n}b(),p&&i(t)}})),O.cancelAndHoldAtTime=(l=O.cancelAndHoldAtTime,p?function(){throw a()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=l.apply(O,t);return b(),r}),O.cancelScheduledValues=(f=O.cancelScheduledValues,p?function(){throw a()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=f.apply(O,t);return b(),r}),O.exponentialRampToValueAtTime=(h=O.exponentialRampToValueAtTime,p?function(){throw a()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=h.apply(O,t);return b(),r}),O.linearRampToValueAtTime=(v=O.linearRampToValueAtTime,p?function(){throw a()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=v.apply(O,t);return b(),r}),O.setTargetAtTime=(m=O.setTargetAtTime,p?function(){throw a()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=m.apply(O,t);return b(),r}),O.setValueAtTime=(g=O.setValueAtTime,p?function(){throw a()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=g.apply(O,t);return b(),r}),O.setValueCurveAtTime=(y=O.setValueCurveAtTime,p?function(){throw a()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=y.apply(O,t);return b(),r}),O};return{forwardX:O(0,0,g(0)),forwardY:O(1,0,g(1)),forwardZ:O(2,-1,g(2)),positionX:O(6,0,y(0)),positionY:O(7,0,y(1)),positionZ:O(8,0,y(2)),upX:O(3,0,g(3)),upY:O(4,1,g(4)),upZ:O(5,0,g(5))}}():l,d=f.forwardX,p=f.forwardY,h=f.forwardZ,v=f.positionX,m=f.positionY,b=f.positionZ,g=f.upX,y=f.upY,O=f.upZ;return{get forwardX(){return d},get forwardY(){return p},get forwardZ(){return h},get positionX(){return v},get positionY(){return m},get positionZ(){return b},get upX(){return g},get upY(){return y},get upZ(){return O}}}}(CM,RM,VM,SA,EA,DA,iM,LA),iP=new WeakMap,oP=function(e,t,n,r,a,i){return function(n){Object(E.a)(s,n);var o=Object(N.a)(s);function s(n,i){var c;return Object(_.a)(this,s),(c=o.call(this,n))._nativeContext=n,SN.set(Object(P.a)(c),n),r(n)&&a.set(n,new Set),c._destination=new e(Object(P.a)(c),i),c._listener=t(Object(P.a)(c),n),c._onstatechange=null,c}return Object(C.a)(s,[{key:"currentTime",get:function(){return this._nativeContext.currentTime}},{key:"destination",get:function(){return this._destination}},{key:"listener",get:function(){return this._listener}},{key:"onstatechange",get:function(){return this._onstatechange},set:function(e){var t="function"===typeof e?i(this,e):null;this._nativeContext.onstatechange=t;var n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}},{key:"sampleRate",get:function(){return this._nativeContext.sampleRate}},{key:"state",get:function(){return this._nativeContext.state}}]),s}(n)}(NM,aP,sM,iM,iP,GA),sP=function(e,t,n,r,a,i){return function(o,s){var c=o.createOscillator();return $T(c,s),tI(c,s,"detune"),tI(c,s,"frequency"),void 0!==s.periodicWave?c.setPeriodicWave(s.periodicWave):JT(c,s,"type"),t(n,(function(){return n(o)}))||nI(c),t(r,(function(){return r(o)}))||i(c,o),t(a,(function(){return a(o)}))||rI(c),e(o,c),c}}(kM,ZA,zA,qA,VA,WA),cP=function(e,t,n,r,a){return function(){var i=new WeakMap,o=null,s=null,c=null,u=function(){var u=Object(bn.a)(mn.a.mark((function u(l,f){var d,p,h;return mn.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(d=n(l),(p=GN(d,f))||(h={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===o?void 0:o,type:d.type},d=t(f,h),null!==s&&d.start(s),null!==c&&d.stop(c)),i.set(f,d),p){u.next=11;break}return u.next=7,r(f,l.detune,d.detune);case 7:return u.next=9,r(f,l.frequency,d.frequency);case 9:u.next=15;break;case 11:return u.next=13,e(f,l.detune,d.detune);case 13:return u.next=15,e(f,l.frequency,d.frequency);case 15:return u.next=17,a(l,f,d);case 17:return u.abrupt("return",d);case 18:case"end":return u.stop()}}),u)})));return function(e,t){return u.apply(this,arguments)}}();return{set periodicWave(e){o=e},set start(e){s=e},set stop(e){c=e},render:function(e,t){var n=i.get(t);return void 0!==n?Promise.resolve(n):u(e,t)}}}}(xM,sP,mT,SM,tM),uP=function(e,t,n,r,a,i,o){return function(e){Object(E.a)(c,e);var s=Object(N.a)(c);function c(e,o){var u;Object(_.a)(this,c);var l=a(e),f=Object(UN.a)(Object(UN.a)({},TA),o),d=n(l,f),p=i(l),h=p?r():null,v=e.sampleRate/2;return(u=s.call(this,e,!1,d,h))._detune=t(Object(P.a)(u),p,d.detune,153600,-153600),u._frequency=t(Object(P.a)(u),p,d.frequency,v,-v),u._nativeOscillatorNode=d,u._onended=null,u._oscillatorNodeRenderer=h,null!==u._oscillatorNodeRenderer&&void 0!==f.periodicWave&&(u._oscillatorNodeRenderer.periodicWave=f.periodicWave),u}return Object(C.a)(c,[{key:"detune",get:function(){return this._detune}},{key:"frequency",get:function(){return this._frequency}},{key:"onended",get:function(){return this._onended},set:function(e){var t="function"===typeof e?o(this,e):null;this._nativeOscillatorNode.onended=t;var n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}},{key:"type",get:function(){return this._nativeOscillatorNode.type},set:function(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}},{key:"setPeriodicWave",value:function(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){zN(this);var n=function t(){e._nativeOscillatorNode.removeEventListener("ended",t),JN(e)&&VN(e)};this._nativeOscillatorNode.addEventListener("ended",n)}}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}}]),c}(e)}(pM,CM,sP,cP,rM,iM,GA),lP=(YI=jM,function(e,t){var n=YI(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(t),n.start(),function(){n.stop(),n.disconnect(t)}}),fP=function(e,t,n,r,a){return function(i,o){var s=o.curve,c=o.oversample,u=uI(o,CA),l=i.createWaveShaper(),f=i.createWaveShaper();$T(l,u),$T(f,u);var d=n(i,Object(UN.a)(Object(UN.a)({},u),{},{gain:1})),p=n(i,Object(UN.a)(Object(UN.a)({},u),{},{gain:-1})),h=n(i,Object(UN.a)(Object(UN.a)({},u),{},{gain:1})),v=n(i,Object(UN.a)(Object(UN.a)({},u),{},{gain:-1})),m=null,b=!1,g=null,y={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(e){d.channelCount=e,p.channelCount=e,l.channelCount=e,h.channelCount=e,f.channelCount=e,v.channelCount=e},get channelCountMode(){return l.channelCountMode},set channelCountMode(e){d.channelCountMode=e,p.channelCountMode=e,l.channelCountMode=e,h.channelCountMode=e,f.channelCountMode=e,v.channelCountMode=e},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e,p.channelInterpretation=e,l.channelInterpretation=e,h.channelInterpretation=e,f.channelInterpretation=e,v.channelInterpretation=e},get context(){return l.context},get curve(){return g},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)l.curve=n,f.curve=n;else{var a=n.length,o=new Float32Array(a+2-a%2),s=new Float32Array(a+2-a%2);o[0]=n[0],s[0]=-n[a-1];for(var c=Math.ceil((a+1)/2),u=(a+1)/2-1,p=1;p<c;p+=1){var h=p/c*u,v=Math.floor(h),y=Math.ceil(h);o[p]=v===y?n[v]:(1-(h-v))*n[v]+(1-(y-h))*n[y],s[p]=v===y?-n[a-1-v]:-(1-(h-v))*n[a-1-v]-(1-(y-h))*n[a-1-y]}o[c]=a%2===1?n[c-1]:(n[c-2]+n[c-1])/2,l.curve=o,f.curve=s}g=n,b&&(r(g)&&null===m?m=e(i,d):null!==m&&(m(),m=null))},get inputs(){return[d]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(e){l.oversample=e,f.oversample=e},addEventListener:function(){return d.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return d.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return d.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};null!==s&&(y.curve=s instanceof Float32Array?s:new Float32Array(s)),c!==y.oversample&&(y.oversample=c);return a(lI(y,h),(function(){d.connect(l).connect(h),d.connect(p).connect(f).connect(v).connect(h),b=!0,r(g)&&(m=e(i,d))}),(function(){d.disconnect(l),l.disconnect(h),d.disconnect(p),p.disconnect(f),f.disconnect(v),v.disconnect(h),b=!1,null!==m&&(m(),m=null)}))}}(lP,UT,pI,FA,MM),dP=function(e,t,n,r,a,i,o){return function(s,c){var u=s.createWaveShaper();if(null!==i&&"webkitAudioContext"===i.name&&void 0===s.createGain().gain.automationRate)return n(s,c);$T(u,c);var l=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==l&&l.length<2)throw t();JT(u,{curve:l},"curve"),JT(u,c,"oversample");var f=null,d=!1;o(u,"curve",(function(e){return function(){return e.call(u)}}),(function(t){return function(n){return t.call(u,n),d&&(r(n)&&null===f?f=e(s,u):r(n)||null===f||(f(),f=null)),n}}));return a(u,(function(){d=!0,r(u.curve)&&(f=e(s,u))}),(function(){d=!1,null!==f&&(f(),f=null)}))}}(lP,UT,fP,FA,MM,cM,LA),pP=function(e,t,n,r,a,i,o,s,c,u){return function(l,f){var d=f.coneInnerAngle,p=f.coneOuterAngle,h=f.coneOuterGain,v=f.distanceModel,m=f.maxDistance,b=f.orientationX,g=f.orientationY,y=f.orientationZ,O=f.panningModel,k=f.positionX,w=f.positionY,x=f.positionZ,j=f.refDistance,S=f.rolloffFactor,_=uI(f,jA),C=l.createPanner();if(_.channelCount>2)throw o();if("max"===_.channelCountMode)throw o();$T(C,_);var E={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},N=n(l,Object(UN.a)(Object(UN.a)({},E),{},{channelInterpretation:"speakers",numberOfInputs:6})),T=r(l,Object(UN.a)(Object(UN.a)({},_),{},{gain:1})),A=r(l,Object(UN.a)(Object(UN.a)({},E),{},{gain:1})),M=r(l,Object(UN.a)(Object(UN.a)({},E),{},{gain:0})),P=r(l,Object(UN.a)(Object(UN.a)({},E),{},{gain:0})),R=r(l,Object(UN.a)(Object(UN.a)({},E),{},{gain:0})),D=r(l,Object(UN.a)(Object(UN.a)({},E),{},{gain:0})),F=r(l,Object(UN.a)(Object(UN.a)({},E),{},{gain:0})),L=a(l,256,6,1),z=i(l,Object(UN.a)(Object(UN.a)({},E),{},{curve:new Float32Array([1,1]),oversample:"none"})),q=[b,g,y],V=[k,w,x],B=new Float32Array(1);L.onaudioprocess=function(e){var t=e.inputBuffer,n=[c(t,B,0),c(t,B,1),c(t,B,2)];n.some((function(e,t){return e!==q[t]}))&&(C.setOrientation.apply(C,n),q=n);var r=[c(t,B,3),c(t,B,4),c(t,B,5)];r.some((function(e,t){return e!==V[t]}))&&(C.setPosition.apply(C,r),V=r)},Object.defineProperty(M.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(P.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(R.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(D.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(F.gain,"defaultValue",{get:function(){return 0}});var U={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(e){if(e>2)throw o();T.channelCount=e,C.channelCount=e},get channelCountMode(){return C.channelCountMode},set channelCountMode(e){if("max"===e)throw o();T.channelCountMode=e,C.channelCountMode=e},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(e){T.channelInterpretation=e,C.channelInterpretation=e},get coneInnerAngle(){return C.coneInnerAngle},set coneInnerAngle(e){C.coneInnerAngle=e},get coneOuterAngle(){return C.coneOuterAngle},set coneOuterAngle(e){C.coneOuterAngle=e},get coneOuterGain(){return C.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();C.coneOuterGain=e},get context(){return C.context},get distanceModel(){return C.distanceModel},set distanceModel(e){C.distanceModel=e},get inputs(){return[T]},get maxDistance(){return C.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;C.maxDistance=e},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get orientationX(){return A.gain},get orientationY(){return M.gain},get orientationZ(){return P.gain},get panningModel(){return C.panningModel},set panningModel(e){C.panningModel=e},get positionX(){return R.gain},get positionY(){return D.gain},get positionZ(){return F.gain},get refDistance(){return C.refDistance},set refDistance(e){if(e<0)throw new RangeError;C.refDistance=e},get rolloffFactor(){return C.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;C.rolloffFactor=e},addEventListener:function(){return T.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return T.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return T.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};d!==U.coneInnerAngle&&(U.coneInnerAngle=d),p!==U.coneOuterAngle&&(U.coneOuterAngle=p),h!==U.coneOuterGain&&(U.coneOuterGain=h),v!==U.distanceModel&&(U.distanceModel=v),m!==U.maxDistance&&(U.maxDistance=m),b!==U.orientationX.value&&(U.orientationX.value=b),g!==U.orientationY.value&&(U.orientationY.value=g),y!==U.orientationZ.value&&(U.orientationZ.value=y),O!==U.panningModel&&(U.panningModel=O),k!==U.positionX.value&&(U.positionX.value=k),w!==U.positionY.value&&(U.positionY.value=w),x!==U.positionZ.value&&(U.positionZ.value=x),j!==U.refDistance&&(U.refDistance=j),S!==U.rolloffFactor&&(U.rolloffFactor=S),1===q[0]&&0===q[1]&&0===q[2]||C.setOrientation.apply(C,Object(I.a)(q)),0===V[0]&&0===V[1]&&0===V[2]||C.setPosition.apply(C,Object(I.a)(V));return u(lI(U,C),(function(){T.connect(C),e(T,z,0,0),z.connect(A).connect(N,0,0),z.connect(M).connect(N,0,1),z.connect(P).connect(N,0,2),z.connect(R).connect(N,0,3),z.connect(D).connect(N,0,4),z.connect(F).connect(N,0,5),N.connect(L).connect(l.destination)}),(function(){T.disconnect(C),s(T,z,0,0),z.disconnect(A),A.disconnect(N),z.disconnect(M),M.disconnect(N),z.disconnect(P),P.disconnect(N),z.disconnect(R),R.disconnect(N),z.disconnect(D),D.disconnect(N),z.disconnect(F),F.disconnect(N),N.disconnect(L),L.disconnect(l.destination)}))}}(fT,UT,RM,pI,SA,dP,EA,vT,DA,MM),hP=(ZI=pP,function(e,t){var n=e.createPanner();return void 0===n.orientationX?ZI(e,t):($T(n,t),tI(n,t,"orientationX"),tI(n,t,"orientationY"),tI(n,t,"orientationZ"),tI(n,t,"positionX"),tI(n,t,"positionY"),tI(n,t,"positionZ"),JT(n,t,"coneInnerAngle"),JT(n,t,"coneOuterAngle"),JT(n,t,"coneOuterGain"),JT(n,t,"distanceModel"),JT(n,t,"maxDistance"),JT(n,t,"panningModel"),JT(n,t,"refDistance"),JT(n,t,"rolloffFactor"),n)}),vP=function(e,t,n,r,a,i,o,s,c,u){return function(){var l=new WeakMap,f=null,d=function(){var d=Object(bn.a)(mn.a.mark((function d(p,h){var v,m,b,g,y,O,k;return mn.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(v=null,m=i(p),b={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},g=Object(UN.a)(Object(UN.a)({},b),{},{coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor}),y=GN(m,h),"bufferSize"in m?v=r(h,Object(UN.a)(Object(UN.a)({},b),{},{gain:1})):y||(O=Object(UN.a)(Object(UN.a)({},g),{},{orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value}),m=a(h,O)),l.set(h,null===v?m:v),null===v){d.next=12;break}return d.delegateYield(mn.a.mark((function e(){var i,l,d,m,y,O,k,w,x,j,S,_,C,E;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==f){e.next=7;break}if(null!==o){e.next=3;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 3:i=new o(6,p.context.length,h.sampleRate),(l=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6})).connect(i.destination),f=Object(bn.a)(mn.a.mark((function e(){var t,r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(function(){var e=Object(bn.a)(mn.a.mark((function e(t,r){var a;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===r?1:0}),e.next=3,s(i,t,a.offset);case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:for(t=e.sent,r=0;r<6;r+=1)t[r].connect(l,0,r),t[r].start(0);return e.abrupt("return",u(i));case 5:case"end":return e.stop()}}),e)})))();case 7:return e.next=9,f;case 9:return d=e.sent,m=r(h,Object(UN.a)(Object(UN.a)({},b),{},{gain:1})),e.next=13,c(p,h,m);case 13:for(y=[],O=0;O<d.numberOfChannels;O+=1)y.push(d.getChannelData(O));for(k=[y[0][0],y[1][0],y[2][0]],w=[y[3][0],y[4][0],y[5][0]],x=r(h,Object(UN.a)(Object(UN.a)({},b),{},{gain:1})),j=a(h,Object(UN.a)(Object(UN.a)({},g),{},{orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:w[0],positionY:w[1],positionZ:w[2]})),m.connect(x).connect(j.inputs[0]),j.connect(v),S=128;S<d.length;S+=128)_=[y[0][S],y[1][S],y[2][S]],C=[y[3][S],y[4][S],y[5][S]],(_.some((function(e,t){return e!==k[t]}))||C.some((function(e,t){return e!==w[t]})))&&(k=_,w=C,E=S/h.sampleRate,x.gain.setValueAtTime(0,E),x=r(h,Object(UN.a)(Object(UN.a)({},b),{},{gain:0})),j=a(h,Object(UN.a)(Object(UN.a)({},g),{},{orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:w[0],positionY:w[1],positionZ:w[2]})),x.gain.setValueAtTime(1,E),m.connect(x).connect(j.inputs[0]),j.connect(v));return e.abrupt("return",{v:v});case 23:case"end":return e.stop()}}),e)}))(),"t0",9);case 9:if("object"!==typeof(k=d.t0)){d.next=12;break}return d.abrupt("return",k.v);case 12:if(y){d.next=27;break}return d.next=15,s(h,p.orientationX,m.orientationX);case 15:return d.next=17,s(h,p.orientationY,m.orientationY);case 17:return d.next=19,s(h,p.orientationZ,m.orientationZ);case 19:return d.next=21,s(h,p.positionX,m.positionX);case 21:return d.next=23,s(h,p.positionY,m.positionY);case 23:return d.next=25,s(h,p.positionZ,m.positionZ);case 25:d.next=39;break;case 27:return d.next=29,e(h,p.orientationX,m.orientationX);case 29:return d.next=31,e(h,p.orientationY,m.orientationY);case 31:return d.next=33,e(h,p.orientationZ,m.orientationZ);case 33:return d.next=35,e(h,p.positionX,m.positionX);case 35:return d.next=37,e(h,p.positionY,m.positionY);case 37:return d.next=39,e(h,p.positionZ,m.positionZ);case 39:if(!lT(m)){d.next=44;break}return d.next=42,c(p,h,m.inputs[0]);case 42:d.next=46;break;case 44:return d.next=46,c(p,h,m);case 46:return d.abrupt("return",m);case 47:case"end":return d.stop()}}),d)})));return function(e,t){return d.apply(this,arguments)}}();return{render:function(e,t){var n=l.get(t);return void 0!==n?Promise.resolve(n):d(e,t)}}}}(xM,RM,VM,pI,hP,mT,aM,SM,tM,tP),mP=function(e,t,n,r,a,i,o){return function(e){Object(E.a)(c,e);var s=Object(N.a)(c);function c(e,u){var l;Object(_.a)(this,c);var f=a(e),d=Object(UN.a)(Object(UN.a)({},IA),u),p=n(f,d),h=i(f),v=h?r():null;return(l=s.call(this,e,!1,p,v))._nativePannerNode=p,l._orientationX=t(Object(P.a)(l),h,p.orientationX,ZN,YN),l._orientationY=t(Object(P.a)(l),h,p.orientationY,ZN,YN),l._orientationZ=t(Object(P.a)(l),h,p.orientationZ,ZN,YN),l._positionX=t(Object(P.a)(l),h,p.positionX,ZN,YN),l._positionY=t(Object(P.a)(l),h,p.positionY,ZN,YN),l._positionZ=t(Object(P.a)(l),h,p.positionZ,ZN,YN),o(Object(P.a)(l),1),l}return Object(C.a)(c,[{key:"coneInnerAngle",get:function(){return this._nativePannerNode.coneInnerAngle},set:function(e){this._nativePannerNode.coneInnerAngle=e}},{key:"coneOuterAngle",get:function(){return this._nativePannerNode.coneOuterAngle},set:function(e){this._nativePannerNode.coneOuterAngle=e}},{key:"coneOuterGain",get:function(){return this._nativePannerNode.coneOuterGain},set:function(e){this._nativePannerNode.coneOuterGain=e}},{key:"distanceModel",get:function(){return this._nativePannerNode.distanceModel},set:function(e){this._nativePannerNode.distanceModel=e}},{key:"maxDistance",get:function(){return this._nativePannerNode.maxDistance},set:function(e){this._nativePannerNode.maxDistance=e}},{key:"orientationX",get:function(){return this._orientationX}},{key:"orientationY",get:function(){return this._orientationY}},{key:"orientationZ",get:function(){return this._orientationZ}},{key:"panningModel",get:function(){return this._nativePannerNode.panningModel},set:function(e){this._nativePannerNode.panningModel=e}},{key:"positionX",get:function(){return this._positionX}},{key:"positionY",get:function(){return this._positionY}},{key:"positionZ",get:function(){return this._positionZ}},{key:"refDistance",get:function(){return this._nativePannerNode.refDistance},set:function(e){this._nativePannerNode.refDistance=e}},{key:"rolloffFactor",get:function(){return this._nativePannerNode.rolloffFactor},set:function(e){this._nativePannerNode.rolloffFactor=e}}]),c}(e)}(pM,CM,hP,vP,rM,iM,IM),bP=function(e){return function(t,n){var r=n.disableNormalization,a=n.imag,i=n.real,o=a instanceof Float32Array?a:new Float32Array(a),s=i instanceof Float32Array?i:new Float32Array(i),c=t.createPeriodicWave(s,o,{disableNormalization:r});if(Array.from(a).length<2)throw e();return c}}(KN),gP=function(e,t,n,r){return function(a){function i(a,o){Object(_.a)(this,i);var s=t(a),c=r(Object(UN.a)(Object(UN.a)({},AA),o)),u=e(s,c);return n.add(u),u}return Object(C.a)(i,null,[{key:a,value:function(e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===i.prototype||n.has(e)}}]),i}(Symbol.hasInstance)}(bP,rM,new WeakSet,(function(e){var t=e.imag,n=e.real;return void 0===t?void 0===n?Object(UN.a)(Object(UN.a)({},e),{},{imag:[0,0],real:[0,0]}):Object(UN.a)(Object(UN.a)({},e),{},{imag:Array.from(n,(function(){return 0})),real:n}):void 0===n?Object(UN.a)(Object(UN.a)({},e),{},{imag:t,real:Array.from(t,(function(){return 0}))}):Object(UN.a)(Object(UN.a)({},e),{},{imag:t,real:n})})),yP=function(e,t,n,r,a,i){var o=16385,s=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l=Object(UN.a)(Object(UN.a)({},u),{},{oversample:"none"}),f=function(e,i,f,d,p){if(1===i)return function(e,t,a,i){for(var f=new Float32Array(o),d=new Float32Array(o),p=0;p<o;p+=1){var h=p/16384*c;f[p]=Math.cos(h),d[p]=Math.sin(h)}var v=n(e,Object(UN.a)(Object(UN.a)({},u),{},{gain:0})),m=r(e,Object(UN.a)(Object(UN.a)({},l),{},{curve:f})),b=r(e,Object(UN.a)(Object(UN.a)({},l),{},{curve:s})),g=n(e,Object(UN.a)(Object(UN.a)({},u),{},{gain:0})),y=r(e,Object(UN.a)(Object(UN.a)({},l),{},{curve:d}));return{connectGraph:function(){t.connect(v),t.connect(void 0===b.inputs?b:b.inputs[0]),t.connect(g),b.connect(a),a.connect(void 0===m.inputs?m:m.inputs[0]),a.connect(void 0===y.inputs?y:y.inputs[0]),m.connect(v.gain),y.connect(g.gain),v.connect(i,0,0),g.connect(i,0,1)},disconnectGraph:function(){t.disconnect(v),t.disconnect(void 0===b.inputs?b:b.inputs[0]),t.disconnect(g),b.disconnect(a),a.disconnect(void 0===m.inputs?m:m.inputs[0]),a.disconnect(void 0===y.inputs?y:y.inputs[0]),m.disconnect(v.gain),y.disconnect(g.gain),v.disconnect(i,0,0),g.disconnect(i,0,1)}}}(e,f,d,p);if(2===i)return function(e,a,i,f){for(var d=new Float32Array(o),p=new Float32Array(o),h=new Float32Array(o),v=new Float32Array(o),m=Math.floor(8192.5),b=0;b<o;b+=1)if(b>m){var g=(b-m)/(16384-m)*c;d[b]=Math.cos(g),p[b]=Math.sin(g),h[b]=0,v[b]=1}else{var y=b/(16384-m)*c;d[b]=1,p[b]=0,h[b]=Math.cos(y),v[b]=Math.sin(y)}var O=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),k=n(e,Object(UN.a)(Object(UN.a)({},u),{},{gain:0})),w=r(e,Object(UN.a)(Object(UN.a)({},l),{},{curve:d})),x=n(e,Object(UN.a)(Object(UN.a)({},u),{},{gain:0})),j=r(e,Object(UN.a)(Object(UN.a)({},l),{},{curve:p})),S=r(e,Object(UN.a)(Object(UN.a)({},l),{},{curve:s})),_=n(e,Object(UN.a)(Object(UN.a)({},u),{},{gain:0})),C=r(e,Object(UN.a)(Object(UN.a)({},l),{},{curve:h})),E=n(e,Object(UN.a)(Object(UN.a)({},u),{},{gain:0})),N=r(e,Object(UN.a)(Object(UN.a)({},l),{},{curve:v}));return{connectGraph:function(){a.connect(O),a.connect(void 0===S.inputs?S:S.inputs[0]),O.connect(k,0),O.connect(x,0),O.connect(_,1),O.connect(E,1),S.connect(i),i.connect(void 0===w.inputs?w:w.inputs[0]),i.connect(void 0===j.inputs?j:j.inputs[0]),i.connect(void 0===C.inputs?C:C.inputs[0]),i.connect(void 0===N.inputs?N:N.inputs[0]),w.connect(k.gain),j.connect(x.gain),C.connect(_.gain),N.connect(E.gain),k.connect(f,0,0),_.connect(f,0,0),x.connect(f,0,1),E.connect(f,0,1)},disconnectGraph:function(){a.disconnect(O),a.disconnect(void 0===S.inputs?S:S.inputs[0]),O.disconnect(k,0),O.disconnect(x,0),O.disconnect(_,1),O.disconnect(E,1),S.disconnect(i),i.disconnect(void 0===w.inputs?w:w.inputs[0]),i.disconnect(void 0===j.inputs?j:j.inputs[0]),i.disconnect(void 0===C.inputs?C:C.inputs[0]),i.disconnect(void 0===N.inputs?N:N.inputs[0]),w.disconnect(k.gain),j.disconnect(x.gain),C.disconnect(_.gain),N.disconnect(E.gain),k.disconnect(f,0,0),_.disconnect(f,0,0),x.disconnect(f,0,1),E.disconnect(f,0,1)}}}(e,f,d,p);throw a()};return function(t,r){var o=r.channelCount,s=r.channelCountMode,c=r.pan,u=uI(r,_A);if("max"===s)throw a();var l=e(t,Object(UN.a)(Object(UN.a)({},u),{},{channelCount:1,channelCountMode:s,numberOfInputs:2})),d=n(t,Object(UN.a)(Object(UN.a)({},u),{},{channelCount:o,channelCountMode:s,gain:1})),p=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:c}),h=f(t,o,d,p,l),v=h.connectGraph,m=h.disconnectGraph;Object.defineProperty(p.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(p.gain,"maxValue",{get:function(){return 1}}),Object.defineProperty(p.gain,"minValue",{get:function(){return-1}});var b={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(e){if(d.channelCount!==e){g&&m();var n=f(t,e,d,p,l);v=n.connectGraph,m=n.disconnectGraph,g&&v()}d.channelCount=e},get channelCountMode(){return d.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw a();d.channelCountMode=e},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e},get context(){return d.context},get inputs(){return[d]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get pan(){return p.gain},addEventListener:function(){return d.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return d.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return d.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},g=!1;return i(lI(b,l),(function(){v(),g=!0}),(function(){m(),g=!1}))}}(RM,cI,pI,dP,EA,MM),OP=function(e,t){return function(n,r){var a=r.channelCountMode;if("clamped-max"===a)throw t();if(void 0===n.createStereoPanner)return e(n,r);var i=n.createStereoPanner();return $T(i,r),tI(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:function(){return a},set:function(e){if(e!==a)throw t()}}),i}}(yP,EA),kP=function(e,t,n,r,a){return function(){var i=new WeakMap,o=function(){var o=Object(bn.a)(mn.a.mark((function o(s,c){var u,l,f;return mn.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(u=n(s),(l=GN(u,c))||(f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value},u=t(c,f)),i.set(c,u),l){o.next=9;break}return o.next=7,r(c,s.pan,u.pan);case 7:o.next=11;break;case 9:return o.next=11,e(c,s.pan,u.pan);case 11:if(!lT(u)){o.next=16;break}return o.next=14,a(s,c,u.inputs[0]);case 14:o.next=18;break;case 16:return o.next=18,a(s,c,u);case 18:return o.abrupt("return",u);case 19:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}();return{render:function(e,t){var n=i.get(t);return void 0!==n?Promise.resolve(n):o(e,t)}}}}(xM,OP,mT,SM,tM),wP=function(e,t,n,r,a,i){return function(e){Object(E.a)(s,e);var o=Object(N.a)(s);function s(e,c){var u;Object(_.a)(this,s);var l=a(e),f=Object(UN.a)(Object(UN.a)({},MA),c),d=n(l,f),p=i(l),h=p?r():null;return(u=o.call(this,e,!1,d,h))._pan=t(Object(P.a)(u),p,d.pan),u}return Object(C.a)(s,[{key:"pan",get:function(){return this._pan}}]),s}(e)}(pM,CM,OP,kP,rM,iM),xP=function(e,t,n){return function(){var r=new WeakMap,a=function(){var a=Object(bn.a)(mn.a.mark((function a(i,o){var s,c;return mn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=t(i),GN(s,o)||(c={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,curve:s.curve,oversample:s.oversample},s=e(o,c)),r.set(o,s),!lT(s)){a.next=9;break}return a.next=7,n(i,o,s.inputs[0]);case 7:a.next=11;break;case 9:return a.next=11,n(i,o,s);case 11:return a.abrupt("return",s);case 12:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return{render:function(e,t){var n=r.get(t);return void 0!==n?Promise.resolve(n):a(e,t)}}}}(dP,mT,tM),jP=function(e,t,n,r,a,i,o){return function(e){Object(E.a)(c,e);var s=Object(N.a)(c);function c(e,t){var u;Object(_.a)(this,c);var l=a(e),f=Object(UN.a)(Object(UN.a)({},RA),t),d=n(l,f),p=i(l)?r():null;return(u=s.call(this,e,!0,d,p))._isCurveNullified=!1,u._nativeWaveShaperNode=d,o(Object(P.a)(u),1),u}return Object(C.a)(c,[{key:"curve",get:function(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve},set:function(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}},{key:"oversample",get:function(){return this._nativeWaveShaperNode.oversample},set:function(e){this._nativeWaveShaperNode.oversample=e}}]),c}(e)}(pM,UT,dP,xP,rM,iM,IM),SP=function(e){return null!==e&&e.isSecureContext}(JA),_P=function(e){return function(t,n,r){Object.defineProperties(e,{currentFrame:{configurable:!0,get:function(){return Math.round(t*n)}},currentTime:{configurable:!0,get:function(){return t}}});try{return r()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}}}(JA),CP=new WeakMap,EP=function(e,t){return function(n){var r=e.get(n);if(void 0!==r)return r;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r}}(CP,aM),NP=SP?function(e,t,n,r,a,i,o,s,c,u,l,f,d){var p=0;return function(h,v){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"},b=l.get(h);if(void 0!==b&&b.has(v))return Promise.resolve();var g=u.get(h);if(void 0!==g){var y=g.get(v);if(void 0!==y)return y}var O=i(h),k=void 0===O.audioWorklet?a(v).then((function(e){var t=Object(A.a)(e,2),r=t[0],a=t[1],i=AN(r,a),o=Object(A.a)(i,2),s=o[0],c=o[1],u="".concat(s,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(c,"\n})})(window,'_AWGS')");return n(u)})).then((function(){var e=d._AWGS.pop();if(void 0===e)throw new SyntaxError;r(O.currentTime,O.sampleRate,(function(){return e((function e(){Object(_.a)(this,e)}),void 0,(function(e,n){if(""===e.trim())throw t();var r=EN.get(O);if(void 0!==r){if(r.has(e))throw t();PN(n),MN(n.parameterDescriptors),r.set(e,n)}else PN(n),MN(n.parameterDescriptors),EN.set(O,new Map([[e,n]]))}),O.sampleRate,void 0,void 0)}))})):Promise.all([a(v),Promise.resolve(e(f,f))]).then((function(e){var t=Object(A.a)(e,2),n=Object(A.a)(t[0],2),r=n[0],a=n[1],i=t[1],u=p+1;p=u;var l=AN(r,a),f=Object(A.a)(l,2),d=f[0],h=f[1],v=i?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}",b=i?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));",g=i?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));",y="".concat(d,";((AudioWorkletProcessor,registerProcessor)=>{").concat(h,"\n})(").concat(v,",(n,p)=>registerProcessor(n,class extends p{").concat(b,"process(i,o,p){").concat(g,"return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac").concat(u,"',class extends AudioWorkletProcessor{process(){return !1}})"),k=new Blob([y],{type:"application/javascript; charset=utf-8"}),w=URL.createObjectURL(k);return O.audioWorklet.addModule(w,m).then((function(){if(s(O))return O;var e=o(O);return e.audioWorklet.addModule(w,m).then((function(){return e}))})).then((function(e){if(null===c)throw new SyntaxError;try{new c(e,"__sac".concat(u))}catch(t){throw new SyntaxError}})).finally((function(){return URL.revokeObjectURL(w)}))}));return void 0===g?u.set(h,new Map([[v,k]])):g.set(v,k),k.then((function(){var e=l.get(h);void 0===e?l.set(h,new Set([v])):e.add(v)})).finally((function(){var e=u.get(h);void 0!==e&&e.delete(v)})),k}}(ZA,EA,function(e){return function(t){return new Promise((function(n,r){if(null!==e){var a=e.document.head;if(null===a)r(new SyntaxError);else{var i=e.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),s=URL.createObjectURL(o),c=e.onerror,u=function(){e.onerror=c,URL.revokeObjectURL(s)};e.onerror=function(t,n,a,i,o){return n===s||n===e.location.href&&1===a&&1===i?(u(),r(o),!1):null!==c?c(t,n,a,i,o):void 0},i.onerror=function(){u(),r(new SyntaxError)},i.onload=function(){u(),n()},i.src=s,i.type="module",a.appendChild(i)}}else r(new SyntaxError)}))}}(JA),_P,(JI=function(){return new DOMException("","AbortError")},function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.text();case 7:return e.t0=e.sent,e.t1=n.url,e.abrupt("return",[e.t0,e.t1]);case 10:e.next=14;break;case 12:e.prev=12,e.t2=e.catch(0);case 14:throw JI();case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()),rM,EP,iM,dM,new WeakMap,new WeakMap,function(e,t){return Object(bn.a)(mn.a.mark((function n(){var r,a,i,o,s,c,u;return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==e){n.next=2;break}return n.abrupt("return",!0);case 2:if(null!==t){n.next=4;break}return n.abrupt("return",!1);case 4:return r=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),a=new t(1,128,44100),i=URL.createObjectURL(r),o=!1,s=!1,n.prev=9,n.next=12,a.audioWorklet.addModule(i);case 12:return c=new e(a,"a",{numberOfOutputs:0}),u=a.createOscillator(),c.port.onmessage=function(){return o=!0},c.onprocessorerror=function(){return s=!0},u.connect(c),u.start(0),n.next=20,a.startRendering();case 20:n.next=24;break;case 22:n.prev=22,n.t0=n.catch(9);case 24:return n.prev=24,URL.revokeObjectURL(i),n.finish(24);case 27:return n.abrupt("return",o&&!s);case 28:case"end":return n.stop()}}),n,null,[[9,22,24,27]])})))}(dM,aM),JA):void 0,TP=function(e,t){return function(n){return e(n)||t(n)}}(uM,iM),IP=function(e,t,n,r,a,i,o,s,c,u,l){return function(f,d){var p=o(f)?f:i(f);if(a.has(d)){var h=n();return Promise.reject(h)}try{a.add(d)}catch(v){}return t(c,(function(){return c(p)}))?p.decodeAudioData(d).then((function(n){return LT(d).catch((function(){})),t(s,(function(){return s(n)}))||l(n),e.add(n),n})):new Promise((function(t,n){var a=function(){var e=Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,LT(d);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),i=function(e){n(e),a()};try{p.decodeAudioData(d,(function(n){"function"!==typeof n.copyFromChannel&&(u(n),XN(n)),e.add(n),a().then((function(){return t(n)}))}),(function(e){i(null===e?r():e)}))}catch(h){i(h)}}))}}(vM,ZA,(function(){return new DOMException("","DataCloneError")}),(function(){return new DOMException("","EncodingError")}),new WeakSet,rM,TP,HN,YT,gM,yM),AP=($I=NP,eA=hM,tA=OM,nA=EM,rA=AM,aA=FM,iA=zM,oA=UM,sA=HM,cA=IP,uA=XM,lA=ZM,fA=$M,dA=rP,pA=uP,hA=mP,vA=gP,mA=wP,bA=jP,function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;return Object(_.a)(this,n),(a=t.call(this,e,r))._nativeContext=e,a._audioWorklet=void 0===$I?void 0:{addModule:function(e,t){return $I(Object(P.a)(a),e,t)}},a}return Object(C.a)(n,[{key:"audioWorklet",get:function(){return this._audioWorklet}},{key:"createAnalyser",value:function(){return new eA(this)}},{key:"createBiquadFilter",value:function(){return new rA(this)}},{key:"createBuffer",value:function(e,t,n){return new tA({length:t,numberOfChannels:e,sampleRate:n})}},{key:"createBufferSource",value:function(){return new nA(this)}},{key:"createChannelMerger",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return new aA(this,{numberOfInputs:e})}},{key:"createChannelSplitter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return new iA(this,{numberOfOutputs:e})}},{key:"createConstantSource",value:function(){return new oA(this)}},{key:"createConvolver",value:function(){return new sA(this)}},{key:"createDelay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new uA(this,{maxDelayTime:e})}},{key:"createDynamicsCompressor",value:function(){return new lA(this)}},{key:"createGain",value:function(){return new fA(this)}},{key:"createIIRFilter",value:function(e,t){return new dA(this,{feedback:t,feedforward:e})}},{key:"createOscillator",value:function(){return new pA(this)}},{key:"createPanner",value:function(){return new hA(this)}},{key:"createPeriodicWave",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1};return new vA(this,Object(UN.a)(Object(UN.a)({},n),{},{imag:t,real:e}))}},{key:"createStereoPanner",value:function(){return new mA(this)}},{key:"createWaveShaper",value:function(){return new bA(this)}},{key:"decodeAudioData",value:function(e,t,n){return cA(this._nativeContext,e).then((function(e){return"function"===typeof t&&t(e),e}),(function(e){throw"function"===typeof n&&n(e),e}))}}]),n}(oP)),MP=function(e,t,n,r){return function(e){Object(E.a)(i,e);var a=Object(N.a)(i);function i(e,o){var s;Object(_.a)(this,i);var c=n(e),u=t(c,o);if(r(c))throw TypeError();return(s=a.call(this,e,!0,u,null))._nativeMediaElementAudioSourceNode=u,s}return Object(C.a)(i,[{key:"mediaElement",get:function(){return this._nativeMediaElementAudioSourceNode.mediaElement}}]),i}(e)}(pM,(function(e,t){return e.createMediaElementSource(t.mediaElement)}),rM,iM),PP=function(e,t,n,r){return function(e){Object(E.a)(i,e);var a=Object(N.a)(i);function i(e,o){var s;Object(_.a)(this,i);var c=n(e);if(r(c))throw new TypeError;var u=Object(UN.a)(Object(UN.a)({},QT),o),l=t(c,u);return(s=a.call(this,e,!1,l,null))._nativeMediaStreamAudioDestinationNode=l,s}return Object(C.a)(i,[{key:"stream",get:function(){return this._nativeMediaStreamAudioDestinationNode.stream}}]),i}(e)}(pM,(function(e,t){var n=e.createMediaStreamDestination();return $T(n,t),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:function(){return 0}}),n}),rM,iM),RP=function(e,t,n,r){return function(e){Object(E.a)(i,e);var a=Object(N.a)(i);function i(e,o){var s;Object(_.a)(this,i);var c=n(e),u=t(c,o);if(r(c))throw new TypeError;return(s=a.call(this,e,!0,u,null))._nativeMediaStreamAudioSourceNode=u,s}return Object(C.a)(i,[{key:"mediaStream",get:function(){return this._nativeMediaStreamAudioSourceNode.mediaStream}}]),i}(e)}(pM,(function(e,t){var n=t.mediaStream,r=n.getAudioTracks();r.sort((function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}));var a=r.slice(0,1),i=e.createMediaStreamSource(new MediaStream(a));return Object.defineProperty(i,"mediaStream",{value:n}),i}),rM,iM),DP=function(e,t){return function(n,r){var a=r.mediaStreamTrack;if("function"===typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(a);var i=new MediaStream([a]),o=n.createMediaStreamSource(i);if("audio"!==a.kind)throw e();if(t(n))throw new TypeError;return o}}(UT,iM),FP=function(e,t,n){return function(e){Object(E.a)(a,e);var r=Object(N.a)(a);function a(e,i){Object(_.a)(this,a);var o=n(e),s=t(o,i);return r.call(this,e,!0,s,null)}return a}(e)}(pM,DP,rM),LP=function(e,t,n,r,a,i,o,s,c){return function(e){Object(E.a)(l,e);var u=Object(N.a)(l);function l(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(_.a)(this,l),null===c)throw new Error("Missing the native AudioContext constructor.");try{t=new c(a)}catch(d){if(12===d.code&&"sampleRate is not in range"===d.message)throw n();throw d}if(null===t)throw r();if(!aT(a.latencyHint))throw new TypeError("The provided value '".concat(a.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==a.sampleRate&&t.sampleRate!==a.sampleRate)throw n();e=u.call(this,t,2);var i=a.latencyHint,o=t,s=o.sampleRate;if(e._baseLatency="number"===typeof t.baseLatency?t.baseLatency:"balanced"===i?512/s:"interactive"===i||void 0===i?256/s:"playback"===i?1024/s:128*Math.max(2,Math.min(128,Math.round(i*s/128)))/s,e._nativeAudioContext=t,"webkitAudioContext"===c.name?(e._nativeGainNode=t.createGain(),e._nativeOscillatorNode=t.createOscillator(),e._nativeGainNode.gain.value=1e-37,e._nativeOscillatorNode.connect(e._nativeGainNode).connect(t.destination),e._nativeOscillatorNode.start()):(e._nativeGainNode=null,e._nativeOscillatorNode=null),e._state=null,"running"===t.state){e._state="suspended";var f=function n(){"suspended"===e._state&&(e._state=null),t.removeEventListener("statechange",n)};t.addEventListener("statechange",f)}return e}return Object(C.a)(l,[{key:"baseLatency",get:function(){return this._baseLatency}},{key:"state",get:function(){return null!==this._state?this._state:this._nativeAudioContext.state}},{key:"close",value:function(){var e=this;return"closed"===this.state?this._nativeAudioContext.close().then((function(){throw t()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((function(){null!==e._nativeGainNode&&null!==e._nativeOscillatorNode&&(e._nativeOscillatorNode.stop(),e._nativeGainNode.disconnect(),e._nativeOscillatorNode.disconnect()),rT(e)})))}},{key:"createMediaElementSource",value:function(e){return new a(this,{mediaElement:e})}},{key:"createMediaStreamDestination",value:function(){return new i(this)}},{key:"createMediaStreamSource",value:function(e){return new o(this,{mediaStream:e})}},{key:"createMediaStreamTrackSource",value:function(e){return new s(this,{mediaStreamTrack:e})}},{key:"resume",value:function(){var e=this;return"suspended"===this._state?new Promise((function(t,n){e._nativeAudioContext.addEventListener("statechange",(function r(){e._nativeAudioContext.removeEventListener("statechange",r),"running"===e._nativeAudioContext.state?t():e.resume().then(t,n)}))})):this._nativeAudioContext.resume().catch((function(e){if(void 0===e||15===e.code)throw t();throw e}))}},{key:"suspend",value:function(){return this._nativeAudioContext.suspend().catch((function(e){if(void 0===e)throw t();throw e}))}}]),l}(e)}(AP,UT,EA,PA,MP,PP,RP,FP,cM),zP=(gA=iP,function(e){var t=gA.get(e);if(void 0===t)throw new Error("The context has no set of AudioWorkletNodes.");return t}),qP=(yA=zP,function(e,t){yA(e).add(t)}),VP=function(e){return function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t[r];if(void 0===i)throw e();return wT(n)?i.connect(n,0,a):i.connect(n,0)}}(KN),BP=function(e){return function(t,n){e(t).delete(n)}}(zP),UP=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?t.forEach((function(e){return e.disconnect()})):"number"===typeof n?qT(e,t,n).disconnect():wT(n)?void 0===r?t.forEach((function(e){return e.disconnect(n)})):void 0===a?qT(e,t,r).disconnect(n,0):qT(e,t,r).disconnect(n,0,a):void 0===r?t.forEach((function(e){return e.disconnect(n)})):qT(e,t,r).disconnect(n,0)}}(KN),WP=new WeakMap,GP=function(e,t){return function(n){return t(e,n)}}(WP,RN),HP=function(e,t,n,r,a,i,o,s,c,u,l,f,d){return function(p,h,v,m){if(0===m.numberOfInputs&&0===m.numberOfOutputs)throw c();var b=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(b.some((function(e){return e<1})))throw c();if(b.length!==m.numberOfOutputs)throw t();if("explicit"!==m.channelCountMode)throw c();var g=m.channelCount*m.numberOfInputs,y=b.reduce((function(e,t){return e+t}),0),O=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length;if(g+O>6||y>6)throw c();for(var k=new MessageChannel,w=[],x=[],j=0;j<m.numberOfInputs;j+=1)w.push(o(p,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),x.push(a(p,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));var S=[];if(void 0!==v.parameterDescriptors){var _,C=Object(M.a)(v.parameterDescriptors);try{var E=function(){var e=_.value,t=e.defaultValue,n=e.maxValue,r=e.minValue,a=e.name,o=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==m.parameterData[a]?m.parameterData[a]:void 0===t?0:t});Object.defineProperties(o.offset,{defaultValue:{get:function(){return void 0===t?0:t}},maxValue:{get:function(){return void 0===n?ZN:n}},minValue:{get:function(){return void 0===r?YN:r}}}),S.push(o)};for(C.s();!(_=C.n()).done;)E()}catch(ie){C.e(ie)}finally{C.f()}}for(var N=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,g+O)}),T=aI(h,p.sampleRate),I=s(p,T,g+O,Math.max(1,y)),A=a(p,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),P=[],R=0;R<m.numberOfOutputs;R+=1)P.push(r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b[R]}));for(var D=0;D<m.numberOfInputs;D+=1){w[D].connect(x[D]);for(var F=0;F<m.channelCount;F+=1)x[D].connect(N,F,D*m.channelCount+F)}var L=new _T(void 0===v.parameterDescriptors?[]:v.parameterDescriptors.map((function(e,t){var n=e.name,r=S[t];return r.connect(N,0,g+t),r.start(0),[n,r.offset]})));N.connect(I);var z,q,V=m.channelInterpretation,B=null,U=0===m.numberOfOutputs?[I]:P,W={get bufferSize(){return T},get channelCount(){return m.channelCount},set channelCount(e){throw n()},get channelCountMode(){return m.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return V},set channelInterpretation(e){var t,n=Object(M.a)(w);try{for(n.s();!(t=n.n()).done;){t.value.channelInterpretation=e}}catch(ie){n.e(ie)}finally{n.f()}V=e},get context(){return I.context},get inputs(){return w},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get onprocessorerror(){return B},set onprocessorerror(e){"function"===typeof B&&W.removeEventListener("processorerror",B),"function"===typeof(B="function"===typeof e?e:null)&&W.addEventListener("processorerror",B)},get parameters(){return L},get port(){return k.port2},addEventListener:function(){return I.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:e.bind(null,U),disconnect:u.bind(null,U),dispatchEvent:function(){return I.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return I.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},G=new Map;k.port1.addEventListener=(z=k.port1.addEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){var r="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==r){var a=G.get(t[1]);void 0!==a?t[1]=a:(t[1]=function(e){l(p.currentTime,p.sampleRate,(function(){return r(e)}))},G.set(r,t[1]))}}return z.call(k.port1,t[0],t[1],t[2])}),k.port1.removeEventListener=(q=k.port1.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){var r=G.get(t[1]);void 0!==r&&(G.delete(t[1]),t[1]=r)}return q.call(k.port1,t[0],t[1],t[2])});var H=null;Object.defineProperty(k.port1,"onmessage",{get:function(){return H},set:function(e){"function"===typeof H&&k.port1.removeEventListener("message",H),"function"===typeof(H="function"===typeof e?e:null)&&(k.port1.addEventListener("message",H),k.port1.start())}}),v.prototype.port=k.port1;var K=null,X=function(e,t,n,r){var a=NN.get(e);void 0===a&&(a=new WeakMap,NN.set(e,a));var i=oI(n,r);return a.set(t,i),i}(p,W,v,m);X.then((function(e){return K=e}));var Q=TT(m.numberOfInputs,m.channelCount),Y=TT(m.numberOfOutputs,b),Z=void 0===v.parameterDescriptors?[]:v.parameterDescriptors.reduce((function(e,t){var n=t.name;return Object(UN.a)(Object(UN.a)({},e),{},Object(Ua.a)({},n,new Float32Array(128)))}),{}),J=!0,$=function(){m.numberOfOutputs>0&&I.disconnect(A);for(var e=0,t=0;e<m.numberOfOutputs;e+=1){for(var n=P[e],r=0;r<b[e];r+=1)A.disconnect(n,t+r,r);t+=b[e]}},ee=new Map;I.onaudioprocess=function(e){var t=e.inputBuffer,n=e.outputBuffer;null!==K&&function(){for(var e=f(W),r=function(r){for(var a=0;a<m.numberOfInputs;a+=1)for(var i=0;i<m.channelCount;i+=1)ET(t,Q[a],i,i,r);void 0!==v.parameterDescriptors&&v.parameterDescriptors.forEach((function(e,n){var a=e.name;ET(t,Z,a,g+n,r)}));for(var o=0;o<m.numberOfInputs;o+=1)for(var s=0;s<b[o];s+=1)0===Y[o][s].byteLength&&(Y[o][s]=new Float32Array(128));try{var c=Q.map((function(t,n){if(e[n].size>0)return ee.set(n,T/128),t;var r=ee.get(n);return void 0===r?[]:(t.every((function(e){return e.every((function(e){return 0===e}))}))&&(1===r?ee.delete(n):ee.set(n,r-1)),t)})),u=l(p.currentTime+r/p.sampleRate,p.sampleRate,(function(){return K.process(c,Y,Z)}));J=u;for(var f=0,d=0;f<m.numberOfOutputs;f+=1){for(var h=0;h<b[f];h+=1)NT(n,Y[f],h,d+h,r);d+=b[f]}}catch(C){J=!1,W.dispatchEvent(new ErrorEvent("processorerror",{colno:C.colno,filename:C.filename,lineno:C.lineno,message:C.message}))}if(!J){for(var y=0;y<m.numberOfInputs;y+=1){w[y].disconnect(x[y]);for(var O=0;O<m.channelCount;O+=1)x[r].disconnect(N,O,y*m.channelCount+O)}if(void 0!==v.parameterDescriptors)for(var k=v.parameterDescriptors.length,j=0;j<k;j+=1){var _=S[j];_.disconnect(N,0,g+j),_.stop()}return N.disconnect(I),I.onaudioprocess=null,te?$():ae(),"break"}},a=0;a<T;a+=128){if("break"===r(a))break}}()};var te=!1,ne=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),re=function(){return I.connect(ne).connect(p.destination)},ae=function(){I.disconnect(ne),ne.disconnect()};return re(),d(W,(function(){if(J){ae(),m.numberOfOutputs>0&&I.connect(A);for(var e=0,t=0;e<m.numberOfOutputs;e+=1){for(var n=P[e],r=0;r<b[e];r+=1)A.connect(n,t+r,r);t+=b[e]}}te=!0}),(function(){J&&(re(),$()),te=!1}))}}(VP,KN,UT,RM,cI,VM,pI,SA,EA,UP,_P,GP,MM),KP=function(e,t,n,r,a){return function(i,o,s,c,u,l){if(null!==s)try{var f=new s(i,c,l),d=new Map,p=null;if(Object.defineProperties(f,{channelCount:{get:function(){return l.channelCount},set:function(){throw e()}},channelCountMode:{get:function(){return"explicit"},set:function(){throw e()}},onprocessorerror:{get:function(){return p},set:function(e){"function"===typeof p&&f.removeEventListener("processorerror",p),"function"===typeof(p="function"===typeof e?e:null)&&f.addEventListener("processorerror",p)}}}),f.addEventListener=(m=f.addEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("processorerror"===t[0]){var r="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==r){var a=d.get(t[1]);void 0!==a?t[1]=a:(t[1]=function(e){"error"===e.type?(Object.defineProperties(e,{type:{value:"processorerror"}}),r(e)):r(new ErrorEvent(t[0],Object(UN.a)({},e)))},d.set(r,t[1]))}}return m.call(f,"error",t[1],t[2]),m.call.apply(m,[f].concat(t))}),f.removeEventListener=(v=f.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("processorerror"===t[0]){var r=d.get(t[1]);void 0!==r&&(d.delete(t[1]),t[1]=r)}return v.call(f,"error",t[1],t[2]),v.call(f,t[0],t[1],t[2])}),0!==l.numberOfOutputs){var h=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});f.connect(h).connect(i.destination);return a(f,(function(){return h.disconnect()}),(function(){return h.connect(i.destination)}))}return f}catch(b){if(11===b.code)throw r();throw b}var v,m;if(void 0===u)throw r();return function(e){var t=(new MessageChannel).port1;try{t.postMessage(e)}finally{t.close()}}(l),t(i,o,u,l)}}(UT,HP,pI,EA,MM),XP=function(e,t,n,r,a,i,o,s,c,u,l,f,d,p,h,v){return function(m,b,g){var y=new WeakMap,O=null,k=function(){var s=Object(bn.a)(mn.a.mark((function s(k,w){var x,j,S,_,C,E,N,T,I,P,R,D,F,L,z,q,V,B,U,W,G,H,K,X,Q,Y,Z,J,$,ee,te,ne,re,ae;return mn.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(x=l(k),j=null,S=GN(x,w),_=Array.isArray(b.outputChannelCount)?b.outputChannelCount:Array.from(b.outputChannelCount),null===f){for(C=_.reduce((function(e,t){return e+t}),0),E=a(w,{channelCount:Math.max(1,C),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,C)}),N=[],T=0;T<k.numberOfOutputs;T+=1)N.push(r(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[T]}));(I=o(w,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})).connect=t.bind(null,N),I.disconnect=c.bind(null,N),j=[E,N,I]}else S||(x=new f(w,m));if(y.set(w,null===j?x:j[2]),null===j){s.next=41;break}if(null!==O){s.next=32;break}if(void 0!==g){s.next=10;break}throw new Error("Missing the processor constructor.");case 10:if(null!==d){s.next=12;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 12:if(P=k.channelCount*k.numberOfInputs,R=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length,D=P+R,F=function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,s,c,u,l,f,m,g,y,O,x,j;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new d(D,128*Math.ceil(k.context.length/128),w.sampleRate),n=[],s=[],c=0;c<b.numberOfInputs;c+=1)n.push(o(t,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),s.push(a(t,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));return e.next=6,Promise.all(Array.from(k.parameters.values()).map(function(){var e=Object(bn.a)(mn.a.mark((function e(n){var r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:n.value}),e.next=3,p(t,n,r.offset);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:for(u=e.sent,l=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,P+R)}),f=0;f<b.numberOfInputs;f+=1)for(n[f].connect(s[f]),m=0;m<b.channelCount;m+=1)s[f].connect(l,m,f*b.channelCount+m);g=Object(M.a)(u.entries());try{for(g.s();!(y=g.n()).done;)O=Object(A.a)(y.value,2),x=O[0],(j=O[1]).connect(l,0,P+x),j.start(0)}catch(S){g.e(S)}finally{g.f()}return l.connect(t.destination),e.next=14,Promise.all(n.map((function(e){return h(k,t,e)})));case 14:return e.abrupt("return",v(t));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.t0=AT,s.t1=k,0!==D){s.next=22;break}s.t2=null,s.next=25;break;case 22:return s.next=24,F();case 24:s.t2=s.sent;case 25:s.t3=s.t2,s.t4=w,s.t5=b,s.t6=_,s.t7=g,s.t8=u,O=(0,s.t0)(s.t1,s.t3,s.t4,s.t5,s.t6,s.t7,s.t8);case 32:return s.next=34,O;case 34:for(L=s.sent,z=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),q=j,V=Object(A.a)(q,3),B=V[0],U=V[1],W=V[2],null!==L&&(z.buffer=L,z.start(0)),z.connect(B),G=0,H=0;G<k.numberOfOutputs;G+=1){for(K=U[G],X=0;X<_[G];X+=1)B.connect(K,H+X,X);H+=_[G]}return s.abrupt("return",W);case 41:if(S){s.next=61;break}Q=Object(M.a)(k.parameters.entries()),s.prev=43,Q.s();case 45:if((Y=Q.n()).done){s.next=51;break}return Z=Object(A.a)(Y.value,2),J=Z[0],$=Z[1],s.next=49,p(w,$,x.parameters.get(J));case 49:s.next=45;break;case 51:s.next=56;break;case 53:s.prev=53,s.t9=s.catch(43),Q.e(s.t9);case 56:return s.prev=56,Q.f(),s.finish(56);case 59:s.next=78;break;case 61:ee=Object(M.a)(k.parameters.entries()),s.prev=62,ee.s();case 64:if((te=ee.n()).done){s.next=70;break}return ne=Object(A.a)(te.value,2),re=ne[0],ae=ne[1],s.next=68,e(w,ae,x.parameters.get(re));case 68:s.next=64;break;case 70:s.next=75;break;case 72:s.prev=72,s.t10=s.catch(62),ee.e(s.t10);case 75:return s.prev=75,ee.f(),s.finish(75);case 78:return s.next=80,h(k,w,x);case 80:return s.abrupt("return",x);case 81:case"end":return s.stop()}}),s,null,[[43,53,56,59],[62,72,75,78]])})));return function(e,t){return s.apply(this,arguments)}}();return{render:function(e,t){s(t,e);var n=y.get(t);return void 0!==n?Promise.resolve(n):k(e,t)}}}}(xM,VP,jM,RM,cI,VM,pI,BP,UP,_P,mT,dM,aM,SM,tM,tP),QP=function(e){return function(t){return e.get(t)}}(CP),YP=function(e){return function(t,n){e.set(t,n)}}(WP),ZP=SP?function(e,t,n,r,a,i,o,s,c,u,l,f,d,p){return function(t){Object(E.a)(v,t);var h=Object(N.a)(v);function v(t,p,m){var b,g;Object(_.a)(this,v);var y=s(t),O=c(y),k=l(Object(UN.a)(Object(UN.a)({},CT),m));d(k);var w=EN.get(y),x=null===w||void 0===w?void 0:w.get(p),j=O||"closed"!==y.state?y:null!==(g=o(y))&&void 0!==g?g:y,S=a(j,O?null:t.baseLatency,u,p,x,k),C=O?r(p,k,x):null;b=h.call(this,t,!0,S,C);var E=[];S.parameters.forEach((function(e,t){var r=n(Object(P.a)(b),O,e);E.push([t,r])})),b._nativeAudioWorkletNode=S,b._onprocessorerror=null,b._parameters=new _T(E),O&&e(y,Object(P.a)(b));var N=i(Object(P.a)(b)).activeInputs;return f(S,N),b}return Object(C.a)(v,[{key:"onprocessorerror",get:function(){return this._onprocessorerror},set:function(e){var t="function"===typeof e?p(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;var n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===t?e:n}},{key:"parameters",get:function(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}},{key:"port",get:function(){return this._nativeAudioWorkletNode.port}}]),v}(t)}(qP,pM,CM,XP,KP,eT,QP,rM,iM,dM,(function(e){return Object(UN.a)(Object(UN.a)({},e),{},{outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},(function(){return 1}))})}),YP,(function(e){var t=new MessageChannel,n=t.port1,r=t.port2;try{n.postMessage(e)}finally{n.close(),r.close()}}),GA):void 0,JP=(function(e,t,n,r,a){}(UT,EA,PA,oP,cM),function(e,t){return function(n,r,a){if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,r,a)}catch(i){if("SyntaxError"===i.name)throw e();throw i}}}(EA,aM)),$P=function(e,t,n,r,a,i,o,s){return function(c,u){return n(c).render(c,u).then((function(){return Promise.all(Array.from(r(u)).map((function(e){return n(e).render(e,u)})))})).then((function(){return a(u)})).then((function(n){return"function"!==typeof n.copyFromChannel?(o(n),XN(n)):t(i,(function(){return i(n)}))||s(n),e.add(n),n}))}}(vM,ZA,eM,zP,tP,HN,gM,yM),eR=(function(e,t,n,r,a){}(ZA,UT,JP,oP,$P),function(e,t,n,r,a){return function(e){Object(E.a)(o,e);var i=Object(N.a)(o);function o(e,n,a){var s,c;if(Object(_.a)(this,o),"number"===typeof e&&void 0!==n&&void 0!==a)c={length:n,numberOfChannels:e,sampleRate:a};else{if("object"!==typeof e)throw new Error("The given parameters are not valid.");c=e}var u=Object(UN.a)(Object(UN.a)({},NA),c),l=u.length,f=u.numberOfChannels,d=u.sampleRate,p=r(f,l,d);return t(YT,(function(){return YT(p)}))||p.addEventListener("statechange",function(){var e=0;return function t(n){"running"===s._state&&(e>0?(p.removeEventListener("statechange",t),n.stopImmediatePropagation(),s._waitForThePromiseToSettle(n)):e+=1)}}()),(s=i.call(this,p,f))._length=l,s._nativeOfflineAudioContext=p,s._state=null,s}return Object(C.a)(o,[{key:"length",get:function(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}},{key:"state",get:function(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}},{key:"startRendering",value:function(){var e=this;return"running"===this._state?Promise.reject(n()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally((function(){e._state=null,rT(e)})))}},{key:"_waitForThePromiseToSettle",value:function(e){var t=this;null===this._state?this._nativeOfflineAudioContext.dispatchEvent(e):setTimeout((function(){return t._waitForThePromiseToSettle(e)}))}}]),o}(e)}(AP,ZA,UT,JP,$P)),tR=function(e,t){return function(n){var r=e.get(n);return t(r)||t(n)}}(SN,uM),nR=(OA=wN,kA=lM,function(e){return OA.has(e)||kA(e)}),rR=(wA=jN,xA=fM,function(e){return wA.has(e)||xA(e)}),aR=function(e,t){return function(n){var r=e.get(n);return t(r)||t(n)}}(SN,iM),iR=function(){return XT(ZA,function(e){return function(){if(null===e)return!1;var t=new e(1,1,44100).createBuffer(1,1,44100);if(void 0===t.copyToChannel)return!0;var n=new Float32Array(2);try{t.copyFromChannel(n,0,0)}catch(r){return!1}return!0}}(aM),function(e){return function(){if(null===e)return!1;if(void 0!==e.prototype&&void 0!==e.prototype.close)return!0;var t=new e,n=void 0!==t.close;try{t.close()}catch(r){}return n}}(cM),function(e){return function(){if(null===e)return Promise.resolve(!1);var t=new e(1,1,44100);return new Promise((function(e){var n,r=!0,a=function(n){r&&(r=!1,t.startRendering(),e(n instanceof TypeError))};try{n=t.decodeAudioData(null,(function(){}),a)}catch(i){a(i)}void 0!==n&&n.catch(a)}))}}(aM),function(e){return function(){if(null===e)return!1;var t;try{t=new e({latencyHint:"balanced"})}catch(n){return!1}return t.close(),!0}}(cM),function(e){return function(){if(null===e)return!1;var t=new e(1,1,44100).createGain(),n=t.connect(t)===t;return t.disconnect(t),n}}(aM),function(e,t){return Object(bn.a)(mn.a.mark((function n(){var r,a,i,o,s,c,u;return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==e){n.next=2;break}return n.abrupt("return",!0);case 2:if(null!==t){n.next=4;break}return n.abrupt("return",!1);case 4:return r=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),a=new MessageChannel,i=new t(1,128,44100),o=URL.createObjectURL(r),s=!1,n.prev=9,n.next=12,i.audioWorklet.addModule(o);case 12:return c=new e(i,"a",{numberOfOutputs:0}),u=i.createOscillator(),n.next=16,new Promise((function(e){c.port.onmessage=function(){return e()},c.port.postMessage(a.port2,[a.port2])}));case 16:return c.port.onmessage=function(){return s=!0},u.connect(c),u.start(0),n.next=21,i.startRendering();case 21:return n.next=23,new Promise((function(e){a.port1.onmessage=function(t){var n=t.data;return e(1===n)},a.port1.postMessage(0)}));case 23:s=n.sent,n.next=28;break;case 26:n.prev=26,n.t0=n.catch(9);case 28:return n.prev=28,a.port1.close(),URL.revokeObjectURL(o),n.finish(28);case 32:return n.abrupt("return",s);case 33:case"end":return n.stop()}}),n,null,[[9,26,28,32]])})))}(dM,aM),function(e){return function(){if(null===e)return!1;var t=new e(1,1,44100).createChannelMerger();if("max"===t.channelCountMode)return!0;try{t.channelCount=2}catch(n){return!0}return!1}}(aM),function(e){return function(){if(null===e)return!1;var t=new e(1,1,44100);return void 0===t.createConstantSource||t.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY}}(aM),function(e){return function(){if(null===e)return!1;var t=new e(1,1,44100),n=t.createConvolver();n.buffer=t.createBuffer(1,1,t.sampleRate);try{n.buffer=t.createBuffer(1,1,t.sampleRate)}catch(r){return!1}return!0}}(aM),function(e){return function(){if(null===e)return!1;var t=new e(1,1,44100).createConvolver();try{t.channelCount=1}catch(n){return!1}return!0}}(aM),BA,function(e){return function(){return null!==e&&e.hasOwnProperty("isSecureContext")}}(JA),function(e){return function(){if(null===e)return!1;var t=new e;try{return t.createMediaStreamSource(new MediaStream),!1}catch(n){return!0}finally{t.close()}}}(cM),function(e){return function(){if(null===e)return Promise.resolve(!1);var t=new e(1,1,44100);if(void 0===t.createStereoPanner)return Promise.resolve(!0);if(void 0===t.createConstantSource)return Promise.resolve(!0);var n=t.createConstantSource(),r=t.createStereoPanner();return n.channelCount=1,n.offset.value=1,r.channelCount=1,n.start(),n.connect(r).connect(t.destination),t.startRendering().then((function(e){return 1!==e.getChannelData(0)[0]}))}}(aM),UA)};function oR(e,t){if(!e)throw new Error(t)}function sR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!(t<=e&&e<=n))throw new RangeError("Value must be within [".concat(t,", ").concat(n,"], got: ").concat(e))}function cR(e){e.isOffline||"running"===e.state||dR('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var uR=console;function lR(e){uR=e}function fR(){var e;(e=uR).log.apply(e,arguments)}function dR(){var e;(e=uR).warn.apply(e,arguments)}function pR(e){return"undefined"===typeof e}function hR(e){return!pR(e)}function vR(e){return"function"===typeof e}function mR(e){return"number"===typeof e}function bR(e){return"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object}function gR(e){return"boolean"===typeof e}function yR(e){return Array.isArray(e)}function OR(e){return"string"===typeof e}function kR(e){return OR(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)}function wR(e){return new LP(e)}function xR(e,t,n){return new eR(e,t,n)}var jR="object"===typeof self?self:null,SR=jR&&(jR.hasOwnProperty("AudioContext")||jR.hasOwnProperty("webkitAudioContext"));function _R(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function CR(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))}Object.create;Object.create;var ER=function(){function e(t,n,r){Object(_.a)(this,e),this._callback=t,this._type=n,this._updateInterval=r,this._createClock()}return Object(C.a)(e,[{key:"_createWorker",value:function(){var e=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ".concat((1e3*this._updateInterval).toFixed(1),";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t")],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}},{key:"_createTimeout",value:function(){var e=this;this._timeout=setTimeout((function(){e._createTimeout(),e._callback()}),1e3*this._updateInterval)}},{key:"_createClock",value:function(){if("worker"===this._type)try{this._createWorker()}catch(e){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}},{key:"_disposeClock",value:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}},{key:"updateInterval",get:function(){return this._updateInterval},set:function(e){this._updateInterval=Math.max(e,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*e,1))}},{key:"type",get:function(){return this._type},set:function(e){this._disposeClock(),this._type=e,this._createClock()}},{key:"dispose",value:function(){this._disposeClock()}}]),e}();function NR(e){return rR(e)}function TR(e){return nR(e)}function IR(e){return aR(e)}function AR(e){return tR(e)}function MR(e){return e instanceof AudioBuffer}function PR(e,t){return"value"===e||NR(t)||TR(t)||MR(t)}function RR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var a=n.shift();if(bR(e)&&bR(a))for(var i in a)PR(i,a[i])?e[i]=a[i]:bR(a[i])?(e[i]||Object.assign(e,Object(Ua.a)({},i,{})),RR(e[i],a[i])):Object.assign(e,Object(Ua.a)({},i,a[i]));return RR.apply(void 0,[e].concat(n))}function DR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,a={},i=Array.from(t);if(bR(i[0])&&r&&!Reflect.has(i[0],r)){var o=Object.keys(i[0]).some((function(t){return Reflect.has(e,t)}));o||(RR(a,Object(Ua.a)({},r,i[0])),n.splice(n.indexOf(r),1),i.shift())}if(1===i.length&&bR(i[0]))RR(a,i[0]);else for(var s=0;s<n.length;s++)hR(i[s])&&(a[n[s]]=i[s]);return RR(e,a)}function FR(e,t){return pR(e)?t:e}function LR(e,t){return t.forEach((function(t){Reflect.has(e,t)&&delete e[t]})),e}var zR=function(){function e(){Object(_.a)(this,e),this.debug=!1,this._wasDisposed=!1}return Object(C.a)(e,[{key:"log",value:function(){if(this.debug||jR&&this.toString()===jR.TONE_DEBUG_CLASS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fR.apply(void 0,[this].concat(t))}}},{key:"dispose",value:function(){return this._wasDisposed=!0,this}},{key:"disposed",get:function(){return this._wasDisposed}},{key:"toString",value:function(){return this.name}}],[{key:"getDefaults",value:function(){return{}}}]),e}();zR.version=gN;var qR=1e-6;function VR(e,t){return e>t+qR}function BR(e,t){return VR(e,t)||WR(e,t)}function UR(e,t){return e+qR<t}function WR(e,t){return Math.abs(e-t)<qR}function GR(e,t,n){return Math.max(Math.min(e,n),t)}var HR=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this)).name="Timeline",e._timeline=[];var r=DR(n.getDefaults(),arguments,["memory"]);return e.memory=r.memory,e.increasing=r.increasing,e}return Object(C.a)(n,[{key:"length",get:function(){return this._timeline.length}},{key:"add",value:function(e){if(oR(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){var t=this._timeline[this.length-1];oR(BR(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{var n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){var r=this.length-this.memory;this._timeline.splice(0,r)}return this}},{key:"remove",value:function(e){var t=this._timeline.indexOf(e);return-1!==t&&this._timeline.splice(t,1),this}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",n=this._search(e,t);return-1!==n?this._timeline[n]:null}},{key:"peek",value:function(){return this._timeline[0]}},{key:"shift",value:function(){return this._timeline.shift()}},{key:"getAfter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}},{key:"getBefore",value:function(e){var t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];var n=this._search(e);return n-1>=0?this._timeline[n-1]:null}},{key:"cancel",value:function(e){if(this._timeline.length>1){var t=this._search(e);if(t>=0)if(WR(this._timeline[t].time,e)){for(var n=t;n>=0&&WR(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&BR(this._timeline[0].time,e)&&(this._timeline=[]);return this}},{key:"cancelBefore",value:function(e){var t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}},{key:"previousEvent",value:function(e){var t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}},{key:"_search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";if(0===this._timeline.length)return-1;var n=0,r=this._timeline.length,a=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;n<a;){var i=Math.floor(n+(a-n)/2),o=this._timeline[i],s=this._timeline[i+1];if(WR(o[t],e)){for(var c=i;c<this._timeline.length;c++){var u=this._timeline[c];if(!WR(u[t],e))break;i=c}return i}if(UR(o[t],e)&&VR(s[t],e))return i;VR(o[t],e)?a=i:n=i+1}return-1}},{key:"_iterate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._timeline.length-1;this._timeline.slice(t,n+1).forEach(e)}},{key:"forEach",value:function(e){return this._iterate(e),this}},{key:"forEachBefore",value:function(e,t){var n=this._search(e);return-1!==n&&this._iterate(t,0,n),this}},{key:"forEachAfter",value:function(e,t){var n=this._search(e);return this._iterate(t,n+1),this}},{key:"forEachBetween",value:function(e,t,n){var r=this._search(e),a=this._search(t);return-1!==r&&-1!==a?(this._timeline[r].time!==e&&(r+=1),this._timeline[a].time===t&&(a-=1),this._iterate(n,r,a)):-1===r&&this._iterate(n,0,a),this}},{key:"forEachFrom",value:function(e,t){for(var n=this._search(e);n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}},{key:"forEachAtTime",value:function(e,t){var n=this._search(e);if(-1!==n&&WR(this._timeline[n].time,e)){for(var r=n,a=n;a>=0&&WR(this._timeline[a].time,e);a--)r=a;this._iterate((function(e){t(e)}),r,n)}return this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._timeline=[],this}}],[{key:"getDefaults",value:function(){return{memory:1/0,increasing:!1}}}]),n}(zR),KR=[];function XR(e){KR.push(e)}var QR=[];function YR(e){QR.push(e)}function ZR(e){QR.forEach((function(t){return t(e)}))}var JR=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="Emitter",e}return Object(C.a)(n,[{key:"on",value:function(e,t){var n=this;return e.split(/\W+/).forEach((function(e){pR(n._events)&&(n._events={}),n._events.hasOwnProperty(e)||(n._events[e]=[]),n._events[e].push(t)})),this}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){t.apply(void 0,arguments),n.off(e,r)})),this}},{key:"off",value:function(e,t){var n=this;return e.split(/\W+/).forEach((function(r){if(pR(n._events)&&(n._events={}),n._events.hasOwnProperty(e))if(pR(t))n._events[e]=[];else for(var a=n._events[e],i=a.length-1;i>=0;i--)a[i]===t&&a.splice(i,1)})),this}},{key:"emit",value:function(e){if(this._events&&this._events.hasOwnProperty(e)){for(var t=this._events[e].slice(0),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var i=0,o=t.length;i<o;i++)t[i].apply(this,r)}return this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._events=void 0,this}}],[{key:"mixin",value:function(e){["on","once","off","emit"].forEach((function(t){var r=Object.getOwnPropertyDescriptor(n.prototype,t);Object.defineProperty(e.prototype,t,r)}))}}]),n}(zR),$R=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).isOffline=!1,e}return Object(C.a)(n,[{key:"toJSON",value:function(){return{}}}]),n}(JR),eD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this)).name="Context",e._constants=new Map,e._timeouts=new HR,e._timeoutIds=0,e._initialized=!1,e.isOffline=!1,e._workletModules=new Map;var r=DR(n.getDefaults(),arguments,["context"]);return r.context?e._context=r.context:e._context=wR({latencyHint:r.latencyHint}),e._ticker=new ER(e.emit.bind(Object(P.a)(e),"tick"),r.clockSource,r.updateInterval),e.on("tick",e._timeoutLoop.bind(Object(P.a)(e))),e._context.onstatechange=function(){e.emit("statechange",e.state)},e._setLatencyHint(r.latencyHint),e.lookAhead=r.lookAhead,e}return Object(C.a)(n,[{key:"initialize",value:function(){var e;return this._initialized||(e=this,KR.forEach((function(t){return t(e)})),this._initialized=!0),this}},{key:"createAnalyser",value:function(){return this._context.createAnalyser()}},{key:"createOscillator",value:function(){return this._context.createOscillator()}},{key:"createBufferSource",value:function(){return this._context.createBufferSource()}},{key:"createBiquadFilter",value:function(){return this._context.createBiquadFilter()}},{key:"createBuffer",value:function(e,t,n){return this._context.createBuffer(e,t,n)}},{key:"createChannelMerger",value:function(e){return this._context.createChannelMerger(e)}},{key:"createChannelSplitter",value:function(e){return this._context.createChannelSplitter(e)}},{key:"createConstantSource",value:function(){return this._context.createConstantSource()}},{key:"createConvolver",value:function(){return this._context.createConvolver()}},{key:"createDelay",value:function(e){return this._context.createDelay(e)}},{key:"createDynamicsCompressor",value:function(){return this._context.createDynamicsCompressor()}},{key:"createGain",value:function(){return this._context.createGain()}},{key:"createIIRFilter",value:function(e,t){return this._context.createIIRFilter(e,t)}},{key:"createPanner",value:function(){return this._context.createPanner()}},{key:"createPeriodicWave",value:function(e,t,n){return this._context.createPeriodicWave(e,t,n)}},{key:"createStereoPanner",value:function(){return this._context.createStereoPanner()}},{key:"createWaveShaper",value:function(){return this._context.createWaveShaper()}},{key:"createMediaStreamSource",value:function(e){return oR(AR(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}},{key:"createMediaElementSource",value:function(e){return oR(AR(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}},{key:"createMediaStreamDestination",value:function(){return oR(AR(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}},{key:"decodeAudioData",value:function(e){return this._context.decodeAudioData(e)}},{key:"currentTime",get:function(){return this._context.currentTime}},{key:"state",get:function(){return this._context.state}},{key:"sampleRate",get:function(){return this._context.sampleRate}},{key:"listener",get:function(){return this.initialize(),this._listener},set:function(e){oR(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}},{key:"transport",get:function(){return this.initialize(),this._transport},set:function(e){oR(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}},{key:"draw",get:function(){return this.initialize(),this._draw},set:function(e){oR(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}},{key:"destination",get:function(){return this.initialize(),this._destination},set:function(e){oR(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}},{key:"createAudioWorkletNode",value:function(e,t){return function(e,t,n){return oR(hR(ZP),"This node only works in a secure context (https or localhost)"),new ZP(e,t,n)}(this.rawContext,e,t)}},{key:"addAudioWorkletModule",value:function(e,t){return CR(this,void 0,void 0,mn.a.mark((function n(){return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return oR(hR(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),n.next=4,this._workletModules.get(t);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"workletsAreReady",value:function(){return CR(this,void 0,void 0,mn.a.mark((function e(){var t;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this._workletModules.forEach((function(e){return t.push(e)})),e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"updateInterval",get:function(){return this._ticker.updateInterval},set:function(e){this._ticker.updateInterval=e}},{key:"clockSource",get:function(){return this._ticker.type},set:function(e){this._ticker.type=e}},{key:"latencyHint",get:function(){return this._latencyHint}},{key:"_setLatencyHint",value:function(e){var t=0;if(this._latencyHint=e,OR(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25}this.lookAhead=t,this.updateInterval=t/2}},{key:"rawContext",get:function(){return this._context}},{key:"now",value:function(){return this._context.currentTime+this.lookAhead}},{key:"immediate",value:function(){return this._context.currentTime}},{key:"resume",value:function(){return AR(this._context)?this._context.resume():Promise.resolve()}},{key:"close",value:function(){return CR(this,void 0,void 0,mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!AR(this._context)){e.next=3;break}return e.next=3,this._context.close();case 3:this._initialized&&ZR(this);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getConstant",value:function(e){if(this._constants.has(e))return this._constants.get(e);for(var t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0),r=0;r<n.length;r++)n[r]=e;var a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=t,a.loop=!0,a.start(0),this._constants.set(e,a),a}},{key:"dispose",value:function(){var e=this;return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((function(t){return e._constants[t].disconnect()})),this}},{key:"_timeoutLoop",value:function(){for(var e=this.now(),t=this._timeouts.peek();this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}},{key:"setTimeout",value:function(e,t){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}},{key:"clearTimeout",value:function(e){var t=this;return this._timeouts.forEach((function(n){n.id===e&&t._timeouts.remove(n)})),this}},{key:"clearInterval",value:function(e){return this.clearTimeout(e)}},{key:"setInterval",value:function(e,t){var n=this,r=++this._timeoutIds;return function a(){var i=n.now();n._timeouts.add({callback:function(){e(),a()},id:r,time:i+t})}(),r}}],[{key:"getDefaults",value:function(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}}]),n}($R),tD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).lookAhead=0,e.latencyHint=0,e.isOffline=!1,e}return Object(C.a)(n,[{key:"createAnalyser",value:function(){return{}}},{key:"createOscillator",value:function(){return{}}},{key:"createBufferSource",value:function(){return{}}},{key:"createBiquadFilter",value:function(){return{}}},{key:"createBuffer",value:function(e,t,n){return{}}},{key:"createChannelMerger",value:function(e){return{}}},{key:"createChannelSplitter",value:function(e){return{}}},{key:"createConstantSource",value:function(){return{}}},{key:"createConvolver",value:function(){return{}}},{key:"createDelay",value:function(e){return{}}},{key:"createDynamicsCompressor",value:function(){return{}}},{key:"createGain",value:function(){return{}}},{key:"createIIRFilter",value:function(e,t){return{}}},{key:"createPanner",value:function(){return{}}},{key:"createPeriodicWave",value:function(e,t,n){return{}}},{key:"createStereoPanner",value:function(){return{}}},{key:"createWaveShaper",value:function(){return{}}},{key:"createMediaStreamSource",value:function(e){return{}}},{key:"createMediaElementSource",value:function(e){return{}}},{key:"createMediaStreamDestination",value:function(){return{}}},{key:"decodeAudioData",value:function(e){return Promise.resolve({})}},{key:"createAudioWorkletNode",value:function(e,t){return{}}},{key:"rawContext",get:function(){return{}}},{key:"addAudioWorkletModule",value:function(e,t){return CR(this,void 0,void 0,mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})))}},{key:"resume",value:function(){return Promise.resolve()}},{key:"setTimeout",value:function(e,t){return 0}},{key:"clearTimeout",value:function(e){return this}},{key:"setInterval",value:function(e,t){return 0}},{key:"clearInterval",value:function(e){return this}},{key:"getConstant",value:function(e){return{}}},{key:"currentTime",get:function(){return 0}},{key:"state",get:function(){return{}}},{key:"sampleRate",get:function(){return 0}},{key:"listener",get:function(){return{}}},{key:"transport",get:function(){return{}}},{key:"draw",get:function(){return{}},set:function(e){}},{key:"destination",get:function(){return{}},set:function(e){}},{key:"now",value:function(){return 0}},{key:"immediate",value:function(){return 0}}]),n}($R);function nD(e,t){yR(t)?t.forEach((function(t){return nD(e,t)})):Object.defineProperty(e,t,{enumerable:!0,writable:!1})}function rD(e,t){yR(t)?t.forEach((function(t){return rD(e,t)})):Object.defineProperty(e,t,{writable:!0})}var aD=function(){},iD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this)).name="ToneAudioBuffer",e.onload=aD;var r=DR(n.getDefaults(),arguments,["url","onload","onerror"]);return e.reverse=r.reverse,e.onload=r.onload,r.url&&MR(r.url)||r.url instanceof n?e.set(r.url):OR(r.url)&&e.load(r.url).catch(r.onerror),e}return Object(C.a)(n,[{key:"sampleRate",get:function(){return this._buffer?this._buffer.sampleRate:uD().sampleRate}},{key:"set",value:function(e){var t=this;return e instanceof n?e.loaded?this._buffer=e.get():e.onload=function(){t.set(e),t.onload(t)}:this._buffer=e,this._reversed&&this._reverse(),this}},{key:"get",value:function(){return this._buffer}},{key:"load",value:function(e){return CR(this,void 0,void 0,mn.a.mark((function t(){var r,a,i=this;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.load(e).then((function(e){i.set(e),i.onload(i)})),n.downloads.push(r),t.prev=2,t.next=5,r;case 5:return t.prev=5,a=n.downloads.indexOf(r),n.downloads.splice(a,1),t.finish(5);case 9:return t.abrupt("return",this);case 10:case"end":return t.stop()}}),t,this,[[2,,5,9]])})))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._buffer=void 0,this}},{key:"fromArray",value:function(e){for(var t=yR(e)&&e[0].length>0,n=t?e.length:1,r=t?e[0].length:e.length,a=uD(),i=a.createBuffer(n,r,a.sampleRate),o=t||1!==n?e:[e],s=0;s<n;s++)i.copyToChannel(o[s],s);return this._buffer=i,this}},{key:"toMono",value:function(e){if(mR(e))this.fromArray(this.toArray(e));else{for(var t=new Float32Array(this.length),n=this.numberOfChannels,r=0;r<n;r++)for(var a=this.toArray(r),i=0;i<a.length;i++)t[i]+=a[i];t=t.map((function(e){return e/n})),this.fromArray(t)}return this}},{key:"toArray",value:function(e){if(mR(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);for(var t=[],n=0;n<this.numberOfChannels;n++)t[n]=this.getChannelData(n);return t}},{key:"getChannelData",value:function(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration,r=Math.floor(e*this.sampleRate),a=Math.floor(t*this.sampleRate);oR(r<a,"The start time must be less than the end time");for(var i=a-r,o=uD().createBuffer(this.numberOfChannels,i,this.sampleRate),s=0;s<this.numberOfChannels;s++)o.copyToChannel(this.getChannelData(s).subarray(r,a),s);return new n(o)}},{key:"_reverse",value:function(){if(this.loaded)for(var e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}},{key:"loaded",get:function(){return this.length>0}},{key:"duration",get:function(){return this._buffer?this._buffer.duration:0}},{key:"length",get:function(){return this._buffer?this._buffer.length:0}},{key:"numberOfChannels",get:function(){return this._buffer?this._buffer.numberOfChannels:0}},{key:"reverse",get:function(){return this._reversed},set:function(e){this._reversed!==e&&(this._reversed=e,this._reverse())}}],[{key:"getDefaults",value:function(){return{onerror:aD,onload:aD,reverse:!1}}},{key:"fromArray",value:function(e){return(new n).fromArray(e)}},{key:"fromUrl",value:function(e){return CR(this,void 0,void 0,mn.a.mark((function t(){var r;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new n,t.next=3,r.load(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))}},{key:"load",value:function(e){return CR(this,void 0,void 0,mn.a.mark((function t(){var r,a,i,o,s,c,u,l,f,d;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.match(/\[([^\]\[]+\|.+)\]$/))){t.next=23;break}a=r[1].split("|"),i=a[0],o=Object(M.a)(a),t.prev=5,o.s();case 7:if((s=o.n()).done){t.next=14;break}if(c=s.value,!n.supportsType(c)){t.next=12;break}return i=c,t.abrupt("break",14);case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),o.e(t.t0);case 19:return t.prev=19,o.f(),t.finish(19);case 22:e=e.replace(r[0],i);case 23:return u=""===n.baseUrl||n.baseUrl.endsWith("/")?n.baseUrl:n.baseUrl+"/",t.next=26,fetch(u+e);case 26:if((l=t.sent).ok){t.next=29;break}throw new Error("could not load url: ".concat(e));case 29:return t.next=31,l.arrayBuffer();case 31:return f=t.sent,t.next=34,uD().decodeAudioData(f);case 34:return d=t.sent,t.abrupt("return",d);case 36:case"end":return t.stop()}}),t,null,[[5,16,19,22]])})))}},{key:"supportsType",value:function(e){var t=e.split("."),n=t[t.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}},{key:"loaded",value:function(){return CR(this,void 0,void 0,mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:if(!n.downloads.length){e.next=7;break}return e.next=5,n.downloads[0];case 5:e.next=2;break;case 7:case"end":return e.stop()}}),e)})))}}]),n}(zR);iD.baseUrl="",iD.downloads=[];var oD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,{clockSource:"offline",context:IR(arguments[0])?arguments[0]:xR(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:IR(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]})).name="OfflineContext",e._currentTime=0,e.isOffline=!0,e._duration=IR(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1],e}return Object(C.a)(n,[{key:"now",value:function(){return this._currentTime}},{key:"currentTime",get:function(){return this._currentTime}},{key:"_renderClock",value:function(e){return CR(this,void 0,void 0,mn.a.mark((function t(){var n,r;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(this._duration-this._currentTime>=0)){t.next=11;break}if(this.emit("tick"),this._currentTime+=128/this.sampleRate,n++,r=Math.floor(this.sampleRate/128),!e||n%r!==0){t.next=9;break}return t.next=9,new Promise((function(e){return setTimeout(e,1)}));case 9:t.next=1;break;case 11:case"end":return t.stop()}}),t,this)})))}},{key:"render",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return CR(this,void 0,void 0,mn.a.mark((function t(){var n;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.workletsAreReady();case 2:return t.next=4,this._renderClock(e);case 4:return t.next=6,this._context.startRendering();case 6:return n=t.sent,t.abrupt("return",new iD(n));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"close",value:function(){return Promise.resolve()}}]),n}(eD),sD=new tD,cD=sD;function uD(){return cD===sD&&SR&&lD(new eD),cD}function lD(e){cD=AR(e)?new eD(e):IR(e)?new oD(e):e}function fD(){return cD.resume()}if(jR&&!jR.TONE_SILENCE_LOGGING){var dD="v";"dev"===gN&&(dD="");var pD=" * Tone.js ".concat(dD).concat(gN," * ");console.log("%c".concat(pD),"background: #000; color: #fff")}function hD(e){return Math.pow(10,e/20)}function vD(e){return Math.log(e)/Math.LN10*20}function mD(e){return Math.pow(2,e/12)}var bD=440;function gD(e){return Math.round(yD(e))}function yD(e){return 69+12*Math.log2(e/bD)}function OD(e){return bD*Math.pow(2,(e-69)/12)}var kD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r,a){var i;return Object(_.a)(this,n),(i=t.call(this)).defaultUnits="s",i._val=r,i._units=a,i.context=e,i._expressions=i._getExpressions(),i}return Object(C.a)(n,[{key:"_getExpressions",value:function(){var e=this;return{hz:{method:function(t){return e._frequencyToUnits(parseFloat(t))},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function(t){return e._ticksToUnits(parseInt(t,10))},regexp:/^(\d+)i$/i},m:{method:function(t){return e._beatsToUnits(parseInt(t,10)*e._getTimeSignature())},regexp:/^(\d+)m$/i},n:{method:function(t,n){var r=parseInt(t,10),a="."===n?1.5:1;return 1===r?e._beatsToUnits(e._getTimeSignature())*a:e._beatsToUnits(4/r)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:function(t){return e._expressions[e.defaultUnits].method.call(e,t)},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function(t){return e._secondsToUnits(parseFloat(t))},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function(t){return parseInt(t,10)/e.context.sampleRate},regexp:/^(\d+)samples$/},t:{method:function(t){var n=parseInt(t,10);return e._beatsToUnits(8/(3*Math.floor(n)))},regexp:/^(\d+)t$/i},tr:{method:function(t,n,r){var a=0;return t&&"0"!==t&&(a+=e._beatsToUnits(e._getTimeSignature()*parseFloat(t))),n&&"0"!==n&&(a+=e._beatsToUnits(parseFloat(n))),r&&"0"!==r&&(a+=e._beatsToUnits(parseFloat(r)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}},{key:"valueOf",value:function(){if(this._val instanceof n&&this.fromType(this._val),pR(this._val))return this._noArg();if(OR(this._val)&&pR(this._units)){for(var e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(bR(this._val)){var t=0;for(var r in this._val)if(hR(this._val[r])){var a=this._val[r];t+=new this.constructor(this.context,r).valueOf()*a}return t}if(hR(this._units)){var i=this._expressions[this._units],o=this._val.toString().trim().match(i.regexp);return o?i.method.apply(this,o.slice(1)):i.method.call(this,this._val)}return OR(this._val)?parseFloat(this._val):this._val}},{key:"_frequencyToUnits",value:function(e){return 1/e}},{key:"_beatsToUnits",value:function(e){return 60/this._getBpm()*e}},{key:"_secondsToUnits",value:function(e){return e}},{key:"_ticksToUnits",value:function(e){return e*this._beatsToUnits(1)/this._getPPQ()}},{key:"_noArg",value:function(){return this._now()}},{key:"_getBpm",value:function(){return this.context.transport.bpm.value}},{key:"_getTimeSignature",value:function(){return this.context.transport.timeSignature}},{key:"_getPPQ",value:function(){return this.context.transport.PPQ}},{key:"fromType",value:function(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi()}return this}},{key:"toFrequency",value:function(){return 1/this.toSeconds()}},{key:"toSamples",value:function(){return this.toSeconds()*this.context.sampleRate}},{key:"toMilliseconds",value:function(){return 1e3*this.toSeconds()}}]),n}(zR),wD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="TimeClass",e}return Object(C.a)(n,[{key:"_getExpressions",value:function(){var e=this;return Object.assign(Object(Nn.a)(Object(R.a)(n.prototype),"_getExpressions",this).call(this),{now:{method:function(t){return e._now()+new e.constructor(e.context,t).valueOf()},regexp:/^\+(.+)/},quantize:{method:function(t){var r=new n(e.context,t).valueOf();return e._secondsToUnits(e.context.transport.nextSubdivision(r))},regexp:/^@(.+)/}})}},{key:"quantize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/n),i=a*n,o=i-r;return r+o*t}},{key:"toNotation",value:function(){for(var e=this,t=this.toSeconds(),r=["1m"],a=1;a<9;a++){var i=Math.pow(2,a);r.push(i+"n."),r.push(i+"n"),r.push(i+"t")}r.push("0");var o=r[0],s=new n(this.context,r[0]).toSeconds();return r.forEach((function(r){var a=new n(e.context,r).toSeconds();Math.abs(a-t)<Math.abs(s-t)&&(o=r,s=a)})),o}},{key:"toBarsBeatsSixteenths",value:function(){var e=this._beatsToUnits(1),t=this.valueOf()/e;t=parseFloat(t.toFixed(4));var n=Math.floor(t/this._getTimeSignature()),r=t%1*4;t=Math.floor(t)%this._getTimeSignature();var a=r.toString();return a.length>3&&(r=parseFloat(parseFloat(a).toFixed(3))),[n,t,r].join(":")}},{key:"toTicks",value:function(){var e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}},{key:"toSeconds",value:function(){return this.valueOf()}},{key:"toMidi",value:function(){return gD(this.toFrequency())}},{key:"_now",value:function(){return this.context.now()}}]),n}(kD);function xD(e,t){return new wD(uD(),e,t)}var jD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="Frequency",e.defaultUnits="hz",e}return Object(C.a)(n,[{key:"_getExpressions",value:function(){return Object.assign({},Object(Nn.a)(Object(R.a)(n.prototype),"_getExpressions",this).call(this),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(e){return"midi"===this.defaultUnits?e:n.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(e,t){var r=SD[e.toLowerCase()]+12*(parseInt(t,10)+1);return"midi"===this.defaultUnits?r:n.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(e,t,n){var r=1;return e&&"0"!==e&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(r*=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}},{key:"transpose",value:function(e){return new n(this.context,this.valueOf()*mD(e))}},{key:"harmonize",value:function(e){var t=this;return e.map((function(e){return t.transpose(e)}))}},{key:"toMidi",value:function(){return gD(this.valueOf())}},{key:"toNote",value:function(){var e=this.toFrequency(),t=Math.log2(e/n.A4),r=Math.round(12*t)+57,a=Math.floor(r/12);return a<0&&(r+=-12*a),_D[r%12]+a.toString()}},{key:"toSeconds",value:function(){return 1/Object(Nn.a)(Object(R.a)(n.prototype),"toSeconds",this).call(this)}},{key:"toTicks",value:function(){var e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}},{key:"_noArg",value:function(){return 0}},{key:"_frequencyToUnits",value:function(e){return e}},{key:"_ticksToUnits",value:function(e){return 1/(60*e/(this._getBpm()*this._getPPQ()))}},{key:"_beatsToUnits",value:function(e){return 1/Object(Nn.a)(Object(R.a)(n.prototype),"_beatsToUnits",this).call(this,e)}},{key:"_secondsToUnits",value:function(e){return 1/e}}],[{key:"A4",get:function(){return bD},set:function(e){!function(e){bD=e}(e)}},{key:"mtof",value:function(e){return OD(e)}},{key:"ftom",value:function(e){return gD(e)}}]),n}(wD),SD={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},_D=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function CD(e,t){return new jD(uD(),e,t)}var ED=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="TransportTime",e}return Object(C.a)(n,[{key:"_now",value:function(){return this.context.transport.seconds}}]),n}(wD);function ND(e,t){return new ED(uD(),e,t)}var TD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),e=t.call(this);var r=DR(n.getDefaults(),arguments,["context"]);return e.defaultContext?e.context=e.defaultContext:e.context=r.context,e}return Object(C.a)(n,[{key:"now",value:function(){return this.context.currentTime+this.context.lookAhead}},{key:"immediate",value:function(){return this.context.currentTime}},{key:"sampleTime",get:function(){return 1/this.context.sampleRate}},{key:"blockTime",get:function(){return 128/this.context.sampleRate}},{key:"toSeconds",value:function(e){return new wD(this.context,e).toSeconds()}},{key:"toFrequency",value:function(e){return new jD(this.context,e).toFrequency()}},{key:"toTicks",value:function(e){return new ED(this.context,e).toTicks()}},{key:"_getPartialProperties",value:function(e){var t=this.get();return Object.keys(t).forEach((function(n){pR(e[n])&&delete t[n]})),t}},{key:"get",value:function(){var e=this,t=this.constructor.getDefaults();return Object.keys(t).forEach((function(r){if(Reflect.has(e,r)){var a=e[r];hR(a)&&hR(a.value)&&hR(a.setValueAtTime)?t[r]=a.value:a instanceof n?t[r]=a._getPartialProperties(t[r]):yR(a)||mR(a)||OR(a)||gR(a)?t[r]=a:delete t[r]}})),t}},{key:"set",value:function(e){var t=this;return Object.keys(e).forEach((function(r){Reflect.has(t,r)&&hR(t[r])&&(t[r]&&hR(t[r].value)&&hR(t[r].setValueAtTime)?t[r].value!==e[r]&&(t[r].value=e[r]):t[r]instanceof n?t[r].set(e[r]):t[r]=e[r])})),this}}],[{key:"getDefaults",value:function(){return{context:uD()}}}]),n}(zR),ID=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stopped";return Object(_.a)(this,n),(e=t.call(this)).name="StateTimeline",e._initial=r,e.setStateAtTime(e._initial,0),e}return Object(C.a)(n,[{key:"getValueAtTime",value:function(e){var t=this.get(e);return null!==t?t.state:this._initial}},{key:"setStateAtTime",value:function(e,t,n){return sR(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}},{key:"getLastState",value:function(e,t){for(var n=this._search(t);n>=0;n--){var r=this._timeline[n];if(r.state===e)return r}}},{key:"getNextState",value:function(e,t){var n=this._search(t);if(-1!==n)for(var r=n;r<this._timeline.length;r++){var a=this._timeline[r];if(a.state===e)return a}}}]),n}(HR),AD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["param","units","convert"]))).name="Param",e.overridden=!1,e._minOutput=1e-7;var r=DR(n.getDefaults(),arguments,["param","units","convert"]);for(oR(hR(r.param)&&(NR(r.param)||r.param instanceof n),"param must be an AudioParam");!NR(r.param);)r.param=r.param._param;return e._swappable=!!hR(r.swappable)&&r.swappable,e._swappable?(e.input=e.context.createGain(),e._param=r.param,e.input.connect(e._param)):e._param=e.input=r.param,e._events=new HR(1e3),e._initialValue=e._param.defaultValue,e.units=r.units,e.convert=r.convert,e._minValue=r.minValue,e._maxValue=r.maxValue,hR(r.value)&&r.value!==e._toType(e._initialValue)&&e.setValueAtTime(r.value,0),e}return Object(C.a)(n,[{key:"value",get:function(){var e=this.now();return this.getValueAtTime(e)},set:function(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}},{key:"minValue",get:function(){return hR(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}},{key:"maxValue",get:function(){return hR(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}},{key:"_is",value:function(e,t){return this.units===t}},{key:"_assertRange",value:function(e){return hR(this.maxValue)&&hR(this.minValue)&&sR(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}},{key:"_fromType",value:function(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?hD(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}},{key:"_toType",value:function(e){return this.convert&&"decibels"===this.units?vD(e):e}},{key:"setValueAtTime",value:function(e,t){var n=this.toSeconds(t),r=this._fromType(e);return oR(isFinite(r)&&isFinite(n),"Invalid argument(s) to setValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}},{key:"getValueAtTime",value:function(e){var t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),r=this._events.get(t),a=this._initialValue;if(null===r)a=this._initialValue;else if("setTargetAtTime"!==r.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)a=r.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){var i=r.value;if("setTargetAtTime"===r.type){var o=this._events.getBefore(r.time);i=null===o?this._initialValue:o.value}a="linearRampToValueAtTime"===n.type?this._linearInterpolate(r.time,i,n.time,n.value,t):this._exponentialInterpolate(r.time,i,n.time,n.value,t)}else a=r.value;else{var s,c=this._events.getBefore(r.time);s=null===c?this._initialValue:c.value,"setTargetAtTime"===r.type&&(a=this._exponentialApproach(r.time,s,r.value,r.constant,t))}return this._toType(a)}},{key:"setRampPoint",value:function(e){e=this.toSeconds(e);var t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),0===this._fromType(t)&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}},{key:"linearRampToValueAtTime",value:function(e,t){var n=this._fromType(e),r=this.toSeconds(t);return oR(isFinite(n)&&isFinite(r),"Invalid argument(s) to linearRampToValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}},{key:"exponentialRampToValueAtTime",value:function(e,t){var n=this._fromType(e);n=WR(n,0)?this._minOutput:n,this._assertRange(n);var r=this.toSeconds(t);return oR(isFinite(n)&&isFinite(r),"Invalid argument(s) to exponentialRampToValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}},{key:"exponentialRampTo",value:function(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}},{key:"linearRampTo",value:function(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}},{key:"targetRampTo",value:function(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}},{key:"exponentialApproachValueAtTime",value:function(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);var r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+.9*n),this.linearRampToValueAtTime(e,t+n),this}},{key:"setTargetAtTime",value:function(e,t,n){var r=this._fromType(e);oR(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");var a=this.toSeconds(t);return this._assertRange(r),oR(isFinite(r)&&isFinite(a),"Invalid argument(s) to setTargetAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._events.add({constant:n,time:a,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,a,n),this._param.setTargetAtTime(r,a,n),this}},{key:"setValueCurveAtTime",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=this.toSeconds(n),t=this.toSeconds(t);var a=this._fromType(e[0])*r;this.setValueAtTime(this._toType(a),t);for(var i=n/(e.length-1),o=1;o<e.length;o++){var s=this._fromType(e[o])*r;this.linearRampToValueAtTime(this._toType(s),t+o*i)}return this}},{key:"cancelScheduledValues",value:function(e){var t=this.toSeconds(e);return oR(isFinite(t),"Invalid argument to cancelScheduledValues: ".concat(JSON.stringify(e))),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}},{key:"cancelAndHoldAtTime",value:function(e){var t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));oR(isFinite(t),"Invalid argument to cancelAndHoldAtTime: ".concat(JSON.stringify(e))),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);var r=this._events.get(t),a=this._events.getAfter(t);return r&&WR(r.time,t)?a?(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):a&&(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time),"linearRampToValueAtTime"===a.type?this.linearRampToValueAtTime(this._toType(n),t):"exponentialRampToValueAtTime"===a.type&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}},{key:"rampTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2?arguments[2]:void 0;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}},{key:"apply",value:function(e){var t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);var n=this._events.get(t);if(n&&"setTargetAtTime"===n.type)for(var r=this._events.getAfter(n.time),a=r?r.time:t+2,i=(a-t)/10,o=t;o<a;o+=i)e.linearRampToValueAtTime(this.getValueAtTime(o),o);return this._events.forEachAfter(this.context.currentTime,(function(t){"cancelScheduledValues"===t.type?e.cancelScheduledValues(t.time):"setTargetAtTime"===t.type?e.setTargetAtTime(t.value,t.time,t.constant):e[t.type](t.value,t.time)})),this}},{key:"setParam",value:function(e){oR(this._swappable,"The Param must be assigned as 'swappable' in the constructor");var t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._events.dispose(),this}},{key:"defaultValue",get:function(){return this._toType(this._param.defaultValue)}},{key:"_exponentialApproach",value:function(e,t,n,r,a){return n+(t-n)*Math.exp(-(a-e)/r)}},{key:"_linearInterpolate",value:function(e,t,n,r,a){return t+(a-e)/(n-e)*(r-t)}},{key:"_exponentialInterpolate",value:function(e,t,n,r,a){return t*Math.pow(r/t,(a-e)/(n-e))}}],[{key:"getDefaults",value:function(){return Object.assign(TD.getDefaults(),{convert:!0,units:"number"})}}]),n}(TD),MD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="ToneAudioNode",e._internalChannels=[],e}return Object(C.a)(n,[{key:"numberOfInputs",get:function(){return hR(this.input)?NR(this.input)||this.input instanceof AD?1:this.input.numberOfInputs:0}},{key:"numberOfOutputs",get:function(){return hR(this.output)?this.output.numberOfOutputs:0}},{key:"_isAudioNode",value:function(e){return hR(e)&&(e instanceof n||TR(e))}},{key:"_getInternalNodes",value:function(){var e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}},{key:"_setChannelProperties",value:function(e){this._getInternalNodes().forEach((function(t){t.channelCount=e.channelCount,t.channelCountMode=e.channelCountMode,t.channelInterpretation=e.channelInterpretation}))}},{key:"_getChannelProperties",value:function(){var e=this._getInternalNodes();oR(e.length>0,"ToneAudioNode does not have any internal nodes");var t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}},{key:"channelCount",get:function(){return this._getChannelProperties().channelCount},set:function(e){var t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}},{key:"channelCountMode",get:function(){return this._getChannelProperties().channelCountMode},set:function(e){var t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}},{key:"channelInterpretation",get:function(){return this._getChannelProperties().channelInterpretation},set:function(e){var t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}},{key:"connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return RD(this,e,t,n),this}},{key:"toDestination",value:function(){return this.connect(this.context.destination),this}},{key:"toMaster",value:function(){return dR("toMaster() has been renamed toDestination()"),this.toDestination()}},{key:"disconnect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return DD(this,e,t,n),this}},{key:"chain",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return PD.apply(void 0,[this].concat(t)),this}},{key:"fan",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.connect(t)})),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),hR(this.input)&&(this.input instanceof n?this.input.dispose():TR(this.input)&&this.input.disconnect()),hR(this.output)&&(this.output instanceof n?this.output.dispose():TR(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}]),n}(TD);function PD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift();t.reduce((function(e,t){return e instanceof MD?e.connect(t):TR(e)&&RD(e,t),t}),r)}function RD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(oR(hR(e),"Cannot connect from undefined node"),oR(hR(t),"Cannot connect to undefined node"),(t instanceof MD||TR(t))&&oR(t.numberOfInputs>0,"Cannot connect to node with no inputs"),oR(e.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof MD||t instanceof AD;)hR(t.input)&&(t=t.input);for(;e instanceof MD;)hR(e.output)&&(e=e.output);NR(t)?e.connect(t,n):e.connect(t,n,r)}function DD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(hR(t))for(;t instanceof MD;)t=t.input;for(;!TR(e);)hR(e.output)&&(e=e.output);NR(t)?e.disconnect(t,n):TR(t)?e.disconnect(t,n,r):e.disconnect()}var FD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["gain","units"]))).name="Gain",e._gainNode=e.context.createGain(),e.input=e._gainNode,e.output=e._gainNode;var r=DR(n.getDefaults(),arguments,["gain","units"]);return e.gain=new AD({context:e.context,convert:r.convert,param:e._gainNode.gain,units:r.units,value:r.gain,minValue:r.minValue,maxValue:r.maxValue}),nD(Object(P.a)(e),"gain"),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._gainNode.disconnect(),this.gain.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{convert:!0,gain:1,units:"gain"})}}]),n}(MD),LD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).onended=aD,r._startTime=-1,r._stopTime=-1,r._timeout=-1,r.output=new FD({context:r.context,gain:0}),r._gainNode=r.output,r.getStateAtTime=function(e){var t=this.toSeconds(e);return-1!==this._startTime&&t>=this._startTime&&(-1===this._stopTime||t<=this._stopTime)?"started":"stopped"},r._fadeIn=e.fadeIn,r._fadeOut=e.fadeOut,r._curve=e.curve,r.onended=e.onended,r}return Object(C.a)(n,[{key:"_startGain",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;oR(-1===this._startTime,"Source cannot be started more than once");var n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}},{key:"stop",value:function(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}},{key:"_stopGain",value:function(e){var t=this;oR(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((function(){var e="exponential"===t._curve?2*n:0;t._stopSource(t.now()+e),t._onended()}),this._stopTime-this.context.currentTime),this}},{key:"_onended",value:function(){var e=this;if(this.onended!==aD&&(this.onended(this),this.onended=aD,!this.context.isOffline)){var t=function(){return e.dispose()};"undefined"!==typeof window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}},{key:"state",get:function(){return this.getStateAtTime(this.now())}},{key:"cancelStop",value:function(){return this.log("cancelStop"),oR(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._gainNode.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:aD})}}]),n}(MD),zD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["offset"]))).name="ToneConstantSource",e._source=e.context.createConstantSource();var r=DR(n.getDefaults(),arguments,["offset"]);return RD(e._source,e._gainNode),e.offset=new AD({context:e.context,convert:r.convert,param:e._source.offset,units:r.units,value:r.offset,minValue:r.minValue,maxValue:r.maxValue}),e}return Object(C.a)(n,[{key:"start",value:function(e){var t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}},{key:"_stopSource",value:function(e){this._source.stop(e)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(LD.getDefaults(),{convert:!0,offset:1,units:"number"})}}]),n}(LD),qD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["value","units"]))).name="Signal",e.override=!0;var r=DR(n.getDefaults(),arguments,["value","units"]);return e.output=e._constantSource=new zD({context:e.context,convert:r.convert,offset:r.value,units:r.units,minValue:r.minValue,maxValue:r.maxValue}),e._constantSource.start(0),e.input=e._param=e._constantSource.offset,e}return Object(C.a)(n,[{key:"connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return VD(this,e,t,n),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._param.dispose(),this._constantSource.dispose(),this}},{key:"setValueAtTime",value:function(e,t){return this._param.setValueAtTime(e,t),this}},{key:"getValueAtTime",value:function(e){return this._param.getValueAtTime(e)}},{key:"setRampPoint",value:function(e){return this._param.setRampPoint(e),this}},{key:"linearRampToValueAtTime",value:function(e,t){return this._param.linearRampToValueAtTime(e,t),this}},{key:"exponentialRampToValueAtTime",value:function(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}},{key:"exponentialRampTo",value:function(e,t,n){return this._param.exponentialRampTo(e,t,n),this}},{key:"linearRampTo",value:function(e,t,n){return this._param.linearRampTo(e,t,n),this}},{key:"targetRampTo",value:function(e,t,n){return this._param.targetRampTo(e,t,n),this}},{key:"exponentialApproachValueAtTime",value:function(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}},{key:"setTargetAtTime",value:function(e,t,n){return this._param.setTargetAtTime(e,t,n),this}},{key:"setValueCurveAtTime",value:function(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this}},{key:"cancelScheduledValues",value:function(e){return this._param.cancelScheduledValues(e),this}},{key:"cancelAndHoldAtTime",value:function(e){return this._param.cancelAndHoldAtTime(e),this}},{key:"rampTo",value:function(e,t,n){return this._param.rampTo(e,t,n),this}},{key:"value",get:function(){return this._param.value},set:function(e){this._param.value=e}},{key:"convert",get:function(){return this._param.convert},set:function(e){this._param.convert=e}},{key:"units",get:function(){return this._param.units}},{key:"overridden",get:function(){return this._param.overridden},set:function(e){this._param.overridden=e}},{key:"maxValue",get:function(){return this._param.maxValue}},{key:"minValue",get:function(){return this._param.minValue}},{key:"apply",value:function(e){return this._param.apply(e),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{convert:!0,units:"number",value:0})}}]),n}(MD);function VD(e,t,n,r){(t instanceof AD||NR(t)||t instanceof qD&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof qD&&(t.overridden=!0)),RD(e,t,n,r)}var BD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["value"]))).name="TickParam",e._events=new HR(1/0),e._multiplier=1;var r=DR(n.getDefaults(),arguments,["value"]);return e._multiplier=r.multiplier,e._events.cancel(0),e._events.add({ticks:0,time:0,type:"setValueAtTime",value:e._fromType(r.value)}),e.setValueAtTime(r.value,0),e}return Object(C.a)(n,[{key:"setTargetAtTime",value:function(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);for(var r=this._fromType(e),a=this._events.get(t),i=Math.round(Math.max(1/n,1)),o=0;o<=i;o++){var s=n*o+t,c=this._exponentialApproach(a.time,a.value,r,n,s);this.linearRampToValueAtTime(this._toType(c),s)}return this}},{key:"setValueAtTime",value:function(e,t){var r=this.toSeconds(t);Object(Nn.a)(Object(R.a)(n.prototype),"setValueAtTime",this).call(this,e,t);var a=this._events.get(r),i=this._events.previousEvent(a),o=this._getTicksUntilEvent(i,r);return a.ticks=Math.max(o,0),this}},{key:"linearRampToValueAtTime",value:function(e,t){var r=this.toSeconds(t);Object(Nn.a)(Object(R.a)(n.prototype),"linearRampToValueAtTime",this).call(this,e,t);var a=this._events.get(r),i=this._events.previousEvent(a),o=this._getTicksUntilEvent(i,r);return a.ticks=Math.max(o,0),this}},{key:"exponentialRampToValueAtTime",value:function(e,t){t=this.toSeconds(t);for(var n=this._fromType(e),r=this._events.get(t),a=Math.round(Math.max(10*(t-r.time),1)),i=(t-r.time)/a,o=0;o<=a;o++){var s=i*o+r.time,c=this._exponentialInterpolate(r.time,r.value,t,n,s);this.linearRampToValueAtTime(this._toType(c),s)}return this}},{key:"_getTicksUntilEvent",value:function(e,t){if(null===e)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(pR(e.ticks)){var n=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(n,e.time)}var r=this._fromType(this.getValueAtTime(e.time)),a=this._fromType(this.getValueAtTime(t)),i=this._events.get(t);return i&&i.time===t&&"setValueAtTime"===i.type&&(a=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(r+a)+e.ticks}},{key:"getTicksAtTime",value:function(e){var t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}},{key:"getDurationOfTicks",value:function(e,t){var n=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-n}},{key:"getTimeOfTick",value:function(e){var t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&"linearRampToValueAtTime"===n.type&&t.value!==n.value){var r=this._fromType(this.getValueAtTime(t.time)),a=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-t.time),i=Math.sqrt(Math.pow(r,2)-2*a*(t.ticks-e)),o=(-r+i)/a;return(o>0?o:(-r-i)/a)+t.time}return t?0===t.value?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}},{key:"ticksToTime",value:function(e,t){return this.getDurationOfTicks(e,t)}},{key:"timeToTicks",value:function(e,t){var n=this.toSeconds(t),r=this.toSeconds(e),a=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-a}},{key:"_fromType",value:function(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):Object(Nn.a)(Object(R.a)(n.prototype),"_fromType",this).call(this,e)}},{key:"_toType",value:function(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:Object(Nn.a)(Object(R.a)(n.prototype),"_toType",this).call(this,e)}},{key:"multiplier",get:function(){return this._multiplier},set:function(e){var t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}],[{key:"getDefaults",value:function(){return Object.assign(AD.getDefaults(),{multiplier:1,units:"hertz",value:1})}}]),n}(AD),UD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["value"]))).name="TickSignal";var r=DR(n.getDefaults(),arguments,["value"]);return e.input=e._param=new BD({context:e.context,convert:r.convert,multiplier:r.multiplier,param:e._constantSource.offset,units:r.units,value:r.value}),e}return Object(C.a)(n,[{key:"ticksToTime",value:function(e,t){return this._param.ticksToTime(e,t)}},{key:"timeToTicks",value:function(e,t){return this._param.timeToTicks(e,t)}},{key:"getTimeOfTick",value:function(e){return this._param.getTimeOfTick(e)}},{key:"getDurationOfTicks",value:function(e,t){return this._param.getDurationOfTicks(e,t)}},{key:"getTicksAtTime",value:function(e){return this._param.getTicksAtTime(e)}},{key:"multiplier",get:function(){return this._param.multiplier},set:function(e){this._param.multiplier=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._param.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(qD.getDefaults(),{multiplier:1,units:"hertz",value:1})}}]),n}(qD),WD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency"]))).name="TickSource",e._state=new ID,e._tickOffset=new HR;var r=DR(n.getDefaults(),arguments,["frequency"]);return e.frequency=new UD({context:e.context,units:r.units,value:r.frequency}),nD(Object(P.a)(e),"frequency"),e._state.setStateAtTime("stopped",0),e.setTicksAtTime(0,0),e}return Object(C.a)(n,[{key:"state",get:function(){return this.getStateAtTime(this.now())}},{key:"start",value:function(e,t){var n=this.toSeconds(e);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),hR(t)&&this.setTicksAtTime(t,n)),this}},{key:"stop",value:function(e){var t=this.toSeconds(e);if("stopped"===this._state.getValueAtTime(t)){var n=this._state.get(t);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}},{key:"pause",value:function(e){var t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&this._state.setStateAtTime("paused",t),this}},{key:"cancel",value:function(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}},{key:"getTicksAtTime",value:function(e){var t=this,n=this.toSeconds(e),r=this._state.getLastState("stopped",n),a={state:"paused",time:n};this._state.add(a);var i=r,o=0;return this._state.forEachBetween(r.time,n+this.sampleTime,(function(e){var n=i.time,r=t._tickOffset.get(e.time);r&&r.time>=i.time&&(o=r.ticks,n=r.time),"started"===i.state&&"started"!==e.state&&(o+=t.frequency.getTicksAtTime(e.time)-t.frequency.getTicksAtTime(n)),i=e})),this._state.remove(a),o}},{key:"ticks",get:function(){return this.getTicksAtTime(this.now())},set:function(e){this.setTicksAtTime(e,this.now())}},{key:"seconds",get:function(){return this.getSecondsAtTime(this.now())},set:function(e){var t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}},{key:"getSecondsAtTime",value:function(e){var t=this;e=this.toSeconds(e);var n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);var a=n,i=0;return this._state.forEachBetween(n.time,e+this.sampleTime,(function(e){var n=a.time,r=t._tickOffset.get(e.time);r&&r.time>=a.time&&(i=r.seconds,n=r.time),"started"===a.state&&"started"!==e.state&&(i+=e.time-n),a=e})),this._state.remove(r),i}},{key:"setTicksAtTime",value:function(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}},{key:"getStateAtTime",value:function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}},{key:"getTimeOfTick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now(),n=this._tickOffset.get(t),r=this._state.get(t),a=Math.max(n.time,r.time),i=this.frequency.getTicksAtTime(a)+e-n.ticks;return this.frequency.getTimeOfTick(i)}},{key:"forEachTickBetween",value:function(e,t,n){var r=this,a=this._state.get(e);this._state.forEachBetween(e,t,(function(t){a&&"started"===a.state&&"started"!==t.state&&r.forEachTickBetween(Math.max(a.time,e),t.time-r.sampleTime,n),a=t}));var i=null;if(a&&"started"===a.state){var o=Math.max(a.time,e),s=this.frequency.getTicksAtTime(o),c=s-this.frequency.getTicksAtTime(a.time),u=Math.ceil(c)-c;u=WR(u,1)?0:u;for(var l=this.frequency.getTimeOfTick(s+u);l<t;){try{n(l,Math.round(this.getTicksAtTime(l)))}catch(f){i=f;break}l+=this.frequency.getDurationOfTicks(1,l)}}if(i)throw i;return this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign({frequency:1,units:"hertz"},TD.getDefaults())}}]),n}(TD),GD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["callback","frequency"]))).name="Clock",e.callback=aD,e._lastUpdate=0,e._state=new ID("stopped"),e._boundLoop=e._loop.bind(Object(P.a)(e));var r=DR(n.getDefaults(),arguments,["callback","frequency"]);return e.callback=r.callback,e._tickSource=new WD({context:e.context,frequency:r.frequency,units:r.units}),e._lastUpdate=0,e.frequency=e._tickSource.frequency,nD(Object(P.a)(e),"frequency"),e._state.setStateAtTime("stopped",0),e.context.on("tick",e._boundLoop),e}return Object(C.a)(n,[{key:"state",get:function(){return this._state.getValueAtTime(this.now())}},{key:"start",value:function(e,t){cR(this.context);var n=this.toSeconds(e);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}},{key:"stop",value:function(e){var t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}},{key:"pause",value:function(e){var t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}},{key:"ticks",get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(e){this._tickSource.ticks=e}},{key:"seconds",get:function(){return this._tickSource.seconds},set:function(e){this._tickSource.seconds=e}},{key:"getSecondsAtTime",value:function(e){return this._tickSource.getSecondsAtTime(e)}},{key:"setTicksAtTime",value:function(e,t){return this._tickSource.setTicksAtTime(e,t),this}},{key:"getTimeOfTick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();return this._tickSource.getTimeOfTick(e,t)}},{key:"getTicksAtTime",value:function(e){return this._tickSource.getTicksAtTime(e)}},{key:"nextTickTime",value:function(e,t){var n=this.toSeconds(t),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}},{key:"_loop",value:function(){var e=this,t=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",t,n),t!==n&&(this._state.forEachBetween(t,n,(function(t){switch(t.state){case"started":var n=e._tickSource.getTicksAtTime(t.time);e.emit("start",t.time,n);break;case"stopped":0!==t.time&&e.emit("stop",t.time);break;case"paused":e.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,n,(function(t,n){e.callback(t,n)})))}},{key:"getStateAtTime",value:function(e){var t=this.toSeconds(e);return this._state.getValueAtTime(t)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(TD.getDefaults(),{callback:aD,frequency:1,units:"hertz"})}}]),n}(TD);JR.mixin(GD);var HD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["delayTime","maxDelay"]))).name="Delay";var r=DR(n.getDefaults(),arguments,["delayTime","maxDelay"]),a=e.toSeconds(r.maxDelay);return e._maxDelay=Math.max(a,e.toSeconds(r.delayTime)),e._delayNode=e.input=e.output=e.context.createDelay(a),e.delayTime=new AD({context:e.context,param:e._delayNode.delayTime,units:"time",value:r.delayTime,minValue:0,maxValue:e.maxDelay}),nD(Object(P.a)(e),"delayTime"),e}return Object(C.a)(n,[{key:"maxDelay",get:function(){return this._maxDelay}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._delayNode.disconnect(),this.delayTime.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{delayTime:0,maxDelay:1})}}]),n}(MD);function KD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uD().sampleRate;return CR(this,void 0,void 0,mn.a.mark((function a(){var i,o,s,c;return mn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=uD(),lD(o=new oD(n,t,r)),a.next=5,e(o);case 5:return s=o.render(),lD(i),a.next=9,s;case 9:return c=a.sent,a.abrupt("return",new iD(c));case 11:case"end":return a.stop()}}),a)})))}var XD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this)).name="ToneAudioBuffers",e._buffers=new Map,e._loadingCount=0;var r=DR(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");return e.baseUrl=r.baseUrl,Object.keys(r.urls).forEach((function(t){e._loadingCount++;var n=r.urls[t];e.add(t,n,e._bufferLoaded.bind(Object(P.a)(e),r.onload),r.onerror)})),e}return Object(C.a)(n,[{key:"has",value:function(e){return this._buffers.has(e.toString())}},{key:"get",value:function(e){return oR(this.has(e),"ToneAudioBuffers has no buffer named: ".concat(e)),this._buffers.get(e.toString())}},{key:"_bufferLoaded",value:function(e){this._loadingCount--,0===this._loadingCount&&e&&e()}},{key:"loaded",get:function(){return Array.from(this._buffers).every((function(e){var t=Object(A.a)(e,2);t[0];return t[1].loaded}))}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aD,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:aD;return OR(t)?this._buffers.set(e.toString(),new iD(this.baseUrl+t,n,r)):this._buffers.set(e.toString(),new iD(t,n,r)),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._buffers.forEach((function(e){return e.dispose()})),this._buffers.clear(),this}}],[{key:"getDefaults",value:function(){return{baseUrl:"",onerror:aD,onload:aD,urls:{}}}}]),n}(zR),QD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="MidiClass",e.defaultUnits="midi",e}return Object(C.a)(n,[{key:"_frequencyToUnits",value:function(e){return gD(Object(Nn.a)(Object(R.a)(n.prototype),"_frequencyToUnits",this).call(this,e))}},{key:"_ticksToUnits",value:function(e){return gD(Object(Nn.a)(Object(R.a)(n.prototype),"_ticksToUnits",this).call(this,e))}},{key:"_beatsToUnits",value:function(e){return gD(Object(Nn.a)(Object(R.a)(n.prototype),"_beatsToUnits",this).call(this,e))}},{key:"_secondsToUnits",value:function(e){return gD(Object(Nn.a)(Object(R.a)(n.prototype),"_secondsToUnits",this).call(this,e))}},{key:"toMidi",value:function(){return this.valueOf()}},{key:"toFrequency",value:function(){return OD(this.toMidi())}},{key:"transpose",value:function(e){return new n(this.context,this.toMidi()+e)}}]),n}(jD);function YD(e,t){return new QD(uD(),e,t)}var ZD=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="Ticks",e.defaultUnits="i",e}return Object(C.a)(n,[{key:"_now",value:function(){return this.context.transport.ticks}},{key:"_beatsToUnits",value:function(e){return this._getPPQ()*e}},{key:"_secondsToUnits",value:function(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}},{key:"_ticksToUnits",value:function(e){return e}},{key:"toTicks",value:function(){return this.valueOf()}},{key:"toSeconds",value:function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}]),n}(ED);function JD(e,t){return new ZD(uD(),e,t)}var $D=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="Draw",e.expiration=.25,e.anticipation=.008,e._events=new HR,e._boundDrawLoop=e._drawLoop.bind(Object(P.a)(e)),e._animationFrame=-1,e}return Object(C.a)(n,[{key:"schedule",value:function(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}},{key:"cancel",value:function(e){return this._events.cancel(this.toSeconds(e)),this}},{key:"_drawLoop",value:function(){for(var e=this.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=e;){var t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}]),n}(TD);XR((function(e){e.draw=new $D({context:e})})),YR((function(e){e.draw.dispose()}));var eF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="IntervalTimeline",e._root=null,e._length=0,e}return Object(C.a)(n,[{key:"add",value:function(e){oR(hR(e.time),"Events must have a time property"),oR(hR(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();var t=new tF(e.time,e.time+e.duration,e);for(null===this._root?this._root=t:this._root.insert(t),this._length++;null!==t;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}},{key:"remove",value:function(e){if(null!==this._root){var t=[];this._root.search(e.time,t);for(var n=0,r=t;n<r.length;n++){var a=r[n];if(a.event===e){this._removeNode(a),this._length--;break}}}return this}},{key:"length",get:function(){return this._length}},{key:"cancel",value:function(e){var t=this;return this.forEachFrom(e,(function(e){return t.remove(e)})),this}},{key:"_setRoot",value:function(e){this._root=e,null!==this._root&&(this._root.parent=null)}},{key:"_replaceNodeInParent",value:function(e,t){null!==e.parent?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}},{key:"_removeNode",value:function(e){if(null===e.left&&null===e.right)this._replaceNodeInParent(e,null);else if(null===e.right)this._replaceNodeInParent(e,e.left);else if(null===e.left)this._replaceNodeInParent(e,e.right);else{var t,n=null;if(e.getBalance()>0)if(null===e.left.right)(t=e.left).right=e.right,n=t;else{for(t=e.left.right;null!==t.right;)t=t.right;t.parent&&(t.parent.right=t.left,n=t.parent,t.left=e.left,t.right=e.right)}else if(null===e.right.left)(t=e.right).left=e.left,n=t;else{for(t=e.right.left;null!==t.left;)t=t.left;t.parent&&(t.parent.left=t.right,n=t.parent,t.left=e.left,t.right=e.right)}null!==e.parent?e.isLeftChild()?e.parent.left=t:e.parent.right=t:this._setRoot(t),n&&this._rebalance(n)}e.dispose()}},{key:"_rotateLeft",value:function(e){var t=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),null!==t?n?t.left=r:t.right=r:this._setRoot(r)}},{key:"_rotateRight",value:function(e){var t=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),null!==t?n?t.left=r:t.right=r:this._setRoot(r)}},{key:"_rebalance",value:function(e){var t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}},{key:"get",value:function(e){if(null!==this._root){var t=[];if(this._root.search(e,t),t.length>0){for(var n=t[0],r=1;r<t.length;r++)t[r].low>n.low&&(n=t[r]);return n.event}}return null}},{key:"forEach",value:function(e){if(null!==this._root){var t=[];this._root.traverse((function(e){return t.push(e)})),t.forEach((function(t){t.event&&e(t.event)}))}return this}},{key:"forEachAtTime",value:function(e,t){if(null!==this._root){var n=[];this._root.search(e,n),n.forEach((function(e){e.event&&t(e.event)}))}return this}},{key:"forEachFrom",value:function(e,t){if(null!==this._root){var n=[];this._root.searchAfter(e,n),n.forEach((function(e){e.event&&t(e.event)}))}return this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),null!==this._root&&this._root.traverse((function(e){return e.dispose()})),this._root=null,this}}]),n}(zR),tF=function(){function e(t,n,r){Object(_.a)(this,e),this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=t,this.high=n,this.max=this.high}return Object(C.a)(e,[{key:"insert",value:function(e){e.low<=this.low?null===this.left?this.left=e:this.left.insert(e):null===this.right?this.right=e:this.right.insert(e)}},{key:"search",value:function(e,t){e>this.max||(null!==this.left&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),this.low>e||null!==this.right&&this.right.search(e,t))}},{key:"searchAfter",value:function(e,t){this.low>=e&&(t.push(this),null!==this.left&&this.left.searchAfter(e,t)),null!==this.right&&this.right.searchAfter(e,t)}},{key:"traverse",value:function(e){e(this),null!==this.left&&this.left.traverse(e),null!==this.right&&this.right.traverse(e)}},{key:"updateHeight",value:function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}},{key:"updateMax",value:function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}},{key:"getBalance",value:function(){var e=0;return null!==this.left&&null!==this.right?e=this.left.height-this.right.height:null!==this.left?e=this.left.height+1:null!==this.right&&(e=-(this.right.height+1)),e}},{key:"isLeftChild",value:function(){return null!==this.parent&&this.parent.left===this}},{key:"left",get:function(){return this._left},set:function(e){this._left=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}},{key:"right",get:function(){return this._right},set:function(e){this._right=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}},{key:"dispose",value:function(){this.parent=null,this._left=null,this._right=null,this.event=null}}]),e}(),nF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["volume"]))).name="Volume";var r=DR(n.getDefaults(),arguments,["volume"]);return e.input=e.output=new FD({context:e.context,gain:r.volume,units:"decibels"}),e.volume=e.output.gain,nD(Object(P.a)(e),"volume"),e._unmutedVolume=r.volume,e.mute=r.mute,e}return Object(C.a)(n,[{key:"mute",get:function(){return this.volume.value===-1/0},set:function(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{mute:!1,volume:0})}}]),n}(MD),rF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="Destination",e.input=new nF({context:e.context}),e.output=new FD({context:e.context}),e.volume=e.input.volume;var r=DR(n.getDefaults(),arguments);return PD(e.input,e.output,e.context.rawContext.destination),e.mute=r.mute,e._internalChannels=[e.input,e.context.rawContext.destination,e.output],e}return Object(C.a)(n,[{key:"mute",get:function(){return this.input.mute},set:function(e){this.input.mute=e}},{key:"chain",value:function(){this.input.disconnect();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift(this.input),t.push(this.output),PD.apply(void 0,t),this}},{key:"maxChannelCount",get:function(){return this.context.rawContext.destination.maxChannelCount}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{mute:!1,volume:0})}}]),n}(MD);XR((function(e){e.destination=new rF({context:e})})),YR((function(e){e.destination.dispose()}));var aF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this)).name="TimelineValue",r._timeline=new HR({memory:10}),r._initialValue=e,r}return Object(C.a)(n,[{key:"set",value:function(e,t){return this._timeline.add({value:e,time:t}),this}},{key:"get",value:function(e){var t=this._timeline.get(e);return t?t.value:this._initialValue}}]),n}(zR),iF=function(){function e(t,n){Object(_.a)(this,e),this.id=e._eventId++;var r=Object.assign(e.getDefaults(),n);this.transport=t,this.callback=r.callback,this._once=r.once,this.time=r.time}return Object(C.a)(e,[{key:"invoke",value:function(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}},{key:"dispose",value:function(){return this.callback=void 0,this}}],[{key:"getDefaults",value:function(){return{callback:aD,once:!1,time:0}}}]),e}();iF._eventId=0;var oF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;Object(_.a)(this,n),(a=t.call(this,e,r))._currentId=-1,a._nextId=-1,a._nextTick=a.time,a._boundRestart=a._restart.bind(Object(P.a)(a));var i=Object.assign(n.getDefaults(),r);return a.duration=new ZD(e.context,i.duration).valueOf(),a._interval=new ZD(e.context,i.interval).valueOf(),a._nextTick=i.time,a.transport.on("start",a._boundRestart),a.transport.on("loopStart",a._boundRestart),a.context=a.transport.context,a._restart(),a}return Object(C.a)(n,[{key:"invoke",value:function(e){this._createEvents(e),Object(Nn.a)(Object(R.a)(n.prototype),"invoke",this).call(this,e)}},{key:"_createEvents",value:function(e){var t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ZD(this.context,this._nextTick).toSeconds()))}},{key:"_restart",value:function(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;var t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new ZD(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ZD(this.context,this._nextTick).toSeconds())}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}],[{key:"getDefaults",value:function(){return Object.assign({},iF.getDefaults(),{duration:1/0,interval:1,once:!1})}}]),n}(iF),sF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="Transport",e._loop=new aF(!1),e._loopStart=0,e._loopEnd=0,e._scheduledEvents={},e._timeline=new HR,e._repeatedEvents=new eF,e._syncedSignals=[],e._swingAmount=0;var r=DR(n.getDefaults(),arguments);return e._ppq=r.ppq,e._clock=new GD({callback:e._processTick.bind(Object(P.a)(e)),context:e.context,frequency:0,units:"bpm"}),e._bindClockEvents(),e.bpm=e._clock.frequency,e._clock.frequency.multiplier=r.ppq,e.bpm.setValueAtTime(r.bpm,0),nD(Object(P.a)(e),"bpm"),e._timeSignature=r.timeSignature,e._swingTicks=r.ppq/2,e}return Object(C.a)(n,[{key:"_processTick",value:function(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(2*this._swingTicks)!==0){var n=t%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new ZD(this.context,2*this._swingTicks/3).toSeconds()*r}this._timeline.forEachAtTime(t,(function(t){return t.invoke(e)}))}},{key:"schedule",value:function(e,t){var n=new iF(this,{callback:e,time:new ED(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}},{key:"scheduleRepeat",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=new oF(this,{callback:e,duration:new wD(this.context,r).toTicks(),interval:new wD(this.context,t).toTicks(),time:new ED(this.context,n).toTicks()});return this._addEvent(a,this._repeatedEvents)}},{key:"scheduleOnce",value:function(e,t){var n=new iF(this,{callback:e,once:!0,time:new ED(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}},{key:"clear",value:function(e){if(this._scheduledEvents.hasOwnProperty(e)){var t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}},{key:"_addEvent",value:function(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}},{key:"cancel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.toTicks(t);return this._timeline.forEachFrom(n,(function(t){return e.clear(t.id)})),this._repeatedEvents.forEachFrom(n,(function(t){return e.clear(t.id)})),this}},{key:"_bindClockEvents",value:function(){var e=this;this._clock.on("start",(function(t,n){n=new ZD(e.context,n).toSeconds(),e.emit("start",t,n)})),this._clock.on("stop",(function(t){e.emit("stop",t)})),this._clock.on("pause",(function(t){e.emit("pause",t)}))}},{key:"state",get:function(){return this._clock.getStateAtTime(this.now())}},{key:"start",value:function(e,t){var n;return hR(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}},{key:"stop",value:function(e){return this._clock.stop(e),this}},{key:"pause",value:function(e){return this._clock.pause(e),this}},{key:"toggle",value:function(e){return e=this.toSeconds(e),"started"!==this._clock.getStateAtTime(e)?this.start(e):this.stop(e),this}},{key:"timeSignature",get:function(){return this._timeSignature},set:function(e){yR(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}},{key:"loopStart",get:function(){return new wD(this.context,this._loopStart,"i").toSeconds()},set:function(e){this._loopStart=this.toTicks(e)}},{key:"loopEnd",get:function(){return new wD(this.context,this._loopEnd,"i").toSeconds()},set:function(e){this._loopEnd=this.toTicks(e)}},{key:"loop",get:function(){return this._loop.get(this.now())},set:function(e){this._loop.set(e,this.now())}},{key:"setLoopPoints",value:function(e,t){return this.loopStart=e,this.loopEnd=t,this}},{key:"swing",get:function(){return this._swingAmount},set:function(e){this._swingAmount=e}},{key:"swingSubdivision",get:function(){return new ZD(this.context,this._swingTicks).toNotation()},set:function(e){this._swingTicks=this.toTicks(e)}},{key:"position",get:function(){var e=this.now(),t=this._clock.getTicksAtTime(e);return new ZD(this.context,t).toBarsBeatsSixteenths()},set:function(e){var t=this.toTicks(e);this.ticks=t}},{key:"seconds",get:function(){return this._clock.seconds},set:function(e){var t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}},{key:"progress",get:function(){if(this.loop){var e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}},{key:"ticks",get:function(){return this._clock.ticks},set:function(e){if(this._clock.ticks!==e){var t=this.now();if("started"===this.state){var n=this._clock.getTicksAtTime(t),r=t+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t);this.emit("stop",r),this._clock.setTicksAtTime(e,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this._clock.setTicksAtTime(e,t)}}},{key:"getTicksAtTime",value:function(e){return Math.round(this._clock.getTicksAtTime(e))}},{key:"getSecondsAtTime",value:function(e){return this._clock.getSecondsAtTime(e)}},{key:"PPQ",get:function(){return this._clock.frequency.multiplier},set:function(e){this._clock.frequency.multiplier=e}},{key:"nextSubdivision",value:function(e){if(e=this.toTicks(e),"started"!==this.state)return 0;var t=this.now(),n=e-this.getTicksAtTime(t)%e;return this._clock.nextTickTime(n,t)}},{key:"syncSignal",value:function(e,t){if(!t){var n=this.now();if(0!==e.getValueAtTime(n)){var r=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);t=e.getValueAtTime(n)/r}else t=0}var a=new FD(t);return this.bpm.connect(a),a.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:a,signal:e}),e.value=0,this}},{key:"unsyncSignal",value:function(e){for(var t=this._syncedSignals.length-1;t>=0;t--){var n=this._syncedSignals[t];n.signal===e&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._clock.dispose(),rD(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(TD.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}}]),n}(TD);JR.mixin(sF),XR((function(e){e.transport=new sF({context:e})})),YR((function(e){e.transport.dispose()}));var cF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).input=void 0,r._state=new ID("stopped"),r._synced=!1,r._scheduled=[],r._syncedStart=aD,r._syncedStop=aD,r._state.memory=100,r._state.increasing=!0,r._volume=r.output=new nF({context:r.context,mute:e.mute,volume:e.volume}),r.volume=r._volume.volume,nD(Object(P.a)(r),"volume"),r.onstop=e.onstop,r}return Object(C.a)(n,[{key:"state",get:function(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}},{key:"mute",get:function(){return this._volume.mute},set:function(e){this._volume.mute=e}},{key:"_clampToCurrentTime",value:function(e){return this._synced?e:Math.max(e,this.context.currentTime)}},{key:"start",value:function(e,t,n){var r=this,a=pR(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),this._synced||"started"!==this._state.getValueAtTime(a))if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){var i=this._state.get(a);i&&(i.offset=this.toSeconds(FR(t,0)),i.duration=n?this.toSeconds(n):void 0);var o=this.context.transport.schedule((function(e){r._start(e,t,n)}),a);this._scheduled.push(o),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else cR(this.context),this._start(a,t,n);else oR(VR(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,t,n);return this}},{key:"stop",value:function(e){var t=pR(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),"started"===this._state.getValueAtTime(t)||hR(this._state.getNextState("started",t))){if(this.log("stop",t),this._synced){var n=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(n)}else this._stop(t);this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}},{key:"restart",value:function(e,t,n){return e=this.toSeconds(e),"started"===this._state.getValueAtTime(e)&&(this._state.cancel(e),this._restart(e,t,n)),this}},{key:"sync",value:function(){var e=this;return this._synced||(this._synced=!0,this._syncedStart=function(t,n){if(n>0){var r=e._state.get(n);if(r&&"started"===r.state&&r.time!==n){var a,i=n-e.toSeconds(r.time);r.duration&&(a=e.toSeconds(r.duration)-i),e._start(t,e.toSeconds(r.offset)+i,a)}}},this._syncedStop=function(t){var n=e.context.transport.getSecondsAtTime(Math.max(t-e.sampleTime,0));"started"===e._state.getValueAtTime(n)&&e._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}},{key:"unsync",value:function(){var e=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((function(t){return e.context.transport.clear(t)})),this._scheduled=[],this._state.cancel(0),this._stop(0),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.onstop=aD,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{mute:!1,onstop:aD,volume:0})}}]),n}(MD),uF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["url","onload"]))).name="ToneBufferSource",e._source=e.context.createBufferSource(),e._internalChannels=[e._source],e._sourceStarted=!1,e._sourceStopped=!1;var r=DR(n.getDefaults(),arguments,["url","onload"]);return RD(e._source,e._gainNode),e._source.onended=function(){return e._stopSource()},e.playbackRate=new AD({context:e.context,param:e._source.playbackRate,units:"positive",value:r.playbackRate}),e.loop=r.loop,e.loopStart=r.loopStart,e.loopEnd=r.loopEnd,e._buffer=new iD(r.url,r.onload,r.onerror),e._internalChannels.push(e._source),e}return Object(C.a)(n,[{key:"fadeIn",get:function(){return this._fadeIn},set:function(e){this._fadeIn=e}},{key:"fadeOut",get:function(){return this._fadeOut},set:function(e){this._fadeOut=e}},{key:"curve",get:function(){return this._curve},set:function(e){this._curve=e}},{key:"start",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;oR(this.buffer.loaded,"buffer is either not set or not loaded");var a=this.toSeconds(e);this._startGain(a,r),t=this.loop?FR(t,this.loopStart):FR(t,0);var i=Math.max(this.toSeconds(t),0);if(this.loop){var o=this.toSeconds(this.loopEnd)||this.buffer.duration,s=this.toSeconds(this.loopStart),c=o-s;BR(i,o)&&(i=(i-s)%c+s),WR(i,this.buffer.duration)&&(i=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,UR(i,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,i)),hR(n)){var u=this.toSeconds(n);u=Math.max(u,0),this.stop(a+u)}return this}},{key:"_stopSource",value:function(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}},{key:"loopStart",get:function(){return this._source.loopStart},set:function(e){this._source.loopStart=this.toSeconds(e)}},{key:"loopEnd",get:function(){return this._source.loopEnd},set:function(e){this._source.loopEnd=this.toSeconds(e)}},{key:"buffer",get:function(){return this._buffer},set:function(e){this._buffer.set(e)}},{key:"loop",get:function(){return this._source.loop},set:function(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(LD.getDefaults(),{url:new iD,loop:!1,loopEnd:0,loopStart:0,onload:aD,onerror:aD,playbackRate:1})}}]),n}(LD),lF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["type"]))).name="Noise",e._source=null;var r=DR(n.getDefaults(),arguments,["type"]);return e._playbackRate=r.playbackRate,e.type=r.type,e._fadeIn=r.fadeIn,e._fadeOut=r.fadeOut,e}return Object(C.a)(n,[{key:"type",get:function(){return this._type},set:function(e){if(oR(e in pF,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,"started"===this.state)){var t=this.now();this._stop(t),this._start(t)}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}},{key:"_start",value:function(e){var t=this,n=pF[this._type];this._source=new uF({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:function(){return t.onstop(t)},playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}},{key:"_stop",value:function(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}},{key:"fadeIn",get:function(){return this._fadeIn},set:function(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}},{key:"fadeOut",get:function(){return this._fadeOut},set:function(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}},{key:"_restart",value:function(e){this._stop(e),this._start(e)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._source&&this._source.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cF.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}}]),n}(cF),fF=220500,dF={brown:null,pink:null,white:null},pF={get brown(){if(!dF.brown){for(var e=[],t=0;t<2;t++){var n=new Float32Array(fF);e[t]=n;for(var r=0,a=0;a<fF;a++){var i=2*Math.random()-1;n[a]=(r+.02*i)/1.02,r=n[a],n[a]*=3.5}}dF.brown=(new iD).fromArray(e)}return dF.brown},get pink(){if(!dF.pink){for(var e=[],t=0;t<2;t++){var n=new Float32Array(fF);e[t]=n;var r=void 0,a=void 0,i=void 0,o=void 0,s=void 0,c=void 0,u=void 0;r=a=i=o=s=c=u=0;for(var l=0;l<fF;l++){var f=2*Math.random()-1;r=.99886*r+.0555179*f,a=.99332*a+.0750759*f,i=.969*i+.153852*f,o=.8665*o+.3104856*f,s=.55*s+.5329522*f,c=-.7616*c-.016898*f,n[l]=r+a+i+o+s+c+u+.5362*f,n[l]*=.11,u=.115926*f}}dF.pink=(new iD).fromArray(e)}return dF.pink},get white(){if(!dF.white){for(var e=[],t=0;t<2;t++){var n=new Float32Array(fF);e[t]=n;for(var r=0;r<fF;r++)n[r]=2*Math.random()-1}dF.white=(new iD).fromArray(e)}return dF.white}},hF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["volume"]))).name="UserMedia";var r=DR(n.getDefaults(),arguments,["volume"]);return e._volume=e.output=new nF({context:e.context,volume:r.volume}),e.volume=e._volume.volume,nD(Object(P.a)(e),"volume"),e.mute=r.mute,e}return Object(C.a)(n,[{key:"open",value:function(e){return CR(this,void 0,void 0,mn.a.mark((function t(){var r,a,i,o;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return oR(n.supported,"UserMedia is not supported"),"started"===this.state&&this.close(),t.next=4,n.enumerateDevices();case 4:return r=t.sent,mR(e)?this._device=r[e]:(this._device=r.find((function(t){return t.label===e||t.deviceId===e})),!this._device&&r.length>0&&(this._device=r[0]),oR(hR(this._device),"No matching device ".concat(e))),a={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}},this._device&&(a.audio.deviceId=this._device.deviceId),t.next=10,navigator.mediaDevices.getUserMedia(a);case 10:return i=t.sent,this._stream||(this._stream=i,RD(o=this.context.createMediaStreamSource(i),this.output),this._mediaStream=o),t.abrupt("return",this);case 13:case"end":return t.stop()}}),t,this)})))}},{key:"close",value:function(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach((function(e){e.stop()})),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}},{key:"state",get:function(){return this._stream&&this._stream.active?"started":"stopped"}},{key:"deviceId",get:function(){return this._device?this._device.deviceId:void 0}},{key:"groupId",get:function(){return this._device?this._device.groupId:void 0}},{key:"label",get:function(){return this._device?this._device.label:void 0}},{key:"mute",get:function(){return this._volume.mute},set:function(e){this._volume.mute=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.close(),this._volume.dispose(),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{mute:!1,volume:0})}},{key:"enumerateDevices",value:function(){return CR(this,void 0,void 0,mn.a.mark((function e(){var t;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return"audioinput"===e.kind})));case 4:case"end":return e.stop()}}),e)})))}},{key:"supported",get:function(){return hR(navigator.mediaDevices)&&hR(navigator.mediaDevices.getUserMedia)}}]),n}(MD);function vF(e,t){return CR(this,void 0,void 0,mn.a.mark((function n(){var r,a,i;return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t/e.context.sampleRate,a=new oD(1,r,e.context.sampleRate),new e.constructor(Object.assign(e.get(),{frequency:2/r,detune:0,context:a})).toDestination().start(0),n.next=6,a.render();case 6:return i=n.sent,n.abrupt("return",i.getChannelData(0));case 8:case"end":return n.stop()}}),n)})))}var mF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","type"]))).name="ToneOscillatorNode",e._oscillator=e.context.createOscillator(),e._internalChannels=[e._oscillator];var r=DR(n.getDefaults(),arguments,["frequency","type"]);return RD(e._oscillator,e._gainNode),e.type=r.type,e.frequency=new AD({context:e.context,param:e._oscillator.frequency,units:"frequency",value:r.frequency}),e.detune=new AD({context:e.context,param:e._oscillator.detune,units:"cents",value:r.detune}),nD(Object(P.a)(e),["frequency","detune"]),e}return Object(C.a)(n,[{key:"start",value:function(e){var t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}},{key:"_stopSource",value:function(e){this._oscillator.stop(e)}},{key:"setPeriodicWave",value:function(e){return this._oscillator.setPeriodicWave(e),this}},{key:"type",get:function(){return this._oscillator.type},set:function(e){this._oscillator.type=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(LD.getDefaults(),{detune:0,frequency:440,type:"sine"})}}]),n}(LD),bF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","type"]))).name="Oscillator",e._oscillator=null;var r=DR(n.getDefaults(),arguments,["frequency","type"]);return e.frequency=new qD({context:e.context,units:"frequency",value:r.frequency}),nD(Object(P.a)(e),"frequency"),e.detune=new qD({context:e.context,units:"cents",value:r.detune}),nD(Object(P.a)(e),"detune"),e._partials=r.partials,e._partialCount=r.partialCount,e._type=r.type,r.partialCount&&"custom"!==r.type&&(e._type=e.baseType+r.partialCount.toString()),e.phase=r.phase,e}return Object(C.a)(n,[{key:"_start",value:function(e){var t=this,n=this.toSeconds(e),r=new mF({context:this.context,onended:function(){return t.onstop(t)}});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}},{key:"_stop",value:function(e){var t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}},{key:"_restart",value:function(e){var t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}},{key:"syncFrequency",value:function(){return this.context.transport.syncSignal(this.frequency),this}},{key:"unsyncFrequency",value:function(){return this.context.transport.unsyncSignal(this.frequency),this}},{key:"_getCachedPeriodicWave",value:function(){var e=this;if("custom"===this._type)return n._periodicWaveCache.find((function(t){return t.phase===e._phase&&(n=t.partials,r=e._partials,n.length===r.length&&n.every((function(e,t){return r[t]===e})));var n,r}));var t=n._periodicWaveCache.find((function(t){return t.type===e._type&&t.phase===e._phase}));return this._partialCount=t?t.partialCount:this._partialCount,t}},{key:"type",get:function(){return this._type},set:function(e){this._type=e;var t=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&t)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{var r=this._getCachedPeriodicWave();if(hR(r)){var a=r.partials,i=r.wave;this._wave=i,this._partials=a,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{var o=this._getRealImaginary(e,this._phase),s=Object(A.a)(o,2),c=s[0],u=s[1],l=this.context.createPeriodicWave(c,u);this._wave=l,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),n._periodicWaveCache.push({imag:u,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:c,type:this._type,wave:this._wave}),n._periodicWaveCache.length>100&&n._periodicWaveCache.shift()}}}},{key:"baseType",get:function(){return this._type.replace(this.partialCount.toString(),"")},set:function(e){this.partialCount&&"custom"!==this._type&&"custom"!==e?this.type=e+this.partialCount:this.type=e}},{key:"partialCount",get:function(){return this._partialCount},set:function(e){sR(e,0);var t=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),"custom"!==this._type)this.type=0===e?t:t+e.toString();else{var r=new Float32Array(e);this._partials.forEach((function(e,t){return r[t]=e})),this._partials=Array.from(r),this.type=this._type}}},{key:"_getRealImaginary",value:function(e,t){var n=2048,r=new Float32Array(n),a=new Float32Array(n),i=1;if("custom"===e){if(i=this._partials.length+1,this._partialCount=this._partials.length,n=i,0===this._partials.length)return[r,a]}else{var o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);o?(i=parseInt(o[2],10)+1,this._partialCount=parseInt(o[2],10),e=o[1],n=i=Math.max(i,2)):this._partialCount=0,this._partials=[]}for(var s=1;s<n;++s){var c=2/(s*Math.PI),u=void 0;switch(e){case"sine":u=s<=i?1:0,this._partials[s-1]=u;break;case"square":u=1&s?2*c:0,this._partials[s-1]=u;break;case"sawtooth":u=c*(1&s?1:-1),this._partials[s-1]=u;break;case"triangle":u=1&s?c*c*2*(s-1>>1&1?-1:1):0,this._partials[s-1]=u;break;case"custom":u=this._partials[s-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==u?(r[s]=-u*Math.sin(t*s),a[s]=u*Math.cos(t*s)):(r[s]=0,a[s]=0)}return[r,a]}},{key:"_inverseFFT",value:function(e,t,n){for(var r=0,a=e.length,i=0;i<a;i++)r+=e[i]*Math.cos(i*n)+t[i]*Math.sin(i*n);return r}},{key:"getInitialValue",value:function(){for(var e=this._getRealImaginary(this._type,0),t=Object(A.a)(e,2),n=t[0],r=t[1],a=0,i=2*Math.PI,o=0;o<32;o++)a=Math.max(this._inverseFFT(n,r,o/32*i),a);return GR(-this._inverseFFT(n,r,this._phase)/a,-1,1)}},{key:"partials",get:function(){return this._partials.slice(0,this.partialCount)},set:function(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}},{key:"phase",get:function(){return this._phase*(180/Math.PI)},set:function(e){this._phase=e*Math.PI/180,this.type=this._type}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return CR(this,void 0,void 0,mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",vF(this,e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cF.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}}]),n}(cF);bF._periodicWaveCache=[];var gF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.call(this,Object.assign(DR(n.getDefaults(),arguments,["context"])))}return Object(C.a)(n,[{key:"connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return VD(this,e,t,n),this}}]),n}(MD),yF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["mapping","length"])))).name="WaveShaper",e._shaper=e.context.createWaveShaper(),e.input=e._shaper,e.output=e._shaper;var r=DR(n.getDefaults(),arguments,["mapping","length"]);return yR(r.mapping)||r.mapping instanceof Float32Array?e.curve=Float32Array.from(r.mapping):vR(r.mapping)&&e.setMap(r.mapping,r.length),e}return Object(C.a)(n,[{key:"setMap",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=new Float32Array(t),r=0,a=t;r<a;r++){var i=r/(a-1)*2-1;n[r]=e(i,r)}return this.curve=n,this}},{key:"curve",get:function(){return this._shaper.curve},set:function(e){this._shaper.curve=e}},{key:"oversample",get:function(){return this._shaper.oversample},set:function(e){oR(["none","2x","4x"].some((function(t){return t.includes(e)})),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._shaper.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(qD.getDefaults(),{length:1024})}}]),n}(gF),OF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="AudioToGain",e._norm=new yF({context:e.context,mapping:function(e){return(e+1)/2}}),e.input=e._norm,e.output=e._norm,e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._norm.dispose(),this}}]),n}(gF),kF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["value"])))).name="Multiply",e.override=!1;var r=DR(n.getDefaults(),arguments,["value"]);return e._mult=e.input=e.output=new FD({context:e.context,minValue:r.minValue,maxValue:r.maxValue}),e.factor=e._param=e._mult.gain,e.factor.setValueAtTime(r.value,0),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._mult.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(qD.getDefaults(),{value:0})}}]),n}(qD),wF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","type","modulationType"]))).name="AMOscillator",e._modulationScale=new OF({context:e.context}),e._modulationNode=new FD({context:e.context});var r=DR(n.getDefaults(),arguments,["frequency","type","modulationType"]);return e._carrier=new bF({context:e.context,detune:r.detune,frequency:r.frequency,onstop:function(){return e.onstop(Object(P.a)(e))},phase:r.phase,type:r.type}),e.frequency=e._carrier.frequency,e.detune=e._carrier.detune,e._modulator=new bF({context:e.context,phase:r.phase,type:r.modulationType}),e.harmonicity=new kF({context:e.context,units:"positive",value:r.harmonicity}),e.frequency.chain(e.harmonicity,e._modulator.frequency),e._modulator.chain(e._modulationScale,e._modulationNode.gain),e._carrier.chain(e._modulationNode,e.output),nD(Object(P.a)(e),["frequency","detune","harmonicity"]),e}return Object(C.a)(n,[{key:"_start",value:function(e){this._modulator.start(e),this._carrier.start(e)}},{key:"_stop",value:function(e){this._modulator.stop(e),this._carrier.stop(e)}},{key:"_restart",value:function(e){this._modulator.restart(e),this._carrier.restart(e)}},{key:"type",get:function(){return this._carrier.type},set:function(e){this._carrier.type=e}},{key:"baseType",get:function(){return this._carrier.baseType},set:function(e){this._carrier.baseType=e}},{key:"partialCount",get:function(){return this._carrier.partialCount},set:function(e){this._carrier.partialCount=e}},{key:"modulationType",get:function(){return this._modulator.type},set:function(e){this._modulator.type=e}},{key:"phase",get:function(){return this._carrier.phase},set:function(e){this._carrier.phase=e,this._modulator.phase=e}},{key:"partials",get:function(){return this._carrier.partials},set:function(e){this._carrier.partials=e}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return CR(this,void 0,void 0,mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",vF(this,e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(bF.getDefaults(),{harmonicity:1,modulationType:"square"})}}]),n}(cF),xF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","type","modulationType"]))).name="FMOscillator",e._modulationNode=new FD({context:e.context,gain:0});var r=DR(n.getDefaults(),arguments,["frequency","type","modulationType"]);return e._carrier=new bF({context:e.context,detune:r.detune,frequency:0,onstop:function(){return e.onstop(Object(P.a)(e))},phase:r.phase,type:r.type}),e.detune=e._carrier.detune,e.frequency=new qD({context:e.context,units:"frequency",value:r.frequency}),e._modulator=new bF({context:e.context,phase:r.phase,type:r.modulationType}),e.harmonicity=new kF({context:e.context,units:"positive",value:r.harmonicity}),e.modulationIndex=new kF({context:e.context,units:"positive",value:r.modulationIndex}),e.frequency.connect(e._carrier.frequency),e.frequency.chain(e.harmonicity,e._modulator.frequency),e.frequency.chain(e.modulationIndex,e._modulationNode),e._modulator.connect(e._modulationNode.gain),e._modulationNode.connect(e._carrier.frequency),e._carrier.connect(e.output),e.detune.connect(e._modulator.detune),nD(Object(P.a)(e),["modulationIndex","frequency","detune","harmonicity"]),e}return Object(C.a)(n,[{key:"_start",value:function(e){this._modulator.start(e),this._carrier.start(e)}},{key:"_stop",value:function(e){this._modulator.stop(e),this._carrier.stop(e)}},{key:"_restart",value:function(e){return this._modulator.restart(e),this._carrier.restart(e),this}},{key:"type",get:function(){return this._carrier.type},set:function(e){this._carrier.type=e}},{key:"baseType",get:function(){return this._carrier.baseType},set:function(e){this._carrier.baseType=e}},{key:"partialCount",get:function(){return this._carrier.partialCount},set:function(e){this._carrier.partialCount=e}},{key:"modulationType",get:function(){return this._modulator.type},set:function(e){this._modulator.type=e}},{key:"phase",get:function(){return this._carrier.phase},set:function(e){this._carrier.phase=e,this._modulator.phase=e}},{key:"partials",get:function(){return this._carrier.partials},set:function(e){this._carrier.partials=e}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return CR(this,void 0,void 0,mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",vF(this,e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(bF.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}}]),n}(cF),jF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","width"]))).name="PulseOscillator",e._widthGate=new FD({context:e.context,gain:0}),e._thresh=new yF({context:e.context,mapping:function(e){return e<=0?-1:1}});var r=DR(n.getDefaults(),arguments,["frequency","width"]);return e.width=new qD({context:e.context,units:"audioRange",value:r.width}),e._triangle=new bF({context:e.context,detune:r.detune,frequency:r.frequency,onstop:function(){return e.onstop(Object(P.a)(e))},phase:r.phase,type:"triangle"}),e.frequency=e._triangle.frequency,e.detune=e._triangle.detune,e._triangle.chain(e._thresh,e.output),e.width.chain(e._widthGate,e._thresh),nD(Object(P.a)(e),["width","frequency","detune"]),e}return Object(C.a)(n,[{key:"_start",value:function(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}},{key:"_stop",value:function(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}},{key:"_restart",value:function(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}},{key:"phase",get:function(){return this._triangle.phase},set:function(e){this._triangle.phase=e}},{key:"type",get:function(){return"pulse"}},{key:"baseType",get:function(){return"pulse"}},{key:"partials",get:function(){return[]}},{key:"partialCount",get:function(){return 0}},{key:"carrierType",set:function(e){this._triangle.type=e}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return CR(this,void 0,void 0,mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",vF(this,e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cF.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}}]),n}(cF),SF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","type","spread"]))).name="FatOscillator",e._oscillators=[];var r=DR(n.getDefaults(),arguments,["frequency","type","spread"]);return e.frequency=new qD({context:e.context,units:"frequency",value:r.frequency}),e.detune=new qD({context:e.context,units:"cents",value:r.detune}),e._spread=r.spread,e._type=r.type,e._phase=r.phase,e._partials=r.partials,e._partialCount=r.partialCount,e.count=r.count,nD(Object(P.a)(e),["frequency","detune"]),e}return Object(C.a)(n,[{key:"_start",value:function(e){e=this.toSeconds(e),this._forEach((function(t){return t.start(e)}))}},{key:"_stop",value:function(e){e=this.toSeconds(e),this._forEach((function(t){return t.stop(e)}))}},{key:"_restart",value:function(e){this._forEach((function(t){return t.restart(e)}))}},{key:"_forEach",value:function(e){for(var t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}},{key:"type",get:function(){return this._type},set:function(e){this._type=e,this._forEach((function(t){return t.type=e}))}},{key:"spread",get:function(){return this._spread},set:function(e){if(this._spread=e,this._oscillators.length>1){var t=-e/2,n=e/(this._oscillators.length-1);this._forEach((function(e,r){return e.detune.value=t+n*r}))}}},{key:"count",get:function(){return this._oscillators.length},set:function(e){var t=this;if(sR(e,1),this._oscillators.length!==e){this._forEach((function(e){return e.dispose()})),this._oscillators=[];for(var n=0;n<e;n++){var r=new bF({context:this.context,volume:-6-1.1*e,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:0===n?function(){return t.onstop(t)}:aD});"custom"===this.type&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,"started"===this.state&&this._forEach((function(e){return e.start()}))}}},{key:"phase",get:function(){return this._phase},set:function(e){var t=this;this._phase=e,this._forEach((function(e,n){return e.phase=t._phase+n/t.count*360}))}},{key:"baseType",get:function(){return this._oscillators[0].baseType},set:function(e){this._forEach((function(t){return t.baseType=e})),this._type=this._oscillators[0].type}},{key:"partials",get:function(){return this._oscillators[0].partials},set:function(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach((function(t){return t.partials=e})))}},{key:"partialCount",get:function(){return this._oscillators[0].partialCount},set:function(e){this._partialCount=e,this._forEach((function(t){return t.partialCount=e})),this._type=this._oscillators[0].type}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return CR(this,void 0,void 0,mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",vF(this,e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this.detune.dispose(),this._forEach((function(e){return e.dispose()})),this}}],[{key:"getDefaults",value:function(){return Object.assign(bF.getDefaults(),{count:3,spread:20,type:"sawtooth"})}}]),n}(cF),_F=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","modulationFrequency"]))).name="PWMOscillator",e.sourceType="pwm",e._scale=new kF({context:e.context,value:2});var r=DR(n.getDefaults(),arguments,["frequency","modulationFrequency"]);return e._pulse=new jF({context:e.context,frequency:r.modulationFrequency}),e._pulse.carrierType="sine",e.modulationFrequency=e._pulse.frequency,e._modulator=new bF({context:e.context,detune:r.detune,frequency:r.frequency,onstop:function(){return e.onstop(Object(P.a)(e))},phase:r.phase}),e.frequency=e._modulator.frequency,e.detune=e._modulator.detune,e._modulator.chain(e._scale,e._pulse.width),e._pulse.connect(e.output),nD(Object(P.a)(e),["modulationFrequency","frequency","detune"]),e}return Object(C.a)(n,[{key:"_start",value:function(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}},{key:"_stop",value:function(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}},{key:"_restart",value:function(e){this._modulator.restart(e),this._pulse.restart(e)}},{key:"type",get:function(){return"pwm"}},{key:"baseType",get:function(){return"pwm"}},{key:"partials",get:function(){return[]}},{key:"partialCount",get:function(){return 0}},{key:"phase",get:function(){return this._modulator.phase},set:function(e){this._modulator.phase=e}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return CR(this,void 0,void 0,mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",vF(this,e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cF.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}}]),n}(cF),CF={am:wF,fat:SF,fm:xF,oscillator:bF,pulse:jF,pwm:_F},EF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","type"]))).name="OmniOscillator";var r=DR(n.getDefaults(),arguments,["frequency","type"]);return e.frequency=new qD({context:e.context,units:"frequency",value:r.frequency}),e.detune=new qD({context:e.context,units:"cents",value:r.detune}),nD(Object(P.a)(e),["frequency","detune"]),e.set(r),e}return Object(C.a)(n,[{key:"_start",value:function(e){this._oscillator.start(e)}},{key:"_stop",value:function(e){this._oscillator.stop(e)}},{key:"_restart",value:function(e){return this._oscillator.restart(e),this}},{key:"type",get:function(){var e=this,t="";return["am","fm","fat"].some((function(t){return e._sourceType===t}))&&(t=this._sourceType),t+this._oscillator.type},set:function(e){"fm"===e.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"am"===e.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"fat"===e.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):"pwm"===e?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===e?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}},{key:"partials",get:function(){return this._oscillator.partials},set:function(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=e)}},{key:"partialCount",get:function(){return this._oscillator.partialCount},set:function(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=e)}},{key:"set",value:function(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),Object(Nn.a)(Object(R.a)(n.prototype),"set",this).call(this,e),this}},{key:"_createNewOscillator",value:function(e){var t=this;if(e!==this._sourceType){this._sourceType=e;var n=CF[e],r=this.now();if(this._oscillator){var a=this._oscillator;a.stop(r),this.context.setTimeout((function(){return a.dispose()}),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=function(){return t.onstop(t)},"started"===this.state&&this._oscillator.start(r)}}},{key:"phase",get:function(){return this._oscillator.phase},set:function(e){this._oscillator.phase=e}},{key:"sourceType",get:function(){return this._sourceType},set:function(e){var t="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(t=this._oscillator.type),"fm"===e?this.type="fm"+t:"am"===e?this.type="am"+t:"fat"===e?this.type="fat"+t:"oscillator"===e?this.type=t:"pulse"===e?this.type="pulse":"pwm"===e&&(this.type="pwm")}},{key:"_getOscType",value:function(e,t){return e instanceof CF[t]}},{key:"baseType",get:function(){return this._oscillator.baseType},set:function(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===e||"pwm"===e||(this._oscillator.baseType=e)}},{key:"width",get:function(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}},{key:"count",get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0},set:function(e){this._getOscType(this._oscillator,"fat")&&mR(e)&&(this._oscillator.count=e)}},{key:"spread",get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0},set:function(e){this._getOscType(this._oscillator,"fat")&&mR(e)&&(this._oscillator.spread=e)}},{key:"modulationType",get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0},set:function(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&OR(e)&&(this._oscillator.modulationType=e)}},{key:"modulationIndex",get:function(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}},{key:"harmonicity",get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}},{key:"modulationFrequency",get:function(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return CR(this,void 0,void 0,mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",vF(this,e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(bF.getDefaults(),xF.getDefaults(),wF.getDefaults(),SF.getDefaults(),jF.getDefaults(),_F.getDefaults())}}]),n}(cF),NF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["value"])))).override=!1,e.name="Add",e._sum=new FD({context:e.context}),e.input=e._sum,e.output=e._sum,e.addend=e._param,PD(e._constantSource,e._sum),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._sum.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(qD.getDefaults(),{value:0})}}]),n}(qD),TF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["min","max"])))).name="Scale";var r=DR(n.getDefaults(),arguments,["min","max"]);return e._mult=e.input=new kF({context:e.context,value:r.max-r.min}),e._add=e.output=new NF({context:e.context,value:r.min}),e._min=r.min,e._max=r.max,e.input.connect(e.output),e}return Object(C.a)(n,[{key:"min",get:function(){return this._min},set:function(e){this._min=e,this._setRange()}},{key:"max",get:function(){return this._max},set:function(e){this._max=e,this._setRange()}},{key:"_setRange",value:function(){this._add.value=this._min,this._mult.value=this._max-this._min}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._add.dispose(),this._mult.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(gF.getDefaults(),{max:1,min:0})}}]),n}(gF),IF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments)))).name="Zero",e._gain=new FD({context:e.context}),e.output=e._gain,e.input=void 0,RD(e.context.getConstant(0),e._gain),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),DD(this.context.getConstant(0),this._gain),this}}]),n}(gF),AF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","min","max"]))).name="LFO",e._stoppedValue=0,e._units="number",e.convert=!0,e._fromType=AD.prototype._fromType,e._toType=AD.prototype._toType,e._is=AD.prototype._is,e._clampValue=AD.prototype._clampValue;var r=DR(n.getDefaults(),arguments,["frequency","min","max"]);return e._oscillator=new bF(r),e.frequency=e._oscillator.frequency,e._amplitudeGain=new FD({context:e.context,gain:r.amplitude,units:"normalRange"}),e.amplitude=e._amplitudeGain.gain,e._stoppedSignal=new qD({context:e.context,units:"audioRange",value:0}),e._zeros=new IF({context:e.context}),e._a2g=new OF({context:e.context}),e._scaler=e.output=new TF({context:e.context,max:r.max,min:r.min}),e.units=r.units,e.min=r.min,e.max=r.max,e._oscillator.chain(e._amplitudeGain,e._a2g,e._scaler),e._zeros.connect(e._a2g),e._stoppedSignal.connect(e._a2g),nD(Object(P.a)(e),["amplitude","frequency"]),e.phase=r.phase,e}return Object(C.a)(n,[{key:"start",value:function(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}},{key:"stop",value:function(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}},{key:"sync",value:function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}},{key:"unsync",value:function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}},{key:"_setStoppedValue",value:function(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}},{key:"min",get:function(){return this._toType(this._scaler.min)},set:function(e){e=this._fromType(e),this._scaler.min=e}},{key:"max",get:function(){return this._toType(this._scaler.max)},set:function(e){e=this._fromType(e),this._scaler.max=e}},{key:"type",get:function(){return this._oscillator.type},set:function(e){this._oscillator.type=e,this._setStoppedValue()}},{key:"partials",get:function(){return this._oscillator.partials},set:function(e){this._oscillator.partials=e,this._setStoppedValue()}},{key:"phase",get:function(){return this._oscillator.phase},set:function(e){this._oscillator.phase=e,this._setStoppedValue()}},{key:"units",get:function(){return this._units},set:function(e){var t=this.min,n=this.max;this._units=e,this.min=t,this.max=n}},{key:"state",get:function(){return this._oscillator.state}},{key:"connect",value:function(e,t,n){return(e instanceof AD||e instanceof qD)&&(this.convert=e.convert,this.units=e.units),VD(this,e,t,n),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(bF.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}}]),n}(MD);function MF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=new WeakMap;return function(r,a){Reflect.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){sR(r,e,t),n.set(this,r)}})}}function PF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=new WeakMap;return function(r,a){Reflect.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){sR(this.toSeconds(r),e,t),n.set(this,r)}})}}var RF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["url","onload"]))).name="Player",e._activeSources=new Set;var r=DR(n.getDefaults(),arguments,["url","onload"]);return e._buffer=new iD({onload:e._onload.bind(Object(P.a)(e),r.onload),onerror:r.onerror,reverse:r.reverse,url:r.url}),e.autostart=r.autostart,e._loop=r.loop,e._loopStart=r.loopStart,e._loopEnd=r.loopEnd,e._playbackRate=r.playbackRate,e.fadeIn=r.fadeIn,e.fadeOut=r.fadeOut,e}return Object(C.a)(n,[{key:"load",value:function(e){return CR(this,void 0,void 0,mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._buffer.load(e);case 2:return this._onload(),t.abrupt("return",this);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"_onload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aD;e(),this.autostart&&this.start()}},{key:"_onSourceEnd",value:function(e){this.onstop(this),this._activeSources.delete(e),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}},{key:"start",value:function(e,t,r){return Object(Nn.a)(Object(R.a)(n.prototype),"start",this).call(this,e,t,r),this}},{key:"_start",value:function(e,t,n){t=this._loop?FR(t,this._loopStart):FR(t,0);var r=this.toSeconds(t),a=n;n=FR(n,Math.max(this._buffer.duration-r,0));var i=this.toSeconds(n);i/=this._playbackRate,e=this.toSeconds(e);var o=new uF({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(e+i),this._state.setStateAtTime("stopped",e+i,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&pR(a)?o.start(e,r):o.start(e,r,i-this.toSeconds(this.fadeOut))}},{key:"_stop",value:function(e){var t=this.toSeconds(e);this._activeSources.forEach((function(e){return e.stop(t)}))}},{key:"restart",value:function(e,t,r){return Object(Nn.a)(Object(R.a)(n.prototype),"restart",this).call(this,e,t,r),this}},{key:"_restart",value:function(e,t,n){this._stop(e),this._start(e,t,n)}},{key:"seek",value:function(e,t){var n=this.toSeconds(t);if("started"===this._state.getValueAtTime(n)){var r=this.toSeconds(e);this._stop(n),this._start(n,r)}return this}},{key:"setLoopPoints",value:function(e,t){return this.loopStart=e,this.loopEnd=t,this}},{key:"loopStart",get:function(){return this._loopStart},set:function(e){this._loopStart=e,this.buffer.loaded&&sR(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach((function(t){t.loopStart=e}))}},{key:"loopEnd",get:function(){return this._loopEnd},set:function(e){this._loopEnd=e,this.buffer.loaded&&sR(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach((function(t){t.loopEnd=e}))}},{key:"buffer",get:function(){return this._buffer},set:function(e){this._buffer.set(e)}},{key:"loop",get:function(){return this._loop},set:function(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach((function(t){t.loop=e})),e)){var t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){this._playbackRate=e;var t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((function(e){return e.cancelStop()}))),this._activeSources.forEach((function(n){n.playbackRate.setValueAtTime(e,t)}))}},{key:"reverse",get:function(){return this._buffer.reverse},set:function(e){this._buffer.reverse=e}},{key:"loaded",get:function(){return this._buffer.loaded}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._activeSources.forEach((function(e){return e.dispose()})),this._activeSources.clear(),this._buffer.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cF.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:aD,onerror:aD,playbackRate:1,reverse:!1})}}]),n}(cF);_R([PF(0)],RF.prototype,"fadeIn",void 0),_R([PF(0)],RF.prototype,"fadeOut",void 0);var DF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["urls","onload"],"urls"))).name="Players",e.input=void 0,e._players=new Map;var r=DR(n.getDefaults(),arguments,["urls","onload"],"urls");return e._volume=e.output=new nF({context:e.context,volume:r.volume}),e.volume=e._volume.volume,nD(Object(P.a)(e),"volume"),e._buffers=new XD({urls:r.urls,onload:r.onload,baseUrl:r.baseUrl,onerror:r.onerror}),e.mute=r.mute,e._fadeIn=r.fadeIn,e._fadeOut=r.fadeOut,e}return Object(C.a)(n,[{key:"mute",get:function(){return this._volume.mute},set:function(e){this._volume.mute=e}},{key:"fadeIn",get:function(){return this._fadeIn},set:function(e){this._fadeIn=e,this._players.forEach((function(t){t.fadeIn=e}))}},{key:"fadeOut",get:function(){return this._fadeOut},set:function(e){this._fadeOut=e,this._players.forEach((function(t){t.fadeOut=e}))}},{key:"state",get:function(){return Array.from(this._players).some((function(e){var t=Object(A.a)(e,2);t[0];return"started"===t[1].state}))?"started":"stopped"}},{key:"has",value:function(e){return this._buffers.has(e)}},{key:"player",value:function(e){if(oR(this.has(e),"No Player with the name ".concat(e," exists on this object")),!this._players.has(e)){var t=new RF({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(e)}).connect(this.output);this._players.set(e,t)}return this._players.get(e)}},{key:"loaded",get:function(){return this._buffers.loaded}},{key:"add",value:function(e,t,n){return oR(!this._buffers.has(e),"A buffer with that name already exists on this object"),this._buffers.add(e,t,n),this}},{key:"stopAll",value:function(e){return this._players.forEach((function(t){return t.stop(e)})),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._volume.dispose(),this.volume.dispose(),this._players.forEach((function(e){return e.dispose()})),this._buffers.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cF.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:aD,onerror:aD,urls:{},volume:0})}}]),n}(MD),FF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["url","onload"]))).name="GrainPlayer",e._loopStart=0,e._loopEnd=0,e._activeSources=[];var r=DR(n.getDefaults(),arguments,["url","onload"]);return e.buffer=new iD({onload:r.onload,onerror:r.onerror,reverse:r.reverse,url:r.url}),e._clock=new GD({context:e.context,callback:e._tick.bind(Object(P.a)(e)),frequency:1/r.grainSize}),e._playbackRate=r.playbackRate,e._grainSize=r.grainSize,e._overlap=r.overlap,e.detune=r.detune,e.overlap=r.overlap,e.loop=r.loop,e.playbackRate=r.playbackRate,e.grainSize=r.grainSize,e.loopStart=r.loopStart,e.loopEnd=r.loopEnd,e.reverse=r.reverse,e._clock.on("stop",e._onstop.bind(Object(P.a)(e))),e}return Object(C.a)(n,[{key:"_start",value:function(e,t,n){t=FR(t,0),t=this.toSeconds(t),e=this.toSeconds(e);var r=1/this._clock.frequency.getValueAtTime(e);this._clock.start(e,t/r),n&&this.stop(e+this.toSeconds(n))}},{key:"restart",value:function(e,t,r){return Object(Nn.a)(Object(R.a)(n.prototype),"restart",this).call(this,e,t,r),this}},{key:"_restart",value:function(e,t,n){this._stop(e),this._start(e,t,n)}},{key:"_stop",value:function(e){this._clock.stop(e)}},{key:"_onstop",value:function(e){this._activeSources.forEach((function(t){t.fadeOut=0,t.stop(e)})),this.onstop(this)}},{key:"_tick",value:function(e){var t=this,n=this._clock.getTicksAtTime(e),r=n*this._grainSize;if(this.log("offset",r),!this.loop&&r>this.buffer.duration)this.stop(e);else{var a=r<this._overlap?0:this._overlap,i=new uF({context:this.context,url:this.buffer,fadeIn:a,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:mD(this.detune/100)}).connect(this.output);i.start(e,this._grainSize*n),i.stop(e+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=function(){var e=t._activeSources.indexOf(i);-1!==e&&t._activeSources.splice(e,1)}}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){sR(e,.001),this._playbackRate=e,this.grainSize=this._grainSize}},{key:"loopStart",get:function(){return this._loopStart},set:function(e){this.buffer.loaded&&sR(this.toSeconds(e),0,this.buffer.duration),this._loopStart=this.toSeconds(e)}},{key:"loopEnd",get:function(){return this._loopEnd},set:function(e){this.buffer.loaded&&sR(this.toSeconds(e),0,this.buffer.duration),this._loopEnd=this.toSeconds(e)}},{key:"reverse",get:function(){return this.buffer.reverse},set:function(e){this.buffer.reverse=e}},{key:"grainSize",get:function(){return this._grainSize},set:function(e){this._grainSize=this.toSeconds(e),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}},{key:"overlap",get:function(){return this._overlap},set:function(e){var t=this.toSeconds(e);sR(t,0),this._overlap=t}},{key:"loaded",get:function(){return this.buffer.loaded}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach((function(e){return e.dispose()})),this}}],[{key:"getDefaults",value:function(){return Object.assign(cF.getDefaults(),{onload:aD,onerror:aD,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}}]),n}(cF),LF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="Abs",e._abs=new yF({context:e.context,mapping:function(e){return Math.abs(e)<.001?0:Math.abs(e)}}),e.input=e._abs,e.output=e._abs,e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._abs.dispose(),this}}]),n}(gF),zF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="GainToAudio",e._norm=new yF({context:e.context,mapping:function(e){return 2*Math.abs(e)-1}}),e.input=e._norm,e.output=e._norm,e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._norm.dispose(),this}}]),n}(gF),qF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="Negate",e._multiply=new kF({context:e.context,value:-1}),e.input=e._multiply,e.output=e._multiply,e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._multiply.dispose(),this}}]),n}(gF),VF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["value"])))).override=!1,e.name="Subtract",e._sum=new FD({context:e.context}),e.input=e._sum,e.output=e._sum,e._neg=new qF({context:e.context}),e.subtrahend=e._param,PD(e._constantSource,e._neg,e._sum),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._neg.dispose(),this._sum.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(qD.getDefaults(),{value:0})}}]),n}(qD),BF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments)))).name="GreaterThanZero",e._thresh=e.output=new yF({context:e.context,length:127,mapping:function(e){return e<=0?0:1}}),e._scale=e.input=new kF({context:e.context,value:1e4}),e._scale.connect(e._thresh),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._scale.dispose(),this._thresh.dispose(),this}}]),n}(gF),UF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["value"])))).name="GreaterThan",e.override=!1;var r=DR(n.getDefaults(),arguments,["value"]);return e._subtract=e.input=new VF({context:e.context,value:r.value}),e._gtz=e.output=new BF({context:e.context}),e.comparator=e._param=e._subtract.subtrahend,nD(Object(P.a)(e),"comparator"),e._subtract.connect(e._gtz),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(qD.getDefaults(),{value:0})}}]),n}(qD),WF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["value"])))).name="Pow";var r=DR(n.getDefaults(),arguments,["value"]);return e._exponentScaler=e.input=e.output=new yF({context:e.context,mapping:e._expFunc(r.value),length:8192}),e._exponent=r.value,e}return Object(C.a)(n,[{key:"_expFunc",value:function(e){return function(t){return Math.pow(Math.abs(t),e)}}},{key:"value",get:function(){return this._exponent},set:function(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._exponentScaler.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(gF.getDefaults(),{value:1})}}]),n}(gF),GF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["min","max","exponent"])))).name="ScaleExp";var r=DR(n.getDefaults(),arguments,["min","max","exponent"]);return e.input=e._exp=new WF({context:e.context,value:r.exponent}),e._exp.connect(e._mult),e}return Object(C.a)(n,[{key:"exponent",get:function(){return this._exp.value},set:function(e){this._exp.value=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._exp.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(TF.getDefaults(),{exponent:1})}}]),n}(TF),HF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(qD.getDefaults(),arguments,["value","units"]))).name="SyncedSignal",e.override=!1;var r=DR(qD.getDefaults(),arguments,["value","units"]);return e._lastVal=r.value,e._synced=e.context.transport.scheduleRepeat(e._onTick.bind(Object(P.a)(e)),"1i"),e._syncedCallback=e._anchorValue.bind(Object(P.a)(e)),e.context.transport.on("start",e._syncedCallback),e.context.transport.on("pause",e._syncedCallback),e.context.transport.on("stop",e._syncedCallback),e._constantSource.disconnect(),e._constantSource.stop(0),e._constantSource=e.output=new zD({context:e.context,offset:r.value,units:r.units}).start(0),e.setValueAtTime(r.value,0),e}return Object(C.a)(n,[{key:"_onTick",value:function(e){var t=Object(Nn.a)(Object(R.a)(n.prototype),"getValueAtTime",this).call(this,this.context.transport.seconds);this._lastVal!==t&&(this._lastVal=t,this._constantSource.offset.setValueAtTime(t,e))}},{key:"_anchorValue",value:function(e){var t=Object(Nn.a)(Object(R.a)(n.prototype),"getValueAtTime",this).call(this,this.context.transport.seconds);this._lastVal=t,this._constantSource.offset.cancelAndHoldAtTime(e),this._constantSource.offset.setValueAtTime(t,e)}},{key:"getValueAtTime",value:function(e){var t=new ED(this.context,e).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"getValueAtTime",this).call(this,t)}},{key:"setValueAtTime",value:function(e,t){var r=new ED(this.context,t).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"setValueAtTime",this).call(this,e,r),this}},{key:"linearRampToValueAtTime",value:function(e,t){var r=new ED(this.context,t).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"linearRampToValueAtTime",this).call(this,e,r),this}},{key:"exponentialRampToValueAtTime",value:function(e,t){var r=new ED(this.context,t).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"exponentialRampToValueAtTime",this).call(this,e,r),this}},{key:"setTargetAtTime",value:function(e,t,r){var a=new ED(this.context,t).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"setTargetAtTime",this).call(this,e,a,r),this}},{key:"cancelScheduledValues",value:function(e){var t=new ED(this.context,e).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"cancelScheduledValues",this).call(this,t),this}},{key:"setValueCurveAtTime",value:function(e,t,r,a){var i=new ED(this.context,t).toSeconds();return r=this.toSeconds(r),Object(Nn.a)(Object(R.a)(n.prototype),"setValueCurveAtTime",this).call(this,e,i,r,a),this}},{key:"cancelAndHoldAtTime",value:function(e){var t=new ED(this.context,e).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"cancelAndHoldAtTime",this).call(this,t),this}},{key:"setRampPoint",value:function(e){var t=new ED(this.context,e).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"setRampPoint",this).call(this,t),this}},{key:"exponentialRampTo",value:function(e,t,r){var a=new ED(this.context,r).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"exponentialRampTo",this).call(this,e,t,a),this}},{key:"linearRampTo",value:function(e,t,r){var a=new ED(this.context,r).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"linearRampTo",this).call(this,e,t,a),this}},{key:"targetRampTo",value:function(e,t,r){var a=new ED(this.context,r).toSeconds();return Object(Nn.a)(Object(R.a)(n.prototype),"targetRampTo",this).call(this,e,t,a),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}]),n}(qD),KF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="Envelope",e._sig=new qD({context:e.context,value:0}),e.output=e._sig,e.input=void 0;var r=DR(n.getDefaults(),arguments,["attack","decay","sustain","release"]);return e.attack=r.attack,e.decay=r.decay,e.sustain=r.sustain,e.release=r.release,e.attackCurve=r.attackCurve,e.releaseCurve=r.releaseCurve,e.decayCurve=r.decayCurve,e}return Object(C.a)(n,[{key:"value",get:function(){return this.getValueAtTime(this.now())}},{key:"_getCurve",value:function(e,t){if(OR(e))return e;var n;for(n in XF)if(XF[n][t]===e)return n;return e}},{key:"_setCurve",value:function(e,t,n){if(OR(n)&&Reflect.has(XF,n)){var r=XF[n];bR(r)?"_decayCurve"!==e&&(this[e]=r[t]):this[e]=r}else{if(!yR(n)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+n);this[e]=n}}},{key:"attackCurve",get:function(){return this._getCurve(this._attackCurve,"In")},set:function(e){this._setCurve("_attackCurve","In",e)}},{key:"releaseCurve",get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(e){this._setCurve("_releaseCurve","Out",e)}},{key:"decayCurve",get:function(){return this._decayCurve},set:function(e){oR(["linear","exponential"].some((function(t){return t===e})),"Invalid envelope curve: ".concat(e)),this._decayCurve=e}},{key:"triggerAttack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.log("triggerAttack",e,t),e=this.toSeconds(e);var n=this.toSeconds(this.attack),r=n,a=this.toSeconds(this.decay),i=this.getValueAtTime(e);if(i>0){var o=1/r,s=1-i;r=s/o}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,r,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);for(var c=this._attackCurve,u=1;u<c.length;u++)if(c[u-1]<=i&&i<=c[u]){(c=this._attackCurve.slice(u))[0]=i;break}this._sig.setValueCurveAtTime(c,e,r,t)}if(a&&this.sustain<1){var l=t*this.sustain,f=e+r;this.log("decay",f),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(l,a+f):this._sig.exponentialApproachValueAtTime(l,f,a)}return this}},{key:"triggerRelease",value:function(e){this.log("triggerRelease",e),e=this.toSeconds(e);var t=this.getValueAtTime(e);if(t>0){var n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,e):(oR(yR(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}},{key:"getValueAtTime",value:function(e){return this._sig.getValueAtTime(e)}},{key:"triggerAttackRelease",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}},{key:"cancel",value:function(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}},{key:"connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return VD(this,e,t,n),this}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return CR(this,void 0,void 0,mn.a.mark((function t(){var n,r,a,i,o,s,c,u;return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e/this.context.sampleRate,r=new oD(1,n,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=a+this.toSeconds(this.release),s=i+(o=.1*i),(c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/s,decay:n*this.toSeconds(this.decay)/s,release:n*this.toSeconds(this.release)/s,context:r})))._sig.toDestination(),c.triggerAttackRelease(n*(a+o)/s,0),t.next=11,r.render();case 11:return u=t.sent,t.abrupt("return",u.getChannelData(0));case 13:case"end":return t.stop()}}),t,this)})))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._sig.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}}]),n}(MD);_R([PF(0)],KF.prototype,"attack",void 0),_R([PF(0)],KF.prototype,"decay",void 0),_R([MF(0,1)],KF.prototype,"sustain",void 0),_R([PF(0)],KF.prototype,"release",void 0);var XF=function(){var e,t,n=128,r=[];for(e=0;e<n;e++)r[e]=Math.sin(e/127*(Math.PI/2));var a=[];for(e=0;e<127;e++){t=e/127;var i=Math.sin(t*(2*Math.PI)*6.4-Math.PI/2)+1;a[e]=i/10+.83*t}a[127]=1;var o=[];for(e=0;e<n;e++)o[e]=Math.ceil(e/127*5)/5;var s=[];for(e=0;e<n;e++)t=e/127,s[e]=.5*(1-Math.cos(Math.PI*t));var c,u=[];for(e=0;e<n;e++){t=e/127;var l=4*Math.pow(t,3)+.2,f=Math.cos(l*Math.PI*2*t);u[e]=Math.abs(f*(1-t))}function d(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=1-e[n];return t}return{bounce:{In:d(u),Out:u},cosine:{In:r,Out:(c=r,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:a,Out:d(a)},sine:{In:s,Out:d(s)},step:{In:o,Out:d(o)}}}(),QF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments)))._scheduledEvents=[],e._synced=!1,e._original_triggerAttack=e.triggerAttack,e._original_triggerRelease=e.triggerRelease;var r=DR(n.getDefaults(),arguments);return e._volume=e.output=new nF({context:e.context,volume:r.volume}),e.volume=e._volume.volume,nD(Object(P.a)(e),"volume"),e}return Object(C.a)(n,[{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}},{key:"_syncState",value:function(){var e=!1;return this._synced||(this._synced=!0,e=!0),e}},{key:"_syncMethod",value:function(e,t){var n=this,r=this["_original_"+e]=this[e];this[e]=function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];var o=a[t],s=n.context.transport.schedule((function(e){a[t]=e,r.apply(n,a)}),o);n._scheduledEvents.push(s)}}},{key:"unsync",value:function(){var e=this;return this._scheduledEvents.forEach((function(t){return e.context.transport.clear(t)})),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}},{key:"triggerAttackRelease",value:function(e,t,n,r){var a=this.toSeconds(n),i=this.toSeconds(t);return this.triggerAttack(e,a,r),this.triggerRelease(a+i),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{volume:0})}}]),n}(MD),YF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),e=t.call(this,DR(n.getDefaults(),arguments));var r=DR(n.getDefaults(),arguments);return e.portamento=r.portamento,e.onsilence=r.onsilence,e}return Object(C.a)(n,[{key:"triggerAttack",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.log("triggerAttack",e,t,n);var r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}},{key:"triggerRelease",value:function(e){this.log("triggerRelease",e);var t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}},{key:"setNote",value:function(e,t){var n=this.toSeconds(t),r=e instanceof jD?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){var a=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,a,n)}else this.frequency.setValueAtTime(r,n);return this}}],[{key:"getDefaults",value:function(){return Object.assign(QF.getDefaults(),{detune:0,onsilence:aD,portamento:0})}}]),n}(QF);_R([PF(0)],YF.prototype,"portamento",void 0);var ZF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="AmplitudeEnvelope",e._gainNode=new FD({context:e.context,gain:0}),e.output=e._gainNode,e.input=e._gainNode,e._sig.connect(e._gainNode.gain),e.output=e._gainNode,e.input=e._gainNode,e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._gainNode.dispose(),this}}]),n}(KF),JF=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="Synth";var r=DR(n.getDefaults(),arguments);return e.oscillator=new EF(Object.assign({context:e.context,detune:r.detune,onstop:function(){return e.onsilence(Object(P.a)(e))}},r.oscillator)),e.frequency=e.oscillator.frequency,e.detune=e.oscillator.detune,e.envelope=new ZF(Object.assign({context:e.context},r.envelope)),e.oscillator.chain(e.envelope,e.output),nD(Object(P.a)(e),["oscillator","frequency","detune","envelope"]),e}return Object(C.a)(n,[{key:"_triggerEnvelopeAttack",value:function(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}},{key:"_triggerEnvelopeRelease",value:function(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}},{key:"getLevelAtTime",value:function(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.oscillator.dispose(),this.envelope.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(YF.getDefaults(),{envelope:Object.assign(LR(KF.getDefaults(),Object.keys(MD.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(LR(EF.getDefaults(),[].concat(Object(I.a)(Object.keys(cF.getDefaults())),["frequency","detune"])),{type:"triangle"})})}}]),n}(YF),$F=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="ModulationSynth";var r=DR(n.getDefaults(),arguments);return e._carrier=new JF({context:e.context,oscillator:r.oscillator,envelope:r.envelope,onsilence:function(){return e.onsilence(Object(P.a)(e))},volume:-10}),e._modulator=new JF({context:e.context,oscillator:r.modulation,envelope:r.modulationEnvelope,volume:-10}),e.oscillator=e._carrier.oscillator,e.envelope=e._carrier.envelope,e.modulation=e._modulator.oscillator,e.modulationEnvelope=e._modulator.envelope,e.frequency=new qD({context:e.context,units:"frequency"}),e.detune=new qD({context:e.context,value:r.detune,units:"cents"}),e.harmonicity=new kF({context:e.context,value:r.harmonicity,minValue:0}),e._modulationNode=new FD({context:e.context,gain:0}),nD(Object(P.a)(e),["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),e}return Object(C.a)(n,[{key:"_triggerEnvelopeAttack",value:function(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}},{key:"_triggerEnvelopeRelease",value:function(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}},{key:"getLevelAtTime",value:function(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(YF.getDefaults(),{harmonicity:3,oscillator:Object.assign(LR(EF.getDefaults(),[].concat(Object(I.a)(Object.keys(cF.getDefaults())),["frequency","detune"])),{type:"sine"}),envelope:Object.assign(LR(KF.getDefaults(),Object.keys(MD.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(LR(EF.getDefaults(),[].concat(Object(I.a)(Object.keys(cF.getDefaults())),["frequency","detune"])),{type:"square"}),modulationEnvelope:Object.assign(LR(KF.getDefaults(),Object.keys(MD.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}}]),n}(YF),eL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="AMSynth",e._modulationScale=new OF({context:e.context}),e.frequency.connect(e._carrier.frequency),e.frequency.chain(e.harmonicity,e._modulator.frequency),e.detune.fan(e._carrier.detune,e._modulator.detune),e._modulator.chain(e._modulationScale,e._modulationNode.gain),e._carrier.chain(e._modulationNode,e.output),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._modulationScale.dispose(),this}}]),n}($F),tL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","type"]))).name="BiquadFilter";var r=DR(n.getDefaults(),arguments,["frequency","type"]);return e._filter=e.context.createBiquadFilter(),e.input=e.output=e._filter,e.Q=new AD({context:e.context,units:"number",value:r.Q,param:e._filter.Q}),e.frequency=new AD({context:e.context,units:"frequency",value:r.frequency,param:e._filter.frequency}),e.detune=new AD({context:e.context,units:"cents",value:r.detune,param:e._filter.detune}),e.gain=new AD({context:e.context,units:"decibels",convert:!1,value:r.gain,param:e._filter.gain}),e.type=r.type,e}return Object(C.a)(n,[{key:"type",get:function(){return this._filter.type},set:function(e){oR(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),"Invalid filter type: ".concat(e)),this._filter.type=e}},{key:"getFrequencyResponse",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,t=new Float32Array(e),n=0;n<e;n++){var r=Math.pow(n/e,2),a=19980*r+20;t[n]=a}var i=new Float32Array(e),o=new Float32Array(e),s=this.context.createBiquadFilter();return s.type=this.type,s.Q.value=this.Q.value,s.frequency.value=this.frequency.value,s.gain.value=this.gain.value,s.getFrequencyResponse(t,i,o),i}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}}]),n}(MD),nL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","type","rolloff"]))).name="Filter",e.input=new FD({context:e.context}),e.output=new FD({context:e.context}),e._filters=[];var r=DR(n.getDefaults(),arguments,["frequency","type","rolloff"]);return e._filters=[],e.Q=new qD({context:e.context,units:"positive",value:r.Q}),e.frequency=new qD({context:e.context,units:"frequency",value:r.frequency}),e.detune=new qD({context:e.context,units:"cents",value:r.detune}),e.gain=new qD({context:e.context,units:"decibels",convert:!1,value:r.gain}),e._type=r.type,e.rolloff=r.rolloff,nD(Object(P.a)(e),["detune","frequency","gain","Q"]),e}return Object(C.a)(n,[{key:"type",get:function(){return this._type},set:function(e){oR(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),"Invalid filter type: ".concat(e)),this._type=e,this._filters.forEach((function(t){return t.type=e}))}},{key:"rolloff",get:function(){return this._rolloff},set:function(e){var t=mR(e)?e:parseInt(e,10),n=[-12,-24,-48,-96],r=n.indexOf(t);oR(-1!==r,"rolloff can only be ".concat(n.join(", "))),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach((function(e){return e.disconnect()})),this._filters=new Array(r);for(var a=0;a<r;a++){var i=new tL({context:this.context});i.type=this._type,this.frequency.connect(i.frequency),this.detune.connect(i.detune),this.Q.connect(i.Q),this.gain.connect(i.gain),this._filters[a]=i}this._internalChannels=this._filters,PD.apply(void 0,[this.input].concat(Object(I.a)(this._internalChannels),[this.output]))}},{key:"getFrequencyResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,t=new tL({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(e).map((function(){return 1}));return this._filters.forEach((function(){t.getFrequencyResponse(e).forEach((function(e,t){return n[t]*=e}))})),t.dispose(),n}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._filters.forEach((function(e){e.dispose()})),rD(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}}]),n}(MD),rL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="FrequencyEnvelope";var r=DR(n.getDefaults(),arguments,["attack","decay","sustain","release"]);return e._octaves=r.octaves,e._baseFrequency=e.toFrequency(r.baseFrequency),e._exponent=e.input=new WF({context:e.context,value:r.exponent}),e._scale=e.output=new TF({context:e.context,min:e._baseFrequency,max:e._baseFrequency*Math.pow(2,e._octaves)}),e._sig.chain(e._exponent,e._scale),e}return Object(C.a)(n,[{key:"baseFrequency",get:function(){return this._baseFrequency},set:function(e){var t=this.toFrequency(e);sR(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}},{key:"octaves",get:function(){return this._octaves},set:function(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}},{key:"exponent",get:function(){return this._exponent.value},set:function(e){this._exponent.value=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._exponent.dispose(),this._scale.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(KF.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}}]),n}(KF),aL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="MonoSynth";var r=DR(n.getDefaults(),arguments);return e.oscillator=new EF(Object.assign(r.oscillator,{context:e.context,detune:r.detune,onstop:function(){return e.onsilence(Object(P.a)(e))}})),e.frequency=e.oscillator.frequency,e.detune=e.oscillator.detune,e.filter=new nL(Object.assign(r.filter,{context:e.context})),e.filterEnvelope=new rL(Object.assign(r.filterEnvelope,{context:e.context})),e.envelope=new ZF(Object.assign(r.envelope,{context:e.context})),e.oscillator.chain(e.filter,e.envelope,e.output),e.filterEnvelope.connect(e.filter.frequency),nD(Object(P.a)(e),["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),e}return Object(C.a)(n,[{key:"_triggerEnvelopeAttack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}},{key:"_triggerEnvelopeRelease",value:function(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}},{key:"getLevelAtTime",value:function(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(YF.getDefaults(),{envelope:Object.assign(LR(KF.getDefaults(),Object.keys(MD.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(LR(nL.getDefaults(),Object.keys(MD.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(LR(rL.getDefaults(),Object.keys(MD.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(LR(EF.getDefaults(),Object.keys(cF.getDefaults())),{type:"sawtooth"})})}}]),n}(YF),iL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="DuoSynth";var r=DR(n.getDefaults(),arguments);return e.voice0=new aL(Object.assign(r.voice0,{context:e.context,onsilence:function(){return e.onsilence(Object(P.a)(e))}})),e.voice1=new aL(Object.assign(r.voice1,{context:e.context})),e.harmonicity=new kF({context:e.context,units:"positive",value:r.harmonicity}),e._vibrato=new AF({frequency:r.vibratoRate,context:e.context,min:-50,max:50}),e._vibrato.start(),e.vibratoRate=e._vibrato.frequency,e._vibratoGain=new FD({context:e.context,units:"normalRange",gain:r.vibratoAmount}),e.vibratoAmount=e._vibratoGain.gain,e.frequency=new qD({context:e.context,units:"frequency",value:440}),e.detune=new qD({context:e.context,units:"cents",value:r.detune}),e.frequency.connect(e.voice0.frequency),e.frequency.chain(e.harmonicity,e.voice1.frequency),e._vibrato.connect(e._vibratoGain),e._vibratoGain.fan(e.voice0.detune,e.voice1.detune),e.detune.fan(e.voice0.detune,e.voice1.detune),e.voice0.connect(e.output),e.voice1.connect(e.output),nD(Object(P.a)(e),["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),e}return Object(C.a)(n,[{key:"getLevelAtTime",value:function(e){return e=this.toSeconds(e),this.voice0.envelope.getValueAtTime(e)+this.voice1.envelope.getValueAtTime(e)}},{key:"_triggerEnvelopeAttack",value:function(e,t){this.voice0._triggerEnvelopeAttack(e,t),this.voice1._triggerEnvelopeAttack(e,t)}},{key:"_triggerEnvelopeRelease",value:function(e){return this.voice0._triggerEnvelopeRelease(e),this.voice1._triggerEnvelopeRelease(e),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}],[{key:"getDefaults",value:function(){return RR(YF.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:RR(LR(aL.getDefaults(),Object.keys(YF.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:RR(LR(aL.getDefaults(),Object.keys(YF.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}}]),n}(YF),oL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="FMSynth";var r=DR(n.getDefaults(),arguments);return e.modulationIndex=new kF({context:e.context,value:r.modulationIndex}),e.frequency.connect(e._carrier.frequency),e.frequency.chain(e.harmonicity,e._modulator.frequency),e.frequency.chain(e.modulationIndex,e._modulationNode),e.detune.fan(e._carrier.detune,e._modulator.detune),e._modulator.connect(e._modulationNode.gain),e._modulationNode.connect(e._carrier.frequency),e._carrier.connect(e.output),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.modulationIndex.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign($F.getDefaults(),{modulationIndex:10})}}]),n}($F),sL=[1,1.483,1.932,2.546,2.63,3.897],cL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="MetalSynth",e._oscillators=[],e._freqMultipliers=[];var r=DR(n.getDefaults(),arguments);e.detune=new qD({context:e.context,units:"cents",value:r.detune}),e.frequency=new qD({context:e.context,units:"frequency"}),e._amplitude=new FD({context:e.context,gain:0}).connect(e.output),e._highpass=new nL({Q:0,context:e.context,type:"highpass"}).connect(e._amplitude);for(var a=0;a<sL.length;a++){var i=new xF({context:e.context,harmonicity:r.harmonicity,modulationIndex:r.modulationIndex,modulationType:"square",onstop:0===a?function(){return e.onsilence(Object(P.a)(e))}:aD,type:"square"});i.connect(e._highpass),e._oscillators[a]=i;var o=new kF({context:e.context,value:sL[a]});e._freqMultipliers[a]=o,e.frequency.chain(o,i.frequency),e.detune.connect(i.detune)}return e._filterFreqScaler=new TF({context:e.context,max:7e3,min:e.toFrequency(r.resonance)}),e.envelope=new KF({attack:r.envelope.attack,attackCurve:"linear",context:e.context,decay:r.envelope.decay,release:r.envelope.release,sustain:0}),e.envelope.chain(e._filterFreqScaler,e._highpass.frequency),e.envelope.connect(e._amplitude.gain),e._octaves=r.octaves,e.octaves=r.octaves,e}return Object(C.a)(n,[{key:"_triggerEnvelopeAttack",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.envelope.triggerAttack(e,n),this._oscillators.forEach((function(t){return t.start(e)})),0===this.envelope.sustain&&this._oscillators.forEach((function(n){n.stop(e+t.toSeconds(t.envelope.attack)+t.toSeconds(t.envelope.decay))})),this}},{key:"_triggerEnvelopeRelease",value:function(e){var t=this;return this.envelope.triggerRelease(e),this._oscillators.forEach((function(n){return n.stop(e+t.toSeconds(t.envelope.release))})),this}},{key:"getLevelAtTime",value:function(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}},{key:"modulationIndex",get:function(){return this._oscillators[0].modulationIndex.value},set:function(e){this._oscillators.forEach((function(t){return t.modulationIndex.value=e}))}},{key:"harmonicity",get:function(){return this._oscillators[0].harmonicity.value},set:function(e){this._oscillators.forEach((function(t){return t.harmonicity.value=e}))}},{key:"resonance",get:function(){return this._filterFreqScaler.min},set:function(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}},{key:"octaves",get:function(){return this._octaves},set:function(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._oscillators.forEach((function(e){return e.dispose()})),this._freqMultipliers.forEach((function(e){return e.dispose()})),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}],[{key:"getDefaults",value:function(){return RR(YF.getDefaults(),{envelope:Object.assign(LR(KF.getDefaults(),Object.keys(MD.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}}]),n}(YF),uL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="MembraneSynth",e.portamento=0;var r=DR(n.getDefaults(),arguments);return e.pitchDecay=r.pitchDecay,e.octaves=r.octaves,nD(Object(P.a)(e),["oscillator","envelope"]),e}return Object(C.a)(n,[{key:"setNote",value:function(e,t){var n=this.toSeconds(t),r=this.toFrequency(e instanceof jD?e.toFrequency():e),a=r*this.octaves;return this.oscillator.frequency.setValueAtTime(a,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this}}],[{key:"getDefaults",value:function(){return RR(YF.getDefaults(),JF.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}}]),n}(JF);_R([MF(0)],uL.prototype,"octaves",void 0),_R([PF(0)],uL.prototype,"pitchDecay",void 0);var lL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="NoiseSynth";var r=DR(n.getDefaults(),arguments);return e.noise=new lF(Object.assign({context:e.context},r.noise)),e.envelope=new ZF(Object.assign({context:e.context},r.envelope)),e.noise.chain(e.envelope,e.output),e}return Object(C.a)(n,[{key:"triggerAttack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),0===this.envelope.sustain&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}},{key:"triggerRelease",value:function(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}},{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}},{key:"triggerAttackRelease",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,n),this.triggerRelease(t+e),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.noise.dispose(),this.envelope.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QF.getDefaults(),{envelope:Object.assign(LR(KF.getDefaults(),Object.keys(MD.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(LR(lF.getDefaults(),Object.keys(cF.getDefaults())),{type:"white"})})}}]),n}(QF),fL=new Set;function dL(e){fL.add(e)}function pL(e,t){var n='registerProcessor("'.concat(e,'", ').concat(t,")");fL.add(n)}var hL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;Object(_.a)(this,n),(r=t.call(this,e)).name="ToneAudioWorklet",r.workletOptions={},r.onprocessorerror=aD;var a=URL.createObjectURL(new Blob([Array.from(fL).join("\n")],{type:"text/javascript"})),i=r._audioWorkletName();return r._dummyGain=r.context.createGain(),r._dummyParam=r._dummyGain.gain,r.context.addAudioWorkletModule(a,i).then((function(){r.disposed||(r._worklet=r.context.createAudioWorkletNode(i,r.workletOptions),r._worklet.onprocessorerror=r.onprocessorerror.bind(Object(P.a)(r)),r.onReady(r._worklet))})),r}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}]),n}(MD);dL('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');dL("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");dL("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");var vL="feedback-comb-filter";pL(vL,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');var mL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["delayTime","resonance"]))).name="FeedbackCombFilter";var r=DR(n.getDefaults(),arguments,["delayTime","resonance"]);return e.input=new FD({context:e.context}),e.output=new FD({context:e.context}),e.delayTime=new AD({context:e.context,value:r.delayTime,units:"time",minValue:0,maxValue:1,param:e._dummyParam,swappable:!0}),e.resonance=new AD({context:e.context,value:r.resonance,units:"normalRange",param:e._dummyParam,swappable:!0}),nD(Object(P.a)(e),["resonance","delayTime"]),e}return Object(C.a)(n,[{key:"_audioWorkletName",value:function(){return vL}},{key:"onReady",value:function(e){PD(this.input,e,this.output);var t=e.parameters.get("delayTime");this.delayTime.setParam(t);var n=e.parameters.get("feedback");this.resonance.setParam(n)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{delayTime:.1,resonance:.5})}}]),n}(hL),bL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","type"]))).name="OnePoleFilter";var r=DR(n.getDefaults(),arguments,["frequency","type"]);return e._frequency=r.frequency,e._type=r.type,e.input=new FD({context:e.context}),e.output=new FD({context:e.context}),e._createFilter(),e}return Object(C.a)(n,[{key:"_createFilter",value:function(){var e=this,t=this._filter,n=this.toFrequency(this._frequency),r=1/(2*Math.PI*n);if("lowpass"===this._type){var a=1/(r*this.context.sampleRate),i=a-1;this._filter=this.context.createIIRFilter([a,0],[1,i])}else{var o=1/(r*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,o])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout((function(){e.disposed||(e.input.disconnect(t),t.disconnect())}),this.blockTime)}},{key:"frequency",get:function(){return this._frequency},set:function(e){this._frequency=e,this._createFilter()}},{key:"type",get:function(){return this._type},set:function(e){this._type=e,this._createFilter()}},{key:"getFrequencyResponse",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,t=new Float32Array(e),n=0;n<e;n++){var r=Math.pow(n/e,2),a=19980*r+20;t[n]=a}var i=new Float32Array(e),o=new Float32Array(e);return this._filter.getFrequencyResponse(t,i,o),i}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{frequency:880,type:"lowpass"})}}]),n}(MD),gL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["delayTime","resonance","dampening"]))).name="LowpassCombFilter";var r=DR(n.getDefaults(),arguments,["delayTime","resonance","dampening"]);return e._combFilter=e.output=new mL({context:e.context,delayTime:r.delayTime,resonance:r.resonance}),e.delayTime=e._combFilter.delayTime,e.resonance=e._combFilter.resonance,e._lowpass=e.input=new bL({context:e.context,frequency:r.dampening,type:"lowpass"}),e._lowpass.connect(e._combFilter),e}return Object(C.a)(n,[{key:"dampening",get:function(){return this._lowpass.frequency},set:function(e){this._lowpass.frequency=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._combFilter.dispose(),this._lowpass.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}}]),n}(MD),yL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="PluckSynth";var r=DR(n.getDefaults(),arguments);return e._noise=new lF({context:e.context,type:"pink"}),e.attackNoise=r.attackNoise,e._lfcf=new gL({context:e.context,dampening:r.dampening,resonance:r.resonance}),e.resonance=r.resonance,e.release=r.release,e._noise.connect(e._lfcf),e._lfcf.connect(e.output),e}return Object(C.a)(n,[{key:"dampening",get:function(){return this._lfcf.dampening},set:function(e){this._lfcf.dampening=e}},{key:"triggerAttack",value:function(e,t){var n=this.toFrequency(e);t=this.toSeconds(t);var r=1/n;return this._lfcf.delayTime.setValueAtTime(r,t),this._noise.start(t),this._noise.stop(t+r*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(t),this._lfcf.resonance.setValueAtTime(this.resonance,t),this}},{key:"triggerRelease",value:function(e){return this._lfcf.resonance.linearRampTo(0,this.release,e),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._noise.dispose(),this._lfcf.dispose(),this}}],[{key:"getDefaults",value:function(){return RR(QF.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}}]),n}(QF),OL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["voice","options"]))).name="PolySynth",e._availableVoices=[],e._activeVoices=[],e._voices=[],e._gcTimeout=-1,e._averageActiveVoices=0;var r=DR(n.getDefaults(),arguments,["voice","options"]);oR(!mR(r.voice),"DEPRECATED: The polyphony count is no longer the first argument.");var a=r.voice.getDefaults();e.options=Object.assign(a,r.options),e.voice=r.voice,e.maxPolyphony=r.maxPolyphony,e._dummyVoice=e._getNextAvailableVoice();var i=e._voices.indexOf(e._dummyVoice);return e._voices.splice(i,1),e._gcTimeout=e.context.setInterval(e._collectGarbage.bind(Object(P.a)(e)),1),e}return Object(C.a)(n,[{key:"activeVoices",get:function(){return this._activeVoices.length}},{key:"_makeVoiceAvailable",value:function(e){this._availableVoices.push(e);var t=this._activeVoices.findIndex((function(t){return t.voice===e}));this._activeVoices.splice(t,1)}},{key:"_getNextAvailableVoice",value:function(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){var e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return e.connect(this.output),this._voices.push(e),e}dR("Max polyphony exceeded. Note dropped.")}},{key:"_collectGarbage",value:function(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){var e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}},{key:"_triggerAttack",value:function(e,t,n){var r=this;e.forEach((function(e){var a=new QD(r.context,e).toMidi(),i=r._getNextAvailableVoice();i&&(i.triggerAttack(e,t,n),r._activeVoices.push({midi:a,voice:i,released:!1}),r.log("triggerAttack",e,t))}))}},{key:"_triggerRelease",value:function(e,t){var n=this;e.forEach((function(e){var r=new QD(n.context,e).toMidi(),a=n._activeVoices.find((function(e){var t=e.midi,n=e.released;return t===r&&!n}));a&&(a.voice.triggerRelease(t),a.released=!0,n.log("triggerRelease",e,t))}))}},{key:"_scheduleEvent",value:function(e,t,n,r){var a=this;oR(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===e?this._triggerAttack(t,n,r):this._triggerRelease(t,n):this.context.setTimeout((function(){a._scheduleEvent(e,t,n,r)}),n-this.now())}},{key:"triggerAttack",value:function(e,t,n){Array.isArray(e)||(e=[e]);var r=this.toSeconds(t);return this._scheduleEvent("attack",e,r,n),this}},{key:"triggerRelease",value:function(e,t){Array.isArray(e)||(e=[e]);var n=this.toSeconds(t);return this._scheduleEvent("release",e,n),this}},{key:"triggerAttackRelease",value:function(e,t,n,r){var a=this.toSeconds(n);if(this.triggerAttack(e,a,r),yR(t)){oR(yR(e),"If the duration is an array, the notes must also be an array"),e=e;for(var i=0;i<e.length;i++){var o=t[Math.min(i,t.length-1)],s=this.toSeconds(o);oR(s>0,"The duration must be greater than 0"),this.triggerRelease(e[i],a+s)}}else{var c=this.toSeconds(t);oR(c>0,"The duration must be greater than 0"),this.triggerRelease(e,a+c)}return this}},{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}},{key:"set",value:function(e){var t=LR(e,["onsilence","context"]);return this.options=RR(this.options,t),this._voices.forEach((function(e){return e.set(t)})),this._dummyVoice.set(t),this}},{key:"get",value:function(){return this._dummyVoice.get()}},{key:"releaseAll",value:function(e){var t=this.toSeconds(e);return this._activeVoices.forEach((function(e){e.voice.triggerRelease(t)})),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._dummyVoice.dispose(),this._voices.forEach((function(e){return e.dispose()})),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}],[{key:"getDefaults",value:function(){return Object.assign(QF.getDefaults(),{maxPolyphony:32,options:{},voice:JF})}}]),n}(QF),kL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"))).name="Sampler",e._activeSources=new Map;var r=DR(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),a={};return Object.keys(r.urls).forEach((function(t){var n=parseInt(t,10);if(oR(kR(t)||mR(n)&&isFinite(n),"url key is neither a note or midi pitch: ".concat(t)),kR(t)){var i=new jD(e.context,t).toMidi();a[i]=r.urls[t]}else mR(n)&&isFinite(n)&&(a[n]=r.urls[n])})),e._buffers=new XD({urls:a,onload:r.onload,baseUrl:r.baseUrl,onerror:r.onerror}),e.attack=r.attack,e.release=r.release,e.curve=r.curve,e._buffers.loaded&&Promise.resolve().then(r.onload),e}return Object(C.a)(n,[{key:"_findClosest",value:function(e){for(var t=0;t<96;){if(this._buffers.has(e+t))return-t;if(this._buffers.has(e-t))return t;t++}throw new Error("No available buffers for note: ".concat(e))}},{key:"triggerAttack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.log("triggerAttack",e,t,r),Array.isArray(e)||(e=[e]),e.forEach((function(e){var a=yD(new jD(n.context,e).toFrequency()),i=Math.round(a),o=a-i,s=n._findClosest(i),c=i-s,u=n._buffers.get(c),l=mD(s+o),f=new uF({url:u,context:n.context,curve:n.curve,fadeIn:n.attack,fadeOut:n.release,playbackRate:l}).connect(n.output);f.start(t,0,u.duration/l,r),yR(n._activeSources.get(i))||n._activeSources.set(i,[]),n._activeSources.get(i).push(f),f.onended=function(){if(n._activeSources&&n._activeSources.has(i)){var e=n._activeSources.get(i),t=e.indexOf(f);-1!==t&&e.splice(t,1)}}})),this}},{key:"triggerRelease",value:function(e,t){var n=this;return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach((function(e){var r=new jD(n.context,e).toMidi();if(n._activeSources.has(r)&&n._activeSources.get(r).length){var a=n._activeSources.get(r);t=n.toSeconds(t),a.forEach((function(e){e.stop(t)})),n._activeSources.set(r,[])}})),this}},{key:"releaseAll",value:function(e){var t=this.toSeconds(e);return this._activeSources.forEach((function(e){for(;e.length;){e.shift().stop(t)}})),this}},{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}},{key:"triggerAttackRelease",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=this.toSeconds(n);return this.triggerAttack(e,i,a),yR(t)?(oR(yR(e),"notes must be an array when duration is array"),e.forEach((function(e,n){var a=t[Math.min(n,t.length-1)];r.triggerRelease(e,i+r.toSeconds(a))}))):this.triggerRelease(e,i+this.toSeconds(t)),this}},{key:"add",value:function(e,t,n){if(oR(kR(e)||isFinite(e),"note must be a pitch or midi: ".concat(e)),kR(e)){var r=new jD(this.context,e).toMidi();this._buffers.add(r,t,n)}else this._buffers.add(e,t,n);return this}},{key:"loaded",get:function(){return this._buffers.loaded}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._buffers.dispose(),this._activeSources.forEach((function(e){e.forEach((function(e){return e.dispose()}))})),this._activeSources.clear(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QF.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:aD,onerror:aD,release:.1,urls:{}})}}]),n}(QF);_R([PF(0)],kL.prototype,"attack",void 0),_R([PF(0)],kL.prototype,"release",void 0);var wL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["callback","value"]))).name="ToneEvent",e._state=new ID("stopped"),e._startOffset=0;var r=DR(n.getDefaults(),arguments,["callback","value"]);return e._loop=r.loop,e.callback=r.callback,e.value=r.value,e._loopStart=e.toTicks(r.loopStart),e._loopEnd=e.toTicks(r.loopEnd),e._playbackRate=r.playbackRate,e._probability=r.probability,e._humanize=r.humanize,e.mute=r.mute,e._playbackRate=r.playbackRate,e._state.increasing=!0,e._rescheduleEvents(),e}return Object(C.a)(n,[{key:"_rescheduleEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._state.forEachFrom(t,(function(t){var n;if("started"===t.state){-1!==t.id&&e.context.transport.clear(t.id);var r=t.time+Math.round(e.startOffset/e._playbackRate);if(!0===e._loop||mR(e._loop)&&e._loop>1){n=1/0,mR(e._loop)&&(n=e._loop*e._getLoopDuration());var a=e._state.getAfter(r);null!==a&&(n=Math.min(n,a.time-r)),n!==1/0&&(e._state.setStateAtTime("stopped",r+n+1,{id:-1}),n=new ZD(e.context,n));var i=new ZD(e.context,e._getLoopDuration());t.id=e.context.transport.scheduleRepeat(e._tick.bind(e),i,new ZD(e.context,r),n)}else t.id=e.context.transport.schedule(e._tick.bind(e),new ZD(e.context,r))}}))}},{key:"state",get:function(){return this._state.getValueAtTime(this.context.transport.ticks)}},{key:"startOffset",get:function(){return this._startOffset},set:function(e){this._startOffset=e}},{key:"probability",get:function(){return this._probability},set:function(e){this._probability=e}},{key:"humanize",get:function(){return this._humanize},set:function(e){this._humanize=e}},{key:"start",value:function(e){var t=this.toTicks(e);return"stopped"===this._state.getValueAtTime(t)&&(this._state.add({id:-1,state:"started",time:t}),this._rescheduleEvents(t)),this}},{key:"stop",value:function(e){this.cancel(e);var t=this.toTicks(e);if("started"===this._state.getValueAtTime(t)){this._state.setStateAtTime("stopped",t,{id:-1});var n=this._state.getBefore(t),r=t;null!==n&&(r=n.time),this._rescheduleEvents(r)}return this}},{key:"cancel",value:function(e){var t=this;e=FR(e,-1/0);var n=this.toTicks(e);return this._state.forEachFrom(n,(function(e){t.context.transport.clear(e.id)})),this._state.cancel(n),this}},{key:"_tick",value:function(e){var t=this.context.transport.getTicksAtTime(e);if(!this.mute&&"started"===this._state.getValueAtTime(t)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;gR(this.humanize)||(n=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*n}this.callback(e,this.value)}}},{key:"_getLoopDuration",value:function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}},{key:"loop",get:function(){return this._loop},set:function(e){this._loop=e,this._rescheduleEvents()}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){this._playbackRate=e,this._rescheduleEvents()}},{key:"loopEnd",get:function(){return new ZD(this.context,this._loopEnd).toSeconds()},set:function(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}},{key:"loopStart",get:function(){return new ZD(this.context,this._loopStart).toSeconds()},set:function(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}},{key:"progress",get:function(){if(this._loop){var e=this.context.transport.ticks,t=this._state.get(e);if(null!==t&&"started"===t.state){var n=this._getLoopDuration();return(e-t.time)%n/n}return 0}return 0}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.cancel(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(TD.getDefaults(),{callback:aD,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}}]),n}(TD),xL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["callback","interval"]))).name="Loop";var r=DR(n.getDefaults(),arguments,["callback","interval"]);return e._event=new wL({context:e.context,callback:e._tick.bind(Object(P.a)(e)),loop:!0,loopEnd:r.interval,playbackRate:r.playbackRate,probability:r.probability}),e.callback=r.callback,e.iterations=r.iterations,e}return Object(C.a)(n,[{key:"start",value:function(e){return this._event.start(e),this}},{key:"stop",value:function(e){return this._event.stop(e),this}},{key:"cancel",value:function(e){return this._event.cancel(e),this}},{key:"_tick",value:function(e){this.callback(e)}},{key:"state",get:function(){return this._event.state}},{key:"progress",get:function(){return this._event.progress}},{key:"interval",get:function(){return this._event.loopEnd},set:function(e){this._event.loopEnd=e}},{key:"playbackRate",get:function(){return this._event.playbackRate},set:function(e){this._event.playbackRate=e}},{key:"humanize",get:function(){return this._event.humanize},set:function(e){this._event.humanize=e}},{key:"probability",get:function(){return this._event.probability},set:function(e){this._event.probability=e}},{key:"mute",get:function(){return this._event.mute},set:function(e){this._event.mute=e}},{key:"iterations",get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(e){this._event.loop=e===1/0||e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._event.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(TD.getDefaults(),{interval:"4n",callback:aD,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}}]),n}(TD),jL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["callback","events"]))).name="Part",e._state=new ID("stopped"),e._events=new Set;var r=DR(n.getDefaults(),arguments,["callback","events"]);return e._state.increasing=!0,r.events.forEach((function(t){yR(t)?e.add(t[0],t[1]):e.add(t)})),e}return Object(C.a)(n,[{key:"start",value:function(e,t){var n=this,r=this.toTicks(e);if("started"!==this._state.getValueAtTime(r)){t=FR(t,this._loop?this._loopStart:0),t=this._loop?FR(t,this._loopStart):FR(t,0);var a=this.toTicks(t);this._state.add({id:-1,offset:a,state:"started",time:r}),this._forEach((function(e){n._startNote(e,r,a)}))}return this}},{key:"_startNote",value:function(e,t,n){t-=n,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<n&&(t+=this._getLoopDuration()),e.start(new ZD(this.context,t))):e.startOffset<this._loopStart&&e.startOffset>=n&&(e.loop=!1,e.start(new ZD(this.context,t))):e.startOffset>=n&&e.start(new ZD(this.context,t))}},{key:"startOffset",get:function(){return this._startOffset},set:function(e){var t=this;this._startOffset=e,this._forEach((function(e){e.startOffset+=t._startOffset}))}},{key:"stop",value:function(e){var t=this.toTicks(e);return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._forEach((function(t){t.stop(e)})),this}},{key:"at",value:function(e,t){for(var n=new ED(this.context,e).toTicks(),r=new ZD(this.context,1).toSeconds(),a=this._events.values(),i=a.next();!i.done;){var o=i.value;if(Math.abs(n-o.startOffset)<r)return hR(t)&&(o.value=t),o;i=a.next()}return hR(t)?(this.add(e,t),this.at(e)):null}},{key:"add",value:function(e,t){e instanceof Object&&Reflect.has(e,"time")&&(e=(t=e).time);var n,r=this.toTicks(e);return t instanceof wL?(n=t).callback=this._tick.bind(this):n=new wL({callback:this._tick.bind(this),context:this.context,value:t}),n.startOffset=r,n.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(n),this._restartEvent(n),this}},{key:"_restartEvent",value:function(e){var t=this;this._state.forEach((function(n){"started"===n.state?t._startNote(e,n.time,n.offset):e.stop(new ZD(t.context,n.time))}))}},{key:"remove",value:function(e,t){var n=this;return bR(e)&&e.hasOwnProperty("time")&&(e=(t=e).time),e=this.toTicks(e),this._events.forEach((function(r){r.startOffset===e&&(pR(t)||hR(t)&&r.value===t)&&(n._events.delete(r),r.dispose())})),this}},{key:"clear",value:function(){return this._forEach((function(e){return e.dispose()})),this._events.clear(),this}},{key:"cancel",value:function(e){return this._forEach((function(t){return t.cancel(e)})),this._state.cancel(this.toTicks(e)),this}},{key:"_forEach",value:function(e){return this._events&&this._events.forEach((function(t){t instanceof n?t._forEach(e):e(t)})),this}},{key:"_setAll",value:function(e,t){this._forEach((function(n){n[e]=t}))}},{key:"_tick",value:function(e,t){this.mute||this.callback(e,t)}},{key:"_testLoopBoundries",value:function(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):"stopped"===e.state&&this._restartEvent(e)}},{key:"probability",get:function(){return this._probability},set:function(e){this._probability=e,this._setAll("probability",e)}},{key:"humanize",get:function(){return this._humanize},set:function(e){this._humanize=e,this._setAll("humanize",e)}},{key:"loop",get:function(){return this._loop},set:function(e){var t=this;this._loop=e,this._forEach((function(n){n.loopStart=t.loopStart,n.loopEnd=t.loopEnd,n.loop=e,t._testLoopBoundries(n)}))}},{key:"loopEnd",get:function(){return new ZD(this.context,this._loopEnd).toSeconds()},set:function(e){var t=this;this._loopEnd=this.toTicks(e),this._loop&&this._forEach((function(n){n.loopEnd=e,t._testLoopBoundries(n)}))}},{key:"loopStart",get:function(){return new ZD(this.context,this._loopStart).toSeconds()},set:function(e){var t=this;this._loopStart=this.toTicks(e),this._loop&&this._forEach((function(e){e.loopStart=t.loopStart,t._testLoopBoundries(e)}))}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){this._playbackRate=e,this._setAll("playbackRate",e)}},{key:"length",get:function(){return this._events.size}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.clear(),this}}],[{key:"getDefaults",value:function(){return Object.assign(wL.getDefaults(),{events:[]})}}]),n}(wL),SL=mn.a.mark(RL),_L=mn.a.mark(DL),CL=mn.a.mark(FL),EL=mn.a.mark(zL),NL=mn.a.mark(qL),TL=mn.a.mark(VL),IL=mn.a.mark(BL),AL=mn.a.mark(UL),ML=mn.a.mark(WL),PL=mn.a.mark(GL);function RL(e){var t;return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e.length)){n.next=8;break}return t=LL(t,e),n.next=5,e[t];case 5:t++,n.next=1;break;case 8:case"end":return n.stop()}}),SL)}function DL(e){var t;return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.length-1;case 1:if(!(t>=0)){n.next=8;break}return t=LL(t,e),n.next=5,e[t];case 5:t--,n.next=1;break;case 8:case"end":return n.stop()}}),_L)}function FL(e,t){return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(t(e),"t0",2);case 2:n.next=0;break;case 4:case"end":return n.stop()}}),CL)}function LL(e,t){return GR(e,0,t.length-1)}function zL(e,t){var n;return mn.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t?0:e.length-1;case 1:return n=LL(n,e),r.next=5,e[n];case 5:t?++n>=e.length-1&&(t=!1):--n<=0&&(t=!0),r.next=1;break;case 8:case"end":return r.stop()}}),EL)}function qL(e){var t,n;return mn.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=0,n=0;case 2:if(!(t<e.length)){r.next=10;break}return t=LL(t,e),r.next=6,e[t];case 6:n++,t+=n%2?2:-1,r.next=2;break;case 10:case"end":return r.stop()}}),NL)}function VL(e){var t,n;return mn.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=e.length-1,n=0;case 2:if(!(t>=0)){r.next=10;break}return t=LL(t,e),r.next=6,e[t];case 6:n++,t+=n%2?-2:1,r.next=2;break;case 10:case"end":return r.stop()}}),TL)}function BL(e){var t;return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Math.floor(Math.random()*e.length),n.next=4,e[t];case 4:n.next=0;break;case 6:case"end":return n.stop()}}),IL)}function UL(e){var t,n,r,a;return mn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(t=[],n=0;n<e.length;n++)t.push(n);case 2:if(!(t.length>0)){i.next=9;break}return r=t.splice(Math.floor(t.length*Math.random()),1),a=LL(r[0],e),i.next=7,e[a];case 7:i.next=2;break;case 9:case"end":return i.stop()}}),AL)}function WL(e){var t;return mn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=Math.floor(Math.random()*e.length);case 1:return 0===t?t++:t===e.length-1||Math.random()<.5?t--:t++,n.next=5,e[t];case 5:n.next=1;break;case 7:case"end":return n.stop()}}),ML)}function GL(e){var t,n=arguments;return mn.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=n.length>1&&void 0!==n[1]?n[1]:"up",n.length>2&&void 0!==n[2]?n[2]:0,oR(e.length>0,"The array must have more than one value in it"),r.t0=t,r.next="up"===r.t0?6:"down"===r.t0?7:"upDown"===r.t0?8:"downUp"===r.t0?9:"alternateUp"===r.t0?10:"alternateDown"===r.t0?11:"random"===r.t0?12:"randomOnce"===r.t0?13:"randomWalk"===r.t0?14:15;break;case 6:return r.delegateYield(FL(e,RL),"t1",7);case 7:return r.delegateYield(FL(e,DL),"t2",8);case 8:return r.delegateYield(zL(e,!0),"t3",9);case 9:return r.delegateYield(zL(e,!1),"t4",10);case 10:return r.delegateYield(FL(e,qL),"t5",11);case 11:return r.delegateYield(FL(e,VL),"t6",12);case 12:return r.delegateYield(BL(e),"t7",13);case 13:return r.delegateYield(FL(e,UL),"t8",14);case 14:return r.delegateYield(WL(e),"t9",15);case 15:case"end":return r.stop()}}),PL)}var HL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["callback","values","pattern"]))).name="Pattern";var r=DR(n.getDefaults(),arguments,["callback","values","pattern"]);return e.callback=r.callback,e._values=r.values,e._pattern=GL(r.values,r.pattern),e._type=r.pattern,e}return Object(C.a)(n,[{key:"_tick",value:function(e){var t=this._pattern.next();this._value=t.value,this.callback(e,this._value)}},{key:"values",get:function(){return this._values},set:function(e){this._values=e,this.pattern=this._type}},{key:"value",get:function(){return this._value}},{key:"pattern",get:function(){return this._type},set:function(e){this._type=e,this._pattern=GL(this._values,this._type)}}],[{key:"getDefaults",value:function(){return Object.assign(xL.getDefaults(),{pattern:"up",values:[],callback:aD})}}]),n}(xL),KL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["callback","events","subdivision"]))).name="Sequence",e._part=new jL({callback:e._seqCallback.bind(Object(P.a)(e)),context:e.context}),e._events=[],e._eventsArray=[];var r=DR(n.getDefaults(),arguments,["callback","events","subdivision"]);return e._subdivision=e.toTicks(r.subdivision),e.events=r.events,e.loop=r.loop,e.loopStart=r.loopStart,e.loopEnd=r.loopEnd,e.playbackRate=r.playbackRate,e.probability=r.probability,e.humanize=r.humanize,e.mute=r.mute,e.playbackRate=r.playbackRate,e}return Object(C.a)(n,[{key:"_seqCallback",value:function(e,t){null!==t&&this.callback(e,t)}},{key:"events",get:function(){return this._events},set:function(e){this.clear(),this._eventsArray=e,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}},{key:"start",value:function(e,t){return this._part.start(e,t?this._indexTime(t):t),this}},{key:"stop",value:function(e){return this._part.stop(e),this}},{key:"subdivision",get:function(){return new ZD(this.context,this._subdivision).toSeconds()}},{key:"_createSequence",value:function(e){var t=this;return new Proxy(e,{get:function(e,t){return e[t]},set:function(e,n,r){return OR(n)&&isFinite(parseInt(n,10))&&yR(r)?e[n]=t._createSequence(r):e[n]=r,t._eventsUpdated(),!0}})}},{key:"_eventsUpdated",value:function(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}},{key:"_rescheduleSequence",value:function(e,t,n){var r=this;e.forEach((function(e,a){var i=a*t+n;if(yR(e))r._rescheduleSequence(e,t/e.length,i);else{var o=new ZD(r.context,i,"i").toSeconds();r._part.add(o,e)}}))}},{key:"_indexTime",value:function(e){return new ZD(this.context,e*this._subdivision+this.startOffset).toSeconds()}},{key:"clear",value:function(){return this._part.clear(),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._part.dispose(),this}},{key:"loop",get:function(){return this._part.loop},set:function(e){this._part.loop=e}},{key:"loopStart",get:function(){return this._loopStart},set:function(e){this._loopStart=e,this._part.loopStart=this._indexTime(e)}},{key:"loopEnd",get:function(){return this._loopEnd},set:function(e){this._loopEnd=e,this._part.loopEnd=0===e?this._indexTime(this._eventsArray.length):this._indexTime(e)}},{key:"startOffset",get:function(){return this._part.startOffset},set:function(e){this._part.startOffset=e}},{key:"playbackRate",get:function(){return this._part.playbackRate},set:function(e){this._part.playbackRate=e}},{key:"probability",get:function(){return this._part.probability},set:function(e){this._part.probability=e}},{key:"progress",get:function(){return this._part.progress}},{key:"humanize",get:function(){return this._part.humanize},set:function(e){this._part.humanize=e}},{key:"length",get:function(){return this._part.length}}],[{key:"getDefaults",value:function(){return Object.assign(LR(wL.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}}]),n}(wL),XL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["fade"])))).name="CrossFade",e._panner=e.context.createStereoPanner(),e._split=e.context.createChannelSplitter(2),e._g2a=new zF({context:e.context}),e.a=new FD({context:e.context,gain:0}),e.b=new FD({context:e.context,gain:0}),e.output=new FD({context:e.context}),e._internalChannels=[e.a,e.b];var r=DR(n.getDefaults(),arguments,["fade"]);return e.fade=new qD({context:e.context,units:"normalRange",value:r.fade}),nD(Object(P.a)(e),"fade"),e.context.getConstant(1).connect(e._panner),e._panner.connect(e._split),e._panner.channelCount=1,e._panner.channelCountMode="explicit",RD(e._split,e.a.gain,0),RD(e._split,e.b.gain,1),e.fade.chain(e._g2a,e._panner.pan),e.a.connect(e.output),e.b.connect(e.output),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{fade:.5})}}]),n}(MD),QL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).name="Effect",r._dryWet=new XL({context:r.context}),r.wet=r._dryWet.fade,r.effectSend=new FD({context:r.context}),r.effectReturn=new FD({context:r.context}),r.input=new FD({context:r.context}),r.output=r._dryWet,r.input.fan(r._dryWet.a,r.effectSend),r.effectReturn.connect(r._dryWet.b),r.wet.setValueAtTime(e.wet,0),r._internalChannels=[r.effectReturn,r.effectSend],nD(Object(P.a)(r),"wet"),r}return Object(C.a)(n,[{key:"connectEffect",value:function(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{wet:1})}}]),n}(MD),YL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).name="LFOEffect",r._lfo=new AF({context:r.context,frequency:e.frequency,amplitude:e.depth}),r.depth=r._lfo.amplitude,r.frequency=r._lfo.frequency,r.type=e.type,nD(Object(P.a)(r),["frequency","depth"]),r}return Object(C.a)(n,[{key:"start",value:function(e){return this._lfo.start(e),this}},{key:"stop",value:function(e){return this._lfo.stop(e),this}},{key:"sync",value:function(){return this._lfo.sync(),this}},{key:"unsync",value:function(){return this._lfo.unsync(),this}},{key:"type",get:function(){return this._lfo.type},set:function(e){this._lfo.type=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QL.getDefaults(),{frequency:1,type:"sine",depth:1})}}]),n}(QL),ZL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","baseFrequency","octaves"]))).name="AutoFilter";var r=DR(n.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);return e.filter=new nL(Object.assign(r.filter,{context:e.context})),e.connectEffect(e.filter),e._lfo.connect(e.filter.frequency),e.octaves=r.octaves,e.baseFrequency=r.baseFrequency,e}return Object(C.a)(n,[{key:"baseFrequency",get:function(){return this._lfo.min},set:function(e){this._lfo.min=this.toFrequency(e),this.octaves=this._octaves}},{key:"octaves",get:function(){return this._octaves},set:function(e){this._octaves=e,this._lfo.max=this._lfo.min*Math.pow(2,e)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.filter.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(YL.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}}]),n}(YL),JL=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["pan"])))).name="Panner",e._panner=e.context.createStereoPanner(),e.input=e._panner,e.output=e._panner;var r=DR(n.getDefaults(),arguments,["pan"]);return e.pan=new AD({context:e.context,param:e._panner.pan,value:r.pan,minValue:-1,maxValue:1}),e._panner.channelCount=r.channelCount,e._panner.channelCountMode="explicit",nD(Object(P.a)(e),"pan"),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._panner.disconnect(),this.pan.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{pan:0,channelCount:1})}}]),n}(MD),$L=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency"]))).name="AutoPanner";var r=DR(n.getDefaults(),arguments,["frequency"]);return e._panner=new JL({context:e.context,channelCount:r.channelCount}),e.connectEffect(e._panner),e._lfo.connect(e._panner.pan),e._lfo.min=-1,e._lfo.max=1,e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._panner.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(YL.getDefaults(),{channelCount:1})}}]),n}(YL),ez=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["smoothing"]))).name="Follower";var r=DR(n.getDefaults(),arguments,["smoothing"]);return e._abs=e.input=new LF({context:e.context}),e._lowpass=e.output=new bL({context:e.context,frequency:1/e.toSeconds(r.smoothing),type:"lowpass"}),e._abs.connect(e._lowpass),e._smoothing=r.smoothing,e}return Object(C.a)(n,[{key:"smoothing",get:function(){return this._smoothing},set:function(e){this._smoothing=e,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._abs.dispose(),this._lowpass.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{smoothing:.05})}}]),n}(MD),tz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]))).name="AutoWah";var r=DR(n.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);return e._follower=new ez({context:e.context,smoothing:r.follower}),e._sweepRange=new GF({context:e.context,min:0,max:1,exponent:.5}),e._baseFrequency=e.toFrequency(r.baseFrequency),e._octaves=r.octaves,e._inputBoost=new FD({context:e.context}),e._bandpass=new nL({context:e.context,rolloff:-48,frequency:0,Q:r.Q}),e._peaking=new nL({context:e.context,type:"peaking"}),e._peaking.gain.value=r.gain,e.gain=e._peaking.gain,e.Q=e._bandpass.Q,e.effectSend.chain(e._inputBoost,e._follower,e._sweepRange),e._sweepRange.connect(e._bandpass.frequency),e._sweepRange.connect(e._peaking.frequency),e.effectSend.chain(e._bandpass,e._peaking,e.effectReturn),e._setSweepRange(),e.sensitivity=r.sensitivity,nD(Object(P.a)(e),["gain","Q"]),e}return Object(C.a)(n,[{key:"octaves",get:function(){return this._octaves},set:function(e){this._octaves=e,this._setSweepRange()}},{key:"follower",get:function(){return this._follower.smoothing},set:function(e){this._follower.smoothing=e}},{key:"baseFrequency",get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=this.toFrequency(e),this._setSweepRange()}},{key:"sensitivity",get:function(){return vD(1/this._inputBoost.gain.value)},set:function(e){this._inputBoost.gain.value=1/hD(e)}},{key:"_setSweepRange",value:function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QL.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}}]),n}(QL),nz="bit-crusher";pL(nz,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");var rz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["bits"]))).name="BitCrusher";var r=DR(n.getDefaults(),arguments,["bits"]);return e._bitCrusherWorklet=new az({context:e.context,bits:r.bits}),e.connectEffect(e._bitCrusherWorklet),e.bits=e._bitCrusherWorklet.bits,e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._bitCrusherWorklet.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QL.getDefaults(),{bits:4})}}]),n}(QL),az=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="BitCrusherWorklet";var r=DR(n.getDefaults(),arguments);return e.input=new FD({context:e.context}),e.output=new FD({context:e.context}),e.bits=new AD({context:e.context,value:r.bits,units:"positive",minValue:1,maxValue:16,param:e._dummyParam,swappable:!0}),e}return Object(C.a)(n,[{key:"_audioWorkletName",value:function(){return nz}},{key:"onReady",value:function(e){PD(this.input,e,this.output);var t=e.parameters.get("bits");this.bits.setParam(t)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(hL.getDefaults(),{bits:12})}}]),n}(hL),iz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["order"]))).name="Chebyshev";var r=DR(n.getDefaults(),arguments,["order"]);return e._shaper=new yF({context:e.context,length:4096}),e._order=r.order,e.connectEffect(e._shaper),e.order=r.order,e.oversample=r.oversample,e}return Object(C.a)(n,[{key:"_getCoefficient",value:function(e,t,n){return n.has(t)||(0===t?n.set(t,0):1===t?n.set(t,e):n.set(t,2*e*this._getCoefficient(e,t-1,n)-this._getCoefficient(e,t-2,n))),n.get(t)}},{key:"order",get:function(){return this._order},set:function(e){var t=this;this._order=e,this._shaper.setMap((function(n){return t._getCoefficient(n,e,new Map)}))}},{key:"oversample",get:function(){return this._shaper.oversample},set:function(e){this._shaper.oversample=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._shaper.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QL.getDefaults(),{order:1,oversample:"none"})}}]),n}(QL),oz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["channels"]))).name="Split";var r=DR(n.getDefaults(),arguments,["channels"]);return e._splitter=e.input=e.output=e.context.createChannelSplitter(r.channels),e._internalChannels=[e._splitter],e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._splitter.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{channels:2})}}]),n}(MD),sz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["channels"]))).name="Merge";var r=DR(n.getDefaults(),arguments,["channels"]);return e._merger=e.output=e.input=e.context.createChannelMerger(r.channels),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._merger.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{channels:2})}}]),n}(MD),cz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).name="StereoEffect",r.input=new FD({context:r.context}),r.input.channelCount=2,r.input.channelCountMode="explicit",r._dryWet=r.output=new XL({context:r.context,fade:e.wet}),r.wet=r._dryWet.fade,r._split=new oz({context:r.context,channels:2}),r._merge=new sz({context:r.context,channels:2}),r.input.connect(r._split),r.input.connect(r._dryWet.a),r._merge.connect(r._dryWet.b),nD(Object(P.a)(r),["wet"]),r}return Object(C.a)(n,[{key:"connectEffectLeft",value:function(){var e;this._split.connect(arguments.length<=0?void 0:arguments[0],0,0),PD.apply(void 0,arguments),RD((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e],this._merge,0,0)}},{key:"connectEffectRight",value:function(){var e;this._split.connect(arguments.length<=0?void 0:arguments[0],1,0),PD.apply(void 0,arguments),RD((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e],this._merge,0,1)}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{wet:1})}}]),n}(MD),uz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).feedback=new qD({context:r.context,value:e.feedback,units:"normalRange"}),r._feedbackL=new FD({context:r.context}),r._feedbackR=new FD({context:r.context}),r._feedbackSplit=new oz({context:r.context,channels:2}),r._feedbackMerge=new sz({context:r.context,channels:2}),r._merge.connect(r._feedbackSplit),r._feedbackMerge.connect(r._split),r._feedbackSplit.connect(r._feedbackL,0,0),r._feedbackL.connect(r._feedbackMerge,0,0),r._feedbackSplit.connect(r._feedbackR,1,0),r._feedbackR.connect(r._feedbackMerge,0,1),r.feedback.fan(r._feedbackL.gain,r._feedbackR.gain),nD(Object(P.a)(r),["feedback"]),r}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cz.getDefaults(),{feedback:.5})}}]),n}(cz),lz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","delayTime","depth"]))).name="Chorus";var r=DR(n.getDefaults(),arguments,["frequency","delayTime","depth"]);return e._depth=r.depth,e._delayTime=r.delayTime/1e3,e._lfoL=new AF({context:e.context,frequency:r.frequency,min:0,max:1}),e._lfoR=new AF({context:e.context,frequency:r.frequency,min:0,max:1,phase:180}),e._delayNodeL=new HD({context:e.context}),e._delayNodeR=new HD({context:e.context}),e.frequency=e._lfoL.frequency,nD(Object(P.a)(e),["frequency"]),e._lfoL.frequency.connect(e._lfoR.frequency),e.connectEffectLeft(e._delayNodeL),e.connectEffectRight(e._delayNodeR),e._lfoL.connect(e._delayNodeL.delayTime),e._lfoR.connect(e._delayNodeR.delayTime),e.depth=e._depth,e.type=r.type,e.spread=r.spread,e}return Object(C.a)(n,[{key:"depth",get:function(){return this._depth},set:function(e){this._depth=e;var t=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-t,0),this._lfoL.max=this._delayTime+t,this._lfoR.min=Math.max(this._delayTime-t,0),this._lfoR.max=this._delayTime+t}},{key:"delayTime",get:function(){return 1e3*this._delayTime},set:function(e){this._delayTime=e/1e3,this.depth=this._depth}},{key:"type",get:function(){return this._lfoL.type},set:function(e){this._lfoL.type=e,this._lfoR.type=e}},{key:"spread",get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}},{key:"start",value:function(e){return this._lfoL.start(e),this._lfoR.start(e),this}},{key:"stop",value:function(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}},{key:"sync",value:function(){return this._lfoL.sync(),this._lfoR.sync(),this}},{key:"unsync",value:function(){return this._lfoL.unsync(),this._lfoR.unsync(),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(uz.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}}]),n}(uz),fz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["distortion"]))).name="Distortion";var r=DR(n.getDefaults(),arguments,["distortion"]);return e._shaper=new yF({context:e.context,length:4096}),e._distortion=r.distortion,e.connectEffect(e._shaper),e.distortion=r.distortion,e.oversample=r.oversample,e}return Object(C.a)(n,[{key:"distortion",get:function(){return this._distortion},set:function(e){this._distortion=e;var t=100*e,n=Math.PI/180;this._shaper.setMap((function(e){return Math.abs(e)<.001?0:(3+t)*e*20*n/(Math.PI+t*Math.abs(e))}))}},{key:"oversample",get:function(){return this._shaper.oversample},set:function(e){this._shaper.oversample=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._shaper.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QL.getDefaults(),{distortion:.4,oversample:"none"})}}]),n}(QL),dz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).name="FeedbackEffect",r._feedbackGain=new FD({context:r.context,gain:e.feedback,units:"normalRange"}),r.feedback=r._feedbackGain.gain,nD(Object(P.a)(r),"feedback"),r.effectReturn.chain(r._feedbackGain,r.effectSend),r}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._feedbackGain.dispose(),this.feedback.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QL.getDefaults(),{feedback:.125})}}]),n}(QL),pz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["delayTime","feedback"]))).name="FeedbackDelay";var r=DR(n.getDefaults(),arguments,["delayTime","feedback"]);return e._delayNode=new HD({context:e.context,delayTime:r.delayTime,maxDelay:r.maxDelay}),e.delayTime=e._delayNode.delayTime,e.connectEffect(e._delayNode),nD(Object(P.a)(e),"delayTime"),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._delayNode.dispose(),this.delayTime.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(dz.getDefaults(),{delayTime:.25,maxDelay:1})}}]),n}(dz),hz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;Object(_.a)(this,n),(r=t.call(this,e)).name="PhaseShiftAllpass",r.input=new FD({context:r.context}),r.output=new FD({context:r.context}),r.offset90=new FD({context:r.context});return r._bank0=r._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),r._bank1=r._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),r._oneSampleDelay=r.context.createIIRFilter([0,1],[1,0]),PD.apply(void 0,[r.input].concat(Object(I.a)(r._bank0),[r._oneSampleDelay,r.output])),PD.apply(void 0,[r.input].concat(Object(I.a)(r._bank1),[r.offset90])),r}return Object(C.a)(n,[{key:"_createAllPassFilterBank",value:function(e){var t=this;return e.map((function(e){var n=[[e*e,0,-1],[1,0,-e*e]];return t.context.createIIRFilter(n[0],n[1])}))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach((function(e){return e.disconnect()})),this._bank1.forEach((function(e){return e.disconnect()})),this._oneSampleDelay.disconnect(),this}}]),n}(MD),vz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency"]))).name="FrequencyShifter";var r=DR(n.getDefaults(),arguments,["frequency"]);e.frequency=new qD({context:e.context,units:"frequency",value:r.frequency,minValue:-e.context.sampleRate/2,maxValue:e.context.sampleRate/2}),e._sine=new mF({context:e.context,type:"sine"}),e._cosine=new bF({context:e.context,phase:-90,type:"sine"}),e._sineMultiply=new kF({context:e.context}),e._cosineMultiply=new kF({context:e.context}),e._negate=new qF({context:e.context}),e._add=new NF({context:e.context}),e._phaseShifter=new hz({context:e.context}),e.effectSend.connect(e._phaseShifter),e.frequency.fan(e._sine.frequency,e._cosine.frequency),e._phaseShifter.offset90.connect(e._cosineMultiply),e._cosine.connect(e._cosineMultiply.factor),e._phaseShifter.connect(e._sineMultiply),e._sine.connect(e._sineMultiply.factor),e._sineMultiply.connect(e._negate),e._cosineMultiply.connect(e._add),e._negate.connect(e._add.addend),e._add.connect(e.effectReturn);var a=e.immediate();return e._sine.start(a),e._cosine.start(a),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QL.getDefaults(),{frequency:0})}}]),n}(QL),mz=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],bz=[225,556,441,341],gz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["roomSize","dampening"]))).name="Freeverb",e._combFilters=[],e._allpassFiltersL=[],e._allpassFiltersR=[];var r=DR(n.getDefaults(),arguments,["roomSize","dampening"]);return e.roomSize=new qD({context:e.context,value:r.roomSize,units:"normalRange"}),e._allpassFiltersL=bz.map((function(t){var n=e.context.createBiquadFilter();return n.type="allpass",n.frequency.value=t,n})),e._allpassFiltersR=bz.map((function(t){var n=e.context.createBiquadFilter();return n.type="allpass",n.frequency.value=t,n})),e._combFilters=mz.map((function(t,n){var a,i,o=new gL({context:e.context,dampening:r.dampening,delayTime:t});n<mz.length/2?(a=e).connectEffectLeft.apply(a,[o].concat(Object(I.a)(e._allpassFiltersL))):(i=e).connectEffectRight.apply(i,[o].concat(Object(I.a)(e._allpassFiltersR)));return e.roomSize.connect(o.resonance),o})),nD(Object(P.a)(e),["roomSize"]),e}return Object(C.a)(n,[{key:"dampening",get:function(){return this._combFilters[0].dampening},set:function(e){this._combFilters.forEach((function(t){return t.dampening=e}))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._allpassFiltersL.forEach((function(e){return e.disconnect()})),this._allpassFiltersR.forEach((function(e){return e.disconnect()})),this._combFilters.forEach((function(e){return e.dispose()})),this.roomSize.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cz.getDefaults(),{roomSize:.7,dampening:3e3})}}]),n}(cz),yz=[.06748,.06404,.08212,.09004],Oz=[.773,.802,.753,.733],kz=[347,113,37],wz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["roomSize"]))).name="JCReverb",e._allpassFilters=[],e._feedbackCombFilters=[];var r=DR(n.getDefaults(),arguments,["roomSize"]);return e.roomSize=new qD({context:e.context,value:r.roomSize,units:"normalRange"}),e._scaleRoomSize=new TF({context:e.context,min:-.733,max:.197}),e._allpassFilters=kz.map((function(t){var n=e.context.createBiquadFilter();return n.type="allpass",n.frequency.value=t,n})),e._feedbackCombFilters=yz.map((function(t,n){var r,a,i=new mL({context:e.context,delayTime:t});(e._scaleRoomSize.connect(i.resonance),i.resonance.value=Oz[n],n<yz.length/2)?(r=e).connectEffectLeft.apply(r,Object(I.a)(e._allpassFilters).concat([i])):(a=e).connectEffectRight.apply(a,Object(I.a)(e._allpassFilters).concat([i]));return i})),e.roomSize.connect(e._scaleRoomSize),nD(Object(P.a)(e),["roomSize"]),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._allpassFilters.forEach((function(e){return e.disconnect()})),this._feedbackCombFilters.forEach((function(e){return e.dispose()})),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cz.getDefaults(),{roomSize:.5})}}]),n}(cz),xz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e))._feedbackL.disconnect(),r._feedbackL.connect(r._feedbackMerge,0,1),r._feedbackR.disconnect(),r._feedbackR.connect(r._feedbackMerge,0,0),nD(Object(P.a)(r),["feedback"]),r}return n}(uz),jz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["delayTime","feedback"]))).name="PingPongDelay";var r=DR(n.getDefaults(),arguments,["delayTime","feedback"]);return e._leftDelay=new HD({context:e.context,maxDelay:r.maxDelay}),e._rightDelay=new HD({context:e.context,maxDelay:r.maxDelay}),e._rightPreDelay=new HD({context:e.context,maxDelay:r.maxDelay}),e.delayTime=new qD({context:e.context,units:"time",value:r.delayTime}),e.connectEffectLeft(e._leftDelay),e.connectEffectRight(e._rightPreDelay,e._rightDelay),e.delayTime.fan(e._leftDelay.delayTime,e._rightDelay.delayTime,e._rightPreDelay.delayTime),e._feedbackL.disconnect(),e._feedbackL.connect(e._rightDelay),nD(Object(P.a)(e),["delayTime"]),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(xz.getDefaults(),{delayTime:.25,maxDelay:1})}}]),n}(xz),Sz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["pitch"]))).name="PitchShift";var r=DR(n.getDefaults(),arguments,["pitch"]);e._frequency=new qD({context:e.context}),e._delayA=new HD({maxDelay:1,context:e.context}),e._lfoA=new AF({context:e.context,min:0,max:.1,type:"sawtooth"}).connect(e._delayA.delayTime),e._delayB=new HD({maxDelay:1,context:e.context}),e._lfoB=new AF({context:e.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(e._delayB.delayTime),e._crossFade=new XL({context:e.context}),e._crossFadeLFO=new AF({context:e.context,min:0,max:1,type:"triangle",phase:90}).connect(e._crossFade.fade),e._feedbackDelay=new HD({delayTime:r.delayTime,context:e.context}),e.delayTime=e._feedbackDelay.delayTime,nD(Object(P.a)(e),"delayTime"),e._pitch=r.pitch,e._windowSize=r.windowSize,e._delayA.connect(e._crossFade.a),e._delayB.connect(e._crossFade.b),e._frequency.fan(e._lfoA.frequency,e._lfoB.frequency,e._crossFadeLFO.frequency),e.effectSend.fan(e._delayA,e._delayB),e._crossFade.chain(e._feedbackDelay,e.effectReturn);var a=e.now();return e._lfoA.start(a),e._lfoB.start(a),e._crossFadeLFO.start(a),e.windowSize=e._windowSize,e}return Object(C.a)(n,[{key:"pitch",get:function(){return this._pitch},set:function(e){this._pitch=e;var t=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,t=mD(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,t=mD(e)-1),this._frequency.value=t*(1.2/this._windowSize)}},{key:"windowSize",get:function(){return this._windowSize},set:function(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(dz.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}}]),n}(dz),_z=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e,r,a;Object(_.a)(this,n),(a=t.call(this,DR(n.getDefaults(),arguments,["frequency","octaves","baseFrequency"]))).name="Phaser";var i=DR(n.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);return a._lfoL=new AF({context:a.context,frequency:i.frequency,min:0,max:1}),a._lfoR=new AF({context:a.context,frequency:i.frequency,min:0,max:1,phase:180}),a._baseFrequency=a.toFrequency(i.baseFrequency),a._octaves=i.octaves,a.Q=new qD({context:a.context,value:i.Q,units:"positive"}),a._filtersL=a._makeFilters(i.stages,a._lfoL),a._filtersR=a._makeFilters(i.stages,a._lfoR),a.frequency=a._lfoL.frequency,a.frequency.value=i.frequency,(e=a).connectEffectLeft.apply(e,Object(I.a)(a._filtersL)),(r=a).connectEffectRight.apply(r,Object(I.a)(a._filtersR)),a._lfoL.frequency.connect(a._lfoR.frequency),a.baseFrequency=i.baseFrequency,a.octaves=i.octaves,a._lfoL.start(),a._lfoR.start(),nD(Object(P.a)(a),["frequency","Q"]),a}return Object(C.a)(n,[{key:"_makeFilters",value:function(e,t){for(var n=[],r=0;r<e;r++){var a=this.context.createBiquadFilter();a.type="allpass",this.Q.connect(a.Q),t.connect(a.frequency),n.push(a)}return n}},{key:"octaves",get:function(){return this._octaves},set:function(e){this._octaves=e;var t=this._baseFrequency*Math.pow(2,e);this._lfoL.max=t,this._lfoR.max=t}},{key:"baseFrequency",get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach((function(e){return e.disconnect()})),this._filtersR.forEach((function(e){return e.disconnect()})),this.frequency.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cz.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}}]),n}(cz),Cz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["decay"]))).name="Reverb",e._convolver=e.context.createConvolver(),e.ready=Promise.resolve();var r=DR(n.getDefaults(),arguments,["decay"]);return e._decay=r.decay,e._preDelay=r.preDelay,e.generate(),e.connectEffect(e._convolver),e}return Object(C.a)(n,[{key:"decay",get:function(){return this._decay},set:function(e){sR(e=this.toSeconds(e),.001),this._decay=e,this.generate()}},{key:"preDelay",get:function(){return this._preDelay},set:function(e){sR(e=this.toSeconds(e),0),this._preDelay=e,this.generate()}},{key:"generate",value:function(){return CR(this,void 0,void 0,mn.a.mark((function e(){var t,n,r,a,i,o,s;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ready,n=new oD(2,this._decay+this._preDelay,this.context.sampleRate),r=new lF({context:n}),a=new lF({context:n}),i=new sz({context:n}),r.connect(i,0,0),a.connect(i,0,1),o=new FD({context:n}).toDestination(),i.connect(o),r.start(0),a.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay),s=n.render(),this.ready=s.then(aD),e.next=18,t;case 18:return e.next=20,s;case 20:return this._convolver.buffer=e.sent.get(),e.abrupt("return",this);case 22:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._convolver.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QL.getDefaults(),{decay:1.5,preDelay:.01})}}]),n}(QL),Ez=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="MidSideSplit",e._split=e.input=new oz({channels:2,context:e.context}),e._midAdd=new NF({context:e.context}),e.mid=new kF({context:e.context,value:Math.SQRT1_2}),e._sideSubtract=new VF({context:e.context}),e.side=new kF({context:e.context,value:Math.SQRT1_2}),e._split.connect(e._midAdd,0),e._split.connect(e._midAdd.addend,1),e._split.connect(e._sideSubtract,0),e._split.connect(e._sideSubtract.subtrahend,1),e._midAdd.connect(e.mid),e._sideSubtract.connect(e.side),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}]),n}(MD),Nz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="MidSideMerge",e.mid=new FD({context:e.context}),e.side=new FD({context:e.context}),e._left=new NF({context:e.context}),e._leftMult=new kF({context:e.context,value:Math.SQRT1_2}),e._right=new VF({context:e.context}),e._rightMult=new kF({context:e.context,value:Math.SQRT1_2}),e._merge=e.output=new sz({context:e.context}),e.mid.fan(e._left),e.side.connect(e._left.addend),e.mid.connect(e._right),e.side.connect(e._right.subtrahend),e._left.connect(e._leftMult),e._right.connect(e._rightMult),e._leftMult.connect(e._merge,0,0),e._rightMult.connect(e._merge,0,1),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}]),n}(MD),Tz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).name="MidSideEffect",r._midSideMerge=new Nz({context:r.context}),r._midSideSplit=new Ez({context:r.context}),r._midSend=r._midSideSplit.mid,r._sideSend=r._midSideSplit.side,r._midReturn=r._midSideMerge.mid,r._sideReturn=r._midSideMerge.side,r.effectSend.connect(r._midSideSplit),r._midSideMerge.connect(r.effectReturn),r}return Object(C.a)(n,[{key:"connectEffectMid",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._midSend).chain.apply(e,n.concat([this._midReturn]))}},{key:"connectEffectSide",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._sideSend).chain.apply(e,n.concat([this._sideReturn]))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}]),n}(QL),Iz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["width"]))).name="StereoWidener";var r=DR(n.getDefaults(),arguments,["width"]);return e.width=new qD({context:e.context,value:r.width,units:"normalRange"}),nD(Object(P.a)(e),["width"]),e._twoTimesWidthMid=new kF({context:e.context,value:2}),e._twoTimesWidthSide=new kF({context:e.context,value:2}),e._midMult=new kF({context:e.context}),e._twoTimesWidthMid.connect(e._midMult.factor),e.connectEffectMid(e._midMult),e._oneMinusWidth=new VF({context:e.context}),e._oneMinusWidth.connect(e._twoTimesWidthMid),RD(e.context.getConstant(1),e._oneMinusWidth),e.width.connect(e._oneMinusWidth.subtrahend),e._sideMult=new kF({context:e.context}),e.width.connect(e._twoTimesWidthSide),e._twoTimesWidthSide.connect(e._sideMult.factor),e.connectEffectSide(e._sideMult),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Tz.getDefaults(),{width:.5})}}]),n}(Tz),Az=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","depth"]))).name="Tremolo";var r=DR(n.getDefaults(),arguments,["frequency","depth"]);return e._lfoL=new AF({context:e.context,type:r.type,min:1,max:0}),e._lfoR=new AF({context:e.context,type:r.type,min:1,max:0}),e._amplitudeL=new FD({context:e.context}),e._amplitudeR=new FD({context:e.context}),e.frequency=new qD({context:e.context,value:r.frequency,units:"frequency"}),e.depth=new qD({context:e.context,value:r.depth,units:"normalRange"}),nD(Object(P.a)(e),["frequency","depth"]),e.connectEffectLeft(e._amplitudeL),e.connectEffectRight(e._amplitudeR),e._lfoL.connect(e._amplitudeL.gain),e._lfoR.connect(e._amplitudeR.gain),e.frequency.fan(e._lfoL.frequency,e._lfoR.frequency),e.depth.fan(e._lfoR.amplitude,e._lfoL.amplitude),e.spread=r.spread,e}return Object(C.a)(n,[{key:"start",value:function(e){return this._lfoL.start(e),this._lfoR.start(e),this}},{key:"stop",value:function(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}},{key:"sync",value:function(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}},{key:"unsync",value:function(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}},{key:"type",get:function(){return this._lfoL.type},set:function(e){this._lfoL.type=e,this._lfoR.type=e}},{key:"spread",get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(cz.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}}]),n}(cz),Mz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["frequency","depth"]))).name="Vibrato";var r=DR(n.getDefaults(),arguments,["frequency","depth"]);return e._delayNode=new HD({context:e.context,delayTime:0,maxDelay:r.maxDelay}),e._lfo=new AF({context:e.context,type:r.type,min:0,max:r.maxDelay,frequency:r.frequency,phase:-90}).start().connect(e._delayNode.delayTime),e.frequency=e._lfo.frequency,e.depth=e._lfo.amplitude,e.depth.value=r.depth,nD(Object(P.a)(e),["frequency","depth"]),e.effectSend.chain(e._delayNode,e.effectReturn),e}return Object(C.a)(n,[{key:"type",get:function(){return this._lfo.type},set:function(e){this._lfo.type=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(QL.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}}]),n}(QL),Pz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["type","size"]))).name="Analyser",e._analysers=[],e._buffers=[];var r=DR(n.getDefaults(),arguments,["type","size"]);e.input=e.output=e._gain=new FD({context:e.context}),e._split=new oz({context:e.context,channels:r.channels}),e.input.connect(e._split),sR(r.channels,1);for(var a=0;a<r.channels;a++)e._analysers[a]=e.context.createAnalyser(),e._split.connect(e._analysers[a],a,0);return e.size=r.size,e.type=r.type,e}return Object(C.a)(n,[{key:"getValue",value:function(){var e=this;return this._analysers.forEach((function(t,n){var r=e._buffers[n];"fft"===e._type?t.getFloatFrequencyData(r):"waveform"===e._type&&t.getFloatTimeDomainData(r)})),1===this.channels?this._buffers[0]:this._buffers}},{key:"size",get:function(){return this._analysers[0].frequencyBinCount},set:function(e){var t=this;this._analysers.forEach((function(n,r){n.fftSize=2*e,t._buffers[r]=new Float32Array(e)}))}},{key:"channels",get:function(){return this._analysers.length}},{key:"type",get:function(){return this._type},set:function(e){oR("waveform"===e||"fft"===e,"Analyser: invalid type: ".concat(e)),this._type=e}},{key:"smoothing",get:function(){return this._analysers[0].smoothingTimeConstant},set:function(e){this._analysers.forEach((function(t){return t.smoothingTimeConstant=e}))}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._analysers.forEach((function(e){return e.disconnect()})),this._split.dispose(),this._gain.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}}]),n}(MD),Rz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="MeterBase",e.input=e.output=e._analyser=new Pz({context:e.context,size:256,type:"waveform"}),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._analyser.dispose(),this}}]),n}(MD),Dz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["smoothing"]))).name="Meter",e._rms=0;var r=DR(n.getDefaults(),arguments,["smoothing"]);return e.input=e.output=e._analyser=new Pz({context:e.context,size:256,type:"waveform",channels:r.channels}),e.smoothing=r.smoothing,e.normalRange=r.normalRange,e}return Object(C.a)(n,[{key:"getLevel",value:function(){return dR("'getLevel' has been changed to 'getValue'"),this.getValue()}},{key:"getValue",value:function(){var e=this,t=this._analyser.getValue(),n=(1===this.channels?[t]:t).map((function(t){var n=t.reduce((function(e,t){return e+t*t}),0),r=Math.sqrt(n/t.length);return e._rms=Math.max(r,e._rms*e.smoothing),e.normalRange?e._rms:vD(e._rms)}));return 1===this.channels?n[0]:n}},{key:"channels",get:function(){return this._analyser.channels}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._analyser.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Rz.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}}]),n}(Rz),Fz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["size"]))).name="FFT";var r=DR(n.getDefaults(),arguments,["size"]);return e.normalRange=r.normalRange,e._analyser.type="fft",e.size=r.size,e}return Object(C.a)(n,[{key:"getValue",value:function(){var e=this;return this._analyser.getValue().map((function(t){return e.normalRange?hD(t):t}))}},{key:"size",get:function(){return this._analyser.size},set:function(e){this._analyser.size=e}},{key:"smoothing",get:function(){return this._analyser.smoothing},set:function(e){this._analyser.smoothing=e}},{key:"getFrequencyOfIndex",value:function(e){return oR(0<=e&&e<this.size,"index must be greater than or equal to 0 and less than ".concat(this.size)),e*this.context.sampleRate/(2*this.size)}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}}]),n}(Rz),Lz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="DCMeter",e._analyser.type="waveform",e._analyser.size=256,e}return Object(C.a)(n,[{key:"getValue",value:function(){return this._analyser.getValue()[0]}}]),n}(Rz),zz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["size"]))).name="Waveform";var r=DR(n.getDefaults(),arguments,["size"]);return e._analyser.type="waveform",e.size=r.size,e}return Object(C.a)(n,[{key:"getValue",value:function(){return this._analyser.getValue()}},{key:"size",get:function(){return this._analyser.size},set:function(e){this._analyser.size=e}}],[{key:"getDefaults",value:function(){return Object.assign(Rz.getDefaults(),{size:1024})}}]),n}(Rz),qz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["solo"]))).name="Solo";var r=DR(n.getDefaults(),arguments,["solo"]);return e.input=e.output=new FD({context:e.context}),n._allSolos.has(e.context)||n._allSolos.set(e.context,new Set),n._allSolos.get(e.context).add(Object(P.a)(e)),e.solo=r.solo,e}return Object(C.a)(n,[{key:"solo",get:function(){return this._isSoloed()},set:function(e){e?this._addSolo():this._removeSolo(),n._allSolos.get(this.context).forEach((function(e){return e._updateSolo()}))}},{key:"muted",get:function(){return 0===this.input.gain.value}},{key:"_addSolo",value:function(){n._soloed.has(this.context)||n._soloed.set(this.context,new Set),n._soloed.get(this.context).add(this)}},{key:"_removeSolo",value:function(){n._soloed.has(this.context)&&n._soloed.get(this.context).delete(this)}},{key:"_isSoloed",value:function(){return n._soloed.has(this.context)&&n._soloed.get(this.context).has(this)}},{key:"_noSolos",value:function(){return!n._soloed.has(this.context)||n._soloed.has(this.context)&&0===n._soloed.get(this.context).size}},{key:"_updateSolo",value:function(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),n._allSolos.get(this.context).delete(this),this._removeSolo(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{solo:!1})}}]),n}(MD);qz._allSolos=new Map,qz._soloed=new Map;var Vz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["pan","volume"]))).name="PanVol";var r=DR(n.getDefaults(),arguments,["pan","volume"]);return e._panner=e.input=new JL({context:e.context,pan:r.pan,channelCount:r.channelCount}),e.pan=e._panner.pan,e._volume=e.output=new nF({context:e.context,volume:r.volume}),e.volume=e._volume.volume,e._panner.connect(e._volume),e.mute=r.mute,nD(Object(P.a)(e),["pan","volume"]),e}return Object(C.a)(n,[{key:"mute",get:function(){return this._volume.mute},set:function(e){this._volume.mute=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}}]),n}(MD),Bz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["volume","pan"]))).name="Channel";var r=DR(n.getDefaults(),arguments,["volume","pan"]);return e._solo=e.input=new qz({solo:r.solo,context:e.context}),e._panVol=e.output=new Vz({context:e.context,pan:r.pan,volume:r.volume,mute:r.mute,channelCount:r.channelCount}),e.pan=e._panVol.pan,e.volume=e._panVol.volume,e._solo.connect(e._panVol),nD(Object(P.a)(e),["pan","volume"]),e}return Object(C.a)(n,[{key:"solo",get:function(){return this._solo.solo},set:function(e){this._solo.solo=e}},{key:"muted",get:function(){return this._solo.muted||this.mute}},{key:"mute",get:function(){return this._panVol.mute},set:function(e){this._panVol.mute=e}},{key:"_getBus",value:function(e){return n.buses.has(e)||n.buses.set(e,new FD({context:this.context})),n.buses.get(e)}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._getBus(e),r=new FD({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(n),r}},{key:"receive",value:function(e){return this._getBus(e).connect(this),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}}]),n}(MD);Bz.buses=new Map;var Uz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="Mono",e.input=new FD({context:e.context}),e._merge=e.output=new sz({channels:2,context:e.context}),e.input.connect(e._merge,0,0),e.input.connect(e._merge,0,1),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._merge.dispose(),this.input.dispose(),this}}]),n}(MD),Wz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["lowFrequency","highFrequency"]))).name="MultibandSplit",e.input=new FD({context:e.context}),e.output=void 0,e.low=new nL({context:e.context,frequency:0,type:"lowpass"}),e._lowMidFilter=new nL({context:e.context,frequency:0,type:"highpass"}),e.mid=new nL({context:e.context,frequency:0,type:"lowpass"}),e.high=new nL({context:e.context,frequency:0,type:"highpass"}),e._internalChannels=[e.low,e.mid,e.high];var r=DR(n.getDefaults(),arguments,["lowFrequency","highFrequency"]);return e.lowFrequency=new qD({context:e.context,units:"frequency",value:r.lowFrequency}),e.highFrequency=new qD({context:e.context,units:"frequency",value:r.highFrequency}),e.Q=new qD({context:e.context,units:"positive",value:r.Q}),e.input.fan(e.low,e.high),e.input.chain(e._lowMidFilter,e.mid),e.lowFrequency.fan(e.low.frequency,e._lowMidFilter.frequency),e.highFrequency.fan(e.mid.frequency,e.high.frequency),e.Q.connect(e.low.Q),e.Q.connect(e._lowMidFilter.Q),e.Q.connect(e.mid.Q),e.Q.connect(e.high.Q),nD(Object(P.a)(e),["high","mid","low","highFrequency","lowFrequency"]),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),rD(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}}]),n}(MD),Gz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).name="Listener",e.positionX=new AD({context:e.context,param:e.context.rawContext.listener.positionX}),e.positionY=new AD({context:e.context,param:e.context.rawContext.listener.positionY}),e.positionZ=new AD({context:e.context,param:e.context.rawContext.listener.positionZ}),e.forwardX=new AD({context:e.context,param:e.context.rawContext.listener.forwardX}),e.forwardY=new AD({context:e.context,param:e.context.rawContext.listener.forwardY}),e.forwardZ=new AD({context:e.context,param:e.context.rawContext.listener.forwardZ}),e.upX=new AD({context:e.context,param:e.context.rawContext.listener.upX}),e.upY=new AD({context:e.context,param:e.context.rawContext.listener.upY}),e.upZ=new AD({context:e.context,param:e.context.rawContext.listener.upZ}),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}}]),n}(MD);XR((function(e){e.listener=new Gz({context:e})})),YR((function(e){e.listener.dispose()}));var Hz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["positionX","positionY","positionZ"]))).name="Panner3D";var r=DR(n.getDefaults(),arguments,["positionX","positionY","positionZ"]);return e._panner=e.input=e.output=e.context.createPanner(),e.panningModel=r.panningModel,e.maxDistance=r.maxDistance,e.distanceModel=r.distanceModel,e.coneOuterGain=r.coneOuterGain,e.coneOuterAngle=r.coneOuterAngle,e.coneInnerAngle=r.coneInnerAngle,e.refDistance=r.refDistance,e.rolloffFactor=r.rolloffFactor,e.positionX=new AD({context:e.context,param:e._panner.positionX,value:r.positionX}),e.positionY=new AD({context:e.context,param:e._panner.positionY,value:r.positionY}),e.positionZ=new AD({context:e.context,param:e._panner.positionZ,value:r.positionZ}),e.orientationX=new AD({context:e.context,param:e._panner.orientationX,value:r.orientationX}),e.orientationY=new AD({context:e.context,param:e._panner.orientationY,value:r.orientationY}),e.orientationZ=new AD({context:e.context,param:e._panner.orientationZ,value:r.orientationZ}),e}return Object(C.a)(n,[{key:"setPosition",value:function(e,t,n){return this.positionX.value=e,this.positionY.value=t,this.positionZ.value=n,this}},{key:"setOrientation",value:function(e,t,n){return this.orientationX.value=e,this.orientationY.value=t,this.orientationZ.value=n,this}},{key:"panningModel",get:function(){return this._panner.panningModel},set:function(e){this._panner.panningModel=e}},{key:"refDistance",get:function(){return this._panner.refDistance},set:function(e){this._panner.refDistance=e}},{key:"rolloffFactor",get:function(){return this._panner.rolloffFactor},set:function(e){this._panner.rolloffFactor=e}},{key:"distanceModel",get:function(){return this._panner.distanceModel},set:function(e){this._panner.distanceModel=e}},{key:"coneInnerAngle",get:function(){return this._panner.coneInnerAngle},set:function(e){this._panner.coneInnerAngle=e}},{key:"coneOuterAngle",get:function(){return this._panner.coneOuterAngle},set:function(e){this._panner.coneOuterAngle=e}},{key:"coneOuterGain",get:function(){return this._panner.coneOuterGain},set:function(e){this._panner.coneOuterGain=e}},{key:"maxDistance",get:function(){return this._panner.maxDistance},set:function(e){this._panner.maxDistance=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}}]),n}(MD),Kz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments))).name="Recorder";var r=DR(n.getDefaults(),arguments);return e.input=new FD({context:e.context}),oR(n.supported,"Media Recorder API is not available"),e._stream=e.context.createMediaStreamDestination(),e.input.connect(e._stream),e._recorder=new MediaRecorder(e._stream.stream,{mimeType:r.mimeType}),e}return Object(C.a)(n,[{key:"mimeType",get:function(){return this._recorder.mimeType}},{key:"state",get:function(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}},{key:"start",value:function(){return CR(this,void 0,void 0,mn.a.mark((function e(){var t,n=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oR("started"!==this.state,"Recorder is already started"),t=new Promise((function(e){n._recorder.addEventListener("start",(function t(){n._recorder.removeEventListener("start",t,!1),e()}),!1)})),this._recorder.start(),e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"stop",value:function(){return CR(this,void 0,void 0,mn.a.mark((function e(){var t,n=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oR("stopped"!==this.state,"Recorder is not started"),t=new Promise((function(e){n._recorder.addEventListener("dataavailable",(function t(r){n._recorder.removeEventListener("dataavailable",t,!1),e(r.data)}),!1)})),this._recorder.stop(),e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){return oR("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.input.dispose(),this._stream.disconnect(),this}}],[{key:"getDefaults",value:function(){return MD.getDefaults()}},{key:"supported",get:function(){return null!==jR&&Reflect.has(jR,"MediaRecorder")}}]),n}(MD),Xz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["threshold","ratio"]))).name="Compressor",e._compressor=e.context.createDynamicsCompressor(),e.input=e._compressor,e.output=e._compressor;var r=DR(n.getDefaults(),arguments,["threshold","ratio"]);return e.threshold=new AD({minValue:e._compressor.threshold.minValue,maxValue:e._compressor.threshold.maxValue,context:e.context,convert:!1,param:e._compressor.threshold,units:"decibels",value:r.threshold}),e.attack=new AD({minValue:e._compressor.attack.minValue,maxValue:e._compressor.attack.maxValue,context:e.context,param:e._compressor.attack,units:"time",value:r.attack}),e.release=new AD({minValue:e._compressor.release.minValue,maxValue:e._compressor.release.maxValue,context:e.context,param:e._compressor.release,units:"time",value:r.release}),e.knee=new AD({minValue:e._compressor.knee.minValue,maxValue:e._compressor.knee.maxValue,context:e.context,convert:!1,param:e._compressor.knee,units:"decibels",value:r.knee}),e.ratio=new AD({minValue:e._compressor.ratio.minValue,maxValue:e._compressor.ratio.maxValue,context:e.context,convert:!1,param:e._compressor.ratio,units:"positive",value:r.ratio}),nD(Object(P.a)(e),["knee","release","attack","ratio","threshold"]),e}return Object(C.a)(n,[{key:"reduction",get:function(){return this._compressor.reduction}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}}]),n}(MD),Qz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["threshold","smoothing"])))).name="Gate";var r=DR(n.getDefaults(),arguments,["threshold","smoothing"]);return e._follower=new ez({context:e.context,smoothing:r.smoothing}),e._gt=new UF({context:e.context,value:hD(r.threshold)}),e.input=new FD({context:e.context}),e._gate=e.output=new FD({context:e.context}),e.input.connect(e._gate),e.input.chain(e._follower,e._gt,e._gate.gain),e}return Object(C.a)(n,[{key:"threshold",get:function(){return vD(this._gt.value)},set:function(e){this._gt.value=hD(e)}},{key:"smoothing",get:function(){return this._follower.smoothing},set:function(e){this._follower.smoothing=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{smoothing:.1,threshold:-40})}}]),n}(MD),Yz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments,["threshold"])))).name="Limiter";var r=DR(n.getDefaults(),arguments,["threshold"]);return e._compressor=e.input=e.output=new Xz({context:e.context,ratio:20,attack:.003,release:.01,threshold:r.threshold}),e.threshold=e._compressor.threshold,nD(Object(P.a)(e),"threshold"),e}return Object(C.a)(n,[{key:"reduction",get:function(){return this._compressor.reduction}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._compressor.dispose(),this.threshold.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{threshold:-12})}}]),n}(MD),Zz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments)))).name="MidSideCompressor";var r=DR(n.getDefaults(),arguments);return e._midSideSplit=e.input=new Ez({context:e.context}),e._midSideMerge=e.output=new Nz({context:e.context}),e.mid=new Xz(Object.assign(r.mid,{context:e.context})),e.side=new Xz(Object.assign(r.side,{context:e.context})),e._midSideSplit.mid.chain(e.mid,e._midSideMerge.mid),e._midSideSplit.side.chain(e.side,e._midSideMerge.side),nD(Object(P.a)(e),["mid","side"]),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}}]),n}(MD),Jz=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,Object.assign(DR(n.getDefaults(),arguments)))).name="MultibandCompressor";var r=DR(n.getDefaults(),arguments);return e._splitter=e.input=new Wz({context:e.context,lowFrequency:r.lowFrequency,highFrequency:r.highFrequency}),e.lowFrequency=e._splitter.lowFrequency,e.highFrequency=e._splitter.highFrequency,e.output=new FD({context:e.context}),e.low=new Xz(Object.assign(r.low,{context:e.context})),e.mid=new Xz(Object.assign(r.mid,{context:e.context})),e.high=new Xz(Object.assign(r.high,{context:e.context})),e._splitter.low.chain(e.low,e.output),e._splitter.mid.chain(e.mid,e.output),e._splitter.high.chain(e.high,e.output),nD(Object(P.a)(e),["high","mid","low","highFrequency","lowFrequency"]),e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}}]),n}(MD),$z=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["low","mid","high"]))).name="EQ3",e.output=new FD({context:e.context}),e._internalChannels=[];var r=DR(n.getDefaults(),arguments,["low","mid","high"]);return e.input=e._multibandSplit=new Wz({context:e.context,highFrequency:r.highFrequency,lowFrequency:r.lowFrequency}),e._lowGain=new FD({context:e.context,gain:r.low,units:"decibels"}),e._midGain=new FD({context:e.context,gain:r.mid,units:"decibels"}),e._highGain=new FD({context:e.context,gain:r.high,units:"decibels"}),e.low=e._lowGain.gain,e.mid=e._midGain.gain,e.high=e._highGain.gain,e.Q=e._multibandSplit.Q,e.lowFrequency=e._multibandSplit.lowFrequency,e.highFrequency=e._multibandSplit.highFrequency,e._multibandSplit.low.chain(e._lowGain,e.output),e._multibandSplit.mid.chain(e._midGain,e.output),e._multibandSplit.high.chain(e._highGain,e.output),nD(Object(P.a)(e),["low","mid","high","lowFrequency","highFrequency"]),e._internalChannels=[e._multibandSplit],e}return Object(C.a)(n,[{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),rD(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}}]),n}(MD),eq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(_.a)(this,n),(e=t.call(this,DR(n.getDefaults(),arguments,["url","onload"]))).name="Convolver",e._convolver=e.context.createConvolver();var r=DR(n.getDefaults(),arguments,["url","onload"]);return e._buffer=new iD(r.url,(function(t){e.buffer=t,r.onload()})),e.input=new FD({context:e.context}),e.output=new FD({context:e.context}),e._buffer.loaded&&(e.buffer=e._buffer),e.normalize=r.normalize,e.input.chain(e._convolver,e.output),e}return Object(C.a)(n,[{key:"load",value:function(e){return CR(this,void 0,void 0,mn.a.mark((function t(){return mn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._buffer.load(e);case 2:this.buffer=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"buffer",get:function(){return this._buffer.length?this._buffer:null},set:function(e){e&&this._buffer.set(e),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));var t=this._buffer.get();this._convolver.buffer=t||null}},{key:"normalize",get:function(){return this._convolver.normalize},set:function(e){this._convolver.normalize=e}},{key:"dispose",value:function(){return Object(Nn.a)(Object(R.a)(n.prototype),"dispose",this).call(this),this._buffer.dispose(),this._convolver.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(MD.getDefaults(),{normalize:!0,onload:aD})}}]),n}(MD);function tq(){return uD().now()}function nq(){return uD().immediate()}var rq=uD().transport;function aq(){return uD().transport}var iq=uD().destination,oq=uD().destination;function sq(){return uD().destination}var cq=uD().listener;function uq(){return uD().listener}var lq=uD().draw;function fq(){return uD().draw}var dq=uD();function pq(){return iD.loaded()}var hq=iD,vq=XD,mq=uF,bq=function e(){Object(_.a)(this,e)},gq=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(_.a)(this,e),this.clicksPerQuarter=1,this.muted=!1,this.loClick=new uL({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.hiClick=new uL({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.loClickNote="c5",this.hiClickNote="g5",this.ticking=!1,this.startedAt=null,this.step=-1,this.reset(),this.callbackObject=t,this.clicksPerQuarter=n}return Object(C.a)(e,[{key:"isTicking",value:function(){return this.ticking}},{key:"getStartedAt",value:function(){return this.startedAt}},{key:"getOffsetTime",value:function(){return nq()-this.startedAt}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:120;this.reset(),this.ticking=!0,this.callbackObject.click||(this.callbackObject.click=function(){}),this.callbackObject.quarter||(this.callbackObject.quarter=function(){}),this.callbackObject.bar||(this.callbackObject.bar=function(){});var n=0,r=4*this.clicksPerQuarter;rq.scheduleRepeat((function(t){e.startedAt||(e.startedAt=t);var a=t-e.startedAt;e.step++;var i=e.step%r,o=Math.floor(i/e.clicksPerQuarter),s=i%e.clicksPerQuarter;e.callbackObject.click(a,i),0===s&&e.callbackObject.quarter(a,o),e.muted||(0===i?e.hiClick.triggerAttack(e.hiClickNote,t,.1):e.loClick.triggerAttack(e.loClickNote,t,.1)),0===i&&(e.callbackObject.bar(a,n),n++)}),"".concat(r,"n")),rq.bpm.value=t,rq.start()}},{key:"stop",value:function(){this.ticking=!1,rq.cancel(),rq.stop()}},{key:"reset",value:function(){this.muted=!1,this.ticking=!1,this.step=-1,this.startedAt=null}}]),e}(),yq=n(315),Oq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(P.a)(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(z(Error));function kq(e){var t=new yq.Midi(e),n=gE.create();n.ticksPerQuarter=t.header.ppq,n.sourceInfo=gE.SourceInfo.create({parser:gE.SourceInfo.Parser.TONEJS_MIDI_CONVERT,encodingType:gE.SourceInfo.EncodingType.MIDI});var r,a=Object(M.a)(t.header.timeSignatures);try{for(a.s();!(r=a.n()).done;){var i=r.value;n.timeSignatures.push(gE.TimeSignature.create({time:t.header.ticksToSeconds(i.ticks),numerator:i.timeSignature[0],denominator:i.timeSignature[1]}))}}catch(x){a.e(x)}finally{a.f()}n.timeSignatures.length||n.timeSignatures.push(gE.TimeSignature.create({time:0,numerator:4,denominator:4}));var o,s=Object(M.a)(t.header.tempos);try{for(s.s();!(o=s.n()).done;){var c=o.value;n.tempos.push(gE.Tempo.create({time:c.time,qpm:c.bpm}))}}catch(x){s.e(x)}finally{s.f()}var u,l=-1,f=Object(M.a)(t.tracks);try{for(f.s();!(u=f.n()).done;){var d=u.value;d.notes.length>0&&(l+=1);var p,h=Object(M.a)(d.notes);try{for(h.s();!(p=h.n()).done;){var v=p.value,m=v.time,b=m+v.duration;n.notes.push(gE.Note.create({instrument:l,program:d.instrument.number,startTime:m,endTime:b,pitch:v.midi,velocity:Math.floor(v.velocity*HC),isDrum:d.instrument.percussion})),b>n.totalTime&&(n.totalTime=b)}}catch(x){h.e(x)}finally{h.f()}var g,y=Object.values(d.controlChanges),O=[].concat.apply([],y),k=Object(M.a)(O);try{for(k.s();!(g=k.n()).done;){var w=g.value;n.controlChanges.push(gE.ControlChange.create({time:w.time,controlNumber:w.number,controlValue:Math.floor(w.value*(HC-1)),instrument:l,program:d.instrument.number,isDrum:d.instrument.percussion}))}}catch(x){k.e(x)}finally{k.f()}}}catch(x){f.e(x)}finally{f.f()}return n}function wq(e){RE(e)&&(e=VE(e));var t=new yq.Midi;t.fromJSON({header:{name:"",ppq:e.ticksPerQuarter||zC,tempos:[],timeSignatures:[],keySignatures:[],meta:[]},tracks:[]});var n=Array.from(e.tempos||[]);0===n.length&&n.push({time:0,qpm:MC}),n.sort((function(e,t){return e.time-t.time}));for(var r=0,a=n;r<a.length;r++){var i=a[r];t.header.tempos.push({ticks:t.header.secondsToTicks(i.time),bpm:i.qpm}),t.header.update()}if(e.timeSignatures&&0!==e.timeSignatures.length){var o,s=Object(M.a)(e.timeSignatures);try{for(s.s();!(o=s.n()).done;){var c=o.value;t.header.timeSignatures.push({ticks:t.header.secondsToTicks(c.time),timeSignature:[c.numerator,c.denominator]})}}catch(j){s.e(j)}finally{s.f()}}else t.header.timeSignatures.push({ticks:0,timeSignature:[4,4]});t.header.update();var u,l=new Map,f=Object(M.a)(e.notes);try{for(f.s();!(u=f.n()).done;){var d=u.value,p=d.instrument?d.instrument:0,h=void 0===d.program?LC:d.program,v=!!d.isDrum,m=JSON.stringify([p,h,v]);l.has(m)||l.set(m,{notes:[],controlChanges:[]}),l.get(m).notes.push(d)}}catch(j){f.e(j)}finally{f.f()}var b,g=Object(M.a)(e.controlChanges);try{for(g.s();!(b=g.n()).done;){var y=b.value,O=y.instrument?y.instrument:0,k=void 0===y.program?LC:y.program,w=!!y.isDrum,x=JSON.stringify([O,k,w]);l.has(x)||l.set(x,{notes:[],controlChanges:[]}),l.get(x).controlChanges.push(y)}}catch(j){g.e(j)}finally{g.f()}return l.forEach((function(e,n){var r=JSON.parse(n).slice(1),a=Object(A.a)(r,2),i=a[0],o=a[1],s=t.addTrack();s.channel=o?VC:BC[(t.tracks.length-1)%BC.length],s.instrument.number=i;var c,u=Object(M.a)(e.notes);try{for(u.s();!(c=u.n()).done;){var l=c.value,f=void 0===l.velocity?FC:l.velocity;s.addNote({midi:l.pitch,time:l.startTime,duration:l.endTime-l.startTime,velocity:(f+1)/HC})}}catch(j){u.e(j)}finally{u.f()}var d,p=Object(M.a)(e.controlChanges);try{for(p.s();!(d=p.n()).done;){var h=d.value;s.addCC({number:h.controlNumber,value:h.controlValue,time:h.time})}}catch(j){p.e(j)}finally{p.f()}})),t.toArray()}function xq(e){return new Promise((function(t,n){Object(yE.a)(e).then((function(e){return e.blob()})).then((function(e){t(e)})).catch((function(e){return n(e)}))}))}function jq(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){try{var a=kq(r.result);t(a)}catch(i){n(i)}},r.onerror=function(e){return n(e)},r.readAsArrayBuffer(e)}))}function Sq(e){return xq(e).then(jq)}var _q=function(){function e(t){Object(_.a)(this,e),this.FADE_SECONDS=.1,this.baseURL=t,this.buffers=new XD,this.sourceMap=new Map,this.initialized=!1}return Object(C.a)(e,[{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(yE.a)("".concat(this.baseURL,"/instrument.json")).then((function(e){return e.json()})).then((function(e){t.name=e.name,t.minPitch=e.minPitch,t.maxPitch=e.maxPitch,t.durationSeconds=e.durationSeconds,t.releaseSeconds=e.releaseSeconds,t.percussive=e.percussive,t.velocities=e.velocities,t.initialized=!0}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sampleInfoToName",value:function(e){return this.velocities?"p".concat(e.pitch,"_v").concat(e.velocity):"p".concat(e.pitch)}},{key:"sampleNameToURL",value:function(e){return"".concat(this.baseURL,"/").concat(e,".mp3")}},{key:"nearestVelocity",value:function(e){if(!this.velocities)return e;e||(e=FC);var t=void 0,n=HC;return this.velocities.forEach((function(r){var a=Math.abs(r-e);a<n&&(t=r,n=a)})),t}},{key:"loadSamples",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized){e.next=3;break}return e.next=3,this.initialize();case 3:if(n=t.filter((function(e){return!(e.pitch<i.minPitch||e.pitch>i.maxPitch)||(wE("Pitch ".concat(e.pitch," is outside the valid range for ").concat(i.name,", ignoring."),"SoundFont"),!1)})).map((function(e){return i.sampleInfoToName({pitch:e.pitch,velocity:i.nearestVelocity(e.velocity)})})),r=Array.from(new Set(n)).filter((function(e){return!i.buffers.has(e)})),!((a=r.map((function(e){return{name:e,url:i.sampleNameToURL(e)}}))).length>0)){e.next=11;break}return a.forEach((function(e){return i.buffers.add(e.name,e.url)})),e.next=10,pq();case 10:wE("Loaded samples for ".concat(this.name,"."),"SoundFont");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"playNote",value:function(e,t,n,r,a){var i=this.getBuffer(e,t);if(i){r>this.durationSeconds&&wE("Requested note duration longer than sample duration: ".concat(r," > ").concat(this.durationSeconds),"SoundFont");var o=new uF({url:i,fadeOut:this.FADE_SECONDS}).connect(a);if(o.start(n,0,void 0,1),!this.percussive&&r<this.durationSeconds){var s=new uF({url:i,fadeOut:this.FADE_SECONDS}).connect(a);o.stop(n+r+this.FADE_SECONDS),s.start(n+r,this.durationSeconds,void 0,1)}}}},{key:"playNoteDown",value:function(e,t,n){var r=this.getBuffer(e,t);if(r){var a=new uF(r).connect(n);a.start(0,0,void 0,1),this.sourceMap.has(e)&&this.sourceMap.get(e).stop(tq()+this.FADE_SECONDS,this.FADE_SECONDS),this.sourceMap.set(e,a)}}},{key:"playNoteUp",value:function(e,t,n){if(this.sourceMap.has(e)){var r=this.getBuffer(e,t);if(r)new uF({url:r,fadeOut:this.FADE_SECONDS}).connect(n).start(0,this.durationSeconds,void 0,1),this.sourceMap.get(e).stop(tq()+this.FADE_SECONDS,this.FADE_SECONDS),this.sourceMap.delete(e)}}},{key:"getBuffer",value:function(e,t){if(!this.initialized)throw new Error("Instrument is not initialized.");if(!(e<this.minPitch||e>this.maxPitch)){var n=this.sampleInfoToName({pitch:e,velocity:this.nearestVelocity(t)});if(!this.buffers.has(n))throw new Error("Buffer not found for ".concat(this.name,": ").concat(n));var r=this.buffers.get(n);if(!r.loaded)throw new Error("Buffer not loaded for ".concat(this.name,": ").concat(n));return r}wE("Pitch ".concat(e," is outside the valid range for ").concat(this.name," (").concat(this.minPitch,"-").concat(this.maxPitch,")"),"SoundFont")}}]),e}(),Cq=function(){function e(t){Object(_.a)(this,e),this.baseURL=t,this.instruments=new Map,this.initialized=!1}return Object(C.a)(e,[{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(yE.a)("".concat(this.baseURL,"/soundfont.json")).then((function(e){return e.json()})).then((function(e){for(var n in t.name=e.name,e.instruments){var r="".concat(t.baseURL,"/").concat(e.instruments[n]);t.instruments.set("drums"===n?"drums":+n,new _q(r))}t.initialized=!0}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSamples",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized){e.next=3;break}return e.next=3,this.initialize();case 3:return n=new Map,t.forEach((function(e){e.isDrum=e.isDrum||!1,e.program=e.program||0;var t=e.isDrum?"drums":e.program,a={pitch:e.pitch,velocity:e.velocity};n.has(t)?n.get(t).push(a):r.instruments.has(t)?n.set(t,[a]):wE("No instrument in ".concat(r.name," for: program=").concat(e.program,", isDrum=").concat(e.isDrum),"SoundFont")})),e.next=7,Promise.all(Array.from(n.keys()).map((function(e){return r.instruments.get(e).loadSamples(n.get(e))})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"playNote",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6?arguments[6]:void 0,s=i?"drums":a;if(!this.initialized)throw new Error("SoundFont is not initialized.");this.instruments.has(s)?this.instruments.get(s).playNote(e,t,n,r,o):wE("No instrument in ".concat(this.name," for: program=").concat(a,", isDrum=").concat(i),"SoundFont")}},{key:"playNoteDown",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=r?"drums":n;if(!this.initialized)throw new Error("SoundFont is not initialized.");this.instruments.has(i)?this.instruments.get(i).playNoteDown(e,t,a):wE("No instrument in ".concat(this.name," for: program=").concat(n,", isDrum=").concat(r),"SoundFont")}},{key:"playNoteUp",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=r?"drums":n;if(!this.initialized)throw new Error("SoundFont is not initialized.");this.instruments.has(i)?this.instruments.get(i).playNoteUp(e,t,a):wE("No instrument in ".concat(this.name," for: program=").concat(n,", isDrum=").concat(r),"SoundFont")}}]),e}();function Eq(e,t){return e.quantizedStartStep<t.quantizedStartStep?-1:e.quantizedStartStep>t.quantizedStartStep?1:e.pitch<t.pitch?-1:1}var Nq=function e(){Object(_.a)(this,e)},Tq=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;Object(_.a)(this,e),this.playClick=t,this.callbackObject=n,this.desiredQPM=void 0}return Object(C.a)(e,[{key:"setTempo",value:function(e){this.desiredQPM=e,"started"===rq.state&&(rq.bpm.value=e)}},{key:"makeClickSequence",value:function(e){for(var t=NE(e),n=t.notes.map((function(e){return e.quantizedEndStep})),r=Math.max.apply(Math,Object(I.a)(n)),a=0;a<r;a+=4){var i={pitch:a%16===0?aE:iE,quantizedStartStep:a,isDrum:!0,quantizedEndStep:a+1};t.notes.push(i)}return t.notes.sort(Eq),t}},{key:"resumeContext",value:function(){dq.resume()}},{key:"start",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("started"===this.getPlayState())throw new Error("Cannot start playback; player is already playing.");if("paused"===this.getPlayState())throw new Error("Cannot `start()` a paused player; use `resume()`.");if("stopped"!==rq.state)throw new Error("Cannot start playback while `Tone.Transport` is in use.");this.resumeContext();var a=RE(e);if(this.playClick&&a&&(e=this.makeClickSequence(e)),t?rq.bpm.value=t:e.tempos&&e.tempos.length>0&&e.tempos[0].qpm>0?rq.bpm.value=e.tempos[0].qpm:rq.bpm.value=MC,a)e=VE(e,t);else if(t)throw new Error("Cannot specify a `qpm` for a non-quantized sequence.");var i=new jL((function(e,t){n.currentPart===i&&(n.playNote(e,t),n.callbackObject&&lq.schedule((function(){n.callbackObject.run(t,e)}),e))}),e.notes.map((function(e){return[e.startTime,e]})));return this.currentPart=i,this.desiredQPM&&(rq.bpm.value=this.desiredQPM),this.currentPart.start(void 0,r),"started"!==rq.state&&rq.start(),new Promise((function(t){n.scheduledStop=rq.schedule((function(){n.stop(),t(),n.callbackObject&&n.callbackObject.stop()}),"+".concat(e.totalTime))}))}},{key:"stop",value:function(){this.isPlaying()&&(this.currentPart.stop(),rq.stop(),this.currentPart=null),rq.clear(this.scheduledStop),this.scheduledStop=void 0,this.desiredQPM=void 0}},{key:"pause",value:function(){if(!this.isPlaying())throw new Error("Cannot pause playback while the player is stopped.");rq.pause()}},{key:"resume",value:function(){if("paused"!==this.getPlayState())throw new Error('Cannot resume playback while "'.concat(this.getPlayState(),'".'));rq.start()}},{key:"seekTo",value:function(e){if(!this.isPlaying())throw new Error("Cannot seek while the player is stopped.");rq.seconds=e}},{key:"isPlaying",value:function(){return!!this.currentPart}},{key:"getPlayState",value:function(){return this.isPlaying()?rq.state:"stopped"}}]),e}(),Iq=function(){function e(){var t=this;Object(_.a)(this,e),this.DRUM_PITCH_TO_CLASS=new Map,this.kick=(new uL).toDestination(),this.tomLow=new uL({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.tomMid=new uL({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.tomHigh=new uL({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.closedHihat=new cL({frequency:400,envelope:{attack:.001,decay:.1,release:.8},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1}).toDestination(),this.openHihat=new cL({frequency:400,envelope:{attack:.001,decay:.5,release:.8,sustain:1},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1}).toDestination(),this.ride=(new cL).toDestination(),this.crash=new cL({frequency:300,envelope:{attack:.001,decay:1,release:3},harmonicity:5.1,modulationIndex:64,resonance:4e3,octaves:1.5}).toDestination(),this.snare=new lL({noise:{type:"white"},envelope:{attack:.005,decay:.05,sustain:.1,release:.4}}).toDestination(),this.loClick=new uL({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.hiClick=new uL({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.pitchPlayers=[function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.kick.triggerAttackRelease("C2","8n",e,n)},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.snare.triggerAttackRelease("16n",e,n)},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.closedHihat.triggerAttack(e,.3,n)},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.openHihat.triggerAttack(e,.3,n)},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t.tomLow.triggerAttack("G3",e,n)},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t.tomMid.triggerAttack("C4",e,n)},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t.tomHigh.triggerAttack("F4",e,n)},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.crash.triggerAttack(e,1,n)},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.ride.triggerAttack(e,.5,n)},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t.loClick.triggerAttack("G5",e,n)},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t.hiClick.triggerAttack("C6",e,n)}];for(var n=function(e){UC[e].forEach((function(n){t.DRUM_PITCH_TO_CLASS.set(n,e)}))},r=0;r<UC.length;++r)n(r);this.DRUM_PITCH_TO_CLASS.set(aE,oE),this.DRUM_PITCH_TO_CLASS.set(iE,sE)}return Object(C.a)(e,[{key:"playNote",value:function(e,t,n){this.pitchPlayers[this.DRUM_PITCH_TO_CLASS.get(e)](t,n)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),Aq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.apply(this,arguments)).drumKit=Iq.getInstance(),e.bassSynth=new JF({volume:5,oscillator:{type:"triangle"}}).toDestination(),e.polySynth=(new OL).toDestination(),e}return Object(C.a)(n,[{key:"playNote",value:function(e,t){var n=t.hasOwnProperty("velocity")?t.velocity/GC:void 0;if(t.isDrum)this.drumKit.playNote(t.pitch,e,n);else{var r=CD(t.pitch,"midi").toFrequency(),a=t.endTime-t.startTime;this.getSynth(t.instrument,t.program).triggerAttackRelease(r,a,e,n)}}},{key:"getSynth",value:function(e,t){return void 0!==t&&t>=32&&t<=39?this.bassSynth:this.polySynth}}]),n}(Tq);Aq.tone=x;var Mq,Pq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oq,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return Object(_.a)(this,n),(r=t.call(this,!1,s)).soundFont=new Cq(e),r.output=a,r.programOutputs=i,r.drumOutputs=o,r}return Object(C.a)(n,[{key:"loadSamples",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.soundFont.loadSamples(t.notes.map((function(e){return{pitch:e.pitch,velocity:e.velocity,program:e.program||0,isDrum:e.isDrum||!1}})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAllSamples",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r,a,i,o,s=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length>0&&void 0!==s[0]?s[0]:0,n=s.length>1&&void 0!==s[1]&&s[1],r=gE.create(),a=n?tE:$C,i=n?eE:JC;i<=a;i++)for(o=WC;o<GC;o++)r.notes.push({pitch:i,velocity:o,program:t,isDrum:n});return e.abrupt("return",this.loadSamples(r));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resumeContext",value:function(){dq.resume()}},{key:"start",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.resumeContext(),this.loadSamples(e).then((function(){return Object(Nn.a)(Object(R.a)(n.prototype),"start",r).call(r,e,t,a)}))}},{key:"playNote",value:function(e,t){this.soundFont.playNote(t.pitch,t.velocity,e,t.endTime-t.startTime,t.program,t.isDrum,this.getAudioNodeOutput(t))}},{key:"playNoteDown",value:function(e){this.soundFont.playNoteDown(e.pitch,e.velocity,e.program,e.isDrum,this.getAudioNodeOutput(e))}},{key:"playNoteUp",value:function(e){this.soundFont.playNoteUp(e.pitch,e.velocity,e.program,e.isDrum,this.getAudioNodeOutput(e))}},{key:"getAudioNodeOutput",value:function(e){var t=this.output;return this.programOutputs&&!e.isDrum?this.programOutputs.has(e.program)&&(t=this.programOutputs.get(e.program)):this.drumOutputs&&e.isDrum&&this.drumOutputs.has(e.pitch)&&(t=this.drumOutputs.get(e.pitch)),t}}]),n}(Tq),Rq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,!0,e)}return n}(Aq),Dq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,!1,e)).outputs=[],r.outputChannel=0,r.availableOutputs=[],r.NOTE_ON=144,r.NOTE_OFF=128,r}return Object(C.a)(n,[{key:"requestMIDIAccess",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.requestMIDIAccess){e.next=4;break}return e.abrupt("return",new Promise((function(e,n){navigator.requestMIDIAccess().then((function(n){n.addEventListener("statechange",(function(e){return t.initOutputs(n)})),e(t.initOutputs(n))}),(function(e){return console.log("Something went wrong",n(e))}))})));case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"initOutputs",value:function(e){for(var t=e.outputs.values(),n=t.next();n&&!n.done;n=t.next())this.availableOutputs.push(n.value);return this.availableOutputs}},{key:"playNote",value:function(e,t){for(var n=t.velocity||100,r=1e3*(t.endTime-t.startTime),a=[this.NOTE_ON+this.outputChannel,t.pitch,n],i=[this.NOTE_OFF+this.outputChannel,t.pitch,n],o=this.outputs?this.outputs:this.availableOutputs,s=0;s<o.length;s++)this.sendMessageToOutput(o[s],a),this.sendMessageToOutput(o[s],i,yE.d.now()+r)}},{key:"sendMessageToOutput",value:function(e,t,n){e&&e.send(t,n)}},{key:"playNoteDown",value:function(e){for(var t=[this.NOTE_ON,e.pitch,e.velocity],n=this.outputs?this.outputs:this.availableOutputs,r=0;r<n.length;r++)this.sendMessageToOutput(n[r],t)}},{key:"playNoteUp",value:function(e){for(var t=[this.NOTE_OFF,e.pitch,e.velocity],n=this.outputs?this.outputs:this.availableOutputs,r=0;r<n.length;r++)this.sendMessageToOutput(n[r],t,e.endTime-e.startTime)}}]),n}(Tq),Fq=function e(){Object(_.a)(this,e)},Lq=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;Object(_.a)(this,e),this.notes=[],this.midiInputs=[],this.loClick=new uL({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.hiClick=new uL({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.config={playClick:t.playClick,qpm:t.qpm||MC,playCountIn:t.playCountIn,startRecordingAtFirstNote:t.startRecordingAtFirstNote||!1},this.callbackObject=n,this.recording=!1,this.onNotes=new Map}return Object(C.a)(e,[{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.requestMIDIAccess().then((function(e){return t.midiReady(e)}),(function(e){return console.log("Something went wrong",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"midiReady",value:function(e){wE("Initialized Recorder","Recorder");for(var t=e.inputs.values(),n=t.next();n&&!n.done;n=t.next())this.midiInputs.push(n.value)}},{key:"isRecording",value:function(){return this.recording}},{key:"setTempo",value:function(e){this.config.qpm=e,"started"===rq.state&&(rq.bpm.value=e)}},{key:"enablePlayClick",value:function(e){this.config.playClick=e}},{key:"enablePlayCountIn",value:function(e){this.config.playCountIn=e}},{key:"initClickLoop",value:function(){var e=this,t=0;this.clickLoop=new xL((function(n){t%4===0?e.loClick.triggerAttack("G5",n):e.hiClick.triggerAttack("C6",n),t++,e.config.playCountIn&&4===t&&(rq.stop(),e.clickLoop.stop())}),"4n")}},{key:"getMIDIInputs",value:function(){return this.midiInputs}},{key:"start",value:function(e){var t,n=this,r=e||this.midiInputs,a=Object(M.a)(r);try{for(a.s();!(t=a.n()).done;){t.value.onmidimessage=function(e){n.midiMessageReceived(e)}}}catch(o){a.e(o)}finally{a.f()}if(this.config.playClick||this.config.playCountIn?(this.initClickLoop(),rq.bpm.value=this.config.qpm,rq.start(),this.clickLoop.start()):this.clickLoop=null,this.recording=!0,this.firstNoteTimestamp=void 0,this.notes=[],this.onNotes=new Map,!this.startRecordingAtFirstNote){var i=Date.now();this.firstNoteTimestamp=i}}},{key:"stop",value:function(){var e=this;this.recording=!1;var t=Date.now();this.onNotes.forEach((function(n,r){e.noteOff(r,t)}));var n,r=Object(M.a)(this.midiInputs);try{for(r.s();!(n=r.n()).done;){n.value.onmidimessage=null}}catch(a){r.e(a)}finally{r.f()}return this.clickLoop&&(rq.stop(),this.clickLoop.stop()),0===this.notes.length?null:this.getNoteSequence()}},{key:"getNoteSequence",value:function(){return 0===this.notes.length?null:gE.create({notes:this.notes,totalTime:this.notes[this.notes.length-1].endTime})}},{key:"reset",value:function(){var e=this.stop();return this.firstNoteTimestamp=void 0,this.notes=[],this.onNotes=new Map,e}},{key:"midiMessageReceived",value:function(e){if(this.recording){var t=(void 0!==e.timeStamp&&0!==e.timeStamp?e.timeStamp:yE.d.now())+yE.d.timing.navigationStart;void 0===this.firstNoteTimestamp&&(this.firstNoteTimestamp=t);var n=e.data[0]>>4,r=e.data[1],a=e.data.length>2?e.data[2]:1,i=e.srcElement;8===n||9===n&&0===a?(this.callbackObject&&this.callbackObject.noteOff&&this.callbackObject.noteOff(r,a,i),this.noteOff(r,t),this.callbackObject&&this.callbackObject.run&&this.callbackObject.run(this.getNoteSequence())):9===n&&(this.callbackObject&&this.callbackObject.noteOn&&this.callbackObject.noteOn(r,a,i),this.noteOn(r,a,t))}}},{key:"noteOn",value:function(e,t,n){var r=new gE.Note;r.pitch=e,r.startTime=(n-this.firstNoteTimestamp)/1e3,r.velocity=t,this.onNotes.set(e,r)}},{key:"noteOff",value:function(e,t){var n=this.onNotes.get(e);n&&(n.endTime=(t-this.firstNoteTimestamp)/1e3,this.notes.push(n)),this.onNotes.delete(e)}}]),e}(),zq=n(412),qq=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(_.a)(this,e);var r=RE(t),a=t.tempos&&t.tempos.length>0?t.tempos[0].qpm:void 0;this.noteSequence=r?VE(t,a):t;var i=30;this.config={noteHeight:n.noteHeight||6,noteSpacing:n.noteSpacing||1,pixelsPerTimeStep:n.pixelsPerTimeStep||i,noteRGB:n.noteRGB||"8, 41, 64",activeNoteRGB:n.activeNoteRGB||"240, 84, 119",minPitch:n.minPitch,maxPitch:n.maxPitch};var o=this.getSize();this.width=o.width,this.height=o.height}return Object(C.a)(e,[{key:"updateMinMaxPitches",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.config.minPitch||!this.config.maxPitch){void 0===this.config.minPitch&&(this.config.minPitch=YC),void 0===this.config.maxPitch&&(this.config.maxPitch=QC);var t,n=Object(M.a)(this.noteSequence.notes);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.config.minPitch=Math.min(r.pitch,this.config.minPitch),this.config.maxPitch=Math.max(r.pitch,this.config.maxPitch)}}catch(a){n.e(a)}finally{n.f()}e||(this.config.minPitch-=2,this.config.maxPitch+=2)}}},{key:"getSize",value:function(){this.updateMinMaxPitches();var e=(this.config.maxPitch-this.config.minPitch)*this.config.noteHeight,t=this.noteSequence.totalTime;if(!t)throw new Error("The sequence you are using with the visualizer does not have a totalQuantizedSteps or totalTime field set, so the visualizer can't be horizontally sized correctly.");return{width:t*this.config.pixelsPerTimeStep,height:e}}},{key:"getNotePosition",value:function(e,t){var n=this.getNoteEndTime(e)-this.getNoteStartTime(e),r=this.getNoteStartTime(e)*this.config.pixelsPerTimeStep,a=Math.max(this.config.pixelsPerTimeStep*n-this.config.noteSpacing,1);return{x:r,y:this.height-(e.pitch-this.config.minPitch)*this.config.noteHeight,w:a,h:this.config.noteHeight}}},{key:"scrollIntoViewIfNeeded",value:function(e,t){if(e&&this.parentElement){var n=this.parentElement.getBoundingClientRect().width;t>this.parentElement.scrollLeft+n&&(this.parentElement.scrollLeft=t-20)}}},{key:"getNoteStartTime",value:function(e){return Math.round(1e8*e.startTime)/1e8}},{key:"getNoteEndTime",value:function(e){return Math.round(1e8*e.endTime)/1e8}},{key:"isPaintingActiveNote",value:function(e,t){var n=this.getNoteStartTime(e)===this.getNoteStartTime(t),r=this.getNoteStartTime(e)<=this.getNoteStartTime(t)&&this.getNoteEndTime(e)>=this.getNoteEndTime(t);return n||r}}]),e}(),Vq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(_.a)(this,n),(a=t.call(this,e,i)).ctx=r.getContext("2d"),a.parentElement=r.parentElement;var o=window.devicePixelRatio||1;return a.ctx&&(a.ctx.canvas.width=o*a.width,a.ctx.canvas.height=o*a.height,r.style.width="".concat(a.width,"px"),r.style.height="".concat(a.height,"px"),a.ctx.scale(o,o)),a.redraw(),a}return Object(C.a)(n,[{key:"redraw",value:function(e,t){var n;this.clear();for(var r=0;r<this.noteSequence.notes.length;r++){var a=this.noteSequence.notes[r],i=this.getNotePosition(a,r),o=a.velocity?a.velocity/100+.2:1,s=e&&this.isPaintingActiveNote(a,e),c="rgba(".concat(s?this.config.activeNoteRGB:this.config.noteRGB,",\n  ").concat(o,")");this.redrawNote(i.x,i.y,i.w,i.h,c),s&&a===e&&(n=i.x)}return this.scrollIntoViewIfNeeded(t,n),n}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"clearActiveNotes",value:function(){this.redraw()}},{key:"redrawNote",value:function(e,t,n,r,a){this.ctx.fillStyle=a,this.ctx.fillRect(Math.round(e),Math.round(t),Math.round(n),Math.round(r))}}]),n}(qq),Bq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(_.a)(this,n),a=t.call(this,e,r,i),wE("mm.Visualizer is deprecated, and will be removed in a future          version. Please use mm.PianoRollCanvasVisualizer instead","mm.Visualizer",5),a}return n}(Vq),Uq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_.a)(this,n),(r=t.call(this,e,a)).drawn=!1,r}return Object(C.a)(n,[{key:"redraw",value:function(e,t){if(this.drawn||this.draw(),!e)return null;var n;this.unfillActiveRect(this.svg);for(var r=0;r<this.noteSequence.notes.length;r++){var a=this.noteSequence.notes[r];if(e&&this.isPaintingActiveNote(a,e)){var i=this.svg.querySelector('rect[data-index="'.concat(r,'"]'));this.fillActiveRect(i,a),a===e&&(n=parseFloat(i.getAttribute("x")))}}return this.scrollIntoViewIfNeeded(t,n),n}},{key:"fillActiveRect",value:function(e,t){e.setAttribute("fill",this.getNoteFillColor(t,!0)),e.classList.add("active")}},{key:"unfillActiveRect",value:function(e){for(var t=e.querySelectorAll("rect.active"),n=0;n<t.length;++n){var r=t[n],a=this.getNoteFillColor(this.noteSequence.notes[parseInt(r.getAttribute("data-index"),10)],!1);r.setAttribute("fill",a),r.classList.remove("active")}}},{key:"draw",value:function(){for(var e=0;e<this.noteSequence.notes.length;e++){var t=this.noteSequence.notes[e],n=this.getNotePosition(t,e),r=this.getNoteFillColor(t,!1),a=[["index",e],["instrument",t.instrument],["program",t.program],["isDrum",!0===t.isDrum],["pitch",t.pitch]],i=[["--midi-velocity",String(void 0!==t.velocity?t.velocity:127)]];this.drawNote(n.x,n.y,n.w,n.h,r,a,i)}this.drawn=!0}},{key:"getNoteFillColor",value:function(e,t){var n=e.velocity?e.velocity/100+.2:1;return"rgba(".concat(t?this.config.activeNoteRGB:this.config.noteRGB,",\n  ").concat(n,")")}},{key:"drawNote",value:function(e,t,n,r,a,i,o){if(this.svg){var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.classList.add("note"),s.setAttribute("fill",a),s.setAttribute("x","".concat(Math.round(e))),s.setAttribute("y","".concat(Math.round(t))),s.setAttribute("width","".concat(Math.round(n))),s.setAttribute("height","".concat(Math.round(r))),i.forEach((function(e){var t=Object(A.a)(e,2),n=t[0],r=t[1];void 0!==r&&(s.dataset[n]="".concat(r))})),o.forEach((function(e){var t=Object(A.a)(e,2),n=t[0],r=t[1];s.style.setProperty(n,r)})),this.svg.appendChild(s)}}},{key:"clear",value:function(){this.svg.innerHTML="",this.drawn=!1}},{key:"clearActiveNotes",value:function(){this.unfillActiveRect(this.svg)}}]),n}(qq),Wq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(_.a)(this,n),a=t.call(this,e,i),!(r instanceof SVGSVGElement))throw new Error("This visualizer requires an <svg> element to display the visualization");a.svg=r,a.parentElement=r.parentElement;var o=a.getSize();return a.width=o.width,a.height=o.height,a.svg.style.width="".concat(a.width,"px"),a.svg.style.height="".concat(a.height,"px"),a.clear(),a.draw(),a}return n}(Uq),Gq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(_.a)(this,n),(a=t.call(this,e,i)).NOTES_PER_OCTAVE=12,a.WHITE_NOTES_PER_OCTAVE=7,a.LOW_C=24,a.firstDrawnOctave=0,a.lastDrawnOctave=6,!(r instanceof HTMLDivElement))throw new Error("This visualizer requires a <div> element to display the visualization");a.config.whiteNoteWidth=i.whiteNoteWidth||20,a.config.blackNoteWidth=i.blackNoteWidth||2*a.config.whiteNoteWidth/3,a.config.whiteNoteHeight=i.whiteNoteHeight||70,a.config.blackNoteHeight=i.blackNoteHeight||140/3,a.config.showOnlyOctavesUsed=i.showOnlyOctavesUsed,a.setupDOM(r);var o=a.getSize();return a.width=o.width,a.height=o.height,a.svg.style.width="".concat(a.width,"px"),a.svg.style.height="".concat(a.height,"px"),a.svgPiano.style.width="".concat(a.width,"px"),a.svgPiano.style.height="".concat(a.config.whiteNoteHeight,"px"),a.parentElement.style.width="".concat(a.width+a.config.whiteNoteWidth,"px"),a.parentElement.scrollTop=a.parentElement.scrollHeight,a.clear(),a.drawPiano(),a.draw(),a}return Object(C.a)(n,[{key:"setupDOM",value:function(e){this.parentElement=document.createElement("div"),this.parentElement.classList.add("waterfall-notes-container");var t=Math.max(e.getBoundingClientRect().height,200);this.parentElement.style.paddingTop="".concat(t-this.config.whiteNoteHeight,"px"),this.parentElement.style.height="".concat(t-this.config.whiteNoteHeight,"px"),this.parentElement.style.boxSizing="border-box",this.parentElement.style.overflowX="hidden",this.parentElement.style.overflowY="auto",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgPiano=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.classList.add("waterfall-notes"),this.svgPiano.classList.add("waterfall-piano"),this.parentElement.appendChild(this.svg),e.innerHTML="",e.appendChild(this.parentElement),e.appendChild(this.svgPiano)}},{key:"redraw",value:function(e,t){if(this.drawn||this.draw(),!e)return null;this.clearActiveNotes(),this.parentElement.style.paddingTop=this.parentElement.style.height;for(var n=0;n<this.noteSequence.notes.length;n++){var r=this.noteSequence.notes[n];if(e&&this.isPaintingActiveNote(r,e)){var a=this.svg.querySelector('rect[data-index="'.concat(n,'"]'));this.fillActiveRect(a,r);var i=this.svgPiano.querySelector('rect[data-pitch="'.concat(r.pitch,'"]'));if(this.fillActiveRect(i,r),r===e){var o=parseFloat(a.getAttribute("y")),s=parseFloat(a.getAttribute("height"));return o<this.parentElement.scrollTop-s&&(this.parentElement.scrollTop=o+s),o}}}return null}},{key:"getSize",value:function(){this.updateMinMaxPitches(!0);var e=52;if(this.config.showOnlyOctavesUsed){for(var t=!1,n=!1,r=1;r<7;r++){var a=this.LOW_C+this.NOTES_PER_OCTAVE*r;!t&&a>this.config.minPitch&&(this.firstDrawnOctave=r-1,t=!0),!n&&a>this.config.maxPitch&&(this.lastDrawnOctave=r-1,n=!0)}e=(this.lastDrawnOctave-this.firstDrawnOctave+1)*this.WHITE_NOTES_PER_OCTAVE}var i=e*this.config.whiteNoteWidth,o=this.noteSequence.totalTime;if(!o)throw new Error("The sequence you are using with the visualizer does not have a totalQuantizedSteps or totalTime field set, so the visualizer can't be horizontally sized correctly.");return{width:i,height:Math.max(o*this.config.pixelsPerTimeStep,1)}}},{key:"getNotePosition",value:function(e,t){var n=this.svgPiano.querySelector('rect[data-pitch="'.concat(e.pitch,'"]'));if(!n)return null;var r=this.getNoteEndTime(e)-this.getNoteStartTime(e),a=Number(n.getAttribute("x")),i=Number(n.getAttribute("width")),o=Math.max(this.config.pixelsPerTimeStep*r-this.config.noteSpacing,1);return{x:a,y:this.height-this.getNoteStartTime(e)*this.config.pixelsPerTimeStep-o,w:i,h:o}}},{key:"drawPiano",value:function(){this.svgPiano.innerHTML="";var e=this.config.whiteNoteWidth-this.config.blackNoteWidth/2,t=[1,3,6,8,10],n=0,r=0;this.config.showOnlyOctavesUsed?r=this.firstDrawnOctave*this.NOTES_PER_OCTAVE+this.LOW_C:(r=this.LOW_C-3,this.drawWhiteKey(r,n),this.drawWhiteKey(r+2,this.config.whiteNoteWidth),r+=3,n=2*this.config.whiteNoteWidth);for(var a=this.firstDrawnOctave;a<=this.lastDrawnOctave;a++)for(var i=0;i<this.NOTES_PER_OCTAVE;i++)-1===t.indexOf(i)&&(this.drawWhiteKey(r,n),n+=this.config.whiteNoteWidth),r++;this.config.showOnlyOctavesUsed?(r=this.firstDrawnOctave*this.NOTES_PER_OCTAVE+this.LOW_C,n=-this.config.whiteNoteWidth):(this.drawWhiteKey(r,n),r=this.LOW_C-3,this.drawBlackKey(r+1,e),r+=3,n=this.config.whiteNoteWidth);for(var o=this.firstDrawnOctave;o<=this.lastDrawnOctave;o++)for(var s=0;s<this.NOTES_PER_OCTAVE;s++)-1!==t.indexOf(s)?this.drawBlackKey(r,n+e):n+=this.config.whiteNoteWidth,r++}},{key:"drawWhiteKey",value:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.dataset.pitch=String(e),n.setAttribute("x",String(t)),n.setAttribute("y","0"),n.setAttribute("width",String(this.config.whiteNoteWidth)),n.setAttribute("height",String(this.config.whiteNoteHeight)),n.setAttribute("fill","white"),n.setAttribute("original-fill","white"),n.setAttribute("stroke","black"),n.setAttribute("stroke-width","3px"),n.classList.add("white"),this.svgPiano.appendChild(n),n}},{key:"drawBlackKey",value:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.dataset.pitch=String(e),n.setAttribute("x",String(t)),n.setAttribute("y","0"),n.setAttribute("width",String(this.config.blackNoteWidth)),n.setAttribute("height",String(this.config.blackNoteHeight)),n.setAttribute("fill","black"),n.setAttribute("original-fill","black"),n.setAttribute("stroke","black"),n.setAttribute("stroke-width","3px"),n.classList.add("black"),this.svgPiano.appendChild(n),n}},{key:"clearActiveNotes",value:function(){Object(Nn.a)(Object(R.a)(n.prototype),"unfillActiveRect",this).call(this,this.svg);for(var e=this.svgPiano.querySelectorAll("rect.active"),t=0;t<e.length;++t){var r=e[t];r.setAttribute("fill",r.getAttribute("original-fill")),r.classList.remove("active")}}}]),n}(Uq);!function(e){e[e.PAGE=0]="PAGE",e[e.NOTE=1]="NOTE",e[e.BAR=2]="BAR"}(Mq||(Mq={}));var Hq=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(_.a)(this,n),a=t.call(this,e,i),(void 0===i.pixelsPerTimeStep||i.pixelsPerTimeStep<=0)&&(a.config.pixelsPerTimeStep=0),a.instruments=i.instruments||[],a.render=new zq.StaffSVGRender(a.getScoreInfo(e),{noteHeight:a.config.noteHeight,noteSpacing:a.config.noteSpacing,pixelsPerTimeStep:a.config.pixelsPerTimeStep,noteRGB:a.config.noteRGB,activeNoteRGB:a.config.activeNoteRGB,defaultKey:i.defaultKey||0,scrollType:i.scrollType||Mq.PAGE},r),a.drawnNotes=e.notes.length,a.clear(),a.redraw(),a}return Object(C.a)(n,[{key:"clear",value:function(){this.render.clear()}},{key:"redraw",value:function(e,t){this.drawnNotes!==this.noteSequence.notes.length&&(this.render.scoreInfo=this.getScoreInfo(this.noteSequence));var n=e?this.getNoteInfo(e):void 0;return this.render.redraw(n,t)}},{key:"isNoteInInstruments",value:function(e){return void 0===e.instrument||0===this.instruments.length||this.instruments.indexOf(e.instrument)>=0}},{key:"timeToQuarters",value:function(e){var t=e*this.noteSequence.tempos[0].qpm/60;return Math.round(16*t)/16}},{key:"getNoteInfo",value:function(e){var t=this.timeToQuarters(e.startTime);return{start:t,length:this.timeToQuarters(e.endTime)-t,pitch:e.pitch,intensity:e.velocity}}},{key:"getScoreInfo",value:function(e){var t=this,n=[];return e.notes.forEach((function(e){t.isNoteInInstruments(e)&&n.push(t.getNoteInfo(e))})),{notes:n,tempos:e.tempos?e.tempos.map((function(e){return{start:t.timeToQuarters(e.time),qpm:e.qpm}})):[],keySignatures:e.keySignatures?e.keySignatures.map((function(e){return{start:t.timeToQuarters(e.time),key:e.key}})):[],timeSignatures:e.timeSignatures?e.timeSignatures.map((function(e){return{start:t.timeToQuarters(e.time),numerator:e.numerator,denominator:e.denominator}})):[]}}},{key:"clearActiveNotes",value:function(){this.redraw()}}]),n}(qq),Kq=/iPad|iPhone|iPod/.test(navigator.userAgent);function Xq(e,t){for(var n=S.di((function(){return e.reshape([t,46,4]).arraySync()})),r=gE.create(),a=[],i=0;i<t;i++)for(var o=0;o<46;o++)for(var s=0;s<4;s++){if(1===n[i][o][s]){var c=gE.Note.create({pitch:o+36,instrument:s,quantizedStartStep:i,quantizedEndStep:i+1});a.push(c)}}return r.notes=a,r.totalQuantizedSteps=a[a.length-1].quantizedEndStep,r.quantizationInfo={stepsPerQuarter:4},r}function Qq(e,t){var n=S.di((function(){return S.yi([t,46,4]).arraySync()}));return e.notes.forEach((function(r){var a=r.pitch-36,i=r.quantizedStartStep,o=r.quantizedEndStep-r.quantizedStartStep,s=r.instrument;if(s<0||s>=4)wE("Found invalid voice ".concat(s,". Skipping."),"Coconet",5);else{if(i+o>t)throw new Error("NoteSequence ".concat(e.id," has notes that are longer than the sequence's\n          totalQuantizedSteps."));for(var c=i;c<i+o;c++)n[c][a][s]=1}})),S.Uh([n])}var Yq={useSoftmaxLoss:!0,batchNormVarianceEpsilon:1e-7,numInstruments:4,numFilters:128,numLayers:33,numRegularConvLayers:0,dilation:[[1,1],[2,2],[4,4],[8,8],[16,16],[16,32],[1,1],[2,2],[4,4],[8,8],[16,16],[16,32],[1,1],[2,2],[4,4],[8,8],[16,16],[16,32],[1,1],[2,2],[4,4],[8,8],[16,16],[16,32],[1,1],[2,2],[4,4],[8,8],[16,16],[16,32]],layers:null,interleaveSplitEveryNLayers:16,numPointwiseSplits:4},Zq=function(){function e(t,n){Object(_.a)(this,e),this.residualPeriod=2,this.outputForResidual=null,this.residualCounter=-1,this.rawVars=null,this.spec=t,this.rawVars=n}return Object(C.a)(e,[{key:"dispose",value:function(){null!==this.rawVars&&S.Ae(this.rawVars),this.outputForResidual&&this.outputForResidual.dispose()}},{key:"predictFromPianoroll",value:function(e,t){var n=this;return S.di((function(){for(var r=n.getConvnetInput(e,t),a=n.spec.layers.length,i=0;i<a;i++){n.residualCounter+=1,n.residualSave(r);var o=null;n.spec.interleaveSplitEveryNLayers&&i>0&&i<a-2&&i%(n.spec.interleaveSplitEveryNLayers+1)===0&&(o=n.spec.numPointwiseSplits),r=n.applyConvolution(r,n.spec.layers[i],i,i>=n.spec.numRegularConvLayers,o),r=n.applyResidual(r,0===i,i===a-1,i),r=n.applyActivation(r,n.spec.layers[i],i),r=n.applyPooling(r,n.spec.layers[i],i)}return n.computePredictions(r)}))}},{key:"computePredictions",value:function(e){return this.spec.useSoftmaxLoss?e.transpose([0,1,3,2]).softmax().transpose([0,1,3,2]):e.sigmoid()}},{key:"residualReset",value:function(){this.outputForResidual=null,this.residualCounter=0}},{key:"residualSave",value:function(e){this.residualCounter%this.residualPeriod===1&&(this.outputForResidual=e)}},{key:"applyResidual",value:function(e,t,n,r){return null==this.outputForResidual?e:this.outputForResidual.shape[this.outputForResidual.shape.length-1]!==e.shape[e.shape.length-1]?(this.residualReset(),e):(this.residualCounter%this.residualPeriod===0&&(t||n||(e=e.add(this.outputForResidual))),e)}},{key:"getVar",value:function(e,t){var n="model/conv".concat(t,"/").concat(e);return this.rawVars[n]}},{key:"getSepConvVar",value:function(e,t){var n="model/conv".concat(t,"/SeparableConv2d/").concat(e);return this.rawVars[n]}},{key:"getPointwiseSplitVar",value:function(e,t,n){var r="model/conv".concat(t,"/split_").concat(t,"_").concat(n,"/").concat(e);return this.rawVars[r]}},{key:"applyConvolution",value:function(e,t,n,r,a){if(null==t.filters)return e;var i=t.filters,o=t.convStride||1,s=t.convPad?t.convPad.toLowerCase():"same",c=null;if(r){var u=this.getSepConvVar("depthwise_weights",n);if(a){c=S.ve(e,u,[o,o],s,"NHWC",t.dilation);for(var l=S.Fh(c,a,c.rank-1),f=[],d=0;d<a;d++){var p=i[3]/a,h=this.getPointwiseSplitVar("kernel",n,d),v=this.getPointwiseSplitVar("bias",n,d),m=S.Rf(l[d].reshape([-1,p]),h,!1,!1),b=S.wd(m,v);f.push(b.reshape([l[d].shape[0],l[d].shape[1],l[d].shape[2],p]))}c=S.ce(f,c.rank-1)}else{var g=this.getSepConvVar("pointwise_weights",n),y=this.getSepConvVar("biases",n);c=S.kh(e,u,g,[o,o],s,t.dilation,"NHWC").add(y)}}else{var O=this.getVar("weights",n),k=t.convStride||1,w=t.convPad?t.convPad.toLowerCase():"same";c=S.ie(e,O,[k,k],w,"NHWC",[1,1])}return this.applyBatchnorm(c,n)}},{key:"applyBatchnorm",value:function(e,t){var n=this,r=this.getVar("gamma",t),a=this.getVar("beta",t),i=this.getVar("popmean",t),o=this.getVar("popvariance",t);if(Kq){var s=o.arraySync()[0][0][0],c=S.Uh(s.map((function(e){return Math.sqrt(e+n.spec.batchNormVarianceEpsilon)})));return e.sub(i).mul(r.div(c)).add(a)}return S.Nd(e,S.Kh(i),S.Kh(o),S.Kh(a),S.Kh(r),this.spec.batchNormVarianceEpsilon)}},{key:"applyActivation",value:function(e,t,n){return"identity"===t.activation?e:e.relu()}},{key:"applyPooling",value:function(e,t,n){if(null==t.pooling)return e;var r=t.pooling,a=t.poolPad?t.poolPad.toLowerCase():"same";return S.Uf(e,[r[0],r[1]],[r[0],r[1]],a)}},{key:"getConvnetInput",value:function(e,t){return e=S.gh(1,"float32").sub(t).mul(e),t=S.gh(1,"float32").sub(t),e.concat(t,3)}}]),e}(),Jq=function(){function e(t){Object(_.a)(this,e),this.spec=null,this.initialized=!1,this.checkpointURL=t,this.spec=Yq}return Object(C.a)(e,[{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dispose(),t=yE.d.now(),this.instantiateFromSpec(),e.next=5,Object(yE.a)("".concat(this.checkpointURL,"/weights_manifest.json")).then((function(e){return e.json()})).then((function(e){return S.sf.loadWeights(e,r.checkpointURL)}));case 5:n=e.sent,this.convnet=new Zq(this.spec,n),this.initialized=!0,xE("Initialized model",t,"Coconet");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.convnet&&this.convnet.dispose(),this.initialized=!1}},{key:"isInitialized",value:function(){return this.initialized}},{key:"instantiateFromSpec",value:function(){this.spec.layers=[],this.spec.layers.push({filters:[3,3,2*this.spec.numInstruments,this.spec.numFilters]});for(var e=0;e<this.spec.numLayers-3;e++)this.spec.layers.push({filters:[3,3,this.spec.numFilters,this.spec.numFilters],dilation:this.spec.dilation?this.spec.dilation[e]:null});this.spec.layers.push({filters:[2,2,this.spec.numFilters,this.spec.numFilters]}),this.spec.layers.push({filters:[2,2,this.spec.numFilters,this.spec.numInstruments],activation:"identity"})}},{key:"infill",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o,s,c,u;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(LE(t),0!==t.notes.length){e.next=3;break}throw new Error("NoteSequence ".concat(t.id," does not have any notes to infill."));case 3:return r=t.totalQuantizedSteps||t.notes[t.notes.length-1].quantizedEndStep,a=Qq(t,r),i=.99,o=96,n?(o=n.numIterations||o,i=n.temperature||i,s=this.getCompletionMaskFromInput(n.infillMask,a)):s=this.getCompletionMask(a),e.next=10,this.run(a,o,i,s);case 10:return c=e.sent,u=Xq(c,r),a.dispose(),c.dispose(),s.dispose(),e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.gibbs(t,n,r,a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getCompletionMaskFromInput",value:function(e,t){if(e){for(var n=S.Wd([t.shape[1],4]),r=0;r<e.length;r++)n.set(1,e[r].step,e[r].voice);return S.di((function(){return n.toTensor().expandDims(1).tile([1,46,1]).expandDims(0)}))}return this.getCompletionMask(t)}},{key:"getCompletionMask",value:function(e){return S.di((function(){var t=e.sum(2,!0).equal(S.gh(0,"float32"));return S.Xd(t,"float32").add(S.zi(e))}))}},{key:"gibbs",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a){var i,o,s,c,u=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=S.gh(n,"float32"),o=t.clone(),s=mn.a.mark((function e(t){var n,s,c;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.yaoSchedule(t,i),s=u.bernoulliMask(o.shape,n,a),e.next=4,S.og();case 4:return c=S.di((function(){return u.convnet.predictFromPianoroll(o,s)})),e.next=7,S.og();case 7:return o=S.di((function(){var e=u.samplePredictions(c,r),t=S.wi(S.Xd(s,"bool"),e,o);return o.dispose(),c.dispose(),s.dispose(),n.dispose(),t})),e.next=10,S.og();case 10:case"end":return e.stop()}}),e)})),c=0;case 4:if(!(c<n)){e.next=9;break}return e.delegateYield(s(c),"t0",6);case 6:c++,e.next=4;break;case 9:return i.dispose(),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"yaoSchedule",value:function(e,t){return S.di((function(){var n=S.gh(.1,"float32"),r=S.gh(.9,"float32"),a=S.gh(.7,"float32"),i=r.sub(n).mul(S.gh(e,"float32")).div(t),o=r.sub(i).div(a);return n.reshape([1]).concat(o.reshape([1])).max()}))}},{key:"bernoulliMask",value:function(e,t,n){return S.di((function(){var r=Object(A.a)(e,4),a=r[0],i=r[1],o=r[2],s=r[3],c=S.ei(S.Mg([a,i,1,s],0,1,"float32"),[1,1,o,1]).less(t);return S.Xd(c,"float32").mul(n)}))}},{key:"samplePredictions",value:function(e,t){return S.di((function(){e=S.Dg(e,S.gh(1/t,"float32"));var n=S.qe(e,2,!1,!1),r=n.slice([0,0,n.shape[2]-1,0],[n.shape[0],n.shape[1],1,n.shape[3]]),a=S.Mg(r.shape,0,1,"float32").mul(r).less(n).argMax(2);return S.sg(a.flatten(),e.shape[2],1,0).reshape([e.shape[0],e.shape[1],e.shape[3],e.shape[2]]).transpose([0,1,3,2])}))}}]),e}(),$q="attention_cell_wrapper/",eV=function(){function e(t,n,r){Object(_.a)(this,e),this.cells=t,this.attnLength=n,this.attnSize=r}return Object(C.a)(e,[{key:"initialize",value:function(e){var t="rnn/".concat($q);this.attnInputMatrix=e["".concat(t,"kernel")],this.attnInputBias=e["".concat(t,"bias")],this.attnW=e["".concat(t,"attention/attn_w")],this.attnV=e["".concat(t,"attention/attn_v")],this.attnMatrix=e["".concat(t,"attention/kernel")],this.attnBias=e["".concat(t,"attention/bias")],this.attnOutputMatrix=e["".concat(t,"attention_output_projection/kernel")],this.attnOutputBias=e["".concat(t,"attention_output_projection/bias")]}},{key:"initState",value:function(){return{attention:S.yi([this.attnSize]),attentionState:S.yi([1,this.attnSize*this.attnLength])}}},{key:"call",value:function(e,t,n,r){var a=S.ce([e,r.attention.as2D(1,-1)],1),i=S.wd(S.Rf(a,this.attnInputMatrix),this.attnInputBias.as2D(1,-1)),o=S.lg(this.cells,i,t,n),s=Object(A.a)(o,2);t=s[0],n=s[1];for(var c=S.Xg(r.attentionState,[-1,this.attnLength,1,this.attnSize]),u=S.ie(c,this.attnW,[1,1],"same"),l=[],f=0;f<t.length;f++)l.push(t[f]),l.push(n[f]);var d=S.ce(l,1),p=S.Rf(d,this.attnMatrix).reshape([-1,1,1,this.attnSize]),h=S.Qh(S.jg(this.attnV,S.Th(S.wd(u,p))),[2,3]),v=S.Ah(h),m=S.Qh(S.jg(S.Xg(v,[-1,this.attnLength,1,1]),c),[1,2]).reshape([-1,this.attnSize]),b=r.attentionState.reshape([-1,this.attnLength,this.attnSize]),g=S.uh(b,[0,1,0],[b.shape[0],b.shape[1]-1,b.shape[2]]),y=S.wd(S.Rf(S.ce([n[2],m],1),this.attnOutputMatrix),this.attnOutputBias),O=m.flatten(),k=S.ce([g,y.as3D(y.shape[0],1,y.shape[1])],1).reshape([-1,this.attnLength*this.attnSize]);return{output:y,c:t,h:n,attentionState:{attention:O,attentionState:k}}}}],[{key:"isWrapped",value:function(e){return"rnn/".concat($q,"kernel")in e}}]),e}(),tV=function(){function e(t,n){Object(_.a)(this,e),this.checkpointURL=t,this.spec=n,this.initialized=!1,this.rawVars={},this.biasShapes=[],this.lstmCells=[]}return Object(C.a)(e,[{key:"isInitialized",value:function(){return this.initialized}},{key:"instantiateFromSpec",value:function(){this.dataConverter=iN(this.spec.dataConverter),this.attentionLength=this.spec.attentionLength,this.chordEncoder=this.spec.chordEncoder?pE(this.spec.chordEncoder):void 0,this.auxInputs=this.spec.auxInputs?this.spec.auxInputs.map((function(e){return v_(e)})):void 0}},{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r,a,i,o,s=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dispose(),t=yE.d.now(),this.spec){e.next=5;break}return e.next=5,Object(yE.a)("".concat(this.checkpointURL,"/config.json")).then((function(e){return e.json()})).then((function(e){if("MusicRNN"!==e.type)throw new Error("Attempted to instantiate MusicRNN model with incorrect type:\n                  ".concat(e.type));s.spec=e}));case 5:return this.instantiateFromSpec(),e.next=8,Object(yE.a)("".concat(this.checkpointURL,"/weights_manifest.json")).then((function(e){return e.json()})).then((function(e){return S.sf.loadWeights(e,s.checkpointURL)}));case 8:n=e.sent,r=eV.isWrapped(n),a=r?"rnn/".concat($q):"rnn/",this.forgetBias=S.gh(1),this.lstmCells.length=0,this.biasShapes.length=0,i=0,o=function(){var e=a+"multi_rnn_cell/cell_%d/basic_lstm_cell/".replace("%d",i.toString());if(!("".concat(e,"kernel")in n))return"break";s.lstmCells.push((function(t,r,a){return S.Md(s.forgetBias,n["".concat(e,"kernel")],n["".concat(e,"bias")],t,r,a)})),s.biasShapes.push(n["".concat(e,"bias")].shape[0]),++i};case 16:if("break"!==o()){e.next=20;break}return e.abrupt("break",22);case 20:e.next=16;break;case 22:this.lstmFcW=n["fully_connected/weights"],this.lstmFcB=n["fully_connected/biases"],r&&(this.attentionWrapper=new eV(this.lstmCells,this.attentionLength,this.biasShapes[0]/4),this.attentionWrapper.initialize(n)),this.rawVars=n,this.initialized=!0,xE("Initialized model",t,"MusicRNN");case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e=this;Object.keys(this.rawVars).forEach((function(t){return e.rawVars[t].dispose()})),this.rawVars={},this.forgetBias&&(this.forgetBias.dispose(),this.forgetBias=void 0),this.initialized=!1}},{key:"continueSequence",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a){var i;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.continueSequenceImpl(t,n,r,a,!1);case 2:return i=e.sent,e.abrupt("return",i.sequence);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"continueSequenceAndReturnProbabilities",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.continueSequenceImpl(t,n,r,a,!0));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"continueSequenceImpl",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a,i){var o,s,c,u,l,f,d=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(LE(t),!this.chordEncoder||a){e.next=3;break}throw new Error("Chord progression expected but not provided.");case 3:if(this.chordEncoder||!a){e.next=5;break}throw new Error("Unexpected chord progression provided.");case 5:if(this.initialized){e.next=8;break}return e.next=8,this.initialize();case 8:return o=yE.d.now(),s=S.di((function(){var e=d.dataConverter.toTensor(t),o=e.shape[0],s=e.shape[1],c=d.chordEncoder?d.chordEncoder.encodeProgression(a,o+n):void 0,u=d.auxInputs?S.ce(d.auxInputs.map((function(e){return e.getTensors(o+n)})),1):void 0,l=d.sampleRnn(e,n,r,c,u,i),f=l.samples;return{samples:S.Lh(f).as2D(f.length,s),probs:l.probs}})),e.next=12,s;case 12:if(c=e.sent,u=this.dataConverter.toNoteSequence(c.samples,t.quantizationInfo.stepsPerQuarter),l=[],!i){e.next=27;break}f=0;case 17:if(!(f<c.probs.length)){e.next=27;break}return e.t0=l,e.next=21,c.probs[f].data();case 21:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),c.probs[f].dispose();case 24:f++,e.next=17;break;case 27:return s.samples.dispose(),u.then((function(){return xE("Continuation completed",o,"MusicRNN",20)})),e.abrupt("return",{sequence:u,probs:l});case 30:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"sampleRnn",value:function(e,t,n,r,a,i){for(var o=e.shape[0],s=e.shape[1],c=[],u=[],l=0;l<this.biasShapes.length;l++)c.push(S.yi([1,this.biasShapes[l]/4])),u.push(S.yi([1,this.biasShapes[l]/4]));var f,d=this.attentionWrapper?this.attentionWrapper.initState():null;e=e.toFloat();for(var p=[],h=[],v=S.Fh(e.toFloat(),o),m=r?S.Fh(r,r.shape[0]):void 0,b=a?S.Fh(a,a.shape[0]):void 0,g=0;g<o+t;g++){var y=void 0;if(g<o)y=v[g];else{var O=f.matMul(this.lstmFcW).add(this.lstmFcB).as1D(),k=void 0;n?(O=O.div(S.gh(n)),k=S.mg(O,1).as1D()):k=O.argMax().as1D(),i&&h.push(S.Ah(O)),y=S.sg(k,s).toFloat(),p.push(y.as1D())}if(g===o+t-1)break;var w=[];if(m&&w.push(m[g+1]),w.push(y),b&&w.push(b[g]),y=S.ce(w,1),this.attentionWrapper){var x=this.attentionWrapper.call(y,c,u,d);c=x.c,u=x.h,d=x.attentionState,f=x.output}else{var j=S.lg(this.lstmCells,y,c,u),_=Object(A.a)(j,2);c=_[0],f=(u=_[1])[u.length-1]}}return{samples:p,probs:h}}}]),e}(),nV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.call(this,{})}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return e[0]}},{key:"call",value:function(e){return S.di((function(){var t=Object(A.a)(e,2),n=t[0],r=t[1];return S.wd(S.jg(S.Lg(r.shape),r),n)}))}},{key:"getClassName",value:function(){return"SamplingLayer"}}]),n}(i.Layer),rV=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_.a)(this,e),this.trained=!1,this.initialized=!1,this.config={encoder_layers:t.encoder_layers||[1024,256,64],decoder_layers:t.decoder_layers||[64,256,1024],input_size:t.input_size||256,latent_size:t.latent_size||4,beta:t.beta||1,epochs:t.epochs||10}}return Object(C.a)(e,[{key:"dispose",value:function(){this.initialized&&(this.encoder.dispose(),this.decoder.dispose(),this.vae.dispose(),this.initialized=!1)}},{key:"initialize",value:function(){this.dispose();var e=yE.d.now(),t=fa({shape:[this.config.input_size]});this.encoder=this.getEncoder(t);var n=this.encoder.apply(t),r=Object(A.a)(n,2)[0];this.decoder=this.getDecoder(r.shape.slice(1));var a=this.decoder.apply(r);this.vae=ca({inputs:t,outputs:a,name:"vae"}),this.initialized=!0,xE("Initialized model",e,"MidiMe")}},{key:"train",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o,s,c=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=yE.d.now(),this.trained=!1,a=.001,!1===S.ab.get("WEBGL_RENDER_FLOAT32_ENABLED")&&!1===S.ab.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&1===S.ab.get("WEBGL_VERSION")&&(a=5e-5),i=S.hi.adam(a),o=mn.a.mark((function e(r){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.og();case 2:return e.next=4,i.minimize((function(){return S.di((function(){var e=c.encoder.predict(t),a=Object(A.a)(e,3),i=a[1],o=a[2],s=c.vae.predict(t),u=c.loss(i,o,s,t);return n&&n(r,{y:s,total:u.totalLoss.arraySync(),losses:[u.reconLoss.arraySync(),u.latentLoss.arraySync()]}),u.totalLoss}))}));case 4:return e.next=6,S.og();case 6:case"end":return e.stop()}}),e)})),s=0;case 7:if(!(s<this.config.epochs)){e.next=12;break}return e.delegateYield(o(s),"t0",9);case 9:s++,e.next=7;break;case 12:xE("Training finished",r,"MidiMe"),this.trained=!0,i.dispose();case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sample",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n=this,r=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:1,this.initialized){e.next=4;break}return e.next=4,this.initialize();case 4:return e.abrupt("return",S.di((function(){var e=S.Lg([t,n.config.latent_size]);return n.decoder.predict(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"decode",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized){e.next=3;break}return e.next=3,this.initialize();case 3:return e.abrupt("return",this.decoder.predict(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"encode",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized){e.next=3;break}return e.next=3,this.initialize();case 3:return n=this.encoder.predict(t),r=Object(A.a)(n,2),a=r[0],e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){return this.vae.predict(e)}},{key:"getEncoder",value:function(e){for(var t=e,n=0;n<this.config.encoder_layers.length;n++)t=i.dense({units:this.config.encoder_layers[n],activation:"relu"}).apply(t);var r=this.getAffineLayers(t,this.config.latent_size,e,!1),a=this.getAffineLayers(t,this.config.latent_size,e,!0);return ca({inputs:e,outputs:[(new nV).apply([r,a]),r,a],name:"encoder"})}},{key:"getDecoder",value:function(e){for(var t=fa({shape:e}),n=t,r=0;r<this.config.decoder_layers.length;r++)n=i.dense({units:this.config.decoder_layers[r],activation:"relu"}).apply(n);return ca({inputs:t,outputs:this.getAffineLayers(n,this.config.input_size,t,!1),name:"decoder"})}},{key:"loss",value:function(e,t,n,r){var a=this;return S.di((function(){var i=a.klLoss(e,t),o=a.reconstructionLoss(r,n);return{latentLoss:i,reconLoss:o,totalLoss:S.wd(o,S.jg(i,a.config.beta))}}))}},{key:"reconstructionLoss",value:function(e,t){return S.di((function(){var n=S.Dg(S.Oh(e,t),2),r=S.Ce(n,S.jg(2,S.Dg(S.tg([1]),2)));return S.Zf(S.Qh(r,-1))}))}},{key:"klLoss",value:function(e,t){return S.di((function(){var n=S.Dg(e,2),r=S.Dg(t,2),a=S.wd(1,S.Hf(r)),i=S.wd(n,r),o=S.Oh(a,i),s=S.Ce(S.Zf(S.Qh(o,-1)),2);return S.jg(-1,s)}))}},{key:"getAffineLayers",value:function(e,t,n,r){var a=i.dense({units:t}).apply(e);return r?i.activation({activation:"softplus"}).apply(a):a}}]),e}(),aV=function e(t,n){if(Object(_.a)(this,e),void 0===t)throw Error("`kernel` is undefined.");if(void 0===n)throw Error("`bias` is undefined.");this.kernel=t,this.bias=n};function iV(e,t){return t.matMul(e.kernel).add(e.bias)}var oV=function e(){Object(_.a)(this,e)},sV=function(){function e(t,n){Object(_.a)(this,e),this.lstmFwVars=t,this.lstmBwVars=n}return Object(C.a)(e,[{key:"process",value:function(e){var t=this;return S.di((function(){return[t.singleDirection(e,!0),t.singleDirection(e,!1)]}))}},{key:"singleDirection",value:function(e,t){var n,r=e.shape[0],a=e.shape[1],i=t?this.lstmFwVars:this.lstmBwVars,o=[S.yi([r,i.bias.shape[0]/4]),S.yi([r,i.bias.shape[0]/4])],s=S.gh(1),c=function(e,t){return S.Md(s,i.kernel,i.bias,e,t[0],t[1])},u=S.Fh(e.toFloat(),a,1),l=[],f=Object(M.a)(t?u:u.reverse());try{for(f.s();!(n=f.n()).done;){o=c(n.value.squeeze([1]),o),l.push(o[1])}}catch(d){f.e(d)}finally{f.f()}return t?l:l.reverse()}}]),e}(),cV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r,a){var i;return Object(_.a)(this,n),(i=t.call(this)).bidirectionalLstm=new sV(e,r),i.muVars=a,i.zDims=a?i.muVars.bias.shape[0]:null,i}return Object(C.a)(n,[{key:"encode",value:function(e,t){var n=this;if(t)throw new Error("Variable-length segments not supported in flat encoder");return S.di((function(){var t=n.bidirectionalLstm.process(e),r=Object(A.a)(t,2),a=r[0],i=r[1],o=S.ce([a[a.length-1],i[0]],1);return n.muVars?iV(n.muVars,o):o}))}}]),n}(oV),uV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r,a){var i;return Object(_.a)(this,n),(i=t.call(this)).baseEncoders=e,i.numSteps=r,i.muVars=a,i.zDims=i.muVars.bias.shape[0],i}return Object(C.a)(n,[{key:"encode",value:function(e,t){var n=this;if(t){if(1!==e.shape[0])throw new Error("When using variable-length segments, batch size must be 1.");if(t.length!==this.numSteps[0])throw new Error("Must provide length for all variable-length segments.")}return S.di((function(){for(var r=e,a=0;a<n.baseEncoders.length;++a){for(var i=n.numSteps[a],o=S.Fh(r,i,1),s=[],c=0;c<i;++c)s.push(n.baseEncoders[a].encode(0===a&&t?S.xh(o[c],[0,0,0],[1,t[c],-1]):o[c]));r=S.Lh(s,1)}return iV(n.muVars,r.squeeze([1]))}))}}]),n}(oV);function lV(e,t,n){for(var r=[],a=[],i=[],o=S.Fh(iV(n,e).tanh(),2*t.length,1),s=function(e){var n=t[e],s=S.gh(1);r.push((function(e,t,r){return S.Md(s,n.kernel,n.bias,e,t,r)})),a.push(o[2*e]),i.push(o[2*e+1])},c=0;c<t.length;++c)s(c);return{cell:r,c:a,h:i}}var fV=function e(){Object(_.a)(this,e)},dV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r,a,i,o,s){var c;return Object(_.a)(this,n),(c=t.call(this)).lstmCellVars=e,c.zToInitStateVars=r,c.outputProjectVars=a,c.zDims=c.zToInitStateVars.kernel.shape[0],c.outputDims=i||a.bias.shape[0],o&&s&&(c.controlBidirectionalLstm=new sV(o,s)),c}return Object(C.a)(n,[{key:"decode",value:function(e,t,n,r,a){var i=this,o=e.shape[0];return S.di((function(){var s=lV(e,i.lstmCellVars,i.zToInitStateVars),c=a?S.Re(a,0):void 0,u=[],l=n||S.yi([o,i.outputDims]);if(i.controlBidirectionalLstm){var f=i.controlBidirectionalLstm.process(c),d=Object(A.a)(f,2),p=d[0],h=d[1];c=S.ce([S.Lh(p,1),S.Lh(h,1)],2)}for(var v=c?S.Fh(S.ei(c,[o,1,1]),a.shape[0],1):void 0,m=0;m<t;++m){var b=v?[l,e,S.Kh(v[m],[1])]:[l,e],g=S.lg(s.cell,S.ce(b,1),s.c,s.h),y=Object(A.a)(g,2);s.c=y[0],s.h=y[1];var O=iV(i.outputProjectVars,s.h[s.h.length-1]);l=i.sample(O,r),u.push(l)}return S.Lh(u,1)}))}}]),n}(fV),pV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"sample",value:function(e,t){var n=e;return(t?S.lf(S.ph(n.div(S.gh(t))),S.Mg(n.shape)):S.lf(n,0)).toFloat()}}]),n}(dV),hV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"sample",value:function(e,t){var n=e,r=t?S.mg(n.div(S.gh(t)),1).as1D():n.argMax(1).as1D();return S.sg(r,this.outputDims).toFloat()}}]),n}(dV),vV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r,a,i,o,s){var c;return Object(_.a)(this,n),(c=t.call(this,e,r,a,i.numDims,o,s)).nade=i,c}return Object(C.a)(n,[{key:"sample",value:function(e,t){var n=S.Fh(e,[this.nade.numHidden,this.nade.numDims],1),r=Object(A.a)(n,2),a=r[0],i=r[1];return this.nade.sample(a,i)}}]),n}(dV),mV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"sample",value:function(e,t){var n=S.Fh(e,3,1),r=Object(A.a)(n,3),a=r[0],i=r[1],o=r[2];if(i=S.ph(i),o=S.Th(o),t){a=S.ph(a.div(S.gh(t)));var s=S.Mg(a.shape,0,1);a=S.kf(a,s).toFloat()}else a=S.kf(S.ph(a),.5).toFloat();return S.ce([a,i,o],1)}}]),n}(dV),bV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this)).coreDecoders=e,r.numDecoders=r.coreDecoders.length,r.zDims=r.coreDecoders[0].zDims,r.outputDims=r.coreDecoders.reduce((function(e,t){return e+t.outputDims}),0),r}return Object(C.a)(n,[{key:"decodeSeparately",value:function(e,t,n,r,a){for(var i=[],o=0;o<this.coreDecoders.length;++o)i.push(this.coreDecoders[o].decode(e,t,n[o],r,a));return i}},{key:"decode",value:function(e,t,n,r,a){var i=this;return S.di((function(){var o=i.decodeSeparately(e,t,i.coreDecoders.map((function(e){return n})),r,a);return S.ce(o,-1)}))}}]),n}(fV),gV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(e,r,a,i){var o;return Object(_.a)(this,n),(o=t.call(this)).splitDecoder=new bV(e),o.lstmCellVars=r,o.zToInitStateVars=a,o.numSteps=i,o.zDims=o.zToInitStateVars.kernel.shape[0],o.outputDims=o.splitDecoder.outputDims,o}return Object(C.a)(n,[{key:"decode",value:function(e,t,n,r,a){var i=this,o=e.shape[0];return S.di((function(){for(var n=lV(e,i.lstmCellVars,i.zToInitStateVars),s=[],c=new Array(i.splitDecoder.numDecoders).fill(void 0),u=S.yi([o,1]),l=a?S.Fh(a,i.numSteps):void 0,f=0;f<i.numSteps;++f){var d=S.lg(n.cell,u,n.c,n.h),p=Object(A.a)(d,2);n.c=p[0],n.h=p[1];var h=i.splitDecoder.decodeSeparately(n.h[n.h.length-1],t/i.numSteps,c,r,l?l[f]:void 0);s.push(S.ce(h,-1)),c=h.map((function(e){return e.slice([0,e.shape[1]-1,0],[o,1,e.shape[e.rank-1]]).squeeze([1]).toFloat()}))}return S.ce(s,1)}))}}]),n}(fV),yV=function(){function e(t,n){Object(_.a)(this,e),this.numDims=t.shape[0],this.numHidden=t.shape[2],this.encWeights=t.as2D(this.numDims,this.numHidden),this.decWeightsT=n.as2D(this.numDims,this.numHidden)}return Object(C.a)(e,[{key:"sample",value:function(e,t){var n=this,r=e.shape[0];return S.di((function(){for(var a=[],i=e.clone(),o=0;o<n.numDims;o++){var s=S.ph(i),c=n.encWeights.slice([o,0],[1,n.numHidden]).as1D(),u=n.decWeightsT.slice([o,0],[1,n.numHidden]),l=t.slice([0,o],[r,1]).add(S.Rf(s,u,!1,!0)).sigmoid().greaterEqual(S.gh(.5)).toFloat().as1D();o<n.numDims-1&&(i=i.add(S.wg(l.toFloat(),c))),a.push(l)}return S.Lh(a,1)}))}}]),e}(),OV=function(){function e(t,n){Object(_.a)(this,e),this.initialized=!1,this.checkpointURL=t,this.spec=n}return Object(C.a)(e,[{key:"instantiateFromSpec",value:function(){this.dataConverter=iN(this.spec.dataConverter),this.chordEncoder=this.spec.chordEncoder?pE(this.spec.chordEncoder):void 0}},{key:"dispose",value:function(){var e=this;void 0!==this.rawVars&&Object.keys(this.rawVars).forEach((function(t){return e.rawVars[t].dispose()})),this.encoder=void 0,this.decoder=void 0,this.initialized=!1}},{key:"getLstmLayers",value:function(e,t){for(var n=[],r=0;;){var a=e.replace("%d",r.toString());if(!(a+"kernel"in t))break;n.push(new aV(t[a+"kernel"],t[a+"bias"])),++r}return n}},{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r,a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w,x,j,_=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dispose(),t=yE.d.now(),this.spec){e.next=5;break}return e.next=5,Object(yE.a)("".concat(this.checkpointURL,"/config.json")).then((function(e){return e.json()})).then((function(e){if("MusicVAE"!==e.type)throw new Error("Attempted to instantiate MusicVAE model with incorrect type:\n                  ".concat(e.type));_.spec=e}));case 5:return this.instantiateFromSpec(),r="multi_rnn_cell/".concat(n="cell_%d/lstm_cell/"),a="decoder/hierarchical_level_0/",o="encoder/".concat(i="cell_%d/bidirectional_rnn/%s/multi_rnn_cell/cell_0/lstm_cell/"),s="encoder/hierarchical_level_%d/".concat(i.replace("%d","0")),c="control_preprocessing/".concat(i),e.next=15,Object(yE.a)("".concat(this.checkpointURL,"/weights_manifest.json")).then((function(e){return e.json()})).then((function(e){return S.sf.loadWeights(e,_.checkpointURL)}));case 15:if(u=e.sent,this.rawVars=u,l=new aV(u["encoder/mu/kernel"],u["encoder/mu/bias"]),!this.dataConverter.numSegments){e.next=27;break}if(f=this.getLstmLayers(s.replace("%s","fw"),u),d=this.getLstmLayers(s.replace("%s","bw"),u),f.length===d.length&&2===f.length){e.next=23;break}throw Error("Only 2 hierarchical encoder levels are supported. "+"Got ".concat(f.length," forward and ").concat(d.length," ")+"backward.");case 23:p=[0,1].map((function(e){return new cV(f[e],d[e])})),this.encoder=new uV(p,[this.dataConverter.numSegments,1],l),e.next=32;break;case 27:if(h=this.getLstmLayers(o.replace("%s","fw"),u),v=this.getLstmLayers(o.replace("%s","bw"),u),h.length===v.length&&1===h.length){e.next=31;break}throw Error("Only single-layer bidirectional encoders are supported. "+"Got ".concat(h.length," forward and ").concat(v.length," ")+"backward.");case 31:this.encoder=new cV(h[0],v[0],l);case 32:if(m="".concat(c.replace("%s","fw").replace("%d","0"),"kernel")in u,b=this.dataConverter.numSegments?"core_decoder/":"",g=[],this.dataConverter.NUM_SPLITS)for(y=0;y<this.dataConverter.NUM_SPLITS;++y)g.push("".concat(b,"core_decoder_").concat(y,"/decoder/"));else g.push("".concat(b,"decoder/"));if(O=[null],k=[null],!m){e.next=43;break}if(O=this.getLstmLayers(c.replace("%s","fw"),u),k=this.getLstmLayers(c.replace("%s","bw"),u),O.length===k.length&&1===O.length){e.next=43;break}throw Error("Only single-layer bidirectional control preprocessing is supported. Got "+"".concat(O.length," forward and ").concat(k.length," backward."));case 43:w=g.map((function(e){var t=_.getLstmLayers(e+r,u),n=new aV(u["".concat(e,"z_to_initial_state/kernel")],u["".concat(e,"z_to_initial_state/bias")]),a=new aV(u["".concat(e,"output_projection/kernel")],u["".concat(e,"output_projection/bias")]);return"".concat(e,"nade/w_enc")in u?new vV(t,n,a,new yV(u["".concat(e,"nade/w_enc")],u["".concat(e,"nade/w_dec_t")]),O[0],k[0]):"GrooveConverter"===_.spec.dataConverter.type?new mV(t,n,a,void 0,O[0],k[0]):_.spec.useBooleanDecoder?new pV(t,n,a,void 0,O[0],k[0]):new hV(t,n,a,void 0,O[0],k[0])})),this.dataConverter.numSegments?(x=this.getLstmLayers(a+n,u),j=new aV(u["".concat(a,"initial_state/kernel")],u["".concat(a,"initial_state/bias")]),this.decoder=new gV(w,x,j,this.dataConverter.numSegments)):1===w.length?this.decoder=w[0]:this.decoder=new bV(w),this.zDims=this.decoder.zDims,this.initialized=!0,xE("Initialized model",t,"MusicVAE");case 48:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isInitialized",value:function(){return this.initialized}},{key:"checkControlArgs",value:function(e){var t=(e=e||{}).extraControls||{};if(this.chordEncoder&&!e.chordProgression)throw new Error("Chord progression expected but not provided.");if(!this.chordEncoder&&e.chordProgression)throw new Error("Unexpected chord progression provided.");if(this.chordEncoder&&this.dataConverter.endTensor&&e.chordProgression.length>1)throw new Error("Multiple chords not supported when using variable-length segments.");if(this.spec.conditionOnKey&&null==e.key)throw new Error("Key expected but not provided.");if(!this.spec.conditionOnKey&&null!=e.key)throw new Error("Unexpected key provided.");if(this.spec.extraControls){var n,r=Object(M.a)(this.spec.extraControls);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!(a.name in t))throw new Error("Missing control signal: ".concat(a.name));if(t[a.name].shape[1]!==a.depth)throw new Error("Control signal ".concat(a.name," has invalid depth: ").concat(t[a.name].shape[1]," != ").concat(a.depth))}}catch(s){r.e(s)}finally{r.f()}}var i=this.spec.extraControls?new Set(this.spec.extraControls.map((function(e){return e.name}))):new Set;for(var o in t)i.has(o)||wE("Unspecified control signal provided: ".concat(o),"MusicVAE",5)}},{key:"controlArgsToTensor",value:function(e){var t=this;return e=e||{},S.di((function(){var n=[];if(e.chordProgression){var r=t.encodeChordProgression(e.chordProgression);n.push(r)}if(null!=e.key){var a=S.sg(S.Ve([t.dataConverter.numSteps],e.key,"int32"),12);n.push(a)}if(e.extraControls){var i,o=Object(M.a)(t.spec.extraControls);try{for(o.s();!(i=o.n()).done;){var s=i.value;n.push(e.extraControls[s.name])}}catch(c){o.e(c)}finally{o.f()}}return n.length?S.ee(n,1):void 0}))}},{key:"interpolateTensors",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a){var i,o,s,c=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized){e.next=3;break}return e.next=3,this.initialize();case 3:return e.next=5,this.encodeTensors(t,a);case 5:return i=e.sent,o=S.di((function(){return c.getInterpolatedZs(i,n)})),i.dispose(),e.next=10,this.decodeTensors(o,r,a);case 10:return s=e.sent,o.dispose(),e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"interpolate",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a){var i,o,s,c,u=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkControlArgs(a),this.initialized){e.next=4;break}return e.next=4,this.initialize();case 4:return i=0,e.next=7,this.encode(t,a);case 7:return o=e.sent,s=S.di((function(){return u.getInterpolatedZs(o,n)})),o.dispose(),c=this.decode(s,r,a),s.dispose(),c.then((function(){return xE("Interpolation completed",i,"MusicVAE",20)})),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getSegmentLengths",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o,s,c,u,l=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.shape[0]>1)){e.next=2;break}throw new Error("Variable-length segments not supported for batch size > 1.");case 2:return n=this.dataConverter.numSteps,r=this.dataConverter.numSegments,a=S.di((function(){return S.bg(S.Ne(t.squeeze([0]),l.dataConverter.endTensor.expandDims(0)),1)})),e.next=7,a.data();case 7:for(i=e.sent,a.dispose(),o=n/r,s=[],c=0,u=i.indexOf(1);-1!==u;)s.push(u-c+1),c+=o,u=i.indexOf(1,c);if(s.length===r){e.next=16;break}throw new Error("Incorrect number of segments: ".concat(s.length," != ").concat(r));case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"encodeChordProgression",value:function(e){var t=this.dataConverter.numSteps,n=this.dataConverter.numSegments,r=this.dataConverter.SEGMENTED_BY_TRACK?t/n:t,a=this.dataConverter.SEGMENTED_BY_TRACK?S.ee([this.chordEncoder.encode(KC).expandDims(0),this.chordEncoder.encodeProgression(e,r-1)],0):this.chordEncoder.encodeProgression(e,r);return this.dataConverter.SEGMENTED_BY_TRACK?S.ei(a,[n,1]):a}},{key:"encodeTensors",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkControlArgs(n),this.initialized){e.next=4;break}return e.next=4,this.initialize();case 4:if(!this.dataConverter.endTensor){e.next=10;break}return e.next=7,this.getSegmentLengths(t);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=void 0;case 11:return r=e.t0,e.abrupt("return",S.di((function(){var e=a.controlArgsToTensor(n),i=[t];if(e){var o=S.ei(S.Re(e,0),[t.shape[0],1,1]);i.push(o)}var s=S.fe(i,2);return a.encoder.encode(s,r)})));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"encode",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized){e.next=3;break}return e.next=3,this.initialize();case 3:return r=yE.d.now(),a=S.di((function(){return S.Lh(t.map((function(e){return o.dataConverter.toTensor(e)})))})),e.next=7,this.encodeTensors(a,n);case 7:return i=e.sent,a.dispose(),xE("Encoding completed",r,"MusicVAE",20),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"decodeTensors",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkControlArgs(r),this.initialized){e.next=4;break}return e.next=4,this.initialize();case 4:return e.abrupt("return",S.di((function(){var e=a.controlArgsToTensor(r);return a.decoder.decode(t,a.dataConverter.numSteps,void 0,n,e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"decode",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d,p=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.length>3&&void 0!==p[3]?p[3]:RC,i=p.length>4&&void 0!==p[4]?p[4]:MC,this.initialized){e.next=5;break}return e.next=5,this.initialize();case 5:return o=yE.d.now(),e.next=8,this.decodeTensors(t,n,r);case 8:s=e.sent,c=S.di((function(){return S.Fh(s,s.shape[0]).map((function(e){return e.squeeze([0])}))})),u=[],l=Object(M.a)(c),e.prev=12,l.s();case 14:if((f=l.n()).done){e.next=24;break}return d=f.value,e.t0=u,e.next=19,this.dataConverter.toNoteSequence(d,a,i);case 19:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),d.dispose();case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(12),l.e(e.t2);case 29:return e.prev=29,l.f(),e.finish(29);case 32:return s.dispose(),xE("Decoding completed",o,"MusicVAE",20),e.abrupt("return",u);case 35:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getInterpolatedZs",value:function(e,t){if("number"===typeof t&&(t=[t]),2!==e.shape[0]&&4!==e.shape[0])throw new Error("Invalid number of input sequences. Requires length 2, or 4");if(1!==t.length&&2!==t.length)throw new Error("Invalid number of dimensions. Requires length 1, or 2.");var n=t[0],r=2===t.length?t[1]:n;return S.di((function(){var t=S.Ff(0,1,n),a=e.slice([0,0],[1,e.shape[1]]).as1D(),i=e.slice([1,0],[1,e.shape[1]]).as1D();if(2===e.shape[0]){var o=i.sub(a);return S.wg(t,o).add(a)}if(4===e.shape[0]){var s=S.Ff(0,1,r),c=e.slice([2,0],[1,e.shape[1]]).as1D(),u=e.slice([3,0],[1,e.shape[1]]).as1D(),l=S.gh(1).sub(t),f=S.gh(1).sub(s),d=a.mul(S.wg(f,l).as3D(r,n,1));return d=S.yd(d,i.mul(S.wg(s,l).as3D(r,n,1))),d=S.yd(d,c.mul(S.wg(f,t).as3D(r,n,1))),(d=S.yd(d,u.mul(S.wg(s,t).as3D(r,n,1)))).as2D(n*r,e.shape[1])}throw new Error("Invalid number of note sequences. Requires length 2, or 4")}))}},{key:"sampleTensors",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o=this,s=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:.5,r=s.length>2?s[2]:void 0,this.checkControlArgs(r),this.initialized){e.next=6;break}return e.next=6,this.initialize();case 6:return a=S.di((function(){return S.Lg([t,o.decoder.zDims])})),e.next=9,this.decodeTensors(a,n,r);case 9:return i=e.sent,a.dispose(),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sample",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o,s,c,u=this,l=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:.5,r=l.length>2?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:RC,i=l.length>4&&void 0!==l[4]?l[4]:MC,this.checkControlArgs(r),this.initialized){e.next=8;break}return e.next=8,this.initialize();case 8:return o=yE.d.now(),s=S.di((function(){return S.Lg([t,u.decoder.zDims])})),c=this.decode(s,n,r,a,i),s.dispose(),c.then((function(){return xE("Sampling completed",o,"MusicVAE",20)})),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"similarTensors",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a,i){var o,s,c,u,l=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r<0||r>1)){e.next=2;break}throw new Error("Similarity must be between 0 and 1.");case 2:if(this.initialized){e.next=5;break}return e.next=5,this.initialize();case 5:return o=S.Re(t,0),e.next=8,this.encodeTensors(o,i);case 8:return s=e.sent,o.dispose(),c=S.di((function(){var e=S.Lg([n,l.decoder.zDims]);return S.wd(s.mul(r),e.mul(1-r))})),s.dispose(),e.next=14,this.decodeTensors(c,a,i);case 14:return u=e.sent,c.dispose(),e.abrupt("return",u);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"similar",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n,r,a,i){var o,s,c,u,l=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkControlArgs(i),!(r<0||r>1)){e.next=3;break}throw new Error("Similarity must be between 0 and 1.");case 3:if(this.initialized){e.next=6;break}return e.next=6,this.initialize();case 6:return o=0,e.next=9,this.encode([t],i);case 9:return s=e.sent,c=S.di((function(){var e=S.Lg([n,l.decoder.zDims]);return S.wd(s.mul(r),e.mul(1-r))})),s.dispose(),u=this.decode(c,a,i),c.dispose(),u.then((function(){return xE("Similar sequence generation completed",o,"MusicVAE",20)})),e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()}]),e}();function kV(e){for(var t=0;t<2;++t)e.c[t].dispose(),e.h[t].dispose()}function wV(e,t,n){if((t=void 0!==t?t:1)<0||t>1)throw new Error("Invalid temperature specified");var r;if(0===t)r=S.Bd(e,0);else{t<1&&(e=S.Ce(e,S.gh(t,"float32")));var a=S.Xg(S.Ah(e,0),[1,-1]),i=S.mg(a,1,n,!0);r=S.Xg(i,[])}return r}var xV,jV,SV=function(){function e(t){Object(_.a)(this,e),this.checkpointURL=t,this.initialized=!1}return Object(C.a)(e,[{key:"isInitialized",value:function(){return this.initialized}},{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized&&this.dispose(),void 0!==this.checkpointURL||void 0!==t){e.next=3;break}throw new Error("Need to specify either URI or static variables");case 3:if(void 0!==t){e.next=10;break}return e.next=6,Object(yE.a)("".concat(this.checkpointURL,"/weights_manifest.json")).then((function(e){return e.json()})).then((function(e){return S.sf.loadWeights(e,i.checkpointURL)}));case 6:n=e.sent,this.modelVars=n,e.next=11;break;case 10:this.modelVars=t;case 11:for(this.decLSTMCells=[],this.decForgetBias=S.gh(1,"float32"),r=function(e){var t="phero_model/decoder/rnn/rnn/multi_rnn_cell/cell_".concat(e,"/lstm_cell/");i.decLSTMCells.push((function(e,n,r){return S.Md(i.decForgetBias,i.modelVars[t+"kernel"],i.modelVars[t+"bias"],e,n,r)}))},a=0;a<2;++a)r(a);this.resetState(),this.initialized=!0,this.next(0),this.resetState();case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRnnInputFeats",value:function(){var e=this;return S.di((function(){var t=S.Vh([e.button],"float32");return S.Oh(S.jg(2,S.Ce(t,7)),1).as1D()}))}},{key:"next",value:function(e,t,n){return this.nextWithCustomSamplingFunction(e,(function(e){return wV(e,t,n)}))}},{key:"nextFromKeyList",value:function(e,t,n,r){return this.nextWithCustomSamplingFunction(e,(function(e){var a=S.Vh(t,"int32"),i=wV(e=S.bf(e,a),n,r),o=S.bf(a,S.Xg(i,[1]));return i=S.Xg(o,[])}))}},{key:"nextFromKeyWhitelist",value:function(e,t,n,r){return m.log("nextFromKeyWhitelist() is deprecated, and will be removed in a future          version. Please use nextFromKeyList() instead","PianoGenie",5),this.nextFromKeyList(e,t,n,r)}},{key:"nextWithCustomSamplingFunction",value:function(e,t){var n=this.lastState;this.button=e;var r=this.getRnnInputFeats(),a=this.evaluateModelAndSample(r,n,t),i=Object(A.a)(a,2),o=i[0],s=i[1];return r.dispose(),kV(this.lastState),this.lastState=o,s}},{key:"evaluateModelAndSample",value:function(e,t,n){var r=this;if(!this.initialized)throw new Error("Model is not initialized.");var a=S.di((function(){var a=S.Rf(S.Re(e,0),r.modelVars["phero_model/decoder/rnn_input/dense/kernel"]);a=S.wd(a,r.modelVars["phero_model/decoder/rnn_input/dense/bias"]);var i=S.lg(r.decLSTMCells,a,t.c,t.h),o=Object(A.a)(i,2),s=o[0],c=o[1],u={c:s,h:c},l=S.Rf(c[1],r.modelVars["phero_model/decoder/pitches/dense/kernel"]);l=S.wd(l,r.modelVars["phero_model/decoder/pitches/dense/bias"]);var f=S.Xg(l,[88]);return[u,n(f).dataSync()[0]]})),i=Object(A.a)(a,2);return[i[0],i[1]]}},{key:"resetState",value:function(){void 0!==this.lastState&&kV(this.lastState),this.lastState=function(){for(var e={c:[],h:[]},t=0;t<2;++t)e.c.push(S.yi([1,128],"float32")),e.h.push(S.yi([1,128],"float32"));return e}()}},{key:"dispose",value:function(){var e=this;this.initialized&&(Object.keys(this.modelVars).forEach((function(t){return e.modelVars[t].dispose()})),this.decForgetBias.dispose(),kV(this.lastState),this.initialized=!1)}}]),e}(),_V=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"getRnnInputFeats",value:function(){var e=this;return S.di((function(){var t,r=[Object(Nn.a)(Object(R.a)(n.prototype),"getRnnInputFeats",e).call(e)],a=e.lastOutput,i=e.lastTime,o=e.time;void 0===e.deltaTimeOverride?t=(o.getTime()-i.getTime())/1e3:(t=e.deltaTimeOverride,e.deltaTimeOverride=void 0);var s=S.gh(a,"int32"),c=S.yd(s,S.gh(1,"int32")),u=S.Xd(S.sg(c,89),"float32");r.push(u);var l=S.gh(t,"float32"),f=S.eh(S.jg(l,31.25)),d=S.cg(f,32),p=S.Xd(S.wd(d,1e-4),"int32"),h=S.sg(p,33),v=S.Xd(h,"float32");return r.push(v),e.lastTime=o,S.de(r)}))}},{key:"nextWithCustomSamplingFunction",value:function(e,t){this.time=new Date;var r=Object(Nn.a)(Object(R.a)(n.prototype),"nextWithCustomSamplingFunction",this).call(this,e,t);return this.lastOutput=r,this.lastTime=this.time,r}},{key:"overrideLastOutput",value:function(e){this.lastOutput=e}},{key:"overrideDeltaTime",value:function(e){this.deltaTimeOverride=e}},{key:"resetState",value:function(){Object(Nn.a)(Object(R.a)(n.prototype),"resetState",this).call(this),this.lastOutput=-1,this.lastTime=new Date,this.lastTime.setSeconds(this.lastTime.getSeconds()-1e5),this.time=new Date}}]),n}(SV);!function(e){e[e.None=0]="None",e[e.C=1]="C",e[e.Cs=2]="Cs",e[e.D=3]="D",e[e.Eb=4]="Eb",e[e.E=5]="E",e[e.F=6]="F",e[e.Fs=7]="Fs",e[e.G=8]="G",e[e.Ab=9]="Ab",e[e.A=10]="A",e[e.Bb=11]="Bb",e[e.B=12]="B"}(xV||(xV={})),function(e){e[e.None=0]="None",e[e.Maj=1]="Maj",e[e.Min=2]="Min",e[e.Aug=3]="Aug",e[e.Dim=4]="Dim",e[e.Seven=5]="Seven",e[e.Maj7=6]="Maj7",e[e.Min7=7]="Min7",e[e.Min7b5=8]="Min7b5"}(jV||(jV={}));var CV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"getRnnInputFeats",value:function(){var e=this;return S.di((function(){var t=[Object(Nn.a)(Object(R.a)(n.prototype),"getRnnInputFeats",e).call(e)],r=S.gh(e.chordRoot,"int32"),a=S.Ph(r,S.gh(1,"int32")),i=S.Xd(S.sg(a,12),"float32");t.push(i);var o=S.gh(e.chordFamily,"int32"),s=S.Ph(o,S.gh(1,"int32")),c=S.Xd(S.sg(s,8),"float32");return t.push(c),S.de(t)}))}},{key:"setChordRoot",value:function(e){this.chordRoot=e}},{key:"setChordFamily",value:function(e){this.chordFamily=e}},{key:"resetState",value:function(){Object(Nn.a)(Object(R.a)(n.prototype),"resetState",this).call(this),this.chordRoot=xV.None,this.chordFamily=jV.None}}]),n}(_V),EV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"getRnnInputFeats",value:function(){var e=this;return S.di((function(){var t=[Object(Nn.a)(Object(R.a)(n.prototype),"getRnnInputFeats",e).call(e)],r=S.gh(e.keySignature,"int32"),a=S.Ph(r,S.gh(1,"int32")),i=S.Xd(S.sg(a,12),"float32");return t.push(i),S.de(t)}))}},{key:"setKeySignature",value:function(e){this.keySignature=e}},{key:"resetState",value:function(){Object(Nn.a)(Object(R.a)(n.prototype),"resetState",this).call(this),this.keySignature=xV.None}}]),n}(_V),NV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"getRnnInputFeats",value:function(){var e=this;return S.di((function(){var t=[Object(Nn.a)(Object(R.a)(n.prototype),"getRnnInputFeats",e).call(e)],r=S.gh(e.chordRoot,"int32"),a=S.Ph(r,S.gh(1,"int32")),i=S.Xd(S.sg(a,12),"float32");t.push(i);var o=S.gh(e.chordFamily,"int32"),s=S.Ph(o,S.gh(1,"int32")),c=S.Xd(S.sg(s,8),"float32");return t.push(c),S.de(t)}))}},{key:"setChordRoot",value:function(e){this.chordRoot=e}},{key:"setChordFamily",value:function(e){this.chordFamily=e}},{key:"resetState",value:function(){Object(Nn.a)(Object(R.a)(n.prototype),"resetState",this).call(this),this.chordRoot=xV.None,this.chordFamily=jV.None}}]),n}(EV),TV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"getRnnInputFeats",value:function(){var e=this;return S.di((function(){var t=[Object(Nn.a)(Object(R.a)(n.prototype),"getRnnInputFeats",e).call(e)],r=S.gh(e.chordFamily,"int32"),a=S.Ph(r,S.gh(1,"int32")),i=S.Xd(S.sg(a,8),"float32");return t.push(i),S.de(t)}))}},{key:"setChordFamily",value:function(e){this.chordFamily=e}},{key:"resetState",value:function(){Object(Nn.a)(Object(R.a)(n.prototype),"resetState",this).call(this),this.chordFamily=jV.None}}]),n}(EV),IV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(_V),AV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(CV),MV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(EV),PV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(NV),RV=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return n}(TV),DV=n(296),FV=n(221),LV=n(413),zV=16e3,qV=Object(yE.b)(zV);function VV(e){return BV.apply(this,arguments)}function BV(){return(BV=Object(bn.a)(mn.a.mark((function e(t){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(yE.a)(t).then((function(e){return e.arrayBuffer()})).then((function(e){return qV.decodeAudioData(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UV(e){return WV.apply(this,arguments)}function WV(){return(WV=Object(bn.a)(mn.a.mark((function e(t){var n,r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReader,r=new Promise((function(e,r){n.onerror=function(){n.abort(),r(new DOMException("Something went wrong reading that file."))},n.onload=function(){e(n.result)},n.readAsArrayBuffer(t)})),e.abrupt("return",r.then((function(e){return qV.decodeAudioData(e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GV(e,t){t.power||(t.power=2);var n=function(e,t){var n=t.nFft||2048,r=t.winLength||n,a=t.hopLength||Math.floor(r/4),i=tB(r);i=JV(i,n);for(var o=function(e,t,n){for(var r=Math.floor((e.length-t)/n)+1,a=Array.from({length:r},(function(e,n){return new Float32Array(t)})),i=0;i<r;i++){var o=i*n,s=e.slice(o,o+t);a[i].set(s),s.length}return a}(e=function(e,t){for(var n=$V(e,t),r=0;r<t;r++)n[r]=n[2*t-r],n[n.length-r-1]=n[n.length-2*t+r-1];return n}(e,Math.floor(n/2)),n,a),s=[],c=o.length,u=n+2,l=0;l<c;l++){var f=new Float32Array(u);s[l]=f}for(var d=0;d<c;d++){var p=eB(ZV(o[d],i));s[d].set(p.slice(0,u))}return s}(e,t),r=function(e,t){var n=e.map((function(e){return function(e,t){return e.map((function(e){return Math.pow(e,t)}))}(function(e){for(var t=new Float32Array(e.length/2),n=0;n<e.length/2;n++)t[n]=Math.sqrt(e[2*n]*e[2*n]+e[2*n+1]*e[2*n+1]);return t}(e),t)})),r=e[0].length-1;return[n,r]}(n,t.power),a=Object(A.a)(r,2),i=a[0],o=a[1];t.nFft=o;var s=function(e){for(var t=e.fMin||0,n=e.fMax||e.sampleRate/2,r=e.nMels||128,a=e.nFft||2048,i=function(e,t){return nB(0,e/2,Math.floor(1+t/2))}(e.sampleRate,a),o=function(e,t,n){var r=oB(t),a=oB(n);return nB(r,a,e).map((function(e){return function(e){return 700*(Math.exp(e/1125)-1)}(e)}))}(r+2,t,n),s=function(e){for(var t=new Float32Array(e.length-1),n=0;n<e.length;n++)t[n]=e[n+1]-e[n];return t}(o),c=function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=new Float32Array(t.length);for(var a=0;a<e.length;a++)for(var i=0;i<t.length;i++)n[a][i]=e[a]-t[i];return n}(o,i),u=c[0].length,l=[],f=0;f<r;f++){l[f]=new Float32Array(u);for(var d=0;d<c[f].length;d++){var p=-c[f][d]/s[f],h=c[f+2][d]/s[f+1],v=Math.max(0,Math.min(p,h));l[f][d]=v}}for(var m=function(e){var t=2/(o[2+e]-o[e]);l[e]=l[e].map((function(e){return e*t}))},b=0;b<l.length;b++)m(b);return l}(t);return function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=YV(e[r],t);return n}(i,s)}function HV(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,r=e.length,a=e[0].length,i=[],o=0;o<r;o++)i[o]=new Float32Array(a);for(var s=0;s<r;s++)for(var c=0;c<a;c++){var u=e[s][c];i[s][c]=10*Math.log10(Math.max(t,u))}if(n){if(n<0)throw new Error("topDb must be non-negative.");for(var l=0;l<r;l++)for(var f=sB(i[l]),d=0;d<a;d++)i[l][d]=Math.max(i[l][d],f-n)}return i}function KV(e){if(1===e.numberOfChannels)return e.getChannelData(0);if(2!==e.numberOfChannels)throw Error("".concat(e.numberOfChannels," channel audio is not supported."));for(var t=e.getChannelData(0),n=e.getChannelData(1),r=new Float32Array(e.length),a=0;a<e.length;++a)r[a]=(t[a]+n[a])/2;return r}function XV(e){return QV.apply(this,arguments)}function QV(){return QV=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o,s,c,u=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:zV,t.sampleRate!==n){e.next=3;break}return e.abrupt("return",KV(t));case 3:if(r=t.sampleRate,a=t.length*n/r,yE.c){e.next=14;break}return i=new OfflineAudioContext(t.numberOfChannels,t.duration*n,n),(o=i.createBufferSource()).buffer=t,o.connect(i.destination),o.start(),e.abrupt("return",i.startRendering().then((function(e){return e.getChannelData(0)})));case 14:return wE("Safari does not support WebAudio resampling, so this may be slow.","O&F",5),s=KV(t),c=new Float32Array(a),LV(FV(c,[a]),FV(s,[s.length])),e.abrupt("return",c);case 19:case"end":return e.stop()}}),e)}))),QV.apply(this,arguments)}function YV(e,t){if(e.length!==t[0].length)throw new Error("Each entry in filterbank should have dimensions "+"matching FFT. |mags| = ".concat(e.length,", ")+"|filterbank[0]| = ".concat(t[0].length,"."));for(var n=new Float32Array(t.length),r=0;r<t.length;r++){var a=ZV(e,t[r]);n[r]=a.reduce((function(e,t){return e+t}))}return n}function ZV(e,t){if(e.length!==t.length)return console.error("Buffer length ".concat(e.length," != window length ").concat(t.length,".")),null;for(var n=new Float32Array(e.length),r=0;r<e.length;r++)n[r]=t[r]*e[r];return n}function JV(e,t){if(e.length>t)throw new Error("Data is longer than length.");var n=Math.floor((t-e.length)/2);return $V(e,[n,t-e.length-n])}function $V(e,t){var n,r;if("object"===typeof t){var a=Object(A.a)(t,2);n=a[0],r=a[1]}else n=r=t;var i=new Float32Array(e.length+n+r);return i.set(e,n),i}function eB(e){var t=new DV(e.length),n=t.createComplexArray(),r=t.toComplexArray(e);return t.transform(n,r),n}function tB(e){for(var t=new Float32Array(e),n=0;n<e;n++)t[n]=.5*(1-Math.cos(2*Math.PI*n/(e-1)));return t}function nB(e,t,n){for(var r=(t-e)/(n-1),a=new Float32Array(n),i=0;i<n;i++)a[i]=e+r*i;return a}function rB(e){var t=S.Oh(e,69);return t=S.Ce(t,12),t=S.Dg(2,t),t=S.jg(440,t)}function aB(e){return iB.apply(this,arguments)}function iB(){return(iB=Object(bn.a)(mn.a.mark((function e(t){var n,r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.Oh(S.Ce(S.Hf(t),S.Hf(2)),S.Ce(S.Hf(440),S.Hf(2))),n=S.jg(12,n),n=S.wd(n,69),e.next=5,n.array();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oB(e){return 1125*Math.log(1+e/700)}function sB(e){return e.reduce((function(e,t){return Math.max(e,t)}))}var cB=16e3,uB=.032,lB=88;function fB(e){return dB.apply(this,arguments)}function dB(){return(dB=Object(bn.a)(mn.a.mark((function e(t){var n;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,XV(t);case 2:return n=e.sent,e.abrupt("return",HV(GV(n,{sampleRate:cB,hopLength:512,nMels:229,nFft:2048,fMin:30})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pB(e,t){var n=Math.ceil(e.length/t),r=e.length%t,a=0;if(n>1&&r>0&&r<=3&&(n-=1,a=r,r=0),1===n)return S.Wh(e).expandDims(0);var i,o=t+6,s=S.Wh(e.slice(0,o)).expandDims(0),c=S.Wh(e.slice(e.length-o)).expandDims(0);if(2===n)return S.ce([s,c],0);i=r?S.Wh(e).pad([[0,t-r],[0,0]]).as3D(n,t,-1):S.Wh(e.slice(0,e.length-a)).as3D(n,t,-1);var u=S.uh(i,[0,t-3],[n-2,-1]),l=S.uh(i,[2,0],[-1,3]),f=S.ce([u,i.slice(1,n-2),l],1);return S.ce([s,f,c],0)}function hB(e,t,n){return 1===e.shape[0]?e:S.di((function(){var r=e.slice([0,0],[1,t]),a=n%t;a<=3&&(a+=t);var i=e.slice([e.shape[0]-1,e.shape[1]-a],[-1,-1]),o=[r,i];if(e.shape[0]>2){var s=e.shape[0]-2;o=[r,e.slice([1,3],[s,t]).as3D(1,s*t,-1),i]}return S.ce(o,1)}))}function vB(e,t,n){return mB.apply(this,arguments)}function mB(){return mB=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=function(e,t,n){s[e]?u[e]||(l(e,t),s[e]=t+1,c[e]=n):(s[e]=t+1,c[e]=n)},l=function(e,t){o.notes.push(gE.Note.create({pitch:e+21,startTime:(s[e]-1)*uB,endTime:t*uB,velocity:c[e]})),s[e]=0},a=w.length>3&&void 0!==w[3]?w[3]:.5,i=w.length>4&&void 0!==w[4]?w[4]:.5,o=gE.create(),s=new Uint32Array(lB),c=new Uint8Array(lB),u=new Uint8Array(lB),d=S.di((function(){var e=S.kf(n,a),o=S.kf(t,i);return e=e.pad([[0,1],[0,0]]),o=o.pad([[0,1],[0,0]]),r=r.pad([[0,1],[0,0]]),[o=S.Of(o,e),e,r]})),e.next=11,Promise.all(d.map((function(e){return e.data()})));case 11:for(p=e.sent,h=Object(A.a)(p,3),v=h[0],m=h[1],b=h[2],d.forEach((function(e){return e.dispose()})),g=t.shape[0],y=0;y<g+1;++y){for(O=0;O<lB;++O)m[k=y*lB+O]?f(O,y,b[k]):!v[k]&&s[O]&&l(O,y);u=m.slice(y*lB,(y+1)*lB)}return o.totalTime=g*uB,e.abrupt("return",o);case 21:case"end":return e.stop()}}),e)}))),mB.apply(this,arguments)}var bB=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;Object(_.a)(this,e),this.checkpointURL=t,this.chunkLength=n}return Object(C.a)(e,[{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dispose(),t=yE.d.now(),e.next=4,Object(yE.a)("".concat(this.checkpointURL,"/weights_manifest.json")).then((function(e){return e.json()})).then((function(e){return S.sf.loadWeights(e,r.checkpointURL)}));case 4:n=e.sent,this.build(n),Object.keys(n).map((function(e){return n[e].dispose()})),this.initialized=!0,xE("Initialized model",t,"O&F");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.initialized&&(this.onsetsCnn.dispose(),this.onsetsRnn.dispose(),this.activationCnn.dispose(),this.frameRnn.dispose(),this.velocityCnn.dispose(),this.initialized=!1)}},{key:"isInitialized",value:function(){return this.initialized}},{key:"transcribeFromMelSpec",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o,s,c,u,l=this,f=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:4,this.isInitialized()||this.initialize(),r=yE.d.now(),wE("Computing onsets, frames, and velocities...","O&F",20),a=S.di((function(){var e=pB(t,l.chunkLength);return l.processBatches(e,l.chunkLength,t.length,n)})),i=Object(A.a)(a,3),o=i[0],s=i[1],c=i[2],wE("Converting to NoteSequence...","O&F",20),(u=vB(o,s,c)).then((function(){o.dispose(),s.dispose(),c.dispose(),xE("Transcribed from mel spec",r,"O&F")})),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transcribeFromAudioBuffer",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i=this,o=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:4,r=yE.d.now(),(a=fB(t)).then((function(){return xE("Converted audio to mel spec",r,"O&F",20)})),e.abrupt("return",a.then((function(e){return i.transcribeFromMelSpec(e.map((function(e){return Array.from(e)}),n))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"transcribeFromAudioFile",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UV(t);case 2:return n=e.sent,e.abrupt("return",this.transcribeFromAudioBuffer(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transcribeFromAudioURL",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t){var n;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VV(t);case 2:return n=e.sent,e.abrupt("return",this.transcribeFromAudioBuffer(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processBatches",value:function(e,t,n,r){var a,i,o,s=this,c=function(e){return[s.onsetsCnn.predict(e,r),s.activationCnn.predict(e,r),s.velocityCnn.predict(e,r)]};if(1===e.shape[0]){var u=c(e.expandDims(-1)),l=Object(A.a)(u,3);a=l[0],i=l[1],o=l[2]}else{for(var f=c(e.expandDims(-1)),d=[],p=0;p<3;++p)d.push(hB(f[p],t,n));a=d[0],i=d[1],o=d[2]}var h=this.onsetsRnn.predict(a,this.chunkLength);a.dispose();var v=S.fe([h,i],-1);i.dispose();var m=this.frameRnn.predict(v,this.chunkLength),b=S.Zd(o,0,1).mul(S.gh(80)).add(S.gh(10)).toInt();return o.dispose(),[m.squeeze(),h.squeeze(),b.squeeze()]}},{key:"build",value:function(e){var t=this;S.di((function(){t.onsetsCnn=new gB,t.onsetsCnn.setWeights(e,"onsets"),t.onsetsRnn=new yB([null,t.onsetsCnn.outputShape[2]]),t.onsetsRnn.setWeights(e,"onsets","onset_probs"),t.activationCnn=new gB("sigmoid"),t.activationCnn.setWeights(e,"frame","activation_probs"),t.frameRnn=new yB([null,176]),t.frameRnn.setWeights(e,"frame","frame_probs"),t.velocityCnn=new gB("linear"),t.velocityCnn.setWeights(e,"velocity","onset_velocities")}))}}]),e}(),gB=function(){function e(t){Object(_.a)(this,e),this.nn=ua();var n={filters:48,kernelSize:[3,3],activation:"linear",useBias:!1,padding:"same",dilationRate:[1,1],inputShape:[null,229,1],trainable:!1},r={scale:!1,trainable:!1};this.nn.add(i.conv2d(n)),this.nn.add(i.batchNormalization(r)),this.nn.add(i.activation({activation:"relu"})),n.inputShape=null,this.nn.add(i.conv2d(n)),this.nn.add(i.batchNormalization(r)),this.nn.add(i.activation({activation:"relu"})),this.nn.add(i.maxPooling2d({poolSize:[1,2],strides:[1,2]})),n.filters=96,this.nn.add(i.conv2d(n)),this.nn.add(i.batchNormalization(r)),this.nn.add(i.activation({activation:"relu"})),this.nn.add(i.maxPooling2d({poolSize:[1,2],strides:[1,2]}));var a=this.nn.outputShape;this.nn.add(i.reshape({targetShape:[a[1],a[2]*a[3]]})),this.nn.add(i.dense({units:768,activation:"relu",trainable:!1})),t&&this.nn.add(i.dense({units:lB,activation:t,trainable:!1})),this.outputShape=this.nn.outputShape}return Object(C.a)(e,[{key:"dispose",value:function(){this.nn.dispose()}},{key:"predict",value:function(e,t){return this.nn.predict(e,{batchSize:t})}},{key:"setWeights",value:function(e,t,n){function r(t){var n=e[t];if(void 0===n)throw Error("Variable not found: ".concat(t));return n}var a=[r("".concat(t,"/conv0/weights")),r("".concat(t,"/conv0/BatchNorm/beta")),r("".concat(t,"/conv0/BatchNorm/moving_mean")),r("".concat(t,"/conv0/BatchNorm/moving_variance")),r("".concat(t,"/conv1/weights")),r("".concat(t,"/conv1/BatchNorm/beta")),r("".concat(t,"/conv1/BatchNorm/moving_mean")),r("".concat(t,"/conv1/BatchNorm/moving_variance")),r("".concat(t,"/conv2/weights")),r("".concat(t,"/conv2/BatchNorm/beta")),r("".concat(t,"/conv2/BatchNorm/moving_mean")),r("".concat(t,"/conv2/BatchNorm/moving_variance")),r("".concat(t,"/fc_end/weights")),r("".concat(t,"/fc_end/biases"))];n&&(a=a.concat([r("".concat(t,"/").concat(n,"/weights")),r("".concat(t,"/").concat(n,"/biases"))])),this.nn.setWeights(a)}}]),e}(),yB=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:384;function r(){var e=i.lstm({inputShape:t,units:n,returnSequences:!0,recurrentActivation:"sigmoid",returnState:!0,kernelInitializer:"zeros",recurrentInitializer:"zeros",biasInitializer:"zeros",trainable:!1}),r=[fa({shape:t}),fa({shape:[n]}),fa({shape:[n]})];return ca({inputs:r,outputs:e.apply(r)})}Object(_.a)(this,e),this.dense=ua(),this.units=n,this.lstm=r(),this.dense.add(i.dense({inputShape:[null,n],units:lB,activation:"sigmoid",trainable:!1}))}return Object(C.a)(e,[{key:"dispose",value:function(){this.lstm.dispose(),this.dense.dispose()}},{key:"setWeights",value:function(e,t,n){var r=this;function a(t){var n=e[t];if(void 0===n)throw Error("Variable not found: ".concat(t));return n}var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=S.Fh(e,4,-1),r=Object(A.a)(n,4),a=r[0],i=r[1],o=r[2],s=r[3];return S.ce([a,o.add(S.gh(t)),i,s],-1)},o="cudnn_lstm/rnn/multi_rnn_cell/cell_0/cudnn_compatible_lstm_cell";!function(e){return e.setWeights((n=a("".concat(t,"/").concat(o,"/kernel")),S.Fh(i(n),[n.shape[0]-r.units,r.units])).concat(i(a("".concat(t,"/").concat(o,"/bias")),1)));var n}(this.lstm),this.dense.setWeights([a("".concat(t,"/").concat(n,"/weights")),a("".concat(t,"/").concat(n,"/biases"))])}},{key:"predict",value:function(e,t){var n=this;return S.di((function(){return n.predictImpl(e,t)}))}},{key:"predictImpl",value:function(e,t){for(var n=e.shape[1],r=Math.ceil(n/t),a=[S.yi([1,this.units]),S.yi([1,this.units])],i=[],o=0;o<r;++o){var s=e.slice([0,o*t],[-1,o<r-1?t:-1]),c=this.lstm.predict([s,a[0],a[1]]);i.push(this.dense.predict(c[0])),a=c.slice(1)}return 1===i.length?i[0]:S.fe(i,1)}}]),e}(),OB=2048,kB=[[1,1,1.0087615084725814],[2,1,.029087889211125567],[2,2,.958243896036208],[3,2,.5326346877272624],[3,3,.45988057223186607],[4,3,1.0072850129664943],[5,4,1.0050894259864507],[6,4,.016233689242197466],[6,5,.9763230964529687],[7,5,.5149287456976357],[7,6,.48299891928441196],[8,6,1.0020339883784544],[9,7,1.0013940582804204],[10,7,.004285414445239434],[10,8,.9936677765505681],[11,8,.4979349533263788],[11,9,.5020647178266697],[12,9,.9896782321684733],[12,10,.006967080931645349],[13,10,1.0022486641537054],[14,11,1.0033233953996759],[15,11,.4782757843614299],[15,12,.5183887055972138],[16,12,.9736767011426267],[16,13,.01804416217807709],[17,13,1.0056329663266226],[18,14,1.00808642668908],[19,14,.4576416347984229],[19,15,.5340800956534676],[20,15,.9582897445862256],[20,16,.028988367857957848],[21,16,1.008754652772106],[22,17,1.0122552436937966],[23,17,.4380796830853842],[23,18,.5491738237632201],[24,18,.9434838949694413],[24,19,.039794474296176746],[25,19,1.0116287566447584],[26,20,1.0158945544322868],[27,20,.41952402212367873],[27,21,.5637020154076856],[28,21,.9292283399303117],[28,22,.05045785324282485],[29,22,1.0142694870195312],[30,23,1.0190617246342517],[31,23,.40191289323704393],[31,24,.5776942788784806],[32,24,.915494649120402],[32,25,.060974426459003916],[33,25,1.016690283888679],[34,26,1.0218076651124588],[35,26,.3851885348435194],[35,27,.5911779611807773],[36,27,.9022565352474414],[36,28,.07134062388959171],[37,28,1.0189038677945517],[38,29,1.0241776077147466],[39,29,.369297000124277],[39,30,.6041783722578726],[40,30,.8894896443111251],[40,31,.08155334505527755],[41,31,1.0209222848386956],[42,32,1.0262117836546005],[43,32,.35418795675261777],[43,33,.6167189821271176],[44,33,.87717137085618],[44,34,.09160992335204851],[45,34,1.0227569476841007],[46,35,1.0279460165329002],[47,35,.3398144781420294],[47,36,.628821594757742],[48,36,.8652806947525041],[48,37,.10150809298528844],[49,37,1.0244186730654867],[50,38,1.029412240942602],[51,38,.32613283297317347],[51,39,.6405065019041107],[52,39,.8537980365619783],[52,40,.11124595830527892],[53,40,1.0259177162406141],[54,41,1.030638956235277],[55,41,.3131022777355948],[55,42,.6517926196031543],[56,42,.8427051290118196],[56,43,.12082196533877268],[57,43,1.0272638027474759],[58,44,1.031651623831845],[59,44,.3006848555240512],[59,45,.6626976096262132],[60,45,.8319849024715039],[60,46,.13023487533380312],[61,46,1.0284661577762764],[62,47,1.0324730153919173],[63,47,.28884520321029805],[63,48,.6732379878311283],[64,48,.821621382643116],[64,49,.1394837401591093],[65,49,1.0295335334192939],[66,50,1.0331235182054521],[67,50,.27755036829985363],[67,51,.68342922107227],[68,51,.8115995989355603],[68,52,.148567879414825],[69,52,1.0304742340231496],[70,53,1.0336214033370148],[71,53,.2667696361817086],[71,54,.6932858140884962],[72,54,.8019055022130549],[72,55,.1574868591255191],[73,55,1.031296139836255],[74,56,1.0339830613212895],[75,56,.2564743680536822],[75,57,.7028213875855097],[76,57,.7925258907912134],[76,58,.16624047189958738],[77,58,1.032006729117501],[78,59,1.0342232095724524],[79,59,.24663784949713183],[79,60,.7120487485622758],[80,60,.7834483437084975],[80,61,.17482871845079165],[81,61,1.032613098850059],[82,62,1.0343550751159198],[83,62,.2372351494674972],[83,63,.7209799537859948],[84,63,.7746611604312031],[84,64,.18325179038711914],[85,64,1.0331219841851924],[86,65,1.0343905557724016],[87,65,.22824298931879333],[87,66,.7296263672031092],[88,66,.7661533062642226],[88,67,.19151005417692718],[89,67,1.0335397767254908],[90,68,1.0343403625078313],[91,68,.21963962139622123],[91,69,.7379987119645334],[92,69,.7579143628308538],[92,70,.19960403621540457],[93,70,1.0338725417430177],[94,71,1.0342141453043734],[95,71,.21140471667072153],[95,72,.746107117663542],[96,72,.7499344830670268],[96,73,.20753440891552338],[97,73,1.0341260344172454],[98,74,1.034020604597683],[99,74,.20351926086574523],[99,75,.7539611633021215],[100,75,.7422043502477234],[100,76,.2153019777561019],[101,76,1.0343057151671131],[102,77,1.0337675900563705],[103,77,.19596545852169872],[103,78,.7615699164421695],[104,78,.734715140616724],[104,79,.22290766922455862],[105,79,1.034416764143981],[106,80,1.03346218824938],[107,80,.1887266444456389],[107,81,.7689419689404797],[108,81,.7274584892496355],[108,82,.23035251959385997],[109,82,1.0344640949448594],[110,83,1.0331108005456808],[111,83,.18178720201436843],[111,84,.7760854696185804],[112,84,.7204264588178948],[112,85,.23763766448199494],[113,85,1.0344523675990727],[114,86,1.032719212418228],[115,86,.1751324878193402],[115,87,.7830081541774375],[116,87,.7136115109646374],[116,88,.2447643291417676],[117,88,1.0343860008764458],[118,89,1.0322926551739824],[119,89,.16874876216974247],[119,90,.789717372631832],[120,90,.7070064800338803],[120,91,.2517338194331562],[121,91,1.0342691839607763],[122,92,1.0318358610025598],[123,92,.16262312499771858],[123,93,.7962201145052664],[124,93,.7006045489251309],[124,94,.25854751343650967],[125,94,1.0341058875275075],[126,95,1.0313531121234998],[127,95,.15674345673841866],[127,96,.8025230320033012],[128,96,.6943992268713032],[128,97,.2652068536620191],[129,97,1.033899874262366],[130,98,1.030848284714744],[131,98,.1510983637896712],[131,99,.8086324613545763],[132,99,.6883843289574696],[132,100,.2717133398209474],[133,100,1.033654708853177],[134,101,1.0303248882205327],[135,101,.14567712818173575],[135,102,.8145544424922615],[136,102,.6825539572209546],[136,103,.2780685221191216],[137,103,1.033373767485838],[138,104,1.0297861005632643],[139,104,.14046966111762169],[139,105,.8202947372282664],[140,105,.6769024831869065],[140,106,.28427399504058354],[141,106,1.0330602468722847],[142,107,1.029234799720434],[143,107,.13546646006984392],[143,108,.8258588460540109],[144,108,.671424531713726],[144,109,.290331391589362],[145,109,1.0327171728357682],[146,110,1.0286735920712562],[147,110,.13065856914309196],[147,111,.8312520236957351],[148,111,.6661149660273628],[148,112,.2962423779602388],[149,112,1.03234740847843],[150,113,1.0281048378703825],[151,113,.12603754244145],[151,114,.8364792935255917],[152,114,.6609688738465388],[152,115,.30200864860954885],[153,115,1.0319536619522978],[154,116,1.0275306741623285],[155,116,.12159541018943322],[155,117,.8415454609370665],[156,117,.655981554500098],[156,118,.3076319217011811],[157,118,1.031538493855763],[158,119,1.0269530354146845],[159,119,.11732464738966399],[159,120,.846455125764718],[160,120,.6511485069565366],[160,121,.3131139349019227],[161,121,1.0311043242739946],[162,122,1.0263736721146446],[163,122,.11321814480714538],[163,123,.851212693834753],[164,123,.6464654186857061],[164,124,.3184564415055735],[165,124,1.0306534394819706],[166,125,1.0257941675461106],[167,125,.10926918209624069],[167,126,.8558223877141483],[168,126,.6419281552876014],[168,127,.32366120686047056],[169,127,1.0301879983273805],[170,128,1.0252159529388847],[171,128,.10547140289367021],[171,129,.8602882567276612],[172,129,.6375327508240597],[172,130,.32873000508360367],[173,130,1.0297100383091813],[174,131,1.0246403211604227],[175,131,.10181879172477112],[175,132,.8646141862987496],[176,132,.6332753987956673],[176,133,.33366461604209907],[177,133,1.0292214813668379],[178,134,1.0240684391009978],[179,134,.09830565257411007],[179,135,.8688039066707689],[180,135,.6291524437169539],[180,136,.3384668225808326],[181,136,1.0287241393952773],[182,137,1.0235013588866442],[183,137,.0949265889928822],[183,138,.8728610010546515],[184,138,.6251603732380943],[184,139,.3431384079843332],[185,139,1.0282197194980238],[186,140,1.0229400280388043],[187,140,.09167648561647405],[187,141,.8767889132518744],[188,141,.6212958107744541],[188,142,.3476811536535296],[189,142,1.0277098289923983],[190,143,1.0223852986877378],[191,143,.08855049098843445],[191,144,.8805909547856343],[192,144,.6175555086043407],[192,145,.35209683698566024],[193,145,1.0271959801772084],[194,146,1.021837935933431],[195,146,.08554400158179727],[195,147,.8842703115872171],[196,147,.6139363413989273],[196,148,.35638722943949186],[197,148,1.026679594876984],[198,149,1.0212986254395027],[199,149,.082652646931321],[199,150,.8878300502607867],[200,150,.6104353001536761],[200,151,.3605540947783916],[201,151,1.0261620087703698],[202,152,1.020767980334856],[203,152,.07987227578640096],[203,153,.8912731239662092],[204,153,.6070494864912312],[204,154,.364599187472458],[205,154,1.025644475516362],[206,155,1.0202465474911722],[207,155,.07719894321045902],[207,156,.8946023779404728],[208,156,.6037761073076129],[208,157,.36852425125748506],[209,157,1.0251281706842847],[210,158,1.0197348132361097],[211,158,.07462889855138014],[211,159,.8978205546916732],[212,159,.6006124697383151],[212,160,.3723310178292769],[213,160,1.0246141955013988],[214,161,1.0192332085569418],[215,161,.07215857422040488],[215,162,.9009302988805],[216,162,.5975559764226185],[216,163,.37602120567284064],[217,163,1.024103580422386],[218,164,1.018742113842709],[219,164,.06978457521665815],[219,165,.9039341619174114],[220,165,.5946041210439893],[220,166,.3795965190111676],[221,166,1.0235972885322195],[222,167,1.0182618632088625],[223,167,.0675036693443592],[223,168,.9068346062921914],[224,168,.5917544841265701],[224,169,.3830586468674795],[225,169,1.0230962187892327],[226,170,1.0177927484431766],[227,170,.06531277806896706],[227,171,.9096340096561174],[228,171,.5890047290713193],[228,172,.38640926223293437],[229,172,1.0226012091159231],[230,173,1.017335022608167],[231,173,.0632089679653424],[231,174,.9123346686734497],[232,174,.586352598418078],[232,175,.3896500213288084],[233,175,1.0221130393455482],[234,176,1.0168889033326205],[235,176,.06118944272087777],[235,177,.914938802652698],[236,177,.5837959103122896],[236,178,.39278256296329067],[237,178,1.0216324340290364],[238,179,1.0164545758191],[239,179,.05925153564332089],[239,180,.9174485569826359],[240,180,.5813325551691159],[240,181,.3958085079669357],[241,181,1.0211600651125134],[242,182,1.01603219559476],[243,182,.05739270264601734],[243,183,.919866006375456],[244,183,.578960492519135],[244,184,.39872945870775167],[245,184,1.020696554488055],[246,185,1.0156218910279706],[247,185,.055610515672866775],[247,186,.9221931579354511],[248,186,.5766777480237313],[248,187,.4015469986761612],[249,187,1.0202424764259312],[250,188,1.0152237656316911],[251,188,.05390265653168126],[251,189,.9244319540637365],[252,189,.5744824106486663],[252,190,.4042626921377848],[253,190,1.0197983598926021],[254,191,1.0148379001729047],[255,191,.052266911108559244],[255,192,.9265842752073952],[256,192,.5723726299899468],[256,193,.40687808384383367],[257,193,1.0193646907609162],[258,194,1.0144643546050645],[259,194,.05070116393653833],[259,195,.9286519424651887],[260,195,.5703466137364466],[260,196,.4093946987997115],[261,196,1.0189419139168765],[262,197,1.014103169839173],[263,197,.04920339309393266],[263,198,.9306367200572258],[264,198,.5684026252644323],[264,199,.41181404208517797],[265,199,1.0185304352678317],[266,200,1.0137543693675302],[267,200,.04777166540942449],[267,201,.9325403176671191],[268,201,.5665389813575877],[268,202,.4141375987198434],[269,202,1.0181306236573189],[270,203,1.0134179607527265],[271,203,.04640413195303674],[271,204,.934364392667829],[272,204,.5647540500383554],[272,205,.4163668335733731],[273,205,1.017742812691386],[274,206,1.0130939369942324],[275,206,.04509902379599986],[275,207,.9361105522297561],[276,207,.5630462485124229],[276,208,.4185031913161667],[277,208,1.0173673024779883],[278,209,1.0127822777820206],[279,209,.043854648017688035],[279,210,.9377803553285139],[280,210,.5614140412123577],[280,211,.42054809640522234],[281,211,1.0170043612872055],[282,212,1.0124829506474082],[283,212,.042669383945431606],[283,213,.9393753146522579],[284,213,.5598559379382144],[284,214,.42250295310432634],[285,214,1.016654227133528],[286,215,1.0121959120202477],[287,215,.04154167961383383],[287,216,.9408968984130733],[288,216,.5583704920894111],[288,217,.42436914553372207],[289,217,1.0163171092845467],[290,218,1.0119211081990869],[291,218,.04047004842376173],[291,219,.9423465320743504],[292,219,.5569562989809166],[292,220,.4261480377490578],[293,220,1.0159931896995795],[294,221,1.0116584762427925],[295,221,.03945306599345366],[295,222,.9437255999933521],[296,222,.5556119942410062],[296,223,.4278409738424421],[297,223,1.0156826244024533],[298,224,1.0114079447897668],[299,224,.038489367187566605],[299,225,.9450354469842541],[300,225,.5543362522836106],[300,226,.42944927807097044],[301,226,1.015385544788648],[302,227,1.0111694348102989],[303,227,.03757764331096192],[303,228,.9462773798108762],[304,228,.5531277848528364],[304,229,.4309742550012965],[305,229,1.0151020588742643],[306,230,1.010942860298229],[307,230,.036716639459590646],[307,231,.9474526686068676],[308,231,.5519853396352962],[308,232,.4324171896758833],[309,232,1.0148322524854105],[310,233,1.0107281289063446],[311,233,.03590515201636021],[311,234,.9485625482321702],[312,234,.5509076989367998],[312,235,.43377934779319954],[313,235,1.0145761903940136],[314,236,1.0105251425307091],[315,236,.03514202628559325],[315,237,.9496082195647421],[316,237,.5498936784177629],[316,238,.4350619759070698],[317,238,1.014333917399279],[318,239,1.0103337978471305],[319,239,.03442615425358563],[319,240,.9505908507379167],[320,240,.5489421258861396],[320,241,.43626630163460317],[321,241,1.0141054593619083],[322,242,1.01015398680447],[323,242,.03375647247069698],[323,243,.9515115783174108],[324,243,.5480519201477565],[324,244,.43739353387882146],[325,244,1.0138908241879996],[326,245,1.0099855970782285],[327,245,.033131960048180864],[327,246,.9523715084281075],[328,246,.5472219699015581],[328,247,.438444863061944],[329,247,1.013690002769195],[330,248,1.009828512486449],[331,248,.0325516367573507],[331,249,.9531717178331495],[332,249,.5464512126887197],[332,250,.43942146136466664],[333,250,1.0135029698801676],[334,251,1.0096826133725936],[335,251,.03201456123217285],[335,252,.9539132549610332],[336,252,.5457386138858732],[336,253,.4403244829779182],[337,253,1.0133296850325435],[338,254,1.009547776957031],[339,254,.03151982926510845],[339,255,.9545971408911784],[340,255,.5450831657405287],[340,256,.44115506435778573],[341,256,1.0131700932920482],[342,257,1.0094238776594737],[343,257,.031066572189892106],[343,258,.9552243702967873],[344,258,.5444838864501296],[344,259,.44191432448690826],[345,259,1.013024126057376],[346,260,1.0093107873949636],[347,260,.030653955347715485],[347,261,.9557959123477745],[348,261,.5439398192781751],[348,262,.44260336514265247],[349,262,1.01289170180302],[350,263,1.0092083758457435],[351,263,.03028117663272106],[351,264,.956312711573757],[352,264,.5434500317097861],[352,265,.44322327116676213],[353,265,1.012772726788603],[354,266,1.0091165107105933],[355,266,.029947465111254432],[355,267,.9567756886915669],[356,267,.5430136146404813],[356,268,.443775110739594],[357,268,1.0126670957357586],[358,269,1.0090350579329337],[359,269,.02965207970869547],[359,270,.9571857414000476],[360,270,.5426296815994802],[360,271,.44425993565630856],[361,271,1.012574692474406],[362,272,1.0089638819102829],[363,272,.029394307963707546],[363,273,.9575437451393404],[364,273,.5422973680058967],[364,274,.4446787816043237],[365,274,1.0124953905592755],[366,275,1.0089028456858484],[367,275,.029173464843693937],[367,276,.9578505538209541],[368,276,.5420158304528419],[368,277,.44503266844280676],[369,277,1.0124290538587923],[370,278,1.0088518111235036],[371,278,.028988891617224174],[371,279,.9581070005279474],[372,279,.5417842460227992],[372,280,.4453226004830567],[373,280,1.012375537116488],[374,281,1.0088106390682976],[375,281,.028839954783933083],[375,282,.9583138981860433],[376,282,.5416018116287169],[376,283,.4455495667668758],[377,283,1.0123346864882432],[378,284,1.008779189492711],[379,284,.02872604505481853],[379,285,.9584720402070429],[380,285,.5414677433849261],[380,286,.44571454134485444],[381,286,1.0123063400541175],[382,287,1.008757321629678],[383,287,.028646576380597488],[383,288,.9585822011116006],[384,288,.5413812759956369],[384,289,.4458184835568685],[385,289,1.0122903283078832],[386,290,1.0087448940943453],[387,290,.028600985028178233],[387,291,.9586451371206854],[388,291,.541341662177547],[388,292,.44586233830592226],[389,292,1.0122864746237836],[390,293,1.0087417649949195],[391,293,.028588728701898054],[391,294,.9586615867284015],[392,294,.5413481720936798],[392,295,.44584703633543826],[393,295,1.0122945957030358],[394,296,1.0087477920325896],[395,296,.028609285702619672],[395,297,.958632271251788],[396,297,.5414000928186515],[396,298,.44577349450072723],[397,298,1.0123145019997328],[398,299,1.0087628325926643],[399,299,.028662154128659946],[399,300,.9585578953591529],[400,300,.5414967278190544],[400,301,.4456426160405528],[401,301,1.0123459981276965],[402,302,1.0087867438270437],[403,302,.028746851113718195],[403,303,.9584391475775814],[404,303,.5416373964555454],[404,304,.4454552908447334],[405,304,1.0123888832492127],[406,305,1.0088193827286074],[407,305,.02886291209986826],[407,306,.9582767007831089],[408,306,.541821433501071],[408,307,.44521239571891796],[409,307,1.0124429514472502],[410,308,1.0088606061980132],[411,308,.029009890142771087],[411,309,.9580712126699451],[412,309,.5420481886827784],[412,310,.4449147946460895],[413,310,1.01250799207953],[414,311,1.0089102711038211],[415,311,.029187355249536997],[415,312,.9578233262044412],[416,312,.5423170262339921],[416,313,.44456333904778883],[417,313,1.0125837901172945],[418,314,1.0089682343360202],[419,314,.02939489374516595],[419,315,.9575336700623188],[420,315,.5426273244683578],[420,316,.4441588680360723],[421,316,1.0126701264704934],[422,317,1.0090343528545804],[423,317,.029632107670909735],[423,318,.9572028590461733],[424,318,.5429784753662162],[424,319,.44370220866623333],[425,319,1.0127667782967882],[426,320,1.0091084837312583],[427,320,.02989861420426184],[427,321,.9568314944924141],[428,321,.5433698841780775],[428,322,.44319417618582607],[429,322,1.0128735192969558],[430,323,1.0091904841873789],[431,323,.03019404510848359],[431,324,.9564201646615609],[432,324,.5438009690392793],[432,325,.442635574278337],[433,325,1.0129901199984148],[434,326,1.0092802116265451],[435,326,.030518046204357472],[435,327,.9559694451142186],[436,327,.5442711606026257],[436,328,.4420271953022404],[437,328,1.013116348025554],[438,329,1.0093775236632159],[439,329,.030870276865616747],[439,330,.9554798990737882],[440,330,.5447799016825403],[440,331,.4413698205263152],[441,331,1.0132519683584005],[442,332,1.009482278147551],[443,332,.03125040953717358],[443,333,.9549520777754482],[444,333,.5453266469100869],[444,334,.4406642203630321],[445,334,1.0133967435791398],[446,335,1.009594333186143],[447,335,.031658129272365214],[447,336,.9543865208053518],[448,336,.5459108623998897],[448,337,.43991115459682073],[449,337,1.0135504341086077],[450,338,1.0097135471594447],[451,338,.03209313328990995],[451,339,.9537837564264052],[452,339,.5465320254328632],[452,340,.4391113726049666],[453,340,1.013712798432744],[454,341,1.009839778736762],[455,341,.03255513055252836],[455,342,.9531443018899375],[456,342,.5471896241467579],[456,343,.43826561357805704],[457,343,1.0138835933177033],[458,344,1.0099728868869051],[459,344,.033043841357819334],[459,345,.9524686637453139],[460,345,.5478831572348231],[460,346,.437374606734874],[461,346,1.0140625740178375],[462,347,1.0101127308880269],[463,347,.03355899695286791],[463,348,.9517573381261256],[464,348,.5486121336621822],[464,349,.436439071532636],[465,349,1.0142494944714182],[466,350,1.0102591703335964],[467,350,.03410033916008615],[467,351,.9510108110386514],[468,351,.5493760723833191],[468,352,.4354597178717026],[469,352,1.0144441074918717],[470,353,1.0104120651366326],[471,353,.03466762001996195],[471,354,.9502295586328896],[472,354,.5501745020753853],[472,355,.43443724629963687],[473,355,1.0146461649465606],[474,356,1.0105712755316636],[475,356,.035260601448092795],[475,357,.9494140474694148],[476,357,.5510069608761691],[476,358,.43337234820709825],[477,358,1.0148554179311553],[478,359,1.0107366620751033],[479,359,.035879054907258415],[479,360,.9485647347731454],[480,360,.5518729961339426],[480,361,.4322657060211073],[481,361,1.0150716169344107],[482,362,1.0109080856433987],[483,362,.036522761091017805],[483,363,.9476820686815849],[484,363,.5527721641646695],[484,364,.4311179933933358],[485,364,1.0152945119966836],[486,365,1.011085407429963],[487,365,.037191509621709105],[487,366,.9467664884832998],[488,366,.5537040300164661],[488,367,.42992987538427074],[489,367,1.0155238528614574],[490,368,1.0112684889404733],[491,368,.03788509876006132],[491,369,.945818424848663],[492,369,.5546681672409077],[492,370,.42870200864543534],[493,370,1.015759389119438],[494,371,1.0114571919861517],[495,371,.038603335123549486],[495,372,.9448383000574974],[496,372,.5556641576735553],[496,373,.42743504159139284],[497,373,1.016000870349307],[498,374,1.0116513786769457],[499,374,.03934603342038135],[499,375,.9438265282100843],[500,375,.556691591222498],[500,376,.42612961457530607],[501,376,1.0162480462474877],[502,377,1.011850911412824],[503,377,.0401130161915153],[503,378,.9427835154401112],[504,378,.5577500656591832],[504,379,.42478636005357434],[505,379,1.0165006667574357],[506,380,1.012055652873517],[507,380,.04090411356002747],[507,381,.9417096601187289],[508,381,.5588391864205529],[508,382,.4234059027505881],[509,382,1.016758482190165],[510,383,1.0122654660085202],[511,383,.04171916299559172],[511,384,.940605353048487],[512,384,.5599585664146272],[512,385,.4219888598177451],[513,385,1.0170212433404524],[514,386,1.0124802140252198],[515,386,.04255800908365318],[515,387,.9394709776545362],[516,387,.5611078258344457],[516,388,.42053584098827806],[517,388,1.0172887015980372],[518,389,1.0126997603766286],[519,389,.04342050330548295],[519,390,.9383069101697904],[520,390,.5622865919744513],[520,391,.4190474487280153],[521,391,1.0175606090547666],[522,392,1.0129239687479124],[523,392,.044306503823998804],[523,393,.9371135198133816],[524,393,.5634944990567509],[524,394,.41752427838399275],[525,394,1.017836718605313],[526,395,1.0131527030429122],[527,395,.04521587528078427],[527,396,.9358911689630978],[528,396,.5647311880602439],[528,397,.4159669183258934],[529,397,1.0181167840454461],[530,398,1.013385827369556],[531,398,.04614848859869256],[531,399,.9346402133241121],[532,399,.5659963065530312],[532,400,.41437595008823225],[533,400,1.0184005601646522],[534,401,1.0136232060250132],[535,401,.04710422079259773],[535,402,.9333610020906034],[536,402,.5672895085344858],[536,403,.41275194850334485],[537,403,1.0186878028359048],[538,404,1.0138647034793364],[539,404,.048082954782625906],[539,405,.9320538781067357],[540,405,.5686104542795039],[540,406,.4110954818363832],[541,406,1.0189782691001303],[542,407,1.0141101843606544],[543,407,.04908457922335384],[543,408,.9307191780153855],[544,408,.5699588101870642],[544,409,.40940711191046436],[545,409,1.0192717172488233],[546,410,1.0143595134378742],[547,410,.05010898832967291],[547,411,.9293572324099554],[548,411,.571334248633412],[548,412,.4076873942350095],[549,412,1.0195679069010588],[550,413,1.014612555604275],[551,413,.05115608171422347],[551,414,.9279683659767549],[552,414,.5727364478324755],[552,415,.4059368781231612],[553,415,1.0198665990790994],[554,416,1.0148691758602966],[555,416,.05222576422885553],[555,417,.9265528976348417],[556,417,.5741650916958022],[556,418,.40415610681371494],[557,418,1.0201675562784311],[558,419,1.0151292392959954],[559,419,.05331794581129548],[559,420,.9251111406735011],[560,420,.575619869698764],[560,421,.40234561758289383],[561,421,1.020470542537326],[562,422,1.0153926110734461],[563,422,.05443254133751677],[563,423,.9236434028815992],[564,423,.577100476753225],[564,424,.40050594185671334],[565,424,1.0207753235006762],[566,425,1.0156591564087798],[567,425,.05556947047932675],[567,426,.9221499866777003],[568,426,.5786066130792553],[568,427,.3986376053171075],[569,427,1.021081666483685],[570,428,1.0159287405542117],[571,428,.056728657567230105],[571,429,.9206311892316345],[572,429,.5801379840824749],[572,430,.3967411280111777],[573,430,1.0213893405291132],[574,431,1.016201228779567],[575,431,.057910031456259455],[575,432,.9190873025878152],[576,432,.5816943002369833],[576,433,.39481702444623007],[577,433,1.021698116466727],[578,434,1.0164764863538518],[579,434,.05911352539724152],[579,435,.9175186137811212],[580,435,.5832752769689779],[580,436,.3928658036922941],[581,436,1.0220077669657777],[582,437,1.0167543785266802],[583,437,.06033907691219022],[583,438,.9159254049505173],[584,438,.5848806345442068],[584,439,.3908879694785636],[585,439,1.022318066586335],[586,440,1.017034770509633],[587,440,.061586627674206584],[587,441,.914307953451257],[588,441,.58651009795775],[588,442,.3888840202832941],[589,442,1.0226287918300547],[590,443,1.017317527457434],[591,443,.06285612338957339],[591,444,.9126665319603182],[592,444,.5881633968320044],[592,445,.3868544494242516],[593,445,1.0229397211858324],[594,446,1.0176025144493452],[595,446,.06414751368695158],[595,447,.9110014085827639],[596,447,.5898402653081352],[596,448,.3847997451452973],[597,448,1.0232506351759092],[598,449,1.0178895964699735],[599,449,.06546075200505637],[599,450,.9093128469516464],[600,450,.5915404419502857],[600,451,.38272039070347513],[601,451,1.0235613163962847],[602,452,1.018178638390636],[603,452,.06679579548876291],[603,453,.9076011063291527],[604,453,.5932636696450677],[604,454,.3806168644453139],[605,454,1.0238715495601471],[606,455,1.0184695049504477],[607,455,.06815260488510425],[607,456,.9058664416991429],[608,456,.5950096955107654],[608,457,.37848963988927037],[609,457,1.024181121533852],[610,458,1.0187620607370533],[611,458,.06953114444294146],[611,459,.9041091038666588],[612,459,.5967782707982764],[612,460,.3763391858013562],[613,460,1.0244898213757605],[614,461,1.0190561701684775],[615,461,.07093138181829654],[615,462,.9023293395404434],[616,462,.5985691508103589],[616,463,.37416596626748977],[617,463,1.0247974403689852],[618,464,1.0193516974735164],[619,464,.07235328797779521],[619,465,.9005273914292568],[620,465,.6003820948062436],[620,466,.37197044076689306],[621,466,1.0251037720559506],[622,467,1.0196485066733956],[623,467,.07379683710904351],[623,468,.8987034983230944],[624,468,.6022168659211814],[624,469,.3697530642404009],[625,469,1.025408612268551],[626,470,1.01994646156273],[627,470,.07526200653052777],[627,471,.8968578951803935],[628,471,.6040732310832857],[628,472,.36751428715382667],[629,472,1.0257117591594511],[630,473,1.0202454256910738],[631,473,.07674877660715493],[631,474,.8949908132065928],[632,474,.6059509609308075],[632,475,.3652545555682938],[633,475,1.0260130132278693],[634,476,1.0205452623441595],[635,476,.07825713066499564],[635,477,.8931024799348216],[636,477,.6078498297369068],[636,478,.36297431119783957],[637,478,1.026312177347325],[638,479,1.0208458345252258],[639,479,.07978705490923481],[639,480,.8911931193041005],[640,480,.6097696153313106],[640,481,.360673991471839],[641,481,1.0266090567901067],[642,482,1.021147004936792],[643,482,.08133853834681559],[643,483,.8892629517341233],[644,483,.6117100990244927],[644,484,.3583540295921792],[645,484,1.0269034592511874],[646,485,1.0214486359623245],[647,485,.08291157270803175],[647,486,.8873121941972261],[648,486,.6136710655396947],[648,487,.35601485458732646],[649,487,1.0271951948700204],[650,488,1.0217505896477503],[651,488,.08450615237016054],[651,489,.885341060291742],[652,489,.6156523029400911],[652,490,.3536568913681695],[653,490,1.0274840762511013],[654,491,1.022052727683594],[655,491,.08612227428601159],[655,492,.8833497603088218],[656,492,.6176536025590085],[656,493,.3512805607832744],[657,493,1.02776991848203],[658,494,1.0223549113867765],[659,494,.08775993791161714],[659,495,.8813385013049766],[660,495,.6196747589336273],[660,496,.34888627966024516],[661,496,1.028052539155018],[662,497,1.0226570016825074],[663,497,.08941914513388247],[663,498,.8793074871648813],[664,498,.621715569739104],[664,499,.346474460866357],[665,499,1.0283317583791294],[666,500,1.0229588590871557],[667,500,.09109990020637701],[667,501,.8772569186645972],[668,501,.6237758357289777],[668,502,.34404551334349676],[669,502,1.0286073987990987],[670,503,1.023260343690056],[671,503,.09280220968027517],[671,504,.8751869935378795],[672,504,.6258553606671395],[672,505,.3415998421603758],[673,505,1.0288792856085094],[674,506,1.0235613151361742],[675,506,.09452608233896752],[675,507,.8730979065358732],[676,507,.6279539512706841],[676,508,.33913784855416224],[677,508,1.0291472465628844],[678,509,1.0238616326091752],[679,509,.09627152913686766],[679,510,.8709898494841083],[680,510,.6300714171530707],[680,511,.3366599299694516],[681,511,1.0294111119920568],[682,512,1.0241611548135297],[683,512,.09803856313307117],[683,513,.8688630113461538],[684,513,.6322075707612916],[684,514,.3341664801038121],[685,514,1.0296707148107829],[686,515,1.0244597399582411],[687,515,.09982719943517422],[687,516,.8667175782751595],[688,516,.6343622273238361],[688,517,.33165788894132453],[689,517,1.029925890529174],[690,518,1.024757245739534],[691,518,.10163745513498708],[691,519,.864553733672022],[692,519,.6365352047963319],[692,520,.32913454279236454],[693,520,1.0301764772610114],[694,521,1.0250535293244536],[695,521,.10346934925456013],[695,522,.8623716582378126],[696,522,.6387263238040831],[696,523,.32659682433041565],[697,523,1.0304223157317631],[698,524,1.0253484473338592],[699,524,.10532290268142636],[699,525,.8601715300305955],[700,525,.6409354075949926],[700,526,.32404511262442137],[701,526,1.0306632492858765],[702,527,1.0256418558269649],[703,527,.10719813812199533],[703,528,.8579535245094766],[704,528,.6431622819855923],[704,529,.3214797831731655],[705,529,1.0308991238920382],[706,530,1.0259336102845216],[707,530,.10909508003982304],[707,531,.855717814591042],[708,531,.6454067753119441],[708,532,.3189012079363341],[709,532,1.03112978814904],[710,533,1.0262235655929648],[711,533,.11101375459950885],[711,534,.8534645706974212],[712,534,.6476687183847731],[712,535,.31630975536452444],[713,535,1.0313550932895121],[714,536,1.0265115760290215],[715,536,.11295418962138112],[715,537,.8511939607995829],[716,537,.6499479444348513],[716,538,.3137057904341974],[717,538,1.0315748931821125],[718,539,1.0267974952437684],[719,539,.11491641452111552],[719,540,.8489061504692988],[720,540,.6522442890739327],[720,541,.3110896746693046],[721,541,1.0317890443354898],[722,542,1.027081176247435],[723,542,.11690046026072583],[723,543,.8466013029223681],[724,543,.6545575902471419],[724,544,.3084617661720711],[725,544,1.0319974058989068],[726,545,1.0273624713942857],[727,545,.11890635929917114],[727,546,.8442795790631381],[728,546,.6568876881880987],[728,547,.3058224196480645],[729,547,1.0321998396634169],[730,548,1.0276412323675237],[731,548,.12093414553884717],[731,549,.8419411375296247],[732,549,.6592344253774453],[732,550,.3031719864317822],[733,550,1.0323962100616533],[734,551,1.027917310164898],[735,551,.12298385427920393],[735,552,.8395861347312832],[736,552,.661597646501151],[736,553,.30051081451364153],[737,553,1.0325863841657408],[738,554,1.028190555083932],[739,554,.12505552216817234],[739,555,.8372147248951822],[740,555,.6639771984076539],[740,556,.2978392485576317],[741,556,1.0327702316879357],[742,557,1.0284608167076257],[743,557,.12714918714905468],[743,558,.8348270601054527],[744,558,.6663729300704698],[744,559,.2951576299293991],[745,559,1.0329476249762861],[746,560,1.0287279438905246],[747,560,.12926488841857217],[747,561,.8324232903405301],[748,561,.6687846925454237],[748,562,.2924662967182933],[749,562,1.0331184390116956],[750,563,1.0289917847447467],[751,563,.13140266637549056],[751,564,.8300035635173267],[752,564,.6712123389365675],[752,565,.28976558374944045],[753,565,1.033282551406384],[754,566,1.0292521866268258],[755,566,.13356256257828694],[755,567,.8275680255195722],[756,567,.6736557243576808],[756,568,.28705582261488644],[757,568,1.0334398423957492],[758,569,1.0295089961237516],[759,569,.1357446196959754],[759,570,.8251168202441111],[760,570,.6761147058925864],[760,571,.2843373416864493],[761,571,1.0335901948361186],[762,572,1.0297620590403478],[763,572,.13794888146102224],[763,573,.822650089632257],[764,573,.6785891425651428],[764,574,.2816104661359854],[765,574,1.0337334941973482],[766,575,1.0300112203862977],[767,575,.1401753926301894],[767,576,.8201679737037143],[768,576,.6810788952992894],[768,577,.278875517953921],[769,577,1.0338696285566522],[770,578,1.0302563243634062],[771,578,.14242419893016717],[771,579,.8176706105975015],[772,579,.6835838268889712],[772,580,.2761328159639002],[773,580,1.0339984885922306],[774,581,1.0304972143534852],[775,581,.14469534702456693],[775,582,.8151581365963325],[776,582,.6861038019600981],[776,583,.2733826758448351],[777,583,1.0341199675739228],[778,584,1.0307337329063364],[779,584,.14698888445850505],[779,585,.8126306861670012],[780,585,.6886386869453004],[780,586,.2706254101402667],[781,586,1.0342339613562985],[782,587,1.0309657217274584],[783,587,.14930485962229872],[783,588,.810088391991206],[784,588,.6911883500416512],[784,589,.267861328280309],[785,589,1.0343403683692496],[786,590,1.0311930216672842],[787,590,.1516433217043255],[787,591,.80753138499415],[788,591,.6937526611907388],[788,592,.2650907365900638],[789,592,1.0344390896084676],[790,593,1.0314154727094134],[791,593,.1540043206504027],[791,594,.8049597943767033],[792,594,.6963314920402311],[792,595,.2623139383094437],[793,595,1.034530028625162],[794,596,1.0316329139598897],[795,596,.1563879071152346],[795,597,.8023737476471726],[796,597,.6989247159176777],[796,598,.25953123360660696],[797,598,1.0346130915153564],[798,599,1.0318451836365417],[799,599,.15879413242528773],[799,600,.799773370648628],[800,600,.7015322078013413],[800,601,.256742919587031],[801,601,1.0346881869094755],[802,602,1.0320521190584917],[803,602,.16122304853347555],[803,603,.7971587875884961],[804,603,.7041538442893039],[804,604,.2539492903120581],[805,604,1.0347552259598483],[806,605,1.032253556636297],[807,605,.16367470797552194],[807,606,.7945301210672343],[808,606,.7067895035746306],[808,607,.2511506368077842],[809,607,1.0348141223290412],[810,608,1.0324493318619021],[811,608,.16614916382632547],[811,609,.7918874921076472],[812,609,.709439065413448],[812,610,.24834724708249672],[813,610,1.0348647921767888],[814,611,1.032639279299876],[815,611,.1686464696616927],[815,612,.7892310201754584],[816,612,.7121024111062217],[816,613,.24553940613187852],[817,613,1.0349071541468273],[818,614,1.0328232325774014],[819,614,.17116667951302045],[819,615,.7865608232133336],[820,615,.7147794234616441],[820,616,.24272739595679857],[821,616,1.0349411293537],[822,617,1.0330010243763053],[823,617,.17370984782335191],[823,618,.7838770176637189],[824,618,.7174699867799718],[824,619,.23991149556876706],[825,619,1.0349666413686411],[826,620,1.033172486424039],[827,620,.17627602940857415],[827,621,.7811797184924586],[828,621,.720173986819918],[828,622,.23709198101021747],[829,622,1.0349836162040225],[830,623,1.0333374494861536],[831,623,.1788652794118951],[831,624,.7784690392157592],[832,624,.7228913107823544],[832,625,.234269125354749],[833,625,1.0349919822996723],[834,626,1.0334957433581187],[835,626,.18147765326305537],[835,627,.7757450919251534],[836,627,.7256218472813651],[836,628,.23144319872166874],[837,628,1.0349916705072433],[838,629,1.033647196858036],[839,629,.1841132066386375],[839,630,.773007987305413],[840,630,.7283654863202004],[840,631,.22861446829229304],[841,631,1.0349826140730403],[842,632,1.033791637819688],[843,632,.1867719954109858],[843,633,.7702578346682248],[844,633,.7311221192693971],[844,634,.2257831983137577],[845,634,1.0349647486235953],[846,635,1.0339288930859631],[847,635,.18945407561392777],[847,636,.7674947419659374],[848,636,.7338916388459672],[848,637,.22294965011006523],[849,637,1.0349380121480094],[850,638,1.0342420464149167],[851,638,.1924281237940313],[851,639,.5378425839134362],[852,639,.5202524171708031],[852,640,.4568109772775498],[852,641,.05199677850209752],[853,640,.24351254102567055],[853,641,.5225687624093359],[853,642,.2921493228893563],[854,642,.25538328243481595],[854,643,.5241438210153896],[854,644,.23257172527298814],[855,643,.011987787701546808],[855,644,.3172219958151092],[855,645,.4868674616302827],[855,646,.176468024136203],[856,645,.07357769424953754],[856,646,.38294232266815553],[856,647,.4259205416014665],[856,648,.11753224171517974],[857,647,.13246196705929972],[857,648,.4398303708699065],[857,649,.36708371923835004],[857,650,.06067586883292038],[858,649,.18926719214302565],[858,650,.4946697651421086],[858,651,.3040061179704405],[858,652,.005602736230038195],[859,651,.23906249586178907],[859,652,.5231149368578739],[859,653,.2495840468006932],[860,653,.2897970473112013],[860,654,.5026442283960142],[860,655,.20274559579570214],[861,654,.04664315619110009],[861,655,.3473240465998149],[861,656,.4526192727121032],[861,657,.1523595035438806],[862,656,.09766699822939251],[862,657,.3969699779916487],[862,658,.40188113292822186],[862,659,.1034820659161816],[863,658,.14649823031506354],[863,659,.44395391725661004],[863,660,.3530826952522148],[863,661,.056517279244449437],[864,660,.193417537810633],[864,661,.48905272813711814],[864,662,.30196784607077015],[864,663,.011088189502860925],[865,662,.235165441654809],[865,663,.5161755064939912],[865,664,.25593745749264785],[866,664,.27598857145168865],[866,665,.5055165820237347],[866,666,.21733399798014585],[867,665,.03142691535889764],[867,666,.321995701601107],[867,667,.4677769922252197],[867,668,.17692400337387545],[868,667,.07312870986769164],[868,668,.3630952451007391],[868,669,.4264378437134144],[868,670,.13731285791147696],[869,669,.11270032695167025],[869,670,.4009509624326517],[869,671,.38688927555227676],[869,672,.09946833663506985],[870,671,.15050630725355646],[870,672,.43706477714430675],[870,673,.34910378546507886],[870,674,.06336347754327785],[871,673,.1865736616624162],[871,674,.4714631653468664],[871,675,.3125696686315781],[871,676,.028869775846049314],[872,675,.22058655357283705],[872,676,.502393455771382],[872,677,.27458473006488804],[873,677,.24983886475629993],[873,678,.5137748593109537],[873,679,.24315322539257223],[874,678,.0036240101488931717],[874,679,.2812413419420975],[874,680,.49584386088869215],[874,681,.2153614227018543],[875,680,.034735500335029305],[875,681,.3144060917430617],[875,682,.46485314373790926],[875,683,.18595981453922283],[876,682,.0641063484572785],[876,683,.34219859962945964],[876,684,.43549740951782173],[876,685,.15817234633893226],[877,684,.091864261548934],[877,685,.3683988258245694],[877,686,.407752916631107],[877,687,.13197572785525458],[878,686,.11803256264694018],[878,687,.3930296465168421],[878,688,.3815964769154389],[878,689,.10734720976073055],[879,688,.1426340315995158],[879,689,.4161134070872291],[879,690,.35700543857338174],[879,691,.08426456699687354],[880,690,.16569092182506315],[880,691,.43767193845249674],[880,692,.33395766972405766],[880,693,.06270608273067858],[881,692,.1872249764612122],[881,693,.457726572814142],[881,694,.3124315425508366],[881,695,.04265053289025597],[882,694,.20725744392861123],[882,695,.47629815883858434],[882,696,.29240591801936916],[882,697,.024077171256560802],[883,696,.22580909293436022],[883,697,.49340707629100294],[883,698,.272739666255128],[883,699,.006906252371233933],[884,698,.24190643067177103],[884,699,.5047275543873398],[884,700,.2549459812508028],[885,700,.2567100539467806],[885,701,.5031577036963546],[885,702,.24065881914660317],[886,701,.008634717813202674],[886,702,.27224949572145724],[886,703,.49094674236787206],[886,704,.22719544196570912],[887,703,.02292373131969297],[887,704,.28597629401801355],[887,705,.47672398599653515],[887,706,.2143533208320832],[888,705,.035751602096786475],[888,706,.29743237559552355],[888,707,.46390276826706217],[888,708,.20289630196958544],[889,707,.04719579903029385],[889,708,.3075210742305127],[889,709,.45246460115847775],[889,710,.19280622955805915],[890,709,.057274491299496445],[890,710,.3162602301176305],[890,711,.4423913913890736],[890,712,.18406533389761395],[891,711,.0660054606502899],[891,712,.3236673045470217],[891,713,.43366542899845073],[891,714,.17665622026124392],[892,713,.07340611260620647],[892,714,.3297593908476435],[892,715,.4262693763198494],[892,716,.17056185812791913],[893,715,.07949348729590157],[893,716,.33455322495703466],[893,717,.42018625732795906],[893,718,.16576557078065143],[894,717,.0842842699121286],[894,718,.3380651956328206],[894,719,.41539944734620887],[894,720,.16225102525634236],[895,719,.0877948008176482],[895,720,.3403113543186734],[895,721,.41189266310148215],[895,722,.1600022226324315],[896,721,.09004108530992379],[896,722,.3413074246800344],[896,723,.4096499531105413],[896,724,.15900348863810745],[897,723,.0910388030604564],[897,724,.341068811820455],[897,725,.4086556883871424],[897,726,.15923946457791555],[898,725,.09080331723824445],[898,726,.33961061119156805],[898,727,.40889455345709996],[898,728,.16069509855546693],[899,727,.08934968333179105],[899,728,.33694761720865024],[899,729,.41035153766953336],[899,730,.1633556369851302],[900,729,.08669265767999552],[900,730,.33309433158306806],[900,731,.41301192679237225],[900,732,.16720661638248935],[901,731,.08284670572359325],[901,732,.32806497138102175],[901,733,.41686129488304347],[901,734,.17223385542154263],[902,733,.0778260099865808],[902,734,.3218734768206457],[902,735,.421885496422382],[902,736,.17842344724960524],[903,735,.07164447779930824],[903,736,.31453351881588426],[903,737,.42807065870301164],[903,738,.185761752049803],[904,737,.06431574877136567],[904,738,.3060585062772846],[904,739,.435403174462235],[904,740,.19423538984244326],[905,739,.05585320202451507],[905,740,.29646159317816856],[905,741,.4438696947508069],[905,742,.20383123351642937],[906,741,.04626996319383157],[906,742,.2857556853951481],[906,743,.4534571220289279],[906,744,.21453640208174513],[907,743,.03557891120608933],[907,744,.27395344733160587],[907,745,.4640838862781736],[907,746,.2259711147745072],[908,745,.02378916236694485],[908,746,.26064383557298154],[908,747,.4744097020055178],[908,748,.23741469023048611],[908,749,.0029874664482454345],[909,747,.010888485342882084],[909,748,.24524012825579347],[909,749,.47705262348683797],[909,750,.25146343127990345],[909,751,.018030374036361534],[910,750,.23051594568994063],[910,751,.4659638155007443],[910,752,.26789265476733026],[910,753,.034103962104678205],[911,752,.2157780537828917],[911,753,.4490488012027463],[911,754,.28394240197843773],[911,755,.051207169174446954],[912,754,.19869680451466967],[912,755,.4309201309554197],[912,756,.3010279740476113],[912,757,.06933596927309439],[913,756,.18059146729117878],[913,757,.4117775174928008],[913,758,.3191380672559441],[913,759,.08847923890660256],[914,758,.16147315955443303],[914,759,.3916318997027402],[914,760,.33826157637971177],[914,761,.10862604895508292],[915,760,.14135280401108383],[915,761,.37049402581791996],[915,762,.35838758963377015],[915,763,.12976565972904766],[916,762,.12024113359574008],[916,763,.34837445826725],[916,764,.3795053837685538],[916,765,.15188751617588445],[917,764,.0981486962833266],[917,765,.32528357838026745],[917,766,.40160441931520835],[917,767,.17498124323033803],[918,766,.07508585975635881],[918,767,.30123159095005636],[918,768,.42467433597326765],[918,769,.19903664130457108],[919,768,.05106281593203439],[919,769,.2762285286588279],[919,770,.4480441892579001],[919,771,.22091817857346802],[920,770,.02605116606412028],[920,771,.24679268601046497],[920,772,.4613333588465915],[920,773,.24636316696152993],[920,774,.026661594315488448],[921,772,.00017143112777602207],[921,773,.22016507993495968],[921,774,.4450006731455823],[921,775,.27654268563105877],[921,776,.05450703342817279],[922,775,.19537707282293476],[922,776,.4169980825615683],[922,777,.3043455873211709],[922,778,.08322496813649063],[923,777,.16671893224886847],[923,778,.3873911007134449],[923,779,.333032487802997],[923,780,.11284587069811512],[924,779,.1371380798307044],[924,780,.3568813039463011],[924,781,.36262258254682433],[924,782,.14336176762117853],[925,781,.10666365535341012],[925,782,.32548606626333626],[925,783,.39310680323983005],[925,784,.17476372572452537],[926,783,.07530458232966944],[926,784,.2932141772790525],[926,785,.4235343782302751],[926,786,.20429957725699868],[927,785,.04297407877416276],[927,786,.2566282342451322],[927,787,.44609730979381396],[927,788,.23600300007995265],[927,789,.023774697332874434],[928,787,.00973561058609779],[928,788,.22213324067090034],[928,789,.4366882593279592],[928,790,.27231575108916795],[928,791,.058813271383982776],[929,790,.1899112794795718],[929,791,.4051174305988943],[929,792,.3087329260703045],[929,793,.09459113946159277],[930,792,.15536737862587172],[930,793,.36909687837539557],[930,794,.3443998634306182],[930,795,.13113054742980831],[931,794,.11887833690004168],[931,795,.3317399346424034],[931,796,.3809015150071346],[931,797,.1684974582828263],[932,796,.08156315084174257],[932,797,.29356399783457987],[932,798,.4168389957384664],[932,799,.2027189344423823],[933,798,.043285265762028874],[933,799,.2496929999720567],[933,800,.44089395742648096],[933,801,.24052352812737388],[933,802,.03507425254057242],[934,800,.0043335535351657515],[934,801,.21027601904641954],[934,802,.42143856683278325],[934,803,.2844016743443022],[934,804,.07585590645285804],[935,803,.17353832434253885],[935,804,.38262846297038483],[935,805,.3257498632562316],[935,806,.11730189433403454],[936,805,.13268775789077444],[936,806,.3407519309130924],[936,807,.3670972990020704],[936,808,.15947396875496164],[937,807,.09057464650490143],[937,808,.2978183751219168],[937,809,.40749895190525254],[937,810,.19795010289674397],[938,809,.0474866463063797],[938,810,.24850494279526708],[938,811,.4346436181876547],[938,812,.2403211224239381],[938,813,.04014881320170647],[939,811,.003878639500178961],[939,812,.2047038150773143],[939,813,.41157455841171137],[939,814,.28957529821809164],[939,815,.08560320920592149],[940,814,.16385621221760913],[940,815,.36828320787286745],[940,816,.33550406688664397],[940,817,.13164677712134118],[941,816,.11836297424309958],[941,817,.32185871977911545],[941,818,.3799973298161782],[941,819,.17581896778117206],[942,818,.07143918326167292],[942,819,.2705029465809176],[942,820,.4180894904987747],[942,821,.22040151023922497],[942,822,.023261093492508676],[943,820,.023754358875460287],[943,821,.22082957274806367],[943,822,.41735892037093947],[943,823,.26975946681527463],[943,824,.07244459405934162],[944,823,.17462856886910824],[944,824,.376380003235797],[944,825,.32258384746152186],[944,826,.12234695850241085],[945,825,.12764964491952732],[945,826,.32754202842781277],[945,827,.3705351976091778],[945,828,.17002290467196218],[946,827,.07705703864783364],[946,828,.27228373423426855],[946,829,.4119493110954956],[946,830,.21796235075295245],[946,831,.024608216085607083],[947,829,.025780053026113373],[947,830,.2190518649272109],[947,831,.41169318411556594],[947,832,.27077590916361477],[947,833,.07732052594065236],[948,832,.1695115580680664],[948,833,.36773423672329814],[948,834,.3275311475162098],[948,835,.13077893984001213],[949,834,.11922966876699366],[949,835,.31565346594837984],[949,836,.37813100062036553],[949,837,.17991281790206778],[950,836,.06510103041600655],[950,837,.25463712967072577],[950,838,.4162975451493948],[950,839,.23222690463246418],[950,840,.043347365043106205],[951,838,.010682336294089382],[951,839,.20025854636251755],[951,840,.3947874901107556],[951,841,.2917173663646273],[951,842,.09950708368621437],[952,841,.14911244770443477],[952,842,.3431424199239878],[952,843,.3480530442639449],[952,844,.15411315971947762],[953,843,.0934299055238343],[953,844,.2830893937829872],[953,845,.3971235804951196],[953,846,.20716078374370134],[953,847,.020137203526012115],[954,845,.036025540013401365],[954,846,.22261124110739972],[954,847,.40630997808531094],[954,848,.2648205963423913],[954,849,.07872881878459281],[955,848,.16692727676480973],[955,849,.35954874836594064],[955,850,.328443108696204],[955,851,.13751082396144756],[956,850,.11152248261980105],[956,851,.3006327942159715],[956,852,.3829521945790107],[956,853,.1916328343080391],[956,854,.0076262937092498664],[957,852,.0514953905500914],[957,853,.2343500090068106],[957,854,.41021535649217705],[957,855,.25030428726128284],[957,856,.06835964516566889],[958,855,.17563114080501685],[958,856,.3667504924135684],[958,857,.31835263030310357],[958,858,.1299663000321827],[959,857,.11940718803292909],[959,858,.3065438045294419],[959,859,.37569491987401304],[959,860,.18605528589059708],[959,861,.004834820768368334],[960,859,.05684866493974193],[960,860,.2366688077210537],[960,861,.4085057240274029],[960,862,.24678375999468344],[960,863,.06783571840441664],[961,862,.17558642045742334],[961,863,.36451985113857055],[961,864,.3173137388508224],[961,865,.13129392160626782],[962,864,.11725721455632943],[962,865,.3008194332920608],[962,866,.37580301677160466],[962,867,.19024874552861262],[962,868,.011245575393110812],[963,866,.05231298976932004],[963,867,.23017401181136463],[963,868,.40175554736854613],[963,869,.2536595659979476],[963,870,.07679940668774121],[964,869,.16706057585212106],[964,870,.35303258747063304],[964,871,.3251768586309606],[964,872,.14116418004635392],[965,871,.10550294433561781],[965,872,.28424844668945237],[965,873,.38249269088982873],[965,874,.2036626805762719],[965,875,.02684871916582402],[966,873,.03836058116912999],[966,874,.21480488879977247],[966,875,.389260042863657],[966,876,.27095452974310497],[966,877,.09504101254228686],[967,876,.1502807743955375],[967,877,.3328577086192332],[967,878,.3421239629983485],[967,879,.15918522100542254],[968,878,.08474515454977341],[968,879,.25820758590913884],[968,880,.3938397310124852],[968,881,.22523159171338067],[968,882,.05190695217080459],[969,880,.015820211753405387],[969,881,.19007905592596833],[969,882,.36921246833932636],[969,883,.2980889913883655],[969,884,.12132017371569158],[970,883,.1247775639085626],[970,884,.3015570552958629],[970,885,.36552163552482225],[970,886,.18684713857492927],[970,887,.014284415706242481],[971,885,.055013622481818666],[971,886,.2263705108609403],[971,887,.39186593267986564],[971,888,.2561333080985603],[971,889,.08592049273991473],[972,888,.1575841200944441],[972,889,.3370827060887002],[972,890,.33284859953655166],[972,891,.15390042438231766],[973,890,.08972988049108406],[973,891,.2590326783958039],[973,892,.38812639016604245],[973,893,.22348813860080616],[973,894,.054161074977768404],[974,892,.017081968749935856],[974,893,.18740927170107446],[974,894,.3625874079443392],[974,895,.2990263270079478],[974,896,.12613079428882987],[975,895,.11819045745461297],[975,896,.28905735771716573],[975,897,.36789499357104777],[975,898,.19628130377264577],[975,899,.02735424128922767],[976,897,.04494375361325131],[976,898,.21330043570426716],[976,899,.37902147922066165],[976,900,.2697531768133337],[976,901,.10241904377888808],[977,900,.14130067843136315],[977,901,.3150246804904708],[977,902,.3480110183643501],[977,903,.1725701388645175],[977,904,.005966983373903607],[978,902,.06884101502859519],[978,903,.23351128359258333],[978,904,.3898863909020141],[978,905,.24593198700119934],[978,906,.08224765045066],[979,905,.1597942440306211],[979,906,.3346851109670727],[979,907,.3285973743088808],[979,908,.15444027476874822],[980,907,.08792661347585409],[980,908,.2508895640647832],[980,909,.38533070676895603],[980,910,.22893712756876922],[980,911,.06583953763953361],[981,909,.01060737785460527],[981,910,.17530908392596897],[981,911,.34707093920704996],[981,912,.3101853041457825],[981,913,.1404924603408273],[982,912,.1016482122325276],[982,913,.2640331008343238],[982,914,.3757885914855772],[982,915,.21658719088481612],[982,916,.05379076081392352],[983,914,.023321537452804155],[983,915,.1869789080592518],[983,916,.35433193126746176],[983,917,.2960976478285003],[983,918,.13047091456929613],[984,917,.11086010315035294],[984,918,.272590889791831],[984,919,.3683410258652817],[984,920,.20801518542415245],[984,921,.04616290894518408],[985,919,.03202626907959427],[985,920,.1942489952348069],[985,921,.35801621736570555],[985,922,.2871844809716754],[985,923,.12448425960359358],[986,922,.11614980664040801],[986,923,.2769245860037902],[986,924,.3634503371272694],[986,925,.20337777894188264],[986,926,.04278533591281287],[987,924,.036633170664026604],[987,925,.19735437260885233],[987,926,.3585975660673821],[987,927,.28298312203941667],[987,928,.12237172260813765],[988,927,.11761764880185657],[988,928,.2769347836061358],[988,929,.3613222869658947],[988,930,.20269252495682932],[988,931,.04352084243134597],[989,929,.03715658569409518],[989,930,.19646584076452728],[989,931,.3563193376763676],[989,932,.28325914825402143],[989,933,.12401877287718965],[990,932,.11535841088563661],[990,933,.2726772185957825],[990,934,.36193002492598775],[990,935,.2058724789923987],[990,936,.04828585408934835],[991,934,.03368059076582972],[991,935,.19166681871807822],[991,936,.35120102320155516],[991,937,.2879669101334489],[991,938,.12934311950798513],[992,937,.10947528483272252],[992,938,.2643619456949593],[992,939,.36503164238003943],[992,940,.21273290367631378],[992,941,.05704255868679827],[993,939,.026351338857843194],[993,940,.18296002570453515],[993,941,.3430562989307297],[993,942,.29724916938947604],[993,943,.13830626997954892],[994,942,.10006782116457263],[994,943,.2523219642979947],[994,944,.3701807952606593],[994,945,.22297333198451888],[994,946,.06976592160365215],[995,944,.015392306252147629],[995,945,.17030051412165803],[995,946,.33152253946088156],[995,947,.31147369956054877],[995,948,.1509473916728322],[996,947,.087196881644584],[996,948,.2369586950063475],[996,949,.376718339613223],[996,950,.2345765114615184],[996,951,.08521591343298078],[997,949,.0011357385555340561],[997,950,.15263475001807864],[997,951,.311827742306229],[997,952,.32860504822914505],[997,953,.16942021655341175],[997,954,.016626147439510436],[998,952,.07024774813594223],[998,953,.2212622403680772],[998,954,.36621398307130515],[998,955,.2523140266095425],[998,956,.10329850546808812],[999,955,.13345393361930616],[999,956,.2868146645965228],[999,957,.3438149621043634],[999,958,.19052159754051476],[999,959,.038598535306774456],[1e3,957,.04874340776161587],[1e3,958,.20027433884645776],[1e3,959,.35045072214288214],[1e3,960,.2752172040116266],[1e3,961,.1246081801436533],[1001,960,.11153410463061227],[1001,961,.25968030157128735],[1001,962,.3589611456155988],[1001,963,.21376355164890676],[1001,964,.06462574300561937],[1002,962,.024112239164856285],[1002,963,.1744379670887302],[1002,964,.32884307142135794],[1002,965,.3038963549633426],[1002,966,.14989396525089382],[1002,967,.002787631885767016],[1003,965,.08652179776851913],[1003,966,.23158274748299973],[1003,967,.37014802862444746],[1003,968,.23660182809114255],[1003,969,.09233857620429504],[1004,968,.14320871996140178],[1004,969,.2949268298641504],[1004,970,.33370967770704096],[1004,971,.1821563205430922],[1004,972,.03341416685633306],[1005,970,.05691996613850173],[1005,971,.2048164607341282],[1005,972,.34996958396767003],[1005,973,.26846185022737096],[1005,974,.12203613352843197],[1006,973,.11270360292617912],[1006,974,.2573174820670815],[1006,975,.35551075517876596],[1006,976,.21342439841857963],[1006,977,.06808655521031844],[1007,975,.02300584415020569],[1007,976,.1693741701851818],[1007,977,.31909197071849676],[1007,978,.3064750144925845],[1007,979,.1569666027177789],[1007,980,.01237576860780718],[1008,978,.07918600624195261],[1008,979,.22224585329482],[1008,980,.36060022658704466],[1008,981,.24542280629144228],[1008,982,.10372340547250797],[1009,981,.13025049048804305],[1009,982,.2755544084078468],[1009,983,.34173289952302016],[1009,984,.19757209548510224],[1009,985,.052414383405106256],[1010,983,.04055057399599624],[1010,984,.18602861646793578],[1010,985,.3325126760154172],[1010,986,.28836807114447566],[1010,987,.1417402962688462],[1010,988,.0007268068329768394],[1011,986,.0921230324039655],[1011,987,.23132424535108578],[1011,988,.3651955312519228],[1011,989,.23251096307120944],[1011,990,.09383068210249161],[1012,989,.1395300348660987],[1012,990,.2846106560560243],[1012,991,.33325384799782276],[1012,992,.18901293891606955],[1012,993,.045352651706964286],[1013,991,.0492531143811913],[1013,992,.19272260635298227],[1013,993,.33561458168523745],[1013,994,.27986377343343843],[1013,995,.13637852619084528],[1014,994,.09650852938196901],[1014,995,.2338020594070448],[1014,996,.36193613166585775],[1014,997,.22898317334607854],[1014,998,.09193468643195023],[1015,996,.002457496874436509],[1015,997,.14093777570167637],[1015,998,.28368384860268375],[1015,999,.33027760738271117],[1015,1e3,.1884400273628213],[1015,1001,.046968846655108074],[1016,999,.04899295849310335],[1016,1e3,.19034003312195327],[1016,1001,.3313219755276299],[1016,1002,.28105052006571385],[1016,1003,.13948843868730657],[1016,1004,.0023949943264103815],[1017,1002,.09296476581718328],[1017,1003,.22852898102309294],[1017,1004,.35981389159869226],[1017,1005,.23289594529521537],[1017,1006,.09793041579114306],[1018,1005,.13381394889325862],[1018,1006,.27358691892030107],[1018,1007,.33460745416509985],[1018,1008,.1955825556102765],[1018,1009,.05665143264068217],[1019,1007,.040361378819567154],[1019,1008,.17925977203170015],[1019,1009,.31806447498945245],[1019,1010,.2909077306146313],[1019,1011,.1516962543781077],[1019,1012,.01525050343287846],[1020,1010,.08150854362929537],[1020,1011,.21698349128246774],[1020,1012,.3497669475500838],[1020,1013,.24583808157633427],[1020,1014,.11136370502634059],[1021,1013,.1194990282921764],[1021,1014,.25479878825131264],[1021,1015,.34346022054644576],[1021,1016,.20933239464254857],[1021,1017,.07400664151417581],[1022,1015,.023670383811016393],[1022,1016,.1594303860158249],[1022,1017,.29640289279632487],[1022,1018,.3088876485347881],[1022,1019,.17249814489158258],[1022,1020,.03643709112995095],[1023,1018,.062217701784737935],[1023,1019,.19815982330648652],[1023,1020,.3337745723213922],[1023,1021,.3700921432339217],[1023,1022,.3700921432339217]];function wB(){for(var e=S.Wd([1024,1024]),t=0;t<kB.length;t++){var n=kB[t];e.set(n[2],n[0],n[1])}return e.toTensor()}function xB(e,t,n){return S.Ce(S.Oh(e,n),t)}function jB(e){return S.di((function(){var t=wB().expandDims(0),n=xB(e,.0661371661726,.113718730221),r=S.Qe(n),a=S.Rf(r,t);return S.Gh(a)}))}function SB(e){return S.di((function(){var t=wB().expandDims(0),n=xB(e,.8,0),r=S.qe(S.jg(n,Math.PI),1);return S.Rf(r,t)}))}function _B(e,t){for(var n=S.di((function(){var n=S.ce([e,t],0).expandDims(3);n=S.xg(n,[[0,0],[0,0],[1,0],[0,0]]);return S.Rd(n,[1,2],[[0,0],[0,0]]).reshape([128,4096])})),r=n.dataSync(),a=[],i=0;i<128;i++)a[i]=r.slice(4096*i,4096*(i+1));return n.dispose(),a}function CB(e){return EB.apply(this,arguments)}function EB(){return(EB=Object(bn.a)(mn.a.mark((function e(t){var n;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={nFFt:OB,winLength:OB,hopLength:512,sampleRate:16e3,center:!1},e.abrupt("return",IB(t,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NB(){return(NB=Object(bn.a)(mn.a.mark((function e(t){var n,r,a;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.di((function(){var e=jB(S.uh(t,[0,0,0,0],[1,-1,-1,1]).reshape([1,128,1024])),n=SB(S.uh(t,[0,0,0,1],[1,-1,-1,1]).reshape([1,128,1024])),r=e.mul(S.ne(n)),a=S.Yg(r.slice([0,0,0],[1,128,1023]),2);r=S.ce([r,a],2);var i=e.mul(S.sh(n)),o=S.Yg(i.slice([0,0,0],[1,128,1023]),2);return[r,i=S.ce([i,S.jg(o,-1)],2)]})),e.next=3,_B(n[0],n[1]);case 3:return r=e.sent,e.next=6,CB(r);case 6:return a=e.sent,n.forEach((function(e){return e.dispose()})),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TB(e){var t=e.length/2,n=new DV(t),r=n.createComplexArray();return n.inverseTransform(r,e),n.fromComplexArray(r)}function IB(e,t){for(var n=e.length,r=e[0].length/2,a=t.winLength||r,i=t.hopLength||Math.floor(a/4),o=t.center||!1,s=tB(a),c=0;c<s.length;c++)s[c]=s[c]/1.5;s=JV(s,r);for(var u=r+i*(n-1),l=new Float32Array(u),f=0;f<n;f++){var d=f*i,p=TB(e[f]);p=AB(p=ZV(p,s),l.slice(d,d+r)),l.set(p,d)}var h=0,v=u;return o?(h=r/2,v=l.length-r/2):(h=u-64e3,v=l.length-h),l.slice(h,v)}function AB(e,t){if(e.length!==t.length)return console.error("Array lengths must be equal to add: ".concat(e.length,", ").concat(e.length)),null;for(var n=new Float32Array(e.length),r=0;r<e.length;r++)n[r]=e[r]+t[r];return n}var MB=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-8,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_.a)(this,n),(e=t.call(this,a)).epsilon=r,e.layerConfig=a,e.supportsMasking=!0,e}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[1],e[2],e[3]]}},{key:"call",value:function(e){var t=this;return S.di((function(){var n=e;Array.isArray(n)&&(n=n[0]);var r=S.Zf(S.Hh(n),[3],!0);return S.jg(n,S.fh(S.wd(r,t.epsilon)))}))}},{key:"getClassName",value:function(){return"PixelNorm"}}]),n}(i.Layer);function PB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new MB(e,t)}var RB=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(_.a)(this,n),(e=t.call(this,i)).kernelH=r,e.kernelW=a,e.layerConfig=i,e.supportsMasking=!0,e}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return[e[0],2*(this.kernelH-1)+e[1],2*(this.kernelW-1)+e[2],e[3]]}},{key:"call",value:function(e){var t=e;Array.isArray(t)&&(t=t[0]);var n=this.kernelH-1,r=this.kernelW-1;return S.xg(t,[[0,0],[n,n],[r,r],[0,0]])}},{key:"getClassName",value:function(){return"InitialPad"}}]),n}(i.Layer);var DB=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return Object(_.a)(this,n),(e=t.call(this,{})).scale=r,e.supportsMasking=!0,e}return Object(C.a)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.scale*e[1],this.scale*e[2],e[3]]}},{key:"call",value:function(e){var t=this;return S.di((function(){var n=e;Array.isArray(n)&&(n=n[0]);var r=S.ei(n,[Math.pow(t.scale,2),1,1,1]);return S.Rd(r,[t.scale,t.scale],[[0,0],[0,0]])}))}},{key:"getClassName",value:function(){return"BoxUpscale"}}]),n}(i.Layer);function FB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return new DB(e)}var LB=function(){function e(t){Object(_.a)(this,e),this.nn=ua(),this.nLatents=256,this.nPitches=61,this.minMidiPitch=24,this.maxMidiPitch=84,this.midiPitches=this.maxMidiPitch-this.minMidiPitch+1,this.checkpointURL=t}return Object(C.a)(e,[{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t,n,r=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=yE.d.now(),e.next=3,Object(yE.a)("".concat(this.checkpointURL,"/weights_manifest.json")).then((function(e){return e.json()})).then((function(e){return S.sf.loadWeights(e,r.checkpointURL)}));case 3:n=e.sent,S.di((function(){for(var e in n)if(e.includes("kernel")){var a=n[e].shape[0]*n[e].shape[1]*n[e].shape[2],i=n[e];n[e]=S.jg(i,S.Gh(2/a)),i.dispose()}r.build(n),r.initialized=!0,xE("Initialized model",t,"GANSynth")})),Object.keys(n).map((function(e){return n[e].dispose()}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.initialized&&(this.nn.dispose(),this.initialized=!1)}},{key:"isInitialized",value:function(){return this.initialized}},{key:"build",value:function(e){var t=this;S.di((function(){var n={filters:256,kernelSize:[2,16],strides:[1,1],activation:"linear",useBias:!0,padding:"valid",dilationRate:[1,1],trainable:!1},r={inputShape:[1,1,t.nLatents+t.nPitches]};t.nn.add(PB(1e-8,r)),t.nn.add(function(){return new RB(arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}(2,16)),t.nn.add(i.conv2d(n)),t.nn.add(i.leakyReLU({alpha:.2})),t.nn.add(PB()),n.padding="same",n.kernelSize=[3,3],t.nn.add(i.conv2d(n)),t.nn.add(i.leakyReLU({alpha:.2})),t.nn.add(PB());for(var a=[256,256,256,128,64,32],o=0;o<a.length;o++)t.nn.add(FB(2)),n.filters=a[o],t.nn.add(i.conv2d(n)),t.nn.add(i.leakyReLU({alpha:.2})),t.nn.add(PB()),t.nn.add(i.conv2d(n)),t.nn.add(i.leakyReLU({alpha:.2})),t.nn.add(PB());n.filters=2,n.kernelSize=[1,1],n.activation="tanh",t.nn.add(i.conv2d(n)),t.setWeights(e)}))}},{key:"setWeights",value:function(e){function t(t){var n=e[t];if(void 0===n)throw Error("Variable not found: ".concat(t));return n}var n="Generator/progressive_gan_generator/progressive_gan_block_",r=[t("".concat(n,"1/conv0/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"1/conv0/bias/ExponentialMovingAverage")),t("".concat(n,"1/conv1/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"1/conv1/bias/ExponentialMovingAverage")),t("".concat(n,"2/conv0/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"2/conv0/bias/ExponentialMovingAverage")),t("".concat(n,"2/conv1/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"2/conv1/bias/ExponentialMovingAverage")),t("".concat(n,"3/conv0/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"3/conv0/bias/ExponentialMovingAverage")),t("".concat(n,"3/conv1/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"3/conv1/bias/ExponentialMovingAverage")),t("".concat(n,"4/conv0/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"4/conv0/bias/ExponentialMovingAverage")),t("".concat(n,"4/conv1/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"4/conv1/bias/ExponentialMovingAverage")),t("".concat(n,"5/conv0/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"5/conv0/bias/ExponentialMovingAverage")),t("".concat(n,"5/conv1/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"5/conv1/bias/ExponentialMovingAverage")),t("".concat(n,"6/conv0/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"6/conv0/bias/ExponentialMovingAverage")),t("".concat(n,"6/conv1/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"6/conv1/bias/ExponentialMovingAverage")),t("".concat(n,"7/conv0/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"7/conv0/bias/ExponentialMovingAverage")),t("".concat(n,"7/conv1/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"7/conv1/bias/ExponentialMovingAverage")),t("".concat(n,"7/to_rgb/conv2d/kernel/ExponentialMovingAverage")),t("".concat(n,"7/to_rgb/bias/ExponentialMovingAverage"))];this.nn.setWeights(r)}},{key:"predict",value:function(e,t){return this.nn.predict(e,{batchSize:t})}},{key:"randomSample",value:function(e){var t=this;return S.di((function(){var n=S.Lg([1,t.nLatents],0,1,"float32"),r=S.Vh([e-t.minMidiPitch],"int32"),a=S.sg(r,t.midiPitches),i=S.ce([n,a],1).expandDims(1).expandDims(1);return t.predict(i,1)}))}},{key:"specgramsToAudio",value:function(e){return function(e){return NB.apply(this,arguments)}(e)}}]),e}();function zB(e){return qB.apply(this,arguments)}function qB(){return(qB=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o,s,c,u,l,f,d,p;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1024,r=20.7,a=120,i=Math.floor(HB/KB),o=S.Vh(t,"float32"),s=t.length,null!==o){e.next=8;break}return e.abrupt("return",[]);case 8:return c=o.mul(o).reshape([s,1]),u=S.he(c,S.tg([n,1,1]).div(n),i,"same").sqrt().squeeze(),1e-20,l=S.jg(S.Hf(S.Xf(1e-20,u)).div(S.Hf(10)),20),f=l.sub(r),d=S.Xf(f,-a),e.next=16,d.array();case 16:return p=e.sent,o.dispose(),c.dispose(),u.dispose(),l.dispose(),f.dispose(),d.dispose(),e.abrupt("return",p);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return S.di((function(){var n=S.jg(e,S.Dg(2,t));return n=n.clipByValue(0,rB(110).dataSync()[0])}))}function BB(e,t,n){return e.splice(n),function(e,t){for(var n=[],r=Math.floor(t/e.length),a=t%e.length,i=0;i<e.length;i++){n.push(e[i]);for(var o=1;o<r;o++)n.push(-1);i<a&&n.push(-1)}for(var s=-1,c=0;c<n.length;c++)if(-1!==n[c]){var u=n[c],l=s>=0?n[s]:0;-1!==s&&(u-=n[s]);for(var f=s+1;f<c;f++)n[f]=l+u*(f-s)/(c-s);s=c}for(var d=s+1;d<n.length;d++)n[d]=s>=0?n[d-1]:0;return n}(e,t)}function UB(e){var t=e*QB+XB;return 10*Math.pow(2,1*t/12)}function WB(e,t){return GB.apply(this,arguments)}function GB(){return GB=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w,x,j,_,C,E,N,T,I,A,M,P,R,D,F=arguments;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=F.length>2&&void 0!==F[2]?F[2]:ZB,a=16e3,i=512,o=[],s=[],c=n.length,u=S.Uh(n),l=Math.ceil(c/i)*i,f=u.pad([[0,l-c]]),d=f.size/a,e.next=12,t.execute({input_audio_samples:f});case 12:return p=e.sent,e.next=15,p[0].data();case 15:return h=e.sent,e.next=18,p[1].data();case 18:if(32*((v=e.sent).length-1)/1e3!==d){e.next=42;break}m=20,b=0;case 22:if(!(b<v.length)){e.next=40;break}if(g=1-h[b],s.push(g),!(g>=ZB)){e.next=30;break}m=UB(v[b]),o.push(m),e.next=37;break;case 30:return y=S.ji([1],0,YB),e.next=33,y.array();case 33:O=e.sent,k=1-O,o.push(m*k),y.dispose();case 37:++b,e.next=22;break;case 40:e.next=86;break;case 42:w=l/i+1,x=new Float32Array(w),h=new Float32Array(w),j=0;case 46:if(!(j<l)){e.next=66;break}return _=f.slice([j],[l/4]),e.next=50,t.execute({input_audio_samples:_});case 50:return C=e.sent,e.next=53,C[0].data();case 53:return E=e.sent,e.next=56,C[1].data();case 56:N=e.sent,T=Math.floor(j/i),h.set(E,T),x.set(N,T),_.dispose(),C[0].dispose(),C[1].dispose();case 63:j+=l/4,e.next=46;break;case 66:I=20,A=0;case 68:if(!(A<x.length)){e.next=86;break}if(M=1-h[A],s.push(M),!(M>=r)){e.next=76;break}I=UB(x[A]),o.push(I),e.next=83;break;case 76:return P=S.ji([1],0,YB),e.next=79,P.array();case 79:R=e.sent,D=1-R,o.push(I*D),P.dispose();case 83:++A,e.next=68;break;case 86:return p[0].dispose(),p[1].dispose(),u.dispose(),f.dispose(),e.abrupt("return",{pitches:o,confidences:s});case 91:case"end":return e.stop()}}),e)}))),GB.apply(this,arguments)}var HB=16e3,KB=250,XB=25.58,QB=63.07,YB=.002,ZB=.7;function JB(e){return $B.apply(this,arguments)}function $B(){return($B=Object(bn.a)(mn.a.mark((function e(t){var n;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ff(t,{fromTFHub:!0});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eU(e,t,n){return tU.apply(this,arguments)}function tU(){return(tU=Object(bn.a)(mn.a.mark((function e(t,n,r){var a,i,o,s,c,u;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("webgl"===S.ef()){e.next=2;break}throw new Error("Device does not support webgl.");case 2:return e.next=4,XV(t,HB);case 4:return a=e.sent,i=a.length,e.next=8,zB(a);case 8:return o=e.sent,e.next=11,WB(n,a,r);case 11:return s=e.sent,c=s.pitches,u=s.confidences,e.abrupt("return",{f0_hz:c,loudness_db:o,confidences:u,originalRecordedBufferLength:i});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nU=function(){function e(t){Object(_.a)(this,e),this.modelUrl=t||"https://tfhub.dev/google/tfjs-model/spice/2/default/1"}return Object(C.a)(e,[{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JB(this.modelUrl);case 2:this.spiceModel=e.sent,this.initialized=!0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAudioFeatures",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eU(t,this.spiceModel,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.initialized&&(this.spiceModel.dispose(),this.initialized=!1)}},{key:"isInitialized",value:function(){return this.initialized}}]),e}(),rU=function(e,t,n){var r=e.createBuffer(1,t.length,n);return r.copyToChannel(t,0),r};function aU(e){return iU.apply(this,arguments)}function iU(){return(iU=Object(bn.a)(mn.a.mark((function e(t){var n,r,a,i,o,s,c;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.audioCtx,r=t.arrayBuffer,a=t.sampleRate,lD(n),o=rU(n,r,a),s=KD((function(){var e=new Xz({attack:.001,release:.001,threshold:-6}).toDestination(),t=new Cz({wet:.3,decay:3}).connect(e),n=new nL(8e3,"lowpass",-24).connect(t);return new RF({url:o}).connect(n).start(),t.ready}),r.length/a),e.next=6,s;case 6:return i=e.sent,c=i.getChannelData(0),o=null,i.dispose(),i=null,e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oU(e,t){for(var n,r,a,i=e.reduce((function(e,t){return e+t.length}),0),o=new Float32Array(i),s=0,c=0;c<e.length;c++){var u=e[c],l=c<e.length-1;if(0===c&&(o.set(u,s),s+=u.length),l){for(var f=e[c+1],d=s-t,p=d,h=0,v=u.length-t;p<s&&h<f.length;p++,h++,v++){var m=(p-d)/(s-d);o[p]=(n=u[v],r=f[h],n*(1-(a=m))+r*a)}o.set(f.slice(t),s),s+=f.slice(t).length}}return o}var sU=-120,cU=.7;function uU(){return lU.apply(this,arguments)}function lU(){return(lU=Object(bn.a)(mn.a.mark((function e(){var t,n,r;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1048576,600,t=window.screen.availWidth*window.screen.availHeight,n=window.devicePixelRatio,r=Math.round(t*n*600/1048576),isNaN(r)||!(r<50)){e.next=7;break}throw new Error("Insufficient memory! Your device has ".concat(r," and recommended memory is ").concat(50));case 7:return e.prev=7,e.next=10,S.Og();case 10:if("webgl"===S.ef()){e.next=12;break}throw new Error("It looks like your browser does not support webgl.");case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(7),new Error("insufficient memory - ".concat(e.t0));case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,null,[[7,14]])})))).apply(this,arguments)}function fU(e){return dU.apply(this,arguments)}function dU(){return(dU=Object(bn.a)(mn.a.mark((function e(t){var n;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ff(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pU(e,t,n,r,a){return new Promise((function(i){for(var o={loudness_db:[0],f0_hz:[0]},s=0,c=t;c<n;c++)r&&c>=a?(o.loudness_db[s]=sU,o.f0_hz[s]=-1):(o.loudness_db[s]=e.loudness_db[c],o.f0_hz[s]=e.f0_hz[c]),s+=1;i(o)}))}function hU(e,t){return vU.apply(this,arguments)}function vU(){return(vU=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w,x,j,_,C,E,N;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.averageMaxLoudness,a=n.meanLoudness,i=n.loudnessThreshold,o=n.meanPitch,s=[],!(t.loudness_db.length>0)){e.next=31;break}return u=S.di((function(){var e=S.Vh(t.loudness_db,"float32"),n=e.max(),a=S.Oh(r,n),i=S.wd(e,a);return e.dispose(),n.dispose(),a.dispose(),i})),l=u.greater(i),e.next=10,S.Td(u,l);case 10:return f=e.sent,e.next=13,f.array();case 13:return d=e.sent,p=S.di((function(){var e=d>0?f.mean():u.mean(),t=S.Oh(a,e),n=u.add(t).add(0).clipByValue(sU,r),i=n.min(),o=e.sub(i);return n.sub(i).div(o).mul(a-sU).add(sU)})),h=S.Xg(t.confidences,[-1,1,1]),v=S.Cg(h,[100,1],"avg","same"),m=v.reshape([-1]),b=S.Bf(m,cU),c=S.di((function(){var e=b.mul(-25),t=p.add(e),n=S.Xf(t,sU);return e.dispose(),t.dispose(),n})),e.next=22,c.array();case 22:s=e.sent,l.dispose(),u.dispose(),p.dispose(),f.dispose(),v.dispose(),m.dispose(),h.dispose(),b.dispose();case 31:if(g=[],!(t.f0_hz.length>0)){e.next=62;break}return e.next=35,aB(t.f0_hz);case 35:return y=e.sent,O=S.di((function(){for(var e=0,t=y.length;e<t;++e)y[e]===-1/0&&(y[e]=0);return y})),k=S.Bf(t.confidences,cU),w=c.greater(i),x=S.Of(k,w),e.next=42,S.Td(O,x);case 42:return j=e.sent,_=j.mean(),e.next=46,S.Oh(o,_);case 46:return C=e.sent,e.next=49,C.array();case 49:return E=e.sent,N=S.di((function(){var e=E/12;return e=Math.round(e),VB(t.f0_hz,e)})),e.next=53,N.array();case 53:g=e.sent,c.dispose(),_.dispose(),j.dispose(),C.dispose(),N.dispose(),w.dispose(),x.dispose(),k.dispose();case 62:return e.abrupt("return",{f0_hz:g,loudness_db:s});case 63:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mU(e){return e*KB}function bU(e){return e/KB}var gU=function(){function e(t,n){Object(_.a)(this,e),this.checkpointUrl=t,n&&(this.settings=n)}return Object(C.a)(e,[{key:"initialize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){var t;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cc.c("Roll",(function(e){var t=S.Fh(e.inputs[0],2,2),n=S.ce([t[1],t[0]],2);return t.forEach((function(e){return e.dispose()})),n})),S.Me().set("WEBGL_PACK",!1),S.Me().set("WEBGL_CONV_IM2COL",!1),S.Me().set("WEBGL_DELETE_TEXTURE_THRESHOLD",104857600),e.next=6,fU("".concat(this.checkpointUrl,"/model.json"));case 6:return this.model=e.sent,e.prev=7,e.next=10,fetch("".concat(this.checkpointUrl,"/settings.json")).then((function(e){return e.json()}));case 10:t=e.sent;case 11:if(e.prev=11,null!==this.settings){e.next=14;break}throw new Error("Passing settings is required if you do not have a settings.json file.");case 14:return e.finish(11);case 15:this.settings=Object(UN.a)(Object(UN.a)({},t),this.settings),this.initialized=!0;case 17:case"end":return e.stop()}}),e,this,[[7,,11,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.initialized&&(this.model.dispose(),this.checkpointUrl=null,this.initialized=!1)}},{key:"isInitialized",value:function(){return this.initialized}},{key:"memCheck",value:function(){var e=Object(bn.a)(mn.a.mark((function e(){return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uU();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"synthesize",value:function(){var e=Object(bn.a)(mn.a.mark((function e(t,n){var r,a,i,o,s,c,u,l,f,d,p,h,v,m,b,g,y,O,k,w,x,j,_,C,E,N,T,I,A,M,P,R,D=this;return mn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==n&&(this.settings=Object(UN.a)(Object(UN.a)({},this.settings),n)),r=t.f0_hz,a=t.loudness_db,i=t.confidences,o=BB(r,a.length,this.settings.modelMaxFrameLength),s=BB(i,a.length,this.settings.modelMaxFrameLength),e.next=6,hU({f0_hz:o,loudness_db:a,confidences:s},this.settings);case 6:c=e.sent,u=[],l=c.loudness_db.length,f=bU(l),d=!1,p=bU(this.settings.modelMaxFrameLength),v=1*HB,m=0;case 14:if(!(m<f)){e.next=38;break}return b=Math.floor(mU(m)),(g=mU(m+p))>l&&(d=!0),e.next=20,pU(c,b,g,d,l);case 20:return y=e.sent,O=y.f0_hz,k=y.loudness_db,w=S.Vh(O,"float32"),x=S.Vh(k,"float32"),e.next=27,this.model.predict({f0_hz:w,loudness_db:x});case 27:return j=e.sent,e.next=30,j.data();case 30:_=e.sent,u.push(_),j.dispose(),w.dispose(),x.dispose();case 35:m+=p-1,e.next=14;break;case 38:if(f<=p)h=u[0];else{for(C=[],E=0;E<u.length;E++)N=u[E],C.push(N);h=oU(C,v)}return T=h.slice(0,t.originalRecordedBufferLength),I=T.map((function(e){return e*(D.settings.postGain||1)})),A=new eD,M=rU(A,I,HB),e.next=45,XV(M,48e3);case 45:return P=e.sent,e.next=48,aU({audioCtx:A,arrayBuffer:P,sampleRate:48e3});case 48:return R=e.sent,e.abrupt("return",R);case 50:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},,,function(e,t,n){"use strict";var r=n(17),a=n(16),i=n(1),o=n(23),s=n.n(o),c=n(141),u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};t.a=function(e){return i.createElement(c.a,null,(function(t){var n,o=t.getPrefixCls,c=t.direction,l=e.prefixCls,f=e.type,d=void 0===f?"horizontal":f,p=e.orientation,h=void 0===p?"center":p,v=e.className,m=e.children,b=e.dashed,g=e.plain,y=u(e,["prefixCls","type","orientation","className","children","dashed","plain"]),O=o("divider",l),k=h.length>0?"-".concat(h):h,w=!!m,x=s()(O,"".concat(O,"-").concat(d),(n={},Object(a.a)(n,"".concat(O,"-with-text"),w),Object(a.a)(n,"".concat(O,"-with-text").concat(k),w),Object(a.a)(n,"".concat(O,"-dashed"),!!b),Object(a.a)(n,"".concat(O,"-plain"),!!g),Object(a.a)(n,"".concat(O,"-rtl"),"rtl"===c),n),v);return i.createElement("div",Object(r.a)({className:x},y,{role:"separator"}),m&&i.createElement("span",{className:"".concat(O,"-inner-text")},m))}))}},function(e,t,n){"use strict";var r=n(17),a=n(16),i=n(41),o=n(44),s=n(47),c=n(46),u=n(1),l=n(23),f=n.n(l),d=n(63),p=n(415),h=n.n(p),v=n(141),m=n(78),b=n(66),g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},y=(Object(m.a)("small","default","large"),null);var O=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var o;Object(i.a)(this,n),(o=t.call(this,e)).debouncifyUpdateSpinning=function(e){var t=(e||o.props).delay;t&&(o.cancelExistingSpin(),o.updateSpinning=h()(o.originalUpdateSpinning,t))},o.updateSpinning=function(){var e=o.props.spinning;o.state.spinning!==e&&o.setState({spinning:e})},o.renderSpin=function(e){var t,n=e.getPrefixCls,i=e.direction,s=o.props,c=s.prefixCls,l=s.className,p=s.size,h=s.tip,v=s.wrapperClassName,m=s.style,O=g(s,["prefixCls","className","size","tip","wrapperClassName","style"]),k=o.state.spinning,w=n("spin",c),x=f()(w,(t={},Object(a.a)(t,"".concat(w,"-sm"),"small"===p),Object(a.a)(t,"".concat(w,"-lg"),"large"===p),Object(a.a)(t,"".concat(w,"-spinning"),k),Object(a.a)(t,"".concat(w,"-show-text"),!!h),Object(a.a)(t,"".concat(w,"-rtl"),"rtl"===i),t),l),j=Object(d.a)(O,["spinning","delay","indicator"]),S=u.createElement("div",Object(r.a)({},j,{style:m,className:x}),function(e,t){var n=t.indicator,r="".concat(e,"-dot");return null===n?null:Object(b.b)(n)?Object(b.a)(n,{className:f()(n.props.className,r)}):Object(b.b)(y)?Object(b.a)(y,{className:f()(y.props.className,r)}):u.createElement("span",{className:f()(r,"".concat(e,"-dot-spin"))},u.createElement("i",{className:"".concat(e,"-dot-item")}),u.createElement("i",{className:"".concat(e,"-dot-item")}),u.createElement("i",{className:"".concat(e,"-dot-item")}),u.createElement("i",{className:"".concat(e,"-dot-item")}))}(w,o.props),h?u.createElement("div",{className:"".concat(w,"-text")},h):null);if(o.isNestedPattern()){var _=f()("".concat(w,"-container"),Object(a.a)({},"".concat(w,"-blur"),k));return u.createElement("div",Object(r.a)({},j,{className:f()("".concat(w,"-nested-loading"),v)}),k&&u.createElement("div",{key:"loading"},S),u.createElement("div",{className:_,key:"container"},o.props.children))}return S};var s=e.spinning,c=function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(s,e.delay);return o.state={spinning:s&&!c},o.originalUpdateSpinning=o.updateSpinning,o.debouncifyUpdateSpinning(e),o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.updateSpinning()}},{key:"componentDidUpdate",value:function(){this.debouncifyUpdateSpinning(),this.updateSpinning()}},{key:"componentWillUnmount",value:function(){this.cancelExistingSpin()}},{key:"cancelExistingSpin",value:function(){var e=this.updateSpinning;e&&e.cancel&&e.cancel()}},{key:"isNestedPattern",value:function(){return!(!this.props||"undefined"===typeof this.props.children)}},{key:"render",value:function(){return u.createElement(v.a,null,this.renderSpin)}}],[{key:"setDefaultIndicator",value:function(e){y=e}}]),n}(u.Component);O.defaultProps={spinning:!0,size:"default",wrapperClassName:""},t.a=O},function(e,t,n){"use strict";var r=n(16),a=n(17),i=n(38),o=n(31),s=n(26),c=n(79),u=n.n(c),l=n(1),f=n.n(l),d=n(41),p=n(44),h=n(47),v=n(46),m=n(35),b=n(146),g=n(23),y=n.n(g),O=n(135);function k(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(n){return t}}function w(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var n=new FormData;e.data&&Object.keys(e.data).forEach((function(t){var r=e.data[t];Array.isArray(r)?r.forEach((function(e){n.append("".concat(t,"[]"),e)})):n.append(t,e.data[t])})),e.file instanceof Blob?n.append(e.filename,e.file,e.file.name):n.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(function(e,t){var n="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),r=new Error(n);return r.status=t.status,r.method=e.method,r.url=e.action,r}(e,t),k(t)):e.onSuccess(k(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var r=e.headers||{};return null!==r["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach((function(e){null!==r[e]&&t.setRequestHeader(e,r[e])})),t.send(n),{abort:function(){t.abort()}}}var x=+new Date,j=0;function S(){return"rc-upload-".concat(x,"-").concat(++j)}var _=n(52),C=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",a=e.type||"",i=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){var n=r.toLowerCase(),o=t.toLowerCase(),s=[o];return".jpg"!==o&&".jpeg"!==o||(s=[".jpg",".jpeg"]),s.some((function(e){return n.endsWith(e)}))}return/\/\*$/.test(t)?i===t.replace(/\/.*$/,""):a===t||!!/^\w+$/.test(t)&&(Object(_.a)(!1,"Upload takes an invalidate 'accept' type '".concat(t,"'.Skip for check.")),!0)}))}return!0};var E=function(e,t,n){var r=function e(r,a){r.path=a||"",r.isFile?r.file((function(e){n(e)&&(r.fullPath&&!e.webkitRelativePath&&(Object.defineProperties(e,{webkitRelativePath:{writable:!0}}),e.webkitRelativePath=r.fullPath.replace(/^\//,""),Object.defineProperties(e,{webkitRelativePath:{writable:!1}})),t([e]))})):r.isDirectory&&function(e,t){var n=e.createReader(),r=[];!function e(){n.readEntries((function(n){var a=Array.prototype.slice.apply(n);r=r.concat(a),a.length?e():t(r)}))}()}(r,(function(t){t.forEach((function(t){e(t,"".concat(a).concat(r.name,"/"))}))}))};e.forEach((function(e){r(e.webkitGetAsEntry())}))},N=["component","prefixCls","className","disabled","id","style","multiple","accept","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave","capture"],T=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={uid:S()},e.reqs={},e.fileInput=void 0,e._isMounted=void 0,e.onChange=function(t){var n=e.props,r=n.accept,a=n.directory,i=t.target.files,s=Object(o.a)(i).filter((function(e){return!a||C(e,r)}));e.uploadFiles(s),e.reset()},e.onClick=function(t){var n=e.fileInput;if(n){var r=e.props,a=r.children,i=r.onClick;if(a&&"button"===a.type){var o=n.parentNode;o.focus(),o.querySelector("button").blur()}n.click(),i&&i(t)}},e.onKeyDown=function(t){"Enter"===t.key&&e.onClick(t)},e.onFileDrop=function(t){var n=e.props.multiple;if(t.preventDefault(),"dragover"!==t.type)if(e.props.directory)E(Array.prototype.slice.call(t.dataTransfer.items),e.uploadFiles,(function(t){return C(t,e.props.accept)}));else{var r=Object(o.a)(t.dataTransfer.files).filter((function(t){return C(t,e.props.accept)}));!1===n&&(r=r.slice(0,1)),e.uploadFiles(r)}},e.uploadFiles=function(t){var n=Object(o.a)(t),r=n.map((function(t){return t.uid=S(),e.processFile(t,n)}));Promise.all(r).then((function(t){var n=e.props.onBatchStart;null===n||void 0===n||n(t.map((function(e){return{file:e.origin,parsedFile:e.parsedFile}}))),t.filter((function(e){return null!==e.parsedFile})).forEach((function(t){e.post(t)}))}))},e.processFile=function(){var t=Object(b.a)(u.a.mark((function t(n,r){var a,o,s,c,l,f,d,p,h;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.beforeUpload,o=n,!a){t.next=14;break}return t.prev=3,t.next=6,a(n,r);case 6:o=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),o=!1;case 12:if(!1!==o){t.next=14;break}return t.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!==typeof(s=e.props.action)){t.next=21;break}return t.next=18,s(n);case 18:c=t.sent,t.next=22;break;case 21:c=s;case 22:if("function"!==typeof(l=e.props.data)){t.next=29;break}return t.next=26,l(n);case 26:f=t.sent,t.next=30;break;case 29:f=l;case 30:return d="object"!==Object(i.a)(o)&&"string"!==typeof o||!o?n:o,p=d instanceof File?d:new File([d],n.name,{type:n.type}),(h=p).uid=n.uid,t.abrupt("return",{origin:n,data:f,parsedFile:h,action:c});case 35:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,n){return t.apply(this,arguments)}}(),e.saveFileInput=function(t){e.fileInput=t},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(e){var t=this,n=e.data,r=e.origin,a=e.action,i=e.parsedFile;if(this._isMounted){var o=this.props,s=o.onStart,c=o.customRequest,u=o.name,l=o.headers,f=o.withCredentials,d=o.method,p=r.uid,h=c||w,v={action:a,filename:u,data:n,file:i,headers:l,withCredentials:f,method:d||"post",onProgress:function(e){var n=t.props.onProgress;null===n||void 0===n||n(e,i)},onSuccess:function(e,n){var r=t.props.onSuccess;null===r||void 0===r||r(e,i,n),delete t.reqs[p]},onError:function(e,n){var r=t.props.onError;null===r||void 0===r||r(e,n,i),delete t.reqs[p]}};s(r),this.reqs[p]=h(v)}}},{key:"reset",value:function(){this.setState({uid:S()})}},{key:"abort",value:function(e){var t=this.reqs;if(e){var n=e.uid?e.uid:e;t[n]&&t[n].abort&&t[n].abort(),delete t[n]}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort&&t[e].abort(),delete t[e]}))}},{key:"render",value:function(){var e,t=this.props,n=t.component,i=t.prefixCls,o=t.className,s=t.disabled,c=t.id,u=t.style,l=t.multiple,d=t.accept,p=t.children,h=t.directory,v=t.openFileDialogOnClick,b=t.onMouseEnter,g=t.onMouseLeave,k=t.capture,w=Object(m.a)(t,N),x=y()((e={},Object(r.a)(e,i,!0),Object(r.a)(e,"".concat(i,"-disabled"),s),Object(r.a)(e,o,o),e)),j=h?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},S=s?{}:{onClick:v?this.onClick:function(){},onKeyDown:v?this.onKeyDown:function(){},onMouseEnter:b,onMouseLeave:g,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return f.a.createElement(n,Object(a.a)({},S,{className:x,role:"button",style:u}),f.a.createElement("input",Object(a.a)({},Object(O.a)(w,{aria:!0,data:!0}),{id:c,type:"file",ref:this.saveFileInput,onClick:function(e){return e.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:d},j,{multiple:l,onChange:this.onChange},null!=k?{capture:k}:{})),p)}}]),n}(l.Component),I=T;function A(){}var M=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).uploader=void 0,e.saveUploader=function(t){e.uploader=t},e}return Object(p.a)(n,[{key:"abort",value:function(e){this.uploader.abort(e)}},{key:"render",value:function(){return f.a.createElement(I,Object(a.a)({},this.props,{ref:this.saveUploader}))}}]),n}(l.Component);M.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:A,onError:A,onSuccess:A,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var P=M,R=n(87),D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},F=function(e,t){var n=e.style,r=e.height,i=D(e,["style","height"]);return l.createElement(Ae,Object(a.a)({ref:t},i,{type:"drag",style:Object(a.a)(Object(a.a)({},n),{height:r})}))},L=l.forwardRef(F);L.displayName="Dragger";var z=L,q=n(71),V=n(118),B=n(18),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},W=n(48),G=function(e,t){return l.createElement(W.a,Object(B.a)(Object(B.a)({},e),{},{ref:t,icon:U}))};G.displayName="PaperClipOutlined";var H=l.forwardRef(G),K={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"},X=function(e,t){return l.createElement(W.a,Object(B.a)(Object(B.a)({},e),{},{ref:t,icon:K}))};X.displayName="PictureTwoTone";var Q=l.forwardRef(X),Y={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"},Z=function(e,t){return l.createElement(W.a,Object(B.a)(Object(B.a)({},e),{},{ref:t,icon:Y}))};Z.displayName="FileTwoTone";var J=l.forwardRef(Z),$=n(66);function ee(e){return Object(a.a)(Object(a.a)({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function te(e,t){var n=Object(o.a)(t),r=n.findIndex((function(t){return t.uid===e.uid}));return-1===r?n.push(e):n[r]=e,n}function ne(e,t){var n=void 0!==e.uid?"uid":"name";return t.filter((function(t){return t[n]===e[n]}))[0]}var re=function(e){return 0===e.indexOf("image/")},ae=200;var ie=n(116),oe=n(141),se=n(167),ce=n(208),ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},le=function(e,t){return l.createElement(W.a,Object(B.a)(Object(B.a)({},e),{},{ref:t,icon:ue}))};le.displayName="EyeOutlined";var fe=l.forwardRef(le),de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},pe=function(e,t){return l.createElement(W.a,Object(B.a)(Object(B.a)({},e),{},{ref:t,icon:de}))};pe.displayName="DeleteOutlined";var he=l.forwardRef(pe),ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},me=function(e,t){return l.createElement(W.a,Object(B.a)(Object(B.a)({},e),{},{ref:t,icon:ve}))};me.displayName="DownloadOutlined";var be=l.forwardRef(me),ge=n(140),ye=n(299),Oe=l.forwardRef((function(e,t){var n,i,o,c=e.prefixCls,u=e.className,f=e.style,d=e.locale,p=e.listType,h=e.file,v=e.items,m=e.progress,b=e.iconRender,g=e.actionIconRender,O=e.itemRender,k=e.isImgUrl,w=e.showPreviewIcon,x=e.showRemoveIcon,j=e.showDownloadIcon,S=e.removeIcon,_=e.downloadIcon,C=e.onPreview,E=e.onDownload,N=e.onClose,T=l.useState(!1),I=Object(s.a)(T,2),A=I[0],M=I[1],P=l.useRef();l.useEffect((function(){return P.current=setTimeout((function(){M(!0)}),300),function(){window.clearTimeout(P.current)}}),[]);var R="".concat(c,"-span"),D=b(h),F=l.createElement("div",{className:"".concat(c,"-text-icon")},D);if("picture"===p||"picture-card"===p)if("uploading"===h.status||!h.thumbUrl&&!h.url){var L,z=y()((L={},Object(r.a)(L,"".concat(c,"-list-item-thumbnail"),!0),Object(r.a)(L,"".concat(c,"-list-item-file"),"uploading"!==h.status),L));F=l.createElement("div",{className:z},D)}else{var V,B=(null===k||void 0===k?void 0:k(h))?l.createElement("img",{src:h.thumbUrl||h.url,alt:h.name,className:"".concat(c,"-list-item-image")}):D,U=y()((V={},Object(r.a)(V,"".concat(c,"-list-item-thumbnail"),!0),Object(r.a)(V,"".concat(c,"-list-item-file"),k&&!k(h)),V));F=l.createElement("a",{className:U,onClick:function(e){return C(h,e)},href:h.url||h.thumbUrl,target:"_blank",rel:"noopener noreferrer"},B)}var W,G=y()((n={},Object(r.a)(n,"".concat(c,"-list-item"),!0),Object(r.a)(n,"".concat(c,"-list-item-").concat(h.status),!0),Object(r.a)(n,"".concat(c,"-list-item-list-type-").concat(p),!0),n)),H="string"===typeof h.linkProps?JSON.parse(h.linkProps):h.linkProps,K=x?g(("function"===typeof S?S(h):S)||l.createElement(he,null),(function(){return N(h)}),c,d.removeFile):null,X=j&&"done"===h.status?g(("function"===typeof _?_(h):_)||l.createElement(be,null),(function(){return E(h)}),c,d.downloadFile):null,Q="picture-card"!==p&&l.createElement("span",{key:"download-delete",className:y()("".concat(c,"-list-item-card-actions"),{picture:"picture"===p})},X,K),Y=y()("".concat(c,"-list-item-name")),Z=h.url?[l.createElement("a",Object(a.a)({key:"view",target:"_blank",rel:"noopener noreferrer",className:Y,title:h.name},H,{href:h.url,onClick:function(e){return C(h,e)}}),h.name),Q]:[l.createElement("span",{key:"view",className:Y,onClick:function(e){return C(h,e)},title:h.name},h.name),Q],J=w?l.createElement("a",{href:h.url||h.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:h.url||h.thumbUrl?void 0:{pointerEvents:"none",opacity:.5},onClick:function(e){return C(h,e)},title:d.previewFile},l.createElement(fe,null)):null,$="picture-card"===p&&"uploading"!==h.status&&l.createElement("span",{className:"".concat(c,"-list-item-actions")},J,"done"===h.status&&X,K);W=h.response&&"string"===typeof h.response?h.response:(null===(i=h.error)||void 0===i?void 0:i.statusText)||(null===(o=h.error)||void 0===o?void 0:o.message)||d.uploadError;var ee=l.createElement("span",{className:R},F,Z),te=(0,l.useContext(oe.b).getPrefixCls)(),ne=l.createElement("div",{className:G},l.createElement("div",{className:"".concat(c,"-list-item-info")},ee),$,A&&l.createElement(q.b,{motionName:"".concat(te,"-fade"),visible:"uploading"===h.status,motionDeadline:2e3},(function(e){var t=e.className,n="percent"in h?l.createElement(ye.a,Object(a.a)({},m,{type:"line",percent:h.percent})):null;return l.createElement("div",{className:y()("".concat(c,"-list-item-progress"),t)},n)}))),re=y()("".concat(c,"-list-").concat(p,"-container"),u),ae="error"===h.status?l.createElement(ge.a,{title:W,getPopupContainer:function(e){return e.parentNode}},ne):ne;return l.createElement("div",{className:re,style:f,ref:t},O?O(ae,h,v,{download:E.bind(null,h),preview:C.bind(null,h),remove:N.bind(null,h)}):ae)})),ke=Object(a.a)({},ie.a);delete ke.onAppearEnd,delete ke.onEnterEnd,delete ke.onLeaveEnd;var we=function(e,t){var n,i=e.listType,c=e.previewFile,u=e.onPreview,f=e.onDownload,d=e.onRemove,p=e.locale,h=e.iconRender,v=e.isImageUrl,m=e.prefixCls,b=e.items,g=void 0===b?[]:b,O=e.showPreviewIcon,k=e.showRemoveIcon,w=e.showDownloadIcon,x=e.removeIcon,j=e.downloadIcon,S=e.progress,_=e.appendAction,C=e.itemRender,E=Object(ce.a)(),N=l.useState(!1),T=Object(s.a)(N,2),I=T[0],A=T[1];l.useEffect((function(){"picture"!==i&&"picture-card"!==i||(g||[]).forEach((function(e){"undefined"!==typeof document&&"undefined"!==typeof window&&window.FileReader&&window.File&&(e.originFileObj instanceof File||e.originFileObj instanceof Blob)&&void 0===e.thumbUrl&&(e.thumbUrl="",c&&c(e.originFileObj).then((function(t){e.thumbUrl=t||"",E()})))}))}),[i,g,c]),l.useEffect((function(){A(!0)}),[]);var M=function(e,t){if(u)return null===t||void 0===t||t.preventDefault(),u(e)},P=function(e){"function"===typeof f?f(e):e.url&&window.open(e.url)},R=function(e){null===d||void 0===d||d(e)},D=function(e){if(h)return h(e,i);var t="uploading"===e.status,n=v&&v(e)?l.createElement(Q,null):l.createElement(J,null),r=t?l.createElement(V.a,null):l.createElement(H,null);return"picture"===i?r=t?l.createElement(V.a,null):n:"picture-card"===i&&(r=t?p.uploading:n),r},F=function(e,t,n,r){var i={type:"text",size:"small",title:r,onClick:function(n){t(),Object($.b)(e)&&e.props.onClick&&e.props.onClick(n)},className:"".concat(n,"-list-item-card-actions-btn")};if(Object($.b)(e)){var o=Object($.a)(e,Object(a.a)(Object(a.a)({},e.props),{onClick:function(){}}));return l.createElement(se.a,Object(a.a)({},i,{icon:o}))}return l.createElement(se.a,i,l.createElement("span",null,e))};l.useImperativeHandle(t,(function(){return{handlePreview:M,handleDownload:P}}));var L=l.useContext(oe.b),z=L.getPrefixCls,B=L.direction,U=z("upload",m),W=y()((n={},Object(r.a)(n,"".concat(U,"-list"),!0),Object(r.a)(n,"".concat(U,"-list-").concat(i),!0),Object(r.a)(n,"".concat(U,"-list-rtl"),"rtl"===B),n)),G=Object(o.a)(g.map((function(e){return{key:e.uid,file:e}}))),K="picture-card"===i?"animate-inline":"animate",X={motionDeadline:2e3,motionName:"".concat(U,"-").concat(K),keys:G,motionAppear:I};return"picture-card"!==i&&(X=Object(a.a)(Object(a.a)({},ke),X)),l.createElement("div",{className:W},l.createElement(q.a,Object(a.a)({},X,{component:!1}),(function(e){var t=e.key,n=e.file,r=e.className,a=e.style;return l.createElement(Oe,{key:t,locale:p,prefixCls:U,className:r,style:a,file:n,items:g,progress:S,listType:i,isImgUrl:v,showPreviewIcon:O,showRemoveIcon:k,showDownloadIcon:w,removeIcon:x,downloadIcon:j,iconRender:D,actionIconRender:F,itemRender:C,onPreview:M,onDownload:P,onClose:R})})),_&&l.createElement(q.b,X,(function(e){var t=e.className,n=e.style;return Object($.a)(_,(function(e){return{className:y()(e.className,t),style:Object(a.a)(Object(a.a)({},n),e.style)}}))})))},xe=l.forwardRef(we);xe.displayName="UploadList",xe.defaultProps={listType:"text",progress:{strokeWidth:2,showInfo:!1},showRemoveIcon:!0,showDownloadIcon:!1,showPreviewIcon:!0,previewFile:function(e){return new Promise((function(t){if(e.type&&re(e.type)){var n=document.createElement("canvas");n.width=ae,n.height=ae,n.style.cssText="position: fixed; left: 0; top: 0; width: ".concat(ae,"px; height: ").concat(ae,"px; z-index: 9999; display: none;"),document.body.appendChild(n);var r=n.getContext("2d"),a=new Image;a.onload=function(){var e=a.width,i=a.height,o=ae,s=ae,c=0,u=0;e>i?u=-((s=i*(ae/e))-o)/2:c=-((o=e*(ae/i))-s)/2,r.drawImage(a,c,u,o,s);var l=n.toDataURL();document.body.removeChild(n),t(l)},a.src=window.URL.createObjectURL(e)}else t("")}))},isImageUrl:function(e){if(e.type&&!e.thumbUrl)return re(e.type);var t=e.thumbUrl||e.url||"",n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/"),t=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(t)||[""])[0]}(t);return!(!/^data:image\//.test(t)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(n))||!/^data:/.test(t)&&!n}};var je=xe,Se=n(98),_e=n(108),Ce=n(55),Ee=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},Ne="__LIST_IGNORE_".concat(Date.now(),"__"),Te=function(e,t){var n,c=e.fileList,f=e.defaultFileList,d=e.onRemove,p=e.showUploadList,h=e.listType,v=e.onPreview,m=e.onDownload,b=e.onChange,g=e.onDrop,O=e.previewFile,k=e.disabled,w=e.locale,x=e.iconRender,j=e.isImageUrl,S=e.progress,_=e.prefixCls,C=e.className,E=e.type,N=e.children,T=e.style,I=e.itemRender,A=e.maxCount,M=Object(R.a)(f||[],{value:c,postState:function(e){return null!==e&&void 0!==e?e:[]}}),D=Object(s.a)(M,2),F=D[0],L=D[1],z=l.useState("drop"),q=Object(s.a)(z,2),V=q[0],B=q[1],U=l.useRef();l.useEffect((function(){Object(Ce.a)("fileList"in e||!("value"in e),"Upload","`value` is not a valid prop, do you mean `fileList`?"),Object(Ce.a)(!("transformFile"in e),"Upload","`transformFile` is deprecated. Please use `beforeUpload` directly.")}),[]),l.useMemo((function(){var e=Date.now();(c||[]).forEach((function(t,n){t.uid||Object.isFrozen(t)||(t.uid="__AUTO__".concat(e,"_").concat(n,"__"))}))}),[c]);var W=function(e,t,n){var r=Object(o.a)(t);1===A?r=r.slice(-1):A&&(r=r.slice(0,A)),L(r);var a={file:e,fileList:r};n&&(a.event=n),null===b||void 0===b||b(a)},G=function(e){var t=e.filter((function(e){return!e.file[Ne]}));if(t.length){var n=t.map((function(e){return ee(e.file)})),r=Object(o.a)(F);n.forEach((function(e){r=te(e,r)})),n.forEach((function(e,n){var a=e;if(t[n].parsedFile)e.status="uploading";else{var i,o=e.originFileObj;try{i=new File([o],o.name,{type:o.type})}catch(s){(i=new Blob([o],{type:o.type})).name=o.name,i.lastModifiedDate=new Date,i.lastModified=(new Date).getTime()}i.uid=e.uid,a=i}W(a,r)}))}},H=function(e,t,n){try{"string"===typeof e&&(e=JSON.parse(e))}catch(i){}if(ne(t,F)){var r=ee(t);r.status="done",r.percent=100,r.response=e,r.xhr=n;var a=te(r,F);W(r,a)}},K=function(e,t){if(ne(t,F)){var n=ee(t);n.status="uploading",n.percent=e.percent;var r=te(n,F);W(n,r,e)}},X=function(e,t,n){if(ne(n,F)){var r=ee(n);r.error=e,r.response=t,r.status="error";var a=te(r,F);W(r,a)}},Q=function(e){var t;Promise.resolve("function"===typeof d?d(e):d).then((function(n){var r;if(!1!==n){var i=function(e,t){var n=void 0!==e.uid?"uid":"name",r=t.filter((function(t){return t[n]!==e[n]}));return r.length===t.length?null:r}(e,F);i&&(t=Object(a.a)(Object(a.a)({},e),{status:"removed"}),null===F||void 0===F||F.forEach((function(e){var n=void 0!==t.uid?"uid":"name";e[n]!==t[n]||Object.isFrozen(e)||(e.status="removed")})),null===(r=U.current)||void 0===r||r.abort(t),W(t,i))}}))},Y=function(e){B(e.type),"drop"===e.type&&(null===g||void 0===g||g(e))};l.useImperativeHandle(t,(function(){return{onBatchStart:G,onSuccess:H,onProgress:K,onError:X,fileList:F,upload:U.current}}));var Z=l.useContext(oe.b),J=Z.getPrefixCls,$=Z.direction,re=J("upload",_),ae=Object(a.a)(Object(a.a)({onBatchStart:G,onError:X,onProgress:K,onSuccess:H},e),{prefixCls:re,beforeUpload:function(t,n){return Ee(void 0,void 0,void 0,u.a.mark((function r(){var a,o,s,c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.beforeUpload,o=e.transformFile,s=t,!a){r.next=13;break}return r.next=5,a(t,n);case 5:if(!1!==(c=r.sent)){r.next=8;break}return r.abrupt("return",!1);case 8:if(delete t[Ne],c!==Ne){r.next=12;break}return Object.defineProperty(t,Ne,{value:!0,configurable:!0}),r.abrupt("return",!1);case 12:"object"===Object(i.a)(c)&&c&&(s=c);case 13:if(!o){r.next=17;break}return r.next=16,o(s);case 16:s=r.sent;case 17:return r.abrupt("return",s);case 18:case"end":return r.stop()}}),r)})))},onChange:void 0});delete ae.className,delete ae.style,N&&!k||delete ae.id;var ie=function(e){return p?l.createElement(Se.a,{componentName:"Upload",defaultLocale:_e.a.Upload},(function(t){var n="boolean"===typeof p?{}:p,r=n.showRemoveIcon,i=n.showPreviewIcon,o=n.showDownloadIcon,s=n.removeIcon,c=n.downloadIcon;return l.createElement(je,{listType:h,items:F,previewFile:O,onPreview:v,onDownload:m,onRemove:Q,showRemoveIcon:!k&&r,showPreviewIcon:i,showDownloadIcon:o,removeIcon:s,downloadIcon:c,iconRender:x,locale:Object(a.a)(Object(a.a)({},t),w),isImageUrl:j,progress:S,appendAction:e,itemRender:I})})):e};if("drag"===E){var se,ce=y()(re,(se={},Object(r.a)(se,"".concat(re,"-drag"),!0),Object(r.a)(se,"".concat(re,"-drag-uploading"),F.some((function(e){return"uploading"===e.status}))),Object(r.a)(se,"".concat(re,"-drag-hover"),"dragover"===V),Object(r.a)(se,"".concat(re,"-disabled"),k),Object(r.a)(se,"".concat(re,"-rtl"),"rtl"===$),se),C);return l.createElement("span",null,l.createElement("div",{className:ce,onDrop:Y,onDragOver:Y,onDragLeave:Y,style:T},l.createElement(P,Object(a.a)({},ae,{ref:U,className:"".concat(re,"-btn")}),l.createElement("div",{className:"".concat(re,"-drag-container")},N))),ie())}var ue=y()(re,(n={},Object(r.a)(n,"".concat(re,"-select"),!0),Object(r.a)(n,"".concat(re,"-select-").concat(h),!0),Object(r.a)(n,"".concat(re,"-disabled"),k),Object(r.a)(n,"".concat(re,"-rtl"),"rtl"===$),n)),le=l.createElement("div",{className:ue,style:N?void 0:{display:"none"}},l.createElement(P,Object(a.a)({},ae,{ref:U})));return"picture-card"===h?l.createElement("span",{className:y()("".concat(re,"-picture-card-wrapper"),C)},ie(le)):l.createElement("span",{className:C},le,ie())},Ie=l.forwardRef(Te);Ie.Dragger=z,Ie.LIST_IGNORE=Ne,Ie.displayName="Upload",Ie.defaultProps={type:"select",multiple:!1,action:"",data:{},accept:"",showUploadList:!0,listType:"text",className:"",disabled:!1,supportServerRender:!0};var Ae=Ie;Ae.Dragger=z;t.a=Ae},function(e,t,n){"use strict";var r=n(17),a=n(16),i=n(1),o=n(23),s=n.n(o),c=n(65),u=n(141),l=n(55),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},d=function(e,t){var n=e.prefixCls,o=e.component,d=void 0===o?"article":o,p=e.className,h=e["aria-label"],v=e.setContentRef,m=e.children,b=f(e,["prefixCls","component","className","aria-label","setContentRef","children"]),g=t;return v&&(Object(l.a)(!1,"Typography","`setContentRef` is deprecated. Please use `ref` instead."),g=Object(c.a)(t,v)),i.createElement(u.a,null,(function(e){var t=e.getPrefixCls,o=e.direction,c=d,u=t("typography",n),l=s()(u,Object(a.a)({},"".concat(u,"-rtl"),"rtl"===o),p);return i.createElement(c,Object(r.a)({className:l,"aria-label":h,ref:g},b),m)}))},p=i.forwardRef(d);p.displayName="Typography";var h=p,v=n(38),m=n(63),b=n(31),g=n(41),y=n(44),O=n(47),k=n(46),w=n(73),x=n(414),j=n.n(x),S=n(18),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},C=n(48),E=function(e,t){return i.createElement(C.a,Object(S.a)(Object(S.a)({},e),{},{ref:t,icon:_}))};E.displayName="EditOutlined";var N=i.forwardRef(E),T=n(165),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},A=function(e,t){return i.createElement(C.a,Object(S.a)(Object(S.a)({},e),{},{ref:t,icon:I}))};A.displayName="CopyOutlined";var M=i.forwardRef(A),P=n(107),R=n(56),D=n(98),F=n(49),L=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},z={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},q=i.forwardRef((function(e,t){var n=e.style,a=e.noStyle,o=e.disabled,s=L(e,["style","noStyle","disabled"]),c={};return a||(c=Object(r.a)({},z)),o&&(c.pointerEvents="none"),c=Object(r.a)(Object(r.a)({},c),n),i.createElement("div",Object(r.a)({role:"button",tabIndex:0,ref:t},s,{onKeyDown:function(e){e.keyCode===F.a.ENTER&&e.preventDefault()},onKeyUp:function(t){var n=t.keyCode,r=e.onClick;n===F.a.ENTER&&r&&r()},style:c}))})),V=n(179),B=n(177),U=n(140),W=n(26),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},H=function(e,t){return i.createElement(C.a,Object(S.a)(Object(S.a)({},e),{},{ref:t,icon:G}))};H.displayName="EnterOutlined";var K=i.forwardRef(H),X=n(421),Q=n(87),Y=n(138),Z=n(78),J=n(66);function $(e,t,n,r,i){var o;return s()(e,(o={},Object(a.a)(o,"".concat(e,"-sm"),"small"===n),Object(a.a)(o,"".concat(e,"-lg"),"large"===n),Object(a.a)(o,"".concat(e,"-disabled"),r),Object(a.a)(o,"".concat(e,"-rtl"),"rtl"===i),Object(a.a)(o,"".concat(e,"-borderless"),!t),o))}function ee(e){return!!(e.prefix||e.suffix||e.allowClear)}var te=Object(Z.a)("text","input");function ne(e){return!(!e.addonBefore&&!e.addonAfter)}var re=function(e){Object(O.a)(n,e);var t=Object(k.a)(n);function n(){var e;return Object(g.a)(this,n),(e=t.apply(this,arguments)).containerRef=i.createRef(),e.onInputMouseUp=function(t){var n;if(null===(n=e.containerRef.current)||void 0===n?void 0:n.contains(t.target)){var r=e.props.triggerFocus;null===r||void 0===r||r()}},e}return Object(y.a)(n,[{key:"renderClearIcon",value:function(e){var t,n=this.props,r=n.allowClear,o=n.value,c=n.disabled,u=n.readOnly,l=n.handleReset,f=n.suffix;if(!r)return null;var d=!c&&!u&&o,p="".concat(e,"-clear-icon");return i.createElement(Y.a,{onClick:l,onMouseDown:function(e){return e.preventDefault()},className:s()((t={},Object(a.a)(t,"".concat(p,"-hidden"),!d),Object(a.a)(t,"".concat(p,"-has-suffix"),!!f),t),p),role:"button"})}},{key:"renderSuffix",value:function(e){var t=this.props,n=t.suffix,r=t.allowClear;return n||r?i.createElement("span",{className:"".concat(e,"-suffix")},this.renderClearIcon(e),n):null}},{key:"renderLabeledIcon",value:function(e,t){var n,r=this.props,o=r.focused,c=r.value,u=r.prefix,l=r.className,f=r.size,d=r.suffix,p=r.disabled,h=r.allowClear,v=r.direction,m=r.style,b=r.readOnly,g=r.bordered,y=this.renderSuffix(e);if(!ee(this.props))return Object(J.a)(t,{value:c});var O=u?i.createElement("span",{className:"".concat(e,"-prefix")},u):null,k=s()("".concat(e,"-affix-wrapper"),(n={},Object(a.a)(n,"".concat(e,"-affix-wrapper-focused"),o),Object(a.a)(n,"".concat(e,"-affix-wrapper-disabled"),p),Object(a.a)(n,"".concat(e,"-affix-wrapper-sm"),"small"===f),Object(a.a)(n,"".concat(e,"-affix-wrapper-lg"),"large"===f),Object(a.a)(n,"".concat(e,"-affix-wrapper-input-with-clear-btn"),d&&h&&c),Object(a.a)(n,"".concat(e,"-affix-wrapper-rtl"),"rtl"===v),Object(a.a)(n,"".concat(e,"-affix-wrapper-readonly"),b),Object(a.a)(n,"".concat(e,"-affix-wrapper-borderless"),!g),Object(a.a)(n,"".concat(l),!ne(this.props)&&l),n));return i.createElement("span",{ref:this.containerRef,className:k,style:m,onMouseUp:this.onInputMouseUp},O,Object(J.a)(t,{style:null,value:c,className:$(e,g,f,p)}),y)}},{key:"renderInputWithLabel",value:function(e,t){var n,r=this.props,o=r.addonBefore,c=r.addonAfter,u=r.style,l=r.size,f=r.className,d=r.direction;if(!ne(this.props))return t;var p="".concat(e,"-group"),h="".concat(p,"-addon"),v=o?i.createElement("span",{className:h},o):null,m=c?i.createElement("span",{className:h},c):null,b=s()("".concat(e,"-wrapper"),p,Object(a.a)({},"".concat(p,"-rtl"),"rtl"===d)),g=s()("".concat(e,"-group-wrapper"),(n={},Object(a.a)(n,"".concat(e,"-group-wrapper-sm"),"small"===l),Object(a.a)(n,"".concat(e,"-group-wrapper-lg"),"large"===l),Object(a.a)(n,"".concat(e,"-group-wrapper-rtl"),"rtl"===d),n),f);return i.createElement("span",{className:g,style:u},i.createElement("span",{className:b},v,Object(J.a)(t,{style:null}),m))}},{key:"renderTextAreaWithClearIcon",value:function(e,t){var n,r=this.props,o=r.value,c=r.allowClear,u=r.className,l=r.style,f=r.direction,d=r.bordered;if(!c)return Object(J.a)(t,{value:o});var p=s()("".concat(e,"-affix-wrapper"),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"),(n={},Object(a.a)(n,"".concat(e,"-affix-wrapper-rtl"),"rtl"===f),Object(a.a)(n,"".concat(e,"-affix-wrapper-borderless"),!d),Object(a.a)(n,"".concat(u),!ne(this.props)&&u),n));return i.createElement("span",{className:p,style:l},Object(J.a)(t,{style:null,value:o}),this.renderClearIcon(e))}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.inputType,r=e.element;return n===te[0]?this.renderTextAreaWithClearIcon(t,r):this.renderInputWithLabel(t,this.renderLabeledIcon(t,r))}}]),n}(i.Component),ae=re,ie=n(86);function oe(e){return"undefined"===typeof e||null===e?"":e}function se(e,t,n,r){if(n){var a=t,i=e.value;return"click"===t.type?((a=Object.create(t)).target=e,a.currentTarget=e,e.value="",n(a),void(e.value=i)):void 0!==r?((a=Object.create(t)).target=e,a.currentTarget=e,e.value=r,void n(a)):void n(a)}}function ce(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}var ue=function(e){Object(O.a)(n,e);var t=Object(k.a)(n);function n(e){var o;Object(g.a)(this,n),(o=t.call(this,e)).direction="ltr",o.focus=function(e){ce(o.input,e)},o.saveClearableInput=function(e){o.clearableInput=e},o.saveInput=function(e){o.input=e},o.onFocus=function(e){var t=o.props.onFocus;o.setState({focused:!0},o.clearPasswordValueAttribute),null===t||void 0===t||t(e)},o.onBlur=function(e){var t=o.props.onBlur;o.setState({focused:!1},o.clearPasswordValueAttribute),null===t||void 0===t||t(e)},o.handleReset=function(e){o.setValue("",(function(){o.focus()})),se(o.input,e,o.props.onChange)},o.renderInput=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=o.props,l=u.className,f=u.addonBefore,d=u.addonAfter,p=u.size,h=u.disabled,v=Object(m.a)(o.props,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","size","inputType","bordered"]);return i.createElement("input",Object(r.a)({autoComplete:c.autoComplete},v,{onChange:o.handleChange,onFocus:o.onFocus,onBlur:o.onBlur,onKeyDown:o.handleKeyDown,className:s()($(e,n,p||t,h,o.direction),Object(a.a)({},l,l&&!f&&!d)),ref:o.saveInput}))},o.clearPasswordValueAttribute=function(){o.removePasswordTimeout=setTimeout((function(){o.input&&"password"===o.input.getAttribute("type")&&o.input.hasAttribute("value")&&o.input.removeAttribute("value")}))},o.handleChange=function(e){o.setValue(e.target.value,o.clearPasswordValueAttribute),se(o.input,e,o.props.onChange)},o.handleKeyDown=function(e){var t=o.props,n=t.onPressEnter,r=t.onKeyDown;n&&13===e.keyCode&&n(e),null===r||void 0===r||r(e)},o.renderComponent=function(e){var t=e.getPrefixCls,n=e.direction,a=e.input,s=o.state,c=s.value,u=s.focused,l=o.props,f=l.prefixCls,d=l.bordered,p=void 0===d||d,h=t("input",f);return o.direction=n,i.createElement(ie.b.Consumer,null,(function(e){return i.createElement(ae,Object(r.a)({size:e},o.props,{prefixCls:h,inputType:"input",value:oe(c),element:o.renderInput(h,e,p,a),handleReset:o.handleReset,ref:o.saveClearableInput,direction:n,focused:u,triggerFocus:o.focus,bordered:p}))}))};var c="undefined"===typeof e.value?e.defaultValue:e.value;return o.state={value:c,focused:!1,prevValue:e.value},o}return Object(y.a)(n,[{key:"componentDidMount",value:function(){this.clearPasswordValueAttribute()}},{key:"componentDidUpdate",value:function(){}},{key:"getSnapshotBeforeUpdate",value:function(e){return ee(e)!==ee(this.props)&&Object(l.a)(this.input!==document.activeElement,"Input","When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ"),null}},{key:"componentWillUnmount",value:function(){this.removePasswordTimeout&&clearTimeout(this.removePasswordTimeout)}},{key:"blur",value:function(){this.input.blur()}},{key:"setSelectionRange",value:function(e,t,n){this.input.setSelectionRange(e,t,n)}},{key:"select",value:function(){this.input.select()}},{key:"setValue",value:function(e,t){void 0===this.props.value?this.setState({value:e},t):null===t||void 0===t||t()}},{key:"render",value:function(){return i.createElement(u.a,null,this.renderComponent)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevValue,r={prevValue:e.value};return void 0===e.value&&n===e.value||(r.value=e.value),r}}]),n}(i.Component);ue.defaultProps={type:"text"};var le=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function fe(e,t){return Object(b.a)(e||"").slice(0,t).join("")}var de,pe=i.forwardRef((function(e,t){var n,o=e.prefixCls,c=e.bordered,l=void 0===c||c,f=e.showCount,d=void 0!==f&&f,p=e.maxLength,h=e.className,g=e.style,y=e.size,O=e.onCompositionStart,k=e.onCompositionEnd,w=e.onChange,x=le(e,["prefixCls","bordered","showCount","maxLength","className","style","size","onCompositionStart","onCompositionEnd","onChange"]),j=i.useContext(u.b),S=j.getPrefixCls,_=j.direction,C=i.useContext(ie.b),E=i.useRef(null),N=i.useRef(null),T=i.useState(!1),I=Object(W.a)(T,2),A=I[0],M=I[1],P=Object(Q.a)(x.defaultValue,{value:x.value}),R=Object(W.a)(P,2),D=R[0],F=R[1],L=function(e,t){void 0===x.value&&(F(e),null===t||void 0===t||t())},z=Number(p)>0,q=S("input",o);i.useImperativeHandle(t,(function(){var e;return{resizableTextArea:null===(e=E.current)||void 0===e?void 0:e.resizableTextArea,focus:function(e){var t,n;ce(null===(n=null===(t=E.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:function(){var e;return null===(e=E.current)||void 0===e?void 0:e.blur()}}}));var V=i.createElement(X.a,Object(r.a)({},Object(m.a)(x,["allowClear"]),{className:s()((n={},Object(a.a)(n,"".concat(q,"-borderless"),!l),Object(a.a)(n,h,h&&!d),Object(a.a)(n,"".concat(q,"-sm"),"small"===C||"small"===y),Object(a.a)(n,"".concat(q,"-lg"),"large"===C||"large"===y),n)),style:d?void 0:g,prefixCls:q,onCompositionStart:function(e){M(!0),null===O||void 0===O||O(e)},onChange:function(e){var t=e.target.value;!A&&z&&(t=fe(t,p)),L(t),se(e.currentTarget,e,w,t)},onCompositionEnd:function(e){M(!1);var t=e.currentTarget.value;z&&(t=fe(t,p)),t!==D&&(L(t),se(e.currentTarget,e,w,t)),null===k||void 0===k||k(e)},ref:E})),B=oe(D);A||!z||null!==x.value&&void 0!==x.value||(B=fe(B,p));var U=i.createElement(ae,Object(r.a)({},x,{prefixCls:q,direction:_,inputType:"text",value:B,element:V,handleReset:function(e){var t,n;L("",(function(){var e;null===(e=E.current)||void 0===e||e.focus()})),se(null===(n=null===(t=E.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e,w)},ref:N,bordered:l,style:d?void 0:g}));if(d){var G=Object(b.a)(B).length,H="";return H="object"===Object(v.a)(d)?d.formatter({count:G,maxLength:p}):"".concat(G).concat(z?" / ".concat(p):""),i.createElement("div",{className:s()("".concat(q,"-textarea"),Object(a.a)({},"".concat(q,"-textarea-rtl"),"rtl"===_),"".concat(q,"-textarea-show-count"),h),style:g,"data-count":H},U)}return U})),he=function(e){var t=e.prefixCls,n=e["aria-label"],r=e.className,o=e.style,c=e.direction,u=e.maxLength,l=e.autoSize,f=void 0===l||l,d=e.value,p=e.onSave,h=e.onCancel,v=e.onEnd,m=i.useRef(),b=i.useRef(!1),g=i.useRef(),y=i.useState(d),O=Object(W.a)(y,2),k=O[0],w=O[1];i.useEffect((function(){w(d)}),[d]),i.useEffect((function(){if(m.current&&m.current.resizableTextArea){var e=m.current.resizableTextArea.textArea;e.focus();var t=e.value.length;e.setSelectionRange(t,t)}}),[]);var x=function(){p(k.trim())},j=s()(t,"".concat(t,"-edit-content"),Object(a.a)({},"".concat(t,"-rtl"),"rtl"===c),r);return i.createElement("div",{className:j,style:o},i.createElement(pe,{ref:m,maxLength:u,value:k,onChange:function(e){var t=e.target;w(t.value.replace(/[\n\r]/g,""))},onKeyDown:function(e){var t=e.keyCode;b.current||(g.current=t)},onKeyUp:function(e){var t=e.keyCode,n=e.ctrlKey,r=e.altKey,a=e.metaKey,i=e.shiftKey;g.current!==t||b.current||n||r||a||i||(t===F.a.ENTER?(x(),null===v||void 0===v||v()):t===F.a.ESC&&h())},onCompositionStart:function(){b.current=!0},onCompositionEnd:function(){b.current=!1},onBlur:function(){x()},"aria-label":n,autoSize:f}),i.createElement(K,{className:"".concat(t,"-edit-content-confirm")}))},ve=n(67),me={padding:0,margin:0,display:"inline",lineHeight:"inherit"};function be(e){if(!e)return 0;var t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}function ge(e,t){e.setAttribute("aria-hidden","true");var n,r=window.getComputedStyle(t),a=(n=r,Array.prototype.slice.apply(n).map((function(e){return"".concat(e,": ").concat(n.getPropertyValue(e),";")})).join(""));e.setAttribute("style",a),e.style.position="fixed",e.style.left="0",e.style.height="auto",e.style.minHeight="auto",e.style.maxHeight="auto",e.style.top="-999999px",e.style.zIndex="-1000",e.style.textOverflow="clip",e.style.whiteSpace="normal",e.style.webkitLineClamp="none"}var ye=function(e,t,n,r,a){de||(de=document.createElement("div")).setAttribute("aria-hidden","true"),de.parentNode||document.body.appendChild(de);var o=t.rows,s=t.suffix,c=void 0===s?"":s,u=window.getComputedStyle(e),l=function(e){var t=document.createElement("div");ge(t,e),t.appendChild(document.createTextNode("text")),document.body.appendChild(t);var n=t.offsetHeight,r=be(window.getComputedStyle(e).lineHeight);return document.body.removeChild(t),n>r?n:r}(e),f=Math.floor(l)*(o+1)+be(u.paddingTop)+be(u.paddingBottom);ge(de,e);var d=function(e){var t=[];return e.forEach((function(e){var n=t[t.length-1];"string"===typeof e&&"string"===typeof n?t[t.length-1]+=e:t.push(e)})),t}(Object(w.a)(n));function p(){return Math.ceil(de.getBoundingClientRect().height)<f}if(Object(ve.render)(i.createElement("div",{style:me},i.createElement("span",{style:me},d,c),i.createElement("span",{style:me},r)),de),p())return Object(ve.unmountComponentAtNode)(de),{content:n,text:de.innerHTML,ellipsis:!1};var h=Array.prototype.slice.apply(de.childNodes[0].childNodes[0].cloneNode(!0).childNodes).filter((function(e){return 8!==e.nodeType})),v=Array.prototype.slice.apply(de.childNodes[0].childNodes[1].cloneNode(!0).childNodes);Object(ve.unmountComponentAtNode)(de);var m=[];de.innerHTML="";var b=document.createElement("span");de.appendChild(b);var g=document.createTextNode(a+c);function y(e){b.insertBefore(e,g)}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=Math.floor((n+r)/2),o=t.slice(0,i);if(e.textContent=o,n>=r-1)for(var s=r;s>=n;s-=1){var c=t.slice(0,s);if(e.textContent=c,p()||!c)return s===t.length?{finished:!1,reactNode:t}:{finished:!0,reactNode:c}}return p()?O(e,t,i,r,i):O(e,t,n,i,a)}function k(e,t){var n=e.nodeType;if(1===n)return y(e),p()?{finished:!1,reactNode:d[t]}:(b.removeChild(e),{finished:!0,reactNode:null});if(3===n){var r=e.textContent||"",a=document.createTextNode(r);return y(a),O(a,r)}return{finished:!1,reactNode:null}}return b.appendChild(g),v.forEach((function(e){de.appendChild(e)})),h.some((function(e,t){var n=k(e,t),r=n.finished,a=n.reactNode;return a&&m.push(a),r})),{content:m,text:de.innerHTML,ellipsis:!0}},Oe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},ke=Object(B.c)("webkitLineClamp"),we=Object(B.c)("textOverflow");function xe(e,t,n){return!0===e||void 0===e?t:e||n&&t}var je=function(e){Object(O.a)(n,e);var t=Object(k.a)(n);function n(){var e;return Object(g.a)(this,n),(e=t.apply(this,arguments)).contentRef=i.createRef(),e.state={edit:!1,copied:!1,ellipsisText:"",ellipsisContent:null,isEllipsis:!1,expanded:!1,clientRendered:!1},e.getPrefixCls=function(){var t=e.props.prefixCls;return(0,e.context.getPrefixCls)("typography",t)},e.onExpandClick=function(t){var n,r=e.getEllipsis().onExpand;e.setState({expanded:!0}),null===(n=r)||void 0===n||n(t)},e.onEditClick=function(t){t.preventDefault(),e.triggerEdit(!0)},e.onEditChange=function(t){var n=e.getEditable().onChange;null===n||void 0===n||n(t),e.triggerEdit(!1)},e.onEditCancel=function(){var t,n;null===(n=(t=e.getEditable()).onCancel)||void 0===n||n.call(t),e.triggerEdit(!1)},e.onCopyClick=function(t){t.preventDefault();var n=e.props,a=n.children,i=n.copyable,o=Object(r.a)({},"object"===Object(v.a)(i)?i:null);void 0===o.text&&(o.text=String(a)),j()(o.text||""),e.setState({copied:!0},(function(){o.onCopy&&o.onCopy(),e.copyId=window.setTimeout((function(){e.setState({copied:!1})}),3e3)}))},e.setEditRef=function(t){e.editIcon=t},e.triggerEdit=function(t){var n=e.getEditable().onStart;t&&n&&n(),e.setState({edit:t},(function(){!t&&e.editIcon&&e.editIcon.focus()}))},e.resizeOnNextFrame=function(){V.a.cancel(e.rafId),e.rafId=Object(V.a)((function(){e.syncEllipsis()}))},e}return Object(y.a)(n,[{key:"componentDidMount",value:function(){this.setState({clientRendered:!0}),this.resizeOnNextFrame()}},{key:"componentDidUpdate",value:function(e){var t=this.props.children,n=this.getEllipsis(),r=this.getEllipsis(e);t===e.children&&n.rows===r.rows||this.resizeOnNextFrame()}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.copyId),V.a.cancel(this.rafId)}},{key:"getEditable",value:function(e){var t=this.state.edit,n=(e||this.props).editable;return n?Object(r.a)({editing:t},"object"===Object(v.a)(n)?n:null):{editing:t}}},{key:"getEllipsis",value:function(e){var t=(e||this.props).ellipsis;return t?Object(r.a)({rows:1,expandable:!1},"object"===Object(v.a)(t)?t:null):{}}},{key:"canUseCSSEllipsis",value:function(){var e=this.state.clientRendered,t=this.props,n=t.editable,r=t.copyable,a=this.getEllipsis(),i=a.rows,o=a.expandable,s=a.suffix,c=a.onEllipsis,u=a.tooltip;return!s&&!u&&(!(n||r||o||!e||c)&&(1===i?we:ke))}},{key:"syncEllipsis",value:function(){var e=this.state,t=e.ellipsisText,n=e.isEllipsis,r=e.expanded,a=this.getEllipsis(),i=a.rows,o=a.suffix,s=a.onEllipsis,c=this.props.children;if(i&&!(i<0)&&this.contentRef.current&&!r&&!this.canUseCSSEllipsis()){Object(l.a)(Object(w.a)(c).every((function(e){return"string"===typeof e})),"Typography","`ellipsis` should use string as children only.");var u=ye(this.contentRef.current,{rows:i,suffix:o},c,this.renderOperations(!0),"..."),f=u.content,d=u.text,p=u.ellipsis;t===d&&n===p||(this.setState({ellipsisText:d,ellipsisContent:f,isEllipsis:p}),n!==p&&s&&s(p))}}},{key:"renderExpand",value:function(e){var t,n=this.getEllipsis(),r=n.expandable,a=n.symbol,o=this.state,s=o.expanded,c=o.isEllipsis;return r&&(e||!s&&c)?(t=a||this.expandStr,i.createElement("a",{key:"expand",className:"".concat(this.getPrefixCls(),"-expand"),onClick:this.onExpandClick,"aria-label":this.expandStr},t)):null}},{key:"renderEdit",value:function(){var e=this.props.editable;if(e){var t=e.icon,n=e.tooltip,r=Object(w.a)(n)[0]||this.editStr,a="string"===typeof r?r:"";return i.createElement(U.a,{key:"edit",title:!1===n?"":r},i.createElement(q,{ref:this.setEditRef,className:"".concat(this.getPrefixCls(),"-edit"),onClick:this.onEditClick,"aria-label":a},t||i.createElement(N,{role:"button"})))}}},{key:"renderCopy",value:function(){var e=this.state.copied,t=this.props.copyable;if(t){var n=this.getPrefixCls(),r=t.tooltips,a=t.icon,o=Array.isArray(r)?r:[r],c=Array.isArray(a)?a:[a],u=e?xe(o[1],this.copiedStr):xe(o[0],this.copyStr),l=e?this.copiedStr:this.copyStr,f="string"===typeof u?u:l;return i.createElement(U.a,{key:"copy",title:u},i.createElement(q,{className:s()("".concat(n,"-copy"),e&&"".concat(n,"-copy-success")),onClick:this.onCopyClick,"aria-label":f},e?xe(c[1],i.createElement(T.a,null),!0):xe(c[0],i.createElement(M,null),!0)))}}},{key:"renderEditInput",value:function(){var e=this.props,t=e.children,n=e.className,r=e.style,a=this.context.direction,o=this.getEditable(),s=o.maxLength,c=o.autoSize,u=o.onEnd;return i.createElement(he,{value:"string"===typeof t?t:"",onSave:this.onEditChange,onCancel:this.onEditCancel,onEnd:u,prefixCls:this.getPrefixCls(),className:n,style:r,direction:a,maxLength:s,autoSize:c})}},{key:"renderOperations",value:function(e){return[this.renderExpand(e),this.renderEdit(),this.renderCopy()].filter((function(e){return e}))}},{key:"renderContent",value:function(){var e=this,t=this.state,n=t.ellipsisContent,o=t.isEllipsis,c=t.expanded,u=this.props,l=u.component,f=u.children,d=u.className,p=u.type,v=u.disabled,g=u.style,y=Oe(u,["component","children","className","type","disabled","style"]),O=this.context.direction,k=this.getEllipsis(),w=k.rows,x=k.suffix,j=k.tooltip,S=this.getPrefixCls(),_=Object(m.a)(y,["prefixCls","editable","copyable","ellipsis","mark","code","delete","underline","strong","keyboard","italic"].concat(Object(b.a)(R.a))),C=this.canUseCSSEllipsis(),E=1===w&&C,N=w&&w>1&&C,T=f;if(w&&o&&!c&&!C){var I=y.title,A=I||"";I||"string"!==typeof f&&"number"!==typeof f||(A=String(f)),A=A.slice(String(n||"").length),T=i.createElement(i.Fragment,null,n,i.createElement("span",{title:A,"aria-hidden":"true"},"..."),x),j&&(T=i.createElement(U.a,{title:!0===j?f:j},i.createElement("span",null,T)))}else T=i.createElement(i.Fragment,null,f,x);return T=function(e,t){var n=e.mark,r=e.code,a=e.underline,o=e.delete,s=e.strong,c=e.keyboard,u=e.italic,l=t;function f(e,t){e&&(l=i.createElement(t,{},l))}return f(s,"strong"),f(a,"u"),f(o,"del"),f(r,"code"),f(n,"mark"),f(c,"kbd"),f(u,"i"),l}(this.props,T),i.createElement(D.a,{componentName:"Text"},(function(t){var n,o=t.edit,c=t.copy,u=t.copied,f=t.expand;return e.editStr=o,e.copyStr=c,e.copiedStr=u,e.expandStr=f,i.createElement(P.a,{onResize:e.resizeOnNextFrame,disabled:C},i.createElement(h,Object(r.a)({className:s()((n={},Object(a.a)(n,"".concat(S,"-").concat(p),p),Object(a.a)(n,"".concat(S,"-disabled"),v),Object(a.a)(n,"".concat(S,"-ellipsis"),w),Object(a.a)(n,"".concat(S,"-single-line"),1===w),Object(a.a)(n,"".concat(S,"-ellipsis-single-line"),E),Object(a.a)(n,"".concat(S,"-ellipsis-multiple-line"),N),n),d),style:Object(r.a)(Object(r.a)({},g),{WebkitLineClamp:N?w:void 0}),component:l,ref:e.contentRef,direction:O},_),T,e.renderOperations()))}))}},{key:"render",value:function(){return this.getEditable().editing?this.renderEditInput():this.renderContent()}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.children,n=e.editable;return Object(l.a)(!n||"string"===typeof t,"Typography","When `editable` is enabled, the `children` should use string."),{}}}]),n}(i.Component);je.contextType=u.b,je.defaultProps={children:""};var Se=je,_e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Ce=function(e){var t=e.ellipsis,n=_e(e,["ellipsis"]),a=i.useMemo((function(){return t&&"object"===Object(v.a)(t)?Object(m.a)(t,["expandable","rows"]):t}),[t]);return Object(l.a)("object"!==Object(v.a)(t)||!t||!("expandable"in t)&&!("rows"in t),"Typography.Text","`ellipsis` do not support `expandable` or `rows` props."),i.createElement(Se,Object(r.a)({},n,{ellipsis:a,component:"span"}))},Ee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Ne=function(e,t){var n=e.ellipsis,a=e.rel,o=Ee(e,["ellipsis","rel"]);Object(l.a)("object"!==Object(v.a)(n),"Typography.Link","`ellipsis` only supports boolean value.");var s=i.useRef(null);i.useImperativeHandle(t,(function(){var e;return null===(e=s.current)||void 0===e?void 0:e.contentRef.current}));var c=Object(r.a)(Object(r.a)({},o),{rel:void 0===a&&"_blank"===o.target?"noopener noreferrer":a});return delete c.navigate,i.createElement(Se,Object(r.a)({},c,{ref:s,ellipsis:!!n,component:"a"}))},Te=i.forwardRef(Ne),Ie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Ae=Object(Z.b)(1,2,3,4,5),Me=function(e){var t,n=e.level,a=void 0===n?1:n,o=Ie(e,["level"]);return-1!==Ae.indexOf(a)?t="h".concat(a):(Object(l.a)(!1,"Typography.Title","Title only accept `1 | 2 | 3 | 4 | 5` as `level` value. And `5` need 4.6.0+ version."),t="h1"),i.createElement(Se,Object(r.a)({},o,{component:t}))},Pe=function(e){return i.createElement(Se,Object(r.a)({},e,{component:"div"}))},Re=h;Re.Text=Ce,Re.Link=Te,Re.Title=Me,Re.Paragraph=Pe;t.a=Re},function(e,t,n){"use strict";var r=n(17),a=n(38),i=n(26),o=n(16),s=n(1),c=n(23),u=n.n(c),l=n(105),f=n(141),d=n(63),p=s.createContext({labelAlign:"right",vertical:!1,itemRef:function(){}}),h=s.createContext({updateItemErrors:function(){}}),v=s.createContext({prefixCls:""});function m(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function b(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function g(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return b(n.overflowY,t)||b(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function y(e,t,n,r,a,i,o,s){return i<e&&o>t||i>e&&o<t?0:i<=e&&s<=n||o>=t&&s>=n?i-e-r:o>t&&s<n||i<e&&s>n?o-t+a:0}var O=function(e,t){var n=window,r=t.scrollMode,a=t.block,i=t.inline,o=t.boundary,s=t.skipOverflowHiddenElements,c="function"==typeof o?o:function(e){return e!==o};if(!m(e))throw new TypeError("Invalid target");for(var u=document.scrollingElement||document.documentElement,l=[],f=e;m(f)&&c(f);){if((f=f.parentElement)===u){l.push(f);break}null!=f&&f===document.body&&g(f)&&!g(document.documentElement)||null!=f&&g(f,s)&&l.push(f)}for(var d=n.visualViewport?n.visualViewport.width:innerWidth,p=n.visualViewport?n.visualViewport.height:innerHeight,h=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,b=e.getBoundingClientRect(),O=b.height,k=b.width,w=b.top,x=b.right,j=b.bottom,S=b.left,_="start"===a||"nearest"===a?w:"end"===a?j:w+O/2,C="center"===i?S+k/2:"end"===i?x:S,E=[],N=0;N<l.length;N++){var T=l[N],I=T.getBoundingClientRect(),A=I.height,M=I.width,P=I.top,R=I.right,D=I.bottom,F=I.left;if("if-needed"===r&&w>=0&&S>=0&&j<=p&&x<=d&&w>=P&&j<=D&&S>=F&&x<=R)return E;var L=getComputedStyle(T),z=parseInt(L.borderLeftWidth,10),q=parseInt(L.borderTopWidth,10),V=parseInt(L.borderRightWidth,10),B=parseInt(L.borderBottomWidth,10),U=0,W=0,G="offsetWidth"in T?T.offsetWidth-T.clientWidth-z-V:0,H="offsetHeight"in T?T.offsetHeight-T.clientHeight-q-B:0;if(u===T)U="start"===a?_:"end"===a?_-p:"nearest"===a?y(v,v+p,p,q,B,v+_,v+_+O,O):_-p/2,W="start"===i?C:"center"===i?C-d/2:"end"===i?C-d:y(h,h+d,d,z,V,h+C,h+C+k,k),U=Math.max(0,U+v),W=Math.max(0,W+h);else{U="start"===a?_-P-q:"end"===a?_-D+B+H:"nearest"===a?y(P,D,A,q,B+H,_,_+O,O):_-(P+A/2)+H/2,W="start"===i?C-F-z:"center"===i?C-(F+M/2)+G/2:"end"===i?C-R+V+G:y(F,R,M,z,V+G,C,C+k,k);var K=T.scrollLeft,X=T.scrollTop;_+=X-(U=Math.max(0,Math.min(X+U,T.scrollHeight-A+H))),C+=K-(W=Math.max(0,Math.min(K+W,T.scrollWidth-M+G)))}E.push({el:T,top:U,left:W})}return E};function k(e){return e===Object(e)&&0!==Object.keys(e).length}var w=function(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(k(t)&&"function"===typeof t.behavior)return t.behavior(n?[]:O(e,t));if(!n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:k(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,a=e.top,i=e.left;r.scroll&&n?r.scroll({top:a,left:i,behavior:t}):(r.scrollTop=a,r.scrollLeft=i)}))}(O(e,r),r.behavior)}};function x(e){return void 0===e||!1===e?[]:Array.isArray(e)?e:[e]}function j(e,t){if(e.length){var n=e.join("_");return t?"".concat(t,"_").concat(n):n}}function S(e){return x(e).join("_")}function _(e){var t=Object(l.e)(),n=Object(i.a)(t,1)[0],a=s.useRef({}),o=s.useMemo((function(){return null!==e&&void 0!==e?e:Object(r.a)(Object(r.a)({},n),{__INTERNAL__:{itemRef:function(e){return function(t){var n=S(e);t?a.current[n]=t:delete a.current[n]}}},scrollToField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=x(e),a=j(n,o.__INTERNAL__.name),i=a?document.getElementById(a):null;i&&w(i,Object(r.a)({scrollMode:"if-needed",block:"nearest"},t))},getFieldInstance:function(e){var t=S(e);return a.current[t]}})}),[e,n]);return[o]}var C=n(86),E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},N=function(e,t){var n,c=s.useContext(C.b),d=s.useContext(f.b),h=d.getPrefixCls,v=d.direction,m=d.form,b=e.prefixCls,g=e.className,y=void 0===g?"":g,O=e.size,k=void 0===O?c:O,w=e.form,x=e.colon,j=e.labelAlign,S=e.labelCol,N=e.wrapperCol,T=e.hideRequiredMark,I=e.layout,A=void 0===I?"horizontal":I,M=e.scrollToFirstError,P=e.requiredMark,R=e.onFinishFailed,D=e.name,F=E(e,["prefixCls","className","size","form","colon","labelAlign","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name"]),L=Object(s.useMemo)((function(){return void 0!==P?P:m&&void 0!==m.requiredMark?m.requiredMark:!T}),[T,P,m]),z=h("form",b),q=u()(z,(n={},Object(o.a)(n,"".concat(z,"-").concat(A),!0),Object(o.a)(n,"".concat(z,"-hide-required-mark"),!1===L),Object(o.a)(n,"".concat(z,"-rtl"),"rtl"===v),Object(o.a)(n,"".concat(z,"-").concat(k),k),n),y),V=_(w),B=Object(i.a)(V,1)[0],U=B.__INTERNAL__;U.name=D;var W=Object(s.useMemo)((function(){return{name:D,labelAlign:j,labelCol:S,wrapperCol:N,vertical:"vertical"===A,colon:x,requiredMark:L,itemRef:U.itemRef}}),[D,j,S,N,A,x,L]);s.useImperativeHandle(t,(function(){return B}));return s.createElement(C.a,{size:k},s.createElement(p.Provider,{value:W},s.createElement(l.d,Object(r.a)({id:D},F,{name:D,onFinishFailed:function(e){null===R||void 0===R||R(e);var t={block:"nearest"};M&&e.errorFields.length&&("object"===Object(a.a)(M)&&(t=M),B.scrollToField(e.errorFields[0].name,t))},form:B,className:q}))))},T=s.forwardRef(N),I=n(31),A=n(283),M=n.n(A),P=n(93),R=n(65),D=n(388),F=n(78),L=n(55),z=n(422),q=n(287),V=n(98),B=n(108),U=n(140),W=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var G=function(e){var t=e.prefixCls,n=e.label,c=e.htmlFor,l=e.labelCol,f=e.labelAlign,d=e.colon,h=e.required,v=e.requiredMark,m=e.tooltip,b=Object(V.b)("Form"),g=Object(i.a)(b,1)[0];return n?s.createElement(p.Consumer,{key:"label"},(function(e){var i,p,b=e.vertical,y=e.labelAlign,O=e.labelCol,k=e.colon,w=l||O||{},x=f||y,j="".concat(t,"-item-label"),S=u()(j,"left"===x&&"".concat(j,"-left"),w.className),_=n,C=!0===d||!1!==k&&!1!==d;C&&!b&&"string"===typeof n&&""!==n.trim()&&(_=n.replace(/[:|\uff1a]\s*$/,""));var E=function(e){return e?"object"!==Object(a.a)(e)||s.isValidElement(e)?{title:e}:e:null}(m);if(E){var N=E.icon,T=void 0===N?s.createElement(z.a,null):N,I=W(E,["icon"]),A=s.createElement(U.a,I,s.cloneElement(T,{className:"".concat(t,"-item-tooltip"),title:""}));_=s.createElement(s.Fragment,null,_,A)}"optional"!==v||h||(_=s.createElement(s.Fragment,null,_,s.createElement("span",{className:"".concat(t,"-item-optional"),title:""},(null===g||void 0===g?void 0:g.optional)||(null===(p=B.a.Form)||void 0===p?void 0:p.optional))));var M=u()((i={},Object(o.a)(i,"".concat(t,"-item-required"),h),Object(o.a)(i,"".concat(t,"-item-required-mark-optional"),"optional"===v),Object(o.a)(i,"".concat(t,"-item-no-colon"),!C),i));return s.createElement(q.a,Object(r.a)({},w,{className:S}),s.createElement("label",{htmlFor:c,className:M,title:"string"===typeof n?n:""},_))})):null},H=n(118),K=n(138),X=n(213),Q=n(305),Y=n(71),Z=n(161),J=n(208);var $=[];function ee(e){var t=e.errors,n=void 0===t?$:t,r=e.help,a=e.onDomErrorVisibleChange,c=Object(J.a)(),l=s.useContext(v),d=l.prefixCls,p=l.status,h=s.useContext(f.b).getPrefixCls,m=function(e,t,n){var r=s.useRef({errors:e,visible:!!e.length}),a=Object(J.a)(),i=function(){var n=r.current.visible,i=!!e.length,o=r.current.errors;r.current.errors=e,r.current.visible=i,n!==i?t(i):(o.length!==e.length||o.some((function(t,n){return t!==e[n]})))&&a()};return s.useEffect((function(){if(!n){var e=setTimeout(i,10);return function(){return clearTimeout(e)}}}),[e]),n&&i(),[r.current.visible,r.current.errors]}(n,(function(e){e&&Promise.resolve().then((function(){null===a||void 0===a||a(!0)})),c()}),!!r),b=Object(i.a)(m,2),g=b[0],y=b[1],O=Object(Z.a)((function(){return y}),g,(function(e,t){return t})),k=s.useState(p),w=Object(i.a)(k,2),x=w[0],j=w[1];s.useEffect((function(){g&&p&&j(p)}),[g,p]);var S="".concat(d,"-item-explain"),_=h();return s.createElement(Y.b,{motionDeadline:500,visible:g,motionName:"".concat(_,"-show-help"),onLeaveEnd:function(){null===a||void 0===a||a(!1)}},(function(e){var t=e.className;return s.createElement("div",{className:u()(S,Object(o.a)({},"".concat(S,"-").concat(x),x),t),key:"help"},O.map((function(e,t){return s.createElement("div",{key:t,role:"alert"},e)})))}))}var te={success:X.a,warning:Q.a,error:K.a,validating:H.a},ne=function(e){var t=e.prefixCls,n=e.status,a=e.wrapperCol,i=e.children,o=e.help,c=e.errors,l=e.onDomErrorVisibleChange,f=e.hasFeedback,d=e._internalItemRender,h=e.validateStatus,m=e.extra,b="".concat(t,"-item"),g=s.useContext(p),y=a||g.wrapperCol||{},O=u()("".concat(b,"-control"),y.className);s.useEffect((function(){return function(){l(!1)}}),[]);var k=h&&te[h],w=f&&k?s.createElement("span",{className:"".concat(b,"-children-icon")},s.createElement(k,null)):null,x=Object(r.a)({},g);delete x.labelCol,delete x.wrapperCol;var j=s.createElement("div",{className:"".concat(b,"-control-input")},s.createElement("div",{className:"".concat(b,"-control-input-content")},i),w),S=s.createElement(v.Provider,{value:{prefixCls:t,status:n}},s.createElement(ee,{errors:c,help:o,onDomErrorVisibleChange:l})),_=m?s.createElement("div",{className:"".concat(b,"-extra")},m):null,C=d&&"pro_table_render"===d.mark&&d.render?d.render(e,{input:j,errorList:S,extra:_}):s.createElement(s.Fragment,null,j,S,_);return s.createElement(p.Provider,{value:x},s.createElement(q.a,Object(r.a)({},y,{className:O}),C))},re=n(66),ae=n(50);var ie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},oe="__SPLIT__",se=(Object(F.a)("success","warning","error","validating",""),s.memo((function(e){return e.children}),(function(e,t){return e.value===t.value&&e.update===t.update})));var ce=function(e){var t=e.name,n=e.fieldKey,c=e.noStyle,v=e.dependencies,m=e.prefixCls,b=e.style,g=e.className,y=e.shouldUpdate,O=e.hasFeedback,k=e.help,w=e.rules,S=e.validateStatus,_=e.children,C=e.required,E=e.label,N=e.messageVariables,T=e.trigger,A=void 0===T?"onChange":T,F=e.validateTrigger,z=e.hidden,q=ie(e,["name","fieldKey","noStyle","dependencies","prefixCls","style","className","shouldUpdate","hasFeedback","help","rules","validateStatus","children","required","label","messageVariables","trigger","validateTrigger","hidden"]),V=Object(s.useRef)(!1),B=Object(s.useContext)(f.b).getPrefixCls,U=Object(s.useContext)(p),W=U.name,H=U.requiredMark,K=Object(s.useContext)(h).updateItemErrors,X=s.useState(!!k),Q=Object(i.a)(X,2),Y=Q[0],Z=Q[1],J=function(e){var t=s.useState(e),n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(s.useRef)(null),c=Object(s.useRef)([]),u=Object(s.useRef)(!1);return s.useEffect((function(){return function(){u.current=!0,ae.a.cancel(o.current)}}),[]),[r,function(e){u.current||(null===o.current&&(c.current=[],o.current=Object(ae.a)((function(){o.current=null,a((function(e){var t=e;return c.current.forEach((function(e){t=e(t)})),t}))}))),c.current.push(e))}]}({}),$=Object(i.a)(J,2),ee=$[0],te=$[1],ce=Object(s.useContext)(P.b).validateTrigger,ue=void 0!==F?F:ce;function le(e){V.current||Z(e)}var fe=function(e){return null===e&&Object(L.a)(!1,"Form.Item","`null` is passed as `name` property"),!(void 0===e||null===e)}(t),de=Object(s.useRef)([]);s.useEffect((function(){return function(){V.current=!0,K(de.current.join(oe),[])}}),[]);var pe=B("form",m),he=c?K:function(e,t,n){te((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n&&n!==e&&delete a[n],M()(a[e],t)?a:Object(r.a)(Object(r.a)({},a),Object(o.a)({},e,t))}))},ve=function(){var e=s.useContext(p).itemRef,t=s.useRef({});return function(n,r){var i=r&&"object"===Object(a.a)(r)&&r.ref,o=n.join("_");return t.current.name===o&&t.current.originRef===i||(t.current.name=o,t.current.originRef=i,t.current.ref=Object(R.a)(e(n),i)),t.current.ref}}();function me(t,n,a,i){var l,f;if(c&&!z)return t;var p,v=[];Object.keys(ee).forEach((function(e){v=[].concat(Object(I.a)(v),Object(I.a)(ee[e]||[]))})),void 0!==k&&null!==k?p=x(k):(p=a?a.errors:[],p=[].concat(Object(I.a)(p),Object(I.a)(v)));var m="";void 0!==S?m=S:(null===a||void 0===a?void 0:a.validating)?m="validating":(null===(f=null===a||void 0===a?void 0:a.errors)||void 0===f?void 0:f.length)||v.length?m="error":(null===a||void 0===a?void 0:a.touched)&&(m="success");var y=(l={},Object(o.a)(l,"".concat(pe,"-item"),!0),Object(o.a)(l,"".concat(pe,"-item-with-help"),Y||!!k),Object(o.a)(l,"".concat(g),!!g),Object(o.a)(l,"".concat(pe,"-item-has-feedback"),m&&O),Object(o.a)(l,"".concat(pe,"-item-has-success"),"success"===m),Object(o.a)(l,"".concat(pe,"-item-has-warning"),"warning"===m),Object(o.a)(l,"".concat(pe,"-item-has-error"),"error"===m),Object(o.a)(l,"".concat(pe,"-item-is-validating"),"validating"===m),Object(o.a)(l,"".concat(pe,"-item-hidden"),z),l);return s.createElement(D.a,Object(r.a)({className:u()(y),style:b,key:"row"},Object(d.a)(q,["colon","extra","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","labelAlign","labelCol","normalize","preserve","tooltip","validateFirst","valuePropName","wrapperCol","_internalItemRender"])),s.createElement(G,Object(r.a)({htmlFor:n,required:i,requiredMark:H},e,{prefixCls:pe})),s.createElement(ne,Object(r.a)({},e,a,{errors:p,prefixCls:pe,status:m,onDomErrorVisibleChange:le,validateStatus:m}),s.createElement(h.Provider,{value:{updateItemErrors:he}},t)))}var be="function"===typeof _,ge=Object(s.useRef)(0);if(ge.current+=1,!fe&&!be&&!v)return me(_);var ye={};return"string"===typeof E?ye.label=E:t&&(ye.label=String(t)),N&&(ye=Object(r.a)(Object(r.a)({},ye),N)),s.createElement(l.a,Object(r.a)({},e,{messageVariables:ye,trigger:A,validateTrigger:ue,onReset:function(){le(!1)}}),(function(i,o,u){var l=o.errors,f=x(t).length&&o?o.name:[],d=j(f,W);if(c){var p=de.current.join(oe);if(de.current=Object(I.a)(f),n){var h=Array.isArray(n)?n:[n];de.current=[].concat(Object(I.a)(f.slice(0,-1)),Object(I.a)(h))}K(de.current.join(oe),l,p)}var m=void 0!==C?C:!(!w||!w.some((function(e){if(e&&"object"===Object(a.a)(e)&&e.required)return!0;if("function"===typeof e){var t=e(u);return t&&t.required}return!1}))),b=Object(r.a)({},i),g=null;if(Object(L.a)(!(y&&v),"Form.Item","`shouldUpdate` and `dependencies` shouldn't be used together. See https://ant.design/components/form/#dependencies."),Array.isArray(_)&&fe)Object(L.a)(!1,"Form.Item","`children` is array of render props cannot have `name`."),g=_;else if(be&&(!y&&!v||fe))Object(L.a)(!(!y&&!v),"Form.Item","`children` of render props only work with `shouldUpdate` or `dependencies`."),Object(L.a)(!fe,"Form.Item","Do not use `name` with `children` of render props since it's not a field.");else if(!v||be||fe)if(Object(re.b)(_)){Object(L.a)(void 0===_.props.defaultValue,"Form.Item","`defaultValue` will not work on controlled Field. You should use `initialValues` of Form instead.");var O=Object(r.a)(Object(r.a)({},_.props),b);O.id||(O.id=d),Object(R.c)(_)&&(O.ref=ve(f,_)),new Set([].concat(Object(I.a)(x(A)),Object(I.a)(x(ue)))).forEach((function(e){O[e]=function(){for(var t,n,r,a,i,o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];null===(r=b[e])||void 0===r||(t=r).call.apply(t,[b].concat(s)),null===(i=(a=_.props)[e])||void 0===i||(n=i).call.apply(n,[a].concat(s))}})),g=s.createElement(se,{value:b[e.valuePropName||"value"],update:ge.current},Object(re.a)(_,O))}else be&&(y||v)&&!fe?g=_(u):(Object(L.a)(!f.length,"Form.Item","`name` is only used for validate React element. If you are using Form.Item as layout display, please remove `name` instead."),g=_);else Object(L.a)(!1,"Form.Item","Must set `name` or use render props when `dependencies` is set.");return me(g,d,o,m)}))},ue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},le=function(e){var t=e.prefixCls,n=e.children,a=ue(e,["prefixCls","children"]);Object(L.a)(!!a.name,"Form.List","Miss `name` prop.");var i=(0,s.useContext(f.b).getPrefixCls)("form",t);return s.createElement(l.c,a,(function(e,t,a){return s.createElement(v.Provider,{value:{prefixCls:i,status:"error"}},n(e.map((function(e){return Object(r.a)(Object(r.a)({},e),{fieldKey:e.key})})),t,{errors:a.errors}))}))},fe=T;fe.Item=ce,fe.List=le,fe.ErrorList=ee,fe.useForm=_,fe.Provider=function(e){var t=Object(d.a)(e,["prefixCls"]);return s.createElement(l.b,t)},fe.create=function(){Object(L.a)(!1,"Form","antd v4 removed `Form.create`. Please remove or use `@ant-design/compatible` instead.")};t.a=fe},function(e,t,n){"use strict";var r=n(38),a=n(16),i=n(17),o=n(26),s=n(1),c=n.n(s),u=n(18),l=n(41),f=n(44),d=n(47),p=n(46),h=n(52),v=function(e){var t,n,r=e.className,i=e.included,o=e.vertical,s=e.style,l=e.length,f=e.offset,d=e.reverse;l<0&&(d=!d,l=Math.abs(l),f=100-f);var p=o?(t={},Object(a.a)(t,d?"top":"bottom","".concat(f,"%")),Object(a.a)(t,d?"bottom":"top","auto"),Object(a.a)(t,"height","".concat(l,"%")),t):(n={},Object(a.a)(n,d?"right":"left","".concat(f,"%")),Object(a.a)(n,d?"left":"right","auto"),Object(a.a)(n,"width","".concat(l,"%")),n),h=Object(u.a)(Object(u.a)({},s),p);return i?c.a.createElement("div",{className:r,style:h}):null},m=n(35),b=n(31),g=n(145);function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(g.a)(e)););return e}function O(){return O="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=y(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},O.apply(this,arguments)}var k=n(99),w=n(23),x=n.n(w),j=function(e){var t=e.prefixCls,n=e.vertical,r=e.reverse,i=e.marks,o=e.dots,s=e.step,l=e.included,f=e.lowerBound,d=e.upperBound,p=e.max,v=e.min,m=e.dotStyle,b=e.activeDotStyle,g=p-v,y=function(e,t,n,r,a,i){Object(h.a)(!n||r>0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var o=Object.keys(t).map(parseFloat).sort((function(e,t){return e-t}));if(n&&r)for(var s=a;s<=i;s+=r)-1===o.indexOf(s)&&o.push(s);return o}(0,i,o,s,v,p).map((function(e){var i,o="".concat(Math.abs(e-v)/g*100,"%"),s=!l&&e===d||l&&e<=d&&e>=f,p=n?Object(u.a)(Object(u.a)({},m),{},Object(a.a)({},r?"top":"bottom",o)):Object(u.a)(Object(u.a)({},m),{},Object(a.a)({},r?"right":"left",o));s&&(p=Object(u.a)(Object(u.a)({},p),b));var h=x()((i={},Object(a.a)(i,"".concat(t,"-dot"),!0),Object(a.a)(i,"".concat(t,"-dot-active"),s),Object(a.a)(i,"".concat(t,"-dot-reverse"),r),i));return c.a.createElement("span",{className:h,style:p,key:e})}));return c.a.createElement("div",{className:"".concat(t,"-step")},y)},S=function(e){var t=e.className,n=e.vertical,i=e.reverse,o=e.marks,s=e.included,l=e.upperBound,f=e.lowerBound,d=e.max,p=e.min,h=e.onClickLabel,v=Object.keys(o),m=d-p,b=v.map(parseFloat).sort((function(e,t){return e-t})).map((function(e){var d,v=o[e],b="object"===Object(r.a)(v)&&!c.a.isValidElement(v),g=b?v.label:v;if(!g&&0!==g)return null;var y=!s&&e===l||s&&e<=l&&e>=f,O=x()((d={},Object(a.a)(d,"".concat(t,"-text"),!0),Object(a.a)(d,"".concat(t,"-text-active"),y),d)),k=Object(a.a)({marginBottom:"-50%"},i?"top":"bottom","".concat((e-p)/m*100,"%")),w=Object(a.a)({transform:"translateX(".concat(i?"50%":"-50%",")"),msTransform:"translateX(".concat(i?"50%":"-50%",")")},i?"right":"left","".concat((e-p)/m*100,"%")),j=n?k:w,S=b?Object(u.a)(Object(u.a)({},j),v.style):j;return c.a.createElement("span",{className:O,style:S,key:e,onMouseDown:function(t){return h(t,e)},onTouchStart:function(t){return h(t,e)}},g)}));return c.a.createElement("div",{className:t},b)},_=["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"],C=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={clickFocused:!1},e.onMouseUpListener=void 0,e.handle=void 0,e.setHandleRef=function(t){e.handle=t},e.handleMouseUp=function(){document.activeElement===e.handle&&e.setClickFocus(!0)},e.handleMouseDown=function(t){t.preventDefault(),e.focus()},e.handleBlur=function(){e.setClickFocus(!1)},e.handleKeyDown=function(){e.setClickFocus(!1)},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.onMouseUpListener=Object(k.a)(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(e){this.setState({clickFocused:e})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var e,t,n,r=this.props,o=r.prefixCls,s=r.vertical,l=r.reverse,f=r.offset,d=r.style,p=r.disabled,h=r.min,v=r.max,b=r.value,g=r.tabIndex,y=r.ariaLabel,O=r.ariaLabelledBy,k=r.ariaValueTextFormatter,w=Object(m.a)(r,_),j=x()(this.props.className,Object(a.a)({},"".concat(o,"-handle-click-focused"),this.state.clickFocused)),S=s?(e={},Object(a.a)(e,l?"top":"bottom","".concat(f,"%")),Object(a.a)(e,l?"bottom":"top","auto"),Object(a.a)(e,"transform",l?null:"translateY(+50%)"),e):(t={},Object(a.a)(t,l?"right":"left","".concat(f,"%")),Object(a.a)(t,l?"left":"right","auto"),Object(a.a)(t,"transform","translateX(".concat(l?"+":"-","50%)")),t),C=Object(u.a)(Object(u.a)({},d),S),E=g||0;return(p||null===g)&&(E=null),k&&(n=k(b)),c.a.createElement("div",Object(i.a)({ref:this.setHandleRef,tabIndex:E},w,{className:j,style:C,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":h,"aria-valuemax":v,"aria-valuenow":b,"aria-disabled":!!p,"aria-label":y,"aria-labelledby":O,"aria-valuetext":n}))}}]),n}(c.a.Component),E=n(67),N=n(49);function T(e,t){try{return Object.keys(t).some((function(n){return e.target===Object(E.findDOMNode)(t[n])}))}catch(n){return!1}}function I(e,t){var n=t.min,r=t.max;return e<n||e>r}function A(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0}function M(e,t){var n=t.marks,r=t.step,a=t.min,i=t.max,o=Object.keys(n).map(parseFloat);if(null!==r){var s=Math.pow(10,P(r)),c=Math.floor((i*s-a*s)/(r*s)),u=Math.min((e-a)/r,c),l=Math.round(u)*r+a;o.push(l)}var f=o.map((function(t){return Math.abs(e-t)}));return o[f.indexOf(Math.min.apply(Math,Object(b.a)(f)))]}function P(e){var t=e.toString(),n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}function R(e,t){return e?t.clientY:t.pageX}function D(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function F(e,t){var n=t.getBoundingClientRect();return e?n.top+.5*n.height:window.pageXOffset+n.left+.5*n.width}function L(e,t){var n=t.max,r=t.min;return e<=r?r:e>=n?n:e}function z(e,t){var n=t.step,r=isFinite(M(e,t))?M(e,t):0;return null===n?r:parseFloat(r.toFixed(P(n)))}function q(e){e.stopPropagation(),e.preventDefault()}function V(e,t,n){var r="increase",a="decrease",i=r;switch(e.keyCode){case N.a.UP:i=t&&n?a:r;break;case N.a.RIGHT:i=!t&&n?a:r;break;case N.a.DOWN:i=t&&n?r:a;break;case N.a.LEFT:i=!t&&n?r:a;break;case N.a.END:return function(e,t){return t.max};case N.a.HOME:return function(e,t){return t.min};case N.a.PAGE_UP:return function(e,t){return e+2*t.step};case N.a.PAGE_DOWN:return function(e,t){return e-2*t.step};default:return}return function(e,t){return function(e,t,n){var r={increase:function(e,t){return e+t},decrease:function(e,t){return e-t}},a=r[e](Object.keys(n.marks).indexOf(JSON.stringify(t)),1),i=Object.keys(n.marks)[a];return n.step?r[e](t,n.step):Object.keys(n.marks).length&&n.marks[i]?n.marks[i]:t}(i,e,t)}}var B=["index"];function U(){}function W(e){var t,n;return n=t=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(l.a)(this,n),(r=t.call(this,e)).handlesRefs=void 0,r.sliderRef=void 0,r.document=void 0,r.dragOffset=void 0,r.prevMovedHandleIndex=void 0,r.onTouchMoveListener=void 0,r.onTouchUpListener=void 0,r.onMouseMoveListener=void 0,r.onMouseUpListener=void 0,r.dragTrack=void 0,r.startBounds=void 0,r.onDown=function(e,t){var n=t,a=r.props,i=a.draggableTrack,o=a.vertical,s=r.state.bounds,c=i&&r.positionGetValue&&r.positionGetValue(n)||[],u=T(e,r.handlesRefs);if(r.dragTrack=i&&s.length>=2&&!u&&!c.map((function(e,t){var n=!!t||e>=s[t];return t===c.length-1?e<=s[t]:n})).some((function(e){return!e})),r.dragTrack)r.dragOffset=n,r.startBounds=Object(b.a)(s);else{if(u){var l=F(o,e.target);r.dragOffset=n-l,n=l}else r.dragOffset=0;r.onStart(n)}},r.onMouseDown=function(e){if(0===e.button){r.removeDocumentEvents();var t=R(r.props.vertical,e);r.onDown(e,t),r.addDocumentMouseEvents()}},r.onTouchStart=function(e){if(!A(e)){var t=D(r.props.vertical,e);r.onDown(e,t),r.addDocumentTouchEvents(),q(e)}},r.onFocus=function(e){var t=r.props,n=t.onFocus,a=t.vertical;if(T(e,r.handlesRefs)&&!r.dragTrack){var i=F(a,e.target);r.dragOffset=0,r.onStart(i),q(e),n&&n(e)}},r.onBlur=function(e){var t=r.props.onBlur;r.dragTrack||r.onEnd(),t&&t(e)},r.onMouseUp=function(){r.handlesRefs[r.prevMovedHandleIndex]&&r.handlesRefs[r.prevMovedHandleIndex].clickFocus()},r.onMouseMove=function(e){if(r.sliderRef){var t=R(r.props.vertical,e);r.onMove(e,t-r.dragOffset,r.dragTrack,r.startBounds)}else r.onEnd()},r.onTouchMove=function(e){if(!A(e)&&r.sliderRef){var t=D(r.props.vertical,e);r.onMove(e,t-r.dragOffset,r.dragTrack,r.startBounds)}else r.onEnd()},r.onKeyDown=function(e){r.sliderRef&&T(e,r.handlesRefs)&&r.onKeyboard(e)},r.onClickMarkLabel=function(e,t){e.stopPropagation(),r.onChange({value:t}),r.setState({value:t},(function(){return r.onEnd(!0)}))},r.saveSlider=function(e){r.sliderRef=e};var a=e.step,i=e.max,o=e.min,s=!isFinite(i-o)||(i-o)%a===0;return Object(h.a)(!a||Math.floor(a)!==a||s,"Slider[max] - Slider[min] (".concat(i-o,") should be a multiple of Slider[step] (").concat(a,")")),r.handlesRefs={},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var e=this.props,t=e.autoFocus,n=e.disabled;t&&!n&&this.focus()}},{key:"componentWillUnmount",value:function(){O(Object(g.a)(n.prototype),"componentWillUnmount",this)&&O(Object(g.a)(n.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var e=this.sliderRef,t=this.props,n=t.vertical,r=t.reverse,a=e.getBoundingClientRect();return n?r?a.bottom:a.top:window.pageXOffset+(r?a.right:a.left)}},{key:"getSliderLength",value:function(){var e=this.sliderRef;if(!e)return 0;var t=e.getBoundingClientRect();return this.props.vertical?t.height:t.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=Object(k.a)(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Object(k.a)(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=Object(k.a)(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Object(k.a)(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var e;this.props.disabled||null===(e=this.handlesRefs[0])||void 0===e||e.focus()}},{key:"blur",value:function(){var e=this;this.props.disabled||Object.keys(this.handlesRefs).forEach((function(t){var n,r;null===(n=e.handlesRefs[t])||void 0===n||null===(r=n.blur)||void 0===r||r.call(n)}))}},{key:"calcValue",value:function(e){var t=this.props,n=t.vertical,r=t.min,a=t.max,i=Math.abs(Math.max(e,0)/this.getSliderLength());return n?(1-i)*(a-r)+r:i*(a-r)+r}},{key:"calcValueByPos",value:function(e){var t=(this.props.reverse?-1:1)*(e-this.getSliderStart());return this.trimAlignValue(this.calcValue(t))}},{key:"calcOffset",value:function(e){var t=this.props,n=t.min,r=(e-n)/(t.max-n);return Math.max(0,100*r)}},{key:"saveHandle",value:function(e,t){this.handlesRefs[e]=t}},{key:"render",value:function(){var e,t=this.props,r=t.prefixCls,i=t.className,o=t.marks,s=t.dots,l=t.step,f=t.included,d=t.disabled,p=t.vertical,h=t.reverse,v=t.min,m=t.max,b=t.children,y=t.maximumTrackStyle,k=t.style,w=t.railStyle,_=t.dotStyle,C=t.activeDotStyle,E=O(Object(g.a)(n.prototype),"render",this).call(this),N=E.tracks,T=E.handles,I=x()(r,(e={},Object(a.a)(e,"".concat(r,"-with-marks"),Object.keys(o).length),Object(a.a)(e,"".concat(r,"-disabled"),d),Object(a.a)(e,"".concat(r,"-vertical"),p),Object(a.a)(e,i,i),e));return c.a.createElement("div",{ref:this.saveSlider,className:I,onTouchStart:d?U:this.onTouchStart,onMouseDown:d?U:this.onMouseDown,onMouseUp:d?U:this.onMouseUp,onKeyDown:d?U:this.onKeyDown,onFocus:d?U:this.onFocus,onBlur:d?U:this.onBlur,style:k},c.a.createElement("div",{className:"".concat(r,"-rail"),style:Object(u.a)(Object(u.a)({},y),w)}),N,c.a.createElement(j,{prefixCls:r,vertical:p,reverse:h,marks:o,dots:s,step:l,included:f,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:m,min:v,dotStyle:_,activeDotStyle:C}),T,c.a.createElement(S,{className:"".concat(r,"-mark"),onClickLabel:d?U:this.onClickMarkLabel,vertical:p,marks:o,included:f,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:m,min:v,reverse:h}),b)}}]),n}(e),t.displayName="ComponentEnhancer(".concat(e.displayName,")"),t.defaultProps=Object(u.a)(Object(u.a)({},e.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(e){var t=e.index,n=Object(m.a)(e,B);return delete n.dragging,null===n.value?null:c.a.createElement(C,Object(i.a)({},n,{key:t}))},onBeforeChange:U,onChange:U,onAfterChange:U,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),n}var G=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(l.a)(this,n),(r=t.call(this,e)).positionGetValue=function(e){return[]},r.startValue=void 0,r.startPosition=void 0,r.prevMovedHandleIndex=void 0,r.onEnd=function(e){var t=r.state.dragging;r.removeDocumentEvents(),(t||e)&&r.props.onAfterChange(r.getValue()),r.setState({dragging:!1})};var a=void 0!==e.defaultValue?e.defaultValue:e.min,i=void 0!==e.value?e.value:a;return r.state={value:r.trimAlignValue(i),dragging:!1},Object(h.a)(!("minimumTrackStyle"in e),"minimumTrackStyle will be deprecated, please use trackStyle instead."),Object(h.a)(!("maximumTrackStyle"in e),"maximumTrackStyle will be deprecated, please use railStyle instead."),r}return Object(f.a)(n,[{key:"calcValueByPos",value:function(e){return 0}},{key:"calcOffset",value:function(e){return 0}},{key:"saveHandle",value:function(e,t){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.min,a=n.max,i=n.value,o=n.onChange;if("min"in this.props||"max"in this.props){var s=void 0!==i?i:t.value,c=this.trimAlignValue(s,this.props);c!==t.value&&(this.setState({value:c}),r===e.min&&a===e.max||!I(s,this.props)||o(c))}}},{key:"onChange",value:function(e){var t=this.props,n=!("value"in t),r=e.value>this.props.max?Object(u.a)(Object(u.a)({},e),{},{value:this.props.max}):e;n&&this.setState(r);var a=r.value;t.onChange(a)}},{key:"onStart",value:function(e){this.setState({dragging:!0});var t=this.props,n=this.getValue();t.onBeforeChange(n);var r=this.calcValueByPos(e);this.startValue=r,this.startPosition=e,r!==n&&(this.prevMovedHandleIndex=0,this.onChange({value:r}))}},{key:"onMove",value:function(e,t){q(e);var n=this.state.value,r=this.calcValueByPos(t);r!==n&&this.onChange({value:r})}},{key:"onKeyboard",value:function(e){var t=this.props,n=t.reverse,r=V(e,t.vertical,n);if(r){q(e);var a=this.state.value,i=r(a,this.props),o=this.trimAlignValue(i);if(o===a)return;this.onChange({value:o}),this.props.onAfterChange(o),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var e=this.props.startPoint||this.props.min;return this.state.value>e?e:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e)return null;var n=Object(u.a)(Object(u.a)({},this.props),t),r=L(e,n);return z(r,n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.vertical,a=t.included,i=t.disabled,o=t.minimumTrackStyle,s=t.trackStyle,l=t.handleStyle,f=t.tabIndex,d=t.ariaLabelForHandle,p=t.ariaLabelledByForHandle,h=t.ariaValueTextFormatterForHandle,m=t.min,b=t.max,g=t.startPoint,y=t.reverse,O=t.handle,k=this.state,w=k.value,x=k.dragging,j=this.calcOffset(w),S=O({className:"".concat(n,"-handle"),prefixCls:n,vertical:r,offset:j,value:w,dragging:x,disabled:i,min:m,max:b,reverse:y,index:0,tabIndex:f,ariaLabel:d,ariaLabelledBy:p,ariaValueTextFormatter:h,style:l[0]||l,ref:function(t){return e.saveHandle(0,t)}}),_=void 0!==g?this.calcOffset(g):0,C=s[0]||s;return{tracks:c.a.createElement(v,{className:"".concat(n,"-track"),vertical:r,included:a,offset:_,reverse:y,length:j-_,style:Object(u.a)(Object(u.a)({},o),C)}),handles:S}}}]),n}(c.a.Component),H=W(G),K=function(e){var t=e.value,n=e.handle,r=e.bounds,a=e.props,i=a.allowCross,o=a.pushable,s=Number(o),c=L(t,a),u=c;return i||null==n||void 0===r||(n>0&&c<=r[n-1]+s&&(u=r[n-1]+s),n<r.length-1&&c>=r[n+1]-s&&(u=r[n+1]-s)),z(u,a)},X=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(l.a)(this,n),(r=t.call(this,e)).startValue=void 0,r.startPosition=void 0,r.prevMovedHandleIndex=void 0,r.internalPointsCache=void 0,r.handlesRefs=void 0,r.dragTrack=void 0,r.positionGetValue=function(e){var t=r.getValue(),n=r.calcValueByPos(e),a=r.getClosestBound(n),i=r.getBoundNeedMoving(n,a);if(n===t[i])return null;var o=Object(b.a)(t);return o[i]=n,o},r.onEnd=function(e){var t=r.state.handle;r.removeDocumentEvents(),t||(r.dragTrack=!1),(null!==t||e)&&r.props.onAfterChange(r.getValue()),r.setState({handle:null})};var a=e.count,i=e.min,o=e.max,s=Array.apply(void 0,Object(b.a)(Array(a+1))).map((function(){return i})),c="defaultValue"in e?e.defaultValue:s,u=(void 0!==e.value?e.value:c).map((function(t,n){return K({value:t,handle:n,props:e})})),f=u[0]===o?0:u.length-1;return r.state={handle:null,recent:f,bounds:u},r}return Object(f.a)(n,[{key:"calcValueByPos",value:function(e){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(e){return 0}},{key:"saveHandle",value:function(e,t){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.props,a=r.onChange,i=r.value,o=r.min,s=r.max;if(("min"in this.props||"max"in this.props)&&(o!==e.min||s!==e.max)){var c=i||t.bounds;if(c.some((function(e){return I(e,n.props)})))a(c.map((function(e){return L(e,n.props)})))}}},{key:"onChange",value:function(e){var t=this.props;if(!("value"in t))this.setState(e);else{var n={};["handle","recent"].forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),Object.keys(n).length&&this.setState(n)}var r=Object(u.a)(Object(u.a)({},this.state),e).bounds;t.onChange(r)}},{key:"onStart",value:function(e){var t=this.props,n=this.state,r=this.getValue();t.onBeforeChange(r);var a=this.calcValueByPos(e);this.startValue=a,this.startPosition=e;var i=this.getClosestBound(a);if(this.prevMovedHandleIndex=this.getBoundNeedMoving(a,i),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex}),a!==r[this.prevMovedHandleIndex]){var o=Object(b.a)(n.bounds);o[this.prevMovedHandleIndex]=a,this.onChange({bounds:o})}}},{key:"onMove",value:function(e,t,n,r){q(e);var a=this.state,i=this.props,o=i.max||100,s=i.min||0;if(n){var c=i.vertical?-t:t;c=i.reverse?-c:c;var u=o-Math.max.apply(Math,Object(b.a)(r)),l=s-Math.min.apply(Math,Object(b.a)(r)),f=Math.min(Math.max(c/(this.getSliderLength()/(o-s)),l),u),d=r.map((function(e){return Math.floor(Math.max(Math.min(e+f,o),s))}));a.bounds.map((function(e,t){return e===d[t]})).some((function(e){return!e}))&&this.onChange({bounds:d})}else{var p=this.calcValueByPos(t);p!==a.bounds[a.handle]&&this.moveTo(p)}}},{key:"onKeyboard",value:function(e){var t=this.props,n=t.reverse,r=V(e,t.vertical,n);if(r){q(e);var a=this.state,i=this.props,o=a.bounds,s=a.handle,c=o[null===s?a.recent:s],u=r(c,i),l=K({value:u,handle:s,bounds:a.bounds,props:i});if(l===c)return;this.moveTo(l,!0)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(e){for(var t=this.state.bounds,n=0,r=1;r<t.length-1;r+=1)e>=t[r]&&(n=r);return Math.abs(t[n+1]-e)<Math.abs(t[n]-e)&&(n+=1),n}},{key:"getBoundNeedMoving",value:function(e,t){var n=this.state,r=n.bounds,a=n.recent,i=t,o=r[t+1]===r[t];return o&&r[a]===r[t]&&(i=a),o&&e!==r[t+1]&&(i=e<r[t+1]?t:t+1),i}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var e=this.state.bounds;return e[e.length-1]}},{key:"getPoints",value:function(){var e=this.props,t=e.marks,n=e.step,r=e.min,a=e.max,i=this.internalPointsCache;if(!i||i.marks!==t||i.step!==n){var o=Object(u.a)({},t);if(null!==n)for(var s=r;s<=a;s+=n)o[s]=s;var c=Object.keys(o).map(parseFloat);c.sort((function(e,t){return e-t})),this.internalPointsCache={marks:t,step:n,points:c}}return this.internalPointsCache.points}},{key:"moveTo",value:function(e,t){var n=this,r=this.state,a=this.props,i=Object(b.a)(r.bounds),o=null===r.handle?r.recent:r.handle;i[o]=e;var s=o;!1!==a.pushable?this.pushSurroundingHandles(i,s):a.allowCross&&(i.sort((function(e,t){return e-t})),s=i.indexOf(e)),this.onChange({recent:s,handle:s,bounds:i}),t&&(this.props.onAfterChange(i),this.setState({},(function(){n.handlesRefs[s].focus()})),this.onEnd())}},{key:"pushSurroundingHandles",value:function(e,t){var n=e[t],r=this.props.pushable,a=Number(r),i=0;if(e[t+1]-n<a&&(i=1),n-e[t-1]<a&&(i=-1),0!==i){var o=t+i,s=i*(e[o]-n);this.pushHandle(e,o,i,a-s)||(e[t]=e[o]-i*a)}}},{key:"pushHandle",value:function(e,t,n,r){for(var a=e[t],i=e[t];n*(i-a)<r;){if(!this.pushHandleOnePoint(e,t,n))return e[t]=a,!1;i=e[t]}return!0}},{key:"pushHandleOnePoint",value:function(e,t,n){var r=this.getPoints(),a=r.indexOf(e[t])+n;if(a>=r.length||a<0)return!1;var i=t+n,o=r[a],s=this.props.pushable,c=Number(s),u=n*(e[i]-o);return!!this.pushHandle(e,i,n,c-u)&&(e[t]=o,!0)}},{key:"trimAlignValue",value:function(e){var t=this.state,n=t.handle,r=t.bounds;return K({value:e,handle:n,bounds:r,props:this.props})}},{key:"render",value:function(){var e=this,t=this.state,n=t.handle,r=t.bounds,i=this.props,o=i.prefixCls,s=i.vertical,u=i.included,l=i.disabled,f=i.min,d=i.max,p=i.reverse,h=i.handle,m=i.trackStyle,b=i.handleStyle,g=i.tabIndex,y=i.ariaLabelGroupForHandles,O=i.ariaLabelledByGroupForHandles,k=i.ariaValueTextFormatterGroupForHandles,w=r.map((function(t){return e.calcOffset(t)})),j="".concat(o,"-handle"),S=r.map((function(t,r){var i,c=g[r]||0;(l||null===g[r])&&(c=null);var u=n===r;return h({className:x()((i={},Object(a.a)(i,j,!0),Object(a.a)(i,"".concat(j,"-").concat(r+1),!0),Object(a.a)(i,"".concat(j,"-dragging"),u),i)),prefixCls:o,vertical:s,dragging:u,offset:w[r],value:t,index:r,tabIndex:c,min:f,max:d,reverse:p,disabled:l,style:b[r],ref:function(t){return e.saveHandle(r,t)},ariaLabel:y[r],ariaLabelledBy:O[r],ariaValueTextFormatter:k[r]})}));return{tracks:r.slice(0,-1).map((function(e,t){var n,r=t+1,i=x()((n={},Object(a.a)(n,"".concat(o,"-track"),!0),Object(a.a)(n,"".concat(o,"-track-").concat(r),!0),n));return c.a.createElement(v,{className:i,vertical:s,reverse:p,included:u,offset:w[r-1],length:w[r]-w[r-1],style:m[t],key:r})})),handles:S}}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!("value"in e||"min"in e||"max"in e))return null;var n=e.value||t.bounds,r=n.map((function(n,r){return K({value:n,handle:r,bounds:t.bounds,props:e})}));if(t.bounds.length===r.length){if(r.every((function(e,n){return e===t.bounds[n]})))return null}else r=n.map((function(t,n){return K({value:t,handle:n,props:e})}));return Object(u.a)(Object(u.a)({},t),{},{bounds:r})}}]),n}(c.a.Component);X.displayName="Range",X.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var Q=W(X),Y=n(300),Z=n(65),J=n(50),$=s.forwardRef((function(e,t){var n=e.visible,r=e.overlay,a=s.useRef(null),o=Object(Z.a)(t,a),c=s.useRef(null);function u(){J.a.cancel(c.current)}return s.useEffect((function(){return n?c.current=Object(J.a)((function(){var e;null===(e=a.current)||void 0===e||e.forcePopupAlign()})):u(),u}),[n,r]),s.createElement(Y.a,Object(i.a)({ref:o},e))})),ee=["value","dragging","index","disabled"],te=["prefixCls","overlay","placement","visible"];var ne=H;ne.Range=Q,ne.Handle=C,ne.createSliderWithTooltip=function(e){var t,n;return n=t=function(t){Object(d.a)(r,t);var n=Object(p.a)(r);function r(){var e;Object(l.a)(this,r);for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return(e=n.call.apply(n,[this].concat(o))).state={visibles:{}},e.handleTooltipVisibleChange=function(t,n){e.setState((function(e){return{visibles:Object(u.a)(Object(u.a)({},e.visibles),{},Object(a.a)({},t,n))}}))},e.handleWithTooltip=function(t){var n,r=t.value,a=t.dragging,o=t.index,s=t.disabled,l=Object(m.a)(t,ee),f=e.props,d=f.tipFormatter,p=f.tipProps,h=f.handleStyle,v=f.getTooltipContainer,b=p.prefixCls,g=void 0===b?"rc-slider-tooltip":b,y=p.overlay,O=void 0===y?d(r):y,k=p.placement,w=void 0===k?"top":k,x=p.visible,j=void 0!==x&&x,S=Object(m.a)(p,te);return n=Array.isArray(h)?h[o]||h[0]:h,c.a.createElement($,Object(i.a)({},S,{getTooltipContainer:v,prefixCls:g,overlay:O,placement:w,visible:!s&&(e.state.visibles[o]||a)||j,key:o}),c.a.createElement(C,Object(i.a)({},l,{style:Object(u.a)({},n),value:r,onMouseEnter:function(){return e.handleTooltipVisibleChange(o,!0)},onMouseLeave:function(){return e.handleTooltipVisibleChange(o,!1)}})))},e}return Object(f.a)(r,[{key:"render",value:function(){return c.a.createElement(e,Object(i.a)({},this.props,{handle:this.handleWithTooltip}))}}]),r}(c.a.Component),t.defaultProps={tipFormatter:function(e){return e},handleStyle:[{}],tipProps:{},getTooltipContainer:function(e){return e.parentNode}},n};var re=ne,ae=n(140),ie=s.forwardRef((function(e,t){var n=e.visible,r=Object(s.useRef)(null),a=Object(s.useRef)(null);function o(){J.a.cancel(a.current),a.current=null}return s.useEffect((function(){return n?a.current=Object(J.a)((function(){var e;null===(e=r.current)||void 0===e||e.forcePopupAlign(),a.current=null})):o(),o}),[n,e.title]),s.createElement(ae.a,Object(i.a)({ref:Object(Z.a)(r,t)},e))})),oe=n(141),se=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},ce=s.forwardRef((function(e,t){var n,c=s.useContext(oe.b),u=c.getPrefixCls,l=c.direction,f=c.getPopupContainer,d=s.useState({}),p=Object(o.a)(d,2),h=p[0],v=p[1],m=function(e,t){v((function(n){return Object(i.a)(Object(i.a)({},n),Object(a.a)({},e,t))}))},b=function(e,t){return e||(t?"rtl"===l?"left":"right":"top")},g=function(t){var n=t.tooltipPrefixCls,r=t.prefixCls,a=t.info,o=a.value,c=a.dragging,l=a.index,d=se(a,["value","dragging","index"]),p=e.tipFormatter,v=e.tooltipVisible,g=e.tooltipPlacement,y=e.getTooltipPopupContainer,O=e.vertical,k=!!p&&(h[l]||c),w=v||void 0===v&&k,x=u();return s.createElement(ie,{prefixCls:n,title:p?p(o):"",visible:w,placement:b(g,O),transitionName:"".concat(x,"-zoom-down"),key:l,overlayClassName:"".concat(r,"-tooltip"),getPopupContainer:y||f},s.createElement(C,Object(i.a)({},d,{value:o,onMouseEnter:function(){return m(l,!0)},onMouseLeave:function(){return m(l,!1)}})))},y=e.prefixCls,O=e.tooltipPrefixCls,k=e.range,w=e.className,j=se(e,["prefixCls","tooltipPrefixCls","range","className"]),S=u("slider",y),_=u("tooltip",O),E=x()(w,Object(a.a)({},"".concat(S,"-rtl"),"rtl"===l));return"rtl"!==l||j.vertical||(j.reverse=!j.reverse),"object"===Object(r.a)(k)&&(n=k.draggableTrack),k?s.createElement(Q,Object(i.a)({},j,{step:j.step,draggableTrack:n,className:E,ref:t,handle:function(e){return g({tooltipPrefixCls:_,prefixCls:S,info:e})},prefixCls:S})):s.createElement(re,Object(i.a)({},j,{step:j.step,className:E,ref:t,handle:function(e){return g({tooltipPrefixCls:_,prefixCls:S,info:e})},prefixCls:S}))}));ce.displayName="Slider",ce.defaultProps={tipFormatter:function(e){return"number"===typeof e?e.toString():""}};t.a=ce},function(e,t,n){"use strict";var r=n(16),a=n(17),i=n(1),o=n(63),s=n(23),c=n.n(s),u=n(41),l=n(44),f=n(47),d=n(46),p=n(35),h=n(26),v=n(49),m=n(135),b=n(161),g=n(416),y=n(176),O=function(e,t){var n=e.prefixCls,o=e.id,s=e.flattenOptions,u=e.childrenAsData,l=e.values,f=e.searchValue,d=e.multiple,O=e.defaultActiveFirstOption,k=e.height,w=e.itemHeight,x=e.notFoundContent,j=e.open,S=e.menuItemSelectedIcon,_=e.virtual,C=e.onSelect,E=e.onToggleOpen,N=e.onActiveValue,T=e.onScroll,I=e.onMouseEnter,A="".concat(n,"-item"),M=Object(b.a)((function(){return s}),[j,s],(function(e,t){return t[0]&&e[1]!==t[1]})),P=i.useRef(null),R=function(e){e.preventDefault()},D=function(e){P.current&&P.current.scrollTo({index:e})},F=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=M.length,r=0;r<n;r+=1){var a=(e+r*t+n)%n,i=M[a],o=i.group,s=i.data;if(!o&&!s.disabled)return a}return-1},L=i.useState((function(){return F(0)})),z=Object(h.a)(L,2),q=z[0],V=z[1],B=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];V(e);var n={source:t?"keyboard":"mouse"},r=M[e];r?N(r.data.value,e,n):N(null,-1,n)};i.useEffect((function(){B(!1!==O?F(0):-1)}),[M.length,f]),i.useEffect((function(){var e,t=setTimeout((function(){if(!d&&j&&1===l.size){var e=Array.from(l)[0],t=M.findIndex((function(t){return t.data.value===e}));B(t),D(t)}}));j&&(null===(e=P.current)||void 0===e||e.scrollTo(void 0));return function(){return clearTimeout(t)}}),[j]);var U=function(e){void 0!==e&&C(e,{selected:!l.has(e)}),d||E(!1)};if(i.useImperativeHandle(t,(function(){return{onKeyDown:function(e){var t=e.which;switch(t){case v.a.UP:case v.a.DOWN:var n=0;if(t===v.a.UP?n=-1:t===v.a.DOWN&&(n=1),0!==n){var r=F(q+n,n);D(r),B(r,!0)}break;case v.a.ENTER:var a=M[q];a&&!a.data.disabled?U(a.data.value):U(void 0),j&&e.preventDefault();break;case v.a.ESC:E(!1),j&&e.stopPropagation()}},onKeyUp:function(){},scrollTo:function(e){D(e)}}})),0===M.length)return i.createElement("div",{role:"listbox",id:"".concat(o,"_list"),className:"".concat(A,"-empty"),onMouseDown:R},x);function W(e){var t=M[e];if(!t)return null;var n=t.data||{},r=n.value,s=n.label,c=n.children,f=Object(m.a)(n,!0),d=u?c:s;return t?i.createElement("div",Object(a.a)({"aria-label":"string"===typeof d?d:null},f,{key:e,role:"option",id:"".concat(o,"_list_").concat(e),"aria-selected":l.has(r)}),r):null}return i.createElement(i.Fragment,null,i.createElement("div",{role:"listbox",id:"".concat(o,"_list"),style:{height:0,width:0,overflow:"hidden"}},W(q-1),W(q),W(q+1)),i.createElement(g.a,{itemKey:"key",ref:P,data:M,height:k,itemHeight:w,fullHeight:!1,onMouseDown:R,onScroll:T,virtual:_,onMouseEnter:I},(function(e,t){var n,o=e.group,s=e.groupOption,f=e.data,d=f.label,h=f.key;if(o)return i.createElement("div",{className:c()(A,"".concat(A,"-group"))},void 0!==d?d:h);var v=f.disabled,m=f.value,b=f.title,g=f.children,O=f.style,k=f.className,w=Object(p.a)(f,["disabled","value","title","children","style","className"]),x=l.has(m),j="".concat(A,"-option"),_=c()(A,j,k,(n={},Object(r.a)(n,"".concat(j,"-grouped"),s),Object(r.a)(n,"".concat(j,"-active"),q===t&&!v),Object(r.a)(n,"".concat(j,"-disabled"),v),Object(r.a)(n,"".concat(j,"-selected"),x),n)),C=!S||"function"===typeof S||x,E=(u?g:d)||m,N="string"===typeof E||"number"===typeof E?E.toString():void 0;return void 0!==b&&(N=b),i.createElement("div",Object(a.a)({},w,{"aria-selected":x,className:_,title:N,onMouseMove:function(){q===t||v||B(t)},onClick:function(){v||U(m)},style:O}),i.createElement("div",{className:"".concat(j,"-content")},E),i.isValidElement(S)||x,C&&i.createElement(y.a,{className:"".concat(A,"-option-state"),customizeIcon:S,customizeIconProps:{isSelected:x}},x?"\u2713":null))})))},k=i.forwardRef(O);k.displayName="OptionList";var w=k,x=function(){return null};x.isSelectOption=!0;var j=x,S=function(){return null};S.isSelectOptGroup=!0;var _=S,C=n(18),E=n(73);function N(e){var t=e.key,n=e.props,r=n.children,a=n.value,i=Object(p.a)(n,["children","value"]);return Object(C.a)({key:t,value:void 0!==a?a:t,children:r},i)}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(E.a)(e).map((function(e,n){if(!i.isValidElement(e)||!e.type)return null;var r=e.type.isSelectOptGroup,a=e.key,o=e.props,s=o.children,c=Object(p.a)(o,["children"]);return t||!r?N(e):Object(C.a)(Object(C.a)({key:"__RC_SELECT_GRP__".concat(null===a?n:a,"__"),label:a},c),{},{options:T(s)})})).filter((function(e){return e}))}var I=n(148),A=n(417),M=n(38),P=n(52),R=n(119);var D=function(e){var t=e.mode,n=e.options,r=e.children,a=e.backfill,o=e.allowClear,s=e.placeholder,c=e.getInputElement,u=e.showSearch,l=e.onSearch,f=e.defaultOpen,d=e.autoFocus,p=e.labelInValue,h=e.value,v=e.inputValue,m=e.optionLabelProp,b="multiple"===t||"tags"===t,g=void 0!==u?u:b||"combobox"===t,y=n||T(r);if(Object(P.a)("tags"!==t||y.every((function(e){return!e.disabled})),"Please avoid setting option to disabled in tags mode since user can always type text as tag."),"tags"===t||"combobox"===t){var O=y.some((function(e){return e.options?e.options.some((function(e){return"number"===typeof("value"in e?e.value:e.key)})):"number"===typeof("value"in e?e.value:e.key)}));Object(P.a)(!O,"`value` of Option should not use number type when `mode` is `tags` or `combobox`.")}if(Object(P.a)("combobox"!==t||!m,"`combobox` mode not support `optionLabelProp`. Please set `value` on Option directly."),Object(P.a)("combobox"===t||!a,"`backfill` only works with `combobox` mode."),Object(P.a)("combobox"===t||!c,"`getInputElement` only work with `combobox` mode."),Object(P.b)("combobox"!==t||!c||!o||!s,"Customize `getInputElement` should customize clear and placeholder logic instead of configuring `allowClear` and `placeholder`."),l&&!g&&"combobox"!==t&&"tags"!==t&&Object(P.a)(!1,"`onSearch` should work with `showSearch` instead of use alone."),Object(P.b)(!f||d,"`defaultOpen` makes Select open without focus which means it will not close by click outside. You can set `autoFocus` if needed."),void 0!==h&&null!==h){var k=Object(R.d)(h);Object(P.a)(!p||k.every((function(e){return"object"===Object(M.a)(e)&&("key"in e||"value"in e)})),"`value` should in shape of `{ value: string | number, label?: ReactNode }` when you set `labelInValue` to `true`"),Object(P.a)(!b||Array.isArray(h),"`value` should be array when `mode` is `multiple` or `tags`")}if(r){var w=null;Object(E.a)(r).some((function(e){if(!i.isValidElement(e)||!e.type)return!1;var t=e.type;return!t.isSelectOption&&(t.isSelectOptGroup?!Object(E.a)(e.props.children).every((function(t){return!(i.isValidElement(t)&&e.type&&!t.type.isSelectOption)||(w=t.type,!1)})):(w=t,!0))})),w&&Object(P.a)(!1,"`children` should be `Select.Option` or `Select.OptGroup` instead of `".concat(w.displayName||w.name||w,"`.")),Object(P.a)(void 0===v,"`inputValue` is deprecated, please use `searchValue` instead.")}},F=Object(A.a)({prefixCls:"rc-select",components:{optionList:w},convertChildrenToData:T,flattenOptions:I.d,getLabeledValue:I.e,filterOptions:I.b,isValueDisabled:I.g,findValueOption:I.c,warningProps:D,fillOptionsWithMissingValue:I.a}),L=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.apply(this,arguments)).selectRef=i.createRef(),e.focus=function(){e.selectRef.current.focus()},e.blur=function(){e.selectRef.current.blur()},e}return Object(l.a)(n,[{key:"render",value:function(){return i.createElement(F,Object(a.a)({ref:this.selectRef},this.props))}}]),n}(i.Component);L.Option=j,L.OptGroup=_;var z=L,q=n(141),V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},B=n(48),U=function(e,t){return i.createElement(B.a,Object(C.a)(Object(C.a)({},e),{},{ref:t,icon:V}))};U.displayName="DownOutlined";var W=i.forwardRef(U),G=n(118),H=n(165),K=n(115),X=n(138),Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},Y=function(e,t){return i.createElement(B.a,Object(C.a)(Object(C.a)({},e),{},{ref:t,icon:Q}))};Y.displayName="SearchOutlined";var Z=i.forwardRef(Y);var J=n(86),$=n(116),ee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},te="SECRET_COMBOBOX_MODE_DO_NOT_USE",ne=function(e,t){var n,s,u=e.prefixCls,l=e.bordered,f=void 0===l||l,d=e.className,p=e.getPopupContainer,h=e.dropdownClassName,v=e.listHeight,m=void 0===v?256:v,b=e.listItemHeight,g=void 0===b?24:b,y=e.size,O=e.notFoundContent,k=ee(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","listHeight","listItemHeight","size","notFoundContent"]),w=i.useContext(q.b),x=w.getPopupContainer,j=w.getPrefixCls,S=w.renderEmpty,_=w.direction,C=w.virtual,E=w.dropdownMatchSelectWidth,N=i.useContext(J.b),T=j("select",u),I=j(),A=i.useMemo((function(){var e=k.mode;if("combobox"!==e)return e===te?"combobox":e}),[k.mode]),M="multiple"===A||"tags"===A;s=void 0!==O?O:"combobox"===A?null:S("Select");var P=function(e){var t=e.suffixIcon,n=e.clearIcon,r=e.menuItemSelectedIcon,a=e.removeIcon,o=e.loading,s=e.multiple,c=e.prefixCls,u=n;n||(u=i.createElement(X.a,null));var l=null;if(void 0!==t)l=t;else if(o)l=i.createElement(G.a,{spin:!0});else{var f="".concat(c,"-suffix");l=function(e){var t=e.open,n=e.showSearch;return t&&n?i.createElement(Z,{className:f}):i.createElement(W,{className:f})}}return{clearIcon:u,suffixIcon:l,itemIcon:void 0!==r?r:s?i.createElement(H.a,null):null,removeIcon:void 0!==a?a:i.createElement(K.a,null)}}(Object(a.a)(Object(a.a)({},k),{multiple:M,prefixCls:T})),R=P.suffixIcon,D=P.itemIcon,F=P.removeIcon,L=P.clearIcon,V=Object(o.a)(k,["suffixIcon","itemIcon"]),B=c()(h,Object(r.a)({},"".concat(T,"-dropdown-").concat(_),"rtl"===_)),U=y||N,Q=c()((n={},Object(r.a)(n,"".concat(T,"-lg"),"large"===U),Object(r.a)(n,"".concat(T,"-sm"),"small"===U),Object(r.a)(n,"".concat(T,"-rtl"),"rtl"===_),Object(r.a)(n,"".concat(T,"-borderless"),!f),n),d);return i.createElement(z,Object(a.a)({ref:t,virtual:C,dropdownMatchSelectWidth:E},V,{transitionName:Object($.b)(I,"slide-up",k.transitionName),listHeight:m,listItemHeight:g,mode:A,prefixCls:T,direction:_,inputIcon:R,menuItemSelectedIcon:D,removeIcon:F,clearIcon:L,notFoundContent:s,className:Q,getPopupContainer:p||x,dropdownClassName:B}))},re=i.forwardRef(ne);re.SECRET_COMBOBOX_MODE_DO_NOT_USE=te,re.Option=j,re.OptGroup=_;t.a=re},function(e,t,n){"use strict";var r,a=n(16),i=n(17),o=n(1),s=n(418),c=n(23),u=n.n(c),l=n(115),f=n(147),d=n(167),p=n(212),h=n(98),v=n(141),m=n(177),b=n(116),g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};Object(m.a)()&&document.documentElement.addEventListener("click",(function(e){r={x:e.pageX,y:e.pageY},setTimeout((function(){r=null}),100)}),!0);var y=function(e){var t,n=o.useContext(v.b),c=n.getPopupContainer,m=n.getPrefixCls,y=n.direction,O=function(t){var n=e.onCancel;null===n||void 0===n||n(t)},k=function(t){var n=e.onOk;null===n||void 0===n||n(t)},w=function(t){var n=e.okText,r=e.okType,a=e.cancelText,s=e.confirmLoading;return o.createElement(o.Fragment,null,o.createElement(d.a,Object(i.a)({onClick:O},e.cancelButtonProps),a||t.cancelText),o.createElement(d.a,Object(i.a)({},Object(p.a)(r),{loading:s,onClick:k},e.okButtonProps),n||t.okText))},x=e.prefixCls,j=e.footer,S=e.visible,_=e.wrapClassName,C=e.centered,E=e.getContainer,N=e.closeIcon,T=e.focusTriggerAfterClose,I=void 0===T||T,A=g(e,["prefixCls","footer","visible","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),M=m("modal",x),P=m(),R=o.createElement(h.a,{componentName:"Modal",defaultLocale:Object(f.b)()},w),D=o.createElement("span",{className:"".concat(M,"-close-x")},N||o.createElement(l.a,{className:"".concat(M,"-close-icon")})),F=u()(_,(t={},Object(a.a)(t,"".concat(M,"-centered"),!!C),Object(a.a)(t,"".concat(M,"-wrap-rtl"),"rtl"===y),t));return o.createElement(s.a,Object(i.a)({},A,{getContainer:void 0===E?c:E,prefixCls:M,wrapClassName:F,footer:void 0===j?R:j,visible:S,mousePosition:r,onClose:O,closeIcon:D,focusTriggerAfterClose:I,transitionName:Object(b.b)(P,"zoom",e.transitionName),maskTransitionName:Object(b.b)(P,"fade",e.maskTransitionName)}))};y.defaultProps={width:520,confirmLoading:!1,visible:!1,okType:"primary"};var O=y,k=n(67),w=n(303),x=n(302),j=n(304),S=n(227),_=n(26),C=function(e){var t=o.useRef(!1),n=o.useRef(),r=o.useState(!1),a=Object(_.a)(r,2),s=a[0],c=a[1];o.useEffect((function(){var t;if(e.autoFocus){var r=n.current;t=setTimeout((function(){return r.focus()}))}return function(){t&&clearTimeout(t)}}),[]);var u=e.type,l=e.children,f=e.prefixCls,h=e.buttonProps;return o.createElement(d.a,Object(i.a)({},Object(p.a)(u),{onClick:function(){var n=e.actionFn,r=e.closeModal;if(!t.current)if(t.current=!0,n){var a;if(n.length)a=n(r),t.current=!1;else if(!(a=n()))return void r();!function(n){var r=e.closeModal;n&&n.then&&(c(!0),n.then((function(){r.apply(void 0,arguments)}),(function(e){console.error(e),c(!1),t.current=!1})))}(a)}else r()},loading:s,prefixCls:f},h,{ref:n}),l)},E=n(55),N=n(56),T=function(e){var t=e.icon,n=e.onCancel,r=e.onOk,i=e.close,s=e.zIndex,c=e.afterClose,l=e.visible,f=e.keyboard,d=e.centered,p=e.getContainer,h=e.maskStyle,v=e.okText,m=e.okButtonProps,g=e.cancelText,y=e.cancelButtonProps,k=e.direction,w=e.prefixCls,x=e.rootPrefixCls,j=e.bodyStyle,S=e.closable,_=void 0!==S&&S,T=e.closeIcon,I=e.modalRender,A=e.focusTriggerAfterClose;Object(E.a)(!("string"===typeof t&&t.length>2),"Modal","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(t,"` at https://ant.design/components/icon"));var M=e.okType||"primary",P="".concat(w,"-confirm"),R=!("okCancel"in e)||e.okCancel,D=e.width||416,F=e.style||{},L=void 0===e.mask||e.mask,z=void 0!==e.maskClosable&&e.maskClosable,q=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),V=u()(P,"".concat(P,"-").concat(e.type),Object(a.a)({},"".concat(P,"-rtl"),"rtl"===k),e.className),B=R&&o.createElement(C,{actionFn:n,closeModal:i,autoFocus:"cancel"===q,buttonProps:y,prefixCls:"".concat(x,"-btn")},g);return o.createElement(O,{prefixCls:w,className:V,wrapClassName:u()(Object(a.a)({},"".concat(P,"-centered"),!!e.centered)),onCancel:function(){return i({triggerCancel:!0})},visible:l,title:"",footer:"",transitionName:Object(b.b)(x,"zoom",e.transitionName),maskTransitionName:Object(b.b)(x,"fade",e.maskTransitionName),mask:L,maskClosable:z,maskStyle:h,style:F,width:D,zIndex:s,afterClose:c,keyboard:f,centered:d,getContainer:p,closable:_,closeIcon:T,modalRender:I,focusTriggerAfterClose:A},o.createElement("div",{className:"".concat(P,"-body-wrapper")},o.createElement(N.b,{prefixCls:x,direction:k},o.createElement("div",{className:"".concat(P,"-body"),style:j},t,void 0===e.title?null:o.createElement("span",{className:"".concat(P,"-title")},e.title),o.createElement("div",{className:"".concat(P,"-content")},e.content))),o.createElement("div",{className:"".concat(P,"-btns")},B,o.createElement(C,{type:M,actionFn:r,closeModal:i,autoFocus:"ok"===q,buttonProps:m,prefixCls:"".concat(x,"-btn")},v))))},I=[],A=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},M="";function P(e){var t=document.createElement("div");document.body.appendChild(t);var n=Object(i.a)(Object(i.a)({},e),{close:s,visible:!0});function r(){var n=k.unmountComponentAtNode(t);n&&t.parentNode&&t.parentNode.removeChild(t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a.some((function(e){return e&&e.triggerCancel}));e.onCancel&&o&&e.onCancel.apply(e,a);for(var c=0;c<I.length;c++){var u=I[c];if(u===s){I.splice(c,1);break}}}function a(e){var n=e.okText,r=e.cancelText,a=e.prefixCls,s=A(e,["okText","cancelText","prefixCls"]);setTimeout((function(){var e=Object(f.b)(),c=(0,Object(N.c)().getPrefixCls)(void 0,M),u=a||"".concat(c,"-modal");k.render(o.createElement(T,Object(i.a)({},s,{prefixCls:u,rootPrefixCls:c,okText:n||(s.okCancel?e.okText:e.justOkText),cancelText:r||e.cancelText})),t)}))}function s(){for(var t=this,o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];a(n=Object(i.a)(Object(i.a)({},n),{visible:!1,afterClose:function(){"function"===typeof e.afterClose&&e.afterClose(),r.apply(t,s)}}))}return a(n),I.push(s),{destroy:s,update:function(e){a(n="function"===typeof e?e(n):Object(i.a)(Object(i.a)({},n),e))}}}function R(e){return Object(i.a)(Object(i.a)({icon:o.createElement(S.a,null),okCancel:!1},e),{type:"warning"})}function D(e){return Object(i.a)(Object(i.a)({icon:o.createElement(w.a,null),okCancel:!1},e),{type:"info"})}function F(e){return Object(i.a)(Object(i.a)({icon:o.createElement(x.a,null),okCancel:!1},e),{type:"success"})}function L(e){return Object(i.a)(Object(i.a)({icon:o.createElement(j.a,null),okCancel:!1},e),{type:"error"})}function z(e){return Object(i.a)(Object(i.a)({icon:o.createElement(S.a,null),okCancel:!0},e),{type:"confirm"})}var q=n(31);var V=n(108),B=function(e,t){var n=e.afterClose,r=e.config,a=o.useState(!0),s=Object(_.a)(a,2),c=s[0],u=s[1],l=o.useState(r),f=Object(_.a)(l,2),d=f[0],p=f[1],m=o.useContext(v.b),b=m.direction,g=m.getPrefixCls,y=g("modal"),O=g();function k(){u(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.some((function(e){return e&&e.triggerCancel}));d.onCancel&&r&&d.onCancel()}return o.useImperativeHandle(t,(function(){return{destroy:k,update:function(e){p((function(t){return Object(i.a)(Object(i.a)({},t),e)}))}}})),o.createElement(h.a,{componentName:"Modal",defaultLocale:V.a.Modal},(function(e){return o.createElement(T,Object(i.a)({prefixCls:y,rootPrefixCls:O},d,{close:k,visible:c,afterClose:n,okText:d.okText||(d.okCancel?e.okText:e.justOkText),direction:b,cancelText:d.cancelText||e.cancelText}))}))},U=o.forwardRef(B),W=0,G=o.memo(o.forwardRef((function(e,t){var n=function(){var e=o.useState([]),t=Object(_.a)(e,2),n=t[0],r=t[1];return[n,o.useCallback((function(e){return r((function(t){return[].concat(Object(q.a)(t),[e])})),function(){r((function(t){return t.filter((function(t){return t!==e}))}))}}),[])]}(),r=Object(_.a)(n,2),a=r[0],i=r[1];return o.useImperativeHandle(t,(function(){return{patchElement:i}}),[]),o.createElement(o.Fragment,null,a)})));function H(e){return P(R(e))}var K=O;K.useModal=function(){var e=o.useRef(null),t=o.useState([]),n=Object(_.a)(t,2),r=n[0],a=n[1];o.useEffect((function(){r.length&&(Object(q.a)(r).forEach((function(e){e()})),a([]))}),[r]);var i=o.useCallback((function(t){return function(n){var r;W+=1;var i,s=o.createRef(),c=o.createElement(U,{key:"modal-".concat(W),config:t(n),ref:s,afterClose:function(){i()}});return i=null===(r=e.current)||void 0===r?void 0:r.patchElement(c),{destroy:function(){function e(){var e;null===(e=s.current)||void 0===e||e.destroy()}s.current?e():a((function(t){return[].concat(Object(q.a)(t),[e])}))},update:function(e){function t(){var t;null===(t=s.current)||void 0===t||t.update(e)}s.current?t():a((function(e){return[].concat(Object(q.a)(e),[t])}))}}}}),[]);return[o.useMemo((function(){return{info:i(D),success:i(F),error:i(L),warning:i(R),confirm:i(z)}}),[]),o.createElement(G,{ref:e})]},K.info=function(e){return P(D(e))},K.success=function(e){return P(F(e))},K.error=function(e){return P(L(e))},K.warning=H,K.warn=H,K.confirm=function(e){return P(z(e))},K.destroyAll=function(){for(;I.length;){var e=I.pop();e&&e()}},K.config=function(e){var t=e.rootPrefixCls;Object(E.a)(!1,"Modal","Modal.config is deprecated. Please use ConfigProvider.config instead."),M=t};t.a=K},function(e,t,n){"use strict";var r=n(16),a=n(17),i=n(1),o=n(23),s=n.n(o),c=n(63),u=n(141),l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},f=function(e){var t=e.prefixCls,n=e.className,o=e.hoverable,c=void 0===o||o,f=l(e,["prefixCls","className","hoverable"]);return i.createElement(u.a,null,(function(e){var o=(0,e.getPrefixCls)("card",t),u=s()("".concat(o,"-grid"),n,Object(r.a)({},"".concat(o,"-grid-hoverable"),c));return i.createElement("div",Object(a.a)({},f,{className:u}))}))},d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},p=function(e){return i.createElement(u.a,null,(function(t){var n=t.getPrefixCls,r=e.prefixCls,o=e.className,c=e.avatar,u=e.title,l=e.description,f=d(e,["prefixCls","className","avatar","title","description"]),p=n("card",r),h=s()("".concat(p,"-meta"),o),v=c?i.createElement("div",{className:"".concat(p,"-meta-avatar")},c):null,m=u?i.createElement("div",{className:"".concat(p,"-meta-title")},u):null,b=l?i.createElement("div",{className:"".concat(p,"-meta-description")},l):null,g=m||b?i.createElement("div",{className:"".concat(p,"-meta-detail")},m,b):null;return i.createElement("div",Object(a.a)({},f,{className:h}),v,g)}))},h=n(317),v=n(388).a,m=n(287).a,b=n(86),g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var y=function(e){var t,n,o,l=i.useContext(u.b),d=l.getPrefixCls,p=l.direction,y=i.useContext(b.b),O=e.prefixCls,k=e.className,w=e.extra,x=e.headStyle,j=void 0===x?{}:x,S=e.bodyStyle,_=void 0===S?{}:S,C=e.title,E=e.loading,N=e.bordered,T=void 0===N||N,I=e.size,A=e.type,M=e.cover,P=e.actions,R=e.tabList,D=e.children,F=e.activeTabKey,L=e.defaultActiveTabKey,z=e.tabBarExtraContent,q=e.hoverable,V=e.tabProps,B=void 0===V?{}:V,U=g(e,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),W=d("card",O),G=0===_.padding||"0px"===_.padding?{padding:24}:void 0,H=i.createElement("div",{className:"".concat(W,"-loading-block")}),K=i.createElement("div",{className:"".concat(W,"-loading-content"),style:G},i.createElement(v,{gutter:8},i.createElement(m,{span:22},H)),i.createElement(v,{gutter:8},i.createElement(m,{span:8},H),i.createElement(m,{span:15},H)),i.createElement(v,{gutter:8},i.createElement(m,{span:6},H),i.createElement(m,{span:18},H)),i.createElement(v,{gutter:8},i.createElement(m,{span:13},H),i.createElement(m,{span:9},H)),i.createElement(v,{gutter:8},i.createElement(m,{span:4},H),i.createElement(m,{span:3},H),i.createElement(m,{span:16},H))),X=void 0!==F,Q=Object(a.a)(Object(a.a)({},B),(t={},Object(r.a)(t,X?"activeKey":"defaultActiveKey",X?F:L),Object(r.a)(t,"tabBarExtraContent",z),t)),Y=R&&R.length?i.createElement(h.a,Object(a.a)({size:"large"},Q,{className:"".concat(W,"-head-tabs"),onChange:function(t){var n;null===(n=e.onTabChange)||void 0===n||n.call(e,t)}}),R.map((function(e){return i.createElement(h.a.TabPane,{tab:e.tab,disabled:e.disabled,key:e.key})}))):null;(C||w||Y)&&(o=i.createElement("div",{className:"".concat(W,"-head"),style:j},i.createElement("div",{className:"".concat(W,"-head-wrapper")},C&&i.createElement("div",{className:"".concat(W,"-head-title")},C),w&&i.createElement("div",{className:"".concat(W,"-extra")},w)),Y));var Z=M?i.createElement("div",{className:"".concat(W,"-cover")},M):null,J=i.createElement("div",{className:"".concat(W,"-body"),style:_},E?K:D),$=P&&P.length?i.createElement("ul",{className:"".concat(W,"-actions")},function(e){return e.map((function(t,n){return i.createElement("li",{style:{width:"".concat(100/e.length,"%")},key:"action-".concat(n)},i.createElement("span",null,t))}))}(P)):null,ee=Object(c.a)(U,["onTabChange"]),te=I||y,ne=s()(W,(n={},Object(r.a)(n,"".concat(W,"-loading"),E),Object(r.a)(n,"".concat(W,"-bordered"),T),Object(r.a)(n,"".concat(W,"-hoverable"),q),Object(r.a)(n,"".concat(W,"-contain-grid"),function(){var t;return i.Children.forEach(e.children,(function(e){e&&e.type&&e.type===f&&(t=!0)})),t}()),Object(r.a)(n,"".concat(W,"-contain-tabs"),R&&R.length),Object(r.a)(n,"".concat(W,"-").concat(te),te),Object(r.a)(n,"".concat(W,"-type-").concat(A),!!A),Object(r.a)(n,"".concat(W,"-rtl"),"rtl"===p),n),k);return i.createElement("div",Object(a.a)({},ee,{className:ne}),o,Z,J,$)};y.Grid=f,y.Meta=p;t.a=y},function(e,t,n){"use strict";var r=n(17),a=n(16),i=n(1),o=n.n(i),s=n(63),c=n(18),u=n(35),l=n(41),f=n(44),d=n(47),p=n(46),h=n(73),v=n(23),m=n.n(v),b=["className","prefixCls","style","active","status","iconPrefix","icon","wrapperStyle","stepNumber","disabled","description","title","subTitle","progressDot","stepIcon","tailContent","icons","stepIndex","onStepClick","onClick"];function g(e){return"string"===typeof e}var y=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments)).onClick=function(){var t=e.props,n=t.onClick,r=t.onStepClick,a=t.stepIndex;n&&n.apply(void 0,arguments),r(a)},e}return Object(f.a)(n,[{key:"renderIconNode",value:function(){var e,t,n=this.props,r=n.prefixCls,o=n.progressDot,s=n.stepIcon,c=n.stepNumber,u=n.status,l=n.title,f=n.description,d=n.icon,p=n.iconPrefix,h=n.icons,v=m()("".concat(r,"-icon"),"".concat(p,"icon"),(e={},Object(a.a)(e,"".concat(p,"icon-").concat(d),d&&g(d)),Object(a.a)(e,"".concat(p,"icon-check"),!d&&"finish"===u&&(h&&!h.finish||!h)),Object(a.a)(e,"".concat(p,"icon-cross"),!d&&"error"===u&&(h&&!h.error||!h)),e)),b=i.createElement("span",{className:"".concat(r,"-icon-dot")});return t=o?"function"===typeof o?i.createElement("span",{className:"".concat(r,"-icon")},o(b,{index:c-1,status:u,title:l,description:f})):i.createElement("span",{className:"".concat(r,"-icon")},b):d&&!g(d)?i.createElement("span",{className:"".concat(r,"-icon")},d):h&&h.finish&&"finish"===u?i.createElement("span",{className:"".concat(r,"-icon")},h.finish):h&&h.error&&"error"===u?i.createElement("span",{className:"".concat(r,"-icon")},h.error):d||"finish"===u||"error"===u?i.createElement("span",{className:v}):i.createElement("span",{className:"".concat(r,"-icon")},c),s&&(t=s({index:c-1,status:u,title:l,description:f,node:t})),t}},{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.prefixCls,o=t.style,s=t.active,l=t.status,f=void 0===l?"wait":l,d=(t.iconPrefix,t.icon),p=(t.wrapperStyle,t.stepNumber,t.disabled),h=t.description,v=t.title,g=t.subTitle,y=(t.progressDot,t.stepIcon,t.tailContent),O=(t.icons,t.stepIndex,t.onStepClick),k=t.onClick,w=Object(u.a)(t,b),x=m()("".concat(r,"-item"),"".concat(r,"-item-").concat(f),n,(e={},Object(a.a)(e,"".concat(r,"-item-custom"),d),Object(a.a)(e,"".concat(r,"-item-active"),s),Object(a.a)(e,"".concat(r,"-item-disabled"),!0===p),e)),j=Object(c.a)({},o),S={};return O&&!p&&(S.role="button",S.tabIndex=0,S.onClick=this.onClick),i.createElement("div",Object.assign({},w,{className:x,style:j}),i.createElement("div",Object.assign({onClick:k},S,{className:"".concat(r,"-item-container")}),i.createElement("div",{className:"".concat(r,"-item-tail")},y),i.createElement("div",{className:"".concat(r,"-item-icon")},this.renderIconNode()),i.createElement("div",{className:"".concat(r,"-item-content")},i.createElement("div",{className:"".concat(r,"-item-title")},v,g&&i.createElement("div",{title:"string"===typeof g?g:void 0,className:"".concat(r,"-item-subtitle")},g)),h&&i.createElement("div",{className:"".concat(r,"-item-description")},h))))}}]),n}(i.Component),O=["prefixCls","style","className","children","direction","type","labelPlacement","iconPrefix","status","size","current","progressDot","stepIcon","initial","icons","onChange"],k=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments)).onStepClick=function(t){var n=e.props,r=n.onChange,a=n.current;r&&a!==t&&r(t)},e}return Object(f.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.prefixCls,s=n.style,l=void 0===s?{}:s,f=n.className,d=n.children,p=n.direction,v=n.type,b=n.labelPlacement,g=n.iconPrefix,y=n.status,k=n.size,w=n.current,x=n.progressDot,j=n.stepIcon,S=n.initial,_=n.icons,C=n.onChange,E=Object(u.a)(n,O),N="navigation"===v,T=x?"vertical":b,I=m()(r,"".concat(r,"-").concat(p),f,(e={},Object(a.a)(e,"".concat(r,"-").concat(k),k),Object(a.a)(e,"".concat(r,"-label-").concat(T),"horizontal"===p),Object(a.a)(e,"".concat(r,"-dot"),!!x),Object(a.a)(e,"".concat(r,"-navigation"),N),e));return o.a.createElement("div",Object.assign({className:I,style:l},E),Object(h.a)(d).map((function(e,n){var a=S+n,o=Object(c.a)({stepNumber:"".concat(a+1),stepIndex:a,key:a,prefixCls:r,iconPrefix:g,wrapperStyle:l,progressDot:x,stepIcon:j,icons:_,onStepClick:C&&t.onStepClick},e.props);return"error"===y&&n===w-1&&(o.className="".concat(r,"-next-error")),e.props.status||(o.status=a===w?y:a<w?"finish":"wait"),o.active=a===w,Object(i.cloneElement)(e,o)})))}}]),n}(o.a.Component);k.Step=y,k.defaultProps={type:"default",prefixCls:"rc-steps",iconPrefix:"rc",direction:"horizontal",labelPlacement:"horizontal",initial:0,current:0,status:"process",size:"",progressDot:!1};var w=k,x=n(165),j=n(115),S=n(141),_=n(299),C=n(26),E=n(168);var N=function(){var e=Object(i.useState)({}),t=Object(C.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){var e=E.a.subscribe((function(e){r(e)}));return function(){return E.a.unsubscribe(e)}}),[]),n},T=function(e){var t,n=e.percent,o=e.size,c=e.className,u=e.direction,l=e.responsive,f=N().xs,d=i.useContext(S.b),p=d.getPrefixCls,h=d.direction,v=i.useCallback((function(){return l&&f?"vertical":u}),[f,u]),b=p("steps",e.prefixCls),g=p("",e.iconPrefix),y=m()((t={},Object(a.a)(t,"".concat(b,"-rtl"),"rtl"===h),Object(a.a)(t,"".concat(b,"-with-progress"),void 0!==n),t),c),O={finish:i.createElement(x.a,{className:"".concat(b,"-finish-icon")}),error:i.createElement(j.a,{className:"".concat(b,"-error-icon")})};return i.createElement(w,Object(r.a)({icons:O},Object(s.a)(e,["percent","responsive"]),{direction:v(),stepIcon:function(e){var t=e.node;if("process"===e.status&&void 0!==n){var r="small"===o?32:40;return i.createElement("div",{className:"".concat(b,"-progress-icon")},i.createElement(_.a,{type:"circle",percent:n,width:r,strokeWidth:4,format:function(){return null}}),t)}return t},prefixCls:b,iconPrefix:g,className:y}))};T.Step=w.Step,T.defaultProps={current:0};t.a=T},function(e,t,n){"use strict";var r=n(16),a=n(17),i=n(1),o=n.n(i),s=n(23),c=n.n(s),u=n(35),l=n(18),f=n(41),d=n(44),p=n(47),h=n(46),v=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var r;Object(f.a)(this,n),(r=t.call(this,e)).handleChange=function(e){var t=r.props,n=t.disabled,a=t.onChange;n||("checked"in r.props||r.setState({checked:e.target.checked}),a&&a({target:Object(l.a)(Object(l.a)({},r.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},r.saveInput=function(e){r.input=e};var a="checked"in e?e.checked:e.defaultChecked;return r.state={checked:a},r}return Object(d.a)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,i=t.className,s=t.style,l=t.name,f=t.id,d=t.type,p=t.disabled,h=t.readOnly,v=t.tabIndex,m=t.onClick,b=t.onFocus,g=t.onBlur,y=t.onKeyDown,O=t.onKeyPress,k=t.onKeyUp,w=t.autoFocus,x=t.value,j=t.required,S=Object(u.a)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),_=Object.keys(S).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=S[t]),e}),{}),C=this.state.checked,E=c()(n,i,(e={},Object(r.a)(e,"".concat(n,"-checked"),C),Object(r.a)(e,"".concat(n,"-disabled"),p),e));return o.a.createElement("span",{className:E,style:s},o.a.createElement("input",Object(a.a)({name:l,id:f,type:d,required:j,readOnly:h,disabled:p,tabIndex:v,className:"".concat(n,"-input"),checked:!!C,onClick:m,onFocus:b,onBlur:g,onKeyUp:k,onKeyDown:y,onKeyPress:O,onChange:this.handleChange,autoFocus:w,ref:this.saveInput,value:x},_)),o.a.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?Object(l.a)(Object(l.a)({},t),{},{checked:e.checked}):null}}]),n}(i.Component);v.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};var m=v,b=n(31),g=n(26),y=n(63),O=n(141),k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},w=i.createContext(null),x=function(e,t){var n=e.defaultValue,o=e.children,s=e.options,u=void 0===s?[]:s,l=e.prefixCls,f=e.className,d=e.style,p=e.onChange,h=k(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),v=i.useContext(O.b),m=v.getPrefixCls,x=v.direction,j=i.useState(h.value||n||[]),S=Object(g.a)(j,2),_=S[0],C=S[1],E=i.useState([]),N=Object(g.a)(E,2),I=N[0],A=N[1];i.useEffect((function(){"value"in h&&C(h.value||[])}),[h.value]);var M=function(){return u.map((function(e){return"string"===typeof e?{label:e,value:e}:e}))},P=m("checkbox",l),R="".concat(P,"-group"),D=Object(y.a)(h,["value","disabled"]);u&&u.length>0&&(o=M().map((function(e){return i.createElement(T,{prefixCls:P,key:e.value.toString(),disabled:"disabled"in e?e.disabled:h.disabled,value:e.value,checked:-1!==_.indexOf(e.value),onChange:e.onChange,className:"".concat(R,"-item"),style:e.style},e.label)})));var F={toggleOption:function(e){var t=_.indexOf(e.value),n=Object(b.a)(_);-1===t?n.push(e.value):n.splice(t,1),"value"in h||C(n);var r=M();null===p||void 0===p||p(n.filter((function(e){return-1!==I.indexOf(e)})).sort((function(e,t){return r.findIndex((function(t){return t.value===e}))-r.findIndex((function(e){return e.value===t}))})))},value:_,disabled:h.disabled,name:h.name,registerValue:function(e){A((function(t){return[].concat(Object(b.a)(t),[e])}))},cancelValue:function(e){A((function(t){return t.filter((function(t){return t!==e}))}))}},L=c()(R,Object(r.a)({},"".concat(R,"-rtl"),"rtl"===x),f);return i.createElement("div",Object(a.a)({className:L,style:d},D,{ref:t}),i.createElement(w.Provider,{value:F},o))},j=i.forwardRef(x),S=i.memo(j),_=n(55),C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},E=function(e,t){var n,o=e.prefixCls,s=e.className,u=e.children,l=e.indeterminate,f=void 0!==l&&l,d=e.style,p=e.onMouseEnter,h=e.onMouseLeave,v=e.skipGroup,b=void 0!==v&&v,g=C(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),y=i.useContext(O.b),k=y.getPrefixCls,x=y.direction,j=i.useContext(w),S=i.useRef(g.value);i.useEffect((function(){null===j||void 0===j||j.registerValue(g.value),Object(_.a)("checked"in g||!!j||!("value"in g),"Checkbox","`value` is not a valid prop, do you mean `checked`?")}),[]),i.useEffect((function(){if(!b)return g.value!==S.current&&(null===j||void 0===j||j.cancelValue(S.current),null===j||void 0===j||j.registerValue(g.value)),function(){return null===j||void 0===j?void 0:j.cancelValue(g.value)}}),[g.value]);var E=k("checkbox",o),N=Object(a.a)({},g);j&&!b&&(N.onChange=function(){g.onChange&&g.onChange.apply(g,arguments),j.toggleOption&&j.toggleOption({label:u,value:g.value})},N.name=j.name,N.checked=-1!==j.value.indexOf(g.value),N.disabled=g.disabled||j.disabled);var T=c()((n={},Object(r.a)(n,"".concat(E,"-wrapper"),!0),Object(r.a)(n,"".concat(E,"-rtl"),"rtl"===x),Object(r.a)(n,"".concat(E,"-wrapper-checked"),N.checked),Object(r.a)(n,"".concat(E,"-wrapper-disabled"),N.disabled),n),s),I=c()(Object(r.a)({},"".concat(E,"-indeterminate"),f));return i.createElement("label",{className:T,style:d,onMouseEnter:p,onMouseLeave:h},i.createElement(m,Object(a.a)({},N,{prefixCls:E,className:I,ref:t})),void 0!==u&&i.createElement("span",null,u))},N=i.forwardRef(E);N.displayName="Checkbox";var T=N,I=T;I.Group=S,I.__ANT_CHECKBOX=!0;t.a=I},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(17),a=n(16),i=n(26),o=n(1),s=n(23),c=n.n(s),u=n(73),l=n(141);function f(e){var t=e.className,n=e.direction,i=e.index,s=e.marginDirection,c=e.children,u=e.split,l=e.wrap,f=o.useContext(h),d=f.horizontalSize,p=f.verticalSize,v=f.latestIndex,m={};return f.supportFlexGap||("vertical"===n?i<v&&(m={marginBottom:d/(u?2:1)}):m=Object(r.a)(Object(r.a)({},i<v&&Object(a.a)({},s,d/(u?2:1))),l&&{paddingBottom:p})),null===c||void 0===c?null:o.createElement(o.Fragment,null,o.createElement("div",{className:t,style:m},c),i<v&&u&&o.createElement("span",{className:"".concat(t,"-split"),style:m},u))}var d=n(284),p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},h=o.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),v={small:8,middle:16,large:24};t.b=function(e){var t,n=o.useContext(l.b),s=n.getPrefixCls,m=n.space,b=n.direction,g=e.size,y=void 0===g?(null===m||void 0===m?void 0:m.size)||"small":g,O=e.align,k=e.className,w=e.children,x=e.direction,j=void 0===x?"horizontal":x,S=e.prefixCls,_=e.split,C=e.style,E=e.wrap,N=void 0!==E&&E,T=p(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),I=Object(d.a)(),A=o.useMemo((function(){return(Array.isArray(y)?y:[y,y]).map((function(e){return function(e){return"string"===typeof e?v[e]:e||0}(e)}))}),[y]),M=Object(i.a)(A,2),P=M[0],R=M[1],D=Object(u.a)(w,{keepEmpty:!0}),F=void 0===O&&"horizontal"===j?"center":O,L=s("space",S),z=c()(L,"".concat(L,"-").concat(j),(t={},Object(a.a)(t,"".concat(L,"-rtl"),"rtl"===b),Object(a.a)(t,"".concat(L,"-align-").concat(F),F),t),k),q="".concat(L,"-item"),V="rtl"===b?"marginLeft":"marginRight",B=0,U=D.map((function(e,t){return null!==e&&void 0!==e&&(B=t),o.createElement(f,{className:q,key:"".concat(q,"-").concat(t),direction:j,index:t,marginDirection:V,split:_,wrap:N},e)})),W=o.useMemo((function(){return{horizontalSize:P,verticalSize:R,latestIndex:B,supportFlexGap:I}}),[P,R,B,I]);if(0===D.length)return null;var G={};return N&&(G.flexWrap="wrap",I||(G.marginBottom=-R)),I&&(G.columnGap=P,G.rowGap=R),o.createElement("div",Object(r.a)({className:z,style:Object(r.a)(Object(r.a)({},G),C)},T),o.createElement(h.Provider,{value:W},U))}},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="InboxOutlined";t.a=a.forwardRef(s)},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="MinusCircleOutlined";t.a=a.forwardRef(s)},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"filled"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="CaretRightFilled";t.a=a.forwardRef(s)},function(e,t,n){"use strict";var r=n(18),a=n(1),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"}}]},name:"caret-left",theme:"filled"},o=n(48),s=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};s.displayName="CaretLeftFilled";t.a=a.forwardRef(s)}]]);
//# sourceMappingURL=2.fb8fe778.chunk.js.map