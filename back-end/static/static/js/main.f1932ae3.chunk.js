(this.webpackJsonpchorderator=this.webpackJsonpchorderator||[]).push([[0],{429:function(e,t,a){},430:function(e,t,a){},519:function(e,t,a){},520:function(e,t,a){},526:function(e,t){},527:function(e,t){},535:function(e,t){},545:function(e,t){},546:function(e,t){},547:function(e,t){},555:function(e,t){},604:function(e,t,a){},611:function(e,t,a){},614:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),l=a(67),i=a.n(l),r=(a(429),a(8)),o=(a(430),a(2)),c=a(4),d=a(5),h=a(6),u=a(29),j=a(20),p=a(622),m=a(620),b=a(616),g=a(618),y=a(627),x=a(167),O=a(626),v=a(621),f=a(628),_=a(629),S=a(423),k=a(77),C=a(419),T=a(314),w=a.n(T),P="http://127.0.0.1:5000/api";function I(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"get",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;"get"===n?w.a.get(P+e).then((function(e){null!==l&&l(e.data),t.setState(Object(k.a)({},a,e.data))}),(function(e){C.b.warn({content:"Sorry, something wrong happened to the server!",key:"message"}),console.log(e)})):w.a.post(P+e,s).then((function(e){null!==l&&l(e.data),t.setState(Object(k.a)({},a,e.data))}),(function(e){C.b.warn({content:"Sorry, something wrong happened to the server!",key:"message"}),console.log(e)}))}var A=[{value:"4/4",ui:"4/4"},{value:"3/4",ui:"3/4"}],M=[{value:"maj",ui:"Major"},{value:"min",ui:"Minor"}],N=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],z=[{value:"pop_standard",ui:"Pop Standard"},{value:"pop_complex",ui:"Pop Complex"},{value:"dark",ui:"Dark"},{value:"r&b",ui:"R&B"}],R=a(279),L=a.n(R),D=a(24),V=p.a.Option,E={labelCol:{span:6},wrapperCol:{span:14}},F=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={chordStyleControl:!0,textureStyleControl:!0,values:null},e.onFinish=function(t){I("/generate",Object(j.a)(e),null,"post",t),L.a.publish("submit",t)},e.normFile=function(e){return Array.isArray(e)?e:e&&e.fileList},e.add=function(){},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{children:[Object(D.jsxs)(m.a,Object(u.a)(Object(u.a)({name:"validate_other"},E),{},{onFinish:this.onFinish,initialValues:{tonic:"C",meter:"4/4",mode:"maj",chord_style:"pop_standard",rhythm_density:2,voice_number:2,enable_texture_style:!0,enable_chord_style:!0},children:[Object(D.jsx)(b.a,{orientation:"left",children:"Set Melody"}),Object(D.jsx)(m.a.Item,{label:"Upload Melody MIDI",name:"midi",valuePropName:"fileList",getValueFromEvent:this.normFile,hasFeedback:!0,rules:[{required:!0,message:"Please upload your melody MIDI!"}],children:Object(D.jsxs)(g.a.Dragger,{name:"midi",action:"".concat(P,"/upload_melody"),accept:".mid",maxCount:1,children:[Object(D.jsx)("p",{className:"ant-upload-drag-icon",children:Object(D.jsx)(f.a,{})}),Object(D.jsx)("p",{className:"ant-upload-text",children:"Click or drag MIDI file to this area to upload"})]})}),Object(D.jsx)(b.a,{orientation:"left",children:"Set Phrase"}),Object(D.jsx)(m.a.Item,{name:"phrases",label:"Phrases",rules:[{required:!0,message:"Please set the phrase of the melody"}],children:Object(D.jsx)(m.a.List,{name:"phrases",children:function(e,t){var a=t.add,n=t.remove;return Object(D.jsxs)(D.Fragment,{children:[e.map((function(e){return Object(D.jsxs)(y.b,{align:"baseline",size:120,children:[Object(D.jsx)(m.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.area!==t.area||e.sights!==t.sights},children:function(){return Object(D.jsx)(m.a.Item,Object(u.a)(Object(u.a)({},e),{},{label:"Phrase Name",name:[e.name,"phrase_name"],fieldKey:[e.fieldKey,"phrase_name"],rules:[{required:!0,message:"Missing Name"}],children:Object(D.jsxs)(p.a,{placeholder:"Please select a name",children:[Object(D.jsxs)(V,{value:"A",children:["A",Object(D.jsx)("span",{style:{visibility:"hidden"},children:"____________________"})]},"phrase_name_option_A"),Object(D.jsxs)(V,{value:"B",children:["B",Object(D.jsx)("span",{style:{visibility:"hidden"},children:"____________________"})]},"phrase_name_option_B"),Object(D.jsxs)(V,{value:"C",children:["C",Object(D.jsx)("span",{style:{visibility:"hidden"},children:"____________________"})]},"phrase_name_option_C"),Object(D.jsxs)(V,{value:"D",children:["D",Object(D.jsx)("span",{style:{visibility:"hidden"},children:"____________________"})]},"phrase_name_option_C")]})}))}}),Object(D.jsx)(m.a.Item,Object(u.a)(Object(u.a)({},e),{},{label:"Phrase Length",name:[e.name,"phrase_length"],fieldKey:[e.fieldKey,"phrase_length"],rules:[{required:!0,message:"Missing length"}],children:Object(D.jsxs)(p.a,{placeholder:"Please select a length",children:[Object(D.jsxs)(V,{value:4,children:["4",Object(D.jsx)("span",{style:{visibility:"hidden"},children:"_____________________"})]},"phrase_length_option_4"),Object(D.jsxs)(V,{value:8,children:["8",Object(D.jsx)("span",{style:{visibility:"hidden"},children:"_____________________"})]},"phrase_length_option_8")]})})),Object(D.jsx)(_.a,{onClick:function(){return n(e.name)}})]},e.key)})),Object(D.jsx)(m.a.Item,{children:Object(D.jsx)(x.a,{type:"dashed",onClick:function(){return a()},icon:Object(D.jsx)(S.a,{}),children:"Add Phrase"})})]})}})}),Object(D.jsx)(b.a,{orientation:"left",children:"Set Meta"}),Object(D.jsx)(m.a.Item,{name:"tonic",label:"Tonic",hasFeedback:!0,rules:[{required:!0,message:"Please select a tonic!"}],children:Object(D.jsx)(p.a,{placeholder:"Please select a tonic",children:N.map((function(e){return Object(D.jsx)(V,{value:e,children:e},"tonic_option_".concat(e))}))})}),Object(D.jsx)(m.a.Item,{name:"mode",label:"Mode",hasFeedback:!0,rules:[{required:!0,message:"Please select a mode!"}],children:Object(D.jsx)(p.a,{placeholder:"Please select a mode",children:M.map((function(e){return Object(D.jsx)(V,{value:e.value,children:e.ui},"mode_option_".concat(e))}))})}),Object(D.jsx)(m.a.Item,{name:"meter",label:"Meter",hasFeedback:!0,rules:[{required:!0,message:"Please select a meter!"}],children:Object(D.jsx)(p.a,{placeholder:"Please select a meter",children:A.map((function(e){return Object(D.jsx)(V,{value:e.value,disabled:"3/4"===e.value,children:e.ui},"meter_option_".concat(e))}))})}),Object(D.jsx)(b.a,{orientation:"left",children:"Set Style"}),Object(D.jsx)(m.a.Item,{name:"enable_chord_style",label:"Enable Chord Style Controlling",valuePropName:"checked",children:Object(D.jsx)(O.a,{checked:this.state.chordStyleControl,onChange:function(t){return e.setState({chordStyleControl:t.target.checked})}})}),Object(D.jsx)(m.a.Item,{name:"chord_style",label:"Chord Style",rules:[{required:!0,message:"Please select a style!"}],children:Object(D.jsx)(p.a,{placeholder:"Please select a style",disabled:!this.state.chordStyleControl,children:z.map((function(e){return Object(D.jsx)(V,{value:e.value,children:e.ui},"chord_style_option_".concat(e))}))})}),Object(D.jsx)(m.a.Item,{name:"enable_texture_style",label:"Enable Texture Style Controlling",valuePropName:"checked",children:Object(D.jsx)(O.a,{checked:this.state.textureStyleControl,onChange:function(t){return e.setState({textureStyleControl:t.target.checked})}})}),Object(D.jsx)(m.a.Item,{name:"rhythm_density",label:"Texture Rhythm Density (RD)",rules:[{required:!0,message:"Please select a RD!"}],children:Object(D.jsx)(v.a,{max:4,min:0,step:1,dots:!0,disabled:!this.state.textureStyleControl})}),Object(D.jsx)(m.a.Item,{name:"voice_number",label:"Texture Voice Number (VN)",rules:[{required:!0,message:"Please select a VN!"}],children:Object(D.jsx)(v.a,{max:4,min:0,step:1,dots:!0,disabled:!this.state.textureStyleControl})}),Object(D.jsx)(m.a.Item,{wrapperCol:{span:4,offset:11},style:{marginTop:"60px"},children:Object(D.jsx)(x.a,{type:"primary",htmlType:"submit",shape:"round",children:"Begin Generate"})})]})),Object(D.jsx)("div",{style:{minHeight:"150px"}})]})}}]),a}(n.Component),B=(a(519),a(302)),q=a(118),W=a(630),H=a(631),G=a(619),U=a(624),Y=a(617),K=a(214),Q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(D.jsx)("div",{children:Object(D.jsx)("svg",{t:"1636188018686",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2662",width:"32",height:"32",children:Object(D.jsx)("path",{d:"M906.666667 170.752a32 32 0 0 1 31.701333 27.648l0.298667 4.352v618.666667a32 32 0 0 1-27.648 31.701333l-4.352 0.298667H117.333333a32 32 0 0 1-31.701333-27.648L85.333333 821.418667v-618.666667a32 32 0 0 1 27.648-31.701333l4.352-0.298667h789.333334zM256 533.376H149.333333v256.042667h725.333334v-256.042667H768v159.957333a32 32 0 0 1-63.701333 4.352l-0.298667-4.352v-159.957333h-85.333333v159.957333a32 32 0 0 1-63.701334 4.352L554.666667 693.333333v-159.957333h-85.333334v159.957333a32 32 0 0 1-63.701333 4.352L405.333333 693.333333v-159.957333h-85.333333v159.957333a32 32 0 0 1-63.701333 4.352L256 693.333333v-159.957333z m618.666667-298.624h-725.333334v234.624h725.333334V234.752z m-480 85.333333a32 32 0 1 1 0 64 32 32 0 0 1 0-64z m341.333333-0.042666a32 32 0 0 1 4.352 63.701333l-4.352 0.298667h-106.666667a32 32 0 0 1-4.352-63.701334l4.352-0.298666h106.666667z m-469.333333-0.042667a32 32 0 1 1 0 64 32 32 0 0 1 0-64z","p-id":"2663"})})})}}]),a}(n.Component),J=(a(520),a(613));function X(e){var t=e.midiURL,a=e.id,n=e.midiWithoutMelodyURL,l=e.additionalVisualizer,i=e.setAdditionalVisualizer,o=e.noteHeight,c=e.pixelsPerTimeStep,d=e.color,h=e.backgroundColor,u=s.a.useState(null),j=Object(r.a)(u,2),p=j[0],m=j[1],b=s.a.useState(null),g=Object(r.a)(b,2),y=g[0],x=g[1],O=s.a.useState(null),v=Object(r.a)(O,2),f=v[0],_=v[1],S=s.a.useState(null),k=Object(r.a)(S,2),C=k[0],T=k[1];s.a.useEffect((function(){J.urlToNoteSequence(t).then((function(e){return m(e)})),void 0!==n&&J.urlToNoteSequence(n).then((function(e){return x(e)}))}),[t,n]),s.a.useEffect((function(){if(void 0===n&&null!==p||void 0!==n&&null!==p&&null!==y){var e=new J.Visualizer(n?y:p,document.getElementById(a),{noteHeight:o||6,pixelsPerTimeStep:c||26,noteSpacing:1,noteRGB:d||"0, 59, 118",activeNoteRGB:"225, 111, 34"}),t=new J.SoundFontPlayer("https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus",void 0,void 0,void 0,{run:function(t){e.redraw(t),l&&l.redraw(t)},stop:function(){e.redraw(),l&&l.redraw()}});T(e),i&&i(e),_(t)}}),[p,y,l,i,n,a,o,c,d]);return Object(D.jsx)("canvas",{id:a,onClick:function(){"stopped"===f.getPlayState()?f.start(p):(f.stop(),C.redraw(),l&&l.redraw())},style:{display:"block",backgroundColor:h||!0}})}a(604);var Z=G.a.Title,$=G.a.Paragraph,ee=p.a.Option;function te(e){var t=e.index,a=e.progression;function n(e){var t=e[0];return" "!==e[1]&&(t+=e[1]),"1"===e[2]&&(t+="m"),t}return s.a.useEffect((function(){for(var e=[],s=0;s<a.length;s++)e=e.concat(a[s]);for(var l=[],i="",r=0;r<e.length;r++)e[r]!==i&&(i=e[r],l.push([n(e[r]),8.4*r]));var o=document.getElementById("chord-text"+t).getContext("2d");o.font="20px Times New Roman";for(var c=0;c<l.length;c++)o.fillText(l[c][0],l[c][1],18)}),[]),Object(D.jsx)("canvas",{id:"chord-text"+t,width:540,height:20,style:{backgroundColor:"#fff7e6"}})}var ae=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={style:e.props.style,melodyVis:null},e.setMelodyVis=function(t){e.setState({melodyVis:t})},e.handleStyleChange=function(t){var a=e.props.father.state.styles;a[e.props.index]=t,e.props.father.setState({styles:a})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.data.otherStyles;return Object(D.jsxs)("div",{className:"card",style:{width:"".concat(75*this.props.data.progression.length,"px")},children:[Object(D.jsx)("div",{style:{textAlign:"center"},children:Object(D.jsx)(Z,{level:3,style:{color:"gray",marginBottom:"0px"},children:Object(D.jsx)("a",{id:"b",href:!0,children:"PROGRESSION"})})}),Object(D.jsxs)("div",{style:{width:"50%",float:"left",marginTop:"20px"},children:[Object(D.jsx)($,{style:{fontSize:"10px",color:"gray",marginLeft:"12px"},children:"Style"}),Object(D.jsx)(p.a,{value:this.state.style,autoFocus:!1,bordered:!1,style:{fontSize:"25px"},onSelect:this.handleStyleChange,children:z.map((function(e){return Object(D.jsx)(ee,{value:e.value,disabled:!ne(t,e.value),children:e.ui})}))})]}),Object(D.jsx)("div",{style:{marginTop:"110px"}}),Object(D.jsx)(X,{midiURL:P.slice(0,-4)+"/midi/"+this.props.data.midi_name.melody,id:this.props.index+"melody",pixelsPerTimeStep:35,setAdditionalVisualizer:this.setMelodyVis}),Object(D.jsx)("div",{style:{marginTop:"20px"}}),Object(D.jsx)("div",{style:{marginTop:"10px"},children:Object(D.jsx)(te,{index:this.props.index,progression:this.props.data.progression_full})}),Object(D.jsx)(X,{midiURL:P.slice(0,-4)+"/midi/"+this.props.data.midi_name.chord,midiWithoutMelodyURL:P.slice(0,-4)+"/midi/"+this.props.data.midi_name.chord_WM,id:this.props.index+"chord",pixelsPerTimeStep:35,noteHeight:3,additionalVisualizer:this.state.melodyVis}),Object(D.jsx)("div",{style:{marginTop:"5px"}}),Object(D.jsx)(X,{midiURL:P.slice(0,-4)+"/midi/"+this.props.data.midi_name.acc,midiWithoutMelodyURL:P.slice(0,-4)+"/midi/"+this.props.data.midi_name.acc_WM,id:this.props.index+"acc",pixelsPerTimeStep:35,noteHeight:3,additionalVisualizer:this.state.melodyVis}),Object(D.jsx)(x.a,{type:"dashed",style:{bottom:"20px",position:"absolute",width:"80%",left:"10%"},onClick:function(){return e.props.father.tryChangeAllStyle(e.state.style)},children:"Change all styles to current style"})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{style:e.style}}}]),a}(n.Component);function ne(e,t){for(var a=e.length;a--;)if(e[a]===t)return!0;return!1}var se=G.a.Title,le=U.a.Meta,ie=["Preparing...","Loading melodies, initializing melody meta...","Analyzing melodies, constructing progressions...","Loading library, refining progressions according to styles...","Generating textures...","Synthesizing...","Complete!"];function re(){var e=setInterval((function(){var t=document.body.scrollTop||document.documentElement.scrollTop,a=t/5;0!==document.body.scrollTop?document.body.scrollTop-=a:document.documentElement.scrollTop-=a,0===t&&clearInterval(e)}),30)}var oe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={generatingStage:0,generated:[],generatedChordName:null,generatedAccName:null,playing:"stop",textureStyleControl:e.props.values.enable_texture_style,styles:[]},e.count=0,e.calcDivWidth=function(){var t=0;return e.state.generated.forEach((function(e,a,n){t+=75*e.progression.length}),0),t+100+4*(e.state.generated.length+3)+2},e.playMp3=function(t){"stop"===e.state.playing?(e.mp3=new Audio(P+"/wav/".concat(Math.random())),e.mp3.play(),e.mp3.addEventListener("ended",(function(t){e.setState({playing:"stop"})})),e.setState({playing:"playing"})):"pause"===e.state.playing?(e.mp3.play(),e.setState({playing:"playing"})):"playing"===e.state.playing&&(e.setState({playing:"pause"}),e.mp3.pause())},e.askStage=function(){I("/stage_query",Object(j.a)(e),null,"get",null,e.askStageCallback),7===e.state.generatingStage&&(window.clearInterval(e.askStageInterval),I("/generated_query",Object(j.a)(e),null,"get",null,e.generateQueryCallback))},e.askStageCallback=function(t){"ok"===t.status&&e.setState({generatingStage:parseInt(t.stage)})},e.generateQueryCallback=function(t){"ok"===t.status&&e.setState({generated:t.log,styles:t.log.map((function(e){return e.style})),generatedChordName:t.chord_midi_name,generatedAccName:t.acc_midi_name})},e.regenerate=function(){var t=e.props.values;t.chord_style=e.state.styles,t.rhythm_density=e.refs.form.getFieldValue("rhythm_density"),t.voice_number=e.refs.form.getFieldValue("voice_number"),t.enable_texture_style=e.refs.form.getFieldValue("enable_texture_style"),I("/generate",Object(j.a)(e),null,"post",t),e.askStageInterval=setInterval(e.askStage,500),e.setState({generated:[],generatingStage:0,playing:"stop"}),re()},e.tryChangeAllStyle=function(t){for(var a=[],n=0;n<e.state.generated.length;n++)ce(e.state.generated[n].otherStyles,t)?a.push(t):a.push(e.state.styles[n]);e.setState({styles:a})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.askStageInterval=setInterval(this.askStage,500)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.askStageInterval),this.setState({playing:"stop"}),this.mp3=null}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"upper",children:[Object(D.jsx)("div",{style:{width:"50%",float:"left",height:"100%"},children:Object(D.jsx)("div",{className:"status",children:ie.map((function(t,a){return a<e.state.generatingStage||a===e.state.generatingStage&&6===e.state.generatingStage?Object(D.jsxs)("p",{children:[Object(D.jsx)(B.a,{style:{marginRight:"6px"}}),t]}):a===e.state.generatingStage?Object(D.jsxs)("p",{children:[Object(D.jsx)(q.a,{style:{marginRight:"6px"}}),t]}):Object(D.jsx)("p",{})}))})}),Object(D.jsx)("div",{style:{width:"50%",float:"right",height:"100%"},children:0===this.state.generated.length?Object(D.jsxs)("div",{style:{paddingLeft:"50px",paddingRight:"50px",textAlign:"center"},children:[Object(D.jsx)(se,{level:1,style:{float:"right",fontSize:"25px",color:"#AAAAAA",userSelect:"none"},children:"Generating, please wait..."}),Object(D.jsx)(b.a,{}),Object(D.jsx)(Y.a,{size:"large",style:{marginTop:"50px"}})]}):Object(D.jsxs)("div",{style:{paddingLeft:"50px",paddingRight:"50px"},children:[Object(D.jsx)(se,{level:1,style:{float:"right",fontSize:"25px",color:"#AAAAAA",userSelect:"none"},children:"Progression generated!"}),Object(D.jsx)(b.a,{}),Object(D.jsx)("a",{download:"chord.mid",href:"http://127.0.0.1:5000/midi/".concat(this.state.generatedChordName),children:Object(D.jsx)(U.a,{hoverable:!0,style:{marginTop:"10px",marginBottom:"10px"},children:Object(D.jsx)(le,{avatar:Object(D.jsx)(Q,{which:"midi"}),title:Object(D.jsx)("div",{style:{fontSize:"20px"},children:"Download Chords"}),description:"MIDI consist a melody track and a progression track"})})}),Object(D.jsx)("a",{download:"accompaniment.mid",href:"http://127.0.0.1:5000/midi/".concat(this.state.generatedAccName),children:Object(D.jsx)(U.a,{hoverable:!0,style:{marginTop:"10px",marginBottom:"10px"},children:Object(D.jsx)(le,{avatar:Object(D.jsx)(Q,{which:"midi"}),title:Object(D.jsx)("div",{style:{fontSize:"20px"},children:"Download Accompaniment"}),description:"MIDI consist a melody track and a accompaniment track"})})})]})})]}),Object(D.jsx)("div",{className:"down",style:{marginBottom:"30px"},children:0===this.state.generated.length?Object(D.jsx)("div",{style:{width:"100%"},children:Object(D.jsx)(K.a,{style:{marginTop:"150px"},description:"Progression not generated yet."})}):Object(D.jsx)("div",{style:{minWidth:this.calcDivWidth()},children:Object(D.jsxs)("div",{style:{padding:"2px"},children:[Object(D.jsx)("div",{className:"card-start",children:Object(D.jsx)(W.a,{style:{lineHeight:"485px",fontSize:"25px"}})}),this.state.generated.map((function(t,a){return Object(D.jsx)(ae,{data:t,father:e,index:a,style:e.state.styles[a]})})),Object(D.jsx)("div",{className:"card-end",children:Object(D.jsx)(H.a,{style:{lineHeight:"485px",fontSize:"25px"}})})]})})}),Object(D.jsxs)(m.a,{ref:"form",initialValues:{enable_texture_style:this.props.values.enable_texture_style,rhythm_density:this.props.values.rhythm_density,voice_number:this.props.values.voice_number},children:[Object(D.jsx)(m.a.Item,{name:"enable_texture_style",label:"Enable Texture Style Controlling",valuePropName:"checked",children:Object(D.jsx)(O.a,{checked:this.state.textureStyleControl,onChange:function(t){return e.setState({textureStyleControl:t.target.checked})}})}),Object(D.jsx)(m.a.Item,{name:"rhythm_density",label:"Texture Rhythm Density (RD)",rules:[{required:!0,message:"Please select a RD!"}],children:Object(D.jsx)(v.a,{max:4,min:0,step:1,dots:!0,disabled:!this.state.textureStyleControl})}),Object(D.jsx)(m.a.Item,{name:"voice_number",label:"Texture Voice Number (VN)",rules:[{required:!0,message:"Please select a VN!"}],children:Object(D.jsx)(v.a,{max:4,min:0,step:1,dots:!0,disabled:!this.state.textureStyleControl})})]}),Object(D.jsx)("div",{style:{marginTop:"50px",marginLeft:"20%",marginRight:"20%",textAlign:"center"},children:0===this.state.generated.length?Object(D.jsx)(x.a,{shape:"round",type:"primary",size:"large",style:{height:"40px"},disabled:!0,children:Object(D.jsx)("div",{style:{fontSize:"16px"},children:"Re-generate subject to the selected styles"})}):Object(D.jsx)(x.a,{shape:"round",type:"primary",size:"large",style:{height:"40px"},onClick:this.regenerate,children:Object(D.jsx)("div",{style:{fontSize:"16px"},children:"Re-generate subject to the selected styles"})})}),Object(D.jsx)("div",{style:{minHeight:"50px"}})]})}}]),a}(n.Component);function ce(e,t){for(var a=e.length;a--;)if(e[a]===t)return!0;return!1}var de=a(625),he=(a(611),de.a.Step),ue=G.a.Title,je={title:"Set Parameters",des:"Upload melodies."},pe={title:"Generate Accompaniment",des:"Choose the best."};var me=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onSubmit=function(t,a){e.setState({step:1,values:a}),function(){var e=setInterval((function(){var t=document.body.scrollTop||document.documentElement.scrollTop,a=t/4;0!==document.body.scrollTop?document.body.scrollTop-=a:document.documentElement.scrollTop-=a,0===t&&clearInterval(e)}),30)}()},e.state={step:0,values:[]},L.a.subscribe("submit",e.onSubmit),e}return Object(c.a)(a,[{key:"render",value:function(){return Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"head",children:[Object(D.jsx)("a",{href:"/",children:Object(D.jsxs)(ue,{level:1,style:{float:"left",marginTop:"0px",fontSize:"55px"},className:"title",children:[Object(D.jsx)("span",{style:{color:"#003b76"},children:"A"}),"cco",Object(D.jsx)("span",{style:{color:"#003b76"},children:"M"}),"ontage",Object(D.jsx)("span",{style:{color:"#003b76"},children:"2"})]})}),Object(D.jsxs)(de.a,{current:this.state.step,style:{maxWidth:"500px",float:"right",marginTop:"10px",marginBottom:"20px"},children:[Object(D.jsx)(he,{title:je.title,description:je.des}),Object(D.jsx)(he,{title:pe.title,description:pe.des})]})]}),Object(D.jsx)(b.a,{style:{marginBottom:"50px",backgroundColor:"#003b76"}}),0===this.state.step?Object(D.jsx)(F,{}):Object(D.jsx)(oe,{values:this.state.values})]})}}]),a}(n.Component),be=a(623),ge=a(317),ye=a(422),xe=Object(D.jsxs)("div",{style:{paddingLeft:"5%",paddingRight:"5%"},children:[Object(D.jsx)(G.a.Title,{level:4,children:"What are required before generation?"}),Object(D.jsx)(G.a.Title,{level:5,children:"Melody"}),Object(D.jsx)(G.a.Paragraph,{children:"AccoMonatage2 needs a leading melody to generate accompaniment. Please drag the melody to the box or click to upload your melody piece. Melody must be a single-track MIDI file (or multi-track with the melody piece at the first track)."}),Object(D.jsx)(G.a.Title,{level:5,children:"Phrases (segmentation)"}),Object(D.jsx)(G.a.Paragraph,{children:"You must also specify the phrases of the uploaded melody. Each phrase has a name and a length. Phrases with the same name are considered as similar phrases when generating textures. Currently, the length of the phrases only supports 4-bar and 8-bar. Please make sure your melody can fit in the phrase structures."}),Object(D.jsx)(G.a.Title,{level:5,children:"Tonic & mode & meter"}),Object(D.jsx)(G.a.Paragraph,{children:"You must specify a tonic, mode, and meter for the melody. For example, a melody piece in C Major key and four fourths beat has tonic=C, mode=Major, meter=4/4. Note that currently only 4/4 is supported."}),Object(D.jsx)(G.a.Title,{level:5,children:"Chord style"}),Object(D.jsxs)(G.a.Paragraph,{children:["The chord style control is optional. You can click on ",Object(D.jsx)(G.a.Text,{code:!0,children:"Enable Chord Style Controlling"})," to activate chord style control. Currently, there are 4 styles in total, AccoMonatage2 will tend to use the selected style to harmonize the melody (but not guaranteed)."]}),Object(D.jsx)(G.a.Title,{level:5,children:"Texture style"}),Object(D.jsx)(G.a.Paragraph,{children:"The texture style control is also optional. Five levels of rhythm density and voice number are available."})]}),Oe=Object(D.jsxs)("div",{style:{paddingLeft:"5%",paddingRight:"5%"},children:[Object(D.jsx)(G.a.Title,{level:4,children:"When generating..."}),Object(D.jsx)(G.a.Paragraph,{children:"Please wait patiently, the generating process might take 1 minute. You can view the process on the left part."}),Object(D.jsx)(G.a.Title,{level:4,children:"After generated"}),Object(D.jsx)(G.a.Title,{level:5,children:"Listen and download"}),Object(D.jsx)(G.a.Paragraph,{children:"You may click to listen to the generated audio or download the generated MIDI file. You can aslo listen to the audio of each phrase separately by clicking the piano roll."}),Object(D.jsx)(G.a.Title,{level:5,children:"Change style and re-generate"}),Object(D.jsx)(G.a.Paragraph,{children:"The choosen chord style of each phrase is displayed. You can click on and choose a new style. Some styles may not be available. You can also change the texture style of the whole melody. Click on the button at the bottom to re-generate based on new styles."})]}),ve=Object(D.jsxs)("div",{style:{paddingLeft:"5%",paddingRight:"5%"},children:[Object(D.jsx)(G.a.Title,{level:5,children:"Why the generation result is not satisfying?"}),Object(D.jsx)(G.a.Paragraph,{children:"There might be multiple reasons. Please go through the following check list to improve the output result."}),Object(D.jsx)(G.a.Paragraph,{children:Object(D.jsxs)("ul",{children:[Object(D.jsxs)("li",{children:[Object(D.jsx)(G.a.Text,{strong:!0,children:"Blank melody at the begining. "}),"AccoMontage2 marks the first bar of the melody as the begining of the first phrase. If your melody have a piece of blank at the begining and you are not willing to make it part of your phrase, please remove it (including anacrusis)."]}),Object(D.jsxs)("li",{children:[Object(D.jsx)(G.a.Text,{strong:!0,children:"Melody is too sparse. "}),"AccoMontage2 generates only based on the melody. Please make sure the melody have enough notes for reference. Sparce melody might also produce dissatisfying results."]}),Object(D.jsxs)("li",{children:[Object(D.jsx)(G.a.Text,{strong:!0,children:"Melody not homophonic. "}),"AccoMontage2 prefers homophonic music. That is to say, the melody is expected to have at most one note playing at any moment."]}),Object(D.jsxs)("li",{children:[Object(D.jsx)(G.a.Text,{strong:!0,children:"Tempo too large or too small. "}),"In most cases, AccoMonatage2 will harmonize a bar with a single chord. If this is not your wish, you can modify the tempo to a suitable range (usually tempo between 70-120 will produce good results)."]}),Object(D.jsxs)("li",{children:[Object(D.jsx)(G.a.Text,{strong:!0,children:"Wrong tonic/mode/meter. "}),"This might cause the algorithm to generate someting that is completely wrong."]})]})}),Object(D.jsx)(G.a.Paragraph,{children:"If you are very sure that the above problem is already solved, you can also try other chord styles and texture styles, or even phrase structures (e.g., split an 8-bar phrase into two 4-bar phrases)."}),Object(D.jsx)(G.a.Title,{level:5,children:"Why the generation fails?"}),Object(D.jsxs)(G.a.Paragraph,{children:["Please make sure the phrase label is correct. Currently, a limitation is the melody cannot exceed the labeled phrases. Please make sure your last note is within the provided phrases. Other bugs please contact ",Object(D.jsx)("a",{href:!0,children:"anonymous@anonymous.com"}),"."]}),Object(D.jsx)(G.a.Title,{level:5,children:"Why the piano roll cannot show up?"}),Object(D.jsxs)(G.a.Paragraph,{children:["Piano roll is supported by ",Object(D.jsx)("a",{href:"https://github.com/googlecreativelab/chrome-music-lab",children:"Chrome Music Lab"}),". If your region do not have access to Google, the piano roll might fails to render. We are also updating the technolody to overcome this predicament."]})]});var fe=function(){var e=s.a.useState(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],l=function(){n(!1)};return Object(D.jsxs)("div",{children:[Object(D.jsxs)(x.a,{shape:"link",style:{marginLeft:"92%",marginTop:"20px"},onClick:function(){return n(!0)},children:[Object(D.jsx)(ye.a,{}),"Help"]}),Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(me,{})}),Object(D.jsx)("div",{style:{minHeight:"70px",textAlign:"center",backgroundColor:"#003b76"},children:Object(D.jsx)("h4",{style:{color:"white",paddingTop:"20px"},children:"Interface for AccoMontage2"})}),Object(D.jsx)(be.a,{title:"AccoMonatage2 GUI Help",visible:a,width:800,onOk:l,onCancel:l,footer:[Object(D.jsx)(x.a,{type:"primary",onClick:l,children:"Ok"})],children:Object(D.jsxs)(ge.a,{defaultActiveKey:"1",centered:!0,children:[Object(D.jsx)(ge.a.TabPane,{tab:"Set Parameters Page",children:xe},"1"),Object(D.jsx)(ge.a.TabPane,{tab:"Generating Page",children:Oe},"2"),Object(D.jsx)(ge.a.TabPane,{tab:"Other Q&A",children:ve},"3")]})})]})};a(612);i.a.render(Object(D.jsx)(s.a.StrictMode,{children:Object(D.jsx)(fe,{})}),document.getElementById("root"))}},[[614,1,2]]]);
//# sourceMappingURL=main.f1932ae3.chunk.js.map